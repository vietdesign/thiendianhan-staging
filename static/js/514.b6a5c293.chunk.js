"use strict";(self.webpackChunklunar_calendar=self.webpackChunklunar_calendar||[]).push([[514],{514:(e,t,s)=>{s.d(t,{cacheManager:()=>i,cachedFirebaseOperations:()=>r});var c=s(220),a=s(469);const i=new class{constructor(){this.cache=new Map,this.cacheExpiry=new Map,this.defaultTTL=3e5,this.maxCacheSize=1e3}set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultTTL;this.cache.size>=this.maxCacheSize&&this.cleanup(),this.cache.set(e,t),this.cacheExpiry.set(e,Date.now()+s)}get(e){const t=this.cacheExpiry.get(e);return!t||Date.now()>t?(this.delete(e),null):this.cache.get(e)}delete(e){this.cache.delete(e),this.cacheExpiry.delete(e)}cleanup(){const e=Date.now();for(const[t,s]of this.cacheExpiry.entries())e>s&&this.delete(t)}clear(){this.cache.clear(),this.cacheExpiry.clear()}getStats(){return{size:this.cache.size,maxSize:this.maxCacheSize,hitRate:this.hitCount/(this.hitCount+this.missCount)}}},r={async getUserData(e){const t=`user_${e}`;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){const e=i.get(t);if(e)return e}try{const s=await(0,c.getDoc)((0,c.doc)(a.db,"users",e)),r=s.exists()?{id:s.id,...s.data()}:null;return r&&i.set(t,r,12e4),r}catch(s){return console.error("Error fetching user data:",s),null}},async getArticles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const t=`articles_${e}`;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){const e=i.get(t);if(e)return e}try{const s=(0,c.P)((0,c.rJ)(a.db,"articles"),(0,c._M)("status","==","published"),(0,c.My)("createdAt","desc"),e(e)),r=(await(0,c.GG)(s)).docs.map((e=>({id:e.id,...e.data()})));return i.set(t,r,3e5),r}catch(s){return console.error("Error fetching articles:",s),[]}},async getSettings(){const e="app_settings";if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){const t=i.get(e);if(t)return t}try{const t=await(0,c.getDoc)((0,c.doc)(a.db,"admin","settings")),s=t.exists()?t.data():{};return i.set(e,s,6e5),s}catch(t){return console.error("Error fetching settings:",t),{}}}}}}]);