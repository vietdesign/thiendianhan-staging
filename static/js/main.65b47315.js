/*! For license information please see main.65b47315.js.LICENSE.txt */
(()=>{var e={19:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>bt,AcroFormAppearance:()=>vt,AcroFormButton:()=>ht,AcroFormCheckBox:()=>pt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>ut,AcroFormEditBox:()=>dt,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>xt,AcroFormPushButton:()=>mt,AcroFormRadioButton:()=>At,AcroFormTextField:()=>ft,GState:()=>Ee,ShadingPattern:()=>Me,TilingPattern:()=>ke,default:()=>Le,jsPDF:()=>Le});var r=n(284),s=Uint8Array,i=Uint16Array,a=Int32Array,o=new s([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new s([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new s([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new i(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var s=new a(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)s[o]=o-n[r]<<5|r;return{b:n,r:s}},d=u(o,2),h=d.b,m=d.r;h[28]=258,m[258]=28;for(var A=u(l,0),g=A.b,p=A.r,f=new i(32768),x=0;x<32768;++x){var v=(43690&x)>>1|(21845&x)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,f[x]=((65280&v)>>8|(255&v)<<8)>>1}var y=function(e,t,n){for(var r=e.length,s=0,a=new i(t);s<r;++s)e[s]&&++a[e[s]-1];var o,l=new i(t);for(s=1;s<t;++s)l[s]=l[s-1]+a[s-1]<<1;if(n){o=new i(1<<t);var c=15-t;for(s=0;s<r;++s)if(e[s])for(var u=s<<4|e[s],d=t-e[s],h=l[e[s]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[f[h]>>c]=u}else for(o=new i(r),s=0;s<r;++s)e[s]&&(o[s]=f[l[e[s]-1]++]>>15-e[s]);return o},b=new s(288);for(x=0;x<144;++x)b[x]=8;for(x=144;x<256;++x)b[x]=9;for(x=256;x<280;++x)b[x]=7;for(x=280;x<288;++x)b[x]=8;var w=new s(32);for(x=0;x<32;++x)w[x]=5;var N=y(b,9,0),j=y(b,9,1),C=y(w,5,0),T=y(w,5,1),S=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},_=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},E=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},B=function(e){return(e+7)/8|0},M=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new s(e.subarray(t,n))},k=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(e,t,n){var r=new Error(t||k[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,L),!n)throw r;return r},I=function(e,t,n,r){var i=e.length,a=r?r.length:0;if(!i||t.f&&!t.l)return n||new s(0);var u=!n,d=u||2!=t.i,m=t.i;u&&(n=new s(3*i));var A=function(e){var t=n.length;if(e>t){var r=new s(Math.max(2*t,e));r.set(n),n=r}},p=t.f||0,f=t.p||0,x=t.b||0,v=t.l,b=t.d,w=t.m,N=t.n,C=8*i;do{if(!v){p=_(e,f,1);var k=_(e,f+1,3);if(f+=3,!k){var I=e[(K=B(f)+4)-4]|e[K-3]<<8,D=K+I;if(D>i){m&&L(0);break}d&&A(x+I),n.set(e.subarray(K,D),x),t.b=x+=I,t.p=f=8*D,t.f=p;continue}if(1==k)v=j,b=T,w=9,N=5;else if(2==k){var P=_(e,f,31)+257,F=_(e,f+10,15)+4,U=P+_(e,f+5,31)+1;f+=14;for(var R=new s(U),O=new s(19),H=0;H<F;++H)O[c[H]]=_(e,f+3*H,7);f+=3*F;var Q=S(O),z=(1<<Q)-1,V=y(O,Q,1);for(H=0;H<U;){var K,G=V[_(e,f,z)];if(f+=15&G,(K=G>>4)<16)R[H++]=K;else{var q=0,W=0;for(16==K?(W=3+_(e,f,3),f+=2,q=R[H-1]):17==K?(W=3+_(e,f,7),f+=3):18==K&&(W=11+_(e,f,127),f+=7);W--;)R[H++]=q}}var $=R.subarray(0,P),X=R.subarray(P);w=S($),N=S(X),v=y($,w,1),b=y(X,N,1)}else L(1);if(f>C){m&&L(0);break}}d&&A(x+131072);for(var Y=(1<<w)-1,J=(1<<N)-1,Z=f;;Z=f){var ee=(q=v[E(e,f)&Y])>>4;if((f+=15&q)>C){m&&L(0);break}if(q||L(2),ee<256)n[x++]=ee;else{if(256==ee){Z=f,v=null;break}var te=ee-254;if(ee>264){var ne=o[H=ee-257];te=_(e,f,(1<<ne)-1)+h[H],f+=ne}var re=b[E(e,f)&J],se=re>>4;re||L(3),f+=15&re;X=g[se];if(se>3){ne=l[se];X+=E(e,f)&(1<<ne)-1,f+=ne}if(f>C){m&&L(0);break}d&&A(x+131072);var ie=x+te;if(x<X){var ae=a-X,oe=Math.min(X,ie);for(ae+x<0&&L(3);x<oe;++x)n[x]=r[ae+x]}for(;x<ie;++x)n[x]=n[x-X]}}t.l=v,t.p=Z,t.b=x,t.f=p,v&&(p=1,t.m=w,t.d=b,t.n=N)}while(!p);return x!=n.length&&u?M(n,0,x):n.subarray(0,x)},D=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},P=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},F=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,o=n.slice();if(!a)return{t:V,l:0};if(1==a){var l=new s(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var c=n[0],u=n[1],d=0,h=1,m=2;for(n[0]={s:-1,f:c.f+u.f,l:c,r:u};h!=a-1;)c=n[n[d].f<n[m].f?d++:m++],u=n[d!=h&&n[d].f<n[m].f?d++:m++],n[h++]={s:-1,f:c.f+u.f,l:c,r:u};var A=o[0].s;for(r=1;r<a;++r)o[r].s>A&&(A=o[r].s);var g=new i(A+1),p=U(n[h-1],g,0);if(p>t){r=0;var f=0,x=p-t,v=1<<x;for(o.sort((function(e,t){return g[t.s]-g[e.s]||e.f-t.f}));r<a;++r){var y=o[r].s;if(!(g[y]>t))break;f+=v-(1<<p-g[y]),g[y]=t}for(f>>=x;f>0;){var b=o[r].s;g[b]<t?f-=1<<t-g[b]++-1:++r}for(;r>=0&&f;--r){var w=o[r].s;g[w]==t&&(--g[w],++f)}p=t}return{t:new s(g),l:p}},U=function(e,t,n){return-1==e.s?Math.max(U(e.l,t,n+1),U(e.r,t,n+1)):t[e.s]=n},R=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new i(++t),r=0,s=e[0],a=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==s&&l!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=e[l]}return{c:n.subarray(0,r),n:t}},O=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},H=function(e,t,n){var r=n.length,s=B(t+2);e[s]=255&r,e[s+1]=r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var i=0;i<r;++i)e[s+i+4]=n[i];return 8*(s+4+r)},Q=function(e,t,n,r,s,a,u,d,h,m,A){D(t,A++,n),++s[256];for(var g=F(s,15),p=g.t,f=g.l,x=F(a,15),v=x.t,j=x.l,T=R(p),S=T.c,_=T.n,E=R(v),B=E.c,M=E.n,k=new i(19),L=0;L<S.length;++L)++k[31&S[L]];for(L=0;L<B.length;++L)++k[31&B[L]];for(var I=F(k,7),U=I.t,Q=I.l,z=19;z>4&&!U[c[z-1]];--z);var V,K,G,q,W=m+5<<3,$=O(s,b)+O(a,w)+u,X=O(s,p)+O(a,v)+u+14+3*z+O(k,U)+2*k[16]+3*k[17]+7*k[18];if(h>=0&&W<=$&&W<=X)return H(t,A,e.subarray(h,h+m));if(D(t,A,1+(X<$)),A+=2,X<$){V=y(p,f,0),K=p,G=y(v,j,0),q=v;var Y=y(U,Q,0);D(t,A,_-257),D(t,A+5,M-1),D(t,A+10,z-4),A+=14;for(L=0;L<z;++L)D(t,A+3*L,U[c[L]]);A+=3*z;for(var J=[S,B],Z=0;Z<2;++Z){var ee=J[Z];for(L=0;L<ee.length;++L){var te=31&ee[L];D(t,A,Y[te]),A+=U[te],te>15&&(D(t,A,ee[L]>>5&127),A+=ee[L]>>12)}}}else V=N,K=b,G=C,q=w;for(L=0;L<d;++L){var ne=r[L];if(ne>255){P(t,A,V[(te=ne>>18&31)+257]),A+=K[te+257],te>7&&(D(t,A,ne>>23&31),A+=o[te]);var re=31&ne;P(t,A,G[re]),A+=q[re],re>3&&(P(t,A,ne>>5&8191),A+=l[re])}else P(t,A,V[ne]),A+=K[ne]}return P(t,A,V[256]),A+K[256]},z=new a([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),V=new s(0),K=function(e,t,n,r,c,u){var d=u.z||e.length,h=new s(r+d+5*(1+Math.ceil(d/7e3))+c),A=h.subarray(r,h.length-c),g=u.l,f=7&(u.r||0);if(t){f&&(A[0]=u.r>>3);for(var x=z[t-1],v=x>>13,y=8191&x,b=(1<<n)-1,w=u.p||new i(32768),N=u.h||new i(b+1),j=Math.ceil(n/3),C=2*j,T=function(t){return(e[t]^e[t+1]<<j^e[t+2]<<C)&b},S=new a(25e3),_=new i(288),E=new i(32),k=0,L=0,I=u.i||0,D=0,P=u.w||0,F=0;I+2<d;++I){var U=T(I),R=32767&I,O=N[U];if(w[R]=O,N[U]=R,P<=I){var V=d-I;if((k>7e3||D>24576)&&(V>423||!g)){f=Q(e,A,0,S,_,E,L,D,F,I-F,f),D=k=L=0,F=I;for(var K=0;K<286;++K)_[K]=0;for(K=0;K<30;++K)E[K]=0}var G=2,q=0,W=y,$=R-O&32767;if(V>2&&U==T(I-$))for(var X=Math.min(v,V)-1,Y=Math.min(32767,I),J=Math.min(258,V);$<=Y&&--W&&R!=O;){if(e[I+G]==e[I+G-$]){for(var Z=0;Z<J&&e[I+Z]==e[I+Z-$];++Z);if(Z>G){if(G=Z,q=$,Z>X)break;var ee=Math.min($,Z-2),te=0;for(K=0;K<ee;++K){var ne=I-$+K&32767,re=ne-w[ne]&32767;re>te&&(te=re,O=ne)}}}$+=(R=O)-(O=w[R])&32767}if(q){S[D++]=268435456|m[G]<<18|p[q];var se=31&m[G],ie=31&p[q];L+=o[se]+l[ie],++_[257+se],++E[ie],P=I+G,++k}else S[D++]=e[I],++_[e[I]]}}for(I=Math.max(I,P);I<d;++I)S[D++]=e[I],++_[e[I]];f=Q(e,A,g,S,_,E,L,D,F,I-F,f),g||(u.r=7&f|A[f/8|0]<<3,f-=7,u.h=N,u.p=w,u.i=I,u.w=P)}else{for(I=u.w||0;I<d+g;I+=65535){var ae=I+65535;ae>=d&&(A[f/8|0]=g,ae=d),f=H(A,f+1,e.subarray(I,ae))}u.i=d}return M(h,0,r+B(f)+c)},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,i=0|n.length,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=r+=n[a];r=(65535&r)+15*(r>>16),s=(65535&s)+15*(s>>16)}e=r,t=s},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},q=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new s(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return K(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},W=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},$=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=G();s.p(t.dictionary),W(e,2,s.d())}},X=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&L(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&L(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function Y(e,t){t||(t={});var n=G();n.p(e);var r=q(e,t,t.dictionary?6:2,4);return $(r,t),W(r,r.length-4,n.d()),r}function J(e,t){return I(e.subarray(X(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(V,{stream:!0})}catch(yn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var ne={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function re(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){le(r.response,t,n)},r.onerror=function(){ne.error("could not download file")},r.send()}function se(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function ie(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ae,oe,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,r.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=ee.URL||ee.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin!==location.origin?se(s.href)?re(e,t,n):ie(s,s.target="_blank"):ie(s)):(s.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(s.href)}),4e4),setTimeout((function(){ie(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(se(e))re(e,t,n);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){ie(s)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,r.A)(t)&&(ne.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return re(e,t,n);var i="application/octet-stream"===e.type,a=/constructor/i.test(ee.HTMLElement)||ee.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,r.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,u=c.createObjectURL(e);s?s.location=u:location.href=u,s=null,setTimeout((function(){c.revokeObjectURL(u)}),4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,a=s.exec(e);a&&(t=i(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function ue(e,t){var n=e[0],r=e[1],s=e[2],i=e[3];n=he(n,r,s,i,t[0],7,-680876936),i=he(i,n,r,s,t[1],12,-389564586),s=he(s,i,n,r,t[2],17,606105819),r=he(r,s,i,n,t[3],22,-1044525330),n=he(n,r,s,i,t[4],7,-176418897),i=he(i,n,r,s,t[5],12,1200080426),s=he(s,i,n,r,t[6],17,-1473231341),r=he(r,s,i,n,t[7],22,-45705983),n=he(n,r,s,i,t[8],7,1770035416),i=he(i,n,r,s,t[9],12,-1958414417),s=he(s,i,n,r,t[10],17,-42063),r=he(r,s,i,n,t[11],22,-1990404162),n=he(n,r,s,i,t[12],7,1804603682),i=he(i,n,r,s,t[13],12,-40341101),s=he(s,i,n,r,t[14],17,-1502002290),n=me(n,r=he(r,s,i,n,t[15],22,1236535329),s,i,t[1],5,-165796510),i=me(i,n,r,s,t[6],9,-1069501632),s=me(s,i,n,r,t[11],14,643717713),r=me(r,s,i,n,t[0],20,-373897302),n=me(n,r,s,i,t[5],5,-701558691),i=me(i,n,r,s,t[10],9,38016083),s=me(s,i,n,r,t[15],14,-660478335),r=me(r,s,i,n,t[4],20,-405537848),n=me(n,r,s,i,t[9],5,568446438),i=me(i,n,r,s,t[14],9,-1019803690),s=me(s,i,n,r,t[3],14,-187363961),r=me(r,s,i,n,t[8],20,1163531501),n=me(n,r,s,i,t[13],5,-1444681467),i=me(i,n,r,s,t[2],9,-51403784),s=me(s,i,n,r,t[7],14,1735328473),n=Ae(n,r=me(r,s,i,n,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Ae(i,n,r,s,t[8],11,-2022574463),s=Ae(s,i,n,r,t[11],16,1839030562),r=Ae(r,s,i,n,t[14],23,-35309556),n=Ae(n,r,s,i,t[1],4,-1530992060),i=Ae(i,n,r,s,t[4],11,1272893353),s=Ae(s,i,n,r,t[7],16,-155497632),r=Ae(r,s,i,n,t[10],23,-1094730640),n=Ae(n,r,s,i,t[13],4,681279174),i=Ae(i,n,r,s,t[0],11,-358537222),s=Ae(s,i,n,r,t[3],16,-722521979),r=Ae(r,s,i,n,t[6],23,76029189),n=Ae(n,r,s,i,t[9],4,-640364487),i=Ae(i,n,r,s,t[12],11,-421815835),s=Ae(s,i,n,r,t[15],16,530742520),n=ge(n,r=Ae(r,s,i,n,t[2],23,-995338651),s,i,t[0],6,-198630844),i=ge(i,n,r,s,t[7],10,1126891415),s=ge(s,i,n,r,t[14],15,-1416354905),r=ge(r,s,i,n,t[5],21,-57434055),n=ge(n,r,s,i,t[12],6,1700485571),i=ge(i,n,r,s,t[3],10,-1894986606),s=ge(s,i,n,r,t[10],15,-1051523),r=ge(r,s,i,n,t[1],21,-2054922799),n=ge(n,r,s,i,t[8],6,1873313359),i=ge(i,n,r,s,t[15],10,-30611744),s=ge(s,i,n,r,t[6],15,-1560198380),r=ge(r,s,i,n,t[13],21,1309151649),n=ge(n,r,s,i,t[4],6,-145523070),i=ge(i,n,r,s,t[11],10,-1120210379),s=ge(s,i,n,r,t[2],15,718787259),r=ge(r,s,i,n,t[9],21,-343485551),e[0]=Ne(n,e[0]),e[1]=Ne(r,e[1]),e[2]=Ne(s,e[2]),e[3]=Ne(i,e[3])}function de(e,t,n,r,s,i){return t=Ne(Ne(t,e),Ne(r,i)),Ne(t<<s|t>>>32-s,n)}function he(e,t,n,r,s,i,a){return de(t&n|~t&r,e,t,s,i,a)}function me(e,t,n,r,s,i,a){return de(t&r|n&~r,e,t,s,i,a)}function Ae(e,t,n,r,s,i,a){return de(t^n^r,e,t,s,i,a)}function ge(e,t,n,r,s,i,a){return de(n^(t|~r),e,t,s,i,a)}function pe(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ue(r,fe(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(ue(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,ue(r,s),r}function fe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ae=ee.atob.bind(ee),oe=ee.btoa.bind(ee);var xe="0123456789abcdef".split("");function ve(e){for(var t="",n=0;n<4;n++)t+=xe[e>>8*n+4&15]+xe[e>>8*n&15];return t}function ye(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function be(e){return pe(e).map(ye).join("")}var we="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=ve(e[t]);return e.join("")}(pe("hello"));function Ne(e,t){if(we){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function je(e,t){var n,r,s,i;if(e!==n){for(var a=(s=e,i=1+(256/e.length|0),new Array(i+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=e,r=o}else o=r;var d=t.length,h=0,m=0,A="";for(l=0;l<d;l++)m=(m+(u=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=u,a=o[(o[h]+o[m])%256],A+=String.fromCharCode(t.charCodeAt(l)^a);return A}var Ce={print:4,modify:8,copy:16,"annot-forms":32};function Te(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach((function(e){if(void 0!==Ce.perm)throw new Error("Invalid permission: "+e);s+=Ce[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var i=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=be(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=je(this.encryptionKey,this.padding)}function Se(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);t+=s<33||35===s||37===s||40===s||41===s||47===s||60===s||62===s||91===s||93===s||123===s||125===s||s>126?"#"+("0"+s.toString(16)).slice(-2):e[r]}return t}function _e(e){if("object"!==(0,r.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[n,!!r],s},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[n]){var a=t[n][i];try{a[0].apply(e,r)}catch(n){ee.console&&ne.error("jsPDF PubSub Error",n.message,n)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ee(e){if(!(this instanceof Ee))return new Ee(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Be(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Me(e,t,n,r,s){if(!(this instanceof Me))return new Me(e,t,n,r,s);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Be.call(this,r,s)}function ke(e,t,n,r,s){if(!(this instanceof ke))return new ke(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Be.call(this,r,s)}function Le(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",s=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,u="S",d=null;"object"===(0,r.A)(e=e||{})&&(n=e.orientation,s=e.unit||s,i=e.format||i,a=e.compress||e.compressPdf||a,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(!0===a?["FlateEncode"]:o),s=s||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},A={internal:{},__private__:{}};A.__private__.PubSub=_e;var g="1.3",p=A.__private__.getPdfVersion=function(){return g};A.__private__.setPdfVersion=function(e){g=e};var f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};A.__private__.getPageFormats=function(){return f};var x=A.__private__.getPageFormat=function(e){return f[e]};i=i||"a4";var v="compat",y="advanced",b=v;function w(){this.saveGraphicsState(),J(new Ve(xe,0,0,-xe,0,Nn()*xe).toString()+" cm"),this.setFontSize(this.getFontSize()/xe),u="n",b=y}function N(){this.restoreGraphicsState(),u="S",b=v}var j=A.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};A.advancedAPI=function(e){var t=b===v;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},A.compatAPI=function(e){var t=b===y;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},A.isAdvancedAPI=function(){return b===y};var C,T=function(e){if(b!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=A.roundToPrecision=A.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};C=A.hpf=A.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var _=A.f2=A.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return S(e,2)},E=A.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return S(e,3)},B=A.scale=A.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===v?e*xe:b===y?e:void 0},M=function(e){return B(function(e){return b===v?Nn()-e:b===y?e:void 0}(e))};A.__private__.setPrecision=A.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var k,L="00000000000000000000000000000000",I=A.__private__.getFileId=function(){return L},D=A.__private__.setFileId=function(e){return L=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():L.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==d&&(kt=new Te(d.userPermissions,d.userPassword,d.ownerPassword,L)),L};A.setFileId=function(e){return D(e),this},A.getFileId=function(){return I()};var P=A.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),s=Math.abs(t%60),i=[n,H(r),"'",H(s),"'"].join("");return["D:",e.getFullYear(),H(e.getMonth()+1),H(e.getDate()),H(e.getHours()),H(e.getMinutes()),H(e.getSeconds()),i].join("")},F=A.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),i=parseInt(e.substr(12,2),10),a=parseInt(e.substr(14,2),10);return new Date(t,n,r,s,i,a,0)},U=A.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=P(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return k=t},R=A.__private__.getCreationDate=function(e){var t=k;return"jsDate"===e&&(t=F(k)),t};A.setCreationDate=function(e){return U(e),this},A.getCreationDate=function(e){return R(e)};var O,H=A.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},Q=A.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},z=0,V=[],K=[],G=0,q=[],W=[],$=!1,X=K;A.__private__.setCustomOutputDestination=function(e){$=!0,X=e};var Y=function(e){$||(X=e)};A.__private__.resetCustomOutputDestination=function(){$=!1,X=K};var J=A.__private__.out=function(e){return e=e.toString(),G+=e.length+1,X.push(e),X},Z=A.__private__.write=function(e){return J(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=A.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},re=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];A.__private__.getStandardFonts=function(){return re};var se=e.fontSize||16;A.__private__.setFontSize=A.setFontSize=function(e){return se=b===y?e/xe:e,this};var ie,ae=A.__private__.getFontSize=A.getFontSize=function(){return b===v?se:se*xe},ue=e.R2L||!1;A.__private__.setR2L=A.setR2L=function(e){return ue=e,this},A.__private__.getR2L=A.getR2L=function(){return ue};var de,he=A.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ie=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ie=e}else ie=parseInt(e,10)};A.__private__.getZoomMode=function(){return ie};var me,Ae=A.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');de=e};A.__private__.getPageMode=function(){return de};var ge=A.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');me=e};A.__private__.getLayoutMode=function(){return me},A.__private__.setDisplayMode=A.setDisplayMode=function(e,t,n){return he(e),ge(t),Ae(n),this};var pe={title:"",subject:"",author:"",keywords:"",creator:""};A.__private__.getDocumentProperty=function(e){if(-1===Object.keys(pe).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pe[e]},A.__private__.getDocumentProperties=function(){return pe},A.__private__.setDocumentProperties=A.setProperties=A.setDocumentProperties=function(e){for(var t in pe)pe.hasOwnProperty(t)&&e[t]&&(pe[t]=e[t]);return this},A.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(pe).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pe[e]=t};var fe,xe,ve,ye,be,we={},Ne={},je=[],Ce={},Be={},Ie={},De={},Pe=null,Fe=0,Ue=[],Re=new _e(A),Oe=e.hotfixes||[],He={},Qe={},ze=[],Ve=function e(t,n,r,s,i,a){if(!(this instanceof e))return new e(t,n,r,s,i,a);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(s)&&(s=1),isNaN(i)&&(i=0),isNaN(a)&&(a=0),this._matrix=[t,n,r,s,i,a]};Object.defineProperty(Ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ve.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ve.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(e)},Ve.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,s=e.shx*this.shy+e.sy*this.sy,i=e.tx*this.sx+e.ty*this.shx+this.tx,a=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ve(t,n,r,s,i,a)},Ve.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,i=this.ty,a=Math.sqrt(e*e+t*t),o=(e/=a)*n+(t/=a)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,a=-a),{scale:new Ve(a,0,0,l,0,0),translate:new Ve(1,0,0,1,s,i),rotate:new Ve(e,t,-t,e,0,0),skew:new Ve(1,0,o,1,0,0)}},Ve.prototype.toString=function(e){return this.join(" ")},Ve.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,i=this.ty,a=1/(e*r-t*n),o=r*a,l=-t*a,c=-n*a,u=e*a;return new Ve(o,l,c,u,-o*s-c*i,-l*s-u*i)},Ve.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new pn(t,n)},Ve.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new pn(e.x+e.w,e.y+e.h));return new fn(t.x,t.y,n.x-t.x,n.y-t.y)},Ve.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,s=this.tx,i=this.ty;return new Ve(e,t,n,r,s,i)},A.Matrix=Ve;var Ke=A.matrixMult=function(e,t){return t.multiply(e)},Ge=new Ve(1,0,0,1,0,0);A.unitMatrix=A.identityMatrix=Ge;var qe=function(e,t){if(!Be[e]){var n=(t instanceof Me?"Sh":"P")+(Object.keys(Ce).length+1).toString(10);t.id=n,Be[e]=n,Ce[n]=t,Re.publish("addPattern",t)}};A.ShadingPattern=Me,A.TilingPattern=ke,A.addShadingPattern=function(e,t){return T("addShadingPattern()"),qe(e,t),this},A.beginTilingPattern=function(e){T("beginTilingPattern()"),vn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},A.endTilingPattern=function(e,t){T("endTilingPattern()"),t.stream=W[O].join("\n"),qe(e,t),Re.publish("endTilingPattern",t),ze.pop().restore()};var We,$e=A.__private__.newObject=function(){var e=Xe();return Ye(e,!0),e},Xe=A.__private__.newObjectDeferred=function(){return z++,V[z]=function(){return G},z},Ye=function(e,t){return t="boolean"==typeof t&&t,V[e]=G,t&&J(e+" 0 obj"),e},Je=A.__private__.newAdditionalObject=function(){var e={objId:Xe(),content:""};return q.push(e),e},Ze=Xe(),et=Xe(),tt=A.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",s=0;s<3;s++)r+=("0"+Math.floor(255*parseFloat(t[s])).toString(16)).slice(-2);return r},nt=A.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,s=e.ch2,i=e.ch3,a=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new ce(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,s=c>>8&255,i=255&c}if(void 0===s||void 0===a&&n===s&&s===i)if("string"==typeof n)t=n+" "+o[0];else if(2===e.precision)t=_(n/255)+" "+o[0];else t=E(n/255)+" "+o[0];else if(void 0===a||"object"===(0,r.A)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)t=[n,s,i,o[1]].join(" ");else if(2===e.precision)t=[_(n/255),_(s/255),_(i/255),o[1]].join(" ");else t=[E(n/255),E(s/255),E(i/255),o[1]].join(" ")}else if("string"==typeof n)t=[n,s,i,a,o[2]].join(" ");else if(2===e.precision)t=[_(n),_(s),_(i),_(a),o[2]].join(" ");else t=[E(n),E(s),E(i),E(a),o[2]].join(" ");return t},rt=A.__private__.getFilters=function(){return o},st=A.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||rt(),r=e.alreadyAppliedFilters||[],s=e.addLength1||!1,i=t.length,a=e.objectId,o=function(e){return e};if(null!==d&&void 0===a)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=kt.encryptor(a,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==Le.API.processDataByFilters?Le.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===s&&c.push({key:"Length1",value:i})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var m=[],A=0;A<l.reverseChain.split("/").length-1;A+=1)m.push("null");m.push(c[h].value),c[h].value="["+m.join(" ")+"]"}}J("<<");for(var g=0;g<c.length;g++)J("/"+c[g].key+" "+c[g].value);J(">>"),0!==l.data.length&&(J("stream"),J(o(l.data)),J("endstream"))},it=A.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,s=e.contentsObjId;Ye(r,!0),J("<</Type /Page"),J("/Parent "+e.rootDictionaryObjId+" 0 R"),J("/Resources "+e.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(C(e.mediaBox.bottomLeftX))+" "+parseFloat(C(e.mediaBox.bottomLeftY))+" "+C(e.mediaBox.topRightX)+" "+C(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&J("/CropBox ["+C(e.cropBox.bottomLeftX)+" "+C(e.cropBox.bottomLeftY)+" "+C(e.cropBox.topRightX)+" "+C(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&J("/BleedBox ["+C(e.bleedBox.bottomLeftX)+" "+C(e.bleedBox.bottomLeftY)+" "+C(e.bleedBox.topRightX)+" "+C(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&J("/TrimBox ["+C(e.trimBox.bottomLeftX)+" "+C(e.trimBox.bottomLeftY)+" "+C(e.trimBox.topRightX)+" "+C(e.trimBox.topRightY)+"]"),null!==e.artBox&&J("/ArtBox ["+C(e.artBox.bottomLeftX)+" "+C(e.artBox.bottomLeftY)+" "+C(e.artBox.topRightX)+" "+C(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&J("/UserUnit "+e.userUnit),Re.publish("putPage",{objId:r,pageContext:Ue[t],pageNumber:t,page:n}),J("/Contents "+s+" 0 R"),J(">>"),J("endobj");var i=n.join("\n");return b===y&&(i+="\nQ"),Ye(s,!0),st({data:i,filters:rt(),objectId:s}),J("endobj"),r},at=A.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Fe;e++)Ue[e].objId=Xe(),Ue[e].contentsObjId=Xe();for(e=1;e<=Fe;e++)n.push(it({number:e,data:W[e],objId:Ue[e].objId,contentsObjId:Ue[e].contentsObjId,mediaBox:Ue[e].mediaBox,cropBox:Ue[e].cropBox,bleedBox:Ue[e].bleedBox,trimBox:Ue[e].trimBox,artBox:Ue[e].artBox,userUnit:Ue[e].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));Ye(Ze,!0),J("<</Type /Pages");var r="/Kids [";for(t=0;t<Fe;t++)r+=n[t]+" 0 R ";J(r+"]"),J("/Count "+Fe),J(">>"),J("endobj"),Re.publish("postPutPages")},ot=function(e){Re.publish("putFont",{font:e,out:J,newObject:$e,putStream:st}),!0!==e.isAlreadyPutted&&(e.objectNumber=$e(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Se(e.postScriptName)),J("/Subtype /Type1"),"string"==typeof e.encoding&&J("/Encoding /"+e.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},lt=function(e){e.objectNumber=$e();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[C(e.x),C(e.y),C(e.x+e.width),C(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");st({data:n,additionalKeyValues:t,objectId:e.objectNumber}),J("endobj")},ct=function(e,t){t||(t=21);var n=$e(),r=function(e,t){var n,r=[],s=1/(t-1);for(n=0;n<1;n+=s)r.push(n);if(r.push(1),0!=e[0].offset){var i={offset:0,color:e[0].color};e.unshift(i)}if(1!=e[e.length-1].offset){var a={offset:1,color:e[e.length-1].color};e.push(a)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,d=(n-u)/(e[l+1].offset-u),h=e[l].color,m=e[l+1].color;o+=Q(Math.round((1-d)*h[0]+d*m[0]).toString(16))+Q(Math.round((1-d)*h[1]+d*m[1]).toString(16))+Q(Math.round((1-d)*h[2]+d*m[2]).toString(16))}return o.trim()}(e.colors,t),s=[];s.push({key:"FunctionType",value:"0"}),s.push({key:"Domain",value:"[0.0 1.0]"}),s.push({key:"Size",value:"["+t+"]"}),s.push({key:"BitsPerSample",value:"8"}),s.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),s.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st({data:r,additionalKeyValues:s,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),J("endobj"),e.objectNumber=$e(),J("<< /ShadingType "+e.type),J("/ColorSpace /DeviceRGB");var i="/Coords ["+C(parseFloat(e.coords[0]))+" "+C(parseFloat(e.coords[1]))+" ";2===e.type?i+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3])):i+=C(parseFloat(e.coords[2]))+" "+C(parseFloat(e.coords[3]))+" "+C(parseFloat(e.coords[4]))+" "+C(parseFloat(e.coords[5])),J(i+="]"),e.matrix&&J("/Matrix ["+e.matrix.toString()+"]"),J("/Function "+n+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ut=function(e,t){var n=Xe(),r=$e();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var s=[];s.push({key:"Type",value:"/Pattern"}),s.push({key:"PatternType",value:"1"}),s.push({key:"PaintType",value:"1"}),s.push({key:"TilingType",value:"1"}),s.push({key:"BBox",value:"["+e.boundingBox.map(C).join(" ")+"]"}),s.push({key:"XStep",value:C(e.xStep)}),s.push({key:"YStep",value:C(e.yStep)}),s.push({key:"Resources",value:n+" 0 R"}),e.matrix&&s.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),st({data:e.stream,additionalKeyValues:s,objectId:e.objectNumber}),J("endobj")},dt=function(e){for(var t in e.objectNumber=$e(),J("<<"),e)switch(t){case"opacity":J("/ca "+_(e[t]));break;case"stroke-opacity":J("/CA "+_(e[t]))}J(">>"),J("endobj")},ht=function(e){Ye(e.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in J("/Font <<"),we)we.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&J("/"+e+" "+we[e].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(Ce).length>0){for(var e in J("/Shading <<"),Ce)Ce.hasOwnProperty(e)&&Ce[e]instanceof Me&&Ce[e].objectNumber>=0&&J("/"+e+" "+Ce[e].objectNumber+" 0 R");Re.publish("putShadingPatternDict"),J(">>")}}(),function(e){if(Object.keys(Ce).length>0){for(var t in J("/Pattern <<"),Ce)Ce.hasOwnProperty(t)&&Ce[t]instanceof A.TilingPattern&&Ce[t].objectNumber>=0&&Ce[t].objectNumber<e&&J("/"+t+" "+Ce[t].objectNumber+" 0 R");Re.publish("putTilingPatternDict"),J(">>")}}(e.objectOid),function(){if(Object.keys(Ie).length>0){var e;for(e in J("/ExtGState <<"),Ie)Ie.hasOwnProperty(e)&&Ie[e].objectNumber>=0&&J("/"+e+" "+Ie[e].objectNumber+" 0 R");Re.publish("putGStateDict"),J(">>")}}(),function(){for(var e in J("/XObject <<"),He)He.hasOwnProperty(e)&&He[e].objectNumber>=0&&J("/"+e+" "+He[e].objectNumber+" 0 R");Re.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},mt=function(){var e=[];(function(){for(var e in we)we.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&ot(we[e])})(),function(){var e;for(e in Ie)Ie.hasOwnProperty(e)&&dt(Ie[e])}(),function(){for(var e in He)He.hasOwnProperty(e)&&lt(He[e])}(),function(e){var t;for(t in Ce)Ce.hasOwnProperty(t)&&(Ce[t]instanceof Me?ct(Ce[t]):Ce[t]instanceof ke&&ut(Ce[t],e))}(e),Re.publish("putResources"),e.forEach(ht),ht({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),Re.publish("postPutResources")},At=function(e){Ne[e.fontName]=Ne[e.fontName]||{},Ne[e.fontName][e.fontStyle]=e.id},gt=function(e,t,n,r,s){var i={id:"F"+(Object.keys(we).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:s||!1,metadata:{}};return Re.publish("addFont",{font:i,instance:this}),we[i.id]=i,At(i),i.id},pt=A.__private__.pdfEscape=A.pdfEscape=function(e,t){return function(e,t){var n,r,s,i,a,o,l,c,u;if(s=(t=t||{}).sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&we[fe].metadata&&we[fe].metadata[s]&&we[fe].metadata[s].encoding&&(i=we[fe].metadata[s].encoding,!a&&we[fe].encoding&&(a=we[fe].encoding),!a&&i.codePages&&(a=i.codePages[0]),"string"==typeof a&&(a=i[a]),a)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=a[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ft=A.__private__.beginPage=function(e){W[++Fe]=[],Ue[Fe]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},yt(Fe),Y(W[O])},xt=function(e,t){var r,s,a;switch(n=t||n,"string"==typeof e&&(r=x(e.toLowerCase()),Array.isArray(r)&&(s=r[0],a=r[1])),Array.isArray(e)&&(s=e[0]*xe,a=e[1]*xe),isNaN(s)&&(s=i[0],a=i[1]),(s>14400||a>14400)&&(ne.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),a=Math.min(14400,a)),i=[s,a],n.substr(0,1)){case"l":a>s&&(i=[a,s]);break;case"p":s>a&&(i=[a,s])}ft(i),Jt(Xt),J(on),0!==mn&&J(mn+" J"),0!==An&&J(An+" j"),Re.publish("addPage",{pageNumber:Fe})},vt=function(e){e>0&&e<=Fe&&(W.splice(e,1),Ue.splice(e,1),Fe--,O>Fe&&(O=Fe),this.setPage(O))},yt=function(e){e>0&&e<=Fe&&(O=e)},bt=A.__private__.getNumberOfPages=A.getNumberOfPages=function(){return W.length-1},wt=function(e,t,n){var r,s=void 0;return n=n||{},e=void 0!==e?e:we[fe].fontName,t=void 0!==t?t:we[fe].fontStyle,r=e.toLowerCase(),void 0!==Ne[r]&&void 0!==Ne[r][t]?s=Ne[r][t]:void 0!==Ne[e]&&void 0!==Ne[e][t]?s=Ne[e][t]:!1===n.disableWarning&&ne.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),s||n.noFallback||null==(s=Ne.times[t])&&(s=Ne.times.normal),s},Nt=A.__private__.putInfo=function(){var e=$e(),t=function(e){return e};for(var n in null!==d&&(t=kt.encryptor(e,0)),J("<<"),J("/Producer ("+pt(t("jsPDF "+Le.version))+")"),pe)pe.hasOwnProperty(n)&&pe[n]&&J("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+pt(t(pe[n]))+")");J("/CreationDate ("+pt(t(k))+")"),J(">>"),J("endobj")},jt=A.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ze;switch($e(),J("<<"),J("/Type /Catalog"),J("/Pages "+t+" 0 R"),ie||(ie="fullwidth"),ie){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ie;"%"===n.substr(n.length-1)&&(ie=parseInt(ie)/100),"number"==typeof ie&&J("/OpenAction [3 0 R /XYZ null null "+_(ie)+"]")}switch(me||(me="continuous"),me){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}de&&J("/PageMode /"+de),Re.publish("putCatalog"),J(">>"),J("endobj")},Ct=A.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(z+1)),J("/Root "+z+" 0 R"),J("/Info "+(z-1)+" 0 R"),null!==d&&J("/Encrypt "+kt.oid+" 0 R"),J("/ID [ <"+L+"> <"+L+"> ]"),J(">>")},Tt=A.__private__.putHeader=function(){J("%PDF-"+g),J("%\xba\xdf\xac\xe0")},St=A.__private__.putXRef=function(){var e="0000000000";J("xref"),J("0 "+(z+1)),J("0000000000 65535 f ");for(var t=1;t<=z;t++)"function"==typeof V[t]?J((e+V[t]()).slice(-10)+" 00000 n "):void 0!==V[t]?J((e+V[t]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},_t=A.__private__.buildDocument=function(){z=0,G=0,K=[],V=[],q=[],Ze=Xe(),et=Xe(),Y(K),Re.publish("buildDocument"),Tt(),at(),function(){Re.publish("putAdditionalObjects");for(var e=0;e<q.length;e++){var t=q[e];Ye(t.objId,!0),J(t.content),J("endobj")}Re.publish("postPutAdditionalObjects")}(),mt(),null!==d&&(kt.oid=$e(),J("<<"),J("/Filter /Standard"),J("/V "+kt.v),J("/R "+kt.r),J("/U <"+kt.toHexString(kt.U)+">"),J("/O <"+kt.toHexString(kt.O)+">"),J("/P "+kt.P),J(">>"),J("endobj")),Nt(),jt();var e=G;return St(),Ct(),J("startxref"),J(""+e),J("%%EOF"),Y(W[O]),K.join("\n")},Et=A.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},Bt=A.output=A.__private__.output=(We=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return _t();case"save":A.save(t.filename);break;case"arraybuffer":return te(_t());case"blob":return Et(_t());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(Et(_t()))||void 0;ne.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=_t();try{n=oe(r)}catch(e){n=oe(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var s="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",i=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(s=t.pdfObjectUrl,i="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+s+'"'+i+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ee.open();return null!==o&&o.document.write(a),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ee.open();if(null!==h&&(h.document.write(d),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},We.foo=function(){try{return We.apply(this,arguments)}catch(We){var e=We.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+We.message;if(!ee.console)throw new Error(t);ee.console.error(t,We),ee.alert&&alert(t)}},We.foo.bar=We,We.foo),Mt=function(e){return!0===Array.isArray(Oe)&&Oe.indexOf(e)>-1};switch(s){case"pt":xe=1;break;case"mm":xe=72/25.4;break;case"cm":xe=72/2.54;break;case"in":xe=72;break;case"px":xe=1==Mt("px_scaling")?.75:96/72;break;case"pc":case"em":xe=12;break;case"ex":xe=6;break;default:if("number"!=typeof s)throw new Error("Invalid unit: "+s);xe=s}var kt=null;U(),D();var Lt=A.__private__.getPageInfo=A.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ue[e].objId,pageNumber:e,pageContext:Ue[e]}},It=A.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Ue)if(Ue[t].objId===e)break;return Lt(t)},Dt=A.__private__.getCurrentPageInfo=A.getCurrentPageInfo=function(){return{objId:Ue[O].objId,pageNumber:O,pageContext:Ue[O]}};A.addPage=function(){return xt.apply(this,arguments),this},A.setPage=function(){return yt.apply(this,arguments),Y.call(this,W[O]),this},A.insertPage=function(e){return this.addPage(),this.movePage(O,e),this},A.movePage=function(e,t){var n,r;if(e>t){n=W[e],r=Ue[e];for(var s=e;s>t;s--)W[s]=W[s-1],Ue[s]=Ue[s-1];W[t]=n,Ue[t]=r,this.setPage(t)}else if(e<t){n=W[e],r=Ue[e];for(var i=e;i<t;i++)W[i]=W[i+1],Ue[i]=Ue[i+1];W[t]=n,Ue[t]=r,this.setPage(t)}return this},A.deletePage=function(){return vt.apply(this,arguments),this},A.__private__.text=A.text=function(e,t,n,s,i){var a,o,l,c,u,d,h,A,g,p=(s=s||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var f=n;n=t,t=e,e=f}if(arguments[3]instanceof Ve==0?(l=arguments[4],c=arguments[5],"object"===(0,r.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),s={flags:h,angle:l,align:c})):(T("The transform parameter of text() with a Matrix value"),g=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return p;var x,v="",w="number"==typeof s.lineHeightFactor?s.lineHeightFactor:$t,N=p.internal.scaleFactor;function j(e){return e=e.split("\t").join(Array(s.TabLen||9).join(" ")),pt(e,h)}function S(e){for(var t,n=e.concat(),r=[],s=n.length;s--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function _(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,s,i=e.concat(),a=[],o=i.length;o--;)"string"==typeof(r=i.shift())?a.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(s=t(r[0],r[1],r[2]),a.push([s[0],s[1],s[2]]));n=a}return n}var E=!1,M=!0;if("string"==typeof e)E=!0;else if(Array.isArray(e)){var k=e.concat();o=[];for(var L,I=k.length;I--;)("string"!=typeof(L=k.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(M=!1);E=M}if(!1===E)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var D=se/p.internal.scaleFactor,P=D*(w-1);switch(s.baseline){case"bottom":n-=P;break;case"top":n+=D-P;break;case"hanging":n+=D-2*P;break;case"middle":n+=D/2-P}if((d=s.maxWidth||0)>0&&("string"==typeof e?e=p.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(p.splitTextToSize(t,d))}),[]))),a={text:e,x:t,y:n,options:s,mutex:{pdfEscape:pt,activeFontKey:fe,fonts:we,activeFontSize:se}},Re.publish("preProcessText",a),e=a.text,l=(s=a.options).angle,g instanceof Ve==0&&l&&"number"==typeof l){l*=Math.PI/180,0===s.rotationDirection&&(l=-l),b===y&&(l=-l);var F=Math.cos(l),U=Math.sin(l);g=new Ve(F,U,-U,F,0,0)}else l&&l instanceof Ve&&(g=l);b!==y||g||(g=Ge),void 0!==(u=s.charSpace||dn)&&(v+=C(B(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(A=s.horizontalScale)&&(v+=C(100*A)+" Tz\n"),s.lang;var R=-1,O=void 0!==s.renderingMode?s.renderingMode:s.stroke,H=p.internal.getCurrentPageInfo().pageContext;switch(O){case 0:case!1:case"fill":R=0;break;case 1:case!0:case"stroke":R=1;break;case 2:case"fillThenStroke":R=2;break;case 3:case"invisible":R=3;break;case 4:case"fillAndAddForClipping":R=4;break;case 5:case"strokeAndAddPathForClipping":R=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":R=6;break;case 7:case"addToPathForClipping":R=7}var Q=void 0!==H.usedRenderingMode?H.usedRenderingMode:-1;-1!==R?v+=R+" Tr\n":-1!==Q&&(v+="0 Tr\n"),-1!==R&&(H.usedRenderingMode=R),c=s.align||"left";var z,V=se*w,K=p.internal.pageSize.getWidth(),G=we[fe];u=s.charSpace||dn,d=s.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},s.flags);var q=[],W=function(e){return p.getStringUnitWidth(e,{font:G,charSpace:u,fontSize:se,doKerning:!1})*se/N};if("[object Array]"===Object.prototype.toString.call(e)){var $;o=S(e),"left"!==c&&(z=o.map(W));var X,Y=0;if("right"===c){t-=z[0],e=[],I=o.length;for(var Z=0;Z<I;Z++)0===Z?(X=nn(t),$=rn(n)):(X=B(Y-z[Z]),$=-V),e.push([o[Z],X,$]),Y=z[Z]}else if("center"===c){t-=z[0]/2,e=[],I=o.length;for(var ee=0;ee<I;ee++)0===ee?(X=nn(t),$=rn(n)):(X=B((Y-z[ee])/2),$=-V),e.push([o[ee],X,$]),Y=z[ee]}else if("left"===c){e=[],I=o.length;for(var te=0;te<I;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===G.encoding){e=[],I=o.length,d=0!==d?d:K;for(var ne=0,re=0;re<I;re++)if($=0===re?rn(n):-V,X=0===re?nn(t):ne,re<I-1){var ie=B((d-z[re])/(o[re].split(" ").length-1)),ae=o[re].split(" ");e.push([ae[0]+" ",X,$]),ne=0;for(var oe=1;oe<ae.length;oe++){var le=(W(ae[oe-1]+" "+ae[oe])-W(ae[oe]))*N+ie;oe==ae.length-1?e.push([ae[oe],le,0]):e.push([ae[oe]+" ",le,0]),ne-=le}}else e.push([o[re],X,$]);e.push(["",ne,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],I=o.length,d=0!==d?d:K,re=0;re<I;re++)$=0===re?rn(n):-V,X=0===re?nn(t):0,re<I-1?q.push(C(B((d-z[re])/(o[re].split(" ").length-1)))):q.push(0),e.push([o[re],X,$])}}!0===("boolean"==typeof s.R2L?s.R2L:ue)&&(e=_(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),a={text:e,x:t,y:n,options:s,mutex:{pdfEscape:pt,activeFontKey:fe,fonts:we,activeFontSize:se}},Re.publish("postProcessText",a),e=a.text,x=a.mutex.isHex||!1;var ce=we[fe].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=_(e,(function(e,t,n){return[j(e),t,n]}))),o=S(e),e=[];for(var de,he,me,Ae=Array.isArray(o[0])?1:0,ge="",pe=function(e,t,n){var r="";return n instanceof Ve?(n="number"==typeof s.angle?Ke(n,new Ve(1,0,0,1,e,t)):Ke(new Ve(1,0,0,1,e,t),n),b===y&&(n=Ke(new Ve(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=C(e)+" "+C(t)+" Td\n",r},xe=0;xe<o.length;xe++){switch(ge="",Ae){case 1:me=(x?"<":"(")+o[xe][0]+(x?">":")"),de=parseFloat(o[xe][1]),he=parseFloat(o[xe][2]);break;case 0:me=(x?"<":"(")+o[xe]+(x?">":")"),de=nn(t),he=rn(n)}void 0!==q&&void 0!==q[xe]&&(ge=q[xe]+" Tw\n"),0===xe?e.push(ge+pe(de,he,g)+me):0===Ae?e.push(ge+me):1===Ae&&e.push(ge+pe(de,he,g)+me)}e=0===Ae?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=fe+" "+se+" Tf\n",ve+=C(se*w)+" TL\n",ve+=cn+"\n",ve+=v,ve+=e,J(ve+="ET"),m[fe]=!0,p};var Pt=A.__private__.clip=A.clip=function(e){return J("evenodd"===e?"W*":"W"),this};A.clipEvenOdd=function(){return Pt("evenodd")},A.__private__.discardPath=A.discardPath=function(){return J("n"),this};var Ft=A.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};A.__private__.setDefaultPathOperation=A.setDefaultPathOperation=function(e){return Ft(e)&&(u=e),this};var Ut=A.__private__.getStyle=A.getStyle=function(e){var t=u;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},Rt=A.close=function(){return J("h"),this};A.stroke=function(){return J("S"),this},A.fill=function(e){return Ot("f",e),this},A.fillEvenOdd=function(e){return Ot("f*",e),this},A.fillStroke=function(e){return Ot("B",e),this},A.fillStrokeEvenOdd=function(e){return Ot("B*",e),this};var Ot=function(e,t){"object"===(0,r.A)(t)?zt(t,e):J(e)},Ht=function(e){null===e||b===y&&void 0===e||(e=Ut(e),J(e))};function Qt(e,t,n,r,s){var i=new ke(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,s||this.matrix);i.stream=this.stream;var a=e+"$$"+this.cloneIndex+++"$$";return qe(a,i),i}var zt=function(e,t){var n=Be[e.key],r=Ce[n];if(r instanceof Me)J("q"),J(Vt(t)),r.gState&&A.setGState(r.gState),J(e.matrix.toString()+" cm"),J("/"+n+" sh"),J("Q");else if(r instanceof ke){var s=new Ve(1,0,0,-1,0,Nn());e.matrix&&(s=s.multiply(e.matrix||Ge),n=Qt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,s).id),J("q"),J("/Pattern cs"),J("/"+n+" scn"),r.gState&&A.setGState(r.gState),J(t),J("Q")}},Vt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Kt=A.moveTo=function(e,t){return J(C(B(e))+" "+C(M(t))+" m"),this},Gt=A.lineTo=function(e,t){return J(C(B(e))+" "+C(M(t))+" l"),this},qt=A.curveTo=function(e,t,n,r,s,i){return J([C(B(e)),C(M(t)),C(B(n)),C(M(r)),C(B(s)),C(M(i)),"c"].join(" ")),this};A.__private__.line=A.line=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(s))throw new Error("Invalid arguments passed to jsPDF.line");return b===v?this.lines([[n-e,r-t]],e,t,[1,1],s||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},A.__private__.lines=A.lines=function(e,t,n,r,s,i){var a,o,l,c,u,d,h,m,A,g,p,f;if("number"==typeof e&&(f=n,n=t,t=e,e=f),r=r||[1,1],i=i||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Ft(s)||"boolean"!=typeof i)throw new Error("Invalid arguments passed to jsPDF.lines");for(Kt(t,n),a=r[0],o=r[1],c=e.length,g=t,p=n,l=0;l<c;l++)2===(u=e[l]).length?(g=u[0]*a+g,p=u[1]*o+p,Gt(g,p)):(d=u[0]*a+g,h=u[1]*o+p,m=u[2]*a+g,A=u[3]*o+p,g=u[4]*a+g,p=u[5]*o+p,qt(d,h,m,A,g,p));return i&&Rt(),Ht(s),this},A.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Kt(r[0],r[1]);break;case"l":Gt(r[0],r[1]);break;case"c":qt.apply(this,r);break;case"h":Rt()}}return this},A.__private__.rect=A.rect=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(s))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v&&(r=-r),J([C(B(e)),C(M(t)),C(B(n)),C(B(r)),"re"].join(" ")),Ht(s),this},A.__private__.triangle=A.triangle=function(e,t,n,r,s,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(i)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[s-n,i-r],[e-s,t-i]],e,t,[1,1],a,!0),this},A.__private__.roundedRect=A.roundedRect=function(e,t,n,r,s,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(i)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return s=Math.min(s,.5*n),i=Math.min(i,.5*r),this.lines([[n-2*s,0],[s*o,0,s,i-i*o,s,i],[0,r-2*i],[0,i*o,-s*o,i,-s,i],[2*s-n,0],[-s*o,0,-s,-i*o,-s,-i],[0,2*i-r],[0,-i*o,s*o,-i,s,-i]],e+s,t,[1,1],a,!0),this},A.__private__.ellipse=A.ellipse=function(e,t,n,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(s))throw new Error("Invalid arguments passed to jsPDF.ellipse");var i=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return Kt(e+n,t),qt(e+n,t-a,e+i,t-r,e,t-r),qt(e-i,t-r,e-n,t-a,e-n,t),qt(e-n,t+a,e-i,t+r,e,t+r),qt(e+i,t+r,e+n,t+a,e+n,t),Ht(s),this},A.__private__.circle=A.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Ft(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},A.setFont=function(e,t,n){return n&&(t=j(t,n)),fe=wt(e,t,{disableWarning:!1}),this};var Wt=A.__private__.getFont=A.getFont=function(){return we[wt.apply(A,arguments)]};A.__private__.getFontList=A.getFontList=function(){var e,t,n={};for(e in Ne)if(Ne.hasOwnProperty(e))for(t in n[e]=[],Ne[e])Ne[e].hasOwnProperty(t)&&n[e].push(t);return n},A.addFont=function(e,t,n,r,s){var i=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==i.indexOf(arguments[3])?s=arguments[3]:arguments[3]&&-1==i.indexOf(arguments[3])&&(n=j(n,r)),gt.call(this,e,t,n,s=s||"Identity-H")};var $t,Xt=e.lineWidth||.200025,Yt=A.__private__.getLineWidth=A.getLineWidth=function(){return Xt},Jt=A.__private__.setLineWidth=A.setLineWidth=function(e){return Xt=e,J(C(B(e))+" w"),this};A.__private__.setLineDash=Le.API.setLineDash=Le.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return C(B(e))})).join(" "),t=C(B(t)),J("["+e+"] "+t+" d"),this};var Zt=A.__private__.getLineHeight=A.getLineHeight=function(){return se*$t};A.__private__.getLineHeight=A.getLineHeight=function(){return se*$t};var en=A.__private__.setLineHeightFactor=A.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&($t=e),this},tn=A.__private__.getLineHeightFactor=A.getLineHeightFactor=function(){return $t};en(e.lineHeight);var nn=A.__private__.getHorizontalCoordinate=function(e){return B(e)},rn=A.__private__.getVerticalCoordinate=function(e){return b===y?e:Ue[O].mediaBox.topRightY-Ue[O].mediaBox.bottomLeftY-B(e)},sn=A.__private__.getHorizontalCoordinateString=A.getHorizontalCoordinateString=function(e){return C(nn(e))},an=A.__private__.getVerticalCoordinateString=A.getVerticalCoordinateString=function(e){return C(rn(e))},on=e.strokeColor||"0 G";A.__private__.getStrokeColor=A.getDrawColor=function(){return tt(on)},A.__private__.setStrokeColor=A.setDrawColor=function(e,t,n,r){return on=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),J(on),this};var ln=e.fillColor||"0 g";A.__private__.getFillColor=A.getFillColor=function(){return tt(ln)},A.__private__.setFillColor=A.setFillColor=function(e,t,n,r){return ln=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),J(ln),this};var cn=e.textColor||"0 g",un=A.__private__.getTextColor=A.getTextColor=function(){return tt(cn)};A.__private__.setTextColor=A.setTextColor=function(e,t,n,r){return cn=nt({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var dn=e.charSpace,hn=A.__private__.getCharSpace=A.getCharSpace=function(){return parseFloat(dn||0)};A.__private__.setCharSpace=A.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return dn=e,this};var mn=0;A.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},A.__private__.setLineCap=A.setLineCap=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mn=t,J(t+" J"),this};var An=0;A.__private__.setLineJoin=A.setLineJoin=function(e){var t=A.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return An=t,J(t+" j"),this},A.__private__.setLineMiterLimit=A.__private__.setMiterLimit=A.setLineMiterLimit=A.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(C(B(e))+" M"),this},A.GState=Ee,A.setGState=function(e){(e="string"==typeof e?Ie[De[e]]:gn(null,e)).equals(Pe)||(J("/"+e.id+" gs"),Pe=e)};var gn=function(e,t){if(!e||!De[e]){var n=!1;for(var r in Ie)if(Ie.hasOwnProperty(r)&&Ie[r].equals(t)){n=!0;break}if(n)t=Ie[r];else{var s="GS"+(Object.keys(Ie).length+1).toString(10);Ie[s]=t,t.id=s}return e&&(De[e]=t.id),Re.publish("addGState",t),t}};A.addGState=function(e,t){return gn(e,t),this},A.saveGraphicsState=function(){return J("q"),je.push({key:fe,size:se,color:cn}),this},A.restoreGraphicsState=function(){J("Q");var e=je.pop();return fe=e.key,se=e.size,cn=e.color,Pe=null,this},A.setCurrentTransformationMatrix=function(e){return J(e.toString()+" cm"),this},A.comment=function(e){return J("#"+e),this};var pn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var s="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return s},set:function(e){s=e.toString()}}),this},fn=function(e,t,n,r){pn.call(this,e,t),this.type="rect";var s=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}});var i=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}}),this},xn=function(){this.page=Fe,this.currentPage=O,this.pages=W.slice(0),this.pagesContext=Ue.slice(0),this.x=ve,this.y=ye,this.matrix=be,this.width=bn(O),this.height=Nn(O),this.outputDestination=X,this.id="",this.objectNumber=-1};xn.prototype.restore=function(){Fe=this.page,O=this.currentPage,Ue=this.pagesContext,W=this.pages,ve=this.x,ye=this.y,be=this.matrix,wn(O,this.width),jn(O,this.height),X=this.outputDestination};var vn=function(e,t,n,r,s){ze.push(new xn),Fe=O=0,W=[],ve=e,ye=t,be=s,ft([n,r])};for(var yn in A.beginFormObject=function(e,t,n,r,s){return vn(e,t,n,r,s),this},A.endFormObject=function(e){return function(e){if(Qe[e])ze.pop().restore();else{var t=new xn,n="Xo"+(Object.keys(He).length+1).toString(10);t.id=n,Qe[e]=n,He[n]=t,Re.publish("addFormObject",t),ze.pop().restore()}}(e),this},A.doFormObject=function(e,t){var n=He[Qe[e]];return J("q"),J(t.toString()+" cm"),J("/"+n.id+" Do"),J("Q"),this},A.getFormObject=function(e){var t=He[Qe[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},A.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(Et(_t()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise((function(t,n){try{var r=le(Et(_t()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(r)}catch(e){n(e.message)}}))},Le.API)Le.API.hasOwnProperty(yn)&&("events"===yn&&Le.API.events.length?function(e,t){var n,r,s;for(s=t.length-1;-1!==s;s--)n=t[s][0],r=t[s][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Re,Le.API.events):A[yn]=Le.API[yn]);var bn=A.getPageWidth=function(e){return(Ue[e=e||O].mediaBox.topRightX-Ue[e].mediaBox.bottomLeftX)/xe},wn=A.setPageWidth=function(e,t){Ue[e].mediaBox.topRightX=t*xe+Ue[e].mediaBox.bottomLeftX},Nn=A.getPageHeight=function(e){return(Ue[e=e||O].mediaBox.topRightY-Ue[e].mediaBox.bottomLeftY)/xe},jn=A.setPageHeight=function(e,t){Ue[e].mediaBox.topRightY=t*xe+Ue[e].mediaBox.bottomLeftY};return A.internal={pdfEscape:pt,getStyle:Ut,getFont:Wt,getFontSize:ae,getCharSpace:hn,getTextColor:un,getLineHeight:Zt,getLineHeightFactor:tn,getLineWidth:Yt,write:Z,getHorizontalCoordinate:nn,getVerticalCoordinate:rn,getCoordinateString:sn,getVerticalCoordinateString:an,collections:{},newObject:$e,newAdditionalObject:Je,newObjectDeferred:Xe,newObjectDeferredBegin:Ye,getFilters:rt,putStream:st,events:Re,scaleFactor:xe,pageSize:{getWidth:function(){return bn(O)},setWidth:function(e){wn(O,e)},getHeight:function(){return Nn(O)},setHeight:function(e){jn(O,e)}},encryptionOptions:d,encryption:kt,getEncryptor:function(e){return null!==d?kt.encryptor(e,0):function(e){return e}},output:Bt,getNumberOfPages:bt,pages:W,out:J,f2:_,f3:E,getPageInfo:Lt,getPageInfoByObjId:It,getCurrentPageInfo:Dt,getPDFVersion:p,Point:pn,Rectangle:fn,Matrix:Ve,hasHotfix:Mt},Object.defineProperty(A.internal.pageSize,"width",{get:function(){return bn(O)},set:function(e){wn(O,e)},enumerable:!0,configurable:!0}),Object.defineProperty(A.internal.pageSize,"height",{get:function(){return Nn(O)},set:function(e){jn(O,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=re.length;t<n;t++){var r=gt.call(this,e[t][0],e[t][1],e[t][2],re[t][3],!0);!1===h&&(m[r]=!0);var s=e[t][0].split("-");At({id:r,fontName:s[0],fontStyle:s[1]||""})}Re.publish("addFonts",{fonts:we,dictionary:Ne})}.call(A,re),fe="F1",xt(i,n),Re.publish("initialized"),A}Te.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Te.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Te.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Te.prototype.processOwnerPassword=function(e,t){return je(be(t).substr(0,5),e)},Te.prototype.encryptor=function(e,t){var n=be(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return je(n,e)}},Ee.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,r.A)(e)!==(0,r.A)(this))return!1;var s=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&s--;return 0===s},Le.API={events:[]},Le.version="3.0.1";var Ie=Le.API,De=1,Pe=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fe=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ue=function(e){return e.toFixed(2)},Re=function(e){return e.toFixed(5)};Ie.__acroform__={};var Oe=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},He=function(e){return e*De},Qe=function(e){var t=new it,n=vt.internal.getHeight(e)||0,r=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ue(r)),Number(Ue(n))],t},ze=Ie.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Ve=Ie.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Ke=Ie.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ge=Ie.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ke(e,t-1)},qe=Ie.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ze(e,t-1)},We=Ie.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ve(e,t-1)},$e=Ie.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],i=e[1],a=e[2],o=e[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+o)||0,l.upperRight_X=n(s+a)||0,l.upperRight_Y=r(i)||0,[Number(Ue(l.lowerLeft_X)),Number(Ue(l.lowerLeft_Y)),Number(Ue(l.upperRight_X)),Number(Ue(l.upperRight_Y))]},Xe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Ye(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Ue(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Qe(e);return i.scope=e.scope,i.stream=t.join("\n"),i}},Ye=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(e){return e.split("\n")})):s.map((function(e){return[e]}));var i=n,a=vt.internal.getHeight(e)||0;a=a<0?-a:a;var o=vt.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<s.length){var i=n+" "+s[t+1][0];return Je(i,e,r).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,d=Je("3",e,i).height,h=e.multiline?a-i:(a-d)/2,m=h+=2,A=0,g=0,p=0;if(i<=0){t="(...) Tj\n",t+="% Width of Text: "+Je(t,e,i=12).width+", FieldWidth:"+o+"\n";break}for(var f="",x=0,v=0;v<s.length;v++)if(s.hasOwnProperty(v)){var y=!1;if(1!==s[v].length&&p!==s[v].length-1){if((d+2)*(x+2)+2>a)continue e;f+=s[v][p],y=!0,g=v,v--}else{f=" "==(f+=s[v][p]+" ").substr(f.length-1)?f.substr(0,f.length-1):f;var b=parseInt(v),w=l(b,f,i),N=v>=s.length-1;if(w&&!N){f+=" ",p=0;continue}if(w||N){if(N)g=b;else if(e.multiline&&(d+2)*(x+2)+2>a)continue e}else{if(!e.multiline)continue e;if((d+2)*(x+2)+2>a)continue e;g=b}}for(var j="",C=A;C<=g;C++){var T=s[C];if(e.multiline){if(C===g){j+=T[p]+" ",p=(p+1)%T.length;continue}if(C===A){j+=T[T.length-1]+" ";continue}}j+=T[0]+" "}switch(j=" "==j.substr(j.length-1)?j.substr(0,j.length-1):j,u=Je(j,e,i).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=Ue(c)+" "+Ue(m)+" Td\n",t+="("+Pe(j)+") Tj\n",t+=-Ue(c)+" 0 Td\n",m=-(i+2),u=0,A=y?g:g+1,x++,f=""}break}return r.text=t,r.fontSize=i,r},Je=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},Ze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ot.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ze)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");De=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new at,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&et(r,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var s in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(s)){var i=e[s],a=[],o=i.Rect;if(i.Rect&&(i.Rect=$e(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=vt.createDefaultAppearanceStream(i),"object"===(0,r.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(a=i.getKeyValueListForStream()),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var l=Xe(i);a.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(i.appearanceStreamContent){var c="";for(var u in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(u)){var d=i.appearanceStreamContent[u];if(c+="/"+u+" ",c+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var s in d)if(d.hasOwnProperty(s)){var h=d[s];"function"==typeof h&&(h=h.call(t,i)),c+="/"+s+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=d)&&(h=h.call(t,i)),c+="/"+s+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}a.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var s=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,r.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[s]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},nt=Ie.__acroform__.arrayToPdfArray=function(e,t,n){var s=function(e){return e};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(0!==a&&(i+=" "),(0,r.A)(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":"/"!==e[a].substr(0,1)?(void 0!==t&&n&&(s=n.internal.getEncryptor(t)),i+="("+Pe(s(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rt=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Pe(r(e))+")"},st=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};st.prototype.toString=function(){return this.objId+" 0 R"},st.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},st.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:nt(s,this.objId,this.scope)}):s instanceof st?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):"function"!=typeof s&&e.push({key:r,value:s}))}return e};var it=function(){st.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Oe(it,st);var at=function(){st.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pe(t(e))+")"}},set:function(t){e=t}})};Oe(at,st);var ot=function e(){st.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(t,3))},set:function(e){!0===Boolean(e)?this.F=qe(t,3):this.F=We(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof gt)return;i="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pe(t(i))+")"},set:function(e){i=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){a=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/De:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof gt||this instanceof ft))return rt(d,this.objId,this.scope)},set:function(e){e=e.toString(),d=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ht==0?rt(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ht==0?"("===e.substr(0,1)?Fe(e.substr(1,e.length-2)):Fe(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Fe(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ht==1?"/"+e:e}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ht==0?rt(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof ht==0?"("===e.substr(0,1)?Fe(e.substr(1,e.length-2)):Fe(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Fe(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof ht==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(e){e=Boolean(e),g=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(e){A=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,1):this.Ff=We(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,2):this.Ff=We(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,3):this.Ff=We(this.Ff,3)}});var p=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==p)return p},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');p=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(p){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:p=2;break;case"center":case 1:p=1;break;default:p=0}}})};Oe(ot,st);var lt=function(){ot.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nt(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,s=[];r=t.exec(e);)s.push(r[n]);return s}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,18):this.Ff=We(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=qe(this.Ff,19):this.Ff=We(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=qe(this.Ff,20),t.sort()):this.Ff=We(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,22):this.Ff=We(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,23):this.Ff=We(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,27):this.Ff=We(this.Ff,27)}}),this.hasAppearanceStream=!1};Oe(lt,ot);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};Oe(ct,lt);var ut=function(){ct.call(this),this.combo=!0};Oe(ut,ct);var dt=function(){ut.call(this),this.edit=!0};Oe(dt,ut);var ht=function(){ot.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,15):this.Ff=We(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,16):this.Ff=We(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,17):this.Ff=We(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,26):this.Ff=We(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Pe(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,r.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Oe(ht,ot);var mt=function(){ht.call(this),this.pushButton=!0};Oe(mt,ht);var At=function(){ht.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Oe(At,ht);var gt=function(){var e,t;ot.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),s)n.push("/"+t+" ("+Pe(e(s[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,r.A)(e)&&(s=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(e){"string"==typeof e&&(s.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oe(gt,ot),At.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},At.prototype.createOption=function(e){var t=new gt;return t.Parent=this,t.optionName=e,this.Kids.push(t),yt.call(this.scope,t),t};var pt=function(){ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Oe(pt,ht);var ft=function(){ot.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,13):this.Ff=We(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,21):this.Ff=We(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,23):this.Ff=We(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,24):this.Ff=We(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,25):this.Ff=We(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,26):this.Ff=We(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oe(ft,ot);var xt=function(){ft.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=qe(this.Ff,14):this.Ff=We(this.Ff,14)}}),this.password=!0};Oe(xt,ft);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Ye(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ue(vt.internal.getWidth(e))+" "+Ue(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ue(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=Qe(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],i=vt.internal.getHeight(e),a=vt.internal.getWidth(e),o=Ye(e,e.caption);return s.push("1 g"),s.push("0 0 "+Ue(a)+" "+Ue(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Ue(a-1)+" "+Ue(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Ue(o.fontSize)+" Tf "+r),s.push(o.text),s.push("ET"),s.push("Q"),t.stream=s.join("\n"),t},OffPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ue(vt.internal.getWidth(e))+" "+Ue(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Qe(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=vt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Re(vt.internal.getWidth(e)/2)+" "+Re(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*vt.internal.Bezier_C).toFixed(5)),a=Number((r*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Re(vt.internal.getWidth(e)/2)+" "+Re(vt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Re(vt.internal.getWidth(e)/2)+" "+Re(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=[],r=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Re(vt.internal.getWidth(e)/2)+" "+Re(vt.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Qe(e);t.scope=e.scope;var n=[],r=vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ue(vt.internal.getWidth(e)-2)+" "+Ue(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ue(r.x1.x)+" "+Ue(r.x1.y)+" m"),n.push(Ue(r.x2.x)+" "+Ue(r.x2.y)+" l"),n.push(Ue(r.x4.x)+" "+Ue(r.x4.y)+" m"),n.push(Ue(r.x3.x)+" "+Ue(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=vt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ue(vt.internal.getWidth(e))+" "+Ue(vt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ue(vt.internal.getWidth(e)-2)+" "+Ue(vt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ue(n.x1.x)+" "+Ue(n.x1.y)+" m"),r.push(Ue(n.x2.x)+" "+Ue(n.x2.y)+" l"),r.push(Ue(n.x4.x)+" "+Ue(n.x4.y)+" m"),r.push(Ue(n.x3.x)+" "+Ue(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=Qe(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ue(vt.internal.getWidth(e))+" "+Ue(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),n=vt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},vt.internal.getWidth=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=He(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return"object"===(0,r.A)(e)&&(t=He(e.Rect[3])),t};var yt=Ie.addField=function(e){if(tt(this,e),!(e instanceof ot))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ie.AcroFormChoiceField=lt,Ie.AcroFormListBox=ct,Ie.AcroFormComboBox=ut,Ie.AcroFormEditBox=dt,Ie.AcroFormButton=ht,Ie.AcroFormPushButton=mt,Ie.AcroFormRadioButton=At,Ie.AcroFormCheckBox=pt,Ie.AcroFormTextField=ft,Ie.AcroFormPasswordField=xt,Ie.AcroFormAppearance=vt,Ie.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:dt,Button:ht,PushButton:mt,RadioButton:At,CheckBox:pt,TextField:ft,PasswordField:xt,Appearance:vt},Le.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:ut,EditBox:dt,Button:ht,PushButton:mt,RadioButton:At,CheckBox:pt,TextField:ft,PasswordField:xt,Appearance:vt};var bt=Le.AcroForm;function wt(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(e,r){var s,i,a,o,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in n)for(a=n[l],s=0;s<a.length;s+=1){for(o=!0,i=0;i<a[s].length;i+=1)if(void 0!==a[s][i]&&a[s][i]!==e[i]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(a=n[l],s=0;s<a.length;s+=1){for(o=!0,i=0;i<a[s].length;i+=1)if(void 0!==a[s][i]&&a[s][i]!==e.charCodeAt(i)){o=!1;break}if(!0===o){c=l;break}}return c===t&&r!==t&&(c=r),c},i=function e(t){for(var n=this.internal.write,r=this.internal.putStream,s=(0,this.internal.getFilters)();-1!==s.indexOf("FlateEncode");)s.splice(s.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var i=[];if(i.push({key:"Type",value:"/XObject"}),i.push({key:"Subtype",value:"/Image"}),i.push({key:"Width",value:t.width}),i.push({key:"Height",value:t.height}),t.colorSpace===f.INDEXED?i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(i.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===f.DEVICE_CMYK&&i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),i.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&i.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var a="",o=0,l=t.transparency.length;o<l;o++)a+=t.transparency[o]+" "+t.transparency[o]+" ";i.push({key:"Mask",value:"["+a+"]"})}void 0!==t.sMask&&i.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:i,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===f.INDEXED){var h=this.internal.newObject();r({data:C(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},a=function(){var e=this.internal.collections.addImage_images;for(var t in e)i.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,r.A)(e)&&1===e.nodeType},m=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return ae(unescape(r).split("base64,").pop());var s=e.loadFile(r,!0);if(void 0!==s)return s}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var i;switch(n){case"PNG":i="image/png";break;case"WEBP":i="image/webp";break;default:i="image/jpeg"}return ae(t.toDataURL(i,1).split("base64,").pop())}},A=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},g=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},p=function(e,t,n,r,s,i){var a=g.call(this,n,r,s),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=c.call(this);if(n=a[0],r=a[1],u[s.index]=s,i){i*=Math.PI/180;var d=Math.cos(i),h=Math.sin(i),m=function(e){return e.toFixed(4)},A=[m(d),m(h),m(-1*h),m(d),0,0,"cm"]}this.internal.write("q"),i?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(A.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+s.index+" Do"),this.internal.write("Q")},f=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(N(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},w=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return w()&&e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return w()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},C=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=N(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,s,i,a,o,c,u,d;if("number"==typeof arguments[1]?(n=t,s=arguments[1],i=arguments[2],a=arguments[3],o=arguments[4],c=arguments[5],u=arguments[6],d=arguments[7]):(n=arguments[1],s=arguments[2],i=arguments[3],a=arguments[4],o=arguments[5],c=arguments[6],u=arguments[7],d=arguments[8]),"object"===(0,r.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var m=e;e=m.imageData,n=m.format||n||t,s=m.x||s||0,i=m.y||i||0,a=m.w||m.width||a,o=m.h||m.height||o,c=m.alias||c,u=m.compression||u,d=m.rotation||m.angle||d}var A=this.internal.getFilters();if(void 0===u&&-1!==A.indexOf("FlateEncode")&&(u="SLOW"),isNaN(s)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var g=T.call(this,e,n,c,u);return p.call(this,s,i,a,o,g,d),this};var T=function(n,r,i,a){var o,l,c;if("string"==typeof n&&s(n)===t){n=unescape(n);var g=S(n,!1);(""!==g||void 0!==(g=e.loadFile(n,!0)))&&(n=g)}if(h(n)&&(n=m(n,r)),r=s(n,r),!d(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=i)||0===c.length)&&(i=function(e){return"string"==typeof e||N(e)?v(e):N(e.data)?v(e.data):null}(n)),(o=A.call(this,i))||(w()&&(n instanceof Uint8Array||"RGBA"===r||(l=n,n=j(n))),o=this["process"+r.toUpperCase()](n,u.call(this),i,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:x.NONE}(a),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},S=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var s;n=null!==(s=b(e))&&void 0!==s?s:e;try{r=ae(n)}catch(e){if(t)throw y(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(n){var r,i,a="";if(h(n)&&(n=m(n)),"string"==typeof n&&s(n)===t&&(""===(a=S(n,!1))&&(a=e.loadFile(n)||""),n=a),i=s(n),!d(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!w()||n instanceof Uint8Array||(n=j(n)),!(r=this["process"+i.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=i,r}}(Le.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Le.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,s,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){n=l[d];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(A.objId),f=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+i(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+h(p(n.contents))+")",s+=" /Popup "+g.objId+" 0 R",s+=" /P "+o.objId+" 0 R",s+=" /T ("+h(p(f))+") >>",A.content=s;var x=A.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+i(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+x,n.open&&(s+=" /Open true"),s+=" >>",g.content=s,this.internal.write(A.objId,"0 R",g.objId,"0 R");break;case"freetext":r="/Rect ["+i(n.bounds.x)+" "+a(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(m(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var y=this.annotations._nameMap[n.options.name];n.options.pageNumber=y.page,n.options.top=y.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var b=a(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+b+" "+n.options.zoom+"]"}""!=s&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,s){var i=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;i.pageContext.annotations.push({finalBounds:{x:a(e),y:o(t),w:a(e+n),h:o(t+r)},options:s,type:"link"})},e.textWithLink=function(e,t,n,r){var s,i,a=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){i=r.maxWidth;var l=this.splitTextToSize(e,i).length;s=Math.ceil(o*l)}else i=a,s=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=a/2),"right"===r.align&&(t-=a),this.link(t,n-o,i,s,r),a},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Le.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},a=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return a(e)&&i(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return a(e)&&s.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return a(e)&&i(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return a(e)&&i(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return a(e)&&i(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return a(e)&&i(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,s="",i=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(i++,"number"==typeof(r=r[e.charCodeAt(t)])&&(s+=String.fromCharCode(r),r=n,i=0),t===e.length-1&&(r=n,s+=e.charAt(t-(i-1)),t-=i-1,i=0)):(r=n,s+=e.charAt(t-i),t-=i,i=0);return s};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return a(e)?!1===i(e)?-1:!c(e)||!a(t)&&!a(n)||!a(n)&&o(t)||o(e)&&!a(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&a(t)&&!o(t)&&a(n)&&c(n)?3:o(e)||!a(n)?1:2:-1},m=function(e){var n=0,r=0,s=0,i="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)i=c[n][r],o=c[n][r-1],l=c[n][r+1],a(i)?(s=h(i,o,l),u[n]+=-1!==s?String.fromCharCode(t[i.charCodeAt(0)][s]):i):u[n]+=i;u[n]=d(u[n])}return u.join(" ")},A=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([m(t[r][0]),t[r][1],t[r][2]]):n.push([m(t[r])]);e=n}else e=m(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",A])}(Le.API),Le.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Le.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,s=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var s=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(e){a=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return s.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){s.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),r=t.font||this.getFont(),i=t.scaleFactor||this.internal.scaleFactor,a=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(c.splitTextToSize(t,u))}),[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)a<(l=this.getStringUnitWidth(e[d],{font:r})*n)&&(a=l);return 0!==a&&(o=e.length),{w:a/=i,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/i,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var r=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===e.lineNumber?(e.x=(r.x||0)+(r.width||0),e.y=r.y||0):r.y+r.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=r.y+r.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,u,d){if(s.call(this),!c)throw new Error("No data for PDF table.");var h,m,A,g,p=[],f=[],x=[],v={},y={},b=[],w=[],N=(d=d||{}).autoSize||!1,j=!1!==d.printHeaders,C=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,T=d.margins||Object.assign({width:this.getPageWidth()},t),S="number"==typeof d.padding?d.padding:3,_=d.headerBackgroundColor||"#c8c8c8",E=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=C,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=_,this.internal.__cell__.headerTextColor=E,this.setFontSize(C),null==u)f=p=Object.keys(c[0]),x=p.map((function(){return"left"}));else if(Array.isArray(u)&&"object"===(0,r.A)(u[0]))for(p=u.map((function(e){return e.name})),f=u.map((function(e){return e.prompt||e.name||""})),x=u.map((function(e){return e.align||"left"})),h=0;h<u.length;h+=1)y[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(f=p=u,x=p.map((function(){return"left"})));if(N||Array.isArray(u)&&"string"==typeof u[0])for(h=0;h<p.length;h+=1){for(v[g=p[h]]=c.map((function(e){return e[g]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(f[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=v[g],this.setFont(void 0,"normal"),A=0;A<m.length;A+=1)b.push(this.getTextDimensions(m[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[g]=Math.max.apply(null,b)+S+S,b=[]}if(j){var B={};for(h=0;h<p.length;h+=1)B[p[h]]={},B[p[h]].text=f[h],B[p[h]].align=x[h];var M=l.call(this,B,y);w=p.map((function(t){return new a(e,n,y[t],M,B[t].text,void 0,B[t].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var k=u.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(h=0;h<c.length;h+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:h,data:c[h]},this);var L=l.call(this,c[h],y);for(A=0;A<p.length;A+=1){var I=c[h][p[A]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:h,col:A,data:I},this),o.call(this,new a(e,n,y[p[A]],L,I,h+2,k[p[A]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,s=this.internal.scaleFactor;return Object.keys(e).map((function(r){var s=e[r];return this.splitTextToSize(s.hasOwnProperty("text")?s.text:s,t[r]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*r/s+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){s.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var i=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(i[0],i[1],i[2],i[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Le.API);var Nt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ct=wt(jt),Tt=[100,200,300,400,500,600,700,800,900],St=wt(Tt);function _t(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Nt[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),s=function(e){return"number"==typeof Ct[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function Et(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Lt(e){return e.trimLeft()}function It(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Dt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Pt,Ft,Ut,Rt,Ot=["times"];!function(e){var t,n,s,i,a,o,l,c,u,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var s=0;Object.defineProperty(this,"posX",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}});var i=0;Object.defineProperty(this,"posY",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),u.margin=t}});var a=!1;Object.defineProperty(this,"autoPaging",{get:function(){return a},set:function(e){a=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(e){e instanceof d&&(u=e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(e){u.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=m(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=m(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function A(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))}))})),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=_t(e[n]),s=r.family,i=r.stretch,a=r.style,o=r.weight;t[s]=t[s]||{},t[s][i]=t[s][i]||{},t[s][i][a]=t[s][i][a]||{},t[s][i][a][o]=r}return t}(n.concat(t))}return h}var g=null;Object.defineProperty(this,"fontFaces",{get:function(){return g},set:function(e){h=null,g=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],s=t[4];t[5];var i=t[6],a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(s)[2];s="px"===a?Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(s)*this.pdf.getFontSize()):Math.floor(parseFloat(s)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(s);var o=function(e){var t,n,r=[],s=e.trim();if(""===s)return Ot;if(s in Mt)return[Mt[s]];for(;""!==s;){switch(n=null,t=(s=Lt(s)).charAt(0)){case'"':case"'":n=It(s.substring(1),t);break;default:n=Dt(s)}if(null===n)return Ot;if(r.push(n[0]),""!==(s=Lt(n[1]))&&","!==s.charAt(0))return Ot;s=s.replace(/^,/,"")}return r}(i);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},Bt,n.genericFontFamilies||{}),i=null,a=null,o=0;o<t.length;++o)if(s[(i=_t(t[o])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){a=e[i.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+kt(i)+"' and default family '"+r+"'.");if(a=function(e,t){if(t[e])return t[e];var n=Ct[e],r=n<=Ct.normal?-1:1,s=Et(t,jt,n,r);if(!s)throw new Error("Could not find a matching font-stretch value for "+e);return s}(i.stretch,a),a=function(e,t){if(t[e])return t[e];for(var n=Nt[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(i.style,a),!(a=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=St[e],r=Et(t,Tt,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+kt(i)+"'.");return a}(A(this.pdf,this.fontFaces),o.map((function(e){return{family:e,stretch:"normal",weight:r,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",d={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){u=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))u=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){u=o[h],c="normal";break}}if(""===u)for(var m=0;m<o.length;m++)if(d[o[m]]){u=d[o[m]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,U.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,U.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){b.call(this,"fill",!1)},h.prototype.stroke=function(){b.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,r.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var s=this.ctx.transform.applyToPoint(new o(n,r)),i=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:i.x,y1:i.y,x:s.x,y:s.y}),this.ctx.lastPoint=new o(s.x,s.y)},h.prototype.bezierCurveTo=function(e,t,n,r,s,i){if(isNaN(s)||isNaN(i)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new o(s,i)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},h.prototype.arc=function(e,t,n,r,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s))throw ne.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(i=Boolean(i),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new o(e,t));e=a.x,t=a.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(s-r)>=2*Math.PI&&(r=0,s=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:s,counterclockwise:i})},h.prototype.arcTo=function(e,t,n,r,s){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!A.call(this)){var s={};"butt"!==this.lineCap&&(s.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(s.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),s.hasOwnProperty("lineCap")&&(this.lineCap=s.lineCap),s.hasOwnProperty("lineJoin")&&(this.lineJoin=s.lineJoin)}},h.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},h.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw ne.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(e){var t,n,r,s;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,s=0;else{var i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==i)t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),s=1;else if(null!==(i=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),s=parseFloat(i[4]);else{if(s=1,"string"==typeof e&&"#"!==e.charAt(0)){var a=new ce(e);e=a.ok?a.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:s,style:e}},A=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},g=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!A.call(this)){var s=D(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:i,angle:s,align:this.textAlign,maxWidth:r})}},h.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){r=isNaN(r)?void 0:r;var s=D(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;E.call(this,{text:e,x:t,y:n,scale:i,renderingMode:"stroke",angle:s,align:this.textAlign,maxWidth:r})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw ne.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),s=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:s*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw ne.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,r,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(i))throw ne.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new c(e,t,n,r,s,i);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.setTransform=function(e,t,n,r,s,i){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,s=isNaN(s)?0:s,i=isNaN(i)?0:i,this.ctx.transform=new c(e,t,n,r,s,i)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,r,s,i,a,o,u){var d=this.pdf.getImageProperties(e),h=1,m=1,A=1,g=1;void 0!==r&&void 0!==o&&(A=o/r,g=u/s,h=d.width/r*o/r,m=d.height/s*u/s),void 0===i&&(i=t,a=n,t=0,n=0),void 0!==r&&void 0===o&&(o=r,u=s),void 0===r&&void 0===o&&(o=d.width,u=d.height);for(var x,b=this.ctx.transform.decompose(),N=D(b.rotate.shx),j=new c,C=(j=(j=(j=j.multiply(b.translate)).multiply(b.skew)).multiply(b.scale)).applyToRectangle(new l(i-t*A,a-n*g,r*h,s*m)),T=f.call(this,C),S=[],_=0;_<T.length;_+=1)-1===S.indexOf(T[_])&&S.push(T[_]);if(y(S),this.autoPaging)for(var E=S[0],B=S[S.length-1],M=E;M<B+1;M++){this.pdf.setPage(M);var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===M?this.posY+this.margin[0]:this.margin[0],I=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===M?0:I+(M-2)*P;if(0!==this.ctx.clip_path.length){var U=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(x,this.posX+this.margin[3],-F+L+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=U}var R=JSON.parse(JSON.stringify(C));R=v([R],this.posX+this.margin[3],-F+L+this.ctx.prevPageLastElemOffset)[0];var O=(M>E||M<B)&&p.call(this);O&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,P,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",R.x,R.y,R.w,R.h,null,null,N),O&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",C.x,C.y,C.w,C.h,null,null,N)};var f=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var s=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+s)/n)+1);break;case"arc":r.push(Math.floor((e.y+s-e.radius)/n)+1),r.push(Math.floor((e.y+s+e.radius)/n)+1);break;case"qct":var i=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((i.y+s)/n)+1),r.push(Math.floor((i.y+i.h+s)/n)+1);break;case"bct":var a=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((a.y+s)/n)+1),r.push(Math.floor((a.y+a.h+s)/n)+1);break;case"rect":r.push(Math.floor((e.y+s)/n)+1),r.push(Math.floor((e.y+e.h+s)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)x.call(this);return r},x=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,s=this.lineWidth,i=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=s,this.lineJoin=i},v=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},y=function(e){return e.sort((function(e,t){return e-t}))},b=function(e,t){for(var n,r,s=this.fillStyle,i=this.strokeStyle,a=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),h=[],m=0;m<d.length;m++)if(void 0!==d[m].x)for(var A=f.call(this,d[m]),g=0;g<A.length;g+=1)-1===h.indexOf(A[g])&&h.push(A[g]);for(var b=0;b<h.length;b++)for(;this.pdf.internal.getNumberOfPages()<h[b];)x.call(this);if(y(h),this.autoPaging)for(var N=h[0],j=h[h.length-1],C=N;C<j+1;C++){this.pdf.setPage(C),this.fillStyle=s,this.strokeStyle=i,this.lineCap=a,this.lineWidth=l,this.lineJoin=c;var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],S=1===C?this.posY+this.margin[0]:this.margin[0],_=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],B=1===C?0:_+(C-2)*E;if(0!==this.ctx.clip_path.length){var M=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-B+S+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=M}if(r=JSON.parse(JSON.stringify(u)),this.path=v(r,this.posX+this.margin[3],-B+S+this.ctx.prevPageLastElemOffset),!1===t||0===C){var k=(C>N||C<j)&&p.call(this);k&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,E,null).clip().discardPath()),w.call(this,e,t),k&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=u},w=function(e,t){if(("stroke"!==e||t||!g.call(this))&&("stroke"===e||t||!A.call(this))){for(var n,r,s=[],i=this.path,a=0;a<i.length;a++){var o=i[a];switch(o.type){case"begin":s.push({begin:!0});break;case"close":s.push({close:!0});break;case"mt":s.push({start:o,deltas:[],abs:[]});break;case"lt":var l=s.length;if(i[a-1]&&!isNaN(i[a-1].x)&&(n=[o.x-i[a-1].x,o.y-i[a-1].y],l>0))for(;l>=0;l--)if(!0!==s[l-1].close&&!0!==s[l-1].begin){s[l-1].deltas.push(n),s[l-1].abs.push(o);break}break;case"bct":n=[o.x1-i[a-1].x,o.y1-i[a-1].y,o.x2-i[a-1].x,o.y2-i[a-1].y,o.x-i[a-1].x,o.y-i[a-1].y],s[s.length-1].deltas.push(n);break;case"qct":var c=i[a-1].x+2/3*(o.x1-i[a-1].x),u=i[a-1].y+2/3*(o.y1-i[a-1].y),d=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,p=o.y;n=[c-i[a-1].x,u-i[a-1].y,d-i[a-1].x,h-i[a-1].y,m-i[a-1].x,p-i[a-1].y],s[s.length-1].deltas.push(n);break;case"arc":s.push({deltas:[],abs:[],arc:!0}),Array.isArray(s[s.length-1].abs)&&s[s.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var f=!1,x=0;x<s.length;x++)if(s[x].arc)for(var v=s[x].abs,y=0;y<v.length;y++){var b=v[y];"arc"===b.type?C.call(this,b.x,b.y,b.radius,b.startAngle,b.endAngle,b.counterclockwise,void 0,t,!f):B.call(this,b.x,b.y),f=!0}else if(!0===s[x].close)this.pdf.internal.out("h"),f=!1;else if(!0!==s[x].begin){var w=s[x].start.x,N=s[x].start.y;M.call(this,s[x].deltas,w,N),f=!0}r&&T.call(this,r),t&&S.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},j=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(e,t,n,r,s,i,a,o,l){for(var c=L.call(this,n,r,s,i),u=0;u<c.length;u++){var d=c[u];0===u&&(l?_.call(this,d.x1+e,d.y1+t):B.call(this,d.x1+e,d.y1+t)),k.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}o?S.call(this):T.call(this,a)},T=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(e,t){this.pdf.internal.out(n(e)+" "+s(t)+" m")},E=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=N.call(this,e.y),s=j.call(this,r)-n.h,i=this.ctx.transform.applyToPoint(new o(e.x,r)),a=this.ctx.transform.decompose(),u=new c;u=(u=(u=u.multiply(a.translate)).multiply(a.skew)).multiply(a.scale);for(var d,h,m,A=this.ctx.transform.applyToRectangle(new l(e.x,r,n.w,n.h)),g=u.applyToRectangle(new l(e.x,s,n.w,n.h)),x=f.call(this,g),b=[],C=0;C<x.length;C+=1)-1===b.indexOf(x[C])&&b.push(x[C]);if(y(b),this.autoPaging)for(var T=b[0],S=b[b.length-1],_=T;_<S+1;_++){this.pdf.setPage(_);var E=1===_?this.posY+this.margin[0]:this.margin[0],B=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[2],k=M-this.margin[0],L=this.pdf.internal.pageSize.width-this.margin[1],I=L-this.margin[3],D=1===_?0:B+(_-2)*k;if(0!==this.ctx.clip_path.length){var P=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(d,this.posX+this.margin[3],-1*D+E),w.call(this,"fill",!0),this.path=P}var F=v([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-D+E+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale);var U="text"!==this.autoPaging;if(U||F.y+F.h<=M){if(U||F.y>=E&&F.x<=L){var R=U?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||L-F.x)[0],O=v([JSON.parse(JSON.stringify(A))],this.posX+this.margin[3],-D+E+this.ctx.prevPageLastElemOffset)[0],H=U&&(_>T||_<S)&&p.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,k,null).clip().discardPath()),this.pdf.text(R,O.x,O.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),H&&this.pdf.restoreGraphicsState()}}else F.y<M&&(this.ctx.prevPageLastElemOffset+=M-F.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale),this.pdf.text(e.text,i.x+this.posX,i.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)},B=function(e,t,r,i){r=r||0,i=i||0,this.pdf.internal.out(n(e+r)+" "+s(t+i)+" l")},M=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},k=function(e,n,r,s,o,l,c,u){this.pdf.internal.out([t(i(r+e)),t(a(s+n)),t(i(o+e)),t(a(l+n)),t(i(c+e)),t(a(u+n)),"c"].join(" "))},L=function(e,t,n,r){for(var s=2*Math.PI,i=Math.PI/2;t>n;)t-=s;var a=Math.abs(n-t);a<s&&r&&(a=s-a);for(var o=[],l=r?-1:1,c=t;a>1e-5;){var u=c+l*Math.min(a,i);o.push(I.call(this,e,c,u)),a-=Math.abs(u-c),c=u}return o},I=function(e,t,n){var r=(n-t)/2,s=e*Math.cos(r),i=e*Math.sin(r),a=s,o=-i,l=a*a+o*o,c=l+a*s+o*i,u=4/3*(Math.sqrt(2*l*c)-c)/(a*i-o*s),d=a-u*o,h=o+u*a,m=d,A=-h,g=r+t,p=Math.cos(g),f=Math.sin(g);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:d*p-h*f,y2:d*f+h*p,x3:m*p-A*f,y3:m*f+A*p,x4:e*Math.cos(n),y4:e*Math.sin(n)}},D=function(e){return 180*e/Math.PI},P=function(e,t,n,r,s,i){var a=e+.5*(n-e),o=t+.5*(r-t),c=s+.5*(n-s),u=i+.5*(r-i),d=Math.min(e,s,a,c),h=Math.max(e,s,a,c),m=Math.min(t,i,o,u),A=Math.max(t,i,o,u);return new l(d,m,h-d,A-m)},F=function(e,t,n,r,s,i,a,o){var c,u,d,h,m,A,g,p,f,x,v,y,b,w,N=n-e,j=r-t,C=s-n,T=i-r,S=a-s,_=o-i;for(u=0;u<41;u++)f=(g=(d=e+(c=u/40)*N)+c*((m=n+c*C)-d))+c*(m+c*(s+c*S-m)-g),x=(p=(h=t+c*j)+c*((A=r+c*T)-h))+c*(A+c*(i+c*_-A)-p),0==u?(v=f,y=x,b=f,w=x):(v=Math.min(v,f),y=Math.min(y,x),b=Math.max(b,f),w=Math.max(w,x));return new l(Math.round(v),Math.round(y),Math.round(b-v),Math.round(w-y))},U=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Le.API),function(e){var t=function(e){var t,n,r,s,i,a,o,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,s=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;s>r;r+=4)0!==(i=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(a=(i=((i=((i=((i=(i-(u=i%85))/85)-(c=i%85))/85)-(l=i%85))/85)-(o=i%85))/85)%85,n.push(a+33,o+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,s,i,a=String,o="length",l=255,c="charCodeAt",u="slice",d="replace";for(e[u](-2),e=e[u](0,-2)[d](/\s/g,"")[d]("z","!!!!!"),r=[],s=0,i=(e+=t="uuuuu"[u](e[o]%5||5))[o];i>s;s+=5)n=52200625*(e[c](s)-33)+614125*(e[c](s+1)-33)+7225*(e[c](s+2)-33)+85*(e[c](s+3)-33)+(e[c](s+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),a.fromCharCode.apply(a,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},s=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=Y(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,i){var a=0,o=e||"",l=[];for("string"==typeof(i=i||[])&&(i=[i]),a=0;a<i.length;a+=1)switch(i[a]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=s(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[a]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(Le.API),(Rt=Le.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,s=0,i=function(e){var t=e.length,n=[],r=String.fromCharCode;for(s=0;s<t;s+=1)n.push(r(255&e.charCodeAt(s)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(i(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return i(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},Rt.loadImageFile=Rt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):Promise.resolve().then(n.t.bind(n,52,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function s(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):n.e(82).then(n.bind(n,82))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var i=function(e){var t=(0,r.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(s).then((function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),s=t.firstChild;s;s=s.nextSibling)!0!==n&&1===s.nodeType&&"SCRIPT"===s.nodeName||r.appendChild(e(s,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,s=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete s.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var i=0;i<n.length;++i){var a=n[i],o=a.src.find((function(e){return"truetype"===e.format}));o&&t.addFont(o.url,a.ref.name,a.ref.style)}return s.windowHeight=s.windowHeight||0,s.windowHeight=0==s.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):s.windowHeight,t.context2d.save(!0),e(this.prop.container,s)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},o.prototype.get=function(e,t){return this.then((function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},o.prototype.setMargin=function(e){return this.then((function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||Le.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),s=n.call(r,e,t);return o.convert(s,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Le.getPageSize=function(e,t,n){if("object"===(0,r.A)(e)){var s=e;e=s.orientation,t=s.unit||t,n=s.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,a=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var l,c=0,u=0;if(o.hasOwnProperty(a))c=o[a][1]/i,u=o[a][0]/i;else try{c=n[1],u=n[0]}catch(Rt){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",u>c&&(l=u,u=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>u&&(l=u,u=c,c=l)}return{width:u,height:c,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(_t):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(Le.API),Le.API.addJS=function(e){return Ut=e,this.internal.events.subscribe("postPutResources",(function(){Pt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Pt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ft=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ut+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Pt&&void 0!==Ft&&this.internal.out("/Names <</JavaScript "+Pt+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),s=0;s<r.length;s++){var i=r[s],a=n.exec(i);if(null!=a){var o=a[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(i)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(s=0;s<l;s++){var u=e.internal.newObject();c.push(u);var d=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<c.length;s++)e.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var s=t.children[r];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var i=this.count=this.count_r({count:0},s);if(i>0&&this.line("/Count "+i),s.options&&s.options.pageNumber){var a=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Le.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,s,i,a){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=i||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),s=e.length,i={width:0,height:0,numcomponents:1},a=4;a<s;a+=2){if(a+=r,-1!==t.indexOf(e.charCodeAt(a+1))){n=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),i={width:256*e.charCodeAt(a+7)+e.charCodeAt(a+8),height:n,numcomponents:e.charCodeAt(a+9)};break}r=256*e.charCodeAt(a+2)+e.charCodeAt(a+3)}return i}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:a,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Le.API);var Ht,Qt,zt,Vt,Kt,Gt=function(){var e,t,n;function r(e){var t,n,r,s,i,a,o,l,c,u,d,h,m,A;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),s=this.readUInt16()||100,a.delay=1e3*i/s,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(m=0;0<=u?m<u:m>u;0<=u?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,d.slice(o+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(A=this.colorType)||6===A,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,s=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function i(i,a,o,l){var c,u,d,h,m,A,g,p,f,x,v,y,b,w,N,j,C,T,S,_,E,B=Math.ceil((s.width-i)/o),M=Math.ceil((s.height-a)/l),k=s.width==B&&s.height==M;for(w=t*B,y=k?n:new Uint8Array(w*M),A=e.length,b=0,u=0;b<M&&r<A;){switch(e[r++]){case 0:for(h=C=0;C<w;h=C+=1)y[u++]=e[r++];break;case 1:for(h=T=0;T<w;h=T+=1)c=e[r++],m=h<t?0:y[u-t],y[u++]=(c+m)%256;break;case 2:for(h=S=0;S<w;h=S+=1)c=e[r++],d=(h-h%t)/t,N=b&&y[(b-1)*w+d*t+h%t],y[u++]=(N+c)%256;break;case 3:for(h=_=0;_<w;h=_+=1)c=e[r++],d=(h-h%t)/t,m=h<t?0:y[u-t],N=b&&y[(b-1)*w+d*t+h%t],y[u++]=(c+Math.floor((m+N)/2))%256;break;case 4:for(h=E=0;E<w;h=E+=1)c=e[r++],d=(h-h%t)/t,m=h<t?0:y[u-t],0===b?N=j=0:(N=y[(b-1)*w+d*t+h%t],j=d&&y[(b-1)*w+(d-1)*t+h%t]),g=m+N-j,p=Math.abs(g-m),x=Math.abs(g-N),v=Math.abs(g-j),f=p<=x&&p<=v?m:x<=v?N:j,y[u++]=(c+f)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!k){var L=((a+b*l)*s.width+i)*t,I=b*w;for(h=0;h<B;h+=1){for(var D=0;D<t;D+=1)n[L++]=y[I++];L+=(o-1)*t}}b++}}return e=J(e),1==s.interlaceMethod?(i(0,0,8,8),i(4,0,8,8),i(0,4,4,8),i(2,0,4,4),i(0,2,2,4),i(1,0,2,2),i(0,1,1,2)):i(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,s,i,a,o,l;for(n=this.palette,i=this.transparency.indexed||[],s=new Uint8Array((i.length||0)+n.length),r=0,e=0,t=a=0,o=n.length;a<o;t=a+=3)s[r++]=n[t],s[r++]=n[t+1],s[r++]=n[t+2],s[r++]=null!=(l=i[e++])?l:255;return s},r.prototype.copyToImageData=function(e,t){var n,r,s,i,a,o,l,c,u,d,h;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(s=e.data||e).length,a=u||t,i=o=0,1===r)for(;i<c;)l=u?4*t[i/4]:o,d=a[l++],s[i++]=d,s[i++]=d,s[i++]=d,s[i++]=n?a[l++]:255,o=l;else for(;i<c;)l=u?4*t[i/4]:o,s[i++]=a[l++],s[i++]=a[l++],s[i++]=a[l++],s[i++]=n?a[l++]:255,o=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var s=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return s(),e=function(e){var r;if(!0===s())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,s,i,a,o,l,c;if(this.animation){for(c=[],r=a=0,o=(l=this.animation.frames).length;a<o;r=++a)n=l[r],s=t.createImageData(n.width,n.height),i=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(s,i),n.imageData=s,c.push(n.image=e(s));return c}},r.prototype.renderFrame=function(e,t){var n,r,s;return n=(r=this.animation.frames)[t],s=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=s?s.disposeOp:void 0)?e.clearRect(s.xOffset,s.yOffset,s.width,s.height):2===(null!=s?s.disposeOp:void 0)&&e.putImageData(s.imageData,s.xOffset,s.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,s,i,a,o=this;return n=0,a=this.animation,s=a.numFrames,r=a.frames,i=a.numPlays,(t=function(){var a,l;if(a=n++%s,l=r[a],o.renderFrame(e,a),s>1&&n/s<i)return o.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function qt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,a=1<<1+(7&s);e[t++],e[t++];var o=null,l=null;i&&(o=t,l=a,t+=3*a);var c=!0,u=[],d=0,h=null,m=0,A=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,A=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var g=e[t++];d=e[t++]|e[t++]<<8,h=e[t++],0==(1&g)&&(h=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var p=e[t++]|e[t++]<<8,f=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++],b=y>>6&1,w=1<<1+(7&y),N=o,j=l,C=!1;y>>7&&(C=!0,N=t,j=w,t+=3*w);var T=t;for(t++;;){var S;if(!((S=e[t++])>=0))throw Error("Invalid block size");if(0===S)break;t+=S}u.push({x:p,y:f,width:x,height:v,has_local_palette:C,palette_offset:N,palette_size:j,data_offset:T,data_length:t-T,transparent_index:h,interlaced:!!b,delay:d,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return A},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var s=this.frameInfo(t),i=s.width*s.height,a=new Uint8Array(i);Wt(e,s.data_offset,a,i);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,u=n-c,d=c,h=4*(s.y*n+s.x),m=4*((s.y+s.height)*n+s.x),A=h,g=4*u;!0===s.interlaced&&(g+=4*n*7);for(var p=8,f=0,x=a.length;f<x;++f){var v=a[f];if(0===d&&(d=c,(A+=g)>=m&&(g=4*u+4*n*(p-1),A=h+(c+u)*(p<<1),p>>=1)),v===l)A+=4;else{var y=e[o+3*v],b=e[o+3*v+1],w=e[o+3*v+2];r[A++]=w,r[A++]=b,r[A++]=y,r[A++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,r){var s=this.frameInfo(t),i=s.width*s.height,a=new Uint8Array(i);Wt(e,s.data_offset,a,i);var o=s.palette_offset,l=s.transparent_index;null===l&&(l=256);var c=s.width,u=n-c,d=c,h=4*(s.y*n+s.x),m=4*((s.y+s.height)*n+s.x),A=h,g=4*u;!0===s.interlaced&&(g+=4*n*7);for(var p=8,f=0,x=a.length;f<x;++f){var v=a[f];if(0===d&&(d=c,(A+=g)>=m&&(g=4*u+4*n*(p-1),A=h+(c+u)*(p<<1),p>>=1)),v===l)A+=4;else{var y=e[o+3*v],b=e[o+3*v+1],w=e[o+3*v+2];r[A++]=y,r[A++]=b,r[A++]=w,r[A++]=255}--d}}}function Wt(e,t,n,r){for(var s=e[t++],i=1<<s,a=i+1,o=a+1,l=s+1,c=(1<<l)-1,u=0,d=0,h=0,m=e[t++],A=new Int32Array(4096),g=null;;){for(;u<16&&0!==m;)d|=e[t++]<<u,u+=8,1===m?m=e[t++]:--m;if(u<l)break;var p=d&c;if(d>>=l,u-=l,p!==i){if(p===a)break;for(var f=p<o?p:g,x=0,v=f;v>i;)v=A[v]>>8,++x;var y=v;if(h+x+(f!==p?1:0)>r)return void ne.log("Warning, gif stream longer than expected.");n[h++]=y;var b=h+=x;for(f!==p&&(n[h++]=y),v=f;x--;)v=A[v],n[--b]=255&v,v>>=8;null!==g&&o<4096&&(A[o++]=g<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),g=p}else o=a+1,c=(1<<(l=s+1))-1,g=null}return h!==r&&ne.log("Warning, gif stream shorter than expected."),n}function $t(e){var t,n,r,s,i,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),m=new Array(64),A=new Array(64),g=[],p=0,f=7,x=new Array(64),v=new Array(64),y=new Array(64),b=new Array(256),w=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],M=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function k(e,t){for(var n=0,r=0,s=new Array,i=1;i<=16;i++){for(var a=1;a<=e[i];a++)s[t[r]]=[],s[t[r]][0]=n,s[t[r]][1]=i,r++,n++;n*=2}return s}function L(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(p|=1<<f),n--,--f<0&&(255==p?(I(255),I(0)):I(p),f=7,p=0)}function I(e){g.push(e)}function D(e){I(e>>8&255),I(255&e)}function P(e,t,n,r,s){for(var i,a=s[0],o=s[240],l=function(e,t){var n,r,s,i,a,o,l,c,u,d,h=0;for(u=0;u<8;++u){n=e[h],r=e[h+1],s=e[h+2],i=e[h+3],a=e[h+4],o=e[h+5],l=e[h+6];var A=n+(c=e[h+7]),g=n-c,p=r+l,f=r-l,x=s+o,v=s-o,y=i+a,b=i-a,w=A+y,N=A-y,j=p+x,C=p-x;e[h]=w+j,e[h+4]=w-j;var T=.707106781*(C+N);e[h+2]=N+T,e[h+6]=N-T;var S=.382683433*((w=b+v)-(C=f+g)),_=.5411961*w+S,E=1.306562965*C+S,B=.707106781*(j=v+f),M=g+B,k=g-B;e[h+5]=k+_,e[h+3]=k-_,e[h+1]=M+E,e[h+7]=M-E,h+=8}for(h=0,u=0;u<8;++u){n=e[h],r=e[h+8],s=e[h+16],i=e[h+24],a=e[h+32],o=e[h+40],l=e[h+48];var L=n+(c=e[h+56]),I=n-c,D=r+l,P=r-l,F=s+o,U=s-o,R=i+a,O=i-a,H=L+R,Q=L-R,z=D+F,V=D-F;e[h]=H+z,e[h+32]=H-z;var K=.707106781*(V+Q);e[h+16]=Q+K,e[h+48]=Q-K;var G=.382683433*((H=O+U)-(V=P+I)),q=.5411961*H+G,W=1.306562965*V+G,$=.707106781*(z=U+P),X=I+$,Y=I-$;e[h+40]=Y+q,e[h+24]=Y-q,e[h+8]=X+W,e[h+56]=X-W,h++}for(u=0;u<64;++u)d=e[u]*t[u],m[u]=d>0?d+.5|0:d-.5|0;return m}(e,t),c=0;c<64;++c)A[N[c]]=l[c];var u=A[0]-n;n=A[0],0==u?L(r[0]):(L(r[h[i=32767+u]]),L(d[i]));for(var g=63;g>0&&0==A[g];)g--;if(0==g)return L(a),n;for(var p,f=1;f<=g;){for(var x=f;0==A[f]&&f<=g;)++f;var v=f-x;if(v>=16){p=v>>4;for(var y=1;y<=p;++y)L(o);v&=15}i=32767+A[f],L(s[(v<<4)+h[i]]),L(d[i]),f++}return 63!=g&&L(a),n}function F(e){e=Math.min(Math.max(e,1),100),i!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[N[n]]=r}for(var s=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var d=a((s[i]*e+50)/100);d=Math.min(Math.max(d,1),255),l[N[i]]=d}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],m=0,A=0;A<8;A++)for(var g=0;g<8;g++)c[m]=1/(o[N[m]]*h[A]*h[g]*8),u[m]=1/(l[N[m]]*h[A]*h[g]*8),m++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i){i&&F(i),g=new Array,p=0,f=7,D(65496),D(65504),D(16),I(74),I(70),I(73),I(70),I(0),I(1),I(1),I(0),D(1),D(1),I(0),I(0),function(){D(65499),D(132),I(0);for(var e=0;e<64;e++)I(o[e]);I(1);for(var t=0;t<64;t++)I(l[t])}(),function(e,t){D(65472),D(17),I(8),D(t),D(e),I(3),I(1),I(17),I(0),I(2),I(17),I(1),I(3),I(17),I(1)}(e.width,e.height),function(){D(65476),D(418),I(0);for(var e=0;e<16;e++)I(j[e+1]);for(var t=0;t<=11;t++)I(C[t]);I(16);for(var n=0;n<16;n++)I(T[n+1]);for(var r=0;r<=161;r++)I(S[r]);I(1);for(var s=0;s<16;s++)I(_[s+1]);for(var i=0;i<=11;i++)I(E[i]);I(17);for(var a=0;a<16;a++)I(B[a+1]);for(var o=0;o<=161;o++)I(M[o])}(),D(65498),D(12),I(3),I(1),I(0),I(2),I(17),I(3),I(17),I(0),I(63),I(0);var a=0,d=0,h=0;p=0,f=7,this.encode.displayName="_encode_";for(var m,A,b,N,k,U,R,O,H,Q=e.data,z=e.width,V=e.height,K=4*z,G=0;G<V;){for(m=0;m<K;){for(k=K*G+m,R=-1,O=0,H=0;H<64;H++)U=k+(O=H>>3)*K+(R=4*(7&H)),G+O>=V&&(U-=K*(G+1+O-V)),m+R>=K&&(U-=m+R-K+4),A=Q[U++],b=Q[U++],N=Q[U++],x[H]=(w[A]+w[b+256|0]+w[N+512|0]>>16)-128,v[H]=(w[A+768|0]+w[b+1024|0]+w[N+1280|0]>>16)-128,y[H]=(w[A+1280|0]+w[b+1536|0]+w[N+1792|0]>>16)-128;a=P(x,c,a,t,r),d=P(v,u,d,n,s),h=P(y,u,h,n,s),m+=32}G+=8}if(f>=0){var q=[];q[1]=f+1,q[0]=(1<<f+1)-1,L(q)}return D(65497),new Uint8Array(g)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)b[t]=e(t)}(),t=k(j,C),n=k(_,E),r=k(T,S),s=k(B,M),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=r;for(var s=-(t-1);s<=-e;s++)h[32767+s]=n,d[32767+s]=[],d[32767+s][1]=n,d[32767+s][0]=t-1+s;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256|0]=38470*e,w[e+512|0]=7471*e+32768,w[e+768|0]=-11059*e,w[e+1024|0]=-21709*e,w[e+1280|0]=32768*e+8421375,w[e+1536|0]=-27439*e,w[e+1792|0]=-5329*e}(),F(e)}function Xt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Yt(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,s){for(var i=0;i<s;i++)e[t+i]=n[r+i]}function s(e,t,n,r){for(var s=0;s<r;s++)e[t+s]=n}function i(e){return new Int32Array(e)}function a(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,s){for(var i=s[r],a=0;a<i&&(n.push(s.length>r+1?[]:new t),!(s.length<r+1));a++)e(n[a],r+1,s)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,s,i){t(!(s%r));do{e[n+(s-=r)]=i}while(0<s)}function u(e,n,r,s,a){if(t(2328>=a),512>=a)var o=i(512);else if(null==(o=i(a)))return 0;return function(e,n,r,s,a,o){var u,h,m=n,A=1<<r,g=i(16),p=i(16);for(t(0!=a),t(null!=s),t(null!=e),t(0<r),h=0;h<a;++h){if(15<s[h])return 0;++g[s[h]]}if(g[0]==a)return 0;for(p[1]=0,u=1;15>u;++u){if(g[u]>1<<u)return 0;p[u+1]=p[u]+g[u]}for(h=0;h<a;++h)u=s[h],0<s[h]&&(o[p[u]++]=h);if(1==p[15])return(s=new d).g=0,s.value=o[0],c(e,m,1,A,s),A;var f,x=-1,v=A-1,y=0,b=1,w=1,N=1<<r;for(h=0,u=1,a=2;u<=r;++u,a<<=1){if(b+=w<<=1,0>(w-=g[u]))return 0;for(;0<g[u];--g[u])(s=new d).g=u,s.value=o[h++],c(e,m+y,a,N,s),y=l(y,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(b+=w<<=1,0>(w-=g[u]))return 0;for(;0<g[u];--g[u]){if(s=new d,(y&v)!=x){for(m+=N,f=1<<(x=u)-r;15>x&&!(0>=(f-=g[x]));)++x,f<<=1;A+=N=1<<(f=x-r),e[n+(x=y&v)].g=f+r,e[n+x].value=m-n-x}s.g=u-r,s.value=o[h++],c(e,m+(y>>r),a,N,s),y=l(y,u)}}return b!=2*p[15]-1?0:A}(e,n,r,s,a,o)}function d(){this.value=this.g=0}function h(){this.value=this.g=0}function m(){this.G=a(5,d),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Rn,h)}function A(e,n,r,s){t(null!=e),t(null!=n),t(2147483648>s),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+s,e.Zc=4<=s?r+s-4+1:r,T(e)}function g(e,t){for(var n=0;0<t--;)n|=_(e,128)<<t;return n}function p(e,t){var n=g(e,t);return S(e)?-n:n}function f(e,n,r,s){var i,a=0;for(t(null!=e),t(null!=n),t(4294967288>s),e.Sb=s,e.Ra=0,e.u=0,e.h=0,4<s&&(s=4),i=0;i<s;++i)a+=n[r+i]<<8*i;e.Ra=a,e.bb=s,e.oa=n,e.pa=r}function x(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Qn-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=Hn){var r=w(e)&On[n];return e.u+=n,x(e),r}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function b(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&Qn-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Qn}function j(e,t){e.u=t,e.h=N(e)}function C(e){e.u>=zn&&(t(e.u>=zn),x(e))}function T(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function S(e){return g(e,1)}function _(e,t){var n=e.Ca;0>e.b&&T(e);var r=e.b,s=n*t>>>8,i=(e.I>>>r>s)+0;for(i?(n-=s,e.I-=s+1<<r>>>0):n=s+1,r=n,s=0;256<=r;)s+=8,r>>=8;return r=7^s+Vn[r],e.b-=r,e.Ca=(n<<r)-1,i}function E(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function B(e,t){return e[t+0]|e[t+1]<<8}function M(e,t){return B(e,t)|e[t+2]<<16}function k(e,t){return B(e,t)|B(e,t+2)<<16}function L(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=i(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function I(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function P(e,n,r,s){t(null!=r),t(null!=s);var i=r[0],a=s[0];return 0==i&&(i=(e*a+n/2)/n),0==a&&(a=(n*i+e/2)/e),0>=i||0>=a?0:(r[0]=i,s[0]=a,1)}function F(e,t){return e+(1<<t)-1>>>t}function U(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function R(t,n){e[n]=function(n,r,s,i,a,o,l){var c;for(c=0;c<a;++c){var u=e[t](o[l+c-1],s,i+c);o[l+c]=U(n[r+c],u)}}}function O(){this.ud=this.hd=this.jd=0}function H(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function Q(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return Q(e+(e-t+.5>>1))}function V(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function K(e,t,n,r,s,i,a){for(r=i[a-1],n=0;n<s;++n)i[a+n]=r=U(e[t+n],r)}function G(e,t,n,r,s){var i;for(i=0;i<n;++i){var a=e[t+i],o=a>>8&255,l=16711935&(l=(l=16711935&a)+((o<<16)+o));r[s+i]=(4278255360&a)+l>>>0}}function q(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function W(e,t,n,r,s,i){var a;for(a=0;a<r;++a){var o=t[n+a],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),s[i+a]=(4278255360&o)+(u<<16)+c}}function $(t,n,r,s,i){e[n]=function(e,t,n,r,a,o,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)a[o++]=i(n[s(e[t++])])},e[t]=function(t,n,a,o,l,c,u){var d=8>>t.b,h=t.Ea,m=t.K[0],A=t.w;if(8>d)for(t=(1<<t.b)-1,A=(1<<d)-1;n<a;++n){var g,p=0;for(g=0;g<h;++g)g&t||(p=s(o[l++])),c[u++]=i(m[p&A]),p>>=d}else e["VP8LMapColor"+r](o,l,m,A,c,u,n,a,h)}}function X(e,t,n,r,s){for(n=t+n;t<n;){var i=e[t++];r[s++]=i>>16&255,r[s++]=i>>8&255,r[s++]=255&i}}function Y(e,t,n,r,s){for(n=t+n;t<n;){var i=e[t++];r[s++]=i>>16&255,r[s++]=i>>8&255,r[s++]=255&i,r[s++]=i>>24&255}}function J(e,t,n,r,s){for(n=t+n;t<n;){var i=(a=e[t++])>>16&240|a>>12&15,a=240&a|a>>28&15;r[s++]=i,r[s++]=a}}function Z(e,t,n,r,s){for(n=t+n;t<n;){var i=(a=e[t++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[s++]=i,r[s++]=a}}function ee(e,t,n,r,s){for(n=t+n;t<n;){var i=e[t++];r[s++]=255&i,r[s++]=i>>8&255,r[s++]=i>>16&255}}function te(e,t,n,s,i,a){if(0==a)for(n=t+n;t<n;)E(s,((a=e[t++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),i+=32;else r(s,i,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==zr||e==Vr||e==Kr||e==Gr}function se(){this.eb=[],this.size=this.A=this.fb=0}function ie(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ae(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new se,this.f.kb=new ie,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,s=t.ba.f.RGBA,i=s.eb,a=s.fb+e.ka*s.A,o=fs[t.ba.S],l=e.y,c=e.O,u=e.f,d=e.N,h=e.ea,m=e.W,A=t.cc,g=t.dc,p=t.Mc,f=t.Nc,x=e.ka,v=e.ka+e.T,y=e.U,b=y+1>>1;for(0==x?o(l,c,null,null,u,d,h,m,u,d,h,m,i,a,null,null,y):(o(t.ec,t.fc,l,c,A,g,p,f,u,d,h,m,i,a-s.A,i,a,y),++n);x+2<v;x+=2)A=u,g=d,p=h,f=m,d+=e.Rc,m+=e.Rc,a+=2*s.A,o(l,(c+=2*e.fa)-e.fa,l,c,A,g,p,f,u,d,h,m,i,a-s.A,i,a,y);return c+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,l,c,y),r(t.cc,t.dc,u,d,b),r(t.Mc,t.Nc,h,m,b),n--):1&v||o(l,c,null,null,u,d,h,m,u,d,h,m,i,a+s.A,null,null,y),n}function de(e,n,r){var s=e.F,i=[e.J];if(null!=s){var a=e.U,o=n.ba.S,l=o==Or||o==Kr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,i[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var d=n.eb;u=n.fb+u*n.A,e=Cr(s,i[0],e.width,a,c,d,u+(l?0:3),n.A),t(r==c),e&&re(o)&&Nr(d,u,l,a,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,s=n==Fr||n==Rr||n==Or||n==Hr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Pn(t.Oa,e,s?11:12))return 0;if(s&&re(n)&&vn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=i(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,vn()}}else alert("todo:EmitYUV");s&&(t.Jb=de,r&&fn())}if(r&&!Ms){for(e=0;256>e;++e)ks[e]=89858*(e-128)+Ts>>Cs,Ds[e]=-22014*(e-128)+Ts,Is[e]=-45773*(e-128),Ls[e]=113618*(e-128)+Ts>>Cs;for(e=Ss;e<_s;++e)t=76283*(e-16)+Ts>>Cs,Ps[e-Ss]=Ke(t,255),Fs[e-Ss]=Ke(t+8>>4,15);Ms=1}return 1}function me(e){var n=e.ma,r=e.U,s=e.T;return t(!(1&e.ka)),0>=r||0>=s?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function Ae(e){e.ma.memory=null}function ge(e,t,n,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function pe(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function fe(e,t){return 120<t?t-120:1<=(n=((n=Jr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function xe(e,t,n){var r=w(n),s=e[t+=255&r].g-8;return 0<s&&(j(n,n.u+8),r=w(n),t+=e[t].value,t+=r&(1<<s)-1),j(n,n.u+e[t].g),e[t].value}function ve(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function ye(e,n,r){var s=e.xc;return t((n=0==s?0:e.vc[e.md*(r>>s)+(n>>s)])<e.Wb),e.Ya[n]}function be(e,n,s,i){var a=e.ab,o=e.c*n,l=e.C;n=l+n;var c=s,u=i;for(i=e.Ta,s=e.Ua;0<a--;){var d=e.gc[a],h=l,m=n,A=c,g=u,p=(u=i,c=s,d.Ea);switch(t(h<m),t(m<=d.nc),d.hc){case 2:qn(A,g,(m-h)*p,u,c);break;case 0:var f=h,x=m,v=u,y=c,b=(T=d).Ea;0==f&&(Kn(A,g,null,null,1,v,y),K(A,g+1,0,0,b-1,v,y+1),g+=b,y+=b,++f);for(var w=1<<T.b,N=w-1,j=F(b,T.b),C=T.K,T=T.w+(f>>T.b)*j;f<x;){var S=C,_=T,E=1;for(Gn(A,g,v,y-b,1,v,y);E<b;){var B=(E&~N)+w;B>b&&(B=b),(0,Jn[S[_++]>>8&15])(A,g+ +E,v,y+E-b,B-E,v,y+E),E=B}g+=b,y+=b,++f&N||(T+=j)}m!=d.nc&&r(u,c-p,u,c+(m-h-1)*p,p);break;case 1:for(p=A,x=g,b=(A=d.Ea)-(y=A&~(v=(g=1<<d.b)-1)),f=F(A,d.b),w=d.K,d=d.w+(h>>d.b)*f;h<m;){for(N=w,j=d,C=new O,T=x+y,S=x+A;x<T;)q(N[j++],C),Zn(C,p,x,g,u,c),x+=g,c+=g;x<S&&(q(N[j++],C),Zn(C,p,x,b,u,c),x+=b,c+=b),++h&v||(d+=f)}break;case 3:if(A==u&&g==c&&0<d.b){for(x=u,A=p=c+(m-h)*p-(y=(m-h)*F(d.Ea,d.b)),g=u,v=c,f=[],y=(b=y)-1;0<=y;--y)f[y]=g[v+y];for(y=b-1;0<=y;--y)x[A+y]=f[y];Wn(d,h,m,u,p,u,c)}else Wn(d,h,m,A,g,u,c)}c=i,u=s}u!=s&&r(i,s,c,u,o)}function we(e,n){var r=e.V,s=e.Ba+e.c*e.C,i=n-e.C;if(t(n<=e.l.o),t(16>=i),0<i){var a=e.l,o=e.Ta,l=e.Ua,c=a.width;if(be(e,i,r,s),i=l=[l],t((r=e.C)<(s=n)),t(a.v<a.va),s>a.o&&(s=a.o),r<a.j){var u=a.j-r;r=a.j,i[0]+=u*c}if(r>=s?r=0:(i[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=s-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var d=r.f.RGBA,h=(s=r.S,i=a.U,a=a.T,u=d.eb,d.A),m=a;for(d=d.fb+e.Ma*d.A;0<m--;){var A=o,g=l,p=i,f=u,x=d;switch(s){case Pr:er(A,g,p,f,x);break;case Fr:tr(A,g,p,f,x);break;case zr:tr(A,g,p,f,x),Nr(f,x,0,p,1,0);break;case Ur:sr(A,g,p,f,x);break;case Rr:te(A,g,p,f,x,1);break;case Vr:te(A,g,p,f,x,1),Nr(f,x,0,p,1,0);break;case Or:te(A,g,p,f,x,0);break;case Kr:te(A,g,p,f,x,0),Nr(f,x,1,p,1,0);break;case Hr:nr(A,g,p,f,x);break;case Gr:nr(A,g,p,f,x),jr(f,x,p,1,0);break;case Qr:rr(A,g,p,f,x);break;default:t(0)}l+=c,d+=h}e.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function je(e,n,r,s,i,a){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ps[e.Z]);n<r;++n)ps[e.Z](o,l,s,i,s,i,a),o=s,l=i,i+=a;e.qd=o,e.rd=l}}function Ce(e,n){var r=e.l.ma,s=0==r.Z||1==r.Z?e.l.j:e.C;if(s=e.C<s?s:e.C,t(n<=e.l.o),n>s){var i=e.l.width,a=r.ca,o=r.tb+i*s,l=e.V,c=e.Ba+e.c*s,u=e.gc;t(1==e.ab),t(3==u[0].hc),Xn(u[0],s,n,l,c,a,o),je(r,s,n,a,o,i)}e.C=e.Ma=n}function Te(e,n,r,s,i,a,o){var l=e.$/s,c=e.$%s,u=e.m,d=e.s,h=r+e.$,m=h;i=r+s*i;var A=r+s*a,g=280+d.ua,p=e.Pb?l:16777216,f=0<d.ua?d.Wa:null,x=d.wc,v=h<A?ye(d,c,l):null;t(e.C<a),t(A<=i);var y=!1;e:for(;;){for(;y||h<A;){var b=0;if(l>=p){var T=h-r;t((p=e).Pb),p.wd=p.m,p.xd=T,0<p.s.ua&&I(p.s.Wa,p.s.vb),p=l+es}if(c&x||(v=ye(d,c,l)),t(null!=v),v.Qb&&(n[h]=v.qb,y=!0),!y)if(C(u),v.jc){b=u,T=n;var S=h,_=v.pd[w(b)&Rn-1];t(v.jc),256>_.g?(j(b,b.u+_.g),T[S]=_.value,b=0):(j(b,b.u+_.g-256),t(256<=_.value),b=_.value),0==b&&(y=!0)}else b=xe(v.G[0],v.H[0],u);if(u.h)break;if(y||256>b){if(!y)if(v.nd)n[h]=(v.qb|b<<8)>>>0;else{if(C(u),y=xe(v.G[1],v.H[1],u),C(u),T=xe(v.G[2],v.H[2],u),S=xe(v.G[3],v.H[3],u),u.h)break;n[h]=(S<<24|y<<16|b<<8|T)>>>0}if(y=!1,++h,++c>=s&&(c=0,++l,null!=o&&l<=a&&!(l%16)&&o(e,l),null!=f))for(;m<h;)b=n[m++],f.X[(506832829*b&4294967295)>>>f.Mb]=b}else if(280>b){if(b=pe(b-256,u),T=xe(v.G[4],v.H[4],u),C(u),T=fe(s,T=pe(T,u)),u.h)break;if(h-r<T||i-h<b)break e;for(S=0;S<b;++S)n[h+S]=n[h+S-T];for(h+=b,c+=b;c>=s;)c-=s,++l,null!=o&&l<=a&&!(l%16)&&o(e,l);if(t(h<=i),c&x&&(v=ye(d,c,l)),null!=f)for(;m<h;)b=n[m++],f.X[(506832829*b&4294967295)>>>f.Mb]=b}else{if(!(b<g))break e;for(y=b-280,t(null!=f);m<h;)b=n[m++],f.X[(506832829*b&4294967295)>>>f.Mb]=b;b=h,t(!(y>>>(T=f).Xa)),n[b]=T.X[y],y=!0}y||t(u.h==N(u))}if(e.Pb&&u.h&&h<i)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&I(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>a?a:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function Se(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function _e(){var t=new on;return null==t?null:(t.a=0,t.xb=gs,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),qn=G,Zn=W,er=X,tr=Y,nr=J,rr=Z,sr=ee,e.VP8LMapColor32b=$n,e.VP8LMapColor8b=Yn,t)}function Ee(e,n,r,o,l){var c=1,h=[e],A=[n],g=o.m,p=o.s,f=null,x=0;e:for(;;){if(r)for(;c&&v(g,1);){var y=h,b=A,N=o,T=1,S=N.m,_=N.gc[N.ab],E=v(S,2);if(N.Oc&1<<E)c=0;else{switch(N.Oc|=1<<E,_.hc=E,_.Ea=y[0],_.nc=b[0],_.K=[null],++N.ab,t(4>=N.ab),E){case 0:case 1:_.b=v(S,3)+2,T=Ee(F(_.Ea,_.b),F(_.nc,_.b),0,N,_.K),_.K=_.K[0];break;case 3:var B,M=v(S,8)+1,k=16<M?0:4<M?1:2<M?2:3;if(y[0]=F(_.Ea,k),_.b=k,B=T=Ee(M,1,0,N,_.K)){var I,D=M,P=_,R=1<<(8>>P.b),O=i(R);if(null==O)B=0;else{var H=P.K[0],Q=P.w;for(O[0]=P.K[0][0],I=1;I<1*D;++I)O[I]=U(H[Q+I],O[I-1]);for(;I<4*R;++I)O[I]=0;P.K[0]=null,P.K[0]=O,B=1}}T=B;break;case 2:break;default:t(0)}c=T}}if(h=h[0],A=A[0],c&&v(g,1)&&!(c=1<=(x=v(g,4))&&11>=x)){o.a=3;break e}var z;if(z=c)t:{var V,K,G,q=o,W=h,$=A,X=x,Y=r,J=q.m,Z=q.s,ee=[null],te=1,ne=0,re=Zr[X];n:for(;;){if(Y&&v(J,1)){var se=v(J,3)+2,ie=F(W,se),ae=F($,se),oe=ie*ae;if(!Ee(ie,ae,0,q,ee))break n;for(ee=ee[0],Z.xc=se,V=0;V<oe;++V){var le=ee[V]>>8&65535;ee[V]=le,le>=te&&(te=le+1)}}if(J.h)break n;for(K=0;5>K;++K){var ce=$r[K];!K&&0<X&&(ce+=1<<X),ne<ce&&(ne=ce)}var ue=a(te*re,d),de=te,he=a(de,m);if(null==he)var me=null;else t(65536>=de),me=he;var Ae=i(ne);if(null==me||null==Ae||null==ue){q.a=1;break n}var ge=ue;for(V=G=0;V<te;++V){var pe=me[V],fe=pe.G,xe=pe.H,ye=0,be=1,we=0;for(K=0;5>K;++K){ce=$r[K],fe[K]=ge,xe[K]=G,!K&&0<X&&(ce+=1<<X);r:{var Ne,je=ce,Ce=q,_e=Ae,Be=ge,Me=G,ke=0,Le=Ce.m,Ie=v(Le,1);if(s(_e,0,0,je),Ie){var De=v(Le,1)+1,Pe=v(Le,1),Fe=v(Le,0==Pe?1:8);_e[Fe]=1,2==De&&(_e[Fe=v(Le,8)]=1);var Ue=1}else{var Re=i(19),Oe=v(Le,4)+4;if(19<Oe){Ce.a=3;var He=0;break r}for(Ne=0;Ne<Oe;++Ne)Re[Yr[Ne]]=v(Le,3);var Qe=void 0,ze=void 0,Ve=Ce,Ke=Re,Ge=je,qe=_e,We=0,$e=Ve.m,Xe=8,Ye=a(128,d);s:for(;u(Ye,0,7,Ke,19);){if(v($e,1)){var Je=2+2*v($e,3);if((Qe=2+v($e,Je))>Ge)break s}else Qe=Ge;for(ze=0;ze<Ge&&Qe--;){C($e);var Ze=Ye[0+(127&w($e))];j($e,$e.u+Ze.g);var et=Ze.value;if(16>et)qe[ze++]=et,0!=et&&(Xe=et);else{var tt=16==et,nt=et-16,rt=Wr[nt],st=v($e,qr[nt])+rt;if(ze+st>Ge)break s;for(var it=tt?Xe:0;0<st--;)qe[ze++]=it}}We=1;break s}We||(Ve.a=3),Ue=We}(Ue=Ue&&!Le.h)&&(ke=u(Be,Me,8,_e,je)),Ue&&0!=ke?He=ke:(Ce.a=3,He=0)}if(0==He)break n;if(be&&1==Xr[K]&&(be=0==ge[G].g),ye+=ge[G].g,G+=He,3>=K){var at,ot=Ae[0];for(at=1;at<ce;++at)Ae[at]>ot&&(ot=Ae[at]);we+=ot}}if(pe.nd=be,pe.Qb=0,be&&(pe.qb=(fe[3][xe[3]+0].value<<24|fe[1][xe[1]+0].value<<16|fe[2][xe[2]+0].value)>>>0,0==ye&&256>fe[0][xe[0]+0].value&&(pe.Qb=1,pe.qb+=fe[0][xe[0]+0].value<<8)),pe.jc=!pe.Qb&&6>we,pe.jc){var lt,ct=pe;for(lt=0;lt<Rn;++lt){var ut=lt,dt=ct.pd[ut],ht=ct.G[0][ct.H[0]+ut];256<=ht.value?(dt.g=ht.g+256,dt.value=ht.value):(dt.g=0,dt.value=0,ut>>=ve(ht,8,dt),ut>>=ve(ct.G[1][ct.H[1]+ut],16,dt),ut>>=ve(ct.G[2][ct.H[2]+ut],0,dt),ve(ct.G[3][ct.H[3]+ut],24,dt))}}}Z.vc=ee,Z.Wb=te,Z.Ya=me,Z.yc=ue,z=1;break t}z=0}if(!(c=z)){o.a=3;break e}if(0<x){if(p.ua=1<<x,!L(p.Wa,x)){o.a=1,c=0;break e}}else p.ua=0;var mt=o,At=h,gt=A,pt=mt.s,ft=pt.xc;if(mt.c=At,mt.i=gt,pt.md=F(At,ft),pt.wc=0==ft?-1:(1<<ft)-1,r){o.xb=As;break e}if(null==(f=i(h*A))){o.a=1,c=0;break e}c=(c=Te(o,f,0,h,A,A,null))&&!g.h;break e}return c?(null!=l?l[0]=f:(t(null==f),t(r)),o.$=0,r||Se(p)):Se(p),c}function Be(e,n){var r=e.c*e.i,s=r+n+16*n;return t(e.c<=n),e.V=i(s),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Me(e,n){var r=e.C,s=n-r,i=e.V,a=e.Ba+e.c*r;for(t(n<=e.l.o);0<s;){var o=16<s?16:s,l=e.l.ma,c=e.l.width,u=c*o,d=l.ca,h=l.tb+c*r,m=e.Ta,A=e.Ua;be(e,o,i,a),Tr(m,A,d,h,u),je(l,r,r+o,d,h,c),s-=o,i+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function ke(){this.ub=this.yd=this.td=this.Rb=0}function Le(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ie(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function De(){this.Yb=function(){var e=[];return function e(t,n,r){for(var s=r[n],i=0;i<s&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));i++)e(t[i],n+1,r)}(e,0,[3,11]),e}()}function Pe(){this.jb=i(3),this.Wc=o([4,8],De),this.Xc=o([4,17],De)}function Fe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ue(){this.ld=this.La=this.dd=this.tc=0}function Re(){this.Na=this.la=0}function Oe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function He(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qe(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ue),this.Y=0,this.ya=Array(new He),this.aa=0,this.l=new Ge}function ze(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ve(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new ke,this.Kc=new Le,this.ed=new Fe,this.Qa=new Ie,this.Ic=this.$c=this.Aa=0,this.D=new Qe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,y),this.ia=0,this.pb=a(4,Oe),this.Pa=new Pe,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new Re),this.sb=0,this.wa=Array(new Ue),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new He),this.L=this.aa=0,this.gd=o([4,2],Ue),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ke(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qe(){var e=new Ve;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,rs||(rs=Ye)),e}function We(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function $e(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Xe(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return We(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,i=n.w,a=n.ha;if(4>a)return We(e,7,"Truncated header.");var o=r[i+0]|r[i+1]<<8|r[i+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return We(e,3,"Incorrect keyframe parameters.");if(!l.yd)return We(e,4,"Frame not displayable.");i+=3,a-=3;var c=e.Kc;if(l.Rb){if(7>a)return We(e,7,"cannot parse picture header");if(!$e(r,i,a))return We(e,3,"Bad code word");c.c=16383&(r[i+4]<<8|r[i+3]),c.Td=r[i+4]>>6,c.i=16383&(r[i+6]<<8|r[i+5]),c.Ud=r[i+6]>>6,i+=7,a-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,s((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,s(o.Zb,0,0,o.Zb.length),s(o.Lb,0,0,o.Lb)}if(l.ub>a)return We(e,7,"bad partition length");A(o=e.m,r,i,l.ub),i+=l.ub,a-=l.ub,l.Rb&&(c.Ld=S(o),c.Kd=S(o)),c=e.Qa;var u,d=e.Pa;if(t(null!=o),t(null!=c),c.Cb=S(o),c.Cb){if(c.Bb=S(o),S(o)){for(c.Fb=S(o),u=0;4>u;++u)c.Zb[u]=S(o)?p(o,7):0;for(u=0;4>u;++u)c.Lb[u]=S(o)?p(o,6):0}if(c.Bb)for(u=0;3>u;++u)d.jb[u]=S(o)?g(o,8):255}else c.Bb=0;if(o.Ka)return We(e,3,"cannot parse segment header");if((c=e.ed).zd=S(o),c.Tb=g(o,6),c.wb=g(o,3),c.Pc=S(o),c.Pc&&S(o)){for(d=0;4>d;++d)S(o)&&(c.vd[d]=p(o,6));for(d=0;4>d;++d)S(o)&&(c.od[d]=p(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return We(e,3,"cannot parse filter header");var h=a;if(a=u=i,i=u+h,c=h,e.Xb=(1<<g(e.m,2))-1,h<3*(d=e.Xb))r=7;else{for(u+=3*d,c-=3*d,h=0;h<d;++h){var m=r[a+0]|r[a+1]<<8|r[a+2]<<16;m>c&&(m=c),A(e.Jc[+h],r,u,m),u+=m,c-=m,a+=3}A(e.Jc[+d],r,u,c),r=u<i?0:5}if(0!=r)return We(e,r,"cannot parse partitions");for(r=g(u=e.m,7),a=S(u)?p(u,4):0,i=S(u)?p(u,4):0,c=S(u)?p(u,4):0,d=S(u)?p(u,4):0,u=S(u)?p(u,4):0,h=e.Qa,m=0;4>m;++m){if(h.Cb){var f=h.Zb[m];h.Fb||(f+=r)}else{if(0<m){e.pb[m]=e.pb[0];continue}f=r}var x=e.pb[m];x.Sc[0]=ts[Ke(f+a,127)],x.Sc[1]=ns[Ke(f+0,127)],x.Eb[0]=2*ts[Ke(f+i,127)],x.Eb[1]=101581*ns[Ke(f+c,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=ts[Ke(f+d,117)],x.Qc[1]=ns[Ke(f+u,127)],x.lc=f+u}if(!l.Rb)return We(e,4,"Not a key frame.");for(S(o),l=e.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(i=0;3>i;++i)for(c=0;11>c;++c)d=_(o,cs[r][a][i][c])?g(o,8):os[r][a][i][c],l.Wc[r][a].Yb[i][c]=d;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][us[a]]}return e.kc=S(o),e.kc&&(e.Bd=g(o,8)),e.cb=1}function Ye(e,t,n,r,s,i,a){var o=t[s].Yb[n];for(n=0;16>s;++s){if(!_(e,o[n+0]))return s;for(;!_(e,o[n+1]);)if(o=t[++s].Yb[0],n=0,16==s)return 16;var l=t[s+1].Yb;if(_(e,o[n+2])){var c=e,u=0;if(_(c,(h=o)[(d=n)+3]))if(_(c,h[d+6])){for(o=0,d=2*(u=_(c,h[d+8]))+(h=_(c,h[d+9+u])),u=0,h=ss[d];h[o];++o)u+=u+_(c,h[o]);u+=3+(8<<d)}else _(c,h[d+7])?(u=7+2*_(c,165),u+=_(c,145)):u=5+_(c,159);else u=_(c,h[d+4])?3+_(c,h[d+5]):2;o=l[2]}else u=1,o=l[1];l=a+is[s],0>(c=e).b&&T(c);var d,h=c.b,m=(d=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=m,c.Ca|=1,c.I-=(d+1&m)<<h,i[l]=((u^m)-m)*r[(0<s)+0]}return 16}function Je(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,s(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,n){if(null==e)return 0;if(null==n)return We(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Xe(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Rs[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var d=e.gd[o][c],h=u;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var m=h;0<l.wb&&(m=4<l.wb?m>>2:m>>1)>9-l.wb&&(m=9-l.wb),1>m&&(m=1),d.dd=m,d.tc=2*h+m,d.ld=40<=h?2:15<=h?1:0}else d.tc=0;d.La=c}}}o=0}else We(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=Hs);e:{o=e.Ic,l=4*(m=e.za);var A=32*m,g=m+1,p=0<e.L?m*(0<e.Aa?2:1):0,f=(2==e.Aa?2:1)*m;if((d=l+832+(c=3*(16*o+Rs[e.L])/2*A)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)o=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=i(d),e.Fc=0,null==e.Ec){o=We(e,1,"no memory during frame initialization.");break e}e.Vb=d}d=e.Ec,h=e.Fc,e.Ac=d,e.Bc=h,h+=l,e.Gd=a(A,ze),e.Hd=0,e.rb=a(g+1,Re),e.sb=1,e.wa=p?a(p,Ue):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=m),t(!0),e.oc=d,e.pc=h,h+=832,e.ya=a(f,He),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=m),e.R=16*m,e.B=8*m,m=(A=Rs[e.L])*e.R,A=A/2*e.B,e.sa=d,e.ta=h+m,e.qa=e.sa,e.ra=e.ta+16*o*e.R+A,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+A,e.$c=0,h+=c,e.mb=u?d:null,e.nb=u?h:null,t(h+u<=e.Fc+e.Vb),Je(e),s(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Mr){for(o=-255;255>=o;++o)Sr[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)_r[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Er[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Br[255+o]=0>o?0:255<o?255:o;Mr=1}ir=ct,ar=it,lr=at,cr=ot,ur=lt,or=st,dr=Wt,hr=$t,mr=Jt,Ar=Zt,gr=Xt,pr=Yt,fr=en,xr=tn,vr=Qt,yr=zt,br=Vt,wr=Kt,hs[0]=jt,hs[1]=dt,hs[2]=wt,hs[3]=Nt,hs[4]=Ct,hs[5]=St,hs[6]=Tt,hs[7]=_t,hs[8]=Bt,hs[9]=Et,ds[0]=ft,ds[1]=mt,ds[2]=At,ds[3]=gt,ds[4]=xt,ds[5]=vt,ds[6]=yt,ms[0]=It,ms[1]=ht,ms[2]=Mt,ms[3]=kt,ms[4]=Pt,ms[5]=Dt,ms[6]=Ft,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var a,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(a=0;a<c.za;++a){var u=l,d=c,h=d.Ac,m=d.Bc+4*a,A=d.zc,g=d.ya[d.aa+a];if(d.Qa.Bb?g.$b=_(u,d.Pa.jb[0])?2+_(u,d.Pa.jb[2]):_(u,d.Pa.jb[1]):g.$b=0,d.kc&&(g.Ad=_(u,d.Bd)),g.Za=!_(u,145)+0,g.Za){var p=g.Ob,f=0;for(d=0;4>d;++d){var x,v=A[0+d];for(x=0;4>x;++x){v=ls[h[m+x]][v];for(var y=as[_(u,v[0])];0<y;)y=as[2*y+_(u,v[y])];v=-y,h[m+x]=v}r(p,f,h,m,4),f+=4,A[0+d]=v}}else v=_(u,156)?_(u,128)?1:3:_(u,163)?2:0,g.Ob[0]=v,s(h,m,v,4),s(A,0,v,4);g.Dd=_(u,142)?_(u,114)?_(u,183)?1:3:2:0}if(c.m.Ka)return We(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],m=l.kc?a.Ad:0)u.la=h.la=0,a.Za||(u.Na=h.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{var b,w;if(u=h,h=c,m=l.Pa.Xc,A=l.ya[l.aa+l.ja],g=l.pb[A.$b],d=A.ad,p=0,f=l.rb[l.sb-1],v=x=0,s(d,p,0,384),A.Za)var N=0,j=m[3];else{y=i(16);var C=u.Na+f.Na;if(C=rs(h,m[1],C,g.Eb,0,y,0),u.Na=f.Na=(0<C)+0,1<C)ir(y,0,d,p);else{var T=y[0]+3>>3;for(y=0;256>y;y+=16)d[p+y]=T}N=1,j=m[0]}var S=15&u.la,E=15&f.la;for(y=0;4>y;++y){var B=1&E;for(T=w=0;4>T;++T)S=S>>1|(B=(C=rs(h,j,C=B+(1&S),g.Sc,N,d,p))>N)<<7,w=w<<2|(3<C?3:1<C?2:0!=d[p+0]),p+=16;S>>=4,E=E>>1|B<<7,x=(x<<8|w)>>>0}for(j=S,N=E>>4,b=0;4>b;b+=2){for(w=0,S=u.la>>4+b,E=f.la>>4+b,y=0;2>y;++y){for(B=1&E,T=0;2>T;++T)C=B+(1&S),S=S>>1|(B=0<(C=rs(h,m[2],C,g.Qc,0,d,p)))<<3,w=w<<2|(3<C?3:1<C?2:0!=d[p+0]),p+=16;S>>=2,E=E>>1|B<<5}v|=w<<4*b,j|=S<<4<<b,N|=(240&E)<<b}u.la=j,f.la=N,A.Hc=x,A.Gc=v,A.ia=43690&v?0:g.ia,m=!(x|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!m),c.Ka)return We(e,7,"Premature end-of-file encountered.")}if(Je(e),l=n,c=1,a=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(a.M=o.M,a.uc=u,In(o,a),c=1,a=(w=o.D).Nb,u=(v=Rs[o.L])*o.R,h=v/2*o.B,y=16*a*o.R,T=8*a*o.B,m=o.sa,A=o.ta-u+y,g=o.qa,d=o.ra-h+T,p=o.Ha,f=o.Ia-h+T,E=0==(S=w.M),x=S>=o.Va-1,2==o.Aa&&In(o,w),w.uc)for(B=(C=o).D.M,t(C.D.uc),w=C.yb;w<C.Hb;++w){N=w,j=B;var M=(k=(H=C).D).Nb;b=H.R;var k=k.wa[k.Y+N],L=H.sa,I=H.ta+16*M*b+16*N,D=k.dd,P=k.tc;if(0!=P)if(t(3<=P),1==H.L)0<N&&yr(L,I,b,P+4),k.La&&wr(L,I,b,P),0<j&&vr(L,I,b,P+4),k.La&&br(L,I,b,P);else{var F=H.B,U=H.qa,R=H.ra+8*M*F+8*N,O=H.Ha,H=H.Ia+8*M*F+8*N;M=k.ld,0<N&&(hr(L,I,b,P+4,D,M),Ar(U,R,O,H,F,P+4,D,M)),k.La&&(pr(L,I,b,P,D,M),xr(U,R,O,H,F,P,D,M)),0<j&&(dr(L,I,b,P+4,D,M),mr(U,R,O,H,F,P+4,D,M)),k.La&&(gr(L,I,b,P,D,M),fr(U,R,O,H,F,P,D,M))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*S,S=16*(S+1),E?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+T,l.ea=o.Ha,l.W=o.Ia+T):(w-=v,l.y=m,l.O=A,l.f=g,l.N=d,l.ea=p,l.W=f),x||(S-=v),S>l.o&&(S=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&w<S&&(l.J=hn(o,l,w,S-w),l.F=o.mb,null==l.F&&0==l.F.length)){c=We(o,3,"Could not decode alpha data.");break e}w<l.j&&(v=l.j-w,w=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),w<S&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=S-w,c=l.put(l))}a+1!=o.Ic||x||(r(o.sa,o.ta-u,m,A+16*o.R,u),r(o.qa,o.ra-h,g,d+8*o.B,h),r(o.Ha,o.Ia-h,p,f+8*o.B,h))}if(!c)return We(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0}function et(e,t,n,r,s){s=e[t+n+32*r]+(s>>3),e[t+n+32*r]=-256&s?0>s?0:255:s}function tt(e,t,n,r,s,i){et(e,t,0,n,r+s),et(e,t,1,n,r+i),et(e,t,2,n,r-i),et(e,t,3,n,r-s)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var s,a=0,o=i(16);for(s=0;4>s;++s){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),d=nt(e[t+4])+(35468*e[t+12]>>16);o[a+0]=l+d,o[a+1]=c+u,o[a+2]=c-u,o[a+3]=l-d,a+=4,t++}for(s=a=0;4>s;++s)l=(e=o[a+0]+4)+o[a+8],c=e-o[a+8],u=(35468*o[a+4]>>16)-nt(o[a+12]),et(n,r,0,0,l+(d=nt(o[a+4])+(35468*o[a+12]>>16))),et(n,r,1,0,c+u),et(n,r,2,0,c-u),et(n,r,3,0,l-d),a++,r+=32}function st(e,t,n,r){var s=e[t+0]+4,i=35468*e[t+4]>>16,a=nt(e[t+4]),o=35468*e[t+1]>>16;tt(n,r,0,s+a,e=nt(e[t+1]),o),tt(n,r,1,s+i,e,o),tt(n,r,2,s-i,e,o),tt(n,r,3,s-a,e,o)}function it(e,t,n,r,s){rt(e,t,n,r),s&&rt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function ot(e,t,n,r){var s;for(e=e[t+0]+4,s=0;4>s;++s)for(t=0;4>t;++t)et(n,r,t,s,e)}function lt(e,t,n,r){e[t+0]&&cr(e,t+0,n,r),e[t+16]&&cr(e,t+16,n,r+4),e[t+32]&&cr(e,t+32,n,r+128),e[t+48]&&cr(e,t+48,n,r+128+4)}function ct(e,t,n,r){var s,a=i(16);for(s=0;4>s;++s){var o=e[t+0+s]+e[t+12+s],l=e[t+4+s]+e[t+8+s],c=e[t+4+s]-e[t+8+s],u=e[t+0+s]-e[t+12+s];a[0+s]=o+l,a[8+s]=o-l,a[4+s]=u+c,a[12+s]=u-c}for(s=0;4>s;++s)o=(e=a[0+4*s]+3)+a[3+4*s],l=a[1+4*s]+a[2+4*s],c=a[1+4*s]-a[2+4*s],u=e-a[3+4*s],n[r+0]=o+l>>3,n[r+16]=u+c>>3,n[r+32]=o-l>>3,n[r+48]=u-c>>3,r+=64}function ut(e,t,n){var r,s=t-32,i=Ir,a=255-e[s-1];for(r=0;r<n;++r){var o,l=i,c=a+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[s+o]];t+=32}}function dt(e,t){ut(e,t,4)}function ht(e,t){ut(e,t,8)}function mt(e,t){ut(e,t,16)}function At(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function gt(e,t){var n;for(n=16;0<n;--n)s(e,t,e[t-1],16),t+=32}function pt(e,t,n){var r;for(r=0;16>r;++r)s(t,n+32*r,e,16)}function ft(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];pt(r>>5,e,t)}function xt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];pt(r>>4,e,t)}function vt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];pt(r>>4,e,t)}function yt(e,t){pt(128,e,t)}function bt(e,t,n){return e+2*t+n+2>>2}function wt(e,t){var n,s=t-32;for(s=new Uint8Array([bt(e[s-1],e[s+0],e[s+1]),bt(e[s+0],e[s+1],e[s+2]),bt(e[s+1],e[s+2],e[s+3]),bt(e[s+2],e[s+3],e[s+4])]),n=0;4>n;++n)r(e,t+32*n,s,0,s.length)}function Nt(e,t){var n=e[t-1],r=e[t-1+32],s=e[t-1+64],i=e[t-1+96];E(e,t+0,16843009*bt(e[t-1-32],n,r)),E(e,t+32,16843009*bt(n,r,s)),E(e,t+64,16843009*bt(r,s,i)),E(e,t+96,16843009*bt(s,i,i))}function jt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)s(e,t+32*n,r,4)}function Ct(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],i=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=bt(r,s,e[t-1+96]),e[t+1+96]=e[t+0+64]=bt(n,r,s),e[t+2+96]=e[t+1+64]=e[t+0+32]=bt(i,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=bt(a,i,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=bt(o,a,i),e[t+3+32]=e[t+2+0]=bt(l,o,a),e[t+3+0]=bt(c,l,o)}function Tt(e,t){var n=e[t+1-32],r=e[t+2-32],s=e[t+3-32],i=e[t+4-32],a=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=bt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=bt(n,r,s),e[t+2+0]=e[t+1+32]=e[t+0+64]=bt(r,s,i),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=bt(s,i,a),e[t+3+32]=e[t+2+64]=e[t+1+96]=bt(i,a,o),e[t+3+64]=e[t+2+96]=bt(a,o,l),e[t+3+96]=bt(o,l,l)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],i=e[t-1-32],a=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=i+a+1>>1,e[t+1+0]=e[t+2+64]=a+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=bt(s,r,n),e[t+0+64]=bt(r,n,i),e[t+0+32]=e[t+1+96]=bt(n,i,a),e[t+1+32]=e[t+2+96]=bt(i,a,o),e[t+2+32]=e[t+3+96]=bt(a,o,l),e[t+3+32]=bt(o,l,c)}function _t(e,t){var n=e[t+0-32],r=e[t+1-32],s=e[t+2-32],i=e[t+3-32],a=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+s+1>>1,e[t+2+0]=e[t+1+64]=s+i+1>>1,e[t+3+0]=e[t+2+64]=i+a+1>>1,e[t+0+32]=bt(n,r,s),e[t+1+32]=e[t+0+96]=bt(r,s,i),e[t+2+32]=e[t+1+96]=bt(s,i,a),e[t+3+32]=e[t+2+96]=bt(i,a,o),e[t+3+64]=bt(a,o,l),e[t+3+96]=bt(o,l,c)}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],i=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+s+1>>1,e[t+2+32]=e[t+0+64]=s+i+1>>1,e[t+1+0]=bt(n,r,s),e[t+3+0]=e[t+1+32]=bt(r,s,i),e[t+3+32]=e[t+1+64]=bt(s,i,i),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=i}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],s=e[t-1+64],i=e[t-1+96],a=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+a+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=s+r+1>>1,e[t+0+96]=i+s+1>>1,e[t+3+0]=bt(o,l,c),e[t+2+0]=bt(a,o,l),e[t+1+0]=e[t+3+32]=bt(n,a,o),e[t+1+32]=e[t+3+64]=bt(r,n,a),e[t+1+64]=e[t+3+96]=bt(s,r,n),e[t+1+96]=bt(i,s,r)}function Mt(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function kt(e,t){var n;for(n=0;8>n;++n)s(e,t,e[t-1],8),t+=32}function Lt(e,t,n){var r;for(r=0;8>r;++r)s(t,n+32*r,e,8)}function It(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Lt(r>>4,e,t)}function Dt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Lt(r>>3,e,t)}function Pt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Lt(r>>3,e,t)}function Ft(e,t){Lt(128,e,t)}function Ut(e,t,n){var r=e[t-n],s=e[t+0],i=3*(s-r)+kr[1020+e[t-2*n]-e[t+n]],a=Lr[112+(i+4>>3)];e[t-n]=Ir[255+r+Lr[112+(i+3>>3)]],e[t+0]=Ir[255+s-a]}function Rt(e,t,n,r){var s=e[t+0],i=e[t+n];return Dr[255+e[t-2*n]-e[t-n]]>r||Dr[255+i-s]>r}function Ot(e,t,n,r){return 4*Dr[255+e[t-n]-e[t+0]]+Dr[255+e[t-2*n]-e[t+n]]<=r}function Ht(e,t,n,r,s){var i=e[t-3*n],a=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],d=e[t+3*n];return 4*Dr[255+o-l]+Dr[255+a-c]>r?0:Dr[255+e[t-4*n]-i]<=s&&Dr[255+i-a]<=s&&Dr[255+a-o]<=s&&Dr[255+d-u]<=s&&Dr[255+u-c]<=s&&Dr[255+c-l]<=s}function Qt(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Ot(e,t+r,n,s)&&Ut(e,t+r,n)}function zt(e,t,n,r){var s=2*r+1;for(r=0;16>r;++r)Ot(e,t+r*n,1,s)&&Ut(e,t+r*n,1)}function Vt(e,t,n,r){var s;for(s=3;0<s;--s)Qt(e,t+=4*n,n,r)}function Kt(e,t,n,r){var s;for(s=3;0<s;--s)zt(e,t+=4,n,r)}function Gt(e,t,n,r,s,i,a,o){for(i=2*i+1;0<s--;){if(Ht(e,t,n,i,a))if(Rt(e,t,n,o))Ut(e,t,n);else{var l=e,c=t,u=n,d=l[c-2*u],h=l[c-u],m=l[c+0],A=l[c+u],g=l[c+2*u],p=27*(x=kr[1020+3*(m-h)+kr[1020+d-A]])+63>>7,f=18*x+63>>7,x=9*x+63>>7;l[c-3*u]=Ir[255+l[c-3*u]+x],l[c-2*u]=Ir[255+d+f],l[c-u]=Ir[255+h+p],l[c+0]=Ir[255+m-p],l[c+u]=Ir[255+A-f],l[c+2*u]=Ir[255+g-x]}t+=r}}function qt(e,t,n,r,s,i,a,o){for(i=2*i+1;0<s--;){if(Ht(e,t,n,i,a))if(Rt(e,t,n,o))Ut(e,t,n);else{var l=e,c=t,u=n,d=l[c-u],h=l[c+0],m=l[c+u],A=Lr[112+(4+(g=3*(h-d))>>3)],g=Lr[112+(g+3>>3)],p=A+1>>1;l[c-2*u]=Ir[255+l[c-2*u]+p],l[c-u]=Ir[255+d+g],l[c+0]=Ir[255+h-A],l[c+u]=Ir[255+m-p]}t+=r}}function Wt(e,t,n,r,s,i){Gt(e,t,n,1,16,r,s,i)}function $t(e,t,n,r,s,i){Gt(e,t,1,n,16,r,s,i)}function Xt(e,t,n,r,s,i){var a;for(a=3;0<a;--a)qt(e,t+=4*n,n,1,16,r,s,i)}function Yt(e,t,n,r,s,i){var a;for(a=3;0<a;--a)qt(e,t+=4,1,n,16,r,s,i)}function Jt(e,t,n,r,s,i,a,o){Gt(e,t,s,1,8,i,a,o),Gt(n,r,s,1,8,i,a,o)}function Zt(e,t,n,r,s,i,a,o){Gt(e,t,1,s,8,i,a,o),Gt(n,r,1,s,8,i,a,o)}function en(e,t,n,r,s,i,a,o){qt(e,t+4*s,s,1,8,i,a,o),qt(n,r+4*s,s,1,8,i,a,o)}function tn(e,t,n,r,s,i,a,o){qt(e,t+4,1,s,8,i,a,o),qt(n,r+4,1,s,8,i,a,o)}function nn(){this.ba=new ae,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new m,this.yc=new d}function on(){this.xb=this.a=0,this.l=new Ge,this.ca=new ae,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new b,this.Pb=0,this.wd=new b,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=a(4,sn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,r,s,i,a){for(e=null==e?0:e[t+0],t=0;t<a;++t)s[i+t]=e+n[r+t]&255,e=s[i+t]}function un(e,t,n,r,s,i,a){var o;if(null==e)cn(null,null,n,r,s,i,a);else for(o=0;o<a;++o)s[i+o]=e[t+o]+n[r+o]&255}function dn(e,t,n,r,s,i,a){if(null==e)cn(null,null,n,r,s,i,a);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<a;++o)c=u+(l=e[t+o])-c,u=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,s[i+o]=u}}function hn(e,n,s,a){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>s||0>=a||s+a>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=i(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,d=e.P,h=e.qc,m=e.mb,A=e.nb,g=d+1,p=h-1,x=c.l;if(t(null!=u&&null!=m&&null!=n),ps[0]=null,ps[1]=cn,ps[2]=un,ps[3]=dn,c.ca=m,c.tb=A,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&u[d+0],c.Z=u[d+0]>>2&3,c.Lc=u[d+0]>>4&3,d=u[d+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||d)n=0;else if(x.put=me,x.ac=he,x.bc=Ae,x.ma=c,x.width=n.width,x.height=n.height,x.Da=n.Da,x.v=n.v,x.va=n.va,x.j=n.j,x.o=n.o,c.$a)e:{t(1==c.$a),n=_e();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,f(n.m,u,g,p),!Ee(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=i(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Be(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=p>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:a=l-s}t(null!=e.ga),t(s+a<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(g=e.rc,p=e.Vc,x=e.Fa,d=e.P+1+s*n,h=e.mb,m=e.nb+s*n,t(d<=e.P+e.qc),0!=u.Z)for(t(null!=ps[u.Z]),c=0;c<a;++c)ps[u.Z](g,p,x,d,h,m,n),g=h,p=m,m+=n,d+=n;else for(c=0;c<a;++c)r(h,m,x,d,n),g=h,p=m,m+=n,d+=n;e.rc=g,e.Vc=p}else{if(t(null!=u.mc),n=s+a,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||fn(),u.ic){u=c.V,g=c.Ba,p=c.c;var v=c.i,y=(x=1,d=c.$/p,h=c.$%p,m=c.m,A=c.s,c.$),b=p*v,w=p*n,j=A.wc,T=y<w?ye(A,h,d):null;t(y<=b),t(n<=v),t(Ne(A));t:for(;;){for(;!m.h&&y<w;){if(h&j||(T=ye(A,h,d)),t(null!=T),C(m),256>(v=xe(T.G[0],T.H[0],m)))u[g+y]=v,++y,++h>=p&&(h=0,++d<=n&&!(d%16)&&Ce(c,d));else{if(!(280>v)){x=0;break t}v=pe(v-256,m);var S,_=xe(T.G[4],T.H[4],m);if(C(m),!(y>=(_=fe(p,_=pe(_,m)))&&b-y>=v)){x=0;break t}for(S=0;S<v;++S)u[g+y+S]=u[g+y+S-_];for(y+=v,h+=v;h>=p;)h-=p,++d<=n&&!(d%16)&&Ce(c,d);y<w&&h&j&&(T=ye(A,h,d))}t(m.h==N(m))}Ce(c,d>n?n:d);break t}!x||m.h&&y<b?(x=0,c.a=m.h?5:3):c.$=y,n=x}else n=Te(c,c.V,c.Ba,c.c,c.i,n,Me);if(!n){a=0;break e}}s+a>=l&&(e.Cc=1),a=1}if(!a)return null;if(e.Cc&&(null!=(a=e.ga)&&(a.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+s*o}function mn(e,t,n,r,s,i){for(;0<s--;){var a,o=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(a=0;a<r;++a){var d=c[u+4*a];255!=d&&(d*=32897,o[l+4*a+0]=o[l+4*a+0]*d>>23,o[l+4*a+1]=o[l+4*a+1]*d>>23,o[l+4*a+2]=o[l+4*a+2]*d>>23)}t+=i}}function An(e,t,n,r,s){for(;0<r--;){var i;for(i=0;i<n;++i){var a=e[t+2*i+0],o=15&(c=e[t+2*i+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*i+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,e[t+2*i+1]=240&c|o}t+=s}}function gn(e,t,n,r,s,i,a,o){var l,c,u=255;for(c=0;c<s;++c){for(l=0;l<r;++l){var d=e[t+l];i[a+4*l]=d,u&=d}t+=n,a+=o}return 255!=u}function pn(e,t,n,r,s){var i;for(i=0;i<s;++i)n[r+i]=e[t+i]>>8}function fn(){Nr=mn,jr=An,Cr=gn,Tr=pn}function xn(n,r,s){e[n]=function(e,n,i,a,o,l,c,u,d,h,m,A,g,p,f,x,v){var y,b=v-1>>1,w=o[l+0]|c[u+0]<<16,N=d[h+0]|m[A+0]<<16;t(null!=e);var j=3*w+N+131074>>2;for(r(e[n+0],255&j,j>>16,g,p),null!=i&&(j=3*N+w+131074>>2,r(i[a+0],255&j,j>>16,f,x)),y=1;y<=b;++y){var C=o[l+y]|c[u+y]<<16,T=d[h+y]|m[A+y]<<16,S=w+C+N+T+524296,_=S+2*(C+N)>>3;j=_+w>>1,w=(S=S+2*(w+T)>>3)+C>>1,r(e[n+2*y-1],255&j,j>>16,g,p+(2*y-1)*s),r(e[n+2*y-0],255&w,w>>16,g,p+(2*y-0)*s),null!=i&&(j=S+N>>1,w=_+T>>1,r(i[a+2*y-1],255&j,j>>16,f,x+(2*y-1)*s),r(i[a+2*y+0],255&w,w>>16,f,x+(2*y+0)*s)),w=C,N=T}1&v||(j=3*w+N+131074>>2,r(e[n+v-1],255&j,j>>16,g,p+(v-1)*s),null!=i&&(j=3*N+w+131074>>2,r(i[a+v-1],255&j,j>>16,f,x+(v-1)*s)))}}function vn(){fs[Pr]=xs,fs[Fr]=ys,fs[Ur]=vs,fs[Rr]=bs,fs[Or]=ws,fs[Hr]=Ns,fs[Qr]=js,fs[zr]=ys,fs[Vr]=bs,fs[Kr]=ws,fs[Gr]=Ns}function yn(e){return e&~Bs?0>e?0:255:e>>Es}function bn(e,t){return yn((19077*e>>8)+(26149*t>>8)-14234)}function wn(e,t,n){return yn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Nn(e,t){return yn((19077*e>>8)+(33050*t>>8)-17685)}function jn(e,t,n,r,s){r[s+0]=bn(e,n),r[s+1]=wn(e,t,n),r[s+2]=Nn(e,t)}function Cn(e,t,n,r,s){r[s+0]=Nn(e,t),r[s+1]=wn(e,t,n),r[s+2]=bn(e,n)}function Tn(e,t,n,r,s){var i=wn(e,t,n);t=i<<3&224|Nn(e,t)>>3,r[s+0]=248&bn(e,n)|i>>5,r[s+1]=t}function Sn(e,t,n,r,s){var i=240&Nn(e,t)|15;r[s+0]=240&bn(e,n)|wn(e,t,n)>>4,r[s+1]=i}function _n(e,t,n,r,s){r[s+0]=255,jn(e,t,n,r,s+1)}function En(e,t,n,r,s){Cn(e,t,n,r,s),r[s+3]=255}function Bn(e,t,n,r,s){jn(e,t,n,r,s),r[s+3]=255}function Ke(e,t){return 0>e?0:e>t?t:e}function Mn(t,n,r){e[t]=function(e,t,s,i,a,o,l,c,u){for(var d=c+(-2&u)*r;c!=d;)n(e[t+0],s[i+0],a[o+0],l,c),n(e[t+1],s[i+0],a[o+0],l,c+r),t+=2,++i,++o,c+=2*r;1&u&&n(e[t+0],s[i+0],a[o+0],l,c)}}function kn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Ln(e,t,n,r,s){switch(e>>>30){case 3:ar(t,n,r,s,0);break;case 2:or(t,n,r,s);break;case 1:cr(t,n,r,s)}}function In(e,t){var n,i,a=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,d=e.pc+584,h=e.oc,m=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[d+32*n-1]=129,h[m+32*n-1]=129;for(0<a?l[c-1-32]=u[d-1-32]=h[m-1-32]=129:(s(l,c-32-1,127,21),s(u,d-32-1,127,9),s(h,m-32-1,127,9)),i=0;i<e.za;++i){var A=t.ya[t.aa+i];if(0<i){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,d+32*n-4,u,d+32*n+4,4),r(h,m+32*n-4,h,m+32*n+4,4)}var g=e.Gd,p=e.Hd+i,f=A.ad,x=A.Hc;if(0<a&&(r(l,c-32,g[p].y,0,16),r(u,d-32,g[p].f,0,8),r(h,m-32,g[p].ea,0,8)),A.Za){var v=l,y=c-32+16;for(0<a&&(i>=e.za-1?s(v,y,g[p].y[15],4):r(v,y,g[p+1].y,0,4)),n=0;4>n;n++)v[y+128+n]=v[y+256+n]=v[y+384+n]=v[y+0+n];for(n=0;16>n;++n,x<<=2)v=l,y=c+Us[n],hs[A.Ob[n]](v,y),Ln(x,f,16*+n,v,y)}else if(v=kn(i,a,A.Ob[0]),ds[v](l,c),0!=x)for(n=0;16>n;++n,x<<=2)Ln(x,f,16*+n,l,c+Us[n]);for(n=A.Gc,v=kn(i,a,A.Dd),ms[v](u,d),ms[v](h,m),x=f,v=u,y=d,255&(A=n|0)&&(170&A?lr(x,256,v,y):ur(x,256,v,y)),A=h,x=m,255&(n>>=8)&&(170&n?lr(f,320,A,x):ur(f,320,A,x)),a<e.Ub-1&&(r(g[p].y,0,l,c+480,16),r(g[p].f,0,u,d+224,8),r(g[p].ea,0,h,m+224,8)),n=8*o*e.B,g=e.sa,p=e.ta+16*i+16*o*e.R,f=e.qa,A=e.ra+8*i+n,x=e.Ha,v=e.Ia+8*i+n,n=0;16>n;++n)r(g,p+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(f,A+n*e.B,u,d+32*n,8),r(x,v+n*e.B,h,m+32*n,8)}}function Dn(e,r,s,i,a,o,l,c,u){var d=[0],h=[0],m=0,A=null!=u?u.kd:0,g=null!=u?u:new rn;if(null==e||12>s)return 7;g.data=e,g.w=r,g.ha=s,r=[r],s=[s],g.gb=[g.gb];e:{var p=r,x=s,v=g.gb;if(t(null!=e),t(null!=x),t(null!=v),v[0]=0,12<=x[0]&&!n(e,p[0],"RIFF")){if(n(e,p[0]+8,"WEBP")){v=3;break e}var y=k(e,p[0]+4);if(12>y||4294967286<y){v=3;break e}if(A&&y>x[0]-8){v=7;break e}v[0]=y,p[0]+=12,x[0]-=12}v=0}if(0!=v)return v;for(y=0<g.gb[0],s=s[0];;){e:{var w=e;x=r,v=s;var N=d,j=h,C=p=[0];if((_=m=[m])[0]=0,8>v[0])v=7;else{if(!n(w,x[0],"VP8X")){if(10!=k(w,x[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var T=k(w,x[0]+8),S=1+M(w,x[0]+12);if(2147483648<=S*(w=1+M(w,x[0]+15))){v=3;break e}null!=C&&(C[0]=T),null!=N&&(N[0]=S),null!=j&&(j[0]=w),x[0]+=18,v[0]-=18,_[0]=1}v=0}}if(m=m[0],p=p[0],0!=v)return v;if(x=!!(2&p),!y&&m)return 3;if(null!=o&&(o[0]=!!(16&p)),null!=l&&(l[0]=x),null!=c&&(c[0]=0),l=d[0],p=h[0],m&&x&&null==u){v=0;break}if(4>s){v=7;break}if(y&&m||!y&&!m&&!n(e,r[0],"ALPH")){s=[s],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];e:{T=e,v=r,y=s;var _=g.gb;N=g.na,j=g.P,C=g.Sa,S=22,t(null!=T),t(null!=y),w=v[0];var E=y[0];for(t(null!=N),t(null!=C),N[0]=null,j[0]=null,C[0]=0;;){if(v[0]=w,y[0]=E,8>E){v=7;break e}var B=k(T,w+4);if(4294967286<B){v=3;break e}var L=8+B+1&-2;if(S+=L,0<_&&S>_){v=3;break e}if(!n(T,w,"VP8 ")||!n(T,w,"VP8L")){v=0;break e}if(E[0]<L){v=7;break e}n(T,w,"ALPH")||(N[0]=T,j[0]=w+8,C[0]=B),w+=L,E-=L}}if(s=s[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=v)break}s=[s],g.Ja=[g.Ja],g.xa=[g.xa];e:if(_=e,v=r,y=s,N=g.gb[0],j=g.Ja,C=g.xa,T=v[0],w=!n(_,T,"VP8 "),S=!n(_,T,"VP8L"),t(null!=_),t(null!=y),t(null!=j),t(null!=C),8>y[0])v=7;else{if(w||S){if(_=k(_,T+4),12<=N&&_>N-12){v=3;break e}if(A&&_>y[0]-8){v=7;break e}j[0]=_,v[0]+=8,y[0]-=8,C[0]=S}else C[0]=5<=y[0]&&47==_[T+0]&&!(_[T+4]>>5),j[0]=y[0];v=0}if(s=s[0],g.Ja=g.Ja[0],g.xa=g.xa[0],r=r[0],0!=v)break;if(4294967286<g.Ja)return 3;if(null==c||x||(c[0]=g.xa?2:1),l=[l],p=[p],g.xa){if(5>s){v=7;break}c=l,A=p,x=o,null==e||5>s?e=0:5<=s&&47==e[r+0]&&!(e[r+4]>>5)?(y=[0],_=[0],N=[0],f(j=new b,e,r,s),ge(j,y,_,N)?(null!=c&&(c[0]=y[0]),null!=A&&(A[0]=_[0]),null!=x&&(x[0]=N[0]),e=1):e=0):e=0}else{if(10>s){v=7;break}c=p,null==e||10>s||!$e(e,r+3,s-3)?e=0:(A=e[r+0]|e[r+1]<<8|e[r+2]<<16,x=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&A||3<(A>>1&7)||!(A>>4&1)||A>>5>=g.Ja||!x||!e?e=0:(l&&(l[0]=x),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],p=p[0],m&&(d[0]!=l||h[0]!=p))return 3;null!=u&&(u[0]=g,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-s));break}return 0==v||7==v&&m&&null==u?(null!=o&&(o[0]|=null!=g.na&&0<g.na.length),null!=i&&(i[0]=l),null!=a&&(a[0]=p),0):v}function Pn(e,t,n){var r=t.width,s=t.height,i=0,a=0,o=r,l=s;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,i=e.v,a=e.j,11>n||(i&=-2,a&=-2),0>i||0>a||0>=o||0>=l||i+o>r||a+l>s))return 0;if(t.v=i,t.j=a,t.va=i+o,t.o=a+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!P(o,l,n=[e.ib],i=[e.hb]))return 0;t.ib=n[0],t.hb=i[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*s/4,t.Kb=0),1}function Fn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Un(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var s=n.cd,a=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=s||0>=a||o+s>e||l+a>t)return 2;e=s,t=a}if(n.da){if(!P(e,t,s=[n.ib],a=[n.hb]))return 2;e=s[0],t=a[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Pr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=a=s=t=0;var d=(l=c*Qs[e])*u;if(11>e||(a=(u+1)/2*(t=(c+1)/2),12==e&&(o=(s=c)*u)),null==(u=i(d+2*a+o))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=d):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=d,c.f=u,c.N=0+d,c.Ab=t,c.Cd=a,c.ea=u,c.W=0+d+a,c.Db=t,c.Ed=a,12==e&&(c.F=u,c.J=0+d+2*a),c.Tc=o,c.lb=s)}if(t=1,s=r.S,a=r.width,o=r.height,s>=Pr&&13>s)if(11>s)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+a<=e.size,t&=l>=a*Qs[s],t&=null!=e.eb;else{e=r.f.kb,l=(a+1)/2,d=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var h=Math.abs(e.Db),m=Math.abs(e.lb),A=m*(o-1)+a;t&=c*(o-1)+a<=e.Fd,t&=u*(d-1)+l<=e.Cd,t=(t&=h*(d-1)+l<=e.Ed)&c>=a&u>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==s&&(t&=m>=a,t&=A<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Fn(r)),e}var Rn=64,On=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hn=24,Qn=32,zn=8,Vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];R("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return H(H(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return H(e,t[n-1])},e.Predictor7=function(e,t,n){return H(e,t[n+0])},e.Predictor8=function(e,t,n){return H(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return H(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return H(H(e,t[n-1]),H(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=V(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+V(r>>16&255,e>>16&255,t>>16&255)+V(r>>8&255,e>>8&255,t>>8&255)+V(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(Q((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|Q((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|Q((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|Q((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(z((e=H(e,t[n+0]))>>24&255,r>>24&255)<<24|z(e>>16&255,r>>16&255)<<16|z(e>>8&255,r>>8&255)<<8|z(255&e,255&r))>>>0};var Kn=e.PredictorAdd0;e.PredictorAdd1=K,R("Predictor2","PredictorAdd2"),R("Predictor3","PredictorAdd3"),R("Predictor4","PredictorAdd4"),R("Predictor5","PredictorAdd5"),R("Predictor6","PredictorAdd6"),R("Predictor7","PredictorAdd7"),R("Predictor8","PredictorAdd8"),R("Predictor9","PredictorAdd9"),R("Predictor10","PredictorAdd10"),R("Predictor11","PredictorAdd11"),R("Predictor12","PredictorAdd12"),R("Predictor13","PredictorAdd13");var Gn=e.PredictorAdd2;$("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),$("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var qn,Wn=e.ColorIndexInverseTransform,$n=e.MapARGB,Xn=e.VP8LColorIndexInverseTransformAlpha,Yn=e.MapAlpha,Jn=e.VP8LPredictorsAdd=[];Jn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,er,tr,nr,rr,sr,ir,ar,or,lr,cr,ur,dr,hr,mr,Ar,gr,pr,fr,xr,vr,yr,br,wr,Nr,jr,Cr,Tr,Sr=i(511),_r=i(2041),Er=i(225),Br=i(767),Mr=0,kr=_r,Lr=Er,Ir=Br,Dr=Sr,Pr=0,Fr=1,Ur=2,Rr=3,Or=4,Hr=5,Qr=6,zr=7,Vr=8,Kr=9,Gr=10,qr=[2,3,7],Wr=[3,3,11],$r=[280,256,256,256,40],Xr=[0,1,1,1,0],Yr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Jr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],es=8,ts=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ns=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rs=null,ss=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],is=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],os=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ls=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],us=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ds=[],hs=[],ms=[],As=1,gs=2,ps=[],fs=[];xn("UpsampleRgbLinePair",jn,3),xn("UpsampleBgrLinePair",Cn,3),xn("UpsampleRgbaLinePair",Bn,4),xn("UpsampleBgraLinePair",En,4),xn("UpsampleArgbLinePair",_n,4),xn("UpsampleRgba4444LinePair",Sn,2),xn("UpsampleRgb565LinePair",Tn,2);var xs=e.UpsampleRgbLinePair,vs=e.UpsampleBgrLinePair,ys=e.UpsampleRgbaLinePair,bs=e.UpsampleBgraLinePair,ws=e.UpsampleArgbLinePair,Ns=e.UpsampleRgba4444LinePair,js=e.UpsampleRgb565LinePair,Cs=16,Ts=1<<Cs-1,Ss=-227,_s=482,Es=6,Bs=(256<<Es)-1,Ms=0,ks=i(256),Ls=i(256),Is=i(256),Ds=i(256),Ps=i(_s-Ss),Fs=i(_s-Ss);Mn("YuvToRgbRow",jn,3),Mn("YuvToBgrRow",Cn,3),Mn("YuvToRgbaRow",Bn,4),Mn("YuvToBgraRow",En,4),Mn("YuvToArgbRow",_n,4),Mn("YuvToRgba4444Row",Sn,2),Mn("YuvToRgb565Row",Tn,2);var Us=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Rs=[0,2,8],Os=[8,7,6,4,4,2,2,2,1,1,1,1],Hs=1;this.WebPDecodeRGBA=function(e,n,r,s,i){var a=Fr,o=new nn,l=new ae;o.ba=l,l.S=a,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,d=new oe;if(null==d||null==e)var h=2;else t(null!=d),h=Dn(e,n,r,d.width,d.height,d.Pd,d.Qd,d.format,null);if(0!=h?c=0:(null!=c&&(c[0]=d.width[0]),null!=u&&(u[0]=d.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=s&&(s[0]=l.width),null!=i&&(i[0]=l.height);e:{if(s=new Ge,(i=new rn).data=e,i.w=n,i.ha=r,i.kd=1,n=[0],t(null!=i),(0==(e=Dn(i.data,i.w,i.ha,null,null,null,n,null,i))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=o),s.data=i.data,s.w=i.w+i.offset,s.ha=i.ha-i.offset,s.put=me,s.ac=he,s.bc=Ae,s.ma=o,i.xa){if(null==(e=_e())){o=1;break e}if(function(e,n){var r=[0],s=[0],i=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,f(e.m,n.data,n.w,n.ha),!ge(e.m,r,s,i)){e.a=3;break t}if(e.xb=gs,n.width=r[0],n.height=s[0],!Ee(r[0],s[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,s)){if(s=0==(n=Un(s.width,s.height,o.Oa,o.ba))){t:{s=e;n:for(;;){if(null==s){s=0;break t}if(t(null!=s.s.yc),t(null!=s.s.Ya),t(0<s.s.Wb),t(null!=(r=s.l)),t(null!=(i=r.ma)),0!=s.xb){if(s.ca=i.ba,s.tb=i.tb,t(null!=s.ca),!Pn(i.Oa,r,Rr)){s.a=2;break n}if(!Be(s,r.width))break n;if(r.da)break n;if((r.da||re(s.ca.S))&&fn(),11>s.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=s.ca.f.kb.F&&fn()),s.Pb&&0<s.s.ua&&null==s.s.vb.X&&!L(s.s.vb,s.s.Wa.Xa)){s.a=1;break n}s.xb=0}if(!Te(s,s.V,s.Ba,s.c,s.i,r.o,we))break n;i.Dc=s.Ma,s=1;break t}t(0!=s.a),s=0}s=!s}s&&(n=e.a)}else n=e.a}else{if(null==(e=new qe)){o=1;break e}if(e.Fa=i.na,e.P=i.P,e.qc=i.Sa,Xe(e,s)){if(0==(n=Un(s.width,s.height,o.Oa,o.ba))){if(e.Aa=0,r=o.Oa,t(null!=(i=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(u=d=0;4>u;++u)12>(h=i.pb[u]).lc&&(h.ia=c*Os[0>h.lc?0:h.lc]>>3),d|=h.ia;d&&(alert("todo:VP8InitRandom"),i.ia=1)}i.Ga=r.Id,100<i.Ga?i.Ga=100:0>i.Ga&&(i.Ga=0)}Ze(e,s)||(n=e.a)}}else n=e.a}0==n&&null!=o.Oa&&o.Oa.fd&&(n=Fn(o.ba))}o=n}a=0!=o?null:11>a?l.f.RGBA.eb:l.f.kb.y}else a=null;return a};var Qs=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],m=[0],A=[],g=new l,p=e,f=function(e,t){var n={},r=0,s=!1,i=0,a=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(d(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=d(e,t+=4);t+=4;var h=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(g=n.frames[r]).src_off=s?a:t-8,g.src_size=i+l+8,r++,s&&(s=!1,i=0,a=0);break;case"VP8X":(g=n.header={}).feature_flags=e[t];var m=t+4;g.canvas_width=1+u(e,m),m+=3,g.canvas_height=1+u(e,m),m+=3;break;case"ALPH":s=!0,i=h+8,a=t-8;break;case"ANIM":(g=n.header).bgcolor=d(e,t),m=t+4,g.loop_count=(p=e)[(f=m)+0]|p[f+1]<<8,m+=2;break;case"ANMF":var A,g;(g=n.frames[r]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,A=e[t++],g.dispose=1&A,g.blend=A>>1&1}"ANMF"!=o&&(t+=h)}var p,f;return n}}(p,0);f.response=p,f.rgbaoutput=!0,f.dataurl=!1;var x=f.header?f.header:null,v=f.frames?f.frames:null;if(x){x.loop_counter=x.loop_count,h=[x.canvas_height],m=[x.canvas_width];for(var y=0;y<v.length&&0!=v[y].blend;y++);}var b=v[0],w=g.WebPDecodeRGBA(p,b.src_off,b.src_size,m,h);b.rgba=w,b.imgwidth=m[0],b.imgheight=h[0];for(var N=0;N<m[0]*h[0]*4;N++)A[N]=w[N];return this.width=m,this.height=h,this.data=A,this}!function(e){var t=function(t,r,l,c){var u=4,d=i;switch(c){case e.image_compression.FAST:u=1,d=s;break;case e.image_compression.MEDIUM:u=6,d=a;break;case e.image_compression.SLOW:u=9,d=o}var h=Y(t=n(t,r,l,d),{level:u});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,r){for(var s,i,a,o=e.length/t,l=new Uint8Array(e.length+o),d=c(),h=0;h<o;h+=1){if(a=h*t,s=e.subarray(a,a+t),r)l.set(r(s,n,i),a+h);else{for(var m,A=d.length,g=[];m<A;m+=1)g[m]=d[m](s,n,i);var p=u(g.concat());l.set(g[p],a+h)}i=s}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},s=function(e,t){var n,r=[],s=e.length;r[0]=1;for(var i=0;i<s;i+=1)n=e[i-t]||0,r[i+1]=e[i]-n+256&255;return r},i=function(e,t,n){var r,s=[],i=e.length;s[0]=2;for(var a=0;a<i;a+=1)r=n&&n[a]||0,s[a+1]=e[a]-r+256&255;return s},a=function(e,t,n){var r,s,i=[],a=e.length;i[0]=3;for(var o=0;o<a;o+=1)r=e[o-t]||0,s=n&&n[o]||0,i[o+1]=e[o]+256-(r+s>>>1)&255;return i},o=function(e,t,n){var r,s,i,a,o=[],c=e.length;o[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,s=n&&n[u]||0,i=n&&n[u-t]||0,a=l(r,s,i),o[u+1]=e[u]-a+256&255;return o},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),s=Math.abs(e-n),i=Math.abs(e+t-n-n);return r<=s&&r<=i?e:s<=i?t:n},c=function(){return[r,s,i,a,o]},u=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,s,i){var a,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Gt(n)).imgData,o=l.bits,a=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){A=(m=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,p=new Uint8Array(A*l.colors),g=new Uint8Array(A);var N,j=l.pixelBitlength-l.bits;for(v=0,y=0;v<A;v++){for(x=m[v],N=0;N<j;)p[y++]=x>>>N&255,N+=l.bits;g[v]=x>>>N&255}}if(16===l.bits){A=(m=new Uint32Array(l.decodePixels().buffer)).length,p=new Uint8Array(A*(32/l.pixelBitlength)*l.colors),g=new Uint8Array(A*(32/l.pixelBitlength)),f=l.colors>1,v=0,y=0;for(var C=0;v<A;)x=m[v++],p[y++]=x>>>0&255,f&&(p[y++]=x>>>16&255,x=m[v++],p[y++]=x>>>0&255),g[C++]=x>>>16&255;o=8}i!==e.image_compression.NONE?(n=t(p,l.width*l.colors,l.colors,i),h=t(g,l.width,1,i)):(n=p,h=g,b=void 0)}if(3===l.colorType&&(a=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var T=l.transparency.indexed,S=0;for(v=0,A=T.length;v<A;++v)S+=T[v];if((S/=255)===A-1&&-1!==T.indexOf(0))c=[T.indexOf(0)];else if(S!==A){for(m=l.decodePixels(),g=new Uint8Array(m.length),v=0,A=m.length;v<A;v++)g[v]=T[m[v]];h=t(g,l.width,1)}}var _=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(i);return b===this.decode.FLATE_DECODE&&(w="/Predictor "+_+" "),w+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:s,data:n,index:r,filter:b,decodeParameters:w,transparency:c,palette:d,sMask:h,predictor:_,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:a}}}}(Le.API),function(e){e.processGIF89A=function(t,n,r,s){var i=new qt(t),a=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new $t(100).encode(c,100);return e.processJPEG.call(this,u,n,r,s)},e.processGIF87A=e.processGIF89A}(Le.API),Xt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ne.log("bit decode error:"+e)}},Xt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}0!==n&&(this.pos+=4-n)}},Xt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}0!==t&&(this.pos+=4-t)}},Xt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}0!==e&&(this.pos+=4-e)}},Xt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=e}},Xt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&n)/n*255|0,c=(a>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},Xt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Xt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=a}},Xt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var i=new Xt(t,!1),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new $t(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(Le.API),Yt.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var i=new Yt(t),a=i.width,o=i.height,l={data:i.getData(),width:a,height:o},c=new $t(100).encode(l,100);return e.processJPEG.call(this,c,n,r,s)}}(Le.API),Le.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var u=r[c],d=r[c+1],h=r[c+2],m=r[c+3];i[o++]=u,i[o++]=d,i[o++]=h,a[l++]=m}var A=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:A,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Le.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Ht=Le.API,Qt=Ht.getCharWidthsArray=function(e,t){var n,s,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=!1!==t.doKerning,m=0,A=e.length,g=0,p=l[0]||c,f=[];for(n=0;n<A;n++)s=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?f.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/a)||0)/1e3):(m=h&&"object"===(0,r.A)(u[s])&&!isNaN(parseInt(u[s][g],10))?u[s][g]/d:0,f.push((l[s]||p)/c+m)),g=s;return f},zt=Ht.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Ht.processArabic&&(e=Ht.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,s)/n:Qt.apply(this,arguments).reduce((function(e,t){return e+t}),0)},Vt=function(e,t,n,r){for(var s=[],i=0,a=e.length,o=0;i!==a&&o+t[i]<n;)o+=t[i],i++;s.push(e.slice(0,i));var l=i;for(o=0;i!==a;)o+t[i]>r&&(s.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&s.push(e.slice(l,i)),s},Kt=function(e,t,n){n||(n={});var r,s,i,a,o,l,c,u=[],d=[u],h=n.textIndent||0,m=0,A=0,g=e.split(" "),p=Qt.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?g[0].length+2:n.lineIndent||0){var f=Array(l).join(" "),x=[];g.map((function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):x.push(e[0])})),g=x,l=zt.apply(this,[f,n])}for(i=0,a=g.length;i<a;i++){var v=0;if(r=g[i],l&&"\n"==r[0]&&(r=r.substr(1),v=1),h+m+(A=(s=Qt.apply(this,[r,n])).reduce((function(e,t){return e+t}),0))>t||v){if(A>t){for(o=Vt.apply(this,[r,s,t-(h+m),t]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);A=s.slice(r.length-(u[0]?u[0].length:0)).reduce((function(e,t){return e+t}),0)}else u=[r];d.push(u),h=A+l,m=p}else u.push(r),h+=m+A,m=p}return c=l?function(e,t){return(t?f:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(c)},Ht.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(Kt.apply(this,[r[o],a,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[t[i]]="0123456789abcdef"[i],s["0123456789abcdef"[i]]=t[i];var a=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,i,l,c=["{"];for(var u in e){if(t=e[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=a(u).slice(2)).slice(0,-1)+s[n.slice(-1)]),"number"==typeof t)t<0?(i=a(t).slice(3),l="-"):(i=a(t).slice(2),l=""),i=l+i.slice(0,-1)+s[i.slice(-1)];else{if("object"!==(0,r.A)(t))throw new Error("Don't know what to do with value type "+(0,r.A)(t)+".");i=o(t)}c.push(n+i)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,s,i,a={},o=1,l=a,c=[],u="",d="",h=e.length-1,m=1;m<h;m+=1)"'"==(i=e[m])?t?(s=t.join(""),t=void 0):t=[]:t?t.push(i):"{"==i?(c.push([l,s]),l={},s=void 0):"}"==i?((r=c.pop())[0][r[1]]=l,s=void 0,l=r[0]):"-"==i?o=-1:void 0===s?n.hasOwnProperty(i)?(u+=n[i],s=parseInt(u,16)*o,o=1,u=""):u+=i:n.hasOwnProperty(i)?(d+=n[i],l[s]=parseInt(d,16)*o,o=1,s=void 0,d=""):d+=i;return a},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=d.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=u.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Le.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(void 0===i)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if("string"!=typeof(r=!1===i.existsFileInVFS(s.postScriptName)?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(ae(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(s,r)}}])}(Le),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):n.e(265).then(n.bind(n,265))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Le.API.addSvgAsImage=function(t,n,r,s,i,a,o,l){if(isNaN(n)||isNaN(r))throw ne.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw ne.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then((function(e){return e.fromString(u,t,d)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(d)})).then((function(){h.addImage(c.toDataURL("image/jpeg",1),n,r,s,i,o,l)}))}}(),Le.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},Le.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var s,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function m(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var A=l.length;for(h=0;h<A;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if("object"===(0,r.A)(e))for(i in e)if(a=e[i],m(l,i)&&void 0!==a){if("boolean"===n[i].type&&"boolean"==typeof a)n[i].value=a;else if("name"===n[i].type&&m(n[i].valueSet,a))n[i].value=a;else if("integer"===n[i].type&&Number.isInteger(a))n[i].value=a;else if("array"===n[i].type){for(u=0;u<a.length;u+=1)if(s=!0,1===a[u].length&&"number"==typeof a[u][0])c.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)"number"!=typeof a[u][d]&&(s=!1);!0===s&&c.push([a[u][0]-1,a[u][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),a=n.length+r.length+s.length+t.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+s+i),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Le.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,s=["","0","00","000","0000"],i=[""],a=0,o=e.length;a<o;++a){if(n=t.metadata.characterToGlyph(e.charCodeAt(a)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(a),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return i.join("");n=n.toString(16),i.push(s[4-n.length],n)}return i.join("")},r=function(e){var t,n,r,s,i,a,o;for(i="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,o=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;a<o;a++)t=n[a],r.length>=100&&(i+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(s=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+s+">"));return r.length&&(i+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),i+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,i=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var d=i();a({data:c,addLength1:!0,objectId:d}),s("endobj");var h=i();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),s("endobj");var m=i();s("<<"),s("/Type /FontDescriptor"),s("/FontName /"+Se(n.fontName)),s("/FontFile2 "+d+" 0 R"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/Flags "+n.metadata.flags),s("/StemV "+n.metadata.stemV),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s(">>"),s("endobj");var A=i();s("<<"),s("/Type /Font"),s("/BaseFont /"+Se(n.fontName)),s("/FontDescriptor "+m+" 0 R"),s("/W "+e.API.PDFObject.convert(o)),s("/CIDToGIDMap /Identity"),s("/DW 1000"),s("/Subtype /CIDFontType2"),s("/CIDSystemInfo"),s("<<"),s("/Supplement 0"),s("/Registry (Adobe)"),s("/Ordering ("+n.encoding+")"),s(">>"),s(">>"),s("endobj"),n.objectNumber=i(),s("<<"),s("/Type /Font"),s("/Subtype /Type0"),s("/ToUnicode "+h+" 0 R"),s("/BaseFont /"+Se(n.fontName)),s("/Encoding /"+n.encoding),s("/DescendantFonts ["+A+" 0 R]"),s(">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,s=t.out,i=t.newObject,a=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=i();a({data:l,addLength1:!0,objectId:u}),s("endobj");var d=i();a({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),s("endobj");var h=i();s("<<"),s("/Descent "+n.metadata.decender),s("/CapHeight "+n.metadata.capHeight),s("/StemV "+n.metadata.stemV),s("/Type /FontDescriptor"),s("/FontFile2 "+u+" 0 R"),s("/Flags 96"),s("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),s("/FontName /"+Se(n.fontName)),s("/ItalicAngle "+n.metadata.italicAngle),s("/Ascent "+n.metadata.ascender),s(">>"),s("endobj"),n.objectNumber=i();for(var m=0;m<n.metadata.hmtx.widths.length;m++)n.metadata.hmtx.widths[m]=parseInt(n.metadata.hmtx.widths[m]*(1e3/n.metadata.head.unitsPerEm));s("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+Se(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),s("endobj"),n.isAlreadyPutted=!0}}(t)}]);var s=function(e){var t,r=e.text||"",s=e.x,i=e.y,a=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,d=c,h="",m=0,A="",g=u[d].encoding;if("Identity-H"!==u[d].encoding)return{text:r,x:s,y:i,options:a,mutex:o};for(A=r,d=c,Array.isArray(r)&&(A=r[0]),m=0;m<A.length;m+=1)u[d].metadata.hasOwnProperty("cmap")&&(t=u[d].metadata.cmap.unicode.codeMap[A[m].charCodeAt(0)]),t||A[m].charCodeAt(0)<256&&u[d].metadata.hasOwnProperty("Unicode")?h+=A[m]:h+="";var p="";return parseInt(d.slice(1))<14||"WinAnsiEncoding"===g?p=l(h,d).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(p=n(h,u[d])),o.isHex=!0,{text:p,x:s,y:i,options:a,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var i=0;for(i=0;i<t.length;i+=1)Array.isArray(t[i])&&3===t[i].length?n.push([s(Object.assign({},r,{text:t[i][0]})).text,t[i][1],t[i][2]]):n.push(s(Object.assign({},r,{text:t[i]})).text);e.text=n}else e.text=s(Object.assign({},r,{text:t})).text}])}(Le),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Le.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,s,i,a,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),p=!1,f=0;this.__bidiEngine__={};var x=function(e){var t=e.charCodeAt(),n=t>>8,r=m[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":g.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=x(e.charAt(n))))return!1;if("R"===t)return!0}return!1},y=function(e,t,a,o){var l,c,u,d,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":p=!1;break;case"N":case"AN":break;case"EN":p&&(h="AN");break;case"AL":p=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=a[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":p&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?a[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===a[o-1]){h="EN";break}if(p){h="N";break}for(u=o+1,d=t.length;u<d&&"ET"===t[u];)u++;h=u<d&&"EN"===t[u]?"EN":"N";break;case"NSM":if(s&&!i){for(d=t.length,u=o+1;u<d&&"NSM"===t[u];)u++;if(u<d){var m=e[o],A=m>=1425&&m<=2303||64286===m;if(l=t[u],A&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":a[o-1];break;case"B":p=!1,n=!0,h=f;break;case"S":r=!0,h="N"}return h},b=function(e,t,n){var r=e.split("");return n&&w(r,n,{hiLevel:f}),r.reverse(),t&&t.reverse(),r.join("")},w=function(e,t,s){var i,a,o,l,c,m=-1,A=e.length,g=0,v=[],b=f?d:u,w=[];for(p=!1,n=!1,r=!1,a=0;a<A;a++)w[a]=x(e[a]);for(o=0;o<A;o++){if(c=g,v[o]=y(e,w,v,o),i=240&(g=b[c][h[v[o]]]),g&=15,t[o]=l=b[g][5],i>0)if(16===i){for(a=m;a<o;a++)t[a]=1;m=-1}else m=-1;if(b[g][6])-1===m&&(m=o);else if(m>-1){for(a=m;a<o;a++)t[a]=l;m=-1}"B"===w[o]&&(t[o]=0),s.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=f;for(var s=r-1;s>=0&&"WS"===e[s];s--)t[s]=f}}(w,t,A)},N=function(e,t,r,s,i){if(!(i.hiLevel<e)){if(1===e&&1===f&&!n)return t.reverse(),void(r&&r.reverse());for(var a,o,l,c,u=t.length,d=0;d<u;){if(s[d]>=e){for(l=d+1;l<u&&s[l]>=e;)l++;for(c=d,o=l-1;c<o;c++,o--)a=t[c],t[c]=t[o],t[o]=a,r&&(a=r[c],r[c]=r[o],r[o]=a);d=l}d++}}},j=function(e,t,n){var r=e.split(""),s={hiLevel:f};return n||(n=[]),w(r,n,s),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,s=0;s<e.length;s++)1===t[s]&&(r=A.indexOf(e[s]))>=0&&(e[s]=A[r+1])}(r,n,s),N(2,r,t,n,s),N(1,r,t,n,s),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===i&&(i=v(e)),void 0===o&&(o=v(e))}(e,t),s||!a||o)if(s&&a&&i^o)f=i?1:0,e=b(e,t,n);else if(!s&&a&&o)f=i?1:0,e=j(e,t,n),e=b(e,t);else if(!s||i||a||o){if(s&&!a&&i^o)e=b(e,t),i?(f=0,e=j(e,t,n)):(f=1,e=j(e,t,n),e=b(e,t));else if(s&&i&&!a&&o)f=1,e=j(e,t,n),e=b(e,t);else if(!s&&!a&&i^o){var r=l;i?(f=1,e=j(e,t,n),f=0,l=!1,e=j(e,t,n),l=r):(f=0,e=j(e,t,n),e=b(e,t),f=1,l=!1,e=j(e,t,n),l=r,e=b(e,t))}}else f=0,e=j(e,t,n);else f=i?1:0,e=j(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(s=e.isInputVisual,a=e.isOutputVisual,i=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var s=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var i=0;for(s=[],i=0;i<t.length;i+=1)"[object Array]"===Object.prototype.toString.call(t[i])?s.push([n.doBidiReorder(t[i][0]),t[i][1],t[i][2]]):s.push([n.doBidiReorder(t[i])]);e.text=s}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Le),Le.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Zt(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vn(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new en(this.contents),this.head=new rn(this),this.name=new dn(this),this.cmap=new an(this),this.toUnicode={},this.hhea=new on(this),this.maxp=new hn(this),this.hmtx=new mn(this),this.post=new cn(this),this.os2=new ln(this),this.loca=new xn(this),this.glyf=new gn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,s;for(s=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],s.push(Math.round(e*this.scaleFactor));return s}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(s=this.familyClass)||2===s||3===s||4===s||5===s||7===s,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,s,i,a;for(i=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)r=e.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return i*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Jt,Zt=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,s,i,a,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^s)+65536*(255^i)+256*(255^a)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*s+65536*i+256*a+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,s;for(s=[],n=0,r=e.length;n<r;n++)t=e[n],s.push(this.writeByte(t));return s},e}(),en=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,s,i,a,o,l,c,u,d,h,m,A;for(A in h=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(h)/o),i=Math.floor(u/o),c=16*h-u,(r=new Zt).writeInt(this.scalarType),r.writeShort(h),r.writeShort(u),r.writeShort(i),r.writeShort(c),s=16*h,l=r.pos+s,a=null,m=[],t)for(d=t[A],r.writeString(A),r.writeInt(e(d)),r.writeInt(l),r.writeInt(d.length),m=m.concat(d),"head"===A&&(a=l),l+=d.length;l%4;)m.push(0),l++;return r.write(m),n=2981146554-e(r.data),r.pos=a+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,s;for(e=An.call(e);e.length%4;)e.push(0);for(r=new Zt(e),n=0,t=0,s=e.length;t<s;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),tn={}.hasOwnProperty,nn=function(e,t){for(var n in t)tn.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Jt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Zt).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),sn=function(){function e(e,t){var n,r,s,i,a,o,l,c,u,d,h,m,A,g,p,f,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),d=h/2,e.pos+=6,s=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,A=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=d?t<d:t>d;o=0<=d?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,a=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=p=0,x=s.length;p<x;o=++p)for(g=s[o],n=f=m=A[o];m<=g?f<=g:f>=g;n=m<=g?++f:--f)0===c[o]?i=n+l[o]:0!==(i=a[c[o]/2+(n-m)-(d-o)]||0)&&(i+=l[o]),this.codeMap[n]=65535&i}e.pos=u}return e.encode=function(e,t){var n,r,s,i,a,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b,w,N,j,C,T,S,_,E,B,M,k,L,I,D,P,F,U,R,O,H,Q,z,V,K,G,q;switch(E=new Zt,i=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(A=0,g=function(){var e=[];for(m=0;m<256;++m)e.push(0);return e}(),f={0:0},s={},B=0,I=i.length;B<I;B++)null==f[V=e[r=i[B]]]&&(f[V]=++A),s[r]={old:e[r],new:f[e[r]]},g[r]=f[e[r]];return E.writeUInt16(1),E.writeUInt16(0),E.writeUInt32(12),E.writeUInt16(0),E.writeUInt16(262),E.writeUInt16(0),E.write(g),{charMap:s,subtable:E.data,maxGlyphID:A+1};case"unicode":for(S=[],u=[],x=0,f={},n={},p=l=null,M=0,D=i.length;M<D;M++)null==f[y=e[r=i[M]]]&&(f[y]=++x),n[r]={old:y,new:f[y]},a=f[y]-r,null!=p&&a===l||(p&&u.push(p),S.push(r),l=a),p=r;for(p&&u.push(p),u.push(65535),S.push(65535),C=2*(j=S.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),d=Math.log(N/2)/Math.LN2,w=2*j-N,o=[],b=[],h=[],m=k=0,P=S.length;k<P;m=++k){if(T=S[m],c=u[m],65535===T){o.push(0),b.push(0);break}if(T-(_=n[T].new)>=32768)for(o.push(0),b.push(2*(h.length+j-m)),r=L=T;T<=c?L<=c:L>=c;r=T<=c?++L:--L)h.push(n[r].new);else o.push(_-T),b.push(0)}for(E.writeUInt16(3),E.writeUInt16(1),E.writeUInt32(12),E.writeUInt16(4),E.writeUInt16(16+8*j+2*h.length),E.writeUInt16(0),E.writeUInt16(C),E.writeUInt16(N),E.writeUInt16(d),E.writeUInt16(w),Q=0,F=u.length;Q<F;Q++)r=u[Q],E.writeUInt16(r);for(E.writeUInt16(0),z=0,U=S.length;z<U;z++)r=S[z],E.writeUInt16(r);for(K=0,R=o.length;K<R;K++)a=o[K],E.writeUInt16(a);for(G=0,O=b.length;G<O;G++)v=b[G],E.writeUInt16(v);for(q=0,H=h.length;q<H;q++)A=h[q],E.writeUInt16(A);return{charMap:n,subtable:E.data,maxGlyphID:x+1}}},e}(),an=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new sn(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=sn.encode(e,t),(r=new Zt).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),on=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ln=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),cn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],s=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;s=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),un=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},dn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,s,i,a,o,l,c,u,d;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(o={},s=c=0,u=n.length;c<u;s=++c)r=n[s],e.pos=r.offset,l=e.readString(r.length),i=new un(l,r),null==o[d=r.nameID]&&(o[d]=[]),o[r.nameID].push(i);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),hn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),mn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,s,i,a,o;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,s;for(s=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)s.push(e.readInt16());return s}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)s=n[e],r.push(s.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=i=0;0<=r?i<r:i>r;t=0<=r?++i:--i)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),An=[].slice,gn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,s,i,a,o,l,c,u;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,n=s.indexOf(e),0===(r=s.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,i=(a=new Zt(t.read(r))).readShort(),l=a.readShort(),u=a.readShort(),o=a.readShort(),c=a.readShort(),this.cache[e]=-1===i?new fn(a,l,u,o,c):new pn(a,i,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,s,i,a,o;for(i=[],s=[],a=0,o=t.length;a<o;a++)r=e[t[a]],s.push(i.length),r&&(i=i.concat(r.encode(n)));return s.push(i.length),{table:i,offsets:s}},e}(),pn=function(){function e(e,t,n,r,s,i){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),fn=function(){function e(e,t,n,r,s){var i,a;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;a=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&a;)i.pos+=1&a?4:2,128&a?i.pos+=8:64&a?i.pos+=4:8&a&&(i.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Zt(An.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),xn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Jt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,s=0,i=0;i<n.length;++i)if(n[i]=r,s<t.length&&t[s]==i){++s,n[i]=r;var a=this.offsets[i],o=this.offsets[i+1]-a;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),vn=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,s,i,a,o;for(r={},i=0,a=e.length;i<a;i++)r[s=e[i]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(null!=(n=r[s])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in o=this.glyphsFor(t))n=o[s],r[s]=n;return r},e.prototype.encode=function(e,t){var n,r,s,i,a,o,l,c,u,d,h,m,A,g,p;for(r in n=an.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),h={0:0},p=n.charMap)h[(o=p[r]).old]=o.new;for(m in d=n.maxGlyphID,i)m in h||(h[m]=d++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),u=Object.keys(c).sort((function(e,t){return e-t})),A=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)a=u[e],n.push(c[a]);return n}(),s=this.font.glyf.encode(i,A,h),l=this.font.loca.encode(s.offsets,A),g={cmap:this.font.cmap.raw(),glyf:s.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e}();Le.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,s,i,a;if(Array.isArray(n))return"["+function(){var e,s,i;for(i=[],e=0,s=n.length;e<s;e++)r=n[e],i.push(t.convert(r));return i}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(s in i=["<<"],n)a=n[s],i.push("/"+s+" "+t.convert(a));return i.push(">>"),i.join("\n")}return""+n},t}()},39:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,A=!1,g=!1,p=!1,f=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(p=!1,b(e),!g)if(null!==r(c))g=!0,j||(j=!0,N());else{var t=r(u);null!==t&&k(w,t.startTime-e)}}var N,j=!1,C=-1,T=5,S=-1;function _(){return!!f||!(t.unstable_now()-S<T)}function E(){if(f=!1,j){var e=t.unstable_now();S=e;var n=!0;try{e:{g=!1,p&&(p=!1,v(C),C=-1),A=!0;var i=m;try{t:{for(b(e),h=r(c);null!==h&&!(h.expirationTime>e&&_());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,b(e),n=!0;break t}h===r(c)&&s(c),b(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&k(w,l.startTime-e),n=!1}}break e}finally{h=null,m=i,A=!1}n=void 0}}finally{n?N():j=!1}}}if("function"===typeof y)N=function(){y(E)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,M=B.port2;B.port1.onmessage=E,N=function(){M.postMessage(null)}}else N=function(){x(E,0)};function k(e,n){C=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_requestPaint=function(){f=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(p?(v(C),C=-1):p=!0,k(w,i-a))):(e.sortIndex=o,n(c,e),g||A||(g=!0,j||(j=!0,N()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},44:(e,t,n)=>{"use strict";e.exports=n(940)},45:(e,t,n)=>{"use strict";n.d(t,{sk:()=>Je,HF:()=>Ze,R4:()=>ft,eJ:()=>vt,getAuth:()=>Xn,hg:()=>Ct,gA:()=>bt,J1:()=>pt,signInWithEmailAndPassword:()=>yt,df:()=>dn,CI:()=>Tt,f3:()=>Nt,r7:()=>wt,RE:()=>xt});var r=n(493),s=n(170),i=n(624);function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(253);function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=l,u=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new i.Vy("@firebase/auth");function h(e){if(d.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.error(`Auth (${r.MF}): ${e}`,...n)}}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw x(e,...n)}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return x(e,...n)}function g(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function p(e){return g(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function f(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),g(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return u.create(e,...n)}function v(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw x(t,...r)}}function y(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function b(e,t){e||y(t)}function w(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function N(){return"http:"===j()||"https:"===j()}function j(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(N()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function T(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},E=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B=new C(3e4,6e4);function M(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function k(e,t,n,r){return L(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const o=(0,s.Am)(Object.assign({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:l},i);return(0,s.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),S.fetch()(await D(e,e.config.apiHost,n,o),c)}))}async function L(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_),t);try{const t=new F(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw U(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw U(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw U(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw U(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw g(e,o,a);m(e,o)}}catch(i){if(i instanceof s.g)throw i;m(e,"network-request-failed",{message:String(i)})}}async function I(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await k(e,t,n,r,s);return"mfaPendingCredential"in i&&m(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function D(e,t,n,r){const s=`${t}${n}?${r}`,i=e,a=i.config.emulator?T(e.config,s):`${e.config.apiScheme}://${s}`;if(E.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function P(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(A(this.auth,"network-request-failed"))),B.get())}))}}function U(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=A(e,t,r);return s.customData._tokenResponse=n,s}function R(e){return void 0!==e&&void 0!==e.enterprise}class O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return P(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H(e,t){return k(e,"GET","/v2/recaptchaConfig",M(e,t))}async function Q(e,t){return k(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function V(e){return 1e3*Number(e)}function K(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(i){return h("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function G(e){const t=K(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function q(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class ${constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function X(e){var t;const n=e.auth,r=await e.getIdToken(),s=await q(e,Q(n,{idToken:r}));v(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Y(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,m)}function Y(e){return e.map((e=>{var{providerId:t}=e,n=a(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):G(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");const t=G(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await L(e,{},(async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await D(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),S.fetch()(a,l)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new J;return n&&(v("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(v("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(v("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return y("not implemented")}}function Z(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ee{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=a(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await q(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=K(r);v(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,o=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:z(V(i.auth_time)),issuedAtTime:z(V(i.iat)),expirationTime:z(V(i.exp)),signInProvider:o||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await X(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ee(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await X(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(p(this.auth));const e=await this.getIdToken();return await q(this,async function(e,t){return k(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,A=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,p=null!==(l=t.createdAt)&&void 0!==l?l:void 0,f=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:x,emailVerified:y,isAnonymous:b,providerData:w,stsTokenManager:N}=t;v(x&&N,e,"internal-error");const j=J.fromJSON(this.name,N);v("string"===typeof x,e,"internal-error"),Z(u,e.name),Z(d,e.name),v("boolean"===typeof y,e,"internal-error"),v("boolean"===typeof b,e,"internal-error"),Z(h,e.name),Z(m,e.name),Z(A,e.name),Z(g,e.name),Z(p,e.name),Z(f,e.name);const C=new ee({uid:x,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:b,photoURL:m,phoneNumber:h,tenantId:A,stsTokenManager:j,createdAt:p,lastLoginAt:f});return w&&Array.isArray(w)&&(C.providerData=w.map((e=>Object.assign({},e)))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new J;r.updateFromServerResponse(t);const s=new ee({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await X(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];v(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Y(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new J;a.updateFromIdToken(n);const o=new ee({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new $(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const te=new Map;function ne(e){b(e instanceof Function,"Expected a class definition");let t=te.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,te.set(e,t),t)}class re{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}re.type="NONE";const se=re;function ie(e,t,n){return`firebase:${e}:${t}:${n}`}class ae{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=ie(this.userKey,r.apiKey,s),this.fullPersistenceKey=ie("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Q(this.auth,{idToken:e}).catch((()=>{}));return t?ee._fromGetAccountInfoResponse(this.auth,t,e):null}return ee._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ae(ne(se),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=r[0]||ne(se);const i=ie(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await Q(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await ee._fromGetAccountInfoResponse(e,r,t)}else n=ee._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(i)}catch(l){}}))),new ae(s,e,n)):new ae(s,e,n)}}function oe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(de(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(le(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(me(t))return"Blackberry";if(Ae(t))return"Webos";if(ce(t))return"Safari";if((t.includes("chrome/")||ue(t))&&!t.includes("edge/"))return"Chrome";if(he(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function ce(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return ge(e)||he(e)||Ae(e)||me(e)||/windows phone/i.test(e)||de(e)}function fe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oe((0,s.ZQ)());break;case"Worker":t=`${oe((0,s.ZQ)())}-${e}`;break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${i}`}class xe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(s){r(s)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class ve{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ye{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new xe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ne(t)),this._initializationPromise=this.queue((async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await ae.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Q(this,{idToken:e}),n=await ee._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===s||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null===a||void 0===a?void 0:a.user)||(s=a.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(a)))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await X(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(p(this));const t=e?(0,s.Ku)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(p(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(p(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ne(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return k(e,"GET","/v2/passwordPolicy",M(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ve(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return k(e,"POST","/v2/accounts:revokeToken",M(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ne(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await ae.create(this,[ne(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(a,this,"internal-error"),a.then((()=>{i||s(this.currentUser)})),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(d.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];d.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function be(e){return(0,s.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)((e=>this.observer=e))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ne={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function je(e){return Ne.loadJS(e)}function Ce(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Te{constructor(){this.enterprise=new Se}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Se{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _e="NO_RECAPTCHA";class Ee{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;R(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(_e)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Te).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{H(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new O(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&R(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ne.recaptchaEnterpriseScript;0!==t.length&&(t+=s),je(t).then((()=>{n(s,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Be(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Ee(e);let a;if(s)a=_e;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Me(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Be(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Be(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)}))}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Be(e,t,n);return r(e,s).catch((async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await Be(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)}))}{const s=await Be(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function ke(e){const t=be(e),n=await H(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new O(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ee(t).verify()}}function Le(e,t,n){const r=be(e);v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ie(t),{host:o,port:l}=function(e){const t=Ie(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:De(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:De(t)}}}(t),c=null===l?"":`:${l}`,u={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return v(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void v((0,s.bD)(u,r.config.emulator)&&(0,s.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,s.zJ)(o)?((0,s.gE)(`${a}//${o}${c}`),(0,s.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ie(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function De(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pe{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return y("not implemented")}_getIdTokenResponse(e){return y("not implemented")}_linkToIdToken(e,t){return y("not implemented")}_getReauthenticationResolver(e){return y("not implemented")}}async function Fe(e,t){return k(e,"POST","/v1/accounts:resetPassword",M(e,t))}async function Ue(e,t){return k(e,"POST","/v1/accounts:signUp",t)}async function Re(e,t){return I(e,"POST","/v1/accounts:signInWithPassword",M(e,t))}async function Oe(e,t){return k(e,"POST","/v1/accounts:sendOobCode",M(e,t))}async function He(e,t){return Oe(e,t)}class Qe extends Pe{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qe(e,t,"password")}static _fromEmailAndCode(e,t){return new Qe(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Me(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Re,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return I(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{email:this._email,oobCode:this._password});default:m(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Me(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ue,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return I(e,"POST","/v1/accounts:signInWithEmailLink",M(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:m(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ze(e,t){return I(e,"POST","/v1/accounts:signInWithIdp",M(e,t))}class Ve extends Pe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ve(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=a(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Ve(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ze(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ze(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ze(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}async function Ke(e,t){return k(e,"POST","/v1/accounts:sendVerificationCode",M(e,t))}const Ge={USER_NOT_FOUND:"user-not-found"};class qe extends Pe{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return I(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await I(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return I(e,"POST","/v1/accounts:signInWithPhoneNumber",M(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ge)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new qe({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class We{constructor(e){var t,n,r,i,a,o;const l=(0,s.I9)((0,s.hp)(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(n=l.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=l.lang)&&void 0!==a?a:null,this.tenantId=null!==(o=l.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new We(t)}catch(n){return null}}}class $e{constructor(){this.providerId=$e.PROVIDER_ID}static credential(e,t){return Qe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=We.parseLink(t);return v(n,"argument-error"),Qe._fromEmailAndCode(e,n.code,n.tenantId)}}$e.PROVIDER_ID="password",$e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ye extends Xe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Je extends Ye{constructor(){super("facebook.com")}static credential(e){return Ve._fromParams({providerId:Je.PROVIDER_ID,signInMethod:Je.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Je.credentialFromTaggedObject(e)}static credentialFromError(e){return Je.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Je.credential(t.oauthAccessToken)}catch(n){return null}}}Je.FACEBOOK_SIGN_IN_METHOD="facebook.com",Je.PROVIDER_ID="facebook.com";class Ze extends Ye{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ve._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ze.credentialFromTaggedObject(e)}static credentialFromError(e){return Ze.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ze.credential(n,r)}catch(s){return null}}}Ze.GOOGLE_SIGN_IN_METHOD="google.com",Ze.PROVIDER_ID="google.com";class et extends Ye{constructor(){super("github.com")}static credential(e){return Ve._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return et.credential(t.oauthAccessToken)}catch(n){return null}}}et.GITHUB_SIGN_IN_METHOD="github.com",et.PROVIDER_ID="github.com";class tt extends Ye{constructor(){super("twitter.com")}static credential(e,t){return Ve._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return tt.credential(n,r)}catch(s){return null}}}async function nt(e,t){return I(e,"POST","/v1/accounts:signUp",M(e,t))}tt.TWITTER_SIGN_IN_METHOD="twitter.com",tt.PROVIDER_ID="twitter.com";class rt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await ee._fromIdTokenResponse(e,n,r),i=st(n);return new rt({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=st(n);return new rt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function st(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class it extends s.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,it.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new it(e,t,n,r)}}function at(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw it._fromErrorAndOperation(e,n,t,r);throw n}))}async function ot(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await q(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rt._forOperation(e,"link",r)}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(p(s));const i="reauthenticate";try{const r=await q(e,at(s,i,t,e),n);v(r.idToken,s,"internal-error");const a=K(r.idToken);v(a,s,"internal-error");const{sub:o}=a;return v(e.uid===o,s,"user-mismatch"),rt._forOperation(e,i,r)}catch(a){throw"auth/user-not-found"===(null===a||void 0===a?void 0:a.code)&&m(s,"user-mismatch"),a}}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(p(e));const s="signIn",i=await at(e,s,t),a=await rt._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(a.user),a}async function ut(e,t){return ct(be(e),t)}class dt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ht._fromServerResponse(e,t):"totpInfo"in t?mt._fromServerResponse(e,t):m(e,"internal-error")}}class ht extends dt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ht(t)}}class mt extends dt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new mt(t)}}function At(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),v("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function gt(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function pt(e,t,n){const r=be(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&At(r,s,n),await Me(r,s,"getOobCode",He,"EMAIL_PASSWORD_PROVIDER")}async function ft(e,t,n){await Fe((0,s.Ku)(e),{oobCode:t,newPassword:n}).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&gt(e),t}))}async function xt(e,t){const{data:n}=await async function(e,t){const n=(0,s.Ku)(e),r=await Fe(n,{oobCode:t}),i=r.requestType;switch(v(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(r.mfaInfo,n,"internal-error");default:v(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=dt._fromServerResponse(be(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}((0,s.Ku)(e),t);return n.email}async function vt(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(p(e));const s=be(e),i=Me(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nt,"EMAIL_PASSWORD_PROVIDER"),a=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&gt(e),t})),o=await rt._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function yt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(p(e)):ut((0,s.Ku)(e),$e.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&gt(e),t}))}async function bt(e,t){const n=(0,s.Ku)(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&At(n.auth,r,t);const{email:i}=await async function(e,t){return Oe(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function wt(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=(0,s.Ku)(e),a={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await q(i,async function(e,t){return k(e,"POST","/v1/accounts:update",t)}(i.auth,a));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function Nt(e,t){return jt((0,s.Ku)(e),null,t)}async function jt(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await q(e,async function(e,t){return k(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}function Ct(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function Tt(e){return(0,s.Ku)(e).signOut()}function St(e,t){return k(e,"POST","/v2/accounts/mfaEnrollment:start",M(e,t))}new WeakMap;const _t="__sak";class Et{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_t,"1"),this.storage.removeItem(_t),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bt extends Et{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bt.type="LOCAL";const Mt=Bt;function kt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Lt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class It{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Lt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return kt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Lt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Lt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=kt(n);const s=setInterval((()=>{const e=kt(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(s)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}It.type="COOKIE";class Dt extends Et{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dt.type="SESSION";const Pt=Dt;class Ft{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ft(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ft.receivers=[];class Rt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise(((a,o)=>{const l=Ut("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}function Ot(){return window}function Ht(){return"undefined"!==typeof Ot().WorkerGlobalScope&&"function"===typeof Ot().importScripts}const Qt="firebaseLocalStorageDb",zt="firebaseLocalStorage",Vt="fbase_key";class Kt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Gt(e,t){return e.transaction([zt],t?"readwrite":"readonly").objectStore(zt)}function qt(){const e=indexedDB.open(Qt,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(zt,{keyPath:Vt})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(zt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Qt);return new Kt(e).toPromise()}(),t(await qt()))}))}))}async function Wt(e,t,n){const r=Gt(e,!0).put({[Vt]:t,value:n});return new Kt(r).toPromise()}function $t(e,t){const n=Gt(e,!0).delete(t);return new Kt(n).toPromise()}class Xt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await qt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ht()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ft._getInstance(Ht()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qt();return await Wt(e,_t,"1"),await $t(e,_t),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Gt(e,!1).get(t),r=await new Kt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>$t(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Gt(e,!1).getAll();return new Kt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xt.type="LOCAL";const Yt=Xt;function Jt(e,t){return k(e,"POST","/v2/accounts/mfaSignIn:start",M(e,t))}Ce("rcb"),new C(3e4,6e4);const Zt="recaptcha";async function en(e,t,n){var r;if(!e._getRecaptchaConfig())try{await ke(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){v("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Me(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===_e){v((null===n||void 0===n?void 0:n.type)===Zt,e,"argument-error");return St(e,await tn(e,t,n))}return St(e,t)}),"PHONE_PROVIDER");return(await i.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;v(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Me(e,a,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===_e){v((null===n||void 0===n?void 0:n.type)===Zt,e,"argument-error");return Jt(e,await tn(e,t,n))}return Jt(e,t)}),"PHONE_PROVIDER");return(await o.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Me(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===_e){v((null===n||void 0===n?void 0:n.type)===Zt,e,"argument-error");return Ke(e,await tn(e,t,n))}return Ke(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function tn(e,t,n){v(n.type===Zt,e,"argument-error");const r=await n.verify();v("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class nn{constructor(e){this.providerId=nn.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return en(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return nn.credentialFromTaggedObject(t)}static credentialFromError(e){return nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?qe._fromTokenResponse(n,r):null}}function rn(e,t){return t?ne(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}nn.PROVIDER_ID="phone",nn.PHONE_SIGN_IN_METHOD="phone";class sn extends Pe{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ze(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ze(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ze(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function an(e){return ct(e.auth,new sn(e),e.bypassAuthState)}function on(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),lt(n,new sn(e),e.bypassAuthState)}async function ln(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),ot(n,new sn(e),e.bypassAuthState)}class cn{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return an;case"linkViaPopup":case"linkViaRedirect":return ln;case"reauthViaPopup":case"reauthViaRedirect":return on;default:m(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const un=new C(2e3,1e4);async function dn(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(A(e,"operation-not-supported-in-this-environment"));const s=be(e);f(e,t,Xe);const i=rn(s,n);return new hn(s,"signInViaPopup",t,i).executeNotNull()}class hn extends cn{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,hn.currentPopupAction&&hn.currentPopupAction.cancel(),hn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=Ut();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(A(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(A(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(A(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,un.get())};e()}}hn.currentPopupAction=null;const mn=new Map;class An extends cn{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=mn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=fn(t),r=pn(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}mn.set(this.auth._key(),e)}return this.bypassAuthState||mn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function gn(e,t){mn.set(e._key(),t)}function pn(e){return ne(e._redirectPersistence)}function fn(e){return ie("pendingRedirect",e.config.apiKey,e.name)}async function xn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(p(e));const s=be(e),i=rn(s,t),a=new An(s,i,n),o=await a.execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}class vn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!bn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(A(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yn(e))}saveEventToCache(e){this.cachedEventUids.add(yn(e)),this.lastProcessedEventTime=Date.now()}}function yn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function bn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const wn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nn=/^https?/;async function jn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return k(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Cn(r))return}catch(n){}m(e,"unauthorized-domain")}function Cn(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Nn.test(n))return!1;if(wn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Tn=new C(3e4,6e4);function Sn(){const e=Ot().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function _n(e){return new Promise(((t,n)=>{var r,s,i;function a(){Sn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sn(),n(A(e,"network-request-failed"))},timeout:Tn.get()})}if(null===(s=null===(r=Ot().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Ot().gapi)||void 0===i?void 0:i.load)){const t=Ce("iframefcb");return Ot()[t]=()=>{gapi.load?a():n(A(e,"network-request-failed"))},je(`${Ne.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw En=null,e}))}let En=null;const Bn=new C(5e3,15e3),Mn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ln(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?T(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:r.MF},a=kn.get(e.config.apiHost);a&&(i.eid=a);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${(0,s.Am)(i).slice(1)}`}async function In(e){const t=await function(e){return En=En||_n(e),En}(e),n=Ot().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:Ln(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mn,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=A(e,"network-request-failed"),i=Ot().setTimeout((()=>{r(s)}),Bn.get());function a(){Ot().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(s)}))}))))}const Dn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Fn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},Dn),{width:r.toString(),height:i.toString(),top:a,left:o}),u=(0,s.ZQ)().toLowerCase();n&&(l=ue(u)?"_blank":n),le(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return ge(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Pn(null);const h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(m){}return new Pn(h)}const Un="__/auth/handler",Rn="emulator/auth/handler",On=encodeURIComponent("fac");async function Hn(e,t,n,i,a,o){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:a};if(t instanceof Xe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))l[e]=t}if(t instanceof Ye){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${On}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Un}`;return T(t,Rn)}(e)}?${(0,s.Am)(c).slice(1)}${d}`}const Qn="webStorageSupport";const zn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pt,this._completeRedirectFn=xn,this._overrideRedirectResult=gn}async _openPopup(e,t,n,r){var s;b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Fn(e,await Hn(e,t,n,w(),r),Ut())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ot().location.href=e}(await Hn(e,t,n,w(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await In(e),n=new vn(e);return t.register("authEvent",(t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qn,{type:Qn},(n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Qn];void 0!==s&&t(!!s),m(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pe()||ce()||ge()}};var Vn="@firebase/auth",Kn="1.10.7";class Gn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const qn=(0,s.XA)("authIdTokenMaxAge")||300;let Wn=null;const $n=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>qn)return;const s=null===n||void 0===n?void 0:n.token;Wn!==s&&(Wn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,null!==t&&void 0!==t?t:{}))return e;m(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zn,persistence:[Yt,Mt,Pt]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=$n(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const a=(0,s.Tj)("auth");return a&&Le(n,`http://${a}`),n}var Yn;Ne={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=A("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Yn="Browser",(0,r.om)(new o.uA("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;v(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Yn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fe(Yn)},c=new ye(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ne);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,r.om)(new o.uA("auth-internal",(e=>(e=>new Gn(e))(be(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Vn,Kn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yn)),(0,r.KO)(Vn,Kn,"esm2017")},52:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function r(e,t,n,r){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(r.next(e))}catch(Ft){i(Ft)}}function o(e){try{l(r.throw(e))}catch(Ft){i(Ft)}}function l(e){e.done?n(e.value):s(e.value).then(a,o)}l((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(Ft){i=[6,Ft],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function i(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||t)}for(var a=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return a.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new a(0,0,r,s)},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}else t.push(s)}return t},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=e[s];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<d.length;m++)h[d.charCodeAt(m)]=m;for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="undefined"===typeof Uint8Array?[]:new Uint8Array(256),p=0;p<A.length;p++)g[A.charCodeAt(p)]=p;for(var f=function(e){var t,n,r,s,i,a=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=g[e.charCodeAt(t)],r=g[e.charCodeAt(t+1)],s=g[e.charCodeAt(t+2)],i=g[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|s>>2,u[l++]=(3&s)<<6|63&i;return c},x=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},v=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},y=5,b=11,w=2,N=65536>>y,j=(1<<y)-1,C=N+(1024>>y)+32,T=65536>>b,S=(1<<b-y)-1,_=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},E=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},B=function(e,t){var n=f(e),r=Array.isArray(n)?v(n):new Uint32Array(n),s=Array.isArray(n)?x(n):new Uint16Array(n),i=24,a=_(s,i/2,r[4]/2),o=2===r[5]?_(s,(i+r[4])/2):E(r,Math.ceil((i+r[4])/4));return new M(r[0],r[1],r[2],r[3],a,o)},M=function(){function e(e,t,n,r,s,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>y])<<w)+(e&j),this.data[t];if(e<=65535)return t=((t=this.index[N+(e-55296>>y)])<<w)+(e&j),this.data[t];if(e<this.highStart)return t=C-T+(e>>b),t=this.index[t],t+=e>>y&S,t=((t=this.index[t])<<w)+(e&j),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L="undefined"===typeof Uint8Array?[]:new Uint8Array(256),I=0;I<k.length;I++)L[k.charCodeAt(I)]=I;var D=50,P=1,F=2,U=3,R=4,O=5,H=7,Q=8,z=9,V=10,K=11,G=12,q=13,W=14,$=15,X=16,Y=17,J=18,Z=19,ee=20,te=21,ne=22,re=23,se=24,ie=25,ae=26,oe=27,le=28,ce=29,ue=30,de=31,he=32,me=33,Ae=34,ge=35,pe=36,fe=37,xe=38,ve=39,ye=40,be=41,we=42,Ne=43,je=[9001,65288],Ce="!",Te="\xd7",Se="\xf7",_e=B("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Ee=[ue,pe],Be=[P,F,U,O],Me=[V,Q],ke=[oe,ae],Le=Be.concat(Me),Ie=[xe,ve,ye,Ae,ge],De=[$,q],Pe=function(e,t){void 0===t&&(t="strict");var n=[],r=[],s=[];return e.forEach((function(e,i){var a=_e.get(e);if(a>D?(s.push(!0),a-=D):s.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(i),n.push(X);if(a===R||a===K){if(0===i)return r.push(i),n.push(ue);var o=n[i-1];return-1===Le.indexOf(o)?(r.push(r[i-1]),n.push(o)):(r.push(i),n.push(ue))}return r.push(i),a===de?n.push("strict"===t?te:fe):a===we||a===ce?n.push(ue):a===Ne?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(fe):n.push(ue):void n.push(a)})),[r,n,s]},Fe=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var i=n;i<=r.length;){if((l=r[++i])===t)return!0;if(l!==V)break}if(s===V)for(i=n;i>0;){var a=r[--i];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==V)break}if(a!==V)break}return!1},Ue=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==V)return r;n--}return 0},Re=function(e,t,n,r,s){if(0===n[r])return Te;var i=r-1;if(Array.isArray(s)&&!0===s[i])return Te;var a=i-1,o=i+1,l=t[i],c=a>=0?t[a]:0,u=t[o];if(l===F&&u===U)return Te;if(-1!==Be.indexOf(l))return Ce;if(-1!==Be.indexOf(u))return Te;if(-1!==Me.indexOf(u))return Te;if(Ue(i,t)===Q)return Se;if(_e.get(e[i])===K)return Te;if((l===he||l===me)&&_e.get(e[o])===K)return Te;if(l===H||u===H)return Te;if(l===z)return Te;if(-1===[V,q,$].indexOf(l)&&u===z)return Te;if(-1!==[Y,J,Z,se,le].indexOf(u))return Te;if(Ue(i,t)===ne)return Te;if(Fe(re,ne,i,t))return Te;if(Fe([Y,J],te,i,t))return Te;if(Fe(G,G,i,t))return Te;if(l===V)return Se;if(l===re||u===re)return Te;if(u===X||l===X)return Se;if(-1!==[q,$,te].indexOf(u)||l===W)return Te;if(c===pe&&-1!==De.indexOf(l))return Te;if(l===le&&u===pe)return Te;if(u===ee)return Te;if(-1!==Ee.indexOf(u)&&l===ie||-1!==Ee.indexOf(l)&&u===ie)return Te;if(l===oe&&-1!==[fe,he,me].indexOf(u)||-1!==[fe,he,me].indexOf(l)&&u===ae)return Te;if(-1!==Ee.indexOf(l)&&-1!==ke.indexOf(u)||-1!==ke.indexOf(l)&&-1!==Ee.indexOf(u))return Te;if(-1!==[oe,ae].indexOf(l)&&(u===ie||-1!==[ne,$].indexOf(u)&&t[o+1]===ie)||-1!==[ne,$].indexOf(l)&&u===ie||l===ie&&-1!==[ie,le,se].indexOf(u))return Te;if(-1!==[ie,le,se,Y,J].indexOf(u))for(var d=i;d>=0;){if((h=t[d])===ie)return Te;if(-1===[le,se].indexOf(h))break;d--}if(-1!==[oe,ae].indexOf(u))for(d=-1!==[Y,J].indexOf(l)?a:i;d>=0;){var h;if((h=t[d])===ie)return Te;if(-1===[le,se].indexOf(h))break;d--}if(xe===l&&-1!==[xe,ve,Ae,ge].indexOf(u)||-1!==[ve,Ae].indexOf(l)&&-1!==[ve,ye].indexOf(u)||-1!==[ye,ge].indexOf(l)&&u===ye)return Te;if(-1!==Ie.indexOf(l)&&-1!==[ee,ae].indexOf(u)||-1!==Ie.indexOf(u)&&l===oe)return Te;if(-1!==Ee.indexOf(l)&&-1!==Ee.indexOf(u))return Te;if(l===se&&-1!==Ee.indexOf(u))return Te;if(-1!==Ee.concat(ie).indexOf(l)&&u===ne&&-1===je.indexOf(e[o])||-1!==Ee.concat(ie).indexOf(u)&&l===J)return Te;if(l===be&&u===be){for(var m=n[i],A=1;m>0&&t[--m]===be;)A++;if(A%2!==0)return Te}return l===he&&u===me?Te:Se},Oe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Pe(e,t.lineBreak),r=n[0],s=n[1],i=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(s=s.map((function(e){return-1!==[ie,ue,we].indexOf(e)?fe:e})));var a="keep-all"===t.wordBreak?i.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0;return[r,s,a]},He=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Ce,this.start=n,this.end=r}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),Qe=function(e,t){var n=c(e),r=Oe(n,t),s=r[0],i=r[1],a=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var e=Te;u<o&&(e=Re(n,i,s,++u,a))===Te;);if(e!==Te||u===o){var t=new He(n,e,l,u);return l=u,{value:t,done:!1}}return{done:!0,value:null}}}},ze=1,Ve=2,Ke=4,Ge=8,qe=10,We=47,$e=92,Xe=9,Ye=32,Je=34,Ze=61,et=35,tt=36,nt=37,rt=39,st=40,it=41,at=95,ot=45,lt=33,ct=60,ut=62,dt=64,ht=91,mt=93,At=61,gt=123,pt=63,ft=125,xt=124,vt=126,yt=128,bt=65533,wt=42,Nt=43,jt=44,Ct=58,Tt=59,St=46,_t=0,Et=8,Bt=11,Mt=14,kt=31,Lt=127,It=-1,Dt=48,Pt=97,Ft=101,Ut=102,Rt=117,Ot=122,Ht=65,Qt=69,zt=70,Vt=85,Kt=90,Gt=function(e){return e>=Dt&&e<=57},qt=function(e){return e>=55296&&e<=57343},Wt=function(e){return Gt(e)||e>=Ht&&e<=zt||e>=Pt&&e<=Ut},$t=function(e){return e>=Pt&&e<=Ot},Xt=function(e){return e>=Ht&&e<=Kt},Yt=function(e){return $t(e)||Xt(e)},Jt=function(e){return e>=yt},Zt=function(e){return e===qe||e===Xe||e===Ye},en=function(e){return Yt(e)||Jt(e)||e===at},tn=function(e){return en(e)||Gt(e)||e===ot},nn=function(e){return e>=_t&&e<=Et||e===Bt||e>=Mt&&e<=kt||e===Lt},rn=function(e,t){return e===$e&&t!==qe},sn=function(e,t,n){return e===ot?en(t)||rn(t,n):!!en(e)||!(e!==$e||!rn(e,t))},an=function(e,t,n){return e===Nt||e===ot?!!Gt(t)||t===St&&Gt(n):Gt(e===St?t:e)},on=function(e){var t=0,n=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(n=-1),t++);for(var r=[];Gt(e[t]);)r.push(e[t++]);var s=r.length?parseInt(u.apply(void 0,r),10):0;e[t]===St&&t++;for(var i=[];Gt(e[t]);)i.push(e[t++]);var a=i.length,o=a?parseInt(u.apply(void 0,i),10):0;e[t]!==Qt&&e[t]!==Ft||t++;var l=1;e[t]!==Nt&&e[t]!==ot||(e[t]===ot&&(l=-1),t++);for(var c=[];Gt(e[t]);)c.push(e[t++]);var d=c.length?parseInt(u.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-a))*Math.pow(10,l*d)},ln={type:2},cn={type:3},un={type:4},dn={type:13},hn={type:8},mn={type:21},An={type:9},gn={type:10},pn={type:11},fn={type:12},xn={type:14},vn={type:23},yn={type:1},bn={type:25},wn={type:24},Nn={type:26},jn={type:27},Cn={type:28},Tn={type:29},Sn={type:31},_n={type:32},En=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==_n;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Je:return this.consumeStringToken(Je);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var s=sn(t,n,r)?Ve:ze;return{type:5,value:this.consumeName(),flags:s}}break;case tt:if(this.peekCodePoint(0)===Ze)return this.consumeCodePoint(),dn;break;case rt:return this.consumeStringToken(rt);case st:return ln;case it:return cn;case wt:if(this.peekCodePoint(0)===Ze)return this.consumeCodePoint(),xn;break;case Nt:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jt:return un;case ot:var i=e,a=this.peekCodePoint(0),o=this.peekCodePoint(1);if(an(i,a,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(sn(i,a,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===ot&&o===ut)return this.consumeCodePoint(),this.consumeCodePoint(),wn;break;case St:if(an(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case We:if(this.peekCodePoint(0)===wt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===wt&&(l=this.consumeCodePoint())===We)return this.consumeToken();if(l===It)return this.consumeToken()}break;case Ct:return Nn;case Tt:return jn;case ct:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===ot&&this.peekCodePoint(2)===ot)return this.consumeCodePoint(),this.consumeCodePoint(),bn;break;case dt:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),h=this.peekCodePoint(2);if(sn(c,d,h))return{type:7,value:this.consumeName()};break;case ht:return Cn;case $e:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case mt:return Tn;case At:if(this.peekCodePoint(0)===Ze)return this.consumeCodePoint(),hn;break;case gt:return pn;case ft:return fn;case Rt:case Vt:var m=this.peekCodePoint(0),A=this.peekCodePoint(1);return m!==Nt||!Wt(A)&&A!==pt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case xt:if(this.peekCodePoint(0)===Ze)return this.consumeCodePoint(),An;if(this.peekCodePoint(0)===xt)return this.consumeCodePoint(),mn;break;case vt:if(this.peekCodePoint(0)===Ze)return this.consumeCodePoint(),gn;break;case It:return _n}return Zt(e)?(this.consumeWhiteSpace(),Sn):Gt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Wt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===pt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(u.apply(void 0,e.map((function(e){return e===pt?Dt:e}))),16),end:parseInt(u.apply(void 0,e.map((function(e){return e===pt?zt:e}))),16)};var r=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===ot&&Wt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var s=[];Wt(t)&&s.length<6;)s.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(u.apply(void 0,s),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===st?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===st?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===It)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Je){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===it)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),vn)}for(;;){var r=this.consumeCodePoint();if(r===It||r===it)return{type:22,value:u.apply(void 0,e)};if(Zt(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===it?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),vn);if(r===Je||r===rt||r===st||nn(r))return this.consumeBadUrlRemnants(),vn;if(r===$e){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),vn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;Zt(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===it||e===It)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=u.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===It||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===qe)return this._value.splice(0,n),yn;if(r===$e){var s=this._value[n+1];s!==It&&void 0!==s&&(s===qe?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,s)&&(t+=this.consumeStringSlice(n),t+=u(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ke,n=this.peekCodePoint(0);for(n!==Nt&&n!==ot||e.push(this.consumeCodePoint());Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===St&&Gt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===Qt||n===Ft)&&((r===Nt||r===ot)&&Gt(s)||Gt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[on(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);return sn(r,s,i)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Wt(e)){for(var t=u(e);Wt(this.peekCodePoint(0))&&t.length<6;)t+=u(this.consumeCodePoint());Zt(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||qt(n)||n>1114111?bt:n}return e===It?bt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=u(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=u(this.consumeEscapedCodePoint())}}},e}(),Bn=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new En;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Rn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?_n:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),Mn=function(e){return 15===e.type},kn=function(e){return 17===e.type},Ln=function(e){return 20===e.type},In=function(e){return 0===e.type},Dn=function(e,t){return Ln(e)&&e.value===t},Pn=function(e){return 31!==e.type},Fn=function(e){return 31!==e.type&&4!==e.type},Un=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},Rn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},On=function(e){return 17===e.type||15===e.type},Hn=function(e){return 16===e.type||On(e)},Qn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},zn={type:17,number:0,flags:Ke},Vn={type:16,number:50,flags:Ke},Kn={type:16,number:100,flags:Ke},Gn=function(e,t,n){var r=e[0],s=e[1];return[qn(r,t),qn("undefined"!==typeof s?s:r,n)]},qn=function(e,t){if(16===e.type)return e.number/100*t;if(Mn(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},Wn="deg",$n="grad",Xn="rad",Yn="turn",Jn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case Wn:return Math.PI*t.number/180;case $n:return Math.PI/200*t.number;case Xn:return t.number;case Yn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},Zn=function(e){return 15===e.type&&(e.unit===Wn||e.unit===$n||e.unit===Xn||e.unit===Yn)},er=function(e){switch(e.filter(Ln).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zn,zn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zn,Kn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Kn,Kn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Kn,zn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=ur[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3);return ir(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(4===t.value.length){r=t.value.substring(0,1),s=t.value.substring(1,2),i=t.value.substring(2,3);var a=t.value.substring(3,4);return ir(parseInt(r+r,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6),ir(parseInt(r,16),parseInt(s,16),parseInt(i,16),1);if(8===t.value.length)return r=t.value.substring(0,2),s=t.value.substring(2,4),i=t.value.substring(4,6),a=t.value.substring(6,8),ir(parseInt(r,16),parseInt(s,16),parseInt(i,16),parseInt(a,16)/255)}if(20===t.type){var o=hr[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return hr.TRANSPARENT}},rr=function(e){return 0===(255&e)},sr=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},ir=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},ar=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},or=function(e,t){var n=t.filter(Fn);if(3===n.length){var r=n.map(ar),s=r[0],i=r[1],a=r[2];return ir(s,i,a,1)}if(4===n.length){var o=n.map(ar),l=(s=o[0],i=o[1],a=o[2],o[3]);return ir(s,i,a,l)}return 0};function lr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var cr=function(e,t){var n=t.filter(Fn),r=n[0],s=n[1],i=n[2],a=n[3],o=(17===r.type?tr(r.number):Jn.parse(e,r))/(2*Math.PI),l=Hn(s)?s.number/100:0,c=Hn(i)?i.number/100:0,u="undefined"!==typeof a&&Hn(a)?qn(a,1):1;if(0===l)return ir(255*c,255*c,255*c,1);var d=c<=.5?c*(l+1):c+l-c*l,h=2*c-d,m=lr(h,d,o+1/3),A=lr(h,d,o),g=lr(h,d,o-1/3);return ir(255*m,255*A,255*g,u)},ur={hsl:cr,hsla:cr,rgb:or,rgba:or},dr=function(e,t){return nr.parse(e,Bn.create(t).parseComponentValue())},hr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},mr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Ar={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&Hn(r)?{color:n,stop:r}:{color:n,stop:null}},pr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=zn),null===r.stop&&(r.stop=Kn);for(var s=[],i=0,a=0;a<e.length;a++){var o=e[a].stop;if(null!==o){var l=qn(o,t);l>i?s.push(l):s.push(i),i=l}else s.push(null)}var c=null;for(a=0;a<s.length;a++){var u=s[a];if(null===u)null===c&&(c=a);else if(null!==c){for(var d=a-c,h=(u-s[c-1])/(d+1),m=1;m<=d;m++)s[c+m-1]=h*m;c=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,s[n]/t),0)}}))},fr=function(e,t,n){var r=t/2,s=n/2,i=qn(e[0],t)-r,a=s-qn(e[1],n);return(Math.atan2(a,i)+2*Math.PI)%(2*Math.PI)},xr=function(e,t,n){var r="number"===typeof e?e:fr(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),i=t/2,a=n/2,o=s/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,i-c,i+c,a-l,a+l]},vr=function(e,t){return Math.sqrt(e*e+t*t)},yr=function(e,t,n,r,s){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var i=t[0],a=t[1],o=vr(n-i,r-a);return(s?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},br=function(e,t,n,r,s){var i=0,a=0;switch(e.size){case 0:0===e.shape?i=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(i=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===e.shape)i=a=Math.min(vr(t,n),vr(t,n-s),vr(t-r,n),vr(t-r,n-s));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),l=yr(r,s,t,n,!0),c=l[0],u=l[1];a=o*(i=vr(c-t,(u-n)/o))}break;case 1:0===e.shape?i=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):1===e.shape&&(i=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===e.shape)i=a=Math.max(vr(t,n),vr(t,n-s),vr(t-r,n),vr(t-r,n-s));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r));var d=yr(r,s,t,n,!1);c=d[0],u=d[1],a=o*(i=vr(c-t,(u-n)/o))}}return Array.isArray(e.size)&&(i=qn(e.size[0],r),a=2===e.size.length?qn(e.size[1],s):i),[i,a]},wr=function(e,t){var n=tr(180),r=[];return Un(t).forEach((function(t,s){if(0===s){var i=t[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(n=er(t));if(Zn(i))return void(n=(Jn.parse(e,i)+tr(270))%tr(360))}var a=gr(e,t);r.push(a)})),{angle:n,stops:r,type:1}},Nr="closest-side",jr="farthest-side",Cr="closest-corner",Tr="farthest-corner",Sr="circle",_r="ellipse",Er="cover",Br="contain",Mr=function(e,t){var n=0,r=3,s=[],i=[];return Un(t).forEach((function(t,a){var o=!0;if(0===a?o=t.reduce((function(e,t){if(Ln(t))switch(t.value){case"center":return i.push(Vn),!1;case"top":case"left":return i.push(zn),!1;case"right":case"bottom":return i.push(Kn),!1}else if(Hn(t)||On(t))return i.push(t),!1;return e}),o):1===a&&(o=t.reduce((function(e,t){if(Ln(t))switch(t.value){case Sr:return n=0,!1;case _r:return n=1,!1;case Br:case Nr:return r=0,!1;case jr:return r=1,!1;case Cr:return r=2,!1;case Er:case Tr:return r=3,!1}else if(On(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),o)),o){var l=gr(e,t);s.push(l)}})),{size:r,shape:n,stops:s,position:i,type:2}},kr=function(e){return 1===e.type},Lr=function(e){return 2===e.type},Ir={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Fr[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Dr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Fr[e.name])}var Pr,Fr={"linear-gradient":function(e,t){var n=tr(180),r=[];return Un(t).forEach((function(t,s){if(0===s){var i=t[0];if(20===i.type&&"to"===i.value)return void(n=er(t));if(Zn(i))return void(n=Jn.parse(e,i))}var a=gr(e,t);r.push(a)})),{angle:n,stops:r,type:1}},"-moz-linear-gradient":wr,"-ms-linear-gradient":wr,"-o-linear-gradient":wr,"-webkit-linear-gradient":wr,"radial-gradient":function(e,t){var n=0,r=3,s=[],i=[];return Un(t).forEach((function(t,a){var o=!0;if(0===a){var l=!1;o=t.reduce((function(e,t){if(l)if(Ln(t))switch(t.value){case"center":return i.push(Vn),e;case"top":case"left":return i.push(zn),e;case"right":case"bottom":return i.push(Kn),e}else(Hn(t)||On(t))&&i.push(t);else if(Ln(t))switch(t.value){case Sr:return n=0,!1;case _r:return n=1,!1;case"at":return l=!0,!1;case Nr:return r=0,!1;case Er:case jr:return r=1,!1;case Br:case Cr:return r=2,!1;case Tr:return r=3,!1}else if(On(t)||Hn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),o)}if(o){var c=gr(e,t);s.push(c)}})),{size:r,shape:n,stops:s,position:i,type:2}},"-moz-radial-gradient":Mr,"-ms-radial-gradient":Mr,"-o-radial-gradient":Mr,"-webkit-radial-gradient":Mr,"-webkit-gradient":function(e,t){var n=tr(180),r=[],s=1,i=0,a=3,o=[];return Un(t).forEach((function(t,n){var i=t[0];if(0===n){if(Ln(i)&&"linear"===i.value)return void(s=1);if(Ln(i)&&"radial"===i.value)return void(s=2)}if(18===i.type)if("from"===i.name){var a=nr.parse(e,i.values[0]);r.push({stop:zn,color:a})}else if("to"===i.name)a=nr.parse(e,i.values[0]),r.push({stop:Kn,color:a});else if("color-stop"===i.name){var o=i.values.filter(Fn);if(2===o.length){a=nr.parse(e,o[1]);var l=o[0];kn(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:a})}}})),1===s?{angle:(n+tr(180))%tr(360),stops:r,type:s}:{size:a,shape:i,stops:r,position:o,type:s}}},Ur={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return Fn(e)&&Dr(e)})).map((function(t){return Ir.parse(e,t)}))}},Rr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Or={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Un(t).map((function(e){return e.filter(Hn)})).map(Qn)}},Hr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Un(t).map((function(e){return e.filter(Ln).map((function(e){return e.value})).join(" ")})).map(Qr)}},Qr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Pr||(Pr={}));var zr,Vr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Un(t).map((function(e){return e.filter(Kr)}))}},Kr=function(e){return Ln(e)||Hn(e)},Gr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qr=Gr("top"),Wr=Gr("right"),$r=Gr("bottom"),Xr=Gr("left"),Yr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Qn(t.filter(Hn))}}},Jr=Yr("top-left"),Zr=Yr("top-right"),es=Yr("bottom-right"),ts=Yr("bottom-left"),ns=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rs=ns("top"),ss=ns("right"),is=ns("bottom"),as=ns("left"),os=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Mn(t)?t.number:0}}},ls=os("top"),cs=os("right"),us=os("bottom"),ds=os("left"),hs={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ms={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},As={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).reduce((function(e,t){return e|gs(t.value)}),0)}},gs=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ps={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},fs={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(zr||(zr={}));var xs,vs={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?zr.STRICT:zr.NORMAL}},ys={name:"line-height",initialValue:"normal",prefix:!1,type:4},bs=function(e,t){return Ln(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:Hn(e)?qn(e,t):t},ws={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Ir.parse(e,t)}},Ns={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},js={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Cs=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ts=Cs("top"),Ss=Cs("right"),_s=Cs("bottom"),Es=Cs("left"),Bs={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Ms={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},ks=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ls=ks("top"),Is=ks("right"),Ds=ks("bottom"),Ps=ks("left"),Fs={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Us={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Rs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Dn(t[0],"none")?[]:Un(t).map((function(t){for(var n={color:hr.TRANSPARENT,offsetX:zn,offsetY:zn,blur:zn},r=0,s=0;s<t.length;s++){var i=t[s];On(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:n.blur=i,r++):n.color=nr.parse(e,i)}return n}))}},Os={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Hs={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Qs[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Qs={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var s=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,s,i,a,o]:null}},zs={type:16,number:50,flags:Ke},Vs=[zs,zs],Ks={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Hn);return 2!==n.length?Vs:[n[0],n[1]]}},Gs={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(xs||(xs={}));for(var qs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return xs.BREAK_ALL;case"keep-all":return xs.KEEP_ALL;default:return xs.NORMAL}}},Ws={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(kn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},$s={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Xs={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:1}},Ys={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Js={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},Zs={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},ei={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ti={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return kn(t)?t.number:Ln(t)&&"bold"===t.value?700:400}},ni={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ln).map((function(e){return e.value}))}},ri={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},si=function(e,t){return 0!==(e&t)},ii={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},ai={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=t.filter(Pn),i=0;i<s.length;i++){var a=s[i],o=s[i+1];if(20===a.type){var l=o&&kn(o)?o.number:1;r.push({counter:a.value,increment:l})}}return r}},oi={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Pn),s=0;s<r.length;s++){var i=r[s],a=r[s+1];if(Ln(i)&&"none"!==i.value){var o=a&&kn(a)?a.number:0;n.push({counter:i.value,reset:o})}}return n}},li={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(Mn).map((function(t){return $s.parse(e,t)}))}},ci={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=t.filter(In);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var a=s[i].value,o=s[i+1].value;r.push({open:a,close:o})}return r}},ui=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},di={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Dn(t[0],"none")?[]:Un(t).map((function(t){for(var n={color:255,offsetX:zn,offsetY:zn,blur:zn,spread:zn,inset:!1},r=0,s=0;s<t.length;s++){var i=t[s];Dn(i,"inset")?n.inset=!0:On(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:2===r?n.blur=i:n.spread=i,r++):n.color=nr.parse(e,i)}return n}))}},hi={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Ln).forEach((function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}})),n.forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r}},mi={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Ai={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Mn(t)?t.number:0}},gi=function(){function e(e,t){var n,r;this.animationDuration=xi(e,li,t.animationDuration),this.backgroundClip=xi(e,mr,t.backgroundClip),this.backgroundColor=xi(e,Ar,t.backgroundColor),this.backgroundImage=xi(e,Ur,t.backgroundImage),this.backgroundOrigin=xi(e,Rr,t.backgroundOrigin),this.backgroundPosition=xi(e,Or,t.backgroundPosition),this.backgroundRepeat=xi(e,Hr,t.backgroundRepeat),this.backgroundSize=xi(e,Vr,t.backgroundSize),this.borderTopColor=xi(e,qr,t.borderTopColor),this.borderRightColor=xi(e,Wr,t.borderRightColor),this.borderBottomColor=xi(e,$r,t.borderBottomColor),this.borderLeftColor=xi(e,Xr,t.borderLeftColor),this.borderTopLeftRadius=xi(e,Jr,t.borderTopLeftRadius),this.borderTopRightRadius=xi(e,Zr,t.borderTopRightRadius),this.borderBottomRightRadius=xi(e,es,t.borderBottomRightRadius),this.borderBottomLeftRadius=xi(e,ts,t.borderBottomLeftRadius),this.borderTopStyle=xi(e,rs,t.borderTopStyle),this.borderRightStyle=xi(e,ss,t.borderRightStyle),this.borderBottomStyle=xi(e,is,t.borderBottomStyle),this.borderLeftStyle=xi(e,as,t.borderLeftStyle),this.borderTopWidth=xi(e,ls,t.borderTopWidth),this.borderRightWidth=xi(e,cs,t.borderRightWidth),this.borderBottomWidth=xi(e,us,t.borderBottomWidth),this.borderLeftWidth=xi(e,ds,t.borderLeftWidth),this.boxShadow=xi(e,di,t.boxShadow),this.color=xi(e,hs,t.color),this.direction=xi(e,ms,t.direction),this.display=xi(e,As,t.display),this.float=xi(e,ps,t.cssFloat),this.fontFamily=xi(e,Zs,t.fontFamily),this.fontSize=xi(e,ei,t.fontSize),this.fontStyle=xi(e,ri,t.fontStyle),this.fontVariant=xi(e,ni,t.fontVariant),this.fontWeight=xi(e,ti,t.fontWeight),this.letterSpacing=xi(e,fs,t.letterSpacing),this.lineBreak=xi(e,vs,t.lineBreak),this.lineHeight=xi(e,ys,t.lineHeight),this.listStyleImage=xi(e,ws,t.listStyleImage),this.listStylePosition=xi(e,Ns,t.listStylePosition),this.listStyleType=xi(e,js,t.listStyleType),this.marginTop=xi(e,Ts,t.marginTop),this.marginRight=xi(e,Ss,t.marginRight),this.marginBottom=xi(e,_s,t.marginBottom),this.marginLeft=xi(e,Es,t.marginLeft),this.opacity=xi(e,Xs,t.opacity);var s=xi(e,Bs,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=xi(e,Ms,t.overflowWrap),this.paddingTop=xi(e,Ls,t.paddingTop),this.paddingRight=xi(e,Is,t.paddingRight),this.paddingBottom=xi(e,Ds,t.paddingBottom),this.paddingLeft=xi(e,Ps,t.paddingLeft),this.paintOrder=xi(e,hi,t.paintOrder),this.position=xi(e,Us,t.position),this.textAlign=xi(e,Fs,t.textAlign),this.textDecorationColor=xi(e,Ys,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=xi(e,Js,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=xi(e,Rs,t.textShadow),this.textTransform=xi(e,Os,t.textTransform),this.transform=xi(e,Hs,t.transform),this.transformOrigin=xi(e,Ks,t.transformOrigin),this.visibility=xi(e,Gs,t.visibility),this.webkitTextStrokeColor=xi(e,mi,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=xi(e,Ai,t.webkitTextStrokeWidth),this.wordBreak=xi(e,qs,t.wordBreak),this.zIndex=xi(e,Ws,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return si(this.display,4)||si(this.display,33554432)||si(this.display,268435456)||si(this.display,536870912)||si(this.display,67108864)||si(this.display,134217728)},e}(),pi=function(){function e(e,t){this.content=xi(e,ii,t.content),this.quotes=xi(e,ci,t.quotes)}return e}(),fi=function(){function e(e,t){this.counterIncrement=xi(e,ai,t.counterIncrement),this.counterReset=xi(e,oi,t.counterReset)}return e}(),xi=function(e,t,n){var r=new En,s=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(s);var i=new Bn(r.read());switch(t.type){case 2:var a=i.parseComponentValue();return t.parse(e,Ln(a)?a.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return Jn.parse(e,i.parseComponentValue());case"color":return nr.parse(e,i.parseComponentValue());case"image":return Ir.parse(e,i.parseComponentValue());case"length":var o=i.parseComponentValue();return On(o)?o:zn;case"length-percentage":var l=i.parseComponentValue();return Hn(l)?l:zn;case"time":return $s.parse(e,i.parseComponentValue())}}},vi="data-html2canvas-debug",yi=function(e){switch(e.getAttribute(vi)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bi=function(e,t){var n=yi(e);return 1===n||t===n},wi=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bi(t,3),this.styles=new gi(e,window.getComputedStyle(t,null)),co(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),bi(t,4)&&(this.flags|=16)}return e}(),Ni="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ji="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ci="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Ti=0;Ti<ji.length;Ti++)Ci[ji.charCodeAt(Ti)]=Ti;for(var Si=function(e){var t,n,r,s,i,a=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=Ci[e.charCodeAt(t)],r=Ci[e.charCodeAt(t+1)],s=Ci[e.charCodeAt(t+2)],i=Ci[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|s>>2,u[l++]=(3&s)<<6|63&i;return c},_i=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Ei=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Bi=5,Mi=11,ki=2,Li=65536>>Bi,Ii=(1<<Bi)-1,Di=Li+(1024>>Bi)+32,Pi=65536>>Mi,Fi=(1<<Mi-Bi)-1,Ui=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Ri=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Oi=function(e,t){var n=Si(e),r=Array.isArray(n)?Ei(n):new Uint32Array(n),s=Array.isArray(n)?_i(n):new Uint16Array(n),i=24,a=Ui(s,i/2,r[4]/2),o=2===r[5]?Ui(s,(i+r[4])/2):Ri(r,Math.ceil((i+r[4])/4));return new Hi(r[0],r[1],r[2],r[3],a,o)},Hi=function(){function e(e,t,n,r,s,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Bi])<<ki)+(e&Ii),this.data[t];if(e<=65535)return t=((t=this.index[Li+(e-55296>>Bi)])<<ki)+(e&Ii),this.data[t];if(e<this.highStart)return t=Di-Pi+(e>>Mi),t=this.index[t],t+=e>>Bi&Fi,t=((t=this.index[t])<<ki)+(e&Ii),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zi="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Vi=0;Vi<Qi.length;Vi++)zi[Qi.charCodeAt(Vi)]=Vi;var Ki,Gi=1,qi=2,Wi=3,$i=4,Xi=5,Yi=7,Ji=8,Zi=9,ea=10,ta=11,na=12,ra=13,sa=14,ia=15,aa=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),n--)}else t.push(s)}return t},oa=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,i="";++s<n;){var a=e[s];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(s+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},la=Oi(Ni),ca="\xd7",ua="\xf7",da=function(e){return la.get(e)},ha=function(e,t,n){var r=n-2,s=t[r],i=t[n-1],a=t[n];if(i===qi&&a===Wi)return ca;if(i===qi||i===Wi||i===$i)return ua;if(a===qi||a===Wi||a===$i)return ua;if(i===Ji&&-1!==[Ji,Zi,ta,na].indexOf(a))return ca;if((i===ta||i===Zi)&&(a===Zi||a===ea))return ca;if((i===na||i===ea)&&a===ea)return ca;if(a===ra||a===Xi)return ca;if(a===Yi)return ca;if(i===Gi)return ca;if(i===ra&&a===sa){for(;s===Xi;)s=t[--r];if(s===sa)return ca}if(i===ia&&a===ia){for(var o=0;s===ia;)o++,s=t[--r];if(o%2===0)return ca}return ua},ma=function(e){var t=aa(e),n=t.length,r=0,s=0,i=t.map(da);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=ca;r<n&&(e=ha(t,i,++r))===ca;);if(e!==ca||r===n){var a=oa.apply(null,t.slice(s,r));return s=r,{value:a,done:!1}}return{done:!0,value:null}}}},Aa=function(e){for(var t,n=ma(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},ga=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),i=Math.round(s.height);if(e.body.removeChild(r),i===t)return!0}}return!1},pa=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,s=c(r.data).map((function(e){return u(e)})),i=0,a={},o=s.every((function(e,t){n.setStart(r,i),n.setEnd(r,i+e.length);var s=n.getBoundingClientRect();i+=e.length;var o=s.x>a.x||s.y>a.y;return a=s,0===t||o}));return e.body.removeChild(t),o},fa=function(){return"undefined"!==typeof(new Image).crossOrigin},xa=function(){return"string"===typeof(new XMLHttpRequest).responseType},va=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Ft){return!1}return!0},ya=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},ba=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,i=t.toDataURL();s.src=i;var a=wa(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),Na(a).then((function(t){r.drawImage(t,0,0);var s=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=e.createElement("div");return a.style.backgroundImage="url("+i+")",a.style.height=n+"px",ya(s)?Na(wa(n,n,0,0,a)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),ya(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},wa=function(e,t,n,r,s){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(s),a},Na=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},ja={get SUPPORT_RANGE_BOUNDS(){var e=ga(document);return Object.defineProperty(ja,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ja.SUPPORT_RANGE_BOUNDS&&pa(document);return Object.defineProperty(ja,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=va(document);return Object.defineProperty(ja,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?ba(document):Promise.resolve(!1);return Object.defineProperty(ja,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=fa();return Object.defineProperty(ja,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=xa();return Object.defineProperty(ja,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ja,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(ja,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Ca=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Ta=function(e,t,n,r){var s=Ma(t,n),i=[],o=0;return s.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ja.SUPPORT_RANGE_BOUNDS){var s=_a(r,o,t.length).getClientRects();if(s.length>1){var l=Ea(t),c=0;l.forEach((function(t){i.push(new Ca(t,a.fromDOMRectList(e,_a(r,c+o,t.length).getClientRects()))),c+=t.length}))}else i.push(new Ca(t,a.fromDOMRectList(e,s)))}else{var u=r.splitText(t.length);i.push(new Ca(t,Sa(e,r))),r=u}else ja.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length})),i},Sa=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var i=o(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),i}}return a.EMPTY},_a=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},Ea=function(e){if(ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return Aa(e)},Ba=function(e,t){if(ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return La(e,t)},Ma=function(e,t){return 0!==t.letterSpacing?Ea(e):Ba(e,t)},ka=[32,160,4961,65792,65793,4153,4241],La=function(e,t){for(var n,r=Qe(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),s=[],i=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach((function(e){-1===ka.indexOf(e)?r+=u(e):(r.length&&s.push(r),s.push(u(e)),r="")})),r.length&&s.push(r)}};!(n=r.next()).done;)i();return s},Ia=function(){function e(e,t,n){this.text=Da(t.data,n.textTransform),this.textBounds=Ta(e,this.text,n,t)}return e}(),Da=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Pa,Fa);case 2:return e.toUpperCase();default:return e}},Pa=/(^|\s|:|-|\(|\))([a-z])/g,Fa=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Ua=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(wi),Ra=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(wi),Oa=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=new XMLSerializer,i=o(t,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(wi),Ha=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wi),Qa=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(wi),za=[{type:15,flags:0,unit:"px",number:3}],Va=[{type:16,flags:0,number:50}],Ka=function(e){return e.width>e.height?new a(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new a(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Ga=function(e){var t=e.type===$a?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},qa="checkbox",Wa="radio",$a="password",Xa=707406591,Ya=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Ga(n),r.type!==qa&&r.type!==Wa||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Ka(r.bounds)),r.type){case qa:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=za;break;case Wa:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Va}return r}return t(n,e),n}(wi),Ja=function(e){function n(t,n){var r=e.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return t(n,e),n}(wi),Za=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(wi),eo=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=so(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?dr(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):hr.TRANSPARENT,i=n.contentWindow.document.body?dr(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):hr.TRANSPARENT;r.backgroundColor=rr(s)?rr(i)?r.styles.backgroundColor:i:s}}catch(Ft){}return r}return t(n,e),n}(wi),to=["OL","UL","MENU"],no=function(e,t,n,r){for(var s=t.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,oo(s)&&s.data.trim().length>0)n.textNodes.push(new Ia(e,s,n.styles));else if(lo(s))if(To(s)&&s.assignedNodes)s.assignedNodes().forEach((function(t){return no(e,t,n,r)}));else{var a=ro(e,s);a.styles.isVisible()&&(io(s,a,r)?a.flags|=4:ao(a.styles)&&(a.flags|=2),-1!==to.indexOf(s.tagName)&&(a.flags|=8),n.elements.push(a),s.slot,s.shadowRoot?no(e,s.shadowRoot,a,r):jo(s)||po(s)||Co(s)||no(e,s,a,r))}},ro=function(e,t){return yo(t)?new Ua(e,t):xo(t)?new Ra(e,t):po(t)?new Oa(e,t):ho(t)?new Ha(e,t):mo(t)?new Qa(e,t):Ao(t)?new Ya(e,t):Co(t)?new Ja(e,t):jo(t)?new Za(e,t):bo(t)?new eo(e,t):new wi(e,t)},so=function(e,t){var n=ro(e,t);return n.flags|=4,no(e,t,n,n),n},io=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||fo(e)&&n.styles.isTransparent()},ao=function(e){return e.isPositioned()||e.isFloating()},oo=function(e){return e.nodeType===Node.TEXT_NODE},lo=function(e){return e.nodeType===Node.ELEMENT_NODE},co=function(e){return lo(e)&&"undefined"!==typeof e.style&&!uo(e)},uo=function(e){return"object"===typeof e.className},ho=function(e){return"LI"===e.tagName},mo=function(e){return"OL"===e.tagName},Ao=function(e){return"INPUT"===e.tagName},go=function(e){return"HTML"===e.tagName},po=function(e){return"svg"===e.tagName},fo=function(e){return"BODY"===e.tagName},xo=function(e){return"CANVAS"===e.tagName},vo=function(e){return"VIDEO"===e.tagName},yo=function(e){return"IMG"===e.tagName},bo=function(e){return"IFRAME"===e.tagName},wo=function(e){return"STYLE"===e.tagName},No=function(e){return"SCRIPT"===e.tagName},jo=function(e){return"TEXTAREA"===e.tagName},Co=function(e){return"SELECT"===e.tagName},To=function(e){return"SLOT"===e.tagName},So=function(e){return e.tagName.indexOf("-")>0},_o=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,s=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var i=[];return s&&r.forEach((function(e){var n=t.counters[e.counter];i.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),i},e}(),Eo={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Bo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Mo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},ko={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Lo=function(e,t,n,r,s,i){return e<t||e>n?Go(e,s,i.length>0):r.integers.reduce((function(t,n,s){for(;e>=n;)e-=n,t+=r.values[s];return t}),"")+i},Io=function(e,t,n,r){var s="";do{n||e--,s=r(e)+s,e/=t}while(e*t>=t);return s},Do=function(e,t,n,r,s){var i=n-t+1;return(e<0?"-":"")+(Io(Math.abs(e),i,r,(function(e){return u(Math.floor(e%i)+t)}))+s)},Po=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Io(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},Fo=1,Uo=2,Ro=4,Oo=8,Ho=function(e,t,n,r,s,i){if(e<-9999||e>9999)return Go(e,4,s.length>0);var a=Math.abs(e),o=s;if(0===a)return t[0]+o;for(var l=0;a>0&&l<=4;l++){var c=a%10;0===c&&si(i,Fo)&&""!==o?o=t[c]+o:c>1||1===c&&0===l||1===c&&1===l&&si(i,Uo)||1===c&&1===l&&si(i,Ro)&&e>100||1===c&&l>1&&si(i,Oo)?o=t[c]+(l>0?n[l-1]:"")+o:1===c&&l>0&&(o=n[l-1]+o),a=Math.floor(a/10)}return(e<0?r:"")+o},Qo="\u5341\u767e\u5343\u842c",zo="\u62fe\u4f70\u4edf\u842c",Vo="\u30de\u30a4\u30ca\u30b9",Ko="\ub9c8\uc774\ub108\uc2a4",Go=function(e,t,n){var r=n?". ":"",s=n?"\u3001":"",i=n?", ":"",a=n?" ":"";switch(t){case 0:return"\u2022"+a;case 1:return"\u25e6"+a;case 2:return"\u25fe"+a;case 5:var o=Do(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Po(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",s);case 6:return Lo(e,1,3999,Eo,3,r).toLowerCase();case 7:return Lo(e,1,3999,Eo,3,r);case 8:return Do(e,945,969,!1,r);case 9:return Do(e,97,122,!1,r);case 10:return Do(e,65,90,!1,r);case 11:return Do(e,1632,1641,!0,r);case 12:case 49:return Lo(e,1,9999,Bo,3,r);case 35:return Lo(e,1,9999,Bo,3,r).toLowerCase();case 13:return Do(e,2534,2543,!0,r);case 14:case 30:return Do(e,6112,6121,!0,r);case 15:return Po(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",s);case 16:return Po(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",s);case 17:case 48:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Qo,"\u8ca0",s,Uo|Ro|Oo);case 47:return Ho(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",zo,"\u8ca0",s,Fo|Uo|Ro|Oo);case 42:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Qo,"\u8d1f",s,Uo|Ro|Oo);case 41:return Ho(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",zo,"\u8d1f",s,Fo|Uo|Ro|Oo);case 26:return Ho(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Vo,s,0);case 25:return Ho(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Vo,s,Fo|Uo|Ro);case 31:return Ho(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Ko,i,Fo|Uo|Ro);case 33:return Ho(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Ko,i,0);case 32:return Ho(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Ko,i,Fo|Uo|Ro);case 18:return Do(e,2406,2415,!0,r);case 20:return Lo(e,1,19999,ko,3,r);case 21:return Do(e,2790,2799,!0,r);case 22:return Do(e,2662,2671,!0,r);case 22:return Lo(e,1,10999,Mo,3,r);case 23:return Po(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Po(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Do(e,3302,3311,!0,r);case 28:return Po(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",s);case 29:return Po(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",s);case 34:return Do(e,3792,3801,!0,r);case 37:return Do(e,6160,6169,!0,r);case 38:return Do(e,4160,4169,!0,r);case 39:return Do(e,2918,2927,!0,r);case 40:return Do(e,1776,1785,!0,r);case 43:return Do(e,3046,3055,!0,r);case 44:return Do(e,3174,3183,!0,r);case 45:return Do(e,3664,3673,!0,r);case 46:return Do(e,3872,3881,!0,r);default:return Do(e,48,57,!0,r)}},qo="data-html2canvas-ignore",Wo=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new _o,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,i=Xo(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=i.contentWindow,c=l.document,u=Zo(i).then((function(){return r(n,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(sl),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Jo(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then((function(){return e(c,n)})).then((function(){return i}))]:[2,i]}}))}))}));return c.open(),c.write(nl(document.doctype)+"<html></html>"),rl(this.referenceElement.ownerDocument,a,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(e){if(bi(e,2),xo(e))return this.createCanvasClone(e);if(vo(e))return this.createVideoClone(e);if(wo(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return yo(t)&&(yo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),So(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Ft){if(this.context.logger.error("Unable to access cssRules property",Ft),"SecurityError"!==Ft.name)throw Ft}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Ft){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var s=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(a){var o=a.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch(Ft){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Ft){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){lo(t)&&(No(t)||t.hasAttribute(qo)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&lo(t)&&wo(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(lo(s)&&To(s)&&"function"===typeof s.assignedNodes){var i=s.assignedNodes();i.length&&i.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,s,n)},e.prototype.cloneNode=function(e,t){if(oo(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lo(e)&&(co(e)||uo(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&co(r)&&(this.clonedReferenceElement=r),fo(r)&&ul(r);var o=this.counters.parse(new fi(this.context,s)),l=this.resolvePseudoContent(e,r,i,Ki.BEFORE);So(e)&&(t=!0),vo(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,a,Ki.AFTER);return c&&r.appendChild(c),this.counters.pop(o),(s&&(this.options.copyStyles||uo(e))&&!bo(e)||t)&&tl(s,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(jo(e)||Co(e))&&(jo(r)||Co(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var s=this;if(n){var i=n.content,a=t.ownerDocument;if(a&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==n.display){this.counters.parse(new fi(this.context,n));var o=new pi(this.context,n),l=a.createElement("html2canvaspseudoelement");tl(n,l),o.content.forEach((function(t){if(0===t.type)l.appendChild(a.createTextNode(t.value));else if(22===t.type){var n=a.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Ln);r.length&&l.appendChild(a.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var i=t.values.filter(Fn),c=i[0],u=i[1];if(c&&Ln(c)){var d=s.counters.getCounterValue(c.value),h=u&&Ln(u)?js.parse(s.context,u.value):3;l.appendChild(a.createTextNode(Go(d,h,!1)))}}else if("counters"===t.name){var m=t.values.filter(Fn),A=(c=m[0],m[1]);if(u=m[2],c&&Ln(c)){var g=s.counters.getCounterValues(c.value),p=u&&Ln(u)?js.parse(s.context,u.value):3,f=A&&0===A.type?A.value:"",x=g.map((function(e){return Go(e,p,!1)})).join(f);l.appendChild(a.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(a.createTextNode(ui(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(a.createTextNode(ui(o.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(a.createTextNode(t.value))}})),l.className=ol+" "+ll;var c=r===Ki.BEFORE?" "+ol:" "+ll;return uo(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Ki||(Ki={}));var $o,Xo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(qo,"true"),e.body.appendChild(n),n},Yo=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},Jo=function(e){return Promise.all([].slice.call(e.images,0).map(Yo))},Zo=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),t(e))}),50)}}))},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===el.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},sl=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},il=":before",al=":after",ol="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",cl='{\n    content: "" !important;\n    display: none !important;\n}',ul=function(e){dl(e,"."+ol+il+cl+"\n         ."+ll+al+cl)},dl=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},hl=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),ml=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:yl(e)||fl(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a=this;return s(this,(function(s){switch(s.label){case 0:return t=hl.isSameOrigin(e),n=!xl(e)&&!0===this._options.useCORS&&ja.SUPPORT_CORS_IMAGES&&!t,r=!xl(e)&&!t&&!yl(e)&&"string"===typeof this._options.proxy&&ja.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||xl(e)||yl(e)||r||n?(i=e,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(vl(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout((function(){return e(r)}),500),a._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+a._options.imageTimeout+"ms) loading image")}),a._options.imageTimeout)}))];case 3:return[2,s.sent()]}}))}))},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(s,i){var a=ja.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===a)s(o.response);else{var e=new FileReader;e.addEventListener("load",(function(){return s(e.result)}),!1),e.addEventListener("error",(function(e){return i(e)}),!1),e.readAsDataURL(o.response)}else i("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=i;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&o instanceof XMLHttpRequest&&(o.responseType=a),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return i("Timed out ("+c+"ms) proxying "+r)}}o.send()}))},e}(),Al=/^data:image\/svg\+xml/i,gl=/^data:image\/.*;base64,/i,pl=/^data:image\/.*/i,fl=function(e){return ja.SUPPORT_SVG_DRAWING||!bl(e)},xl=function(e){return pl.test(e)},vl=function(e){return gl.test(e)},yl=function(e){return"blob"===e.substr(0,4)},bl=function(e){return"svg"===e.substr(-3).toLowerCase()||Al.test(e)},wl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Nl=function(e,t,n){return new wl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},jl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Nl(this.start,this.startControl,t),s=Nl(this.startControl,this.endControl,t),i=Nl(this.endControl,this.end,t),a=Nl(r,s,t),o=Nl(s,i,t),l=Nl(a,o,t);return n?new e(this.start,r,a,l):new e(l,o,i,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cl=function(e){return 1===e.type},Tl=function(){function e(e){var t=e.styles,n=e.bounds,r=Gn(t.borderTopLeftRadius,n.width,n.height),s=r[0],i=r[1],a=Gn(t.borderTopRightRadius,n.width,n.height),o=a[0],l=a[1],c=Gn(t.borderBottomRightRadius,n.width,n.height),u=c[0],d=c[1],h=Gn(t.borderBottomLeftRadius,n.width,n.height),m=h[0],A=h[1],g=[];g.push((s+o)/n.width),g.push((m+u)/n.width),g.push((i+A)/n.height),g.push((l+d)/n.height);var p=Math.max.apply(Math,g);p>1&&(s/=p,i/=p,o/=p,l/=p,u/=p,d/=p,m/=p,A/=p);var f=n.width-o,x=n.height-d,v=n.width-u,y=n.height-A,b=t.borderTopWidth,w=t.borderRightWidth,N=t.borderBottomWidth,j=t.borderLeftWidth,C=qn(t.paddingTop,e.bounds.width),T=qn(t.paddingRight,e.bounds.width),S=qn(t.paddingBottom,e.bounds.width),_=qn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Sl(n.left+j/3,n.top+b/3,s-j/3,i-b/3,$o.TOP_LEFT):new wl(n.left+j/3,n.top+b/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Sl(n.left+f,n.top+b/3,o-w/3,l-b/3,$o.TOP_RIGHT):new wl(n.left+n.width-w/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||d>0?Sl(n.left+v,n.top+x,u-w/3,d-N/3,$o.BOTTOM_RIGHT):new wl(n.left+n.width-w/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=m>0||A>0?Sl(n.left+j/3,n.top+y,m-j/3,A-N/3,$o.BOTTOM_LEFT):new wl(n.left+j/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Sl(n.left+2*j/3,n.top+2*b/3,s-2*j/3,i-2*b/3,$o.TOP_LEFT):new wl(n.left+2*j/3,n.top+2*b/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Sl(n.left+f,n.top+2*b/3,o-2*w/3,l-2*b/3,$o.TOP_RIGHT):new wl(n.left+n.width-2*w/3,n.top+2*b/3),this.bottomRightBorderDoubleInnerBox=u>0||d>0?Sl(n.left+v,n.top+x,u-2*w/3,d-2*N/3,$o.BOTTOM_RIGHT):new wl(n.left+n.width-2*w/3,n.top+n.height-2*N/3),this.bottomLeftBorderDoubleInnerBox=m>0||A>0?Sl(n.left+2*j/3,n.top+y,m-2*j/3,A-2*N/3,$o.BOTTOM_LEFT):new wl(n.left+2*j/3,n.top+n.height-2*N/3),this.topLeftBorderStroke=s>0||i>0?Sl(n.left+j/2,n.top+b/2,s-j/2,i-b/2,$o.TOP_LEFT):new wl(n.left+j/2,n.top+b/2),this.topRightBorderStroke=s>0||i>0?Sl(n.left+f,n.top+b/2,o-w/2,l-b/2,$o.TOP_RIGHT):new wl(n.left+n.width-w/2,n.top+b/2),this.bottomRightBorderStroke=u>0||d>0?Sl(n.left+v,n.top+x,u-w/2,d-N/2,$o.BOTTOM_RIGHT):new wl(n.left+n.width-w/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=m>0||A>0?Sl(n.left+j/2,n.top+y,m-j/2,A-N/2,$o.BOTTOM_LEFT):new wl(n.left+j/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||i>0?Sl(n.left,n.top,s,i,$o.TOP_LEFT):new wl(n.left,n.top),this.topRightBorderBox=o>0||l>0?Sl(n.left+f,n.top,o,l,$o.TOP_RIGHT):new wl(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||d>0?Sl(n.left+v,n.top+x,u,d,$o.BOTTOM_RIGHT):new wl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=m>0||A>0?Sl(n.left,n.top+y,m,A,$o.BOTTOM_LEFT):new wl(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Sl(n.left+j,n.top+b,Math.max(0,s-j),Math.max(0,i-b),$o.TOP_LEFT):new wl(n.left+j,n.top+b),this.topRightPaddingBox=o>0||l>0?Sl(n.left+Math.min(f,n.width-w),n.top+b,f>n.width+w?0:Math.max(0,o-w),Math.max(0,l-b),$o.TOP_RIGHT):new wl(n.left+n.width-w,n.top+b),this.bottomRightPaddingBox=u>0||d>0?Sl(n.left+Math.min(v,n.width-j),n.top+Math.min(x,n.height-N),Math.max(0,u-w),Math.max(0,d-N),$o.BOTTOM_RIGHT):new wl(n.left+n.width-w,n.top+n.height-N),this.bottomLeftPaddingBox=m>0||A>0?Sl(n.left+j,n.top+Math.min(y,n.height-N),Math.max(0,m-j),Math.max(0,A-N),$o.BOTTOM_LEFT):new wl(n.left+j,n.top+n.height-N),this.topLeftContentBox=s>0||i>0?Sl(n.left+j+_,n.top+b+C,Math.max(0,s-(j+_)),Math.max(0,i-(b+C)),$o.TOP_LEFT):new wl(n.left+j+_,n.top+b+C),this.topRightContentBox=o>0||l>0?Sl(n.left+Math.min(f,n.width+j+_),n.top+b+C,f>n.width+j+_?0:o-j+_,l-(b+C),$o.TOP_RIGHT):new wl(n.left+n.width-(w+T),n.top+b+C),this.bottomRightContentBox=u>0||d>0?Sl(n.left+Math.min(v,n.width-(j+_)),n.top+Math.min(x,n.height+b+C),Math.max(0,u-(w+T)),d-(N+S),$o.BOTTOM_RIGHT):new wl(n.left+n.width-(w+T),n.top+n.height-(N+S)),this.bottomLeftContentBox=m>0||A>0?Sl(n.left+j+_,n.top+y,Math.max(0,m-(j+_)),A-(N+S),$o.BOTTOM_LEFT):new wl(n.left+j+_,n.top+n.height-(N+S))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}($o||($o={}));var Sl=function(e,t,n,r,s){var i=(Math.sqrt(2)-1)/3*4,a=n*i,o=r*i,l=e+n,c=t+r;switch(s){case $o.TOP_LEFT:return new jl(new wl(e,c),new wl(e,c-o),new wl(l-a,t),new wl(l,t));case $o.TOP_RIGHT:return new jl(new wl(e,t),new wl(e+a,t),new wl(l,c-o),new wl(l,c));case $o.BOTTOM_RIGHT:return new jl(new wl(l,t),new wl(l,t+o),new wl(e+a,c),new wl(e,c));case $o.BOTTOM_LEFT:default:return new jl(new wl(l,c),new wl(l-a,c),new wl(e,t+o),new wl(e,t))}},_l=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},El=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Bl=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ml=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),kl=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Ll=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Il=function(e){return 0===e.type},Dl=function(e){return 1===e.type},Pl=function(e){return 2===e.type},Fl=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},Ul=function(e,t,n,r,s){return e.map((function(e,i){switch(i){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+s);case 3:return e.add(t,n+s)}return e}))},Rl=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Ol=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Tl(this.container),this.container.styles.opacity<1&&this.effects.push(new Ll(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Ml(n,r,s))}if(0!==this.container.styles.overflowX){var i=_l(this.curves),a=Bl(this.curves);Fl(i,a)?this.effects.push(new kl(i,6)):(this.effects.push(new kl(i,2)),this.effects.push(new kl(a,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter((function(e){return!Dl(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var i=_l(n.curves),a=Bl(n.curves);Fl(i,a)||r.unshift(new kl(a,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter((function(t){return si(t.target,e)}))},e}(),Hl=function(e,t,n,r){e.container.elements.forEach((function(s){var i=si(s.flags,4),a=si(s.flags,2),o=new Ol(s,e);si(s.styles.display,2048)&&r.push(o);var l=si(s.flags,8)?[]:r;if(i||a){var c=i||s.styles.isPositioned()?n:t,u=new Rl(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var d=s.styles.zIndex.order;if(d<0){var h=0;c.negativeZIndex.some((function(e,t){return d>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),c.negativeZIndex.splice(h,0,u)}else if(d>0){var m=0;c.positiveZIndex.some((function(e,t){return d>=e.element.container.styles.zIndex.order?(m=t+1,!1):m>0})),c.positiveZIndex.splice(m,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else s.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);Hl(o,u,i?u:n,l)}else s.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),Hl(o,t,n,l);si(s.flags,8)&&Ql(s,l)}))},Ql=function(e,t){for(var n=e instanceof Qa?e.start:1,r=e instanceof Qa&&e.reversed,s=0;s<t.length;s++){var i=t[s];i.container instanceof Ha&&"number"===typeof i.container.value&&0!==i.container.value&&(n=i.container.value),i.listValue=Go(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},zl=function(e){var t=new Ol(e,null),n=new Rl(t),r=[];return Hl(t,n,n,r),Ql(t.container,r),n},Vl=function(e,t){switch(t){case 0:return $l(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return $l(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return $l(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return $l(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Kl=function(e,t){switch(t){case 0:return $l(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return $l(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return $l(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return $l(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Gl=function(e,t){switch(t){case 0:return $l(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return $l(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return $l(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return $l(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},ql=function(e,t){switch(t){case 0:return Wl(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Wl(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Wl(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Wl(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Wl=function(e,t){var n=[];return Cl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Cl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},$l=function(e,t,n,r){var s=[];return Cl(e)?s.push(e.subdivide(.5,!1)):s.push(e),Cl(n)?s.push(n.subdivide(.5,!0)):s.push(n),Cl(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Cl(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},Xl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Yl=function(e){var t=e.styles,n=e.bounds,r=qn(t.paddingLeft,n.width),s=qn(t.paddingRight,n.width),i=qn(t.paddingTop,n.width),a=qn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+i+a))},Jl=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Xl(t)},Zl=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Xl(t)},ec=function(e,t,n){var r=Jl(sc(e.styles.backgroundOrigin,t),e),s=Zl(sc(e.styles.backgroundClip,t),e),i=rc(sc(e.styles.backgroundSize,t),n,r),a=i[0],o=i[1],l=Gn(sc(e.styles.backgroundPosition,t),r.width-a,r.height-o);return[ic(sc(e.styles.backgroundRepeat,t),l,i,r,s),Math.round(r.left+l[0]),Math.round(r.top+l[1]),a,o]},tc=function(e){return Ln(e)&&e.value===Pr.AUTO},nc=function(e){return"number"===typeof e},rc=function(e,t,n){var r=t[0],s=t[1],i=t[2],a=e[0],o=e[1];if(!a)return[0,0];if(Hn(a)&&o&&Hn(o))return[qn(a,n.width),qn(o,n.height)];var l=nc(i);if(Ln(a)&&(a.value===Pr.CONTAIN||a.value===Pr.COVER))return nc(i)?n.width/n.height<i!==(a.value===Pr.COVER)?[n.width,n.width/i]:[n.height*i,n.height]:[n.width,n.height];var c=nc(r),u=nc(s),d=c||u;if(tc(a)&&(!o||tc(o)))return c&&u?[r,s]:l||d?d&&l?[c?r:s*i,u?s:r/i]:[c?r:n.width,u?s:n.height]:[n.width,n.height];if(l){var h=0,m=0;return Hn(a)?h=qn(a,n.width):Hn(o)&&(m=qn(o,n.height)),tc(a)?h=m*i:o&&!tc(o)||(m=h/i),[h,m]}var A=null,g=null;if(Hn(a)?A=qn(a,n.width):o&&Hn(o)&&(g=qn(o,n.height)),null===A||o&&!tc(o)||(g=c&&u?A/r*s:n.height),null!==g&&tc(a)&&(A=c&&u?g/s*r:n.width),null!==A&&null!==g)return[A,g];throw new Error("Unable to calculate background-size for element")},sc=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},ic=function(e,t,n,r,s){var i=t[0],a=t[1],o=n[0],l=n[1];switch(e){case 2:return[new wl(Math.round(r.left),Math.round(r.top+a)),new wl(Math.round(r.left+r.width),Math.round(r.top+a)),new wl(Math.round(r.left+r.width),Math.round(l+r.top+a)),new wl(Math.round(r.left),Math.round(l+r.top+a))];case 3:return[new wl(Math.round(r.left+i),Math.round(r.top)),new wl(Math.round(r.left+i+o),Math.round(r.top)),new wl(Math.round(r.left+i+o),Math.round(r.height+r.top)),new wl(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new wl(Math.round(r.left+i),Math.round(r.top+a)),new wl(Math.round(r.left+i+o),Math.round(r.top+a)),new wl(Math.round(r.left+i+o),Math.round(r.top+a+l)),new wl(Math.round(r.left+i),Math.round(r.top+a+l))];default:return[new wl(Math.round(s.left),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.top)),new wl(Math.round(s.left+s.width),Math.round(s.height+s.top)),new wl(Math.round(s.left),Math.round(s.height+s.top))]}},ac="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oc="Hidden Text",lc=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=ac,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(oc)),n.appendChild(s),n.appendChild(r);var a=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(oc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),cc=function(){function e(e,t){this.context=e,this.options=t}return e}(),uc=1e4,dc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new lc(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},n.prototype.applyEffect=function(e){this.ctx.save(),Pl(e)&&(this.ctx.globalAlpha=e.opacity),Il(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Dl(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},n.prototype.renderNode=function(e){return r(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return si(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Ea(e.text).reduce((function(t,s){return r.ctx.fillText(s,t,e.bounds.top+n),t+r.ctx.measureText(s).width}),e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=pc(e.fontFamily).join(", "),r=Mn(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a,o,l,c,u,d=this;return s(this,(function(s){return n=this.createFontStyle(t),r=n[0],i=n[1],a=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),l=o.baseline,c=o.middle,u=t.paintOrder,e.textBounds.forEach((function(e){u.forEach((function(n){switch(n){case 0:d.ctx.fillStyle=sr(t.color),d.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){d.ctx.shadowColor=sr(n.color),d.ctx.shadowOffsetX=n.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=n.offsetY.number*d.options.scale,d.ctx.shadowBlur=n.blur.number,d.renderTextWithLetterSpacing(e,t.letterSpacing,l)})),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),t.textDecorationLine.length&&(d.ctx.fillStyle=sr(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:d.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:d.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(d.ctx.strokeStyle=sr(t.webkitTextStrokeColor),d.ctx.lineWidth=t.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter"}}))})),[2]}))}))},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Yl(e),s=Bl(t);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,(function(){var t,r,i,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b;return s(this,(function(s){switch(s.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,i=t.styles,o=0,l=t.textNodes,s.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof Ua))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Ra&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Oa))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return x=s.sent(),this.renderReplacedElement(t,r,x),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof eo&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=s.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),s.label=14;case 14:if(t instanceof Ya&&(d=Math.min(t.bounds.width,t.bounds.height),t.type===qa?t.checked&&(this.ctx.save(),this.path([new wl(t.bounds.left+.39363*d,t.bounds.top+.79*d),new wl(t.bounds.left+.16*d,t.bounds.top+.5549*d),new wl(t.bounds.left+.27347*d,t.bounds.top+.44071*d),new wl(t.bounds.left+.39694*d,t.bounds.top+.5649*d),new wl(t.bounds.left+.72983*d,t.bounds.top+.23*d),new wl(t.bounds.left+.84*d,t.bounds.top+.34085*d),new wl(t.bounds.left+.39363*d,t.bounds.top+.79*d)]),this.ctx.fillStyle=sr(Xa),this.ctx.fill(),this.ctx.restore()):t.type===Wa&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+d/2,t.bounds.top+d/2,d/4,0,2*Math.PI,!0),this.ctx.fillStyle=sr(Xa),this.ctx.fill(),this.ctx.restore())),hc(t)&&t.value.length){switch(h=this.createFontStyle(i),y=h[0],m=h[1],A=this.fontMetrics.getMetrics(y,m).baseline,this.ctx.font=y,this.ctx.fillStyle=sr(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ac(t.styles.textAlign),b=Yl(t),g=0,t.styles.textAlign){case 1:g+=b.width/2;break;case 2:g+=b.width}p=b.add(g,0,0,-b.height/2+1),this.ctx.save(),this.path([new wl(b.left,b.top),new wl(b.left+b.width,b.top),new wl(b.left+b.width,b.top+b.height),new wl(b.left,b.top+b.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Ca(t.value,p),i.letterSpacing,A),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!si(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(f=t.styles.listStyleImage).type)return[3,18];x=void 0,v=f.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return x=s.sent(),this.ctx.drawImage(x,t.bounds.left-(x.width+10),t.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(y=this.createFontStyle(i)[0],this.ctx.font=y,this.ctx.fillStyle=sr(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",b=new a(t.bounds.left,t.bounds.top+qn(t.styles.paddingTop,t.bounds.width),t.bounds.width,bs(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Ca(e.listValue,b),i.letterSpacing,bs(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}}))}))},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,o,l,c,u,d,h,m,A,g,p;return s(this,(function(s){switch(s.label){case 0:return si(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:s.sent(),t=0,n=e.negativeZIndex,s.label=2;case 2:return t<n.length?(p=n[t],[4,this.renderStack(p)]):[3,5];case 3:s.sent(),s.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:s.sent(),r=0,i=e.nonInlineLevel,s.label=7;case 7:return r<i.length?(p=i[r],[4,this.renderNode(p)]):[3,10];case 8:s.sent(),s.label=9;case 9:return r++,[3,7];case 10:a=0,o=e.nonPositionedFloats,s.label=11;case 11:return a<o.length?(p=o[a],[4,this.renderStack(p)]):[3,14];case 12:s.sent(),s.label=13;case 13:return a++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,s.label=15;case 15:return l<c.length?(p=c[l],[4,this.renderStack(p)]):[3,18];case 16:s.sent(),s.label=17;case 17:return l++,[3,15];case 18:u=0,d=e.inlineLevel,s.label=19;case 19:return u<d.length?(p=d[u],[4,this.renderNode(p)]):[3,22];case 20:s.sent(),s.label=21;case 21:return u++,[3,19];case 22:h=0,m=e.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return h<m.length?(p=m[h],[4,this.renderStack(p)]):[3,26];case 24:s.sent(),s.label=25;case 25:return h++,[3,23];case 26:A=0,g=e.positiveZIndex,s.label=27;case 27:return A<g.length?(p=g[A],[4,this.renderStack(p)]):[3,30];case 28:s.sent(),s.label=29;case 29:return A++,[3,27];case 30:return[2]}}))}))},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=Cl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Cl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var s=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return s.width=Math.max(1,t),s.height=Math.max(1,n),s.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),s},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,o;return s(this,(function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var i,a,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b,w,N,j,C,T,S,_,E,B,M,k,L,I,D;return s(this,(function(s){switch(s.label){case 0:if(0!==n.type)return[3,5];i=void 0,a=n.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.context.cache.match(a)];case 2:return i=s.sent(),[3,4];case 3:return s.sent(),r.context.logger.error("Error loading background-image "+a),[3,4];case 4:return i&&(o=ec(e,t,[i.width,i.height,i.width/i.height]),y=o[0],T=o[1],S=o[2],N=o[3],j=o[4],x=r.ctx.createPattern(r.resizeImage(i,N,j),"repeat"),r.renderRepeat(y,x,T,S)),[3,6];case 5:kr(n)?(l=ec(e,t,[null,null,null]),y=l[0],T=l[1],S=l[2],N=l[3],j=l[4],c=xr(n.angle,N,j),u=c[0],d=c[1],h=c[2],m=c[3],A=c[4],(g=document.createElement("canvas")).width=N,g.height=j,p=g.getContext("2d"),f=p.createLinearGradient(d,m,h,A),pr(n.stops,u).forEach((function(e){return f.addColorStop(e.stop,sr(e.color))})),p.fillStyle=f,p.fillRect(0,0,N,j),N>0&&j>0&&(x=r.ctx.createPattern(g,"repeat"),r.renderRepeat(y,x,T,S))):Lr(n)&&(v=ec(e,t,[null,null,null]),y=v[0],b=v[1],w=v[2],N=v[3],j=v[4],C=0===n.position.length?[Vn]:n.position,T=qn(C[0],N),S=qn(C[C.length-1],j),_=br(n,T,S,N,j),E=_[0],B=_[1],E>0&&B>0&&(M=r.ctx.createRadialGradient(b+T,w+S,0,b+T,w+S,E),pr(n.stops,2*E).forEach((function(e){return M.addColorStop(e.stop,sr(e.color))})),r.path(y),r.ctx.fillStyle=M,E!==B?(k=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,D=1/(I=B/E),r.ctx.save(),r.ctx.translate(k,L),r.ctx.transform(1,0,0,I,0,0),r.ctx.translate(-k,-L),r.ctx.fillRect(b,D*(w-L)+L,N,j*D),r.ctx.restore()):r.ctx.fill())),s.label=6;case 6:return t--,[2]}}))},r=this,i=0,a=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<a.length?(o=a[i],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,(function(){return s(this,(function(r){return this.path(Vl(n,t)),this.ctx.fillStyle=sr(e),this.ctx.fill(),[2]}))}))},n.prototype.renderDoubleBorder=function(e,t,n,i){return r(this,void 0,void 0,(function(){var r,a;return s(this,(function(s){switch(s.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,i)]:[3,2];case 1:return s.sent(),[2];case 2:return r=Kl(i,n),this.path(r),this.ctx.fillStyle=sr(e),this.ctx.fill(),a=Gl(i,n),this.path(a),this.ctx.fill(),[2]}}))}))},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,o,l,c,u=this;return s(this,(function(s){switch(s.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=mc(sc(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=sr(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){u.ctx.save();var n=_l(e.curves),r=t.inset?0:uc,s=Ul(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(s)):(u.mask(n),u.ctx.clip(),u.path(s)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=sr(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?sr(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()})),s.label=2;case 2:a=0,o=0,l=r,s.label=3;case 3:return o<l.length?0!==(c=l[o]).style&&!rr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,e.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,e.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,e.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,e.curves)];case 10:s.sent(),s.label=11;case 11:a++,s.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},n.prototype.renderDashedDottedBorder=function(e,t,n,i,a){return r(this,void 0,void 0,(function(){var r,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b;return s(this,(function(s){return this.ctx.save(),r=ql(i,n),o=Vl(i,n),2===a&&(this.path(o),this.ctx.clip()),Cl(o[0])?(l=o[0].start.x,c=o[0].start.y):(l=o[0].x,c=o[0].y),Cl(o[1])?(u=o[1].end.x,d=o[1].end.y):(u=o[1].x,d=o[1].y),h=0===n||2===n?Math.abs(l-u):Math.abs(c-d),this.ctx.beginPath(),3===a?this.formatPath(r):this.formatPath(o.slice(0,2)),m=t<3?3*t:2*t,A=t<3?2*t:t,3===a&&(m=t,A=t),g=!0,h<=2*m?g=!1:h<=2*m+A?(m*=p=h/(2*m+A),A*=p):(f=Math.floor((h+A)/(m+A)),x=(h-f*m)/(f-1),A=(v=(h-(f+1)*m)/f)<=0||Math.abs(A-x)<Math.abs(A-v)?x:v),g&&(3===a?this.ctx.setLineDash([0,m+A]):this.ctx.setLineDash([m,A])),3===a?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=sr(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===a&&(Cl(o[0])&&(y=o[3],b=o[0],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(b.start.x,b.start.y)]),this.ctx.stroke()),Cl(o[1])&&(y=o[1],b=o[2],this.ctx.beginPath(),this.formatPath([new wl(y.end.x,y.end.y),new wl(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=zl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},n}(cc),hc=function(e){return e instanceof Za||e instanceof Ja||e instanceof Ya&&e.type!==Wa&&e.type!==qa},mc=function(e,t){switch(e){case 0:return _l(t);case 2:return El(t);default:return Bl(t)}},Ac=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},gc=["-apple-system","system-ui"],pc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===gc.indexOf(e)})):e},fc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return t=wa(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,xc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},n}(cc),xc=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},vc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,i([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),yc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new vc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new ml(this,t)}return e.instanceCount=1,e}(),bc=function(e,t){return void 0===t&&(t={}),wc(e,t)};"undefined"!==typeof window&&hl.setContext(window);var wc=function(e,t){return r(void 0,void 0,void 0,(function(){var r,i,c,u,d,h,m,A,g,p,f,x,v,y,b,w,N,j,C,T,S,_,E,B,M,k,L,I,D,P,F,U,R,O,H,Q,z,V;return s(this,(function(s){switch(s.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(_=t.allowTaint)&&void 0!==_&&_,imageTimeout:null!==(E=t.imageTimeout)&&void 0!==E?E:15e3,proxy:t.proxy,useCORS:null!==(B=t.useCORS)&&void 0!==B&&B},u=n({logging:null===(M=t.logging)||void 0===M||M,cache:t.cache},c),d={windowWidth:null!==(k=t.windowWidth)&&void 0!==k?k:i.innerWidth,windowHeight:null!==(L=t.windowHeight)&&void 0!==L?L:i.innerHeight,scrollX:null!==(I=t.scrollX)&&void 0!==I?I:i.pageXOffset,scrollY:null!==(D=t.scrollY)&&void 0!==D?D:i.pageYOffset},h=new a(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),m=new yc(u,h),A=null!==(P=t.foreignObjectRendering)&&void 0!==P&&P,g={allowTaint:null!==(F=t.allowTaint)&&void 0!==F&&F,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:A,copyStyles:A},m.logger.debug("Starting document clone with size "+h.width+"x"+h.height+" scrolled to "+-h.left+","+-h.top),p=new Wo(m,e,g),(f=p.clonedReferenceElement)?[4,p.toIFrame(r,h)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=s.sent(),v=fo(f)||go(f)?l(f.ownerDocument):o(m,f),y=v.width,b=v.height,w=v.left,N=v.top,j=Nc(m,f,t.backgroundColor),C={canvas:t.canvas,backgroundColor:j,scale:null!==(R=null!==(U=t.scale)&&void 0!==U?U:i.devicePixelRatio)&&void 0!==R?R:1,x:(null!==(O=t.x)&&void 0!==O?O:0)+w,y:(null!==(H=t.y)&&void 0!==H?H:0)+N,width:null!==(Q=t.width)&&void 0!==Q?Q:Math.ceil(y),height:null!==(z=t.height)&&void 0!==z?z:Math.ceil(b)},A?(m.logger.debug("Document cloned, using foreign object rendering"),[4,new fc(m,C).render(f)]):[3,3];case 2:return T=s.sent(),[3,5];case 3:return m.logger.debug("Document cloned, element located at "+w+","+N+" with size "+y+"x"+b+" using computed rendering"),m.logger.debug("Starting DOM parsing"),S=so(m,f),j===S.styles.backgroundColor&&(S.styles.backgroundColor=hr.TRANSPARENT),m.logger.debug("Starting renderer for element at "+C.x+","+C.y+" with size "+C.width+"x"+C.height),[4,new dc(m,C).render(S)];case 4:T=s.sent(),s.label=5;case 5:return(null===(V=t.removeContainer)||void 0===V||V)&&(Wo.destroy(x)||m.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),m.logger.debug("Finished rendering"),[2,T]}}))}))},Nc=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?dr(e,getComputedStyle(r.documentElement).backgroundColor):hr.TRANSPARENT,i=r.body?dr(e,getComputedStyle(r.body).backgroundColor):hr.TRANSPARENT,a="string"===typeof n?dr(e,n):null===n?hr.TRANSPARENT:4294967295;return t===r.documentElement?rr(s)?rr(i)?a:i:s:a};return bc}()},85:(e,t,n)=>{"use strict";var r=n(204),s=n(950),i=n(119);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,m=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),b=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var S=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var E=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function k(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case p:return"Fragment";case x:return"Profiler";case f:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case S:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case b:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:k(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return k(e(t))}catch(n){}}return null}var L=Array.isArray,I=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},F=[],U=-1;function R(e){return{current:e}}function O(e){0>U||(e.current=F[U],F[U]=null,U--)}function H(e,t){U++,F[U]=e.current,e.current=t}var Q=R(null),z=R(null),V=R(null),K=R(null);function G(e,t){switch(H(V,t),H(z,e),H(Q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(Q),H(Q,e)}function q(){O(Q),O(z),O(V)}function W(e){null!==e.memoizedState&&H(K,e);var t=Q.current,n=id(t,e.type);t!==n&&(H(z,e),H(Q,n))}function $(e){z.current===e&&(O(Q),O(z)),K.current===e&&(O(K),Wd._currentValue=P)}var X=Object.prototype.hasOwnProperty,Y=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var me=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ae(e)/ge|0)|0},Ae=Math.log,ge=Math.LN2;var pe=256,fe=4194304;function xe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=xe(r):0!==(a&=o)?s=xe(a):n||0!==(n=o&~e)&&(s=xe(n)):0!==(o=r&~i)?s=xe(o):0!==a?s=xe(a):n||0!==(n=r&~e)&&(s=xe(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function ye(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function be(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=pe;return 0===(4194048&(pe<<=1))&&(pe=256),e}function Ne(){var e=fe;return 0===(62914560&(fe<<=1))&&(fe=4194304),e}function je(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-me(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Se(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-me(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ee(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Be(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Me=Math.random().toString(36).slice(2),ke="__reactFiber$"+Me,Le="__reactProps$"+Me,Ie="__reactContainer$"+Me,De="__reactEvents$"+Me,Pe="__reactListeners$"+Me,Fe="__reactHandles$"+Me,Ue="__reactResources$"+Me,Re="__reactMarker$"+Me;function Oe(e){delete e[ke],delete e[Le],delete e[De],delete e[Pe],delete e[Fe]}function He(e){var t=e[ke];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ie]||n[ke]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=vd(e);null!==e;){if(n=e[ke])return n;e=vd(e)}return t}n=(e=n).parentNode}return null}function Qe(e){if(e=e[ke]||e[Ie]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ve(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Re]=!0}var Ge=new Set,qe={};function We(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(qe[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Xe,Ye,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,X.call(et,s)||!X.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ye=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ye}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var At=/[\n"\\]/g;function gt(e){return e.replace(At,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function pt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?xt(e,a,ct(t)):null!=n?xt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function ft(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function yt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function bt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(L(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&jt(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&jt(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Et(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Bt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,Lt=null;function It(e){var t=Qe(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(pt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Le]||null;if(!s)throw Error(a(90));pt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":yt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&vt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Pt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==kt||null!==Lt)&&(Hc(),kt&&(t=kt,e=Lt,Lt=kt=null,It(t),e)))for(t=0;t<e.length;t++)It(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Le]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Rt=!1;if(Ut)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(Lh){Rt=!1}var Ht=null,Qt=null,zt=null;function Vt(){if(zt)return zt;var e,t,n=Qt,r=n.length,s="value"in Ht?Ht.value:Ht.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return zt=s.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function qt(){return!1}function Wt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Gt:qt,this.isPropagationStopped=qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var $t,Xt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Wt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Wt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?($t=e.screenX-Yt.screenX,Xt=e.screenY-Yt.screenY):Xt=$t=0,Yt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Wt(nn),sn=Wt(h({},nn,{dataTransfer:0})),an=Wt(h({},en,{relatedTarget:0})),on=Wt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Wt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Wt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function An(){return mn}var gn=Wt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),pn=Wt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fn=Wt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),xn=Wt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Wt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=Wt(h({},Jt,{newState:0,oldState:0})),bn=[9,13,27,32],wn=Ut&&"CompositionEvent"in window,Nn=null;Ut&&"documentMode"in document&&(Nn=document.documentMode);var jn=Ut&&"TextEvent"in window&&!Nn,Cn=Ut&&(!wn||Nn&&8<Nn&&11>=Nn),Tn=String.fromCharCode(32),Sn=!1;function _n(e,t){switch(e){case"keyup":return-1!==bn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function En(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Ln(e,t,n,r){kt?Lt?Lt.push(r):Lt=[r]:kt=r,0<(t=Vu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var In=null,Dn=null;function Pn(e){Pu(e,0)}function Fn(e){if(ht(ze(e)))return e}function Un(e,t){if("change"===e)return t}var Rn=!1;if(Ut){var On;if(Ut){var Hn="oninput"in document;if(!Hn){var Qn=document.createElement("div");Qn.setAttribute("oninput","return;"),Hn="function"===typeof Qn.oninput}On=Hn}else On=!1;Rn=On&&(!document.documentMode||9<document.documentMode)}function zn(){In&&(In.detachEvent("onpropertychange",Vn),Dn=In=null)}function Vn(e){if("value"===e.propertyName&&Fn(Dn)){var t=[];Ln(t,Dn,e,Mt(e)),Pt(Pn,t)}}function Kn(e,t,n){"focusin"===e?(zn(),Dn=n,(In=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&zn()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Dn)}function qn(e,t){if("click"===e)return Fn(t)}function Wn(e,t){if("input"===e||"change"===e)return Fn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X.call(t,s)||!$n(e[s],t[s]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ut&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==mt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=Vu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ut&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var mr=hr("animationend"),Ar=hr("animationiteration"),gr=hr("animationstart"),pr=hr("transitionrun"),fr=hr("transitionstart"),xr=hr("transitioncancel"),vr=hr("transitionend"),yr=new Map,br="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){yr.set(e,t),We(t,[e])}br.push("scrollEnd");var Nr=new WeakMap;function jr(e,t){if("object"===typeof e&&null!==e){var n=Nr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Tr=0,Sr=0;function _r(){for(var e=Tr,t=Sr=Tr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&kr(n,s,i)}}function Er(e,t,n,r){Cr[Tr++]=e,Cr[Tr++]=t,Cr[Tr++]=n,Cr[Tr++]=r,Sr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Br(e,t,n,r){return Er(e,t,n,r),Lr(e)}function Mr(e,t){return Er(e,null,null,t),Lr(e)}function kr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-me(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Lr(e){if(50<kc)throw kc=0,Lc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ir={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,n,r){return new Dr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Pr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Rr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Or(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Fr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,Q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case S:return(e=Pr(31,n,t,s)).elementType=S,e.lanes=i,e;case p:return Hr(n.children,s,i,t);case f:o=8,s|=24;break;case x:return(e=Pr(12,n,t,2|s)).elementType=x,e.lanes=i,e;case N:return(e=Pr(13,n,t,s)).elementType=N,e.lanes=i,e;case j:return(e=Pr(19,n,t,s)).elementType=j,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case b:o=10;break e;case y:o=9;break e;case w:o=11;break e;case C:o=14;break e;case T:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Pr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Pr(7,e,r,t)).lanes=n,e}function Qr(e,t,n){return(e=Pr(6,e,null,t)).lanes=n,e}function zr(e,t,n){return(t=Pr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Kr=0,Gr=null,qr=0,Wr=[],$r=0,Xr=null,Yr=1,Jr="";function Zr(e,t){Vr[Kr++]=qr,Vr[Kr++]=Gr,Gr=e,qr=t}function es(e,t,n){Wr[$r++]=Yr,Wr[$r++]=Jr,Wr[$r++]=Xr,Xr=e;var r=Yr;e=Jr;var s=32-me(r)-1;r&=~(1<<s),n+=1;var i=32-me(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Yr=1<<32-me(t)+s|n<<s|r,Jr=i+e}else Yr=1<<i|n<<s|r,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Gr;)Gr=Vr[--Kr],Vr[Kr]=null,qr=Vr[--Kr],Vr[Kr]=null;for(;e===Xr;)Xr=Wr[--$r],Wr[$r]=null,Jr=Wr[--$r],Wr[$r]=null,Yr=Wr[--$r],Wr[$r]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw gs(jr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ke]=e,t[Le]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Iu.length;n++)Fu(Iu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),ft(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),bt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Yu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=fd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,md(e.type)?(e=xd,xd=null,ss=e):ss=n):ss=rs?fd(e.stateNode.nextSibling):null;return!0}function ms(){ss=rs=null,is=!1}function As(){var e=as;return null!==e&&(null===vc?vc=e:vc.push.apply(vc,e),as=null),e}function gs(e){null===as?as=[e]:as.push(e)}var ps=R(null),fs=null,xs=null;function vs(e,t,n){H(ps,t._currentValue),t._currentValue=n}function ys(e){e._currentValue=ps.current,O(ps)}function bs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ws(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),bs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),bs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ns(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;$n(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===K.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Wd):e=[Wd])}s=s.return}null!==e&&ws(t,e,n,r),t.flags|=262144}function js(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){fs=e,xs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ts(e){return _s(fs,e)}function Ss(e,t){return null===fs&&Cs(e),_s(e,t)}function _s(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xs){if(null===e)throw Error(a(308));xs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xs=xs.next=t;return n}var Es="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Bs=r.unstable_scheduleCallback,Ms=r.unstable_NormalPriority,ks={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ls(){return{controller:new Es,data:new Map,refCount:0}}function Is(e){e.refCount--,0===e.refCount&&Bs(Ms,(function(){e.controller.abort()}))}var Ds=null,Ps=0,Fs=0,Us=null;function Rs(){if(0===--Ps&&null!==Ds){null!==Us&&(Us.status="fulfilled");var e=Ds;Ds=null,Fs=0,Us=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Os=I.S;I.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ds){var n=Ds=[];Ps=0,Fs=Eu(),Us={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ps++,t.then(Rs,Rs)}(0,t),null!==Os&&Os(e,t)};var Hs=R(null);function Qs(){var e=Hs.current;return null!==e?e:rc.pooledCache}function zs(e,t){H(Hs,null===t?Hs.current:t.pool)}function Vs(){var e=Qs();return null===e?null:{parent:ks._currentValue,pool:e}}var Ks=Error(a(460)),Gs=Error(a(474)),qs=Error(a(542)),Ws={then:function(){}};function $s(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xs(){}function Ys(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xs,Xs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xs,Xs);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Js=t,Ks}}var Js=null;function Zs(){if(null===Js)throw Error(a(459));var e=Js;return Js=null,e}function ei(e){if(e===Ks||e===qs)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Lr(e),kr(e,null,n),t}return Er(e,r,t,n),Lr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Se(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Us)throw Us}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var m=-536870913&o.lane,A=m!==o.lane;if(A?(ic&m)===m:(r&m)===m){0!==m&&m===Fs&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,p=o;m=t;var f=n;switch(p.tag){case 1:if("function"===typeof(g=p.payload)){d=g.call(f,d,m);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(m="function"===typeof(g=p.payload)?g.call(f,d,m):g)||void 0===m)break e;d=h({},d,m);break e;case 2:ti=!0}}null!==(m=o.callback)&&(e.flags|=64,A&&(e.flags|=8192),null===(A=s.callbacks)?s.callbacks=[m]:A.push(m))}else A={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=A,l=d):u=u.next=A,a|=m;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(A=o).next,A.next=null,s.lastBaseUpdate=A,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var mi=R(null),Ai=R(0);function gi(e,t){H(Ai,e=dc),H(mi,t),dc=e|t.baseLanes}function pi(){H(Ai,dc),H(mi,mi.current)}function fi(){dc=Ai.current,O(mi),O(Ai)}var xi=0,vi=null,yi=null,bi=null,wi=!1,Ni=!1,ji=!1,Ci=0,Ti=0,Si=null,_i=0;function Ei(){throw Error(a(321))}function Bi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Mi(e,t,n,r,s,i){return xi=i,vi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=null===e||null===e.memoizedState?Ka:Ga,ji=!1,i=n(r,s),ji=!1,Ni&&(i=Li(t,n,r,s)),ki(e),i}function ki(e){I.H=Va;var t=null!==yi&&null!==yi.next;if(xi=0,bi=yi=vi=null,wi=!1,Ti=0,Si=null,t)throw Error(a(300));null===e||So||null!==(e=e.dependencies)&&js(e)&&(So=!0)}function Li(e,t,n,r){vi=e;var s=0;do{if(Ni&&(Si=null),Ti=0,Ni=!1,25<=s)throw Error(a(301));if(s+=1,bi=yi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}I.H=qa,i=t(n,r)}while(Ni);return i}function Ii(){var e=I.H,t=e.useState()[0];return t="function"===typeof t.then?Oi(t):t,e=e.useState()[0],(null!==yi?yi.memoizedState:null)!==e&&(vi.flags|=1024),t}function Di(){var e=0!==Ci;return Ci=0,e}function Pi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fi(e){if(wi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}wi=!1}xi=0,bi=yi=vi=null,Ni=!1,Ti=Ci=0,Si=null}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bi?vi.memoizedState=bi=e:bi=bi.next=e,bi}function Ri(){if(null===yi){var e=vi.alternate;e=null!==e?e.memoizedState:null}else e=yi.next;var t=null===bi?vi.memoizedState:bi.next;if(null!==t)bi=t,yi=e;else{if(null===e){if(null===vi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(yi=e).memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},null===bi?vi.memoizedState=bi=e:bi=bi.next=e}return bi}function Oi(e){var t=Ti;return Ti+=1,null===Si&&(Si=[]),e=Ys(Si,e,t),t=vi,null===(null===bi?t.memoizedState:bi.next)&&(t=t.alternate,I.H=null===t||null===t.memoizedState?Ka:Ga),e}function Hi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Oi(e);if(e.$$typeof===b)return Ts(e)}throw Error(a(438,String(e)))}function Qi(e){var t=null,n=vi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=vi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function zi(e,t){return"function"===typeof t?t(e):t}function Vi(e){return Ki(Ri(),yi,e)}function Ki(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(xi&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fs&&(d=!0);else{if((xi&m)===m){u=u.next,m===Fs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,vi.lanes|=m,mc|=m}h=u.action,ji&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,o=i):c=c.next=m,vi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!$n(i,e.memoizedState)&&(So=!0,d&&null!==(n=Us)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Gi(e){var t=Ri(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);$n(i,t.memoizedState)||(So=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function qi(e,t,n){var r=vi,s=Ri(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!$n((yi||s).memoizedState,n);if(o&&(s.memoizedState=n,So=!0),s=s.queue,pa(2048,8,Xi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==bi&&1&bi.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},$i.bind(null,r,s,n,t),null),null===rc)throw Error(a(349));i||0!==(124&xi)||Wi(r,t,n)}return n}function Wi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function $i(e,t,n,r){t.value=n,t.getSnapshot=r,Yi(t)&&Ji(e)}function Xi(e,t,n){return n((function(){Yi(t)&&Ji(e)}))}function Yi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Ji(e){var t=Mr(e,2);null!==t&&Pc(t,e,2)}function Zi(e){var t=Ui();if("function"===typeof e){var n=e;if(e=n(),ji){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Ki(e,yi,"function"===typeof r?r:zi)}function ta(e,t,n,r,s){if(Ha(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==I.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=I.T,a={};I.T=a;try{var o=n(s,r),l=I.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){ia(e,t,c)}finally{I.T=i}}else try{ra(e,t,i=n(s,r))}catch(u){ia(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){sa(e,t,n)}),(function(n){return ia(e,t,n)})):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=vi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=fd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=fd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Ui()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Ua.bind(null,vi,r),r.dispatch=n,r=Zi(!1),i=Oa.bind(null,vi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Ui()).queue=s,n=ta.bind(null,vi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Ri(),yi,e)}function ua(e,t,n){if(t=Ki(e,t,oa)[0],e=Vi(zi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Oi(t)}catch(a){if(a===Ks)throw qs;throw a}else r=t;var s=(t=Ri()).queue,i=s.dispatch;return n!==t.memoizedState&&(vi.flags|=2048,ma(9,{destroy:void 0,resource:void 0},da.bind(null,s,n),null)),[r,i,e]}function da(e,t){e.action=t}function ha(e){var t=Ri(),n=yi;if(null!==n)return ua(t,n,e);Ri(),t=t.memoizedState;var r=(n=Ri()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=vi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return Ri().memoizedState}function ga(e,t,n,r){var s=Ui();r=void 0===r?null:r,vi.flags|=e,s.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function pa(e,t,n,r){var s=Ri();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==yi&&null!==r&&Bi(r,yi.memoizedState.deps)?s.memoizedState=ma(t,i,n,r):(vi.flags|=e,s.memoizedState=ma(1|t,i,n,r))}function fa(e,t){ga(8390656,8,e,t)}function xa(e,t){pa(2048,8,e,t)}function va(e,t){return pa(4,2,e,t)}function ya(e,t){return pa(4,4,e,t)}function ba(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function wa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,pa(4,4,ba.bind(null,t,e),n)}function Na(){}function ja(e,t){var n=Ri();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Bi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t){var n=Ri();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Bi(t,r[1]))return r[0];if(r=e(),ji){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ta(e,t,n){return void 0===n||0!==(1073741824&xi)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),vi.lanes|=e,mc|=e,n)}function Sa(e,t,n,r){return $n(n,t)?n:null!==mi.current?(e=Ta(e,n,r),$n(e,t)||(So=!0),e):0===(42&xi)?(So=!0,e.memoizedState=n):(e=Dc(),vi.lanes|=e,mc|=e,t)}function _a(e,t,n,r,s){var i=D.p;D.p=0!==i&&8>i?i:8;var a=I.T,o={};I.T=o,Oa(e,!1,t,n);try{var l=s(),c=I.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ra(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Ic());else Ra(e,t,r,Ic())}catch(u){Ra(e,t,{then:function(){},status:"rejected",reason:u},Ic())}finally{D.p=i,I.T=a}}function Ea(){}function Ba(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Ma(e).queue;_a(e,s,t,P,null===n?Ea:function(){return ka(e),n(r)})}function Ma(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:P},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ka(e){Ra(e,Ma(e).next.queue,{},Ic())}function La(){return Ts(Wd)}function Ia(){return Ri().memoizedState}function Da(){return Ri().memoizedState}function Pa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ic(),r=ii(t,e=si(n),n);return null!==r&&(Pc(r,t,n),ai(r,t,n)),t={cache:Ls()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Ic();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ha(e)?Qa(t,n):null!==(n=Br(e,t,n,r))&&(Pc(n,e,r),za(n,t,r))}function Ua(e,t,n){Ra(e,t,n,Ic())}function Ra(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ha(e))Qa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,$n(o,a))return Er(e,t,s,0),null===rc&&_r(),!1}catch(l){}if(null!==(n=Br(e,t,s,r)))return Pc(n,e,r),za(n,t,r),!0}return!1}function Oa(e,t,n,r){if(r={lane:2,revertLane:Eu(),action:r,hasEagerState:!1,eagerState:null,next:null},Ha(e)){if(t)throw Error(a(479))}else null!==(t=Br(e,n,r,2))&&Pc(t,e,2)}function Ha(e){var t=e.alternate;return e===vi||null!==t&&t===vi}function Qa(e,t){Ni=wi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function za(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Se(e,n)}}var Va={readContext:Ts,use:Hi,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useLayoutEffect:Ei,useInsertionEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useSyncExternalStore:Ei,useId:Ei,useHostTransitionStatus:Ei,useFormState:Ei,useActionState:Ei,useOptimistic:Ei,useMemoCache:Ei,useCacheRefresh:Ei},Ka={readContext:Ts,use:Hi,useCallback:function(e,t){return Ui().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:fa,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,ba.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Ui();t=void 0===t?null:t;var r=e();if(ji){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ui();if(void 0!==n){var s=n(t);if(ji){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fa.bind(null,vi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ui().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Ua.bind(null,vi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Na,useDeferredValue:function(e,t){return Ta(Ui(),e,t)},useTransition:function(){var e=Zi(!1);return e=_a.bind(null,vi,e.queue,!0,!1),Ui().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=vi,s=Ui();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&ic)||Wi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,fa(Xi.bind(null,r,i,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},$i.bind(null,r,i,n,t),null),n},useId:function(){var e=Ui(),t=rc.identifierPrefix;if(is){var n=Jr;t="\xab"+t+"R"+(n=(Yr&~(1<<32-me(Yr)-1)).toString(32)+n),0<(n=Ci++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=_i++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:La,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Ui();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Oa.bind(null,vi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Qi,useCacheRefresh:function(){return Ui().memoizedState=Pa.bind(null,vi)}},Ga={readContext:Ts,use:Hi,useCallback:ja,useContext:Ts,useEffect:xa,useImperativeHandle:wa,useInsertionEffect:va,useLayoutEffect:ya,useMemo:Ca,useReducer:Vi,useRef:Aa,useState:function(){return Vi(zi)},useDebugValue:Na,useDeferredValue:function(e,t){return Sa(Ri(),yi.memoizedState,e,t)},useTransition:function(){var e=Vi(zi)[0],t=Ri().memoizedState;return["boolean"===typeof e?e:Oi(e),t]},useSyncExternalStore:qi,useId:Ia,useHostTransitionStatus:La,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Ri(),0,e,t)},useMemoCache:Qi,useCacheRefresh:Da},qa={readContext:Ts,use:Hi,useCallback:ja,useContext:Ts,useEffect:xa,useImperativeHandle:wa,useInsertionEffect:va,useLayoutEffect:ya,useMemo:Ca,useReducer:Gi,useRef:Aa,useState:function(){return Gi(zi)},useDebugValue:Na,useDeferredValue:function(e,t){var n=Ri();return null===yi?Ta(n,e,t):Sa(n,yi.memoizedState,e,t)},useTransition:function(){var e=Gi(zi)[0],t=Ri().memoizedState;return["boolean"===typeof e?e:Oi(e),t]},useSyncExternalStore:qi,useId:Ia,useHostTransitionStatus:La,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Ri();return null!==yi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Qi,useCacheRefresh:Da},Wa=null,$a=0;function Xa(e){var t=$a;return $a+=1,null===Wa&&(Wa=[]),Ys(Wa,e,t)}function Ya(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Qr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===p?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&Za(i)===t.type)?(Ya(t=s(t,n.props),n),t.return=e,t):(Ya(t=Or(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case A:return Ya(n=Or(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=zr(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(L(t)||B(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xa(t),n);if(t.$$typeof===b)return h(e,Ss(e,t),n);Ja(e,t)}return null}function m(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case T:return m(e,t,n=(s=n._init)(n._payload),r)}if(L(n)||B(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return m(e,t,Xa(n),r);if(n.$$typeof===b)return m(e,t,Ss(e,n),r);Ja(e,n)}return null}function f(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case A:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case T:return f(e,t,n,r=(0,r._init)(r._payload),s)}if(L(r)||B(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return f(e,t,n,Xa(r),s);if(r.$$typeof===b)return f(e,t,n,Ss(t,r),s);Ja(t,r)}return null}function x(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===p&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case A:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===p){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===T&&Za(v)===c.type){n(l,c.sibling),Ya(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===p?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Ya(d=Or(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=zr(u,l.mode,d)).return=l,l=d}return o(l);case T:return x(l,c,u=(v=u._init)(u._payload),d)}if(L(u))return function(s,a,o,l){for(var c=null,u=null,d=a,A=a=0,g=null;null!==d&&A<o.length;A++){d.index>A?(g=d,d=null):g=d.sibling;var p=m(s,d,o[A],l);if(null===p){null===d&&(d=g);break}e&&d&&null===p.alternate&&t(s,d),a=i(p,a,A),null===u?c=p:u.sibling=p,u=p,d=g}if(A===o.length)return n(s,d),is&&Zr(s,A),c;if(null===d){for(;A<o.length;A++)null!==(d=h(s,o[A],l))&&(a=i(d,a,A),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,A),c}for(d=r(d);A<o.length;A++)null!==(g=f(d,s,A,o[A],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?A:g.key),a=i(g,a,A),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),is&&Zr(s,A),c}(l,c,u,d);if(B(u)){if("function"!==typeof(v=B(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,A=o,g=o=0,p=null,x=l.next();null!==A&&!x.done;g++,x=l.next()){A.index>g?(p=A,A=null):p=A.sibling;var v=m(s,A,x.value,c);if(null===v){null===A&&(A=p);break}e&&A&&null===v.alternate&&t(s,A),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v,A=p}if(x.done)return n(s,A),is&&Zr(s,g),u;if(null===A){for(;!x.done;g++,x=l.next())null!==(x=h(s,x.value,c))&&(o=i(x,o,g),null===d?u=x:d.sibling=x,d=x);return is&&Zr(s,g),u}for(A=r(A);!x.done;g++,x=l.next())null!==(x=f(A,s,g,x.value,c))&&(e&&null!==x.alternate&&A.delete(null===x.key?g:x.key),o=i(x,o,g),null===d?u=x:d.sibling=x,d=x);return e&&A.forEach((function(e){return t(s,e)})),is&&Zr(s,g),u}(l,c,u=v.call(u),d)}if("function"===typeof u.then)return x(l,c,Xa(u),d);if(u.$$typeof===b)return x(l,c,Ss(l,u),d);Ja(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Qr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{$a=0;var s=x(e,t,n,r);return Wa=null,s}catch(a){if(a===Ks||a===qs)throw a;var i=Pr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=R(null),so=null;function io(e){var t=e.alternate;H(co,1&co.current),H(ro,e),null===so&&(null===t||null!==mi.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(H(co,co.current),H(ro,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){H(co,co.current),H(ro,ro.current)}function lo(e){O(ro),so===e&&(so=null),O(co)}var co=R(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||pd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ic(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Pc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ic(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Pc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ic(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Pc(t,e,n),ai(t,e,n))}};function Ao(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(s,i))}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function po(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var fo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function xo(e){fo(e)}function vo(e){console.error(e)}function yo(e){fo(e)}function bo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function wo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function No(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){bo(e,t)},n}function jo(e){return(e=si(e)).tag=3,e}function Co(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){wo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){wo(t,n,r),"function"!==typeof s&&(null===jc?jc=new Set([this]):jc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var To=Error(a(461)),So=!1;function _o(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Eo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Cs(t),r=Mi(e,t,n,a,i,s),o=Di(),null===e||So?(is&&o&&ts(t),t.flags|=1,_o(e,t,r,s),t.child):(Pi(e,t,s),$o(e,t,s))}function Bo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Fr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Or(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Mo(e,t,i,r,s))}if(i=e.child,!Xo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return $o(e,t,s)}return t.flags|=1,(e=Ur(i,r)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(So=!1,t.pendingProps=r=i,!Xo(e,s))return t.lanes=e.lanes,$o(e,t,s);0!==(131072&e.flags)&&(So=!0)}}return Do(e,t,n,r,s)}function ko(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Lo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Lo(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&zs(0,null!==i?i.cachePool:null),null!==i?gi(t,i):pi(),ao(t)}else null!==i?(zs(0,i.cachePool),gi(t,i),oo(),t.memoizedState=null):(null!==e&&zs(0,null),pi(),oo());return _o(e,t,s,n),t.child}function Lo(e,t,n,r){var s=Qs();return s=null===s?null:{parent:ks._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&zs(0,null),pi(),ao(t),null!==e&&Ns(e,t,r,!0),null}function Io(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Do(e,t,n,r,s){return Cs(t),n=Mi(e,t,n,r,void 0,s),r=Di(),null===e||So?(is&&r&&ts(t),t.flags|=1,_o(e,t,n,s),t.child):(Pi(e,t,s),$o(e,t,s))}function Po(e,t,n,r,s,i){return Cs(t),t.updateQueue=null,n=Li(t,r,n,s),ki(e),r=Di(),null===e||So?(is&&r&&ts(t),t.flags|=1,_o(e,t,n,i),t.child):(Pi(e,t,i),$o(e,t,i))}function Fo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var i=Ir,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ts(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=mo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ts(a):Ir,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&mo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=po(n,o);i.props=l;var c=i.context,u=n.contextType;a=Ir,"object"===typeof u&&null!==u&&(a=Ts(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&go(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||Ao(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=po(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Ir,"object"===typeof c&&null!==c&&(l=Ts(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&go(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var m=t.memoizedState;a!==d||h!==m||ti||null!==e&&null!==e.dependencies&&js(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),m=t.memoizedState),(u=ti||Ao(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&js(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Io(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):_o(e,t,n,s),t.memoizedState=i.state,e=t.child):e=$o(e,t,s),e}function Uo(e,t,n,r){return ms(),t.flags|=256,_o(e,t,n,r),t.child}var Ro={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oo(e){return{baseLanes:e,cachePool:Vs()}}function Ho(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function Qo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?io(t):oo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=fd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Pr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return pd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,i?(oo(),c=Vo({mode:"hidden",children:c},i=t.mode),s=Hr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Oo(n),i.childLanes=Ho(e,r,n),t.memoizedState=Ro,s):(io(t),zo(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=Ko(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=s.fallback,c=t.mode,s=Vo({mode:"visible",children:s.children},c),(i=Hr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=Oo(n),s.childLanes=Ho(e,r,n),t.memoizedState=Ro,t=i);else if(io(t),pd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,gs({value:s,source:null,stack:null}),t=Ko(e,t,n)}else if(So||Ns(e,t,n,!1),r=0!==(n&e.childLanes),So||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:_e(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Mr(e,s),Pc(r,e,s),To;"$?"===c.data||qc(),t=Ko(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=fd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Wr[$r++]=Yr,Wr[$r++]=Jr,Wr[$r++]=Xr,Yr=e.id,Jr=e.overflow,Xr=t),(t=zo(t,s.children)).flags|=4096);return t}return i?(oo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Ur(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Ur(u,i):(i=Hr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Oo(n):(null!==(l=c.cachePool)?(u=ks._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Vs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Ho(e,r,n),t.memoizedState=Ro,s):(io(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function zo(e,t){return(t=Vo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vo(e,t){return(e=Pr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ko(e,t,n){return to(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Go(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),bs(e.return,t,n)}function qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Wo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(_o(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Go(e,n,t);else if(19===e.tag)Go(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(H(co,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}qo(t,!0,n,null,i);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!js(e))}function Yo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)So=!0;else{if(!Xo(e,n)&&0===(128&t.flags))return So=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),vs(0,ks,e.memoizedState.cache),ms();break;case 27:case 5:W(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:vs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Qo(e,t,n):(io(t),null!==(e=$o(e,t,n))?e.sibling:null);io(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ns(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Wo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n);case 24:vs(0,ks,e.memoizedState.cache)}return $o(e,t,n)}(e,t,n);So=0!==(131072&e.flags)}else So=!1,is&&0!==(1048576&t.flags)&&es(t,qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===w){t.tag=11,t=Eo(null,t,r,e,n);break e}if(s===C){t.tag=14,t=Bo(null,t,r,e,n);break e}}throw t=k(r)||r,Error(a(306,t,""))}Fr(r)?(e=po(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Do(null,t,r,e,n))}return t;case 0:return Do(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,s=po(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,vs(0,ks,r),r!==i.cache&&ws(t,[ks],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Uo(e,t,r,n);break e}if(r!==s){gs(s=jr(Error(a(424)),t)),t=Uo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=fd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===s){t=$o(e,t,n);break e}_o(e,t,r,n)}t=t.child}return t;case 26:return Io(e,t),null===e?(n=_d(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd(V.current).createElement(n))[ke]=t,r[Le]=e,ed(r,n,e),Ke(r),t.stateNode=r):t.memoizedState=_d(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return W(t),null===e&&is&&(r=t.stateNode=yd(t.type,t.pendingProps,V.current),rs=t,os=!0,s=ss,md(t.type)?(xd=s,ss=fd(r.firstChild)):ss=s),_o(e,t,t.pendingProps.children,n),Io(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Re])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=fd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=fd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),W(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,ad(s,i)?r=null:null!==o&&ad(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Mi(e,t,Ii,null,null,n),Wd._currentValue=s),Io(e,t),_o(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=fd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Qo(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):_o(e,t,r,n),t.child;case 11:return Eo(e,t,t.type,t.pendingProps,n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,vs(0,t.type,r.value),_o(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cs(t),r=r(s=Ts(s)),t.flags|=1,_o(e,t,r,n),t.child;case 14:return Bo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return Wo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ko(e,t,n);case 24:return Cs(t),r=Ts(ks),null===e?(null===(s=Qs())&&(s=rc,i=Ls(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),vs(0,ks,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),vs(0,ks,r)):(r=i.cache,vs(0,ks,r),r!==s.cache&&ws(t,[ks],n,!0))),_o(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Hd(t)){if(null!==(t=ro.current)&&((4194048&ic)===ic?null!==so:(62914560&ic)!==ic&&0===(536870912&ic)||t!==so))throw Js=Ws,Gs;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,fc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ys(ks),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,As())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Jo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Jo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Jo(t),nl(t),t.flags&=-16777217),null;case 27:$(t),n=V.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=Q.current,hs(t)?us(t):(e=yd(s,r,n),t.stateNode=e,Jo(t))}return nl(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=Q.current,hs(t))us(t);else{switch(s=rd(V.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[ke]=t,e[Le]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=V.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[ke]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[ke]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[ke]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=As(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return q(),null===e&&Ou(t.stateNode.containerInfo),nl(t),null;case 10:return ys(t.type),nl(t),null;case 19:if(O(co),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Rr(n,e),n=n.sibling;return H(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>wc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,H(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),fi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&O(Hs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ys(ks),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ys(ks),q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return O(co),null;case 4:return q(),null;case 10:return ys(t.type),null;case 22:case 23:return lo(t),fi(),null!==e&&O(Hs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ys(ks),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:ys(ks),q();break;case 26:case 27:case 5:$(t);break;case 4:q();break;case 13:lo(t);break;case 19:O(co);break;case 10:ys(t.type);break;case 22:case 23:lo(t),fi(),null!==e&&O(Hs);break;case 24:ys(ks)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=po(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(A in n){var h=n[A];if(n.hasOwnProperty(A)&&null!=h)switch(A){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(A)||Ju(e,t,A,null,r,h)}}for(var m in r){var A=r[m];if(h=n[m],r.hasOwnProperty(m)&&(null!=A||null!=h))switch(m){case"type":i=A;break;case"name":s=A;break;case"checked":u=A;break;case"defaultChecked":d=A;break;case"value":o=A;break;case"defaultValue":l=A;break;case"children":case"dangerouslySetInnerHTML":if(null!=A)throw Error(a(137,t));break;default:A!==h&&Ju(e,t,m,A,r,h)}}return void pt(e,o,l,c,u,d,i,s);case"select":for(i in A=o=l=m=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":A=c;default:r.hasOwnProperty(i)||Ju(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Ju(e,t,s,i,r,c)}return t=l,n=o,r=A,void(null!=m?vt(e,!!n,m,!1):!!r!==!!n&&(null!=t?vt(e,!!n,t,!0):vt(e,!!n,n?[]:"",!1)));case"textarea":for(l in A=m=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":m=s;break;case"defaultValue":A=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Ju(e,t,o,s,r,i)}return void yt(e,m,A);case"option":for(var g in n)if(m=n[g],n.hasOwnProperty(g)&&null!=m&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Ju(e,t,g,null,r,m);for(c in r)if(m=r[c],A=n[c],r.hasOwnProperty(c)&&m!==A&&(null!=m||null!=A))if("selected"===c)e.selected=m&&"function"!==typeof m&&"symbol"!==typeof m;else Ju(e,t,c,m,r,A);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)m=n[p],n.hasOwnProperty(p)&&null!=m&&!r.hasOwnProperty(p)&&Ju(e,t,p,null,r,m);for(u in r)if(m=r[u],A=n[u],r.hasOwnProperty(u)&&m!==A&&(null!=m||null!=A))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:Ju(e,t,u,m,r,A)}return;default:if(Tt(t)){for(var f in n)m=n[f],n.hasOwnProperty(f)&&void 0!==m&&!r.hasOwnProperty(f)&&Zu(e,t,f,void 0,r,m);for(d in r)m=r[d],A=n[d],!r.hasOwnProperty(d)||m===A||void 0===m&&void 0===A||Zu(e,t,d,m,r,A);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&null!=m&&!r.hasOwnProperty(x)&&Ju(e,t,x,null,r,m);for(h in r)m=r[h],A=n[h],!r.hasOwnProperty(h)||m===A||null==m&&null==A||Ju(e,t,h,m,r,A)}(r,e.type,n,t),r[Le]=t}catch(s){uu(e,e.return,s)}}function Al(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yu));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function xl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[ke]=e,t[Le]=n}catch(i){uu(e,e.return,i)}}var vl=!1,yl=!1,bl=!1,wl="function"===typeof WeakSet?WeakSet:Set,Nl=null;function jl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var s=po(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&xl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Au.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||vl)){t=null!==t&&null!==t.memoizedState||yl,s=vl;var i=yl;vl=r,(yl=t)&&!i?Rl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),vl=s,yl=i}break;case 30:break;default:Fl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Oe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Sl=!1;function _l(e,t,n){for(n=n.child;null!==n;)El(e,t,n),n=n.sibling}function El(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:yl||dl(n,t),_l(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:yl||dl(n,t);var r=Tl,s=Sl;md(n.type)&&(Tl=n.stateNode,Sl=!1),_l(e,t,n),bd(n.stateNode),Tl=r,Sl=s;break;case 5:yl||dl(n,t);case 6:if(r=Tl,s=Sl,Tl=null,_l(e,t,n),Sl=s,null!==(Tl=r))if(Sl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Tl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Tl&&(Sl?(Ad(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Sh(e)):Ad(Tl,n.stateNode));break;case 4:r=Tl,s=Sl,Tl=n.stateNode.containerInfo,Sl=!0,_l(e,t,n),Tl=r,Sl=s;break;case 0:case 11:case 14:case 15:yl||ol(2,n,t),yl||ol(4,n,t),_l(e,t,n);break;case 1:yl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),_l(e,t,n);break;case 21:_l(e,t,n);break;case 22:yl=(r=yl)||null!==n.memoizedState,_l(e,t,n),yl=r;break;default:_l(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Sh(e)}catch(n){uu(t,t.return,n)}}function Ml(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function kl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Tl=l.stateNode,Sl=!1;break e}break;case 5:Tl=l.stateNode,Sl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Sl=!0;break e}l=l.return}if(null===Tl)throw Error(a(160));El(i,o,s),Tl=null,Sl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Il(t,e),t=t.sibling}var Ll=null;function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kl(t,e),Dl(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:kl(t,e),Dl(e),512&r&&(yl||null===n||dl(n,n.return)),64&r&&vl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Ll;if(kl(t,e),Dl(e),512&r&&(yl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Re]||i[ke]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[ke]=e,Ke(i),r=i;break e;case"link":var o=Rd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Rd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[ke]=e,Ke(i),r=i}e.stateNode=r}else Od(s,e.type,e.stateNode);else e.stateNode=Id(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Od(s,e.type,e.stateNode):Id(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:kl(t,e),Dl(e),512&r&&(yl||null===n||dl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(kl(t,e),Dl(e),512&r&&(yl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{wt(s,"")}catch(A){uu(e,e.return,A)}}4&r&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(bl=!0);break;case 6:if(kl(t,e),Dl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(A){uu(e,e.return,A)}}break;case 3:if(Ud=null,s=Ll,Ll=jd(t.containerInfo),kl(t,e),Ll=s,Dl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Sh(t.containerInfo)}catch(A){uu(e,e.return,A)}bl&&(bl=!1,Pl(e));break;case 4:r=Ll,Ll=jd(e.stateNode.containerInfo),kl(t,e),Dl(e),Ll=r;break;case 12:default:kl(t,e),Dl(e);break;case 13:kl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ml(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=vl,d=yl;if(vl=u||s,yl=d||c,kl(t,e),yl=d,vl=u,Dl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||vl||yl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,m=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(A){uu(c,c.return,A)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(A){uu(c,c.return,A)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Ml(e,n))));break;case 19:kl(t,e),Dl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ml(e,r)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Al(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;fl(e,gl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(wt(i,""),n.flags&=-33),fl(e,gl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;pl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Pl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Pl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Ul(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Ul(t);break;case 27:bd(t.stateNode);case 26:case 5:dl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Rl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Rl(s,i,n),al(4,i);break;case 1:if(Rl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(i),ul(i,i.return);break;case 27:xl(i);case 26:case 5:Rl(s,i,n),n&&null===r&&4&a&&hl(i),ul(i,i.return);break;case 12:Rl(s,i,n);break;case 13:Rl(s,i,n),n&&4&a&&Bl(s,i);break;case 22:null===i.memoizedState&&Rl(s,i,n),ul(i,i.return);break;case 30:break;default:Rl(s,i,n)}t=t.sibling}}function Ol(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Is(n))}function Hl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Is(e))}function Ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)zl(e,t,n,r),t=t.sibling}function zl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ql(e,t,n,r),2048&s&&al(9,t);break;case 1:case 13:default:Ql(e,t,n,r);break;case 3:Ql(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Is(e)));break;case 12:if(2048&s){Ql(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Ql(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Ql(e,t,n,r):Kl(e,t):2&i._visibility?Ql(e,t,n,r):(i._visibility|=2,Vl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&Ol(a,t);break;case 24:Ql(e,t,n,r),2048&s&&Hl(t.alternate,t)}}function Vl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(i,a,o,l,s),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Vl(i,a,o,l,s):Kl(i,a):(u._visibility|=2,Vl(i,a,o,l,s)),s&&2048&c&&Ol(a.alternate,a);break;case 24:Vl(i,a,o,l,s),s&&2048&c&&Hl(a.alternate,a);break;default:Vl(i,a,o,l,s)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Kl(n,r),2048&s&&Ol(r.alternate,r);break;case 24:Kl(n,r),2048&s&&Hl(r.alternate,r);break;default:Kl(n,r)}t=t.sibling}}var Gl=8192;function ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Wl(e),e=e.sibling}function Wl(e){switch(e.tag){case 26:ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,n){if(null===Qd)throw Error(a(475));var r=Qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Ed(n.href),i=e.querySelector(Bd(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Vd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ke(i);i=e.ownerDocument||e,n=Md(n),(s=wd.get(s))&&Pd(n,s),Ke(i=i.createElement("link"));var o=i;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Vd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:ql(e);break;case 3:case 4:var t=Ll;Ll=jd(e.stateNode.containerInfo),ql(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,ql(e),Gl=t):ql(e))}}function $l(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,Zl(r,e)}$l(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Xl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,Zl(r,e)}$l(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Is(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nl=r;else e:for(n=e;null!==Nl;){var s=(r=Nl).sibling,i=r.return;if(Cl(r),r===n){Nl=null;break e}if(null!==s){s.return=i,Nl=s;break e}Nl=i}}}var ec={getCacheForType:function(e){var t=Ts(ks),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,mc=0,Ac=0,gc=0,pc=0,fc=0,xc=null,vc=null,yc=!1,bc=0,wc=1/0,Nc=null,jc=null,Cc=0,Tc=null,Sc=null,_c=0,Ec=0,Bc=null,Mc=null,kc=0,Lc=null;function Ic(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==I.T){return 0!==Fs?Fs:Eu()}return Be()}function Dc(){0===pc&&(pc=0===(536870912&ic)||is?we():536870912);var e=ro.current;return null!==e&&(e.flags|=32),pc}function Pc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(zc(e,0),Oc(e,ic,pc,!1)),Ce(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(Ac|=n),4===hc&&Oc(e,ic,pc,!1)),wu(e))}function Fc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ye(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=Kc(),s=Gc();rc!==e||ic!==t?(Nc=null,wc=te()+500,zc(e,t)):cc=ye(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var i=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,i,1);break;case 2:case 9:if($s(i)){ac=0,oc=null,Jc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),wu(e)},i.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:$s(i)?(ac=0,oc=null,Jc(t)):(ac=0,oc=null,Zc(e,t,i,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||Hd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}ac=0,oc=null,Zc(e,t,i,5);break;case 6:ac=0,oc=null,Zc(e,t,i,6);break;case 8:Qc(),hc=6;break e;default:throw Error(a(462))}}Xc();break}catch(d){Vc(e,d)}return xs=fs=null,I.H=r,I.A=s,nc=n,null!==sc?0:(rc=null,ic=0,_r(),hc)}(e,t):Wc(e,t,!0),i=r;;){if(0===s){cc&&!r&&Oc(e,t,0,!1);break}if(n=e.current.alternate,!i||Rc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(zc(l,o).flags|=256),2!==(o=Wc(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,Ac|=i,s=4;break e}i=vc,vc=s,null!==i&&(null===vc?vc=i:vc.push.apply(vc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){zc(e,0),Oc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Oc(r,t,pc,!lc);break e;case 2:vc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=bc+300-te())){if(Oc(r,t,pc,!lc),0!==ve(r,0,!0))break e;r.timeoutHandle=ld(Uc.bind(null,r,n,vc,Nc,yc,t,pc,Ac,fc,lc,i,2,-0,0),s)}else Uc(r,n,vc,Nc,yc,t,pc,Ac,fc,lc,i,0,-0,0)}break}s=Wc(e,t,!1),i=!1}wu(e)}function Uc(e,t,n,r,s,i,o,l,c,u,d,h,m,A){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Qd={stylesheets:null,count:0,unsuspend:zd},Wl(t),null!==(h=function(){if(null===Qd)throw Error(a(475));var e=Qd;return e.stylesheets&&0===e.count&&Gd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Gd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,o,l,c,d,1,m,A)),void Oc(e,i,o,!u);nu(e,t,i,n,r,s,o,l,c)}function Rc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oc(e,t,n,r){t&=~gc,t&=~Ac,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-me(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Te(e,n,t)}function Hc(){return 0!==(6&nc)||(Nu(0,!1),!1)}function Qc(){if(null!==sc){if(0===ac)var e=sc.return;else xs=fs=null,Fi(e=sc),Wa=null,$a=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function zc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Qc(),rc=e,sc=n=Ur(e.current,null),ic=t,ac=0,oc=null,lc=!1,cc=ye(e,t),uc=!1,fc=pc=gc=Ac=mc=hc=0,vc=xc=null,yc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-me(r),i=1<<s;t|=e[s],r&=~i}return dc=t,_r(),n}function Vc(e,t){vi=null,I.H=Va,t===Ks||t===qs?(t=Zs(),ac=3):t===Gs?(t=Zs(),ac=4):ac=t===To?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(hc=1,bo(e,jr(t,e.current)))}function Kc(){var e=I.H;return I.H=Va,null===e?Va:e}function Gc(){var e=I.A;return I.A=ec,e}function qc(){hc=4,lc||(4194048&ic)!==ic&&null!==ro.current||(cc=!0),0===(134217727&mc)&&0===(134217727&Ac)||null===rc||Oc(rc,ic,pc,!1)}function Wc(e,t,n){var r=nc;nc|=2;var s=Kc(),i=Gc();rc===e&&ic===t||(Nc=null,zc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==sc){var o=sc,l=oc;switch(ac){case 8:Qc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}$c(),a=hc;break}catch(u){Vc(e,u)}return t&&e.shellSuspendCounter++,xs=fs=null,nc=r,I.H=s,I.A=i,null===sc&&(rc=null,ic=0,_r()),a}function $c(){for(;null!==sc;)Yc(sc)}function Xc(){for(;null!==sc&&!Z();)Yc(sc)}function Yc(e){var t=Yo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Po(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Po(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Fi(t);default:il(n,t),t=Yo(n,t=sc=Rr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,r){xs=fs=null,Fi(t),Wa=null,$a=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ns(t,n,s,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?qc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ws?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===Ws?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(a(435,n.tag))}return du(e,r,s),qc(),!1}if(is)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&gs(jr(e=Error(a(422),{cause:r}),n))):(r!==ls&&gs(jr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=jr(r,n),oi(e,s=No(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(a(520),{cause:r});if(i=jr(i,n),null===xc?xc=[i]:xc.push(i),4!==hc&&(hc=2),null===t)return!0;r=jr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=No(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===jc||!jc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Co(s=jo(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,bo(e,jr(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,bo(e,jr(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==Cc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-me(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Sr,o,l,c),e===rc&&(sc=rc=null,ic=0),Sc=t,Tc=e,_c=n,Ec=i,Bc=s,Mc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(ie,(function(){return lu(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=I.T,I.T=null,s=D.p,D.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(p){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var A;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(A=h.firstChild);)m=h,h=A;for(;;){if(h===e)break t;if(m===n&&++u===s&&(l=o),m===i&&++d===r&&(c=o),null!==(A=h.nextSibling))break;m=(h=m).parentNode}h=A}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(i=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var g=po(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(f){uu(n,n.return,f)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{nc=o,D.p=s,I.T=r}}Cc=1,ru(),su(),iu()}}function ru(){if(1===Cc){Cc=0;var e=Tc,t=Sc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=I.T,I.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{Il(t,e);var i=nd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var m=h.getSelection(),A=o.textContent.length,g=Math.min(l.start,A),p=void 0===l.end?g:Math.min(l.end,A);!m.extend&&g>p&&(a=p,p=g,g=a);var f=Jn(o,g),x=Jn(o,p);if(f&&x&&(1!==m.rangeCount||m.anchorNode!==f.node||m.anchorOffset!==f.offset||m.focusNode!==x.node||m.focusOffset!==x.offset)){var v=d.createRange();v.setStart(f.node,f.offset),m.removeAllRanges(),g>p?(m.addRange(v),m.extend(x.node,x.offset)):(v.setEnd(x.node,x.offset),m.addRange(v))}}}}for(d=[],m=o;m=m.parentNode;)1===m.nodeType&&d.push({element:m,left:m.scrollLeft,top:m.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var y=d[o];y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}nh=!!td,nd=td=null}finally{nc=s,D.p=r,I.T=n}}e.current=t,Cc=2}}function su(){if(2===Cc){Cc=0;var e=Tc,t=Sc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=I.T,I.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{jl(e,t.alternate,t)}finally{nc=s,D.p=r,I.T=n}}Cc=3}}function iu(){if(4===Cc||3===Cc){Cc=0,ee();var e=Tc,t=Sc,n=_c,r=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,Sc=Tc=null,au(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(jc=null),Ee(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=I.T,s=D.p,D.p=2,I.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{I.T=t,D.p=s}}0!==(3&_c)&&ou(),wu(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Lc?kc++:(kc=0,Lc=e):kc=0,Nu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Is(t)))}function ou(e){return ru(),su(),iu(),lu()}function lu(){if(5!==Cc)return!1;var e=Tc,t=Ec;Ec=0;var n=Ee(_c),r=I.T,s=D.p;try{D.p=32>n?32:n,I.T=null,n=Bc,Bc=null;var i=Tc,o=_c;if(Cc=0,Sc=Tc=null,_c=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Yl(i.current),zl(i,i.current,o,n),nc=l,Nu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{D.p=s,I.T=r,au(e,t)}}function cu(e,t,n){t=jr(n,t),null!==(e=ii(e,t=No(e.stateNode,t,2),2))&&(Ce(e,2),wu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===jc||!jc.has(r))){e=jr(n,e),null!==(r=ii(t,n=jo(2),2))&&(Co(n,r,t,e),Ce(r,2),wu(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-bc?0===(2&nc)&&zc(e,0):gc|=n,fc===ic&&(fc=0)),wu(e)}function mu(e,t){0===t&&(t=Ne()),null!==(e=Mr(e,t))&&(Ce(e,t),wu(e))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),mu(e,n)}var pu=null,fu=null,xu=!1,vu=!1,yu=!1,bu=0;function wu(e){e!==fu&&null===e.next&&(null===fu?pu=fu=e:fu=fu.next=e),vu=!0,xu||(xu=!0,dd((function(){0!==(6&nc)?Y(re,ju):Cu()})))}function Nu(e,t){if(!yu&&vu){yu=!0;do{for(var n=!1,r=pu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-me(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,_u(r,i))}else i=ic,0===(3&(i=ve(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ye(r,i)||(n=!0,_u(r,i));r=r.next}}while(n);yu=!1}}function ju(){Cu()}function Cu(){vu=xu=!1;var e=0;0!==bu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=bu),bu=0);for(var t=te(),n=null,r=pu;null!==r;){var s=r.next,i=Tu(r,t);0===i?(r.next=null,null===n?pu=s:n.next=s,null===s&&(fu=n)):(n=r,(0!==e||0!==(3&i))&&(vu=!0)),r=s}Nu(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-me(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=be(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=ve(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ye(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ee(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Su.bind(null,e),n=Y(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Su(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=ve(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Su.bind(null,e):null)}function _u(e,t){if(ou())return null;Fc(e,t,!0)}function Eu(){return 0===bu&&(bu=we()),bu}function Bu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Et(""+e)}function Mu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var ku=0;ku<br.length;ku++){var Lu=br[ku];wr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}wr(mr,"onAnimationEnd"),wr(Ar,"onAnimationIteration"),wr(gr,"onAnimationStart"),wr("dblclick","onDoubleClick"),wr("focusin","onFocus"),wr("focusout","onBlur"),wr(pr,"onTransitionRun"),wr(fr,"onTransitionStart"),wr(xr,"onTransitionCancel"),wr(vr,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),We("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),We("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),We("onBeforeInput",["compositionend","keypress","textInput","paste"]),We("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),We("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Iu));function Pu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){fo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){fo(u)}s.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Hu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Hu(n,e,r,t)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function Ou(e){if(!e[Ru]){e[Ru]=!0,Ge.forEach((function(t){"selectionchange"!==t&&(Du.has(t)||Uu(t,!1,e),Uu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ru]||(t[Ru]=!0,Uu("selectionchange",!1,t))}}function Hu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=He(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Pt((function(){var r=i,s=Mt(n),a=[];e:{var o=yr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=fn;break;case mr:case Ar:case gr:c=on;break;case vr:c=xn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=vn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=pn;break;case"toggle":case"beforetoggle":c=yn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),m=d?null!==o?o+"Capture":null:o;d=[];for(var A,g=r;null!==g;){var p=g;if(A=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===A||null===m||null!=(p=Ft(g,m))&&d.push(zu(g,p,A)),h)break;g=g.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Bt||!(u=n.relatedTarget||n.fromElement)||!He(u)&&!u[Ie])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?He(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,p="onMouseLeave",m="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=pn,p="onPointerLeave",m="onPointerEnter",g="pointer"),h=null==c?o:ze(c),A=null==u?o:ze(u),(o=new d(p,g+"leave",c,n,s)).target=h,o.relatedTarget=A,p=null,He(s)===r&&((d=new d(m,g+"enter",u,n,s)).target=A,d.relatedTarget=h,p=d),h=p,c&&u)e:{for(m=u,g=0,A=d=c;A;A=Ku(A))g++;for(A=0,p=m;p;p=Ku(p))A++;for(;0<g-A;)d=Ku(d),g--;for(;0<A-g;)m=Ku(m),A--;for(;g--;){if(d===m||null!==m&&d===m.alternate)break e;d=Ku(d),m=Ku(m)}d=null}else d=null;null!==c&&Gu(a,o,c,d,!1),null!==u&&null!==h&&Gu(a,h,u,d,!0)}if("select"===(c=(o=r?ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var f=Un;else if(kn(o))if(Rn)f=Wn;else{f=Gn;var x=Kn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(f=Un):f=qn;switch(f&&(f=f(e,r))?Ln(a,f,n,s):(x&&x(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),x=r?ze(r):window,e){case"focusin":(kn(x)||"true"===x.contentEditable)&&(rr=x,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var v;if(wn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bn?_n(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Cn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bn&&(v=Vt()):(Qt="value"in(Ht=s)?Ht.value:Ht.textContent,Bn=!0)),0<(x=Vu(r,y)).length&&(y=new cn(y,e,null,n,s),a.push({event:y,listeners:x}),v?y.data=v:null!==(v=En(n))&&(y.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return En(t);case"keypress":return 32!==t.which?null:(Sn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Sn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!wn&&_n(e,t)?(e=Vt(),zt=Qt=Ht=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=Vu(r,"onBeforeInput")).length&&(x=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:x,listeners:y}),x.data=v)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Bu((s[Le]||null).action),a=r.submitter;a&&null!==(t=(t=a[Le]||null)?Bu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==bu){var e=a?Mu(s,a):new FormData(s);Ba(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Mu(s,a):new FormData(s),Ba(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Pu(a,t)}))}function zu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Ft(e,n))&&r.unshift(zu(e,s,i)),null!=(s=Ft(e,t))&&r.push(zu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Ku(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ft(n,i))&&a.unshift(zu(n,c,l)):s||null!=(c=Ft(n,i))&&a.push(zu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var qu=/\r\n?/g,Wu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(qu,"\n").replace(Wu,"")}function Xu(e,t){return t=$u(t),$u(e)===t}function Yu(){}function Ju(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Et(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ju(e,t,"name",s.name,s,null),Ju(e,t,"formEncType",s.formEncType,s,null),Ju(e,t,"formMethod",s.formMethod,s,null),Ju(e,t,"formTarget",s.formTarget,s,null)):(Ju(e,t,"encType",s.encType,s,null),Ju(e,t,"method",s.method,s,null),Ju(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Et(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Et(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=St.get(n)||n,r)}}function Zu(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Le]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,r,o,n,null)}}return i&&Ju(e,t,"srcSet",n.srcSet,n,null),void(s&&Ju(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Ju(e,t,s,d,n,null)}}return ft(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Ju(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?vt(e,!!s,t,!1):null!=n&&vt(e,!!s,n,!0));case"textarea":for(o in Fu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Ju(e,t,o,l,n,null)}return bt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Ju(e,t,c,s,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(s=0;s<Iu.length;s++)Fu(Iu[s],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,u,s,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Ju(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout((function(){throw e}))}function md(e){return"head"===e}function Ad(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&bd(a.documentElement),2&n&&bd(a.body),4&n)for(bd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Re]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void Sh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Sh(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Oe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function pd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function fd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function vd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function yd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function bd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Oe(e)}var wd=new Map,Nd=new Set;function jd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=D.d;D.d={f:function(){var e=Cd.f(),t=Hc();return e||t},r:function(e){var t=Qe(e);null!==t&&5===t.tag&&"form"===t.type?ka(t):Cd.r(e)},D:function(e){Cd.D(e),Sd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Sd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Td;if(r&&e&&t){var s='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+gt(n.imageSizes)+'"]')):s+='[href="'+gt(e)+'"]';var i=s;switch(t){case"style":i=Ed(e);break;case"script":i=kd(e)}wd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Bd(i))||"script"===t&&r.querySelector(Ld(i))||(ed(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=kd(e)}if(!wd.has(i)&&(e=h({rel:"modulepreload",href:e},t),wd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(i)))return}ed(r=n.createElement("link"),"link",e),Ke(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Td;if(n&&e){var r=Ve(n).hoistableScripts,s=kd(e),i=r.get(s);i||((i=n.querySelector(Ld(s)))||(e=h({src:e,async:!0},t),(t=wd.get(s))&&Fd(e,t),Ke(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Cd.S(e,t,n);var r=Td;if(r&&e){var s=Ve(r).hoistableStyles,i=Ed(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Bd(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(i))&&Pd(e,n);var l=a=r.createElement("link");Ke(l),ed(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Dd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){Cd.M(e,t);var n=Td;if(n&&e){var r=Ve(n).hoistableScripts,s=kd(e),i=r.get(s);i||((i=n.querySelector(Ld(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=wd.get(s))&&Fd(e,t),Ke(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Td="undefined"===typeof document?null:document;function Sd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var s=gt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Nd.has(s)||(Nd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),Ke(t),r.head.appendChild(t)))}}function _d(e,t,n,r){var s,i,o,l,c=(c=V.current)?jd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ed(n.href),(r=(n=Ve(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ed(n.href);var u=Ve(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Bd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),ed(i,"link",o),Ke(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=kd(n),(r=(n=Ve(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ed(e){return'href="'+gt(e)+'"'}function Bd(e){return'link[rel="stylesheet"]['+e+"]"}function Md(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function kd(e){return'[src="'+gt(e)+'"]'}function Ld(e){return"script[async]"+e}function Id(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,Ke(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ke(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Dd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Ed(n.href);var i=e.querySelector(Bd(s));if(i)return t.state.loading|=4,t.instance=i,Ke(i),i;r=Md(n),(s=wd.get(s))&&Pd(r,s),Ke(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),ed(i,"link",r),t.state.loading|=4,Dd(i,n.precedence,e),t.instance=i;case"script":return i=kd(n.src),(s=e.querySelector(Ld(i)))?(t.instance=s,Ke(s),s):(r=n,(s=wd.get(i))&&Fd(r=h({},n),s),Ke(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Dd(r,n.precedence,e));return t.instance}function Dd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Pd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Rd(e,t,n){if(null===Ud){var r=new Map,s=Ud=new Map;s.set(n,r)}else(r=(s=Ud).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Re]||i[ke]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function Od(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Hd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Qd=null;function zd(){}function Vd(){if(this.count--,0===this.count)if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Gd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach(qd,e),Kd=null,Vd.call(e))}function qd(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Vd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Wd={$$typeof:b,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function $d(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Xd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new $d(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Pr(3,null,null,t),e.current=i,i.stateNode=e,(t=Ls()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Yd(e){return e?e=Ir:Ir}function Jd(e,t,n,r,s,i){s=Yd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Pc(n,0,t),ai(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Mr(e,67108864);null!==t&&Pc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=I.T;I.T=null;var i=D.p;try{D.p=2,ih(e,t,n,r)}finally{D.p=i,I.T=s}}function sh(e,t,n,r){var s=I.T;I.T=null;var i=D.p;try{D.p=8,ih(e,t,n,r)}finally{D.p=i,I.T=s}}function ih(e,t,n,r){if(nh){var s=ah(r);if(null===s)Qu(e,t,r,oh,n),xh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=vh(dh,e,t,n,r,s),!0;case"dragenter":return hh=vh(hh,e,t,n,r,s),!0;case"mouseover":return mh=vh(mh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ah.set(i,vh(Ah.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gh.set(i,vh(gh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(xh(e,r),4&t&&-1<fh.indexOf(e)){for(;null!==s;){var i=Qe(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=xe(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-me(a);o.entanglements[1]|=l,a&=~l}wu(i),0===(6&nc)&&(wc=te()+500,Nu(0,!1))}}break;case 13:null!==(o=Mr(i,2))&&Pc(o,0,2),Hc(),eh(i,2)}if(null===(i=ah(r))&&Qu(e,t,r,oh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Qu(e,t,r,null,n)}}function ah(e){return lh(e=Mt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=He(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,mh=null,Ah=new Map,gh=new Map,ph=[],fh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":Ah.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function vh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Qe(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function yh(e){var t=He(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ic();e=_e(e);var t=Mr(n,e);null!==t&&Pc(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function bh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Qe(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Bt=r,n.target.dispatchEvent(r),Bt=null,t.shift()}return!0}function wh(e,t,n){bh(e)&&n.delete(t)}function Nh(){uh=!1,null!==dh&&bh(dh)&&(dh=null),null!==hh&&bh(hh)&&(hh=null),null!==mh&&bh(mh)&&(mh=null),Ah.forEach(wh),gh.forEach(wh)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Nh)))}var Ch=null;function Th(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Qe(n);null!==i&&(e.splice(t,3),t-=3,Ba(i,{pending:!0,data:s,method:n.method,action:r},r,s))}})))}function Sh(e){function t(t){return jh(t,e)}null!==dh&&jh(dh,e),null!==hh&&jh(hh,e),null!==mh&&jh(mh,e),Ah.forEach(t),gh.forEach(t);for(var n=0;n<ph.length;n++){var r=ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ph.length&&null===(n=ph[0]).blockedOn;)yh(n),null===n.blockedOn&&ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Le]||null;if("function"===typeof i)a||Th(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Le]||null)o=a.formAction;else if(null!==lh(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Th(n)}}}function _h(e){this._internalRoot=e}function Eh(e){this._internalRoot=e}Eh.prototype.render=_h.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,Ic(),e,t,null,null)},Eh.prototype.unmount=_h.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Hc(),t[Ie]=null}},Eh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Be();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ph.length&&0!==t&&t<ph[n].priority;n++);ph.splice(n,0,e),0===n&&yh(e)}};var Bh=s.version;if("19.1.0"!==Bh)throw Error(a(527,Bh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Mh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var kh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kh.isDisabled&&kh.supportsFiber)try{ue=kh.inject(Mh),de=kh}catch(Ih){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=xo,i=vo,l=yo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,s,i,l,0,null),e[Ie]=t.current,Ou(e),new _h(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=xo,l=vo,c=yo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Yd(null),n=t.current,(s=si(r=_e(r=Ic()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,Ce(t,n),wu(t),e[Ie]=t.current,Ou(e),new Eh(t)},t.version="19.1.0"},119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(863)},170:(e,t,n)=>{"use strict";n.d(t,{cY:()=>A,FA:()=>I,g:()=>L,dM:()=>k,u:()=>o,Uj:()=>a,p9:()=>$,Fy:()=>f,tD:()=>Q,bD:()=>F,hp:()=>H,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>m,mS:()=>l,Ku:()=>X,ZQ:()=>b,sr:()=>C,zJ:()=>g,c1:()=>j,Im:()=>P,lT:()=>S,zW:()=>B,jZ:()=>w,lV:()=>T,nr:()=>_,Ov:()=>E,gE:()=>p,Am:()=>R,I9:()=>O,P1:()=>y,eX:()=>M});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==o||null==l)throw new i;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCcKbIdbew5zpovWUNR2if1wiUkxHQSGeg",REACT_APP_FIREBASE_APP_ID:"1:167900722042:web:bb7c23236705805af5dcc3",REACT_APP_FIREBASE_AUTH_DOMAIN:"thiendianhan-app.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-PG375FB6GX",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"167900722042",REACT_APP_FIREBASE_PROJECT_ID:"thiendianhan-app",REACT_APP_FIREBASE_STORAGE_BUCKET:"thiendianhan-app.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(e){return e.endsWith(".cloudworkstations.dev")}async function p(e){return(await fetch(e,{credentials:"include"})).ok}function f(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(i)),""].join(".")}const x={};let v=!1;function y(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||x[e]===t||x[e]||v)return;function n(e){return`__firebase__banner__${e}`}x[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(x))x[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{v=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function b(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())}function N(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function j(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function S(){const e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!N()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return!N()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function B(){try{return"object"===typeof indexedDB}catch(e){return!1}}function M(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function k(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class L extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(D,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new L(n,i,t)}}const D=/\{\$([^}]+)}/g;function P(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(U(n)&&U(i)){if(!F(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function U(e){return null!==e&&"object"===typeof e}function R(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Q(e,t){const n=new z(e,t);return n.subscribe.bind(n)}class z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function V(){}const K=1e3,G=2,q=144e5,W=.5;function $(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:K)*Math.pow(t,e),r=Math.round(W*n*(Math.random()-.5)*2);return Math.min(q,n+r)}function X(e){return e&&e._delegate?e._delegate:e}},204:(e,t,n)=>{"use strict";e.exports=n(39)},220:(e,t,n)=>{"use strict";n.d(t,{gS:()=>dc,rJ:()=>Yo,kd:()=>uc,doc:()=>Jo,getDoc:()=>ic,GG:()=>oc,aU:()=>sl,GV:()=>xc,AB:()=>Wl,aQ:()=>hc,My:()=>Gl,P:()=>Hl,O5:()=>fc,BN:()=>lc,mZ:()=>cc,_M:()=>zl,wP:()=>vc});var r,s,i=n(493),a=n(253),o=n(624),l=n(170),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new i([0|e],0>e?-1:0)})):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return g(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=o(0),d=o(1),h=o(16777216);function m(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function A(e){return-1==e.h}function g(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function p(e,t){return e.add(g(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function x(e,t){this.g=e,this.h=t}function v(e,t){if(m(t))throw Error("division by zero");if(m(e))return new x(c,c);if(A(e))return t=v(g(e),t),new x(g(t.g),g(t.h));if(A(t))return t=v(e,g(t)),new x(g(t.g),t.h);if(30<e.g.length){if(A(e)||A(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=b(n,1),i=b(r,1);for(r=b(r,2),n=b(n,2);!m(r);){var a=i.add(r);0>=a.l(e)&&(s=s.add(n),i=a),r=b(r,1),n=b(n,1)}return t=p(e,s.j(t)),new x(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(i=l(n)).j(t);A(a)||0<a.l(e);)a=(i=l(n-=r)).j(t);m(i)&&(i=d),s=s.add(i),e=p(e,a)}return new x(s,e)}function y(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function b(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(A(this))return-g(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(m(this))return"0";if(A(this))return"-"+g(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=v(n,t).g,i=((0<(n=p(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(m(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return A(e=p(this,e))?-1:m(e)?0:1},e.abs=function(){return A(this)?g(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(m(this)||m(e))return c;if(A(this))return A(e)?g(this).j(g(e)):g(g(this).j(e));if(A(e))return g(this.j(g(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=o*d,f(n,2*r+2*s),n[2*r+2*s+1]+=a*d,f(n,2*r+2*s+1),n[2*r+2*s+1]+=o*u,f(n,2*r+2*s+1),n[2*r+2*s+2]+=a*u,f(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return v(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return g(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+a),n);8>a?(a=l(Math.pow(n,a)),s=s.j(a).add(l(o))):s=(s=s.j(r)).add(l(o))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,m,A,g,p,f,x,v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},y={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof v&&v];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function w(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function j(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function T(e){return T[" "](e),e}T[" "]=function(){};var S=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function E(e){const t={};for(const n in e)t[n]=e[n];return t}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<B.length;t++)n=B[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function L(e){s.setTimeout((()=>{throw e}),0)}function I(){var e=R;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var D=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new P),(e=>e.reset()));class P{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,R=new class{constructor(){this.h=this.g=null}add(e,t){const n=D.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},O=()=>{const e=s.Promise.resolve(void 0);F=()=>{e.then(H)}};var H=()=>{for(var e;e=I();){try{e.h.call(e.g)}catch(n){L(n)}var t=D;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}U=!1};function Q(){this.s=this.s,this.C=this.C}function z(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},z.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function K(e,t){if(z.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(S){e:{try{T(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:G[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&K.aa.h.call(this)}}b(K,z);var G={2:"touch",3:"pen",4:"mouse"};K.prototype.h=function(){K.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),W=0;function $(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++W,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Y(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}Y.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=Z(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new $(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,s){if(r&&r.once)return se(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);return null}return n=de(n),e&&e[q]?e.K(t,n,a(r)?!!r.capture:!!r,s):re(e,t,n,!1,r,s)}function re(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=ce(e);if(l||(e[ee]=l=new Y(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)V||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=de(n),e&&e[q]?e.L(t,n,a(r)?!!r.capture:!!r,s):re(e,t,n,!0,r,s)}function ie(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=de(n),e&&e[q]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,r,s))&&(X(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,s)),(n=-1<e?t[e]:null)&&ae(n))}function ae(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[q])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):X(e)}}}function oe(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new K(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&ae(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof Y?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){Q.call(this),this.i=new Y(this),this.M=this,this.F=null}function me(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new z(t,e);else if(t instanceof z)t.target=t.target||e;else{var s=t;M(t=new z(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=Ae(a,r,!0,t)&&s}if(s=Ae(a=t.g=e,r,!0,t)&&s,s=Ae(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=Ae(a=t.g=n[i],r,!1,t)&&s}function Ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&J(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ge(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function pe(e){e.g=ge((()=>{e.g=null,e.i&&(e.i=!1,pe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}b(he,Q),he.prototype[q]=!0,he.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class fe extends Q{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:pe(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xe(e){Q.call(this),this.h=e,this.g={}}b(xe,Q);var ve=[];function ye(e){_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ae(e)}),e),e.g={}}xe.prototype.N=function(){xe.aa.N.call(this),ye(this)},xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var be=s.JSON.stringify,we=s.JSON.parse,Ne=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function je(){}function Ce(e){return e.h||(e.h=e.i())}function Te(){}je.prototype.h=null;var Se={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){z.call(this,"d")}function Ee(){z.call(this,"c")}b(_e,z),b(Ee,z);var Be={},Me=null;function ke(){return Me=Me||new he}function Le(e){z.call(this,Be.La,e)}function Ie(e){const t=ke();me(t,new Le(t))}function De(e,t){z.call(this,Be.STAT_EVENT,e),this.stat=t}function Pe(e){const t=ke();me(t,new De(t,e))}function Fe(e,t){z.call(this,Be.Ma,e),this.size=t}function Ue(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Re(){this.g=!0}function Oe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return be(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}Be.La="serverreachability",b(Le,z),Be.STAT_EVENT="statevent",b(De,z),Be.Ma="timingevent",b(Fe,z),Re.prototype.xa=function(){this.g=!1},Re.prototype.info=function(){};var He,Qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ze={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ve(){}function Ke(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}b(Ve,je),Ve.prototype.g=function(){return new XMLHttpRequest},Ve.prototype.i=function(){return{}},He=new Ve;var qe={},We={};function $e(e,t,n){e.L=1,e.v=bt(pt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),Ze(e),e.A=pt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Ge,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new fe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ve[0]=s.toString()),s=ve);for(var i=0;i<s.length;i++){var a=ne(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?E(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ie(),function(e,t,n,r,s,i){e.info((function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ye(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?We:(n=Number(t.substring(n,r)),isNaN(n)?qe:(r+=1)+n>t.length?We:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ue(c(e.ba,e),t)}function tt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||xn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ye(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fn(n),on(n)}An(n),Pe(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ue(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else yn(n,11)}else if((e.K||n.g==e)&&fn(n),!j(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ut(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,yt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=wn(r,r.J?r.ia:null,r.W),a.K){dt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(tt(o),Ze(o)),r.g=a}else mn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||yn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?yn(n,7):an(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ie()}catch(u){}}Ke.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Ke.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Ie(),tt(this);var n=this.g.Z();this.X=n;t:if(Ye(this)){var r=nn(this.g);e="";var i=r.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Pe(12),rt(this),nt(this);break e}Oe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Je(this,o),e==We){4==h&&(this.s=4,Pe(14),n=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(e==qe){this.s=4,Pe(15),Oe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Oe(this.i,this.l,e,null),st(this,e)}if(Ye(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Pe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),gn(d),d.M=!0,Pe(11))}}else Oe(this.i,this.l,o,"[Invalid Chunked Response]"),rt(this),nt(this)}else Oe(this.i,this.l,o,null),st(this,o);4==h&&rt(this),this.o&&!this.J&&(4==h?xn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(j(e[r]))continue;var n=k(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),rt(this),nt(this)}}}catch(h){}},Ke.prototype.cancel=function(){this.J=!0,rt(this)},Ke.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ie(),Pe(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function at(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ot(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return w(e.i)}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}at.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var At=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof gt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,xt(this,e.s),this.l=e.l;var t=e.i,n=new Mt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),vt(this,n),this.m=e.m}else e&&(t=String(e).match(At))?(this.h=!1,ft(this,t[1]||"",!0),this.o=wt(t[2]||""),this.g=wt(t[3]||"",!0),xt(this,t[4]),this.l=wt(t[5]||"",!0),vt(this,t[6]||"",!0),this.m=wt(t[7]||"")):(this.h=!1,this.i=new Mt(null,this.h))}function pt(e){return new gt(e)}function ft(e,t,n){e.j=n?wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function vt(e,t,n){t instanceof Mt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Dt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Nt(t,Et)),e.i=new Mt(t,e.h))}function yt(e,t,n){e.i.set(t,n)}function bt(e){return yt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Nt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,jt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function jt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Nt(t,Tt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Nt(t,Tt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Nt(n,"/"==n.charAt(0)?_t:St,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Nt(n,Bt)),e.join("")};var Ct,Tt=/[#\/\?@]/g,St=/[#\?:]/g,_t=/[#\?]/g,Et=/[#\?@]/g,Bt=/#/g;function Mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lt(e,t){kt(e),t=Pt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return kt(e),t=Pt(e,t),e.g.has(t)}function Dt(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Pt(e,t),w(n)),e.h+=n.length)}function Pt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ft(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ut(){this.g=new Ne}function Rt(e,t,n){const r=n||"";try{mt(e,(function(e,n){let s=e;a(e)&&(s=be(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ot(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ht(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function zt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Vt(e)}function Vt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Kt(e){let t="";return _(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Kt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):yt(e,t,n))}function qt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Mt.prototype).add=function(e,t){kt(this),this.i=null,e=Pt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(Pt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,It(this,e=Pt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},b(Ot,je),Ot.prototype.g=function(){return new Ht(this.l,this.j)},Ot.prototype.i=(Ct={},function(){return Ct}),b(Ht,he),(e=Ht.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Vt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vt(this)),this.g&&(this.readyState=3,Vt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zt(this):Vt(this),3==this.readyState&&Qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,zt(this))},e.Qa=function(e){this.g&&(this.response=e,zt(this))},e.ga=function(){this.g&&zt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ht.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),b(qt,he);var Wt=/^https?$/i,$t=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),Zt(e)}function Yt(e){e.A||(e.A=!0,me(e,"complete"),me(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))ge(e.Ea,0,e);else if(me(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(At)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Wt.test(a?a.toLowerCase():"")}n=i}if(n)me(e,"complete"),me(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Yt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||me(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Re,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new at(e&&e.concurrentRequestLimit),this.Da=new Ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=pt(e.I);if(yt(n,"SID",e.K),yt(n,"RID",t),yt(n,"TYPE","terminate"),dn(e,n),(t=new Ke(e,e.j,t)).L=2,t.v=bt(pt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}bn(e)}function on(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(s.clearTimeout(e.u),e.u=null),fn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!ot(e.h)&&!e.s){e.s=!0;var t=e.Ga;F||O(),U||(F(),U=!0),R.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=pt(e.I);yt(r,"SID",e.K),yt(r,"RID",n),yt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Gt(r,e.m,e.o),n=new Ke(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),$e(n,r,t)}function dn(e,t){e.H&&_(e.H,(function(e,n){yt(t,n,e)})),e.l&&mt({},(function(e,n){yt(t,n,e)}))}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Rt(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;F||O(),U||(F(),U=!0),R.add(t,e),e.v=0}}function An(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ue(c(e.Fa,e),vn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function pn(e){e.g=new Ke(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=pt(e.qa);yt(t,"RID","rpc"),yt(t,"SID",e.K),yt(t,"AID",e.T),yt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&yt(t,"TO",e.ja),yt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Gt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=bt(pt(t)),n.m=null,n.P=!0,Xe(n,e)}function fn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function xn(e,t){var n=null;if(e.g==t){fn(e),gn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;me(r=ke(),new Fe(r,n)),cn(e)}else mn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ue(c(e.Ga,e,t),vn(e,e.B)),e.B++,!0))}(e,t)||2==r&&An(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:yn(e,5);break;case 4:yn(e,10);break;case 3:yn(e,6);break;default:yn(e,2)}}function vn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function yn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new gt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),bt(r),t?function(e,t){const n=new Re;if(s.Image){const r=new Image;r.onload=u(Ft,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ft,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ft,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ft,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Re;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ft(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ft(0,0,!0,t):Ft(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ft(0,0,!1,t)}))}(r.toString(),n)}else Pe(2);e.G=0,e.l&&e.l.sa(t),bn(e),ln(e)}function bn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(N(e.ka,t),N(e.ka,e.i),e.h.i.length=0,w(e.i),e.i.length=0),e.l.ra()}}function wn(e,t,n){var r=n instanceof gt?pt(n):new gt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),xt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new gt(null);r&&ft(a,r),t&&(a.g=t),i&&xt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&yt(r,n,t),yt(r,"VER",e.la),dn(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new qt(new Ot({eb:n})):new qt(e.pa)).Ha(e.J),t}function jn(){}function Cn(){}function Tn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!j(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!j(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function Sn(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){Ee.call(this),this.status=1}function En(e){this.g=e}(e=qt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():He.g(),this.v=this.o?Ce(this.o):Ce(He),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Xt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call($t,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Xt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,me(this,"complete"),me(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),qt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),we(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Pe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=wn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ke(this,this.j,e);let i=this.o;if(this.S&&(i?(i=E(i),M(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),yt(n=pt(this.I),"RID",e),yt(n,"CVER",22),this.D&&yt(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Kt(i)))+"&"+t:this.m&&Gt(n,this.m,i)),ut(this.h,s),this.Ua&&yt(n,"TYPE","init"),this.P?(yt(n,"$req",t),yt(n,"SID","null"),s.T=!0,$e(s,n,null)):$e(s,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||ot(this.h)||un(this))},e.Fa=function(){if(this.u=null,pn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ue(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),on(this),pn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),An(this),Pe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=jn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new Tn(e,t)},b(Tn,he),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){an(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=be(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Tn.aa.N.call(this)},b(Sn,_e),b(_n,Ee),b(En,jn),En.prototype.ua=function(){me(this.g,"a")},En.prototype.ta=function(e){me(this.g,new Sn(e))},En.prototype.sa=function(e){me(this.g,new _n)},En.prototype.ra=function(){me(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,x=y.createWebChannelTransport=function(){return new Cn},f=y.getStatEventTarget=function(){return ke()},p=y.Event=Be,g=y.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,A=y.ErrorCode=Qe,ze.COMPLETE="complete",m=y.EventType=ze,Te.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",he.prototype.listen=he.prototype.K,h=y.WebChannel=Te,y.FetchXmlHttpFactory=Ot,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,d=y.XhrIo=qt}).apply("undefined"!==typeof v?v:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const b="@firebase/firestore",w="4.7.17";class N{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}N.UNAUTHENTICATED=new N(null),N.GOOGLE_CREDENTIALS=new N("google-credentials-uid"),N.FIRST_PARTY=new N("first-party-uid"),N.MOCK_USER=new N("mock-user");let j="11.9.0";const C=new o.Vy("@firebase/firestore");function T(){return C.logLevel}function S(e){if(C.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(B);C.debug(`Firestore (${j}): ${e}`,...s)}}function _(e){if(C.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(B);C.error(`Firestore (${j}): ${e}`,...s)}}function E(e){if(C.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(B);C.warn(`Firestore (${j}): ${e}`,...s)}}function B(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function M(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,k(e,r,n)}function k(e,t,n){let r=`FIRESTORE (${j}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw _(r),new Error(r)}function L(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||k(t,s,r)}function I(e,t){return e}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class F{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(N.UNAUTHENTICATED)))}shutdown(){}}class O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class H{constructor(e){this.t=e,this.currentUser=N.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){L(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new F;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new F,e.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{S("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new F)}}),0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(L("string"==typeof t.accessToken,31837,{l:t}),new U(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return L(null===e||"string"==typeof e,2055,{h:e}),new N(e)}}class Q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=N.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class z{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(N.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class V{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,i.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){L(void 0===this.o,3512);const n=e=>{null!=e.error&&S("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,S("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{S("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new V(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(L("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new V(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function q(){return new TextEncoder}class W{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=G(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function $(e,t){return e<t?-1:e>t?1:0}function X(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return $(r,s);{const i=q(),a=J(i.encode(Y(e,n)),i.encode(Y(t,n)));return 0!==a?a:$(r,s)}}n+=r>65535?2:1}return $(e.length,t.length)}function Y(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function J(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return $(e[n],t[n]);return $(e.length,t.length)}function Z(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const ee=-62135596800,te=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(e){return ne.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*te);return new ne(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ee)throw new P(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/te}_compareTo(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ee;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new ne(0,0))}static max(){return new re(new ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const se="__name__";class ie{constructor(e,t,n){void 0===t?t=0:t>e.length&&M(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&M(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ie.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ie?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ie.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return $(e.length,t.length)}static compareSegments(e,t){const n=ie.isNumericId(e),r=ie.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ie.extractNumericId(e).compare(ie.extractNumericId(t)):X(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ae extends ie{construct(e,t,n){return new ae(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new P(D.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter((e=>e.length>0)))}return new ae(e)}static emptyPath(){return new ae([])}}const oe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class le extends ie{construct(e,t,n){return new le(e,t,n)}static isValidIdentifier(e){return oe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),le.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===se}static keyField(){return new le([se])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new P(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new P(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new P(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new P(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new le(t)}static emptyPath(){return new le([])}}class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ae.fromString(e))}static fromName(e){return new ce(ae.fromString(e).popFirst(5))}static empty(){return new ce(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ae(e.slice()))}}const ue=-1;class de{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}de.UNKNOWN_ID=-1;function he(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=re.fromTimestamp(1e9===r?new ne(n+1,0):new ne(n,r));return new Ae(s,ce.empty(),t)}function me(e){return new Ae(e.readTime,e.key,ue)}class Ae{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ae(re.min(),ce.empty(),ue)}static max(){return new Ae(re.max(),ce.empty(),ue)}}function ge(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ce.comparator(e.documentKey,t.documentKey),0!==n?n:$(e.largestBatchId,t.largestBatchId))}const pe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xe(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==pe)throw e;S("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&M(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(e){return ve.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ve.reject(t)}static resolve(e){return new ve(((t,n)=>{t(e)}))}static reject(e){return new ve(((t,n)=>{n(e)}))}static waitFor(e){return new ve(((t,n)=>{let r=0,s=0,i=!1;e.forEach((e=>{++r,e.next((()=>{++s,i&&s===r&&t()}),(e=>n(e)))})),i=!0,s===r&&t()}))}static or(e){let t=ve.resolve(!1);for(const n of e)t=t.next((e=>e?ve.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ve(((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{i[l]=e,++a,a===s&&n(i)}),(e=>r(e)))}}))}static doWhile(e,t){return new ve(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function ye(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function be(e){return"IndexedDbTransactionError"===e.name}class we{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}we.le=-1;const Ne=-1;function je(e){return null==e}function Ce(e){return 0===e&&1/e==-1/0}function Te(e){return"number"==typeof e&&Number.isInteger(e)&&!Ce(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Se="\x01";function _e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Be(t)),t=Ee(e.get(n),t);return Be(t)}function Ee(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Se:n+="\x01\x11";break;default:n+=t}}return n}function Be(e){return e+Se+"\x01"}const Me="remoteDocuments",ke="owner",Le="mutationQueues",Ie="mutations";const De="documentMutations",Pe="remoteDocumentsV14",Fe="remoteDocumentGlobal",Ue="targets",Re="targetDocuments",Oe="targetGlobal",He="collectionParents",Qe="clientMetadata",ze="bundles",Ve="namedQueries",Ke="indexConfiguration",Ge="indexState",qe="indexEntries",We="documentOverlays",$e="globals",Xe=[Le,Ie,De,Me,Ue,ke,Oe,Re,Qe,Fe,He,ze,Ve],Ye=[Le,Ie,De,Pe,Ue,ke,Oe,Re,Qe,Fe,He,ze,Ve,We],Je=Ye,Ze=[...Je,Ke,Ge,qe];function et(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function nt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rt{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new st(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new st(this.root,e,this.comparator,!1)}getReverseIterator(){return new st(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new st(this.root,e,this.comparator,!0)}}class st{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:it.RED,this.left=null!=r?r:it.EMPTY,this.right=null!=s?s:it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new it(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return it.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw M(43730,{key:this.key,value:this.value});if(this.right.isRed())throw M(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw M(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1,it.EMPTY=new class{constructor(){this.size=0}get key(){throw M(57766)}get value(){throw M(16141)}get color(){throw M(16727)}get left(){throw M(29726)}get right(){throw M(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class at{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ot(this.data.getIterator())}getIteratorFrom(e){return new ot(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof at))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class ot{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class lt{constructor(e){this.fields=e,e.sort(le.comparator)}static empty(){return new lt([])}unionWith(e){let t=new at(le.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new lt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ct extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ct("Invalid base64 string: "+e):e}}(e);return new ut(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const dt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ht(e){if(L(!!e,39018),"string"==typeof e){let t=0;const n=dt.exec(e);if(L(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mt(e.seconds),nanos:mt(e.nanos)}}function mt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function At(e){return"string"==typeof e?ut.fromBase64String(e):ut.fromUint8Array(e)}const gt="server_timestamp",pt="__type__",ft="__previous_value__",xt="__local_write_time__";function vt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[pt])||void 0===n?void 0:n.stringValue)===gt}function yt(e){const t=e.mapValue.fields[ft];return vt(t)?yt(t):t}function bt(e){const t=ht(e.mapValue.fields[xt].timestampValue);return new ne(t.seconds,t.nanos)}class wt{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Nt="(default)";class jt{constructor(e,t){this.projectId=e,this.database=t||Nt}static empty(){return new jt("","")}get isDefaultDatabase(){return this.database===Nt}isEqual(e){return e instanceof jt&&e.projectId===this.projectId&&e.database===this.database}}const Ct="__type__",Tt="__max__",St={mapValue:{fields:{__type__:{stringValue:Tt}}}},_t="__vector__",Et="value";function Bt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vt(e)?4:qt(e)?9007199254740991:Kt(e)?10:11:M(28295,{value:e})}function Mt(e,t){if(e===t)return!0;const n=Bt(e);if(n!==Bt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bt(e).isEqual(bt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ht(e.timestampValue),r=ht(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return At(e.bytesValue).isEqual(At(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mt(e.geoPointValue.latitude)===mt(t.geoPointValue.latitude)&&mt(e.geoPointValue.longitude)===mt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mt(e.integerValue)===mt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mt(e.doubleValue),r=mt(t.doubleValue);return n===r?Ce(n)===Ce(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Mt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(et(n)!==et(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Mt(n[s],r[s])))return!1;return!0}(e,t);default:return M(52216,{left:e})}}function kt(e,t){return void 0!==(e.values||[]).find((e=>Mt(e,t)))}function Lt(e,t){if(e===t)return 0;const n=Bt(e),r=Bt(t);if(n!==r)return $(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mt(e.integerValue||e.doubleValue),r=mt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return It(e.timestampValue,t.timestampValue);case 4:return It(bt(e),bt(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){const n=At(e),r=At(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=$(n[s],r[s]);if(0!==e)return e}return $(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$(mt(e.latitude),mt(t.latitude));return 0!==n?n:$(mt(e.longitude),mt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Dt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Et])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Et])||void 0===r?void 0:r.arrayValue,u=$((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Dt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===St.mapValue&&t===St.mapValue)return 0;if(e===St.mapValue)return 1;if(t===St.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=X(r[a],i[a]);if(0!==e)return e;const t=Lt(n[r[a]],s[i[a]]);if(0!==t)return t}return $(r.length,i.length)}(e.mapValue,t.mapValue);default:throw M(23264,{Pe:n})}}function It(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $(e,t);const n=ht(e),r=ht(t),s=$(n.seconds,r.seconds);return 0!==s?s:$(n.nanos,r.nanos)}function Dt(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Lt(n[s],r[s]);if(e)return e}return $(n.length,r.length)}function Pt(e){return Ft(e)}function Ft(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ht(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return At(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ce.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ft(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Ft(e.fields[s])}`;return n+"}"}(e.mapValue):M(61005,{value:e})}function Ut(e){switch(Bt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yt(e);return t?16+Ut(t):16;case 5:return 2*e.stringValue.length;case 6:return At(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ut(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return tt(e.fields,((e,n)=>{t+=e.length+Ut(n)})),t}(e.mapValue);default:throw M(13486,{value:e})}}function Rt(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ot(e){return!!e&&"integerValue"in e}function Ht(e){return!!e&&"arrayValue"in e}function Qt(e){return!!e&&"nullValue"in e}function zt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vt(e){return!!e&&"mapValue"in e}function Kt(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ct])||void 0===n?void 0:n.stringValue)===_t}function Gt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return tt(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gt(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Tt}class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gt(t)}setAll(e){let t=le.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Gt(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Vt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Vt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){tt(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Wt(Gt(this.value))}}function $t(e){const t=[];return tt(e.fields,((e,n)=>{const r=new le([e]);if(Vt(n)){const e=$t(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new lt(t)}class Xt{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Xt(e,0,re.min(),re.min(),re.min(),Wt.empty(),0)}static newFoundDocument(e,t,n,r){return new Xt(e,1,t,re.min(),n,r,0)}static newNoDocument(e,t){return new Xt(e,2,t,re.min(),re.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new Xt(e,3,t,re.min(),re.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yt{constructor(e,t){this.position=e,this.inclusive=t}}function Jt(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ce.comparator(ce.fromName(a.referenceValue),n.key):Lt(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Zt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Mt(e.position[n],t.position[n]))return!1;return!0}class en{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function tn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nn{}class rn extends nn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hn(e,t,n):"array-contains"===t?new pn(e,n):"in"===t?new fn(e,n):"not-in"===t?new xn(e,n):"array-contains-any"===t?new vn(e,n):new rn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new mn(e,n):new An(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Lt(t,this.value)):null!==t&&Bt(this.value)===Bt(t)&&this.matchesComparison(Lt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return M(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends nn{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new sn(e,t)}matches(e){return an(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function an(e){return"and"===e.op}function on(e){return ln(e)&&an(e)}function ln(e){for(const t of e.filters)if(t instanceof sn)return!1;return!0}function cn(e){if(e instanceof rn)return e.field.canonicalString()+e.op.toString()+Pt(e.value);if(on(e))return e.filters.map((e=>cn(e))).join(",");{const t=e.filters.map((e=>cn(e))).join(",");return`${e.op}(${t})`}}function un(e,t){return e instanceof rn?function(e,t){return t instanceof rn&&e.op===t.op&&e.field.isEqual(t.field)&&Mt(e.value,t.value)}(e,t):e instanceof sn?function(e,t){return t instanceof sn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&un(n,t.filters[r])),!0)}(e,t):void M(19439)}function dn(e){return e instanceof rn?function(e){return`${e.field.canonicalString()} ${e.op} ${Pt(e.value)}`}(e):e instanceof sn?function(e){return e.op.toString()+" {"+e.getFilters().map(dn).join(" ,")+"}"}(e):"Filter"}class hn extends rn{constructor(e,t,n){super(e,t,n),this.key=ce.fromName(n.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class mn extends rn{constructor(e,t){super(e,"in",t),this.keys=gn("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class An extends rn{constructor(e,t){super(e,"not-in",t),this.keys=gn("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ce.fromName(e.referenceValue)))}class pn extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ht(t)&&kt(t.arrayValue,this.value)}}class fn extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kt(this.value.arrayValue,t)}}class xn extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(kt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!kt(this.value.arrayValue,t)}}class vn extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ht(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>kt(this.value.arrayValue,e)))}}class yn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Ie=null}}function bn(e){return new yn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function wn(e){const t=I(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cn(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),je(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Pt(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Pt(e))).join(",")),t.Ie=e}return t.Ie}function Nn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!tn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!un(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zt(e.startAt,t.startAt)&&Zt(e.endAt,t.endAt)}function jn(e){return ce.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Tn(e,t,n,r,s,i,a,o){return new Cn(e,t,n,r,s,i,a,o)}function Sn(e){return new Cn(e)}function _n(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function En(e){return null!==e.collectionGroup}function Bn(e){const t=I(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new at(le.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new en(r,n))})),e.has(le.keyField().canonicalString())||t.Ee.push(new en(le.keyField(),n))}return t.Ee}function Mn(e){const t=I(e);return t.de||(t.de=kn(t,Bn(e))),t.de}function kn(e,t){if("F"===e.limitType)return bn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new en(e.field,t)}));const n=e.endAt?new Yt(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yt(e.startAt.position,e.startAt.inclusive):null;return bn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ln(e,t){const n=e.filters.concat([t]);return new Cn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function In(e,t,n){return new Cn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dn(e,t){return Nn(Mn(e),Mn(t))&&e.limitType===t.limitType}function Pn(e){return`${wn(Mn(e))}|lt:${e.limitType}`}function Fn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>dn(e))).join(", ")}]`),je(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Pt(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Pt(e))).join(",")),`Target(${t})`}(Mn(e))}; limitType=${e.limitType})`}function Un(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ce.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Jt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bn(e),t))&&!(e.endAt&&!function(e,t,n){const r=Jt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bn(e),t))}(e,t)}function Rn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function On(e){return(t,n)=>{let r=!1;for(const s of Bn(e)){const e=Hn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Hn(e,t,n){const r=e.field.isKeyField()?ce.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Lt(r,s):M(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return M(19790,{direction:e.dir})}}class Qn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tt(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return nt(this.inner)}size(){return this.innerSize}}const zn=new rt(ce.comparator);function Vn(){return zn}const Kn=new rt(ce.comparator);function Gn(){let e=Kn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function qn(e){let t=Kn;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Wn(){return Xn()}function $n(){return Xn()}function Xn(){return new Qn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Yn=new rt(ce.comparator),Jn=new at(ce.comparator);function Zn(){let e=Jn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const er=new at($);function tr(){return er}function nr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ce(t)?"-0":t}}function rr(e){return{integerValue:""+e}}function sr(e,t){return Te(t)?rr(t):nr(e,t)}class ir{constructor(){this._=void 0}}function ar(e,t,n){return e instanceof cr?function(e,t){const n={fields:{[pt]:{stringValue:gt},[xt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vt(t)&&(t=yt(t)),t&&(n.fields[ft]=t),{mapValue:n}}(n,t):e instanceof ur?dr(e,t):e instanceof hr?mr(e,t):function(e,t){const n=lr(e,t),r=gr(n)+gr(e.Re);return Ot(n)&&Ot(e.Re)?rr(r):nr(e.serializer,r)}(e,t)}function or(e,t,n){return e instanceof ur?dr(e,t):e instanceof hr?mr(e,t):n}function lr(e,t){return e instanceof Ar?function(e){return Ot(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class cr extends ir{}class ur extends ir{constructor(e){super(),this.elements=e}}function dr(e,t){const n=pr(t);for(const r of e.elements)n.some((e=>Mt(e,r)))||n.push(r);return{arrayValue:{values:n}}}class hr extends ir{constructor(e){super(),this.elements=e}}function mr(e,t){let n=pr(t);for(const r of e.elements)n=n.filter((e=>!Mt(e,r)));return{arrayValue:{values:n}}}class Ar extends ir{constructor(e,t){super(),this.serializer=e,this.Re=t}}function gr(e){return mt(e.integerValue||e.doubleValue)}function pr(e){return Ht(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class fr{constructor(e,t){this.field=e,this.transform=t}}class xr{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class br{}function wr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kr(e.key,vr.none()):new Sr(e.key,e.data,vr.none());{const n=e.data,r=Wt.empty();let s=new at(le.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new _r(e.key,r,new lt(s.toArray()),vr.none())}}function Nr(e,t,n){e instanceof Sr?function(e,t,n){const r=e.value.clone(),s=Br(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _r?function(e,t,n){if(!yr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Br(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Er(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jr(e,t,n,r){return e instanceof Sr?function(e,t,n,r){if(!yr(e.precondition,t))return n;const s=e.value.clone(),i=Mr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof _r?function(e,t,n,r){if(!yr(e.precondition,t))return n;const s=Mr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Er(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return yr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=lr(r.transform,e||null);null!=s&&(null===n&&(n=Wt.empty()),n.set(r.field,s))}return n||null}function Tr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ur&&t instanceof ur||e instanceof hr&&t instanceof hr?Z(e.elements,t.elements,Mt):e instanceof Ar&&t instanceof Ar?Mt(e.Re,t.Re):e instanceof cr&&t instanceof cr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sr extends br{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _r extends br{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Er(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Br(e,t,n){const r=new Map;L(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,or(a,o,n[s]))}return r}function Mr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,ar(e,i,t))}return r}class kr extends br{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lr extends br{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ir{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Nr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$n();return this.mutations.forEach((r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=wr(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(re.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zn())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,((e,t)=>Tr(e,t)))&&Z(this.baseMutations,e.baseMutations,((e,t)=>Tr(e,t)))}}class Dr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){L(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Yn;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Dr(e,t,n,r)}}class Pr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ur,Rr;function Or(e){switch(e){case D.OK:return M(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return M(15467,{code:e})}}function Hr(e){if(void 0===e)return _("GRPC error has no .code"),D.UNKNOWN;switch(e){case Ur.OK:return D.OK;case Ur.CANCELLED:return D.CANCELLED;case Ur.UNKNOWN:return D.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return D.INTERNAL;case Ur.UNAVAILABLE:return D.UNAVAILABLE;case Ur.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ur.NOT_FOUND:return D.NOT_FOUND;case Ur.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ur.ABORTED:return D.ABORTED;case Ur.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ur.DATA_LOSS:return D.DATA_LOSS;default:return M(39323,{code:e})}}(Rr=Ur||(Ur={}))[Rr.OK=0]="OK",Rr[Rr.CANCELLED=1]="CANCELLED",Rr[Rr.UNKNOWN=2]="UNKNOWN",Rr[Rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rr[Rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rr[Rr.NOT_FOUND=5]="NOT_FOUND",Rr[Rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rr[Rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rr[Rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rr[Rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rr[Rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rr[Rr.ABORTED=10]="ABORTED",Rr[Rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rr[Rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rr[Rr.INTERNAL=13]="INTERNAL",Rr[Rr.UNAVAILABLE=14]="UNAVAILABLE",Rr[Rr.DATA_LOSS=15]="DATA_LOSS";let Qr=null;const zr=new r([4294967295,4294967295],0);function Vr(e){const t=q().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function Kr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,s],0),new r([i,a],0)]}class Gr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qr(`Invalid padding: ${t}`);if(n<0)throw new qr(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new qr(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new qr(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=r.fromNumber(this.pe)}we(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(zr)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Vr(e),[n,r]=Kr(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Gr(s,r,t);return n.forEach((e=>i.insert(e))),i}insert(e){if(0===this.pe)return;const t=Vr(e),[n,r]=Kr(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wr{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,$r.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wr(re.min(),r,new rt($),Vn(),Zn())}}class $r{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $r(n,t,Zn(),Zn(),Zn())}}class Xr{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Yr{constructor(e,t){this.targetId=e,this.Ce=t}}class Jr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ut.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Zr{constructor(){this.Fe=0,this.Me=ns(),this.xe=ut.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Zn(),t=Zn(),n=Zn();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:M(38017,{changeType:s})}})),new $r(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=ns()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,L(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class es{constructor(e){this.ze=e,this.je=new Map,this.He=Vn(),this.Je=ts(),this.Ye=ts(),this.Ze=new rt($)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:M(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(jn(s))if(0===n){const e=new ce(s.path);this.tt(t,e,Xt.newNoDocument(e,re.min()))}else L(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Qr||Qr.ht(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=At(n).toUint8Array()}catch(e){if(e instanceof ct)return E("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Gr(i,r,s)}catch(e){return E(e instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&jn(s.target)){const t=new ce(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Xt.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Zn();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Wr(e,t,this.Ze,this.He,n);return this.He=Vn(),this.Je=ts(),this.Ye=ts(),this.Ze=new rt($),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Zr,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new at($),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new at($),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||S("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Zr),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function ts(){return new rt(ce.comparator)}function ns(){return new rt(ce.comparator)}const rs={asc:"ASCENDING",desc:"DESCENDING"},ss={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},is={and:"AND",or:"OR"};class as{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function os(e,t){return e.useProto3Json||je(t)?t:{value:t}}function ls(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function us(e,t){return ls(e,t.toTimestamp())}function ds(e){return L(!!e,49232),re.fromTimestamp(function(e){const t=ht(e);return new ne(t.seconds,t.nanos)}(e))}function hs(e,t){return ms(e,t).canonicalString()}function ms(e,t){const n=function(e){return new ae(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function As(e){const t=ae.fromString(e);return L(Is(t),10190,{key:t.toString()}),t}function gs(e,t){return hs(e.databaseId,t.path)}function ps(e,t){const n=As(t);if(n.get(1)!==e.databaseId.projectId)throw new P(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new P(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ce(ys(n))}function fs(e,t){return hs(e.databaseId,t)}function xs(e){const t=As(e);return 4===t.length?ae.emptyPath():ys(t)}function vs(e){return new ae(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ys(e){return L(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function bs(e,t,n){return{name:gs(e,t),fields:n.value.mapValue.fields}}function ws(e,t){let n;if(t instanceof Sr)n={update:bs(e,t.key,t.value)};else if(t instanceof kr)n={delete:gs(e,t.key)};else if(t instanceof _r)n={update:bs(e,t.key,t.data),updateMask:Ls(t.fieldMask)};else{if(!(t instanceof Lr))return M(16599,{ft:t.type});n={verify:gs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof cr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ur)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ar)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw M(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:us(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:M(27497)}(e,t.precondition)),n}function Ns(e,t){return{documents:[fs(e,t.path)]}}function js(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fs(e,s);const i=function(e){if(0!==e.length)return ks(sn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Bs(e.field),direction:Ss(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=os(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function Cs(e){let t=xs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){L(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ts(e);return t instanceof sn&&on(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new en(Ms(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,je(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Yt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Yt(n,t)}(n.endAt)),Tn(t,s,a,i,o,"F",l,c)}function Ts(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ms(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ms(e.unaryFilter.field);return rn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ms(e.unaryFilter.field);return rn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ms(e.unaryFilter.field);return rn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return M(61313);default:return M(60726)}}(e):void 0!==e.fieldFilter?function(e){return rn.create(Ms(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return M(58110);default:return M(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return sn.create(e.compositeFilter.filters.map((e=>Ts(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return M(1026)}}(e.compositeFilter.op))}(e):M(30097,{filter:e})}function Ss(e){return rs[e]}function _s(e){return ss[e]}function Es(e){return is[e]}function Bs(e){return{fieldPath:e.canonicalString()}}function Ms(e){return le.fromServerFormat(e.fieldPath)}function ks(e){return e instanceof rn?function(e){if("=="===e.op){if(zt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NAN"}};if(Qt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NOT_NAN"}};if(Qt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(e.field),op:_s(e.op),value:e.value}}}(e):e instanceof sn?function(e){const t=e.getFilters().map((e=>ks(e)));return 1===t.length?t[0]:{compositeFilter:{op:Es(e.op),filters:t}}}(e):M(54877,{filter:e})}function Ls(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Is(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ds{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:re.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:re.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ut.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ps{constructor(e){this.wt=e}}function Fs(e){const t=Cs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?In(t,t.limit,"L"):t}class Us{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(mt(e.integerValue));else if("doubleValue"in e){const n=mt(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Ce(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=ht(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(At(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?qt(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Kt(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):M(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=Et,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(mt(a)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),ce.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Us.Wt=new Us;class Rs{constructor(){this.Cn=new Os}addToCollectionParentIndex(e,t){return this.Cn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(Ae.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(Ae.min())}updateCollectionGroup(e,t,n){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class Os{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new at(ae.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new at(ae.comparator)).toArray()}}new Uint8Array(0);const Hs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qs=41943040;class zs{static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(Qs,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class Vs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Vs(0)}static lr(){return new Vs(-1)}}const Ks="LruGarbageCollector",Gs=1048576;function qs(e,t){let[n,r]=e,[s,i]=t;const a=$(n,s);return 0===a?$(r,i):a}class Ws{constructor(e){this.Er=e,this.buffer=new at(qs),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();qs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $s{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){S(Ks,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){be(e)?S(Ks,"Ignoring IndexedDB error during garbage collection: ",e):await xe(e)}await this.mr(3e5)}))}}class Xs{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(we.le);const n=new Ws(t);return this.gr.forEachTarget(e,(e=>n.Rr(e.sequenceNumber))).next((()=>this.gr.yr(e,(e=>n.Rr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Hs)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(S("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hs):this.wr(e,t)))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,i,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(S("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),T()<=o.$b.DEBUG&&S("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-u}ms\n\tDetermined least recently used ${r} in `+(a-i)+"ms\n"+`\tRemoved ${s} targets in `+(l-a)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}function Ys(e,t){return new Xs(e,t)}class Js{constructor(){this.changes=new Qn((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ve.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zs{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ei{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&jr(n.mutation,e,lt.empty(),ne.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zn()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn();const r=Wn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Gn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Wn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zn())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Vn();const i=Xn(),a=Xn();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof _r)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),jr(a.mutation,t,a.mutation.getFieldMask(),ne.now())):i.set(t.key,lt.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>i.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Zs(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Xn();let r=new rt(((e,t)=>e-t)),s=Zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||lt.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Zn()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=$n();l.forEach((e=>{if(!s.has(e)){const r=wr(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ve.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ce.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):En(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ve.resolve(Wn());let a=ue,o=s;return i.next((t=>ve.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?ve.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,Zn()))).next((e=>({batchId:a,changes:qn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((e=>{let t=Gn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Gn();return this.indexManager.getCollectionParents(e,s).next((a=>ve.forEach(a,(a=>{const o=function(e,t){return new Cn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xt.newInvalidDocument(r)))}));let n=Gn();return e.forEach(((e,r)=>{const i=s.get(e);void 0!==i&&jr(i.mutation,r,lt.empty(),ne.now()),Un(t,r)&&(n=n.insert(e,r))})),n}))}}class ti{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ve.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ds(e.createTime)}}(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:Fs(e.bundledQuery),readTime:ds(e.readTime)}}(t)),ve.resolve()}}class ni{constructor(){this.overlays=new rt(ce.comparator),this.Qr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Wn();return ve.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),ve.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Qr.delete(n)),ve.resolve()}getOverlaysForCollection(e,t,n){const r=Wn(),s=t.length+1,i=new ce(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ve.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new rt(((e,t)=>e-t));const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Wn(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Wn(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return ve.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Pr(t,n));let s=this.Qr.get(t);void 0===s&&(s=Zn(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}class ri{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}class si{constructor(){this.$r=new at(ii.Ur),this.Kr=new at(ii.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new ii(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.zr(new ii(e,t))}jr(e,t){e.forEach((e=>this.removeReference(e,t)))}Hr(e){const t=new ce(new ae([])),n=new ii(t,e),r=new ii(t,e+1),s=[];return this.Kr.forEachInRange([n,r],(e=>{this.zr(e),s.push(e.key)})),s}Jr(){this.$r.forEach((e=>this.zr(e)))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ce(new ae([])),n=new ii(t,e),r=new ii(t,e+1);let s=Zn();return this.Kr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new ii(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ii{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ce.comparator(e.key,t.key)||$(e.Zr,t.Zr)}static Wr(e,t){return $(e.Zr,t.Zr)||ce.comparator(e.key,t.key)}}class ai{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new at(ii.Ur)}checkEmpty(e){return ve.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ir(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Xr=this.Xr.add(new ii(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ve.resolve(i)}lookupMutationBatch(e,t){return ve.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return ve.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.mutationQueue.length?Ne:this.nr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ii(t,0),r=new ii(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],(e=>{const t=this.ei(e.Zr);s.push(t)})),ve.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new at($);return t.forEach((e=>{const t=new ii(e,0),r=new ii(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],(e=>{n=n.add(e.Zr)}))})),ve.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ce.isDocumentKey(s)||(s=s.child(""));const i=new ii(new ce(s),0);let a=new at($);return this.Xr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)}),i),ve.resolve(this.ni(a))}ni(e){const t=[];return e.forEach((e=>{const n=this.ei(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){L(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return ve.forEach(t.mutations,(r=>{const s=new ii(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Xr=n}))}sr(e){}containsKey(e,t){const n=new ii(t,0),r=this.Xr.firstAfterOrEqual(n);return ve.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oi{constructor(e){this.ii=e,this.docs=new rt(ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ve.resolve(n?n.document.mutableCopy():Xt.newInvalidDocument(t))}getEntries(e,t){let n=Vn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xt.newInvalidDocument(e))})),ve.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Vn();const i=t.path,a=new ce(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ge(me(a),n)<=0||(r.has(a.key)||Un(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return ve.resolve(s)}getAllFromCollectionGroup(e,t,n,r){M(9500)}si(e,t){return ve.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new li(this)}getSize(e){return ve.resolve(this.size)}}class li extends Js{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)})),ve.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class ci{constructor(e){this.persistence=e,this.oi=new Qn((e=>wn(e)),Nn),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this._i=0,this.ai=new si,this.targetCount=0,this.ui=Vs.cr()}forEachTarget(e,t){return this.oi.forEach(((e,n)=>t(n))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),ve.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Vs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tr(t),ve.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach(((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),ve.waitFor(s).next((()=>r))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return ve.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),ve.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),ve.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return ve.resolve(n)}containsKey(e,t){return ve.resolve(this.ai.containsKey(t))}}class ui{constructor(e,t){this.ci={},this.overlays={},this.li=new we(0),this.hi=!1,this.hi=!0,this.Pi=new ri,this.referenceDelegate=e(this),this.Ti=new ci(this),this.indexManager=new Rs,this.remoteDocumentCache=function(e){return new oi(e)}((e=>this.referenceDelegate.Ii(e))),this.serializer=new Ps(t),this.Ei=new ti(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ni,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new ai(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){S("MemoryPersistence","Starting transaction:",e);const r=new di(this.li.next());return this.referenceDelegate.di(),n(r).next((e=>this.referenceDelegate.Ai(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ri(e,t){return ve.or(Object.values(this.ci).map((n=>()=>n.containsKey(e,t))))}}class di extends fe{constructor(e){super(),this.currentSequenceNumber=e}}class hi{constructor(e){this.persistence=e,this.Vi=new si,this.mi=null}static fi(e){return new hi(e)}get gi(){if(this.mi)return this.mi;throw M(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),ve.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach((e=>this.gi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.gi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.gi,(n=>{const r=ce.fromPath(n);return this.pi(e,r).next((e=>{e||t.removeEntry(r,re.min())}))})).next((()=>(this.mi=null,t.apply(e))))}updateLimboDocument(e,t){return this.pi(e,t).next((e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())}))}Ii(e){return 0}pi(e,t){return ve.or([()=>ve.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class mi{constructor(e,t){this.persistence=e,this.yi=new Qn((e=>_e(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Ys(this,t)}static fi(e,t){return new mi(e,t)}di(){}Ai(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}br(e){let t=0;return this.yr(e,(e=>{t++})).next((()=>t))}yr(e,t){return ve.forEach(this.yi,((n,r)=>this.Dr(e,n,r).next((e=>e?ve.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,(r=>this.Dr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,re.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ve.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ut(e.data.value)),t}Dr(e,t,n){return ve.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return ve.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ai{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Zn(),r=Zn();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ai(e,t.fromCache,n,r)}}class gi{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pi{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=(0,l.nr)()?8:ye((0,l.ZQ)())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.bs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new gi;return this.Ss(e,t,n).next((r=>{if(s.result=r,this.fs)return this.Ds(e,t,n,r.size)}))})).next((()=>s.result))}Ds(e,t,n,r){return n.documentReadCount<this.gs?(T()<=o.$b.DEBUG&&S("QueryEngine","SDK will not create cache indexes for query:",Fn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ve.resolve()):(T()<=o.$b.DEBUG&&S("QueryEngine","Query:",Fn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(T()<=o.$b.DEBUG&&S("QueryEngine","The SDK decides to create cache indexes for query:",Fn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(t))):ve.resolve())}ws(e,t){if(_n(t))return ve.resolve(null);let n=Mn(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=In(t,null,"F"),n=Mn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Zn(...r);return this.ys.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const i=this.vs(t,r);return this.Cs(t,i,s,n.readTime)?this.ws(e,In(t,null,"F")):this.Fs(e,i,t,n)}))))})))))}bs(e,t,n,r){return _n(t)||r.isEqual(re.min())?ve.resolve(null):this.ys.getDocuments(e,n).next((s=>{const i=this.vs(t,s);return this.Cs(t,i,n,r)?ve.resolve(null):(T()<=o.$b.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fn(t)),this.Fs(e,i,t,he(r,ue)).next((e=>e)))}))}vs(e,t){let n=new at(On(e));return t.forEach(((t,r)=>{Un(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return T()<=o.$b.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",Fn(t)),this.ys.getDocumentsMatchingQuery(e,t,Ae.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const fi="LocalStore",xi=3e8;class vi{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new rt($),this.Os=new Qn((e=>wn(e)),Nn),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ei(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.xs)))}}function yi(e,t,n,r){return new vi(e,t,n,r)}async function bi(e,t){const n=I(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],i=[];let a=Zn();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({ks:e,removedBatchIds:s,addedBatchIds:i})))}))}))}function wi(e){const t=I(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ti.getLastRemoteSnapshotVersion(e)))}function Ni(e,t,n){let r=Zn(),s=Zn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Vn();return n.forEach(((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(re.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):S(fi,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),{qs:r,Qs:s}}))}function ji(e,t){const n=I(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Ne),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ci(e,t){const n=I(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ti.getTargetData(e,t).next((s=>s?(r=s,ve.resolve(r)):n.Ti.allocateTargetId(e).next((s=>(r=new Ds(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e}))}async function Ti(e,t,n){const r=I(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!be(e))throw e;S(fi,`Failed to update sequence numbers for target ${t}: ${e}`)}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function Si(e,t,n){const r=I(e);let s=re.min(),i=Zn();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=I(e),s=r.Os.get(n);return void 0!==s?ve.resolve(r.xs.get(s)):r.Ti.getTargetData(t,n)}(r,e,Mn(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next((e=>{i=e}))})).next((()=>r.Ms.getDocumentsMatchingQuery(e,t,n?s:re.min(),n?i:Zn()))).next((e=>(_i(r,Rn(t),e),{documents:e,$s:i})))))}function _i(e,t,n){let r=e.Ns.get(t)||re.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ns.set(t,r)}class Ei{constructor(){this.activeTargetIds=tr()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bi{constructor(){this.xo=new Ei,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Ei,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mi{No(e){}shutdown(){}}const ki="ConnectivityMonitor";class Li{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){S(ki,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){S(ki,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ii=null;function Di(){return null===Ii?Ii=268435456+Math.round(2147483648*Math.random()):Ii++,"0x"+Ii.toString(16)}const Pi="RestConnection",Fi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ui{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${n}/databases/${r}`,this.Go=this.databaseId.database===Nt?`project_id=${n}`:`project_id=${n}&database_id=${r}`}zo(e,t,n,r,s){const i=Di(),a=this.jo(e,t.toUriEncodedString());S(Pi,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,s);const{host:c}=new URL(a),u=(0,l.zJ)(c);return this.Jo(e,a,o,n,u).then((t=>(S(Pi,`Received RPC '${e}' ${i}: `,t),t)),(t=>{throw E(Pi,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t}))}Yo(e,t,n,r,s,i){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+j,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}jo(e,t){const n=Fi[e];return`${this.Ko}/v1/${t}:${n}`}terminate(){}}class Ri{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const Oi="WebChannelConnection";class Hi extends Ui{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Di();return new Promise(((s,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(m.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case A.NO_ERROR:const t=o.getResponseJson();S(Oi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case A.TIMEOUT:S(Oi,`RPC '${e}' ${i} timed out`),a(new P(D.DEADLINE_EXCEEDED,"Request time out"));break;case A.HTTP_ERROR:const n=o.getStatus();if(S(Oi,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(t)>=0?t:D.UNKNOWN}(t.status);a(new P(e,t.message))}else a(new P(D.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new P(D.UNAVAILABLE,"Connection failed."));break;default:M(9055,{h_:e,streamId:i,P_:o.getLastErrorCode(),T_:o.getLastError()})}}finally{S(Oi,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);S(Oi,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)}))}I_(e,t,n){const r=Di(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=x(),a=f(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");S(Oi,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=i.createWebChannel(c,o);this.E_(u);let d=!1,m=!1;const A=new Ri({Zo:t=>{m?S(Oi,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(S(Oi,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),S(Oi,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Xo:()=>u.close()}),v=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return v(u,h.EventType.OPEN,(()=>{m||(S(Oi,`RPC '${e}' stream ${r} transport opened.`),A.__())})),v(u,h.EventType.CLOSE,(()=>{m||(m=!0,S(Oi,`RPC '${e}' stream ${r} transport closed`),A.u_(),this.d_(u))})),v(u,h.EventType.ERROR,(t=>{m||(m=!0,E(Oi,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),A.u_(new P(D.UNAVAILABLE,"The operation could not be completed")))})),v(u,h.EventType.MESSAGE,(t=>{var n;if(!m){const s=t.data[0];L(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){S(Oi,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Ur[e];if(void 0!==t)return Hr(t)}(t),s=a.message;void 0===n&&(n=D.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),m=!0,A.u_(new P(n,s)),u.close()}else S(Oi,`RPC '${e}' stream ${r} received:`,s),A.c_(s)}})),v(a,p.STAT_EVENT,(t=>{t.stat===g.PROXY?S(Oi,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===g.NOPROXY&&S(Oi,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{A.a_()}),0),A}terminate(){this.l_.forEach((e=>e.close())),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter((t=>t===e))}}function Qi(){return"undefined"!=typeof document?document:null}function zi(e){return new as(e,!0)}class Vi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&S("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,(()=>(this.g_=Date.now(),e()))),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const Ki="PersistentStream";class Gi{constructor(e,t,n,r,s,i,a,o){this.xi=e,this.S_=n,this.D_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Vi(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,(()=>this.q_())))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(_(t.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===D.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)}),(t=>{e((()=>{const e=new P(D.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)}))}))}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_((()=>{n((()=>this.listener.e_()))})),this.stream.n_((()=>{n((()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,(()=>(this.N_()&&(this.state=3),Promise.resolve()))),this.listener.n_())))})),this.stream.i_((e=>{n((()=>this.j_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.M_?this.J_(e):this.onNext(e)))}))}B_(){this.state=5,this.x_.y_((async()=>{this.state=0,this.start()}))}j_(e){return S(Ki,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget((()=>this.v_===e?t():(S(Ki,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qi extends Gi{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:M(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(L(void 0===t||"string"==typeof t,58123),ut.fromBase64String(t||"")):(L(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ut.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?D.UNKNOWN:Hr(e.code);return new P(t,e.message||"")}(a);n=new Jr(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ps(e,r.document.name),i=ds(r.document.updateTime),a=r.document.createTime?ds(r.document.createTime):re.min(),o=new Wt({mapValue:{fields:r.document.fields}}),l=Xt.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Xr(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ps(e,r.document),i=r.readTime?ds(r.readTime):re.min(),a=Xt.newNoDocument(s,i),o=r.removedTargetIds||[];n=new Xr([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ps(e,r.document),i=r.removedTargetIds||[];n=new Xr([],i,s,null)}else{if(!("filter"in t))return M(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Fr(r,s),a=e.targetId;n=new Yr(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return re.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?re.min():t.readTime?ds(t.readTime):re.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=vs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=jn(r)?{documents:Ns(e,r)}:{query:js(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=cs(e,t.resumeToken);const r=os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(re.min())>0){n.readTime=ls(e,t.snapshotVersion.toTimestamp());const r=os(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return M(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=vs(this.serializer),t.removeTarget=e,this.Q_(t)}}class Wi extends Gi{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return L(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,L(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){L(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(L(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?ds(e.updateTime):ds(t);return n.isEqual(re.min())&&(n=ds(t)),new xr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ds(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=vs(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ws(this.serializer,e)))};this.Q_(t)}}class $i{}class Xi extends $i{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new P(D.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[i,a]=s;return this.connection.zo(e,ms(t,n),r,i,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(D.UNKNOWN,e.toString())}))}Yo(e,t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[a,o]=i;return this.connection.Yo(e,ms(t,n),r,a,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new P(D.UNKNOWN,e.toString())}))}terminate(){this.sa=!0,this.connection.terminate()}}class Yi{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve()))))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(_(t),this.ua=!1):S("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const Ji="RemoteStore";class Zi{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No((e=>{n.enqueueAndForget((async()=>{la(this)&&(S(Ji,"Restarting streams for network reachability change."),await async function(e){const t=I(e);t.da.add(4),await ta(t),t.Va.set("Unknown"),t.da.delete(4),await ea(t)}(this))}))})),this.Va=new Yi(n,r)}}async function ea(e){if(la(e))for(const t of e.Aa)await t(!0)}async function ta(e){for(const t of e.Aa)await t(!1)}function na(e,t){const n=I(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),oa(n)?aa(n):Sa(n).N_()&&sa(n,t))}function ra(e,t){const n=I(e),r=Sa(n);n.Ea.delete(t),r.N_()&&ia(n,t),0===n.Ea.size&&(r.N_()?r.k_():la(n)&&n.Va.set("Unknown"))}function sa(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(re.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Sa(e).Z_(t)}function ia(e,t){e.ma.Ke(t),Sa(e).X_(t)}function aa(e){e.ma=new es({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Sa(e).start(),e.Va.ca()}function oa(e){return la(e)&&!Sa(e).O_()&&e.Ea.size>0}function la(e){return 0===I(e).da.size}function ca(e){e.ma=void 0}async function ua(e){e.Va.set("Online")}async function da(e){e.Ea.forEach(((t,n)=>{sa(e,t)}))}async function ha(e,t){ca(e),oa(e)?(e.Va.Pa(t),aa(e)):e.Va.set("Unknown")}async function ma(e,t,n){if(e.Va.set("Online"),t instanceof Jr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){S(Ji,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Aa(e,n)}else if(t instanceof Xr?e.ma.Xe(t):t instanceof Yr?e.ma.ot(t):e.ma.nt(t),!n.isEqual(re.min()))try{const t=await wi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ea.get(r);s&&e.Ea.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(ut.EMPTY_BYTE_STRING,r.snapshotVersion)),ia(e,t);const s=new Ds(r.target,t,n,r.sequenceNumber);sa(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){S(Ji,"Failed to raise snapshot:",t),await Aa(e,t)}}async function Aa(e,t,n){if(!be(t))throw t;e.da.add(1),await ta(e),e.Va.set("Offline"),n||(n=()=>wi(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{S(Ji,"Retrying IndexedDB access"),await n(),e.da.delete(1),await ea(e)}))}function ga(e,t){return t().catch((n=>Aa(e,n,t)))}async function pa(e){const t=I(e),n=_a(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:Ne;for(;fa(t);)try{const e=await ji(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,xa(t,e)}catch(e){await Aa(t,e)}va(t)&&ya(t)}function fa(e){return la(e)&&e.Ia.length<10}function xa(e,t){e.Ia.push(t);const n=_a(e);n.N_()&&n.ea&&n.ta(t.mutations)}function va(e){return la(e)&&!_a(e).O_()&&e.Ia.length>0}function ya(e){_a(e).start()}async function ba(e){_a(e).ia()}async function wa(e){const t=_a(e);for(const n of e.Ia)t.ta(n.mutations)}async function Na(e,t,n){const r=e.Ia.shift(),s=Dr.from(r,t,n);await ga(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await pa(e)}async function ja(e,t){t&&_a(e).ea&&await async function(e,t){if(function(e){return Or(e)&&e!==D.ABORTED}(t.code)){const n=e.Ia.shift();_a(e).L_(),await ga(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await pa(e)}}(e,t),va(e)&&ya(e)}async function Ca(e,t){const n=I(e);n.asyncQueue.verifyOperationInProgress(),S(Ji,"RemoteStore received new credentials");const r=la(n);n.da.add(3),await ta(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await ea(n)}async function Ta(e,t){const n=I(e);t?(n.da.delete(2),await ea(n)):t||(n.da.add(2),await ta(n),n.Va.set("Unknown"))}function Sa(e){return e.fa||(e.fa=function(e,t,n){const r=I(e);return r.oa(),new qi(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:ua.bind(null,e),n_:da.bind(null,e),i_:ha.bind(null,e),Y_:ma.bind(null,e)}),e.Aa.push((async t=>{t?(e.fa.L_(),oa(e)?aa(e):e.Va.set("Unknown")):(await e.fa.stop(),ca(e))}))),e.fa}function _a(e){return e.ga||(e.ga=function(e,t,n){const r=I(e);return r.oa(),new Wi(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:ba.bind(null,e),i_:ja.bind(null,e),na:wa.bind(null,e),ra:Na.bind(null,e)}),e.Aa.push((async t=>{t?(e.ga.L_(),await pa(e)):(await e.ga.stop(),e.Ia.length>0&&(S(Ji,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))}))),e.ga}class Ea{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Ea(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ba(e,t){if(_("AsyncQueue",`${t}: ${e}`),be(e))return new P(D.UNAVAILABLE,`${t}: ${e}`);throw e}class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ce.comparator(t.key,n.key):(e,t)=>ce.comparator(e.key,t.key),this.keyedMap=Gn(),this.sortedSet=new rt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ma))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ma;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ka{constructor(){this.pa=new rt(ce.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):M(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal(((t,n)=>{e.push(n)})),e}}class La{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new La(e,t,Ma.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ia{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some((e=>e.va()))}}class Da{constructor(){this.queries=Pa(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=I(e),r=n.queries;n.queries=Pa(),r.forEach(((e,n)=>{for(const r of n.Sa)r.onError(t)}))}(this,new P(D.ABORTED,"Firestore shutting down"))}}function Pa(){return new Qn((e=>Pn(e)),Dn)}async function Fa(e,t){const n=I(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new Ia,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Ba(e,`Initialization of query '${Fn(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&Ha(n)}async function Ua(e,t){const n=I(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ra(e,t){const n=I(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(s)&&(r=!0);t.ba=s}}r&&Ha(n)}function Oa(e,t,n){const r=I(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Ha(e){e.Ca.forEach((e=>{e.next()}))}var Qa,za;(za=Qa||(Qa={})).xa="default",za.Cache="cache";class Va{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new La(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Qa.Cache}}class Ka{constructor(e){this.key=e}}class Ga{constructor(e){this.key=e}}class qa{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Zn(),this.mutatedKeys=Zn(),this.Za=On(e),this.Xa=new Ma(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new ka,r=t?t.Xa:this.Xa;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Un(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),m=!0):this.ru(c,u)||(n.track({type:2,doc:u}),m=!0,(o&&this.Za(u,o)>0||l&&this.Za(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(o||l)&&(a=!0)),m&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Xa:i,nu:n,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const i=e.nu.wa();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc))),this.iu(n),r=null!=r&&r;const a=t&&!r?this.su():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Ja;return this.Ja=o,0!==i.length||l?{snapshot:new La(this.query,e.Xa,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ka,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach((e=>this.Ha=this.Ha.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ha=this.Ha.delete(e))),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Zn(),this.Xa.forEach((e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))}));const t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new Ga(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new Ka(n))})),t}au(e){this.Ha=e.$s,this.Ya=Zn();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return La.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const Wa="SyncEngine";class $a{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Xa{constructor(e){this.key=e,this.cu=!1}}class Ya{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.lu={},this.hu=new Qn((e=>Pn(e)),Dn),this.Pu=new Map,this.Tu=new Set,this.Iu=new rt(ce.comparator),this.Eu=new Map,this.du=new si,this.Au={},this.Ru=new Map,this.Vu=Vs.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function Ja(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=yo(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await eo(r,t,n,!0),s}async function Za(e,t){const n=yo(e);await eo(n,t,!0,!1)}async function eo(e,t,n,r){const s=await Ci(e.localStore,Mn(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await to(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&na(e.remoteStore,s),o}async function to(e,t,n,r,s){e.fu=(t,n,r)=>async function(e,t,n,r){let s=t.view.tu(n);s.Cs&&(s=await Si(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.tu(n,s)})));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Ao(e,t.targetId,o.ou),o.snapshot}(e,t,n,r);const i=await Si(e.localStore,t,!0),a=new qa(t,i.$s),o=a.tu(i.documents),l=$r.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Ao(e,n,c.ou);const u=new $a(t,n,a);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function no(e,t,n){const r=I(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter((e=>!Dn(e,t)))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ti(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ra(r.remoteStore,s.targetId),ho(r,s.targetId)})).catch(xe)):(ho(r,s.targetId),await Ti(r.localStore,s.targetId,!0))}async function ro(e,t){const n=I(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ra(n.remoteStore,r.targetId))}async function so(e,t){const n=I(e);try{const e=await function(e,t){const n=I(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];t.targetChanges.forEach(((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ti.removeMatchingKeys(e,i.removedDocuments,o).next((()=>n.Ti.addMatchingKeys(e,i.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(ut.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=xi||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Ti.updateTargetData(e,c))}));let o=Vn(),l=Zn();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Ni(e,i,t.documentUpdates).next((e=>{o=e.qs,l=e.Qs}))),!r.isEqual(re.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next((t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return ve.waitFor(a).next((()=>i.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.xs=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Eu.get(t);r&&(L(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?L(r.cu,14607):e.removedDocuments.size>0&&(L(r.cu,42227),r.cu=!1))})),await fo(n,e,t)}catch(e){await xe(e)}}function io(e,t,n){const r=I(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach(((n,r)=>{const s=r.view.Fa(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=I(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Sa)s.Fa(t)&&(r=!0)})),r&&Ha(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ao(e,t,n){const r=I(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new rt(ce.comparator);e=e.insert(i,Xt.newNoDocument(i,re.min()));const n=Zn().add(i),s=new Wr(re.min(),new Map,new rt($),e,n);await so(r,s),r.Iu=r.Iu.remove(i),r.Eu.delete(t),po(r)}else await Ti(r.localStore,t,!1).then((()=>ho(r,t,n))).catch(xe)}async function oo(e,t){const n=I(e),r=t.batch.batchId;try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=ve.resolve();return i.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const i=n.docVersions.get(e);L(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);uo(n,r,null),co(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fo(n,e)}catch(e){await xe(e)}}async function lo(e,t,n){const r=I(e);try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(L(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);uo(r,t,n),co(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fo(r,e)}catch(n){await xe(n)}}function co(e,t){(e.Ru.get(t)||[]).forEach((e=>{e.resolve()})),e.Ru.delete(t)}function uo(e,t,n){const r=I(e);let s=r.Au[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Au[r.currentUser.toKey()]=s}}function ho(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach((t=>{e.du.containsKey(t)||mo(e,t)}))}function mo(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(ra(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),po(e))}function Ao(e,t,n){for(const r of n)r instanceof Ka?(e.du.addReference(r.key,t),go(e,r)):r instanceof Ga?(S(Wa,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||mo(e,r.key)):M(19791,{pu:r})}function go(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(S(Wa,"New document in limbo: "+n),e.Tu.add(r),po(e))}function po(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new ce(ae.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Xa(n)),e.Iu=e.Iu.insert(n,r),na(e.remoteStore,new Ds(Mn(Sn(n.path)),r,"TargetPurposeLimboResolution",we.le))}}async function fo(e,t,n){const r=I(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach(((e,o)=>{a.push(r.fu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ai.Rs(o.targetId,e);i.push(t)}})))})),await Promise.all(a),r.lu.Y_(s),await async function(e,t){const n=I(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ve.forEach(t,(t=>ve.forEach(t.ds,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ve.forEach(t.As,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!be(e))throw e;S(fi,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,s)}}}(r.localStore,i))}async function xo(e,t){const n=I(e);if(!n.currentUser.isEqual(t)){S(Wa,"User change. New user:",t.toKey());const e=await bi(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach((e=>{e.forEach((e=>{e.reject(new P(D.CANCELLED,t))}))})),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await fo(n,e.ks)}}function vo(e,t){const n=I(e),r=n.Eu.get(t);if(r&&r.cu)return Zn().add(r.key);{let e=Zn();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}function yo(e){const t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=so.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ao.bind(null,t),t.lu.Y_=Ra.bind(null,t.eventManager),t.lu.gu=Oa.bind(null,t.eventManager),t}function bo(e){const t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oo.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lo.bind(null,t),t}class wo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zi(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return yi(this.persistence,new pi,e.initialUser,this.serializer)}Su(e){return new ui(hi.fi,this.serializer)}bu(e){return new Bi}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wo.provider={build:()=>new wo};class No extends wo{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){L(this.persistence.referenceDelegate instanceof mi,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new $s(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new ui((e=>mi.fi(e,t)),this.serializer)}}class jo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>io(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=xo.bind(null,this.syncEngine),await Ta(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Da}createDatastore(e){const t=zi(e.databaseInfo.databaseId),n=function(e){return new Hi(e)}(e.databaseInfo);return function(e,t,n,r){return new Xi(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Zi(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>io(this.syncEngine,e,0)),Li.C()?new Li:new Mi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Ya(e,t,n,r,s,i);return a&&(o.mu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=I(e);S(Ji,"RemoteStore shutting down."),t.da.add(5),await ta(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jo.provider={build:()=>new jo};class Co{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const To="FirestoreClient";class So{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=N.UNAUTHENTICATED,this.clientId=W.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{S(To,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(S(To,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ba(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _o(e,t){e.asyncQueue.verifyOperationInProgress(),S(To,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await bi(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Eo(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Bo(e);S(To,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Ca(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Ca(t.remoteStore,n))),e._onlineComponents=t}async function Bo(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){S(To,"Using user provided OfflineComponentProvider");try{await _o(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===D.FAILED_PRECONDITION||e.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;E("Error using user provided cache. Falling back to memory cache: "+n),await _o(e,new wo)}}else S(To,"Using default OfflineComponentProvider"),await _o(e,new No(void 0));return e._offlineComponents}async function Mo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(S(To,"Using user provided OnlineComponentProvider"),await Eo(e,e._uninitializedComponentsProvider._online)):(S(To,"Using default OnlineComponentProvider"),await Eo(e,new jo))),e._onlineComponents}function ko(e){return Mo(e).then((e=>e.syncEngine))}async function Lo(e){const t=await Mo(e),n=t.eventManager;return n.onListen=Ja.bind(null,t.syncEngine),n.onUnlisten=no.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Za.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ro.bind(null,t.syncEngine),n}function Io(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new Co({next:o=>{i.xu(),t.enqueueAndForget((()=>Ua(e,a)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new P(D.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new P(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Va(Sn(n.path),i,{includeMetadataChanges:!0,Qa:!0});return Fa(e,a)}(await Lo(e),e.asyncQueue,t,n,r))),r.promise}function Do(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const i=new Co({next:n=>{i.xu(),t.enqueueAndForget((()=>Ua(e,a))),n.fromCache&&"server"===r.source?s.reject(new P(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Va(n,i,{includeMetadataChanges:!0,Qa:!0});return Fa(e,a)}(await Lo(e),e.asyncQueue,t,n,r))),r.promise}function Po(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Fo=new Map;function Uo(e,t,n){if(!n)throw new P(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ro(e){if(!ce.isDocumentKey(e))throw new P(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Oo(e){if(ce.isDocumentKey(e))throw new P(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ho(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":M(12329,{type:typeof e})}function Qo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new P(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ho(e);throw new P(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function zo(e,t){if(t<=0)throw new P(D.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}const Vo="firestore.googleapis.com",Ko=!0;class Go{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new P(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vo,this.ssl=Ko}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Ko;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Qs;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Gs)throw new P(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new P(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Po(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new P(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qo{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Go({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new P(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Go(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new R;switch(e.type){case"firstParty":return new z(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new P(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Fo.get(e);t&&(S("ComponentProvider","Removing Datastore"),Fo.delete(e),t.terminate())}(this),Promise.resolve()}}class Wo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class $o{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $o(this.firestore,e,this._key)}}class Xo extends Wo{constructor(e,t,n){super(e,t,Sn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $o(this.firestore,null,new ce(e))}withConverter(e){return new Xo(this.firestore,e,this._path)}}function Yo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),Uo("collection","path",t),e instanceof qo){const n=ae.fromString(t,...r);return Oo(n),new Xo(e,null,n)}{if(!(e instanceof $o||e instanceof Xo))throw new P(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ae.fromString(t,...r));return Oo(n),new Xo(e.firestore,null,n)}}function Jo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=W.newId()),Uo("doc","path",t),e instanceof qo){const n=ae.fromString(t,...r);return Ro(n),new $o(e,null,new ce(n))}{if(!(e instanceof $o||e instanceof Xo))throw new P(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ae.fromString(t,...r));return Ro(n),new $o(e.firestore,e instanceof Xo?e.converter:null,new ce(n))}}const Zo="AsyncQueue";class el{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Vi(this,"async_queue_retry"),this.rc=()=>{const e=Qi();e&&S(Zo,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=Qi();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Qi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise((()=>{}));const t=new F;return this._c((()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ju.push(e),this.ac())))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!be(e))throw e;S(Zo,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_((()=>this.ac()))}}_c(e){const t=this.sc.then((()=>(this.ec=!0,e().catch((e=>{throw this.Xu=e,this.ec=!1,_("INTERNAL UNHANDLED ERROR: ",tl(e)),e})).then((e=>(this.ec=!1,e))))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=Ea.createAndSchedule(this,e,t,n,(e=>this.uc(e)));return this.Zu.push(r),r}oc(){this.Xu&&M(47125,{cc:tl(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then((()=>{this.Zu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()}))}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function tl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function nl(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rl extends qo{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new el,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new el(e),this._firestoreClient=void 0,await e}}}function sl(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||Nt,s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=Qo(e,qo);const i=(0,l.zJ)(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&((0,l.gE)(`https://${c}`),(0,l.P1)("Firestore",!0)),a.host!==Vo&&a.host!==c&&E("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!(0,l.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=N.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new P(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new N(i)}e._authCredentials=new O(new U(t,n))}}(s,...e)}return s}function il(e){if(e._terminated)throw new P(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||al(e),e._firestoreClient}function al(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new wt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Po(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new So(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(ut.fromBase64String(e))}catch(e){throw new P(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ol(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ll{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new P(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new le(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cl{constructor(e){this._methodName=e}}class ul{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $(this._lat,e._lat)||$(this._long,e._long)}}class dl{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const hl=/^__.*__$/;class ml{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sr(e,this.data,t,this.fieldTransforms)}}class Al{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _r(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M(40011,{Ic:e})}}class pl{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new pl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Ll(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(gl(this.Ic)&&hl.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class fl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||zi(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pl({Ic:e,methodName:t,wc:n,path:le.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(e){const t=e._freezeSettings(),n=zi(e._databaseId);return new fl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vl(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.bc(i.merge||i.mergeFields?2:0,t,n,s);El("Data must be an object, but it was:",a,r);const o=Sl(r,a);let l,c;if(i.merge)l=new lt(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Bl(t,r,n);if(!a.contains(s))throw new P(D.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Il(e,s)||e.push(s)}l=new lt(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new ml(new Wt(o),l,c)}class yl extends cl{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yl}}class bl extends cl{_toFieldTransform(e){return new fr(e.path,new cr)}isEqual(e){return e instanceof bl}}class wl extends cl{constructor(e,t){super(e),this.Dc=t}_toFieldTransform(e){const t=new Ar(e.serializer,sr(e.serializer,this.Dc));return new fr(e.path,t)}isEqual(e){return e instanceof wl&&this.Dc===e.Dc}}function Nl(e,t,n,r){const s=e.bc(1,t,n);El("Data must be an object, but it was:",s,r);const i=[],a=Wt.empty();tt(r,((e,r)=>{const o=kl(t,e,n);r=(0,l.Ku)(r);const c=s.mc(o);if(r instanceof yl)i.push(o);else{const e=Tl(r,c);null!=e&&(i.push(o),a.set(o,e))}}));const o=new lt(i);return new Al(a,o,s.fieldTransforms)}function jl(e,t,n,r,s,i){const a=e.bc(1,t,n),o=[Bl(t,r,n)],c=[s];if(i.length%2!=0)throw new P(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<i.length;l+=2)o.push(Bl(t,i[l])),c.push(i[l+1]);const u=[],d=Wt.empty();for(let m=o.length-1;m>=0;--m)if(!Il(u,o[m])){const e=o[m];let t=c[m];t=(0,l.Ku)(t);const n=a.mc(e);if(t instanceof yl)u.push(e);else{const r=Tl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new lt(u);return new Al(d,h,a.fieldTransforms)}function Cl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tl(n,e.bc(r?4:3,t))}function Tl(e,t){if(_l(e=(0,l.Ku)(e)))return El("Unsupported field value:",t,e),Sl(e,t);if(e instanceof cl)return function(e,t){if(!gl(t.Ic))throw t.gc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.gc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Tl(s,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ne.fromDate(e);return{timestampValue:ls(t.serializer,n)}}if(e instanceof ne){const n=new ne(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ls(t.serializer,n)}}if(e instanceof ul)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ol)return{bytesValue:cs(t.serializer,e._byteString)};if(e instanceof $o){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:hs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof dl)return function(e,t){return{mapValue:{fields:{[Ct]:{stringValue:_t},[Et]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return nr(t.serializer,e)}))}}}}}}(e,t);throw t.gc(`Unsupported field value: ${Ho(e)}`)}(e,t)}function Sl(e,t){const n={};return nt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tt(e,((e,r)=>{const s=Tl(r,t.Ac(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function _l(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ne||e instanceof ul||e instanceof ol||e instanceof $o||e instanceof cl||e instanceof dl)}function El(e,t,n){if(!_l(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ho(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function Bl(e,t,n){if((t=(0,l.Ku)(t))instanceof ll)return t._internalPath;if("string"==typeof t)return kl(e,t);throw Ll("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ml=new RegExp("[~\\*/\\[\\]]");function kl(e,t,n){if(t.search(Ml)>=0)throw Ll(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ll(...t.split("."))._internalPath}catch(r){throw Ll(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ll(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new P(D.INVALID_ARGUMENT,o+e+l)}function Il(e,t){return e.some((e=>e.isEqual(t)))}class Dl{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $o(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Pl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fl("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Pl extends Dl{data(){return super.data()}}function Fl(e,t){return"string"==typeof t?kl(e,t):t instanceof ll?t._internalPath:t._delegate._internalPath}function Ul(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new P(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rl{}class Ol extends Rl{}function Hl(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Rl&&n.push(t),n=n.concat(s),function(e){const t=e.filter((e=>e instanceof Vl)).length,n=e.filter((e=>e instanceof Ql)).length;if(t>1||t>0&&n>0)throw new P(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Ql extends Ol{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ql(e,t,n)}_apply(e){const t=this._parse(e);return Yl(e._query,t),new Wo(e.firestore,e.converter,Ln(e._query,t))}_parse(e){const t=xl(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new P(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Xl(a,i);const t=[];for(const n of a)t.push($l(r,e,n));o={arrayValue:{values:t}}}else o=$l(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Xl(a,i),o=Cl(n,t,a,"in"===i||"not-in"===i);return rn.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function zl(e,t,n){const r=t,s=Fl("where",e);return Ql._create(s,r,n)}class Vl extends Rl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vl(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Yl(n,s),n=Ln(n,s)}(e._query,t),new Wo(e.firestore,e.converter,Ln(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Kl extends Ol{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Kl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new P(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new P(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new en(t,n)}(e._query,this._field,this._direction);return new Wo(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Cn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Gl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fl("orderBy",e);return Kl._create(n,t)}class ql extends Ol{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ql(e,t,n)}_apply(e){return new Wo(e.firestore,e.converter,In(e._query,this._limit,this._limitType))}}function Wl(e){return zo("limit",e),ql._create("limit",e,"F")}function $l(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new P(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!En(t)&&-1!==n.indexOf("/"))throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ae.fromString(n));if(!ce.isDocumentKey(r))throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rt(e,new ce(r))}if(n instanceof $o)return Rt(e,n._key);throw new P(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ho(n)}.`)}function Xl(e,t){if(!Array.isArray(e)||0===e.length)throw new P(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Yl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new P(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new P(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Jl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(At(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw M(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return tt(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Et].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>mt(e.doubleValue)));return new dl(s)}convertGeoPoint(e){return new ul(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bt(e));default:return null}}convertTimestamp(e){const t=ht(e);return new ne(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ae.fromString(e);L(Is(n),9688,{name:e});const r=new jt(n.get(1),n.get(3)),s=new ce(n.popFirst(5));return r.isEqual(t)||_(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Zl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tc extends Dl{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Fl("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class nc extends tc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class rc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ec(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new nc(this._firestore,this._userDataWriter,n.key,n,new ec(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new P(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new nc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ec(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new nc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ec(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:sc(t.type),doc:r,oldIndex:s,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function sc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M(61501,{type:e})}}function ic(e){e=Qo(e,$o);const t=Qo(e.firestore,rl);return Io(il(t),e._key).then((n=>Ac(t,e,n)))}class ac extends Jl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $o(this.firestore,null,t)}}function oc(e){e=Qo(e,Wo);const t=Qo(e.firestore,rl),n=il(t),r=new ac(t);return Ul(e._query),Do(n,e._query).then((n=>new rc(t,r,e,n)))}function lc(e,t,n){e=Qo(e,$o);const r=Qo(e.firestore,rl),s=Zl(e.converter,t,n);return mc(r,[vl(xl(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,vr.none())])}function cc(e,t,n){e=Qo(e,$o);const r=Qo(e.firestore,rl),s=xl(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof ll?jl(s,"updateDoc",e._key,t,n,o):Nl(s,"updateDoc",e._key,t),mc(r,[i.toMutation(e._key,vr.exists(!0))])}function uc(e){return mc(Qo(e.firestore,rl),[new kr(e._key,vr.none())])}function dc(e,t){const n=Qo(e.firestore,rl),r=Jo(e),s=Zl(e.converter,t);return mc(n,[vl(xl(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,vr.exists(!1))]).then((()=>r))}function hc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=(0,l.Ku)(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||nl(n[c])||(o=n[c],c++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nl(n[c])){const e=n[c];n[c]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[c+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let d,h,m;if(e instanceof $o)h=Qo(e.firestore,rl),m=Sn(e._key.path),d={next:t=>{n[c]&&n[c](Ac(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Qo(e,Wo);h=Qo(t.firestore,rl),m=t._query;const r=new ac(h);d={next:e=>{n[c]&&n[c](new rc(h,r,t,e))},error:n[c+1],complete:n[c+2]},Ul(e._query)}return function(e,t,n,r){const s=new Co(r),i=new Va(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>Fa(await Lo(e),i))),()=>{s.xu(),e.asyncQueue.enqueueAndForget((async()=>Ua(await Lo(e),i)))}}(il(h),m,u,d)}function mc(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=bo(e);try{const e=await function(e,t){const n=I(e),r=ne.now(),s=t.reduce(((e,t)=>e.add(t.key)),Zn());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Vn(),l=Zn();return n.Bs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{i=s;const a=[];for(const e of t){const t=Cr(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new _r(e.key,t,$t(t.value.mapValue),vr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:qn(i)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new rt($)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await fo(r,e.changes),await pa(r.remoteStore)}catch(e){const t=Ba(e,"Failed to persist write");n.reject(t)}}(await ko(e),t,n))),n.promise}(il(e),t)}function Ac(e,t,n){const r=n.docs.get(t._key),s=new ac(e);return new tc(e,s,t._key,r,new ec(n.hasPendingWrites,n.fromCache),t.converter)}class gc{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,t,n){this._verifyNotCommitted();const r=pc(e,this._firestore),s=Zl(r.converter,t,n),i=vl(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,vr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=pc(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof ll?jl(this._dataReader,"WriteBatch.update",r._key,t,n,a):Nl(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pc(e,this._firestore);return this._mutations=this._mutations.concat(new kr(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pc(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new P(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function fc(){return new bl("serverTimestamp")}function xc(e){return new wl("increment",e)}function vc(e){return il(e=Qo(e,rl)),new gc(e,(t=>mc(e,t)))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){j=e}(i.MF),(0,i.om)(new a.uA("firestore",((e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new rl(new H(e.getProvider("auth-internal")),new K(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new P(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(b,w,e),(0,i.KO)(b,w,"esm2017")}()},235:(e,t,n)=>{"use strict";e.exports=n(615)},253:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>s});var r=n(170);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},272:(e,t,n)=>{"use strict";n.d(t,{P2:()=>p});const r=(e,t)=>t.some((t=>e instanceof t));let s,i;const a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return A(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),A(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(g(this),t,...r);return l.set(i,t.sort?t.sort():[t]),A(i)}}function m(e){return"function"===typeof e?h(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)}));o.set(e,t)}(e),r(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function A(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(A(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=m(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const g=e=>u.get(e);function p(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=A(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(A(a.result),e.oldVersion,e.newVersion,A(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{i&&e.addEventListener("close",(()=>i())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const f=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],v=new Map;function y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=x.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!f.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return v.set(t,i),i}d=(e=>({...e,get:(t,n,r)=>y(t,n)||e.get(t,n,r),has:(t,n)=>!!y(t,n)||e.has(t,n)}))(d)},284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},287:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},307:(e,t,n)=>{var r;self,r=function(e,t){return function(){var r={"./src/plugin/hyperlinks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.string.link.js");var r=n("./src/worker.js"),s=n("./src/utils.js"),i=[],a={toContainer:r.default.prototype.toContainer,toPdf:r.default.prototype.toPdf};r.default.prototype.toContainer=function(){return a.toContainer.call(this).then((function(){if(this.opt.enableLinks){var e=this.prop.container,t=e.querySelectorAll("a"),n=(0,s.unitConvert)(e.getBoundingClientRect(),this.prop.pageSize.k);i=[],Array.prototype.forEach.call(t,(function(e){for(var t=e.getClientRects(),r=0;r<t.length;r++){var a=(0,s.unitConvert)(t[r],this.prop.pageSize.k);a.left-=n.left,a.top-=n.top;var o=Math.floor(a.top/this.prop.pageSize.inner.height)+1,l=this.opt.margin[0]+a.top%this.prop.pageSize.inner.height,c=this.opt.margin[1]+a.left;i.push({page:o,top:l,left:c,clientRect:a,link:e})}}),this)}}))},r.default.prototype.toPdf=function(){return a.toPdf.call(this).then((function(){if(this.opt.enableLinks){i.forEach((function(e){this.prop.pdf.setPage(e.page),this.prop.pdf.link(e.left,e.top,e.clientRect.width,e.clientRect.height,{url:e.link.href})}),this);var e=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(e)}}))}},"./src/plugin/jspdf-plugin.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("jspdf");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}r.jsPDF.getPageSize=function(e,t,n){if("object"===s(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":var o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+t}if(a.hasOwnProperty(i))var l=a[i][1]/o,c=a[i][0]/o;else try{l=n[1],c=n[0]}catch(d){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e){if(e="p",c>l){var u=c;c=l,l=u}}else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(u=c,c=l,l=u)}return{width:c,height:l,unit:t,k:o}},t.default=r.jsPDF},"./src/plugin/pagebreaks.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.array.slice.js"),n("./node_modules/core-js/modules/es.array.join.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.object.keys.js");var r=n("./src/worker.js"),s=n("./src/utils.js"),i={toContainer:r.default.prototype.toContainer};r.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},r.default.prototype.toContainer=function(){return i.toContainer.call(this).then((function(){var e=this.prop.container,t=this.prop.pageSize.inner.px.height,n=[].concat(this.opt.pagebreak.mode),r={avoidAll:-1!==n.indexOf("avoid-all"),css:-1!==n.indexOf("css"),legacy:-1!==n.indexOf("legacy")},i={},a=this;["before","after","avoid"].forEach((function(t){var n=r.avoidAll&&"avoid"===t;i[t]=n?[]:[].concat(a.opt.pagebreak[t]||[]),i[t].length>0&&(i[t]=Array.prototype.slice.call(e.querySelectorAll(i[t].join(", "))))}));var o=e.querySelectorAll(".html2pdf__page-break");o=Array.prototype.slice.call(o);var l=e.querySelectorAll("*");Array.prototype.forEach.call(l,(function(e){var n={before:!1,after:r.legacy&&-1!==o.indexOf(e),avoid:r.avoidAll};if(r.css){var a=window.getComputedStyle(e),l=["always","page","left","right"];n={before:n.before||-1!==l.indexOf(a.breakBefore||a.pageBreakBefore),after:n.after||-1!==l.indexOf(a.breakAfter||a.pageBreakAfter),avoid:n.avoid||-1!==["avoid","avoid-page"].indexOf(a.breakInside||a.pageBreakInside)}}Object.keys(n).forEach((function(t){n[t]=n[t]||-1!==i[t].indexOf(e)}));var c=e.getBoundingClientRect();if(n.avoid&&!n.before){var u=Math.floor(c.top/t),d=Math.floor(c.bottom/t),h=Math.abs(c.bottom-c.top)/t;d!==u&&h<=1&&(n.before=!0)}if(n.before){var m=(0,s.createElement)("div",{style:{display:"block",height:t-c.top%t+"px"}});e.parentNode.insertBefore(m,e)}n.after&&(m=(0,s.createElement)("div",{style:{display:"block",height:t-c.bottom%t+"px"}}),e.parentNode.insertBefore(m,e.nextSibling))}))}))}},"./src/utils.js":function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.r(t),n.d(t,{objType:function(){return s},createElement:function(){return i},cloneNode:function(){return a},unitConvert:function(){return o},toPx:function(){return l}}),n("./node_modules/core-js/modules/es.number.constructor.js"),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.symbol.description.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.symbol.iterator.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var s=function(e){var t=r(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);if(t.className&&(n.className=t.className),t.innerHTML){n.innerHTML=t.innerHTML;for(var r=n.getElementsByTagName("script"),s=r.length;s-- >0;null)r[s].parentNode.removeChild(r[s])}for(var i in t.style)n.style[i]=t.style[i];return n},a=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),s=t.firstChild;s;s=s.nextSibling)!0!==n&&1===s.nodeType&&"SCRIPT"===s.nodeName||r.appendChild(e(s,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",(function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft}),!0)),r},o=function(e,t){if("number"===s(e))return 72*e/96/t;var n={};for(var r in e)n[r]=72*e[r]/96/t;return n},l=function(e,t){return Math.floor(e*t/72*96)}},"./src/worker.js":function(e,t,n){"use strict";n.r(t),n("./node_modules/core-js/modules/es.object.assign.js"),n("./node_modules/core-js/modules/es.array.map.js"),n("./node_modules/core-js/modules/es.object.keys.js"),n("./node_modules/core-js/modules/es.array.concat.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.regexp.to-string.js"),n("./node_modules/core-js/modules/es.function.name.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js");var r=n("jspdf"),s=n("html2canvas"),i=n("./src/utils.js"),a=n("./node_modules/es6-promise/dist/es6-promise.js"),o=n.n(a)().Promise,l=function e(t){var n=Object.assign(e.convert(o.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(o.resolve(),n);return r=(r=r.setProgress(1,e,1,[e])).set(t)};(l.prototype=Object.create(o.prototype)).constructor=l,l.convert=function(e,t){return e.__proto__=t||l.prototype,e},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},l.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch((0,i.objType)(e)){case"string":return"string";case"element":return e.nodeName.toLowerCase&&"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.set({src:(0,i.createElement)("div",{innerHTML:e})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},t={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};e.opacity=0;var n=(0,i.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,i.createElement)("div",{className:"html2pdf__overlay",style:e}),this.prop.container=(0,i.createElement)("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(n),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)}))},l.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then((function(){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,s(this.prop.container,e)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e=this.prop.canvas,t=this.opt,n=e.height,s=Math.floor(e.width*this.prop.pageSize.inner.ratio),i=Math.ceil(n/s),a=this.prop.pageSize.inner.height,o=document.createElement("canvas"),l=o.getContext("2d");o.width=e.width,o.height=s,this.prop.pdf=this.prop.pdf||new r.jsPDF(t.jsPDF);for(var c=0;c<i;c++){c===i-1&&n%s!==0&&(o.height=n%s,a=o.height*this.prop.pageSize.inner.width/o.width);var u=o.width,d=o.height;l.fillStyle="white",l.fillRect(0,0,u,d),l.drawImage(e,0,c*s,u,d,0,0,u,d),c&&this.prop.pdf.addPage();var h=o.toDataURL("image/"+t.image.type,t.image.quality);this.prop.pdf.addImage(h,t.image.type,t.margin[1],t.margin[0],this.prop.pageSize.inner.width,a)}}))},l.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},l.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},l.prototype.outputImg=function(e,t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},l.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.set=function(e){if("object"!==(0,i.objType)(e))return this;var t=Object.keys(e||{}).map((function(t){switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return t in l.template.prop?function(){this.prop[t]=e[t]}:function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},l.prototype.get=function(e,t){return this.then((function(){var n=e in l.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},l.prototype.setMargin=function(e){return this.then((function(){switch((0,i.objType)(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},l.prototype.setPageSize=function(e){return this.then((function(){(e=e||r.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:(0,i.toPx)(e.inner.width,e.k),height:(0,i.toPx)(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},l.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),o.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},l.prototype.thenCore=function(e,t,n){n=n||o.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var s=-1!==o.toString().indexOf("[native code]")&&"Promise"===o.name?r:l.convert(Object.assign({},r),o.prototype),i=n.call(s,e,t);return l.convert(i,r.__proto__)},l.prototype.thenExternal=function(e,t){return o.prototype.then.call(this,e,t)},l.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},l.prototype.catch=function(e){e&&(e=e.bind(this));var t=o.prototype.catch.call(this,e);return l.convert(t,this)},l.prototype.catchExternal=function(e){return o.prototype.catch.call(this,e)},l.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,t.default=l},"./node_modules/core-js/internals/a-function.js":function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/a-possible-prototype.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js"),s=n("./node_modules/core-js/internals/object-create.js"),i=n("./node_modules/core-js/internals/object-define-property.js"),a=r("unscopables"),o=Array.prototype;void 0==o[a]&&i.f(o,a,{configurable:!0,value:s(null)}),e.exports=function(e){o[a][e]=!0}},"./node_modules/core-js/internals/an-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-for-each.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/array-iteration.js").forEach,s=n("./node_modules/core-js/internals/array-method-is-strict.js")("forEach");e.exports=s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/to-length.js"),i=n("./node_modules/core-js/internals/to-absolute-index.js"),a=function(e){return function(t,n,a){var o,l=r(t),c=s(l.length),u=i(a,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(e,t,n){var r=n("./node_modules/core-js/internals/function-bind-context.js"),s=n("./node_modules/core-js/internals/indexed-object.js"),i=n("./node_modules/core-js/internals/to-object.js"),a=n("./node_modules/core-js/internals/to-length.js"),o=n("./node_modules/core-js/internals/array-species-create.js"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,h=7==e,m=5==e||d;return function(A,g,p,f){for(var x,v,y=i(A),b=s(y),w=r(g,p,3),N=a(b.length),j=0,C=f||o,T=t?C(A,N):n||h?C(A,0):void 0;N>j;j++)if((m||j in b)&&(v=w(x=b[j],j,y),e))if(t)T[j]=v;else if(v)switch(e){case 3:return!0;case 5:return x;case 6:return j;case 2:l.call(T,x)}else switch(e){case 4:return!1;case 7:l.call(T,x)}return d?-1:c||u?u:T}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js"),i=n("./node_modules/core-js/internals/engine-v8-version.js"),a=s("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"./node_modules/core-js/internals/array-method-is-strict.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},"./node_modules/core-js/internals/array-species-constructor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/is-array.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e){var t;return s(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!s(t.prototype)?r(t)&&null===(t=t[i])&&(t=void 0):t=void 0),void 0===t?Array:t}},"./node_modules/core-js/internals/array-species-create.js":function(e,t,n){var r=n("./node_modules/core-js/internals/array-species-constructor.js");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},"./node_modules/core-js/internals/classof-raw.js":function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/classof-raw.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),a="Arguments"==s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:a?s(t):"Object"==(r=s(t))&&"function"==typeof t.callee?"Arguments":r}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/own-keys.js"),i=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),a=n("./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=s(t),o=a.f,l=i.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||o(e,u,l(t,u))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"./node_modules/core-js/internals/create-html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),s=n("./node_modules/core-js/internals/to-string.js"),i=/"/g;e.exports=function(e,t,n,a){var o=s(r(e)),l="<"+t;return""!==n&&(l+=" "+n+'="'+s(a).replace(i,"&quot;")+'"'),l+">"+o+"</"+t+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,s=n("./node_modules/core-js/internals/object-create.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js"),a=n("./node_modules/core-js/internals/set-to-string-tag.js"),o=n("./node_modules/core-js/internals/iterators.js"),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=s(r,{next:i(1,n)}),a(e,c,!1,!0),o[c]=l,e}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=r?function(e,t,n){return s.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/create-property.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-property-key.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,n){var a=r(t);a in e?s.f(e,a,i(0,n)):e[a]=n}},"./node_modules/core-js/internals/define-iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/create-iterator-constructor.js"),i=n("./node_modules/core-js/internals/object-get-prototype-of.js"),a=n("./node_modules/core-js/internals/object-set-prototype-of.js"),o=n("./node_modules/core-js/internals/set-to-string-tag.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/redefine.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/is-pure.js"),h=n("./node_modules/core-js/internals/iterators.js"),m=n("./node_modules/core-js/internals/iterators-core.js"),A=m.IteratorPrototype,g=m.BUGGY_SAFARI_ITERATORS,p=u("iterator"),f="keys",x="values",v="entries",y=function(){return this};e.exports=function(e,t,n,u,m,b,w){s(n,t,u);var N,j,C,T=function(e){if(e===m&&M)return M;if(!g&&e in E)return E[e];switch(e){case f:case x:case v:return function(){return new n(this,e)}}return function(){return new n(this)}},S=t+" Iterator",_=!1,E=e.prototype,B=E[p]||E["@@iterator"]||m&&E[m],M=!g&&B||T(m),k="Array"==t&&E.entries||B;if(k&&(N=i(k.call(new e)),A!==Object.prototype&&N.next&&(d||i(N)===A||(a?a(N,A):"function"!=typeof N[p]&&l(N,p,y)),o(N,S,!0,!0),d&&(h[S]=y))),m==x&&B&&B.name!==x&&(_=!0,M=function(){return B.call(this)}),d&&!w||E[p]===M||l(E,p,M),h[t]=M,m)if(j={values:T(x),keys:b?M:T(f),entries:T(v)},w)for(C in j)(g||_||!(C in E))&&c(E,C,j[C]);else r({target:t,proto:!0,forced:g||_},j);return j}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/path.js"),s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),a=n("./node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});s(t,e)||a(t,e,{value:i.f(e)})}},"./node_modules/core-js/internals/descriptors.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"./node_modules/core-js/internals/document-create-element.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/is-object.js"),i=r.document,a=s(i)&&s(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(e,t,n){var r,s,i=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/engine-user-agent.js"),o=i.process,l=i.Deno,c=o&&o.versions||l&&l.version,u=c&&c.v8;u?s=(r=u.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(s=r[1]),e.exports=s&&+s},"./node_modules/core-js/internals/enum-bug-keys.js":function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,i=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),a=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/set-global.js"),l=n("./node_modules/core-js/internals/copy-constructor-properties.js"),c=n("./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,u,d,h,m,A=e.target,g=e.global,p=e.stat;if(n=g?r:p?r[A]||o(A,{}):(r[A]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(m=s(n,u))&&m.value:n[u],!c(g?u:A+(p?".":"#")+u,e.forced)&&void 0!==d){if(typeof h===typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),a(n,u,h,e)}}},"./node_modules/core-js/internals/fails.js":function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(e,t,n){var r=n("./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,s){return e.call(t,n,r,s)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){return arguments.length<2?"function"==typeof(n=r[e])?n:void 0:r[e]&&r[e][t];var n}},"./node_modules/core-js/internals/global.js":function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-object.js"),s={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return s.call(r(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":function(e){e.exports={}},"./node_modules/core-js/internals/html.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js");e.exports=r("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/fails.js"),i=n("./node_modules/core-js/internals/document-create-element.js");e.exports=!r&&!s((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/internals/indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/classof-raw.js"),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?i.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,n){var i,a;return s&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&s(e,a),e}},"./node_modules/core-js/internals/inspect-source.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared-store.js"),s=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return s.call(e)}),e.exports=r.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(e,t,n){var r,s,i,a=n("./node_modules/core-js/internals/native-weak-map.js"),o=n("./node_modules/core-js/internals/global.js"),l=n("./node_modules/core-js/internals/is-object.js"),c=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/shared-store.js"),h=n("./node_modules/core-js/internals/shared-key.js"),m=n("./node_modules/core-js/internals/hidden-keys.js"),A="Object already initialized",g=o.WeakMap;if(a||d.state){var p=d.state||(d.state=new g),f=p.get,x=p.has,v=p.set;r=function(e,t){if(x.call(p,e))throw new TypeError(A);return t.facade=e,v.call(p,e,t),t},s=function(e){return f.call(p,e)||{}},i=function(e){return x.call(p,e)}}else{var y=h("state");m[y]=!0,r=function(e,t){if(u(e,y))throw new TypeError(A);return t.facade=e,c(e,y,t),t},s=function(e){return u(e,y)?e[y]:{}},i=function(e){return u(e,y)}}e.exports={set:r,get:s,has:i,enforce:function(e){return i(e)?s(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-array.js":function(e,t,n){var r=n("./node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"./node_modules/core-js/internals/is-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js"),s=/#|\.prototype\./,i=function(e,t){var n=o[a(e)];return n==c||n!=l&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=i.data={},l=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},"./node_modules/core-js/internals/is-object.js":function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"./node_modules/core-js/internals/is-pure.js":function(e){e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),s=n("./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/iterators-core.js":function(e,t,n){"use strict";var r,s,i,a=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/object-get-prototype-of.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),c=n("./node_modules/core-js/internals/has.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/is-pure.js"),h=u("iterator"),m=!1;[].keys&&("next"in(i=[].keys())?(s=o(o(i)))!==Object.prototype&&(r=s):m=!0);var A=void 0==r||a((function(){var e={};return r[h].call(e)!==e}));A&&(r={}),d&&!A||c(r,h)||l(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},"./node_modules/core-js/internals/iterators.js":function(e){e.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/engine-v8-version.js"),s=n("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"./node_modules/core-js/internals/native-weak-map.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/inspect-source.js"),i=r.WeakMap;e.exports="function"===typeof i&&/native code/.test(s(i))},"./node_modules/core-js/internals/object-assign.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/fails.js"),i=n("./node_modules/core-js/internals/object-keys.js"),a=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),o=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),l=n("./node_modules/core-js/internals/to-object.js"),c=n("./node_modules/core-js/internals/indexed-object.js"),u=Object.assign,d=Object.defineProperty;e.exports=!u||s((function(){if(r&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),s="abcdefghijklmnopqrst";return e[n]=7,s.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||i(u({},t)).join("")!=s}))?function(e,t){for(var n=l(e),s=arguments.length,u=1,d=a.f,h=o.f;s>u;)for(var m,A=c(arguments[u++]),g=d?i(A).concat(d(A)):i(A),p=g.length,f=0;p>f;)m=g[f++],r&&!h.call(A,m)||(n[m]=A[m]);return n}:u},"./node_modules/core-js/internals/object-create.js":function(e,t,n){var r,s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/object-define-properties.js"),a=n("./node_modules/core-js/internals/enum-bug-keys.js"),o=n("./node_modules/core-js/internals/hidden-keys.js"),l=n("./node_modules/core-js/internals/html.js"),c=n("./node_modules/core-js/internals/document-create-element.js"),u=n("./node_modules/core-js/internals/shared-key.js"),d="prototype",h="script",m=u("IE_PROTO"),A=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},p=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}f=document.domain&&r?p(r):function(){var e,t=c("iframe"),n="java"+h+":";if(t.style)return t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F}()||p(r);for(var e=a.length;e--;)delete f[d][a[e]];return f()};o[m]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(A[d]=s(e),n=new A,A[d]=null,n[m]=e):n=f(),void 0===t?n:i(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),i=n("./node_modules/core-js/internals/an-object.js"),a=n("./node_modules/core-js/internals/object-keys.js");e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),o=r.length,l=0;o>l;)s.f(e,n=r[l++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/ie8-dom-define.js"),i=n("./node_modules/core-js/internals/an-object.js"),a=n("./node_modules/core-js/internals/to-property-key.js"),o=Object.defineProperty;t.f=r?o:function(e,t,n){if(i(e),t=a(t),i(n),s)try{return o(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js"),a=n("./node_modules/core-js/internals/to-indexed-object.js"),o=n("./node_modules/core-js/internals/to-property-key.js"),l=n("./node_modules/core-js/internals/has.js"),c=n("./node_modules/core-js/internals/ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=r?u:function(e,t){if(e=a(e),t=o(t),c)try{return u(e,t)}catch(n){}if(l(e,t))return i(!s.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return s(e)}catch(t){return a.slice()}}(e):s(r(e))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),s=n("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/to-object.js"),i=n("./node_modules/core-js/internals/shared-key.js"),a=n("./node_modules/core-js/internals/correct-prototype-getter.js"),o=i("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=s(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(e,t,n){var r=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/to-indexed-object.js"),i=n("./node_modules/core-js/internals/array-includes.js").indexOf,a=n("./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,o=s(e),l=0,c=[];for(n in o)!r(a,n)&&r(o,n)&&c.push(n);for(;t.length>l;)r(o,n=t[l++])&&(~i(c,n)||c.push(n));return c}},"./node_modules/core-js/internals/object-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-keys-internal.js"),s=n("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return r(e,s)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!n.call({1:2},1);t.f=s?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,n){var r=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(i){}return function(n,i){return r(n),s(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/classof.js");e.exports=r?{}.toString:function(){return"[object "+s(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,s;if("string"===t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;if("function"==typeof(n=e.valueOf)&&!r(s=n.call(e)))return s;if("string"!==t&&"function"==typeof(n=e.toString)&&!r(s=n.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/get-built-in.js"),s=n("./node_modules/core-js/internals/object-get-own-property-names.js"),i=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),a=n("./node_modules/core-js/internals/an-object.js");e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=r},"./node_modules/core-js/internals/redefine.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),i=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/set-global.js"),o=n("./node_modules/core-js/internals/inspect-source.js"),l=n("./node_modules/core-js/internals/internal-state.js"),c=l.get,u=l.enforce,d=String(String).split("String");(e.exports=function(e,t,n,o){var l,c=!!o&&!!o.unsafe,h=!!o&&!!o.enumerable,m=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||s(n,"name",t),(l=u(n)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(c?!m&&e[t]&&(h=!0):delete e[t],h?e[t]=n:s(e,t,n)):h?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||o(this)}))},"./node_modules/core-js/internals/regexp-flags.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/an-object.js");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"./node_modules/core-js/internals/require-object-coercible.js":function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},"./node_modules/core-js/internals/set-to-string-tag.js":function(e,t,n){var r=n("./node_modules/core-js/internals/object-define-property.js").f,s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,n){e&&!s(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},"./node_modules/core-js/internals/shared-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/shared.js"),s=n("./node_modules/core-js/internals/uid.js"),i=r("keys");e.exports=function(e){return i[e]||(i[e]=s(e))}},"./node_modules/core-js/internals/shared-store.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/set-global.js"),i="__core-js_shared__",a=r[i]||s(i,{});e.exports=a},"./node_modules/core-js/internals/shared.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-pure.js"),s=n("./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.0",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(e,t,n){var r=n("./node_modules/core-js/internals/fails.js");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"./node_modules/core-js/internals/string-multibyte.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=n("./node_modules/core-js/internals/to-string.js"),i=n("./node_modules/core-js/internals/require-object-coercible.js"),a=function(e){return function(t,n){var a,o,l=s(i(t)),c=r(n),u=l.length;return c<0||c>=u?e?"":void 0:(a=l.charCodeAt(c))<55296||a>56319||c+1===u||(o=l.charCodeAt(c+1))<56320||o>57343?e?l.charAt(c):a:e?l.slice(c,c+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},"./node_modules/core-js/internals/string-trim.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js"),s=n("./node_modules/core-js/internals/to-string.js"),i="["+n("./node_modules/core-js/internals/whitespaces.js")+"]",a=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var n=s(r(t));return 1&e&&(n=n.replace(a,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?s(n+t,0):i(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/indexed-object.js"),s=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return r(s(e))}},"./node_modules/core-js/internals/to-integer.js":function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-integer.js"),s=Math.min;e.exports=function(e){return e>0?s(r(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(e,t,n){var r=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(r(e))}},"./node_modules/core-js/internals/to-primitive.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-object.js"),s=n("./node_modules/core-js/internals/is-symbol.js"),i=n("./node_modules/core-js/internals/ordinary-to-primitive.js"),a=n("./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,o=e[a];if(void 0!==o){if(void 0===t&&(t="default"),n=o.call(e,t),!r(n)||s(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),i(e,t)}},"./node_modules/core-js/internals/to-property-key.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-primitive.js"),s=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=r(e,"string");return s(t)?t:String(t)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(e,t,n){var r={};r[n("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",e.exports="[object z]"===String(r)},"./node_modules/core-js/internals/to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){if(r(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},"./node_modules/core-js/internals/uid.js":function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(e,t,n){var r=n("./node_modules/core-js/internals/native-symbol.js");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(e,t,n){var r=n("./node_modules/core-js/internals/well-known-symbol.js");t.f=r},"./node_modules/core-js/internals/well-known-symbol.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/shared.js"),i=n("./node_modules/core-js/internals/has.js"),a=n("./node_modules/core-js/internals/uid.js"),o=n("./node_modules/core-js/internals/native-symbol.js"),l=n("./node_modules/core-js/internals/use-symbol-as-uid.js"),c=s("wks"),u=r.Symbol,d=l?u:u&&u.withoutSetter||a;e.exports=function(e){return i(c,e)&&(o||"string"==typeof c[e])||(o&&i(u,e)?c[e]=u[e]:c[e]=d("Symbol."+e)),c[e]}},"./node_modules/core-js/internals/whitespaces.js":function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/fails.js"),i=n("./node_modules/core-js/internals/is-array.js"),a=n("./node_modules/core-js/internals/is-object.js"),o=n("./node_modules/core-js/internals/to-object.js"),l=n("./node_modules/core-js/internals/to-length.js"),c=n("./node_modules/core-js/internals/create-property.js"),u=n("./node_modules/core-js/internals/array-species-create.js"),d=n("./node_modules/core-js/internals/array-method-has-species-support.js"),h=n("./node_modules/core-js/internals/well-known-symbol.js"),m=n("./node_modules/core-js/internals/engine-v8-version.js"),A=h("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",f=m>=51||!s((function(){var e=[];return e[A]=!1,e.concat()[0]!==e})),x=d("concat"),v=function(e){if(!a(e))return!1;var t=e[A];return void 0!==t?!!t:i(e)};r({target:"Array",proto:!0,forced:!f||!x},{concat:function(e){var t,n,r,s,i,a=o(this),d=u(a,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(v(i=-1===t?a:arguments[t])){if(h+(s=l(i.length))>g)throw TypeError(p);for(n=0;n<s;n++,h++)n in i&&c(d,h,i[n])}else{if(h>=g)throw TypeError(p);c(d,h++,i)}return d.length=h,d}})},"./node_modules/core-js/modules/es.array.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/add-to-unscopables.js"),i=n("./node_modules/core-js/internals/iterators.js"),a=n("./node_modules/core-js/internals/internal-state.js"),o=n("./node_modules/core-js/internals/define-iterator.js"),l="Array Iterator",c=a.set,u=a.getterFor(l);e.exports=o(Array,"Array",(function(e,t){c(this,{type:l,target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,s("keys"),s("values"),s("entries")},"./node_modules/core-js/modules/es.array.join.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/indexed-object.js"),i=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/array-method-is-strict.js"),o=[].join,l=s!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},"./node_modules/core-js/modules/es.array.map.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/array-iteration.js").map;r({target:"Array",proto:!0,forced:!n("./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/is-object.js"),i=n("./node_modules/core-js/internals/is-array.js"),a=n("./node_modules/core-js/internals/to-absolute-index.js"),o=n("./node_modules/core-js/internals/to-length.js"),l=n("./node_modules/core-js/internals/to-indexed-object.js"),c=n("./node_modules/core-js/internals/create-property.js"),u=n("./node_modules/core-js/internals/well-known-symbol.js"),d=n("./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),h=u("species"),m=[].slice,A=Math.max;r({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var n,r,u,d=l(this),g=o(d.length),p=a(e,g),f=a(void 0===t?g:t,g);if(i(d)&&("function"!=typeof(n=d.constructor)||n!==Array&&!i(n.prototype)?s(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return m.call(d,p,f);for(r=new(void 0===n?Array:n)(A(f-p,0)),u=0;p<f;p++,u++)p in d&&c(r,u,d[p]);return r.length=u,r}})},"./node_modules/core-js/modules/es.function.name.js":function(e,t,n){var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/object-define-property.js").f,i=Function.prototype,a=i.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in i)&&s(i,l,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(e){return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/descriptors.js"),s=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/is-forced.js"),a=n("./node_modules/core-js/internals/redefine.js"),o=n("./node_modules/core-js/internals/has.js"),l=n("./node_modules/core-js/internals/classof-raw.js"),c=n("./node_modules/core-js/internals/inherit-if-required.js"),u=n("./node_modules/core-js/internals/is-symbol.js"),d=n("./node_modules/core-js/internals/to-primitive.js"),h=n("./node_modules/core-js/internals/fails.js"),m=n("./node_modules/core-js/internals/object-create.js"),A=n("./node_modules/core-js/internals/object-get-own-property-names.js").f,g=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,p=n("./node_modules/core-js/internals/object-define-property.js").f,f=n("./node_modules/core-js/internals/string-trim.js").trim,x="Number",v=s[x],y=v.prototype,b=l(m(y))==x,w=function(e){if(u(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,r,s,i,a,o,l,c=d(e,"number");if("string"==typeof c&&c.length>2)if(43===(t=(c=f(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+c}for(a=(i=c.slice(2)).length,o=0;o<a;o++)if((l=i.charCodeAt(o))<48||l>s)return NaN;return parseInt(i,r)}return+c};if(i(x,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var N,j=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof j&&(b?h((function(){y.valueOf.call(n)})):l(n)!=x)?c(new v(w(t)),n,j):w(t)},C=r?A(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;C.length>T;T++)o(v,N=C[T])&&!o(j,N)&&p(j,N,g(v,N));j.prototype=y,y.constructor=j,a(s,x,j)}},"./node_modules/core-js/modules/es.object.assign.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/object-assign.js");r({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},"./node_modules/core-js/modules/es.object.keys.js":function(e,t,n){var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/to-object.js"),i=n("./node_modules/core-js/internals/object-keys.js");r({target:"Object",stat:!0,forced:n("./node_modules/core-js/internals/fails.js")((function(){i(1)}))},{keys:function(e){return i(s(e))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(e,t,n){var r=n("./node_modules/core-js/internals/to-string-tag-support.js"),s=n("./node_modules/core-js/internals/redefine.js"),i=n("./node_modules/core-js/internals/object-to-string.js");r||s(Object.prototype,"toString",i,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/redefine.js"),s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/to-string.js"),a=n("./node_modules/core-js/internals/fails.js"),o=n("./node_modules/core-js/internals/regexp-flags.js"),l="toString",c=RegExp.prototype,u=c[l],d=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),h=u.name!=l;(d||h)&&r(RegExp.prototype,l,(function(){var e=s(this),t=i(e.source),n=e.flags;return"/"+t+"/"+i(void 0===n&&e instanceof RegExp&&!("flags"in c)?o.call(e):n)}),{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/string-multibyte.js").charAt,s=n("./node_modules/core-js/internals/to-string.js"),i=n("./node_modules/core-js/internals/internal-state.js"),a=n("./node_modules/core-js/internals/define-iterator.js"),o="String Iterator",l=i.set,c=i.getterFor(o);a(String,"String",(function(e){l(this,{type:o,string:s(e),index:0})}),(function(){var e,t=c(this),n=t.string,s=t.index;return s>=n.length?{value:void 0,done:!0}:(e=r(n,s),t.index+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/modules/es.string.link.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/create-html.js");r({target:"String",proto:!0,forced:n("./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(e){return s(this,"a","href",e)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/descriptors.js"),i=n("./node_modules/core-js/internals/global.js"),a=n("./node_modules/core-js/internals/has.js"),o=n("./node_modules/core-js/internals/is-object.js"),l=n("./node_modules/core-js/internals/object-define-property.js").f,c=n("./node_modules/core-js/internals/copy-constructor-properties.js"),u=i.Symbol;if(s&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(h,u);var m=h.prototype=u.prototype;m.constructor=h;var A=m.toString,g="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=A.call(e);if(a(d,e))return"";var n=g?t.slice(7,-1):t.replace(p,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:h})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(e,t,n){n("./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(e,t,n){"use strict";var r=n("./node_modules/core-js/internals/export.js"),s=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/get-built-in.js"),a=n("./node_modules/core-js/internals/is-pure.js"),o=n("./node_modules/core-js/internals/descriptors.js"),l=n("./node_modules/core-js/internals/native-symbol.js"),c=n("./node_modules/core-js/internals/fails.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/is-array.js"),h=n("./node_modules/core-js/internals/is-object.js"),m=n("./node_modules/core-js/internals/is-symbol.js"),A=n("./node_modules/core-js/internals/an-object.js"),g=n("./node_modules/core-js/internals/to-object.js"),p=n("./node_modules/core-js/internals/to-indexed-object.js"),f=n("./node_modules/core-js/internals/to-property-key.js"),x=n("./node_modules/core-js/internals/to-string.js"),v=n("./node_modules/core-js/internals/create-property-descriptor.js"),y=n("./node_modules/core-js/internals/object-create.js"),b=n("./node_modules/core-js/internals/object-keys.js"),w=n("./node_modules/core-js/internals/object-get-own-property-names.js"),N=n("./node_modules/core-js/internals/object-get-own-property-names-external.js"),j=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),C=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),T=n("./node_modules/core-js/internals/object-define-property.js"),S=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),_=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),E=n("./node_modules/core-js/internals/redefine.js"),B=n("./node_modules/core-js/internals/shared.js"),M=n("./node_modules/core-js/internals/shared-key.js"),k=n("./node_modules/core-js/internals/hidden-keys.js"),L=n("./node_modules/core-js/internals/uid.js"),I=n("./node_modules/core-js/internals/well-known-symbol.js"),D=n("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),P=n("./node_modules/core-js/internals/define-well-known-symbol.js"),F=n("./node_modules/core-js/internals/set-to-string-tag.js"),U=n("./node_modules/core-js/internals/internal-state.js"),R=n("./node_modules/core-js/internals/array-iteration.js").forEach,O=M("hidden"),H="Symbol",Q="prototype",z=I("toPrimitive"),V=U.set,K=U.getterFor(H),G=Object[Q],q=s.Symbol,W=i("JSON","stringify"),$=C.f,X=T.f,Y=N.f,J=S.f,Z=B("symbols"),ee=B("op-symbols"),te=B("string-to-symbol-registry"),ne=B("symbol-to-string-registry"),re=B("wks"),se=s.QObject,ie=!se||!se[Q]||!se[Q].findChild,ae=o&&c((function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=$(G,t);r&&delete G[t],X(e,t,n),r&&e!==G&&X(G,t,r)}:X,oe=function(e,t){var n=Z[e]=y(q[Q]);return V(n,{type:H,tag:e,description:t}),o||(n.description=t),n},le=function(e,t,n){e===G&&le(ee,t,n),A(e);var r=f(t);return A(n),u(Z,r)?(n.enumerable?(u(e,O)&&e[O][r]&&(e[O][r]=!1),n=y(n,{enumerable:v(0,!1)})):(u(e,O)||X(e,O,v(1,{})),e[O][r]=!0),ae(e,r,n)):X(e,r,n)},ce=function(e,t){A(e);var n=p(t),r=b(n).concat(me(n));return R(r,(function(t){o&&!ue.call(n,t)||le(e,t,n[t])})),e},ue=function(e){var t=f(e),n=J.call(this,t);return!(this===G&&u(Z,t)&&!u(ee,t))&&(!(n||!u(this,t)||!u(Z,t)||u(this,O)&&this[O][t])||n)},de=function(e,t){var n=p(e),r=f(t);if(n!==G||!u(Z,r)||u(ee,r)){var s=$(n,r);return!s||!u(Z,r)||u(n,O)&&n[O][r]||(s.enumerable=!0),s}},he=function(e){var t=Y(p(e)),n=[];return R(t,(function(e){u(Z,e)||u(k,e)||n.push(e)})),n},me=function(e){var t=e===G,n=Y(t?ee:p(e)),r=[];return R(n,(function(e){!u(Z,e)||t&&!u(G,e)||r.push(Z[e])})),r};l||(q=function(){if(this instanceof q)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?x(arguments[0]):void 0,t=L(e),n=function(e){this===G&&n.call(ee,e),u(this,O)&&u(this[O],t)&&(this[O][t]=!1),ae(this,t,v(1,e))};return o&&ie&&ae(G,t,{configurable:!0,set:n}),oe(t,e)},E(q[Q],"toString",(function(){return K(this).tag})),E(q,"withoutSetter",(function(e){return oe(L(e),e)})),S.f=ue,T.f=le,C.f=de,w.f=N.f=he,j.f=me,D.f=function(e){return oe(I(e),e)},o&&(X(q[Q],"description",{configurable:!0,get:function(){return K(this).description}}),a||E(G,"propertyIsEnumerable",ue,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:q}),R(b(re),(function(e){P(e)})),r({target:H,stat:!0,forced:!l},{for:function(e){var t=x(e);if(u(te,t))return te[t];var n=q(t);return te[t]=n,ne[n]=t,n},keyFor:function(e){if(!m(e))throw TypeError(e+" is not a symbol");if(u(ne,e))return ne[e]},useSetter:function(){ie=!0},useSimple:function(){ie=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!o},{create:function(e,t){return void 0===t?y(e):ce(y(e),t)},defineProperty:le,defineProperties:ce,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:he,getOwnPropertySymbols:me}),r({target:"Object",stat:!0,forced:c((function(){j.f(1)}))},{getOwnPropertySymbols:function(e){return j.f(g(e))}}),W&&r({target:"JSON",stat:!0,forced:!l||c((function(){var e=q();return"[null]"!=W([e])||"{}"!=W({a:e})||"{}"!=W(Object(e))}))},{stringify:function(e,t,n){for(var r,s=[e],i=1;arguments.length>i;)s.push(arguments[i++]);if(r=t,(h(t)||void 0!==e)&&!m(e))return d(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!m(t))return t}),s[1]=t,W.apply(null,s)}}),q[Q][z]||_(q[Q],z,q[Q].valueOf),F(q,H),k[O]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/dom-iterables.js"),i=n("./node_modules/core-js/internals/array-for-each.js"),a=n("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var o in s){var l=r[o],c=l&&l.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(u){c.forEach=i}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,n){var r=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/dom-iterables.js"),i=n("./node_modules/core-js/modules/es.array.iterator.js"),a=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),o=n("./node_modules/core-js/internals/well-known-symbol.js"),l=o("iterator"),c=o("toStringTag"),u=i.values;for(var d in s){var h=r[d],m=h&&h.prototype;if(m){if(m[l]!==u)try{a(m,l,u)}catch(g){m[l]=u}if(m[c]||a(m,c,d),s[d])for(var A in i)if(m[A]!==i[A])try{a(m,A,i[A])}catch(g){m[A]=i[A]}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(e){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"===typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=0,i=void 0,a=void 0,o=function(e,t){y[s]=e,y[s+1]=t,2===(s+=2)&&(a?a(b):N())};function l(e){a=e}function c(e){o=e}var u="undefined"!==typeof window?window:void 0,d=u||{},h=d.MutationObserver||d.WebKitMutationObserver,m="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),A="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function g(){return function(){return process.nextTick(b)}}function p(){return"undefined"!==typeof i?function(){i(b)}:v()}function f(){var e=0,t=new h(b),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function x(){var e=new MessageChannel;return e.port1.onmessage=b,function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(b,1)}}var y=new Array(1e3);function b(){for(var e=0;e<s;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;s=0}function w(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,p()}catch(t){return v()}}var N=void 0;function j(e,t){var n=this,r=new this.constructor(S);void 0===r[T]&&q(r);var s=n._state;if(s){var i=arguments[s-1];o((function(){return z(s,r,i,n._result)}))}else H(n,r,e,t);return r}function C(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(S);return F(n,e),n}N=m?g():h?f():A?x():void 0===u?w():v();var T=Math.random().toString(36).substring(2);function S(){}var _=void 0,E=1,B=2;function M(){return new TypeError("You cannot resolve a promise with itself")}function k(){return new TypeError("A promises callback cannot return that same promise.")}function L(e,t,n,r){try{e.call(t,n,r)}catch(s){return s}}function I(e,t,n){o((function(e){var r=!1,s=L(n,t,(function(n){r||(r=!0,t!==n?F(e,n):R(e,n))}),(function(t){r||(r=!0,O(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&s&&(r=!0,O(e,s))}),e)}function D(e,t){t._state===E?R(e,t._result):t._state===B?O(e,t._result):H(t,void 0,(function(t){return F(e,t)}),(function(t){return O(e,t)}))}function P(e,n,r){n.constructor===e.constructor&&r===j&&n.constructor.resolve===C?D(e,n):void 0===r?R(e,n):t(r)?I(e,n,r):R(e,n)}function F(t,n){if(t===n)O(t,M());else if(e(n)){var r=void 0;try{r=n.then}catch(s){return void O(t,s)}P(t,n,r)}else R(t,n)}function U(e){e._onerror&&e._onerror(e._result),Q(e)}function R(e,t){e._state===_&&(e._result=t,e._state=E,0!==e._subscribers.length&&o(Q,e))}function O(e,t){e._state===_&&(e._state=B,e._result=t,o(U,e))}function H(e,t,n,r){var s=e._subscribers,i=s.length;e._onerror=null,s[i]=t,s[i+E]=n,s[i+B]=r,0===i&&e._state&&o(Q,e)}function Q(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,s=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],s=t[a+n],r?z(n,r,s,i):s(i);e._subscribers.length=0}}function z(e,n,r,s){var i=t(r),a=void 0,o=void 0,l=!0;if(i){try{a=r(s)}catch(c){l=!1,o=c}if(n===a)return void O(n,k())}else a=s;n._state!==_||(i&&l?F(n,a):!1===l?O(n,o):e===E?R(n,a):e===B&&O(n,a))}function V(e,t){try{t((function(t){F(e,t)}),(function(t){O(e,t)}))}catch(n){O(e,n)}}var K=0;function G(){return K++}function q(e){e[T]=K++,e._state=void 0,e._result=void 0,e._subscribers=[]}function W(){return new Error("Array Methods must be provided an Array")}var $=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[T]||q(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):O(this.promise,W())}return e.prototype._enumerate=function(e){for(var t=0;this._state===_&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===C){var s=void 0,i=void 0,a=!1;try{s=e.then}catch(l){a=!0,i=l}if(s===j&&e._state!==_)this._settledAt(e._state,t,e._result);else if("function"!==typeof s)this._remaining--,this._result[t]=e;else if(n===te){var o=new n(S);a?O(o,i):P(o,e,s),this._willSettleAt(o,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===_&&(this._remaining--,e===B?O(r,n):this._result[t]=n),0===this._remaining&&R(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;H(e,void 0,(function(e){return n._settledAt(E,t,e)}),(function(e){return n._settledAt(B,t,e)}))},e}();function X(e){return new $(this,e).promise}function Y(e){var t=this;return r(e)?new t((function(n,r){for(var s=e.length,i=0;i<s;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function J(e){var t=new this(S);return O(t,e),t}function Z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[T]=G(),this._result=this._state=void 0,this._subscribers=[],S!==t&&("function"!==typeof t&&Z(),this instanceof e?V(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function ne(){var e=void 0;if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(s){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(s){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=j,te.all=X,te.race=Y,te.resolve=C,te.reject=J,te._setScheduler=l,te._setAsap=c,te._asap=o,te.polyfill=ne,te.Promise=te,te}()},html2canvas:function(e){"use strict";e.exports=t},jspdf:function(t){"use strict";t.exports=e}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return function(){"use strict";i.r(a);var e=i("./src/worker.js"),t=(i("./src/plugin/jspdf-plugin.js"),i("./src/plugin/pagebreaks.js"),i("./src/plugin/hyperlinks.js"),function e(t,n){var r=new e.Worker(n);return t?r.from(t).save():r});t.Worker=e.default,a.default=t}(),a=a.default}()},e.exports=r(n(19),n(52))},340:(e,t,n)=>{"use strict";e.exports=n(487)},352:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(85)},414:(e,t,n)=>{"use strict";e.exports=n(916)},469:(e,t,n)=>{"use strict";n.d(t,{auth:()=>Ue,db:()=>Pe,Ay:()=>Oe,IG:()=>Re});var r=n(815),s=n(220),i=n(493),a=n(624),o=n(170),l=n(253),c=n(272);const u="@firebase/installations",d="0.6.17",h=1e4,m=`w:${d}`,A="FIS_v2",g=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},f=new o.FA("installations","Installations",p);function x(e){return e instanceof o.g&&e.code.includes("request-failed")}function v(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function y(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function b(e,t){const n=(await t.json()).error;return f.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function w(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function N(e,t){let{refreshToken:n}=t;const r=w(e);return r.append("Authorization",function(e){return`${A} ${e}`}(n)),r}async function j(e){const t=await e();return t.status>=500&&t.status<600?e():t}function C(e){return new Promise((t=>{setTimeout(t,e)}))}const T=/^[cdef][\w-]{21}$/;function S(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return T.test(t)?t:""}catch(e){return""}}function _(e){return`${e.appName}!${e.appId}`}const E=new Map;function B(e,t){const n=_(e);M(n,t),function(e,t){const n=L();n&&n.postMessage({key:e,fid:t});I()}(n,t)}function M(e,t){const n=E.get(e);if(n)for(const r of n)r(t)}let k=null;function L(){return!k&&"BroadcastChannel"in self&&(k=new BroadcastChannel("[Firebase] FID Change"),k.onmessage=e=>{M(e.data.key,e.data.fid)}),k}function I(){0===E.size&&k&&(k.close(),k=null)}const D="firebase-installations-store";let P=null;function F(){return P||(P=(0,c.P2)("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(D)}})),P}async function U(e,t){const n=_(e),r=(await F()).transaction(D,"readwrite"),s=r.objectStore(D),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||B(e,t.fid),t}async function R(e){const t=_(e),n=(await F()).transaction(D,"readwrite");await n.objectStore(D).delete(t),await n.done}async function O(e,t){const n=_(e),r=(await F()).transaction(D,"readwrite"),s=r.objectStore(D),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||B(e,a.fid),a}async function H(e){let t;const n=await O(e.appConfig,(n=>{const r=function(e){const t=e||{fid:S(),registrationStatus:0};return V(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(f.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=v(n),a=w(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:A,appId:n.appId,sdkVersion:m},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await j((()=>fetch(i,c)));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:y(e.authToken)}}throw await b("Create Installation",u)}(e,t);return U(e.appConfig,n)}catch(n){throw x(n)&&409===n.customData.serverCode?await R(e.appConfig):await U(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Q(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Q(e){let t=await z(e.appConfig);for(;1===t.registrationStatus;)await C(100),t=await z(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await H(e);return n||t}return t}function z(e){return O(e,(e=>{if(!e)throw f.create("installation-not-found");return V(e)}))}function V(e){return 1===(t=e).registrationStatus&&t.registrationTime+h<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function K(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return`${v(e)}/${n}/authTokens:generate`}(n,t),i=N(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:m,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await j((()=>fetch(s,l)));if(c.ok){return y(await c.json())}throw await b("Generate Auth Token",c)}async function G(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await O(e.appConfig,(r=>{if(!W(r))throw f.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+g}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await q(e.appConfig);for(;1===n.authToken.requestStatus;)await C(100),n=await q(e.appConfig);const r=n.authToken;return 0===r.requestStatus?G(e,t):r}(e,n),r;{if(!navigator.onLine)throw f.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await K(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await U(e.appConfig,r),n}catch(n){if(!x(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await U(e.appConfig,n)}else await R(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function q(e){return O(e,(e=>{if(!W(e))throw f.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+h<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function W(e){return void 0!==e&&2===e.registrationStatus}async function $(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await H(e);t&&await t}(n);return(await G(n,t)).token}function X(e){return f.create("missing-app-config-values",{valueName:e})}const Y="installations",J=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw X("App Configuration");if(!e.name)throw X("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw X(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:(0,i.j6)(t,"heartbeat"),_delete:()=>Promise.resolve()}},Z=e=>{const t=e.getProvider("app").getImmediate(),n=(0,i.j6)(t,Y).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await H(t);return r?r.catch(console.error):G(t).catch(console.error),n.fid}(n),getToken:e=>$(n,e)}};(0,i.om)(new l.uA(Y,J,"PUBLIC")),(0,i.om)(new l.uA("installations-internal",Z,"PRIVATE")),(0,i.KO)(u,d),(0,i.KO)(u,d,"esm2017");const ee="analytics",te="https://www.googletagmanager.com/gtag/js",ne=new a.Vy("@firebase/analytics"),re={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},se=new o.FA("analytics","Analytics",re);function ie(e){if(!e.startsWith(te)){const t=se.create("invalid-gtag-resource",{gtagURL:e});return ne.warn(t.message),""}return e}function ae(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function oe(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ie}),r=document.createElement("script"),s=`${te}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function le(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await ae(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(i){ne.error(i)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await ae(n)).find((e=>e.measurementId===s));e&&await t[e.appId]}}catch(o){ne.error(o)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t,n]=a;e("consent",t,n)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(l){ne.error(l)}}}const ce=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ue(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw se.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw se.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new me;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),he({appId:r,apiKey:s,measurementId:i},a,o,t)}async function he(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce;var a;const{appId:l,measurementId:c}=e;try{await function(e,t){return new Promise(((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener((()=>{clearTimeout(i),r(se.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(u){if(c)return ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===u||void 0===u?void 0:u.message}]`),{appId:l,measurementId:c};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:ue(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw se.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(l),t}catch(u){const t=u;if(!function(e){if(!(e instanceof o.g)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(l),c)return ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:l,measurementId:c};throw u}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?(0,o.p9)(s,i.intervalMillis,30):(0,o.p9)(s,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:s+1};return i.setThrottleMetadata(l,d),ne.debug(`Calling attemptFetch again in ${r} millis`),he(e,d,n,i)}}class me{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Ae,ge;function pe(e){ge=e}function fe(e){Ae=e}async function xe(e,t,n,r,s,i,a){var l;const c=de(e);c.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ne.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>ne.error(e))),t.push(c);const u=async function(){if(!(0,o.zW)())return ne.warn(se.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,o.eX)()}catch(e){return ne.warn(se.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,h]=await Promise.all([c,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(te)&&n.src.includes(e))return n;return null})(i)||oe(i,d.measurementId),ge&&(s("consent","default",ge),pe(void 0)),s("js",new Date);const m=null!==(l=null===a||void 0===a?void 0:a.config)&&void 0!==l?l:{};return m.origin="firebase",m.update=!0,null!=h&&(m.firebase_id=h),s("config",d.measurementId,m),Ae&&(s("set",Ae),fe(void 0)),d.measurementId}class ve{constructor(e){this.app=e}_delete(){return delete ye[this.app.options.appId],Promise.resolve()}}let ye={},be=[];const we={};let Ne,je,Ce="dataLayer",Te="gtag",Se=!1;function _e(e,t,n){!function(){const e=[];if((0,o.sr)()&&e.push("This is a browser extension environment."),(0,o.dM)()||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=se.create("invalid-analytics-context",{errorInfo:t});ne.warn(n.message)}}();const r=e.options.appId;if(!r)throw se.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw se.create("no-api-key");ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ye[r])throw se.create("already-exists",{id:r});if(!Se){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ce);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=le(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(ye,be,we,Ce,Te);je=e,Ne=t,Se=!0}ye[r]=xe(e,be,we,t,Ne,Ce,n);return new ve(e)}function Ee(e,t,n,r){e=(0,o.Ku)(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(je,ye[e.app.options.appId],t,n,r).catch((e=>ne.error(e)))}const Be="@firebase/analytics",Me="0.10.16";(0,i.om)(new l.uA(ee,((e,t)=>{let{options:n}=t;return _e(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),(0,i.om)(new l.uA("analytics-internal",(function(e){try{const t=e.getProvider(ee).getImmediate();return{logEvent:(e,n,r)=>Ee(t,e,n,r)}}catch(t){throw se.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),(0,i.KO)(Be,Me),(0,i.KO)(Be,Me,"esm2017");var ke=n(45),Le=n(751);const Ie={apiKey:"AIzaSyCcKbIdbew5zpovWUNR2if1wiUkxHQSGeg",authDomain:"thiendianhan-app.firebaseapp.com",projectId:"thiendianhan-app",storageBucket:"thiendianhan-app.firebasestorage.app",messagingSenderId:"167900722042",appId:"1:167900722042:web:bb7c23236705805af5dcc3",measurementId:"G-PG375FB6GX"};let De,Pe,Fe,Ue,Re;try{Ie.projectId&&"demo-project"!==Ie.projectId?(De=(0,r.Wp)(Ie),Pe=(0,s.aU)(De),Ue=(0,ke.getAuth)(De),Re=(0,Le.c7)(De),Fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.Sx)();e=(0,o.Ku)(e);const t=(0,i.j6)(e,ee);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,i.j6)(e,ee);if(n.isInitialized()){const e=n.getImmediate();if((0,o.bD)(t,n.getOptions()))return e;throw se.create("already-initialized")}return n.initialize({options:t})}(e)}(De)):(De=null,Pe=null,Fe=null,Ue=null,Re=null)}catch(He){console.error("\u274c L\u1ed7i khi kh\u1edfi t\u1ea1o Firebase:",He),De=null,Pe=null,Fe=null,Ue=null,Re=null}const Oe=De},487:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,A=!1,g=!1,p=!1,f="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(p=!1,y(e),!g)if(null!==r(c))g=!0,M();else{var t=r(u);null!==t&&k(b,t.startTime-e)}}var w,N=!1,j=-1,C=5,T=-1;function S(){return!(t.unstable_now()-T<C)}function _(){if(N){var e=t.unstable_now();T=e;var n=!0;try{e:{g=!1,p&&(p=!1,x(j),j=-1),A=!0;var i=m;try{t:{for(y(e),h=r(c);null!==h&&!(h.expirationTime>e&&S());){var a=h.callback;if("function"===typeof a){h.callback=null,m=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,y(e),n=!0;break t}h===r(c)&&s(c),y(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&k(b,l.startTime-e),n=!1}}break e}finally{h=null,m=i,A=!1}n=void 0}}finally{n?w():N=!1}}}if("function"===typeof v)w=function(){v(_)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,B=E.port2;E.port1.onmessage=_,w=function(){B.postMessage(null)}}else w=function(){f(_,0)};function M(){N||(N=!0,w())}function k(e,n){j=f((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||A||(g=!0,M())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(p?(x(j),j=-1):p=!0,k(b,i-a))):(e.sortIndex=o,n(c,e),g||A||(g=!0,M())),e},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},493:(e,t,n)=>{"use strict";n.d(t,{KO:()=>J,MF:()=>$,Sx:()=>Y,Wp:()=>X,j6:()=>V,om:()=>z,xZ:()=>K});var r=n(253),s=n(624),i=n(170),a=n(272);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const l="@firebase/app",c="0.13.1",u=new s.Vy("@firebase/app"),d="@firebase/app-compat",h="@firebase/analytics-compat",m="@firebase/analytics",A="@firebase/app-check-compat",g="@firebase/app-check",p="@firebase/auth",f="@firebase/auth-compat",x="@firebase/database",v="@firebase/data-connect",y="@firebase/database-compat",b="@firebase/functions",w="@firebase/functions-compat",N="@firebase/installations",j="@firebase/installations-compat",C="@firebase/messaging",T="@firebase/messaging-compat",S="@firebase/performance",_="@firebase/performance-compat",E="@firebase/remote-config",B="@firebase/remote-config-compat",M="@firebase/storage",k="@firebase/storage-compat",L="@firebase/firestore",I="@firebase/ai",D="@firebase/firestore-compat",P="firebase",F="[DEFAULT]",U={[l]:"fire-core",[d]:"fire-core-compat",[m]:"fire-analytics",[h]:"fire-analytics-compat",[g]:"fire-app-check",[A]:"fire-app-check-compat",[p]:"fire-auth",[f]:"fire-auth-compat",[x]:"fire-rtdb",[v]:"fire-data-connect",[y]:"fire-rtdb-compat",[b]:"fire-fn",[w]:"fire-fn-compat",[N]:"fire-iid",[j]:"fire-iid-compat",[C]:"fire-fcm",[T]:"fire-fcm-compat",[S]:"fire-perf",[_]:"fire-perf-compat",[E]:"fire-rc",[B]:"fire-rc-compat",[M]:"fire-gcs",[k]:"fire-gcs-compat",[L]:"fire-fst",[D]:"fire-fst-compat",[I]:"fire-vertex","fire-js":"fire-js",[P]:"fire-js-all"},R=new Map,O=new Map,H=new Map;function Q(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function z(e){const t=e.name;if(H.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;H.set(t,e);for(const n of R.values())Q(n,e);for(const n of O.values())Q(n,e);return!0}function V(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function K(e){return null!==e&&void 0!==e&&void 0!==e.settings}const G={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},q=new i.FA("app","Firebase",G);class W{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw q.create("app-deleted",{appName:this._name})}}const $="11.9.0";function X(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=Object.assign({name:F,automaticDataCollectionEnabled:!0},t),a=s.name;if("string"!==typeof a||!a)throw q.create("bad-app-name",{appName:String(a)});if(n||(n=(0,i.T9)()),!n)throw q.create("no-options");const o=R.get(a);if(o){if((0,i.bD)(n,o.options)&&(0,i.bD)(s,o.config))return o;throw q.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of H.values())l.addComponent(r);const c=new W(n,s,l);return R.set(a,c),c}function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=R.get(e);if(!t&&e===F&&(0,i.T9)())return X();if(!t)throw q.create("no-app",{appName:e});return t}function J(e,t,n){var s;let i=null!==(s=U[e])&&void 0!==s?s:e;n&&(i+=`-${n}`);const a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${i}" with version "${t}":`];return a&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}z(new r.uA(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Z="firebase-heartbeat-store";let ee=null;function te(){return ee||(ee=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Z)}catch(n){console.warn(n)}}}).catch((e=>{throw q.create("idb-open",{originalErrorMessage:e.message})}))),ee}async function ne(e,t){try{const n=(await te()).transaction(Z,"readwrite"),r=n.objectStore(Z);await r.put(t,re(e)),await n.done}catch(n){if(n instanceof i.g)u.warn(n.message);else{const e=q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function re(e){return`${e.name}!${e.options.appId}`}class se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ae(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ie();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){u.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ie(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),oe(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,i.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return u.warn(t),""}}}function ie(){return(new Date).toISOString().substring(0,10)}class ae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await te()).transaction(Z),n=await t.objectStore(Z).get(re(e));return await t.done,n}catch(t){if(t instanceof i.g)u.warn(t.message);else{const e=q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ne(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function oe(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var le;le="",z(new r.uA("platform-logger",(e=>new o(e)),"PRIVATE")),z(new r.uA("heartbeat",(e=>new se(e)),"PRIVATE")),J(l,c,le),J(l,c,"esm2017"),J("fire-js","")},538:(e,t,n)=>{"use strict";e.exports=n(759)},599:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},615:(e,t,n)=>{"use strict";e.exports=function(e){function t(e,t,n,r){return new js(e,t,n,r)}function r(){}function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=li&&e[li]||e["@@iterator"])?e:null}function a(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===ci?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case qs:return"Fragment";case Gs:return"Portal";case $s:return"Profiler";case Ws:return"StrictMode";case ei:return"Suspense";case ti:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case Js:return(e.displayName||"Context")+".Provider";case Ys:return(e._context.displayName||"Context")+".Consumer";case Zs:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case ni:return null!==(t=e.displayName||null)?t:a(e.type)||"Memo";case ri:t=e._payload,e=e._init;try{return a(e(t))}catch(n){}}return null}function o(e){if(void 0===ii)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ii=t&&t[1]||"",ai=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+ii+e+ai}function l(e,t){if(!e||di)return"";di=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],l=i[1];if(a&&l){var c=a.split("\n"),u=l.split("\n");for(s=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(r===c.length||s===u.length)for(r=c.length-1,s=u.length-1;1<=r&&0<=s&&c[r]!==u[s];)s--;for(;1<=r&&0<=s;r--,s--)if(c[r]!==u[s]){if(1!==r||1!==s)do{if(r--,0>--s||c[r]!==u[s]){var d="\n"+c[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=r&&0<=s);break}}}finally{di=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?o(n):""}function c(e){switch(e.tag){case 26:case 27:case 5:return o(e.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}function u(e){try{var t="";do{t+=c(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function h(e){if(d(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(null===(t=d(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return h(i),e;if(a===r)return h(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function A(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=A(e)))return t;e=e.sibling}return null}function g(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(4!==e.tag&&null!==(t=g(e)))return t;e=e.sibling}return null}function p(e){return{current:e}}function f(e){0>xo||(e.current=fo[xo],fo[xo]=null,xo--)}function x(e,t){xo++,fo[xo]=e.current,e.current=t}function v(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function y(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&n;return 0!==o?0!==(n=o&~s)?r=v(n):0!==(i&=o)?r=v(i):e||0!==(a=o&~a)&&(r=v(a)):0!==(o=n&~s)?r=v(o):0!==i?r=v(i):e||0!==(a=n&~a)&&(r=v(a)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(a=t&-t)||32===s&&0!==(4194176&a))?t:r}function b(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function w(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function N(){var e=No;return 0===(4194176&(No<<=1))&&(No=128),e}function j(){var e=jo;return 0===(62914560&(jo<<=1))&&(jo=4194304),e}function C(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function T(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function S(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-yo(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function _(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yo(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function E(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function B(e){if("function"===typeof Io&&Do(e),Fo&&"function"===typeof Fo.setStrictMode)try{Fo.setStrictMode(Po,e)}catch(t){}}function M(e,t){if("object"===typeof e&&null!==e){var n=Ro.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},Ro.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function k(e,t){Oo[Ho++]=zo,Oo[Ho++]=Qo,Qo=e,zo=t}function L(e,t,n){Vo[Ko++]=qo,Vo[Ko++]=Wo,Vo[Ko++]=Go,Go=e;var r=qo;e=Wo;var s=32-yo(r)-1;r&=~(1<<s),n+=1;var i=32-yo(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qo=1<<32-yo(t)+s|n<<s|r,Wo=i+e}else qo=1<<i|n<<s|r,Wo=e}function I(e){null!==e.return&&(k(e,1),L(e,1,0))}function D(e){for(;e===Qo;)Qo=Oo[--Ho],Oo[Ho]=null,zo=Oo[--Ho],Oo[Ho]=null;for(;e===Go;)Go=Vo[--Ko],Vo[Ko]=null,Wo=Vo[--Ko],Vo[Ko]=null,qo=Vo[--Ko],Vo[Ko]=null}function P(e,t){x(Yo,t),x(Xo,e),x($o,null),e=fi(t),f($o),x($o,e)}function F(){f($o),f(Xo),f(Yo)}function U(e){null!==e.memoizedState&&x(Jo,e);var t=$o.current,n=xi(t,e.type);t!==n&&(x(Xo,e),x($o,n))}function R(e){Xo.current===e&&(f($o),f(Xo)),Jo.current===e&&(f(Jo),Ei?Gi._currentValue=Ki:Gi._currentValue2=Ki)}function O(e){throw K(M(Error(s(418,"")),e)),sl}function H(e,t){if(!ki)throw Error(s(175));Ra(e.stateNode,e.type,e.memoizedProps,t,e)||O(e)}function Q(e){for(Zo=e.return;Zo;)switch(Zo.tag){case 3:case 27:return void(rl=!0);case 5:case 13:return void(rl=!1);default:Zo=Zo.return}}function z(e){if(!ki||e!==Zo)return!1;if(!tl)return Q(e),tl=!0,!1;var t=!1;if(uo?3!==e.tag&&27!==e.tag&&(5!==e.tag||qa(e.type)&&!ji(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||qa(e.type)&&!ji(e.type,e.memoizedProps))&&(t=!0),t&&el&&O(e),Q(e),13===e.tag){if(!ki)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));el=Qa(e)}else el=Zo?ka(e.stateNode):null;return!0}function V(){ki&&(el=Zo=null,tl=!1)}function K(e){null===nl?nl=[e]:nl.push(e)}function G(){for(var e=al,t=ol=al=0;t<e;){var n=il[t];il[t++]=null;var r=il[t];il[t++]=null;var s=il[t];il[t++]=null;var i=il[t];if(il[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&X(n,s,i)}}function q(e,t,n,r){il[al++]=e,il[al++]=t,il[al++]=n,il[al++]=r,ol|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function W(e,t,n,r){return q(e,t,n,r),Y(e)}function $(e,t){return q(e,null,null,t),Y(e)}function X(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;s&&null!==t&&3===e.tag&&(i=e.stateNode,s=31-yo(n),null===(e=(i=i.hiddenUpdates)[s])?i[s]=[t]:e.push(t),t.lane=536870912|n)}function Y(e){if(50<nu)throw nu=0,ru=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function J(e){var t;e!==cl&&null===e.next&&(null===cl?ll=cl=e:cl=cl.next=e),dl=!0,ul||(ul=!0,t=ee,Wi?$i((function(){0!==(6&_c)?Co(Bo,t):t()})):Co(Bo,t))}function Z(e,t){if(!hl&&dl){hl=!0;do{for(var n=!1,r=ll;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-yo(42|e)+1)-1,i=201326677&(i&=s&~(a&~o))?201326677&i|1:i?2|i:0}0!==i&&(n=!0,re(r,i))}else i=Mc,0===(3&(i=y(r,r===Ec?i:0)))||b(r,i)||(n=!0,re(r,i));r=r.next}}while(n);hl=!1}}function ee(){dl=ul=!1;var e=0;0!==ml&&(Ui()&&(e=ml),ml=0);for(var t=Eo(),n=null,r=ll;null!==r;){var s=r.next,i=te(r,t);0===i?(r.next=null,null===n?ll=s:n.next=s,null===s&&(cl=n)):(n=r,(0!==e||0!==(3&i))&&(dl=!0)),r=s}Z(e,!1)}function te(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-yo(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=w(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=Mc,n=y(e,e===(t=Ec)?n:0),r=e.callbackNode,0===n||e===t&&2===kc||null!==e.cancelPendingCommit)return null!==r&&null!==r&&To(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||b(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&To(r),E(n)){case 2:case 8:n=Mo;break;case 32:default:n=ko;break;case 268435456:n=Lo}return r=ne.bind(null,e),n=Co(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&To(r),e.callbackPriority=2,e.callbackNode=null,2}function ne(e,t){var n=e.callbackNode;if(ps()&&e.callbackNode!==n)return null;var r=Mc;return 0===(r=y(e,e===Ec?r:0))?null:(qr(e,r,t),te(e,Eo()),null!=e.callbackNode&&e.callbackNode===n?ne.bind(null,e):null)}function re(e,t){if(ps())return null;qr(e,t,!0)}function se(){return 0===ml&&(ml=N()),ml}function ie(){if(0===--gl&&null!==Al){null!==fl&&(fl.status="fulfilled");var e=Al;Al=null,pl=0,fl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ae(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function le(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ce(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_c)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Y(e),X(e,null,n),t}return q(e,r,t,n),Y(e)}function ue(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_(e,n)}}function de(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function he(){if(vl){if(null!==fl)throw fl}}function me(e,t,n,r){vl=!1;var s=e.updateQueue;xl=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(Mc&h)===h:(r&h)===h){0!==h&&h===pl&&(vl=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var A=e,g=o;h=t;var p=n;switch(g.tag){case 1:if("function"===typeof(A=g.payload)){d=A.call(p,d,h);break e}d=A;break e;case 3:A.flags=-65537&A.flags|128;case 0:if(null===(h="function"===typeof(A=g.payload)?A.call(p,d,h):A)||void 0===h)break e;d=zs({},d,h);break e;case 2:xl=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),Rc|=a,e.lanes=a,e.memoizedState=d}}function Ae(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function ge(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ae(n[e],t)}function pe(e,t){if(Uo(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yl.call(t,s)||!Uo(e[s],t[s]))return!1}return!0}function fe(e){return"fulfilled"===(e=e.status)||"rejected"===e}function xe(){}function ve(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(xe,xe),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===bl)throw Error(s(483));throw e;default:if("string"===typeof t.status)t.then(xe,xe);else{if(null!==(e=Ec)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===bl)throw Error(s(483));throw e}throw jl=t,bl}}function ye(){if(null===jl)throw Error(s(459));var e=jl;return jl=null,e}function be(e){var t=Tl;return Tl+=1,null===Cl&&(Cl=[]),ve(Cl,e,t)}function we(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ne(e,t){if(t.$$typeof===Vs)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function je(e){return(0,e._init)(e._payload)}function Ce(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Ts(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function c(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ms(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n,r){var s=n.type;return s===qs?m(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===ri&&je(s)===t.type)?(we(t=o(t,n.props),n),t.return=e,t):(we(t=_s(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ks(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function m(e,t,n,r,s){return null===t||7!==t.tag?((t=Es(n,e.mode,r,s)).return=e,t):((t=o(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ms(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Ks:return we(n=_s(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case Gs:return(t=ks(t,e.mode,n)).return=e,t;case ri:return A(e,t=(0,t._init)(t._payload),n)}if(hi(t)||i(t))return(t=Es(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return A(e,be(t),n);if(t.$$typeof===Js)return A(e,Ln(e,t),n);Ne(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Ks:return n.key===s?d(e,t,n,r):null;case Gs:return n.key===s?h(e,t,n,r):null;case ri:return g(e,t,n=(s=n._init)(n._payload),r)}if(hi(n)||i(n))return null!==s?null:m(e,t,n,r,null);if("function"===typeof n.then)return g(e,t,be(n),r);if(n.$$typeof===Js)return g(e,t,Ln(e,n),r);Ne(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return u(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Ks:return d(t,e=e.get(null===r.key?n:r.key)||null,r,s);case Gs:return h(t,e=e.get(null===r.key?n:r.key)||null,r,s);case ri:return p(e,t,n,r=(0,r._init)(r._payload),s)}if(hi(r)||i(r))return m(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return p(e,t,n,be(r),s);if(r.$$typeof===Js)return p(e,t,n,Ln(t,r),s);Ne(t,r)}return null}function f(t,u,d,h){if("object"===typeof d&&null!==d&&d.type===qs&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case Ks:e:{for(var m=d.key;null!==u;){if(u.key===m){if((m=d.type)===qs){if(7===u.tag){r(t,u.sibling),(h=o(u,d.props.children)).return=t,t=h;break e}}else if(u.elementType===m||"object"===typeof m&&null!==m&&m.$$typeof===ri&&je(m)===u.type){r(t,u.sibling),we(h=o(u,d.props),d),h.return=t,t=h;break e}r(t,u);break}n(t,u),u=u.sibling}d.type===qs?((h=Es(d.props.children,t.mode,h,d.key)).return=t,t=h):(we(h=_s(d.type,d.key,d.props,null,t.mode,h),d),h.return=t,t=h)}return c(t);case Gs:e:{for(m=d.key;null!==u;){if(u.key===m){if(4===u.tag&&u.stateNode.containerInfo===d.containerInfo&&u.stateNode.implementation===d.implementation){r(t,u.sibling),(h=o(u,d.children||[])).return=t,t=h;break e}r(t,u);break}n(t,u),u=u.sibling}(h=ks(d,t.mode,h)).return=t,t=h}return c(t);case ri:return f(t,u,d=(m=d._init)(d._payload),h)}if(hi(d))return function(t,s,i,o){for(var c=null,u=null,d=s,h=s=0,m=null;null!==d&&h<i.length;h++){d.index>h?(m=d,d=null):m=d.sibling;var f=g(t,d,i[h],o);if(null===f){null===d&&(d=m);break}e&&d&&null===f.alternate&&n(t,d),s=l(f,s,h),null===u?c=f:u.sibling=f,u=f,d=m}if(h===i.length)return r(t,d),tl&&k(t,h),c;if(null===d){for(;h<i.length;h++)null!==(d=A(t,i[h],o))&&(s=l(d,s,h),null===u?c=d:u.sibling=d,u=d);return tl&&k(t,h),c}for(d=a(d);h<i.length;h++)null!==(m=p(d,t,h,i[h],o))&&(e&&null!==m.alternate&&d.delete(null===m.key?h:m.key),s=l(m,s,h),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return n(t,e)})),tl&&k(t,h),c}(t,u,d,h);if(i(d)){if("function"!==typeof(m=i(d)))throw Error(s(150));return function(t,i,o,c){if(null==o)throw Error(s(151));for(var u=null,d=null,h=i,m=i=0,f=null,x=o.next();null!==h&&!x.done;m++,x=o.next()){h.index>m?(f=h,h=null):f=h.sibling;var v=g(t,h,x.value,c);if(null===v){null===h&&(h=f);break}e&&h&&null===v.alternate&&n(t,h),i=l(v,i,m),null===d?u=v:d.sibling=v,d=v,h=f}if(x.done)return r(t,h),tl&&k(t,m),u;if(null===h){for(;!x.done;m++,x=o.next())null!==(x=A(t,x.value,c))&&(i=l(x,i,m),null===d?u=x:d.sibling=x,d=x);return tl&&k(t,m),u}for(h=a(h);!x.done;m++,x=o.next())null!==(x=p(h,t,m,x.value,c))&&(e&&null!==x.alternate&&h.delete(null===x.key?m:x.key),i=l(x,i,m),null===d?u=x:d.sibling=x,d=x);return e&&h.forEach((function(e){return n(t,e)})),tl&&k(t,m),u}(t,u,d=m.call(d),h)}if("function"===typeof d.then)return f(t,u,be(d),h);if(d.$$typeof===Js)return f(t,u,Ln(t,d),h);Ne(t,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==u&&6===u.tag?(r(t,u.sibling),(h=o(u,d)).return=t,t=h):(r(t,u),(h=Ms(d,t.mode,h)).return=t,t=h),c(t)):r(t,u)}return function(e,n,r,s){try{Tl=0;var i=f(e,n,r,s);return Cl=null,i}catch(o){if(o===bl)throw o;var a=t(29,o,null,e.mode);return a.lanes=s,a.return=e,a}}}function Te(e,t){x(Bl,e=Fc),x(El,t),Fc=e|t.baseLanes}function Se(){x(Bl,Fc),x(El,El.current)}function _e(){Fc=Bl.current,f(El),f(Bl)}function Ee(e){var t=e.alternate;x(Ll,1&Ll.current),x(Ml,e),null===kl&&(null===t||null!==El.current||null!==t.memoizedState)&&(kl=e)}function Be(e){if(22===e.tag){if(x(Ll,Ll.current),x(Ml,e),null===kl){var t=e.alternate;null!==t&&null!==t.memoizedState&&(kl=e)}}else Me()}function Me(){x(Ll,Ll.current),x(Ml,Ml.current)}function ke(e){f(Ml),kl===e&&(kl=null),f(Ll)}function Le(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ta(n)||Sa(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ie(){throw Error(s(321))}function De(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Uo(e[n],t[n]))return!1;return!0}function Pe(e,t,n,r,s,i){return Il=i,Dl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ui.H=null===e||null===e.memoizedState?ql:Wl,Ol=!1,i=n(r,s),Ol=!1,Rl&&(i=Ue(t,n,r,s)),Fe(e),i}function Fe(e){ui.H=Gl;var t=null!==Pl&&null!==Pl.next;if(Il=0,Fl=Pl=Dl=null,Ul=!1,Ql=0,zl=null,t)throw Error(s(300));null===e||Zl||null!==(e=e.dependencies)&&Bn(e)&&(Zl=!0)}function Ue(e,t,n,r){Dl=e;var i=0;do{if(Rl&&(zl=null),Ql=0,Rl=!1,25<=i)throw Error(s(301));if(i+=1,Fl=Pl=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}ui.H=$l,a=t(n,r)}while(Rl);return a}function Re(){var e=ui.H,t=e.useState()[0];return t="function"===typeof t.then?Ke(t):t,e=e.useState()[0],(null!==Pl?Pl.memoizedState:null)!==e&&(Dl.flags|=1024),t}function Oe(){var e=0!==Hl;return Hl=0,e}function He(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Qe(e){if(Ul){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ul=!1}Il=0,Fl=Pl=Dl=null,Rl=!1,Ql=Hl=0,zl=null}function ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Fl?Dl.memoizedState=Fl=e:Fl=Fl.next=e,Fl}function Ve(){if(null===Pl){var e=Dl.alternate;e=null!==e?e.memoizedState:null}else e=Pl.next;var t=null===Fl?Dl.memoizedState:Fl.next;if(null!==t)Fl=t,Pl=e;else{if(null===e){if(null===Dl.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(Pl=e).memoizedState,baseState:Pl.baseState,baseQueue:Pl.baseQueue,queue:Pl.queue,next:null},null===Fl?Dl.memoizedState=Fl=e:Fl=Fl.next=e}return Fl}function Ke(e){var t=Ql;return Ql+=1,null===zl&&(zl=[]),e=ve(zl,e,t),t=Dl,null===(null===Fl?t.memoizedState:Fl.next)&&(t=t.alternate,ui.H=null===t||null===t.memoizedState?ql:Wl),e}function Ge(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ke(e);if(e.$$typeof===Js)return kn(e)}throw Error(s(438,String(e)))}function qe(e){var t=null,n=Dl.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Dl.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n=Kl(),Dl.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=oi;return t.index++,n}function We(e,t){return"function"===typeof t?t(e):t}function $e(e){return Xe(Ve(),Pl,e)}function Xe(e,t,n){var r=e.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(Mc&h)===h:(Il&h)===h){var m=u.revertLane;if(0===m)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===pl&&(d=!0);else{if((Il&m)===m){u=u.next,m===pl&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Dl.lanes|=m,Rc|=m}h=u.action,Ol&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else m={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=m,o=a):c=c.next=m,Dl.lanes|=h,Rc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Uo(a,e.memoizedState)&&(Zl=!0,d&&null!==(n=fl)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ye(e){var t=Ve(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);Uo(a,t.memoizedState)||(Zl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Je(e,t,n){var r=Dl,i=Ve(),a=tl;if(a){if(void 0===n)throw Error(s(407));n=n()}else n=t();var o=!Uo((Pl||i).memoizedState,n);if(o&&(i.memoizedState=n,Zl=!0),i=i.queue,Nt(tt.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Fl&&1&Fl.memoizedState.tag){if(r.flags|=2048,xt(9,et.bind(null,r,i,n,t),{destroy:void 0},null),null===Ec)throw Error(s(349));a||0!==(60&Il)||Ze(r,t,n)}return n}function Ze(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Dl.updateQueue)?(t=Kl(),Dl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function et(e,t,n,r){t.value=n,t.getSnapshot=r,nt(t)&&rt(e)}function tt(e,t,n){return n((function(){nt(t)&&rt(e)}))}function nt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Uo(e,n)}catch(r){return!0}}function rt(e){var t=$(e,2);null!==t&&Gr(t,e,2)}function st(e){var t=ze();if("function"===typeof e){var n=e;if(e=n(),Ol){B(!0);try{n()}finally{B(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:e},t}function it(e,t,n,r){return e.baseState=n,Xe(e,Pl,"function"===typeof r?r:We)}function at(e,t,n,r,i){if(zt(e))throw Error(s(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==ui.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ot(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ot(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=ui.T,a={};ui.T=a;try{var o=n(s,r),l=ui.S;null!==l&&l(a,o),lt(e,t,o)}catch(c){ut(e,t,c)}finally{ui.T=i}}else try{lt(e,t,i=n(s,r))}catch(u){ut(e,t,u)}}function lt(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){ct(e,t,n)}),(function(n){return ut(e,t,n)})):ct(e,t,n)}function ct(e,t,n){t.status="fulfilled",t.value=n,dt(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ot(e,n)))}function ut(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,dt(t),t=t.next}while(t!==r)}e.action=null}function dt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ht(e,t){return t}function mt(e,t){if(tl){var n=Ec.formState;if(null!==n){e:{var r=Dl;if(tl){if(el){var s=Ba(el,rl);if(s){el=ka(s),r=Ma(s);break e}}O(r)}r=!1}r&&(t=n[0])}}(n=ze()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:t},n.queue=r,n=Ot.bind(null,Dl,r),r.dispatch=n,r=st(!1);var i=Qt.bind(null,Dl,!1,r.queue);return s={state:t,dispatch:null,action:e,pending:null},(r=ze()).queue=s,n=at.bind(null,Dl,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function At(e){return gt(Ve(),Pl,e)}function gt(e,t,n){t=Xe(e,t,ht)[0],e=$e(We)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?Ke(t):t;var r=Ve(),s=r.queue,i=s.dispatch;return n!==r.memoizedState&&(Dl.flags|=2048,xt(9,pt.bind(null,s,n),{destroy:void 0},null)),[t,i,e]}function pt(e,t){e.action=t}function ft(e){var t=Ve(),n=Pl;if(null!==n)return gt(t,n,e);Ve(),t=t.memoizedState;var r=(n=Ve()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function xt(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Dl.updateQueue)&&(t=Kl(),Dl.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vt(){return Ve().memoizedState}function yt(e,t,n,r){var s=ze();Dl.flags|=e,s.memoizedState=xt(1|t,n,{destroy:void 0},void 0===r?null:r)}function bt(e,t,n,r){var s=Ve();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==Pl&&null!==r&&De(r,Pl.memoizedState.deps)?s.memoizedState=xt(t,n,i,r):(Dl.flags|=e,s.memoizedState=xt(1|t,n,i,r))}function wt(e,t){yt(8390656,8,e,t)}function Nt(e,t){bt(2048,8,e,t)}function jt(e,t){return bt(4,2,e,t)}function Ct(e,t){return bt(4,4,e,t)}function Tt(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function St(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bt(4,4,Tt.bind(null,t,e),n)}function _t(){}function Et(e,t){var n=Ve();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&De(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bt(e,t){var n=Ve();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&De(t,r[1]))return r[0];if(r=e(),Ol){B(!0);try{e()}finally{B(!1)}}return n.memoizedState=[r,t],r}function Mt(e,t,n){return void 0===n||0!==(1073741824&Il)?e.memoizedState=t:(e.memoizedState=n,e=Kr(),Dl.lanes|=e,Rc|=e,n)}function kt(e,t,n,r){return Uo(n,t)?n:null!==El.current?(e=Mt(e,n,r),Uo(e,t)||(Zl=!0),e):0===(42&Il)?(Zl=!0,e.memoizedState=n):(e=Kr(),Dl.lanes|=e,Rc|=e,t)}function Lt(e,t,n,r,s){var i=Pi();Di(0!==i&&8>i?i:8);var a=ui.T,o={};ui.T=o,Qt(e,!1,t,n);try{var l=s(),c=ui.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ht(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Vr());else Ht(e,t,r,Vr())}catch(u){Ht(e,t,{then:function(){},status:"rejected",reason:u},Vr())}finally{Di(i),ui.T=a}}function It(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:Ki,baseState:Ki,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:Ki},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:We,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Dt(){return kn(Gi)}function Pt(){return Ve().memoizedState}function Ft(){return Ve().memoizedState}function Ut(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Vr(),r=ce(t,e=le(n),n);return null!==r&&(Gr(r,t,n),ue(r,t,n)),t={cache:Dn()},void(e.payload=t)}t=t.return}}function Rt(e,t,n){var r=Vr();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},zt(e)?Vt(t,n):null!==(n=W(e,t,n,r))&&(Gr(n,e,r),Kt(n,t,r))}function Ot(e,t,n){Ht(e,t,n,Vr())}function Ht(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(zt(e))Vt(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Uo(o,a))return q(e,t,s,0),null===Ec&&G(),!1}catch(l){}if(null!==(n=W(e,t,s,r)))return Gr(n,e,r),Kt(n,t,r),!0}return!1}function Qt(e,t,n,r){if(r={lane:2,revertLane:se(),action:r,hasEagerState:!1,eagerState:null,next:null},zt(e)){if(t)throw Error(s(479))}else null!==(t=W(e,n,r,2))&&Gr(t,e,2)}function zt(e){var t=e.alternate;return e===Dl||null!==t&&t===Dl}function Vt(e,t){Rl=Ul=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kt(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,_(e,n)}}function Gt(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:zs({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function qt(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!pe(n,r)||!pe(s,i))}function Wt(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xl.enqueueReplaceState(t,t.state,null)}function $t(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=zs({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Xt(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Yt(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Jt(e,t,n){return(n=le(n)).tag=3,n.payload={element:null},n.callback=function(){Xt(e,t)},n}function Zt(e){return(e=le(e)).tag=3,e}function en(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){Yt(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Yt(t,n,r),"function"!==typeof s&&(null===Xc?Xc=new Set([this]):Xc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function tn(e,t,n,r){t.child=null===e?_l(t,null,n,r):Sl(t,e.child,n,r)}function nn(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Mn(t),r=Pe(e,t,n,a,i,s),o=Oe(),null===e||Zl?(tl&&o&&I(t),t.flags|=1,tn(e,t,r,s),t.child):(He(e,t,s),wn(e,t,s))}function rn(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Cs(i)||void 0!==i.defaultProps||null!==n.compare?((e=_s(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,sn(e,t,i,r,s))}if(i=e.child,!Nn(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:pe)(a,r)&&e.ref===t.ref)return wn(e,t,s)}return t.flags|=1,(e=Ts(i,r)).ref=t.ref,e.return=t,t.child=e}function sn(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(pe(i,r)&&e.ref===t.ref){if(Zl=!1,t.pendingProps=r=i,!Nn(e,s))return t.lanes=e.lanes,wn(e,t,s);0!==(131072&e.flags)&&(Zl=!0)}}return cn(e,t,n,r,s)}function an(e,t,n){var r=t.pendingProps,s=r.children,i=0!==(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if(ln(e,t),"hidden"===r.mode||i){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return on(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,on(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Un(t,null!==a?a.cachePool:null),null!==a?Te(t,a):Se(),Be(t)}else null!==a?(Un(t,a.cachePool),Te(t,a),Me(),t.memoizedState=null):(null!==e&&Un(t,null),Se(),Me());return tn(e,t,s,n),t.child}function on(e,t,n,r){var s=Fn();return s=null===s?null:{parent:Ei?oc._currentValue:oc._currentValue2,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Un(t,null),Se(),Be(t),null!==e&&En(e,t,r,!0),null}function ln(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function cn(e,t,n,r,s){return Mn(t),n=Pe(e,t,n,r,void 0,s),r=Oe(),null===e||Zl?(tl&&r&&I(t),t.flags|=1,tn(e,t,n,s),t.child):(He(e,t,s),wn(e,t,s))}function un(e,t,n,r,s,i){return Mn(t),t.updateQueue=null,n=Ue(t,r,n,s),Fe(e),r=Oe(),null===e||Zl?(tl&&r&&I(t),t.flags|=1,tn(e,t,n,i),t.child):(He(e,t,i),wn(e,t,i))}function dn(e,t,n,r,s){if(Mn(t),null===t.stateNode){var i=vo,a=n.contextType;"object"===typeof a&&null!==a&&(i=kn(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Xl,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ae(t),a=n.contextType,i.context="object"===typeof a&&null!==a?kn(a):vo,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(Gt(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&Xl.enqueueReplaceState(i,i.state,null),me(t,r,i,s),he(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=$t(n,o);i.props=l;var c=i.context,u=n.contextType;a=vo,"object"===typeof u&&null!==u&&(a=kn(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&Wt(t,i,r,a),xl=!1;var h=t.memoizedState;i.state=h,me(t,r,i,s),he(),c=t.memoizedState,o||h!==c||xl?("function"===typeof d&&(Gt(t,n,d,r),c=t.memoizedState),(l=xl||qt(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,oe(e,t),u=$t(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=vo,"object"===typeof c&&null!==c&&(l=kn(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&Wt(t,i,r,l),xl=!1,h=t.memoizedState,i.state=h,me(t,r,i,s),he();var m=t.memoizedState;a!==d||h!==m||xl||null!==e&&null!==e.dependencies&&Bn(e.dependencies)?("function"===typeof o&&(Gt(t,n,o,r),m=t.memoizedState),(u=xl||qt(t,n,u,r,h,m,l)||null!==e&&null!==e.dependencies&&Bn(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),i.props=r,i.state=m,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,ln(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=Sl(t,e.child,null,s),t.child=Sl(t,null,n,s)):tn(e,t,n,s),t.memoizedState=i.state,e=t.child):e=wn(e,t,s),e}function hn(e,t,n,r){return V(),t.flags|=256,tn(e,t,n,r),t.child}function mn(e){return{baseLanes:e,cachePool:Rn()}}function An(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Qc),e}function gn(e,n,r){var i,a=n.pendingProps,o=!1,l=0!==(128&n.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&Ll.current)),i&&(o=!0,n.flags&=-129),i=0!==(32&n.flags),n.flags&=-33,null===e){if(tl){if(o?Ee(n):Me(),tl){var c,u=el;(c=u)&&(null!==(u=Ua(u,rl))?(n.memoizedState={dehydrated:u,treeContext:null!==Go?{id:qo,overflow:Wo}:null,retryLane:536870912},(c=t(18,null,null,0)).stateNode=u,c.return=n,n.child=c,Zo=n,el=null,c=!0):c=!1),c||O(n)}if(null!==(u=n.memoizedState)&&null!==(u=u.dehydrated))return Sa(u)?n.lanes=16:n.lanes=536870912,null;ke(n)}return u=a.children,a=a.fallback,o?(Me(),u=fn({mode:"hidden",children:u},o=n.mode),a=Es(a,o,r,null),u.return=n,a.return=n,u.sibling=a,n.child=u,(o=n.child).memoizedState=mn(r),o.childLanes=An(e,i,r),n.memoizedState=ec,a):(Ee(n),pn(n,u))}if(null!==(c=e.memoizedState)&&null!==(u=c.dehydrated)){if(l)256&n.flags?(Ee(n),n.flags&=-257,n=xn(e,n,r)):null!==n.memoizedState?(Me(),n.child=e.child,n.flags|=128,n=null):(Me(),o=a.fallback,u=n.mode,a=fn({mode:"visible",children:a.children},u),(o=Es(o,u,r,null)).flags|=2,a.return=n,o.return=n,a.sibling=o,n.child=a,Sl(n,e.child,null,r),(a=n.child).memoizedState=mn(r),a.childLanes=An(e,i,r),n.memoizedState=ec,n=o);else if(Ee(n),Sa(u))i=_a(u).digest,(a=Error(s(419))).stack="",a.digest=i,K({value:a,source:null,stack:null}),n=xn(e,n,r);else if(Zl||En(e,n,r,!1),i=0!==(r&e.childLanes),Zl||i){if(null!==(i=Ec)){if(0!==(42&(a=r&-r)))a=1;else switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=64;break;case 268435456:a=134217728;break;default:a=0}if(0!==(a=0!==(a&(i.suspendedLanes|r))?0:a)&&a!==c.retryLane)throw c.retryLane=a,$(e,a),Gr(i,e,a),Jl}Ta(u)||is(),n=xn(e,n,r)}else Ta(u)?(n.flags|=128,n.child=e.child,n=ws.bind(null,e),Ea(u,n),n=null):(e=c.treeContext,ki&&(el=Da(u),Zo=n,tl=!0,nl=null,rl=!1,null!==e&&(Vo[Ko++]=qo,Vo[Ko++]=Wo,Vo[Ko++]=Go,qo=e.id,Wo=e.overflow,Go=n)),(n=pn(n,a.children)).flags|=4096);return n}return o?(Me(),o=a.fallback,u=n.mode,l=(c=e.child).sibling,(a=Ts(c,{mode:"hidden",children:a.children})).subtreeFlags=31457280&c.subtreeFlags,null!==l?o=Ts(l,o):(o=Es(o,u,r,null)).flags|=2,o.return=n,a.return=n,a.sibling=o,n.child=a,a=o,o=n.child,null===(u=e.child.memoizedState)?u=mn(r):(null!==(c=u.cachePool)?(l=Ei?oc._currentValue:oc._currentValue2,c=c.parent!==l?{parent:l,pool:l}:c):c=Rn(),u={baseLanes:u.baseLanes|r,cachePool:c}),o.memoizedState=u,o.childLanes=An(e,i,r),n.memoizedState=ec,a):(Ee(n),e=(r=e.child).sibling,(r=Ts(r,{mode:"visible",children:a.children})).return=n,r.sibling=null,null!==e&&(null===(i=n.deletions)?(n.deletions=[e],n.flags|=16):i.push(e)),n.child=r,n.memoizedState=null,r)}function pn(e,t){return(t=fn({mode:"visible",children:t},e.mode)).return=e,e.child=t}function fn(e,t){return Bs(e,t,0,null)}function xn(e,t,n){return Sl(t,e.child,null,n),(e=pn(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function vn(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sn(e.return,t,n)}function yn(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bn(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(tn(e,t,r.children,n),0!==(2&(r=Ll.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&vn(e,n,t);else if(19===e.tag)vn(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(x(Ll,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Le(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),yn(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Le(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}yn(t,!0,n,null,i);break;case"together":yn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wn(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(En(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ts(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ts(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Nn(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Bn(e))}function jn(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Zl=!0;else{if(!Nn(e,n)&&0===(128&t.flags))return Zl=!1,function(e,t,n){switch(t.tag){case 3:P(t,t.stateNode.containerInfo),Cn(t,oc,e.memoizedState.cache),V();break;case 27:case 5:U(t);break;case 4:P(t,t.stateNode.containerInfo);break;case 10:Cn(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ee(t),t.flags|=128,null):0!==(n&t.child.childLanes)?gn(e,t,n):(Ee(t),null!==(e=wn(e,t,n))?e.sibling:null);Ee(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(En(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return bn(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),x(Ll,Ll.current),r)break;return null;case 22:case 23:return t.lanes=0,an(e,t,n);case 24:Cn(t,oc,e.memoizedState.cache)}return wn(e,t,n)}(e,t,n);Zl=0!==(131072&e.flags)}else Zl=!1,tl&&0!==(1048576&t.flags)&&L(t,zo,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===Zs){t.tag=11,t=nn(null,t,r,e,n);break e}if(i===ni){t.tag=14,t=rn(null,t,r,e,n);break e}}throw t=a(r)||r,Error(s(306,t,""))}Cs(r)?(e=$t(r,e),t.tag=1,t=dn(null,t,r,e,n)):(t.tag=0,t=cn(null,t,r,e,n))}return t;case 0:return cn(e,t,t.type,t.pendingProps,n);case 1:return dn(e,t,r=t.type,i=$t(r,t.pendingProps),n);case 3:e:{if(P(t,t.stateNode.containerInfo),null===e)throw Error(s(387));var o=t.pendingProps;r=(i=t.memoizedState).element,oe(e,t),me(t,o,null,n);var l=t.memoizedState;if(o=l.cache,Cn(t,oc,o),o!==i.cache&&_n(t,[oc],n,!0),he(),o=l.element,ki&&i.isDehydrated){if(i={element:o,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=hn(e,t,o,n);break e}if(o!==r){K(r=M(Error(s(424)),t)),t=hn(e,t,o,n);break e}for(ki&&(el=Ia(t.stateNode.containerInfo),Zo=t,tl=!0,nl=null,rl=!0),n=_l(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(V(),o===r){t=wn(e,t,n);break e}tn(e,t,o,n)}t=t.child}return t;case 26:if(Xa)return ln(e,t),null===e?(n=Za(t.type,null,t.pendingProps,null))?t.memoizedState=n:tl||(t.stateNode=io(t.type,t.pendingProps,Yo.current,t)):t.memoizedState=Za(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(uo)return U(t),null===e&&uo&&tl&&(r=t.stateNode=ho(t.type,t.pendingProps,Yo.current,$o.current,!1),Zo=t,rl=!0,el=La(r)),r=t.pendingProps.children,null!==e||tl?tn(e,t,r,n):t.child=Sl(t,null,r,n),ln(e,t),t.child;case 5:return null===e&&tl&&(Wa(t.type,t.pendingProps,$o.current),(i=r=el)&&(null!==(r=Pa(r,t.type,t.pendingProps,rl))?(t.stateNode=r,Zo=t,el=La(r),rl=!1,i=!0):i=!1),i||O(t)),U(t),i=t.type,o=t.pendingProps,l=null!==e?e.memoizedProps:null,r=o.children,ji(i,o)?r=null:null!==l&&ji(i,l)&&(t.flags|=32),null!==t.memoizedState&&(i=Pe(e,t,Re,null,null,n),Ei?Gi._currentValue=i:Gi._currentValue2=i),ln(e,t),tn(e,t,r,n),t.child;case 6:return null===e&&tl&&($a(t.pendingProps,$o.current),(e=n=el)&&(null!==(n=Fa(n,t.pendingProps,rl))?(t.stateNode=n,Zo=t,el=null,e=!0):e=!1),e||O(t)),null;case 13:return gn(e,t,n);case 4:return P(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sl(t,null,r,n):tn(e,t,r,n),t.child;case 11:return nn(e,t,t.type,t.pendingProps,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Cn(t,t.type,r.value),tn(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Mn(t),r=r(i=kn(i)),t.flags|=1,tn(e,t,r,n),t.child;case 14:return rn(e,t,t.type,t.pendingProps,n);case 15:return sn(e,t,t.type,t.pendingProps,n);case 19:return bn(e,t,n);case 22:return an(e,t,n);case 24:return Mn(t),r=kn(oc),null===e?(null===(i=Fn())&&(i=Ec,o=Dn(),i.pooledCache=o,o.refCount++,null!==o&&(i.pooledCacheLanes|=n),i=o),t.memoizedState={parent:r,cache:i},ae(t),Cn(t,oc,i)):(0!==(e.lanes&n)&&(oe(e,t),me(t,null,null,n),he()),i=e.memoizedState,o=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Cn(t,oc,r)):(r=o.cache,Cn(t,oc,r),r!==i.cache&&_n(t,[oc],n,!0))),tn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function Cn(e,t,n){Ei?(x(tc,t._currentValue),t._currentValue=n):(x(tc,t._currentValue2),t._currentValue2=n)}function Tn(e){var t=tc.current;Ei?e._currentValue=t:e._currentValue2=t,f(tc)}function Sn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _n(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Sn(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Sn(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function En(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(s(387));if(null!==(o=o.memoizedProps)){var l=i.type;Uo(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===Jo.current){if(null===(o=i.alternate))throw Error(s(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gi):e=[Gi])}i=i.return}null!==e&&_n(t,e,n,r),t.flags|=262144}function Bn(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!Uo(Ei?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Mn(e){nc=e,rc=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function kn(e){return In(nc,e)}function Ln(e,t){return null===nc&&Mn(e),In(e,t)}function In(e,t){var n=Ei?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===rc){if(null===e)throw Error(s(308));rc=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rc=rc.next=t;return n}function Dn(){return{controller:new sc,data:new Map,refCount:0}}function Pn(e){e.refCount--,0===e.refCount&&ic(ac,(function(){e.controller.abort()}))}function Fn(){var e=cc.current;return null!==e?e:Ec.pooledCache}function Un(e,t){x(cc,null===t?cc.current:t.pool)}function Rn(){var e=Fn();return null===e?null:{parent:Ei?oc._currentValue:oc._currentValue2,pool:e}}function On(e){e.flags|=4}function Hn(e,t){if(null!==e&&e.child===t.child)return!1;if(0!==(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!==(13878&e.flags)||0!==(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function Qn(e,t,n,r){if(Bi)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)wi(e,n.stateNode);else if(!(4===n.tag||uo&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(Mi)for(var s=t.child;null!==s;){if(5===s.tag){var i=s.stateNode;n&&r&&(i=ja(i,s.type,s.memoizedProps)),wi(e,i)}else if(6===s.tag)i=s.stateNode,n&&r&&(i=Ca(i,s.memoizedProps)),wi(e,i);else if(4!==s.tag)if(22===s.tag&&null!==s.memoizedState)null!==(i=s.child)&&(i.return=s),Qn(e,s,!0,!0);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}}function zn(e,t,n,r){if(Mi)for(var s=t.child;null!==s;){if(5===s.tag){var i=s.stateNode;n&&r&&(i=ja(i,s.type,s.memoizedProps)),ba(e,i)}else if(6===s.tag)i=s.stateNode,n&&r&&(i=Ca(i,s.memoizedProps)),ba(e,i);else if(4!==s.tag)if(22===s.tag&&null!==s.memoizedState)null!==(i=s.child)&&(i.return=s),zn(e,s,!(null!==s.memoizedProps&&"manual"===s.memoizedProps.mode),!0);else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}}function Vn(e,t){if(Mi&&Hn(e,t)){var n=(e=t.stateNode).containerInfo,r=ya();zn(r,t,!1,!1),e.pendingChildren=r,On(t),wa(n,r)}}function Kn(e,t,n,r){if(Bi)e.memoizedProps!==r&&On(t);else if(Mi){var s=e.stateNode,i=e.memoizedProps;if((e=Hn(e,t))||i!==r){var a=$o.current;(i=va(s,n,i,r,!e,null))===s?t.stateNode=s:(Ni(i,n,r,a)&&On(t),t.stateNode=i,e?Qn(i,t,!1,!1):On(t))}else t.stateNode=s}}function Gn(e,t,n){if(Oi(t,n)){if(e.flags|=16777216,!Hi(t,n)){if(!ns())throw jl=Nl,wl;e.flags|=8192}}else e.flags&=-16777217}function qn(e,t){if(oo(t)){if(e.flags|=16777216,!lo(t)){if(!ns())throw jl=Nl,wl;e.flags|=8192}}else e.flags&=-16777217}function Wn(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?j():536870912,e.lanes|=t,zc|=t)}function $n(e,t){if(!tl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xn(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=31457280&s.subtreeFlags,r|=31457280&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Yn(e,t,n){var r=t.pendingProps;switch(D(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Xn(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Tn(oc),F(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(z(t)?On(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==nl&&(Wr(nl),nl=null))),Vn(e,t),Xn(t),null;case 26:if(Xa){n=t.type;var i=t.memoizedState;return null===e?(On(t),null!==i?(Xn(t),qn(t,i)):(Xn(t),Gn(t,n,r))):i?i!==e.memoizedState?(On(t),Xn(t),qn(t,i)):(Xn(t),t.flags&=-16777217):(Bi?e.memoizedProps!==r&&On(t):Kn(e,t,n,r),Xn(t),Gn(t,n,r)),null}case 27:if(uo){if(R(t),n=Yo.current,i=t.type,null!==e&&null!=t.stateNode)Bi?e.memoizedProps!==r&&On(t):Kn(e,t,i,r);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xn(t),null}e=$o.current,z(t)?H(t,e):(e=ho(i,r,n,e,!0),t.stateNode=e,On(t))}return Xn(t),null}case 5:if(R(t),n=t.type,null!==e&&null!=t.stateNode)Kn(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xn(t),null}e=$o.current,z(t)?H(t,e):(Qn(i=bi(n,r,Yo.current,e,t),t,!1,!1),t.stateNode=i,Ni(i,n,r,e)&&On(t))}return Xn(t),Gn(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,Bi?n!==r&&On(t):Mi&&(n!==r?(t.stateNode=Ci(r,Yo.current,$o.current,t),On(t)):t.stateNode=e.stateNode);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(e=Yo.current,n=$o.current,z(t)){if(!ki)throw Error(s(176));if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Zo))switch(i.tag){case 27:case 5:r=i.memoizedProps}Oa(e,n,t,r)||O(t)}else t.stateNode=Ci(r,e,n,t)}return Xn(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=z(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!ki)throw Error(s(344));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));Ha(i,t)}else V(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xn(t),i=!1}else null!==nl&&(Wr(nl),nl=null),i=!0;if(!i)return 256&t.flags?(ke(t),t):(ke(t),null)}if(ke(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wn(t,t.updateQueue),Xn(t),null;case 4:return F(),Vn(e,t),null===e&&Ii(t.stateNode.containerInfo),Xn(t),null;case 10:return Tn(t.type),Xn(t),null;case 19:if(f(Ll),null===(i=t.memoizedState))return Xn(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)$n(i,!1);else{if(0!==Uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Le(e))){for(t.flags|=128,$n(i,!1),e=a.updateQueue,t.updateQueue=e,Wn(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ss(n,e),n=n.sibling;return x(Ll,1&Ll.current|2),t.child}e=e.sibling}null!==i.tail&&Eo()>Wc&&(t.flags|=128,r=!0,$n(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Le(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wn(t,e),$n(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!tl)return Xn(t),null}else 2*Eo()-i.renderingStartTime>Wc&&536870912!==n&&(t.flags|=128,r=!0,$n(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Eo(),t.sibling=null,e=Ll.current,x(Ll,r?1&e|2:1&e),t):(Xn(t),null);case 22:case 23:return ke(t),_e(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Xn(t),6&t.subtreeFlags&&(t.flags|=8192)):Xn(t),null!==(n=t.updateQueue)&&Wn(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&f(cc),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tn(oc),Xn(t),null;case 25:return null}throw Error(s(156,t.tag))}function Jn(e,t){switch(D(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tn(oc),F(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return R(t),null;case 13:if(ke(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));V()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return f(Ll),null;case 4:return F(),null;case 10:return Tn(t.type),null;case 22:case 23:return ke(t),_e(),null!==e&&f(cc),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tn(oc),null;default:return null}}function Zn(e,t){switch(D(t),t.tag){case 3:Tn(oc),F();break;case 26:case 27:case 5:R(t);break;case 4:F();break;case 13:ke(t);break;case 19:f(Ll);break;case 10:Tn(t.type);break;case 22:case 23:ke(t),_e(),null!==e&&f(cc);break;case 24:Tn(oc)}}function er(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){xs(t,t.return,o)}}function tr(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n;try{o()}catch(c){xs(s,l,c)}}}r=r.next}while(r!==i)}}catch(c){xs(t,t.return,c)}}function nr(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ge(t,n)}catch(r){xs(e,e.return,r)}}}function rr(e,t,n){n.props=$t(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){xs(e,t,r)}}function sr(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var s=pi(r);break;default:s=r}"function"===typeof n?e.refCleanup=n(s):n.current=s}}catch(i){xs(e,t,i)}}function ir(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){xs(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){xs(e,t,i)}else n.current=null}function ar(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{oa(r,t,n,e)}catch(s){xs(e,e.return,s)}}function or(e,t,n){try{la(e.stateNode,e.type,n,t,e)}catch(r){xs(e,e.return,r)}}function lr(e){return 5===e.tag||3===e.tag||!!Xa&&26===e.tag||!!uo&&27===e.tag||4===e.tag}function cr(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(!uo||27!==e.tag)&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ur(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ua(n,e,t):ia(n,e);else if(!(4===r||uo&&27===r)&&null!==(e=e.child))for(ur(e,t,n),e=e.sibling;null!==e;)ur(e,t,n),e=e.sibling}function dr(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ca(n,e,t):sa(n,e);else if(!(4===r||uo&&27===r)&&null!==(e=e.child))for(dr(e,t,n),e=e.sibling;null!==e;)dr(e,t,n),e=e.sibling}function hr(e,t,n){e=e.containerInfo;try{Na(e,n)}catch(r){xs(t,t.return,r)}}function mr(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Nr(e,n),4&r&&er(5,n);break;case 1:if(Nr(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){xs(n,n.return,o)}else{var s=$t(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){xs(n,n.return,l)}}64&r&&nr(n),512&r&&sr(n,n.return);break;case 3:if(Nr(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=pi(n.child.stateNode);break;case 1:e=n.child.stateNode}try{ge(r,e)}catch(o){xs(n,n.return,o)}}break;case 26:if(Xa){Nr(e,n),512&r&&sr(n,n.return);break}case 27:case 5:Nr(e,n),null===t&&4&r&&ar(n),512&r&&sr(n,n.return);break;case 12:Nr(e,n);break;case 13:Nr(e,n),4&r&&fr(e,n);break;case 22:if(!(s=null!==n.memoizedState||uc)){t=null!==t&&null!==t.memoizedState||dc;var i=uc,a=dc;uc=s,(dc=t)&&!a?Cr(e,n,0!==(8772&n.subtreeFlags)):Nr(e,n),uc=i,dc=a}512&r&&("manual"===n.memoizedProps.mode?sr(n,n.return):ir(n,n.return));break;default:Nr(e,n)}}function Ar(e){var t=e.alternate;null!==t&&(e.alternate=null,Ar(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ri(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gr(e,t,n){for(n=n.child;null!==n;)pr(e,t,n),n=n.sibling}function pr(e,t,n){if(Fo&&"function"===typeof Fo.onCommitFiberUnmount)try{Fo.onCommitFiberUnmount(Po,n)}catch(i){}switch(n.tag){case 26:if(Xa){dc||ir(n,t),gr(e,t,n),n.memoizedState?to(n.memoizedState):n.stateNode&&so(n.stateNode);break}case 27:if(uo){dc||ir(n,t);var r=pc,s=fc;pc=n.stateNode,gr(e,t,n),go(n.stateNode),pc=r,fc=s;break}case 5:dc||ir(n,t);case 6:if(Bi){if(r=pc,s=fc,pc=null,gr(e,t,n),fc=s,null!==(pc=r))if(fc)try{ha(pc,n.stateNode)}catch(a){xs(n,t,a)}else try{da(pc,n.stateNode)}catch(a){xs(n,t,a)}}else gr(e,t,n);break;case 18:Bi&&null!==pc&&(fc?Ga(pc,n.stateNode):Ka(pc,n.stateNode));break;case 4:Bi?(r=pc,s=fc,pc=n.stateNode.containerInfo,fc=!0,gr(e,t,n),pc=r,fc=s):(Mi&&hr(n.stateNode,n,ya()),gr(e,t,n));break;case 0:case 11:case 14:case 15:dc||tr(2,n,t),dc||tr(4,n,t),gr(e,t,n);break;case 1:dc||(ir(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&rr(n,t,r)),gr(e,t,n);break;case 21:gr(e,t,n);break;case 22:dc||ir(n,t),dc=(r=dc)||null!==n.memoizedState,gr(e,t,n),dc=r;break;default:gr(e,t,n)}}function fr(e,t){if(ki&&null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Va(e)}catch(n){xs(t,t.return,n)}}function xr(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new mc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new mc),t;default:throw Error(s(435,e.tag))}}(e);t.forEach((function(t){var r=Ns.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function vr(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t;if(Bi){var l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:pc=l.stateNode,fc=!1;break e;case 3:case 4:pc=l.stateNode.containerInfo,fc=!0;break e}l=l.return}if(null===pc)throw Error(s(160));pr(a,o,i),pc=null,fc=!1}else pr(a,o,i);null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)yr(t,e),t=t.sibling}function yr(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vr(t,e),br(e),4&r&&(tr(3,e,e.return),er(3,e),tr(5,e,e.return));break;case 1:vr(t,e),br(e),512&r&&(dc||null===n||ir(n,n.return)),64&r&&uc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:if(Xa){var i=xc;vr(t,e),br(e),512&r&&(dc||null===n||ir(n,n.return)),4&r&&(r=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=no(i,e.type,e.memoizedProps,e):ro(i,e.type,e.stateNode):e.stateNode=eo(i,t,e.memoizedProps):r!==t?(null===r?null!==n.stateNode&&so(n.stateNode):to(r),null===t?ro(i,e.type,e.stateNode):eo(i,t,e.memoizedProps)):null===t&&null!==e.stateNode&&or(e,e.memoizedProps,n.memoizedProps));break}case 27:if(uo&&4&r&&null===e.alternate){i=e.stateNode;var a=e.memoizedProps;try{mo(i),Ao(e.type,a,i,e)}catch(d){xs(e,e.return,d)}}case 5:if(vr(t,e),br(e),512&r&&(dc||null===n||ir(n,n.return)),Bi){if(32&e.flags){t=e.stateNode;try{ma(t)}catch(d){xs(e,e.return,d)}}4&r&&null!=e.stateNode&&or(e,t=e.memoizedProps,null!==n?n.memoizedProps:t),1024&r&&(hc=!0)}break;case 6:if(vr(t,e),br(e),4&r&&Bi){if(null===e.stateNode)throw Error(s(162));r=e.memoizedProps,n=null!==n?n.memoizedProps:r,t=e.stateNode;try{aa(t,n,r)}catch(d){xs(e,e.return,d)}}break;case 3:if(Xa?(ao(),i=xc,xc=Ja(t.containerInfo),vr(t,e),xc=i):vr(t,e),br(e),4&r){if(Bi&&ki&&null!==n&&n.memoizedState.isDehydrated)try{za(t.containerInfo)}catch(d){xs(e,e.return,d)}if(Mi){r=t.containerInfo,n=t.pendingChildren;try{Na(r,n)}catch(d){xs(e,e.return,d)}}}hc&&(hc=!1,wr(e));break;case 4:Xa?(n=xc,xc=Ja(e.stateNode.containerInfo),vr(t,e),br(e),xc=n):(vr(t,e),br(e)),4&r&&Mi&&hr(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:vr(t,e),br(e);break;case 13:vr(t,e),br(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(qc=Eo()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,xr(e,r)));break;case 22:512&r&&(dc||null===n||ir(n,n.return)),i=null!==e.memoizedState;var o=null!==n&&null!==n.memoizedState,l=uc,c=dc;if(uc=l||i,dc=c||o,vr(t,e),dc=c,uc=l,br(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=i?-2&t._visibility:1|t._visibility,i&&(t=uc||dc,null===n||o||t||jr(e)),Bi&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode)))e:if(n=null,Bi)for(t=e;;){if(5===t.tag||Xa&&26===t.tag||uo&&27===t.tag){if(null===n){o=n=t;try{a=o.stateNode,i?Aa(a):pa(o.stateNode,o.memoizedProps)}catch(d){xs(o,o.return,d)}}}else if(6===t.tag){if(null===n){o=t;try{var u=o.stateNode;i?ga(u):fa(u,o.memoizedProps)}catch(d){xs(o,o.return,d)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,xr(e,n))));break;case 19:vr(t,e),br(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,xr(e,r)));break;case 21:break;default:vr(t,e),br(e)}}function br(e){var t=e.flags;if(2&t){try{if(Bi&&(!uo||27!==e.tag)){e:{for(var n=e.return;null!==n;){if(lr(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 27:if(uo){var i=r.stateNode;dr(e,cr(e),i);break}case 5:var a=r.stateNode;32&r.flags&&(ma(a),r.flags&=-33),dr(e,cr(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ur(e,cr(e),o);break;default:throw Error(s(161))}}}catch(l){xs(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wr(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;wr(t),5===t.tag&&1024&t.flags&&qi(t.stateNode),e=e.sibling}}function Nr(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)mr(e,t.alternate,t),t=t.sibling}function jr(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:tr(4,t,t.return),jr(t);break;case 1:ir(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&rr(t,t.return,n),jr(t);break;case 26:case 27:case 5:ir(t,t.return),jr(t);break;case 22:ir(t,t.return),null===t.memoizedState&&jr(t);break;default:jr(t)}e=e.sibling}}function Cr(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Cr(s,i,n),er(4,i);break;case 1:if(Cr(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){xs(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Ae(l[s],o)}catch(c){xs(r,r.return,c)}}n&&64&a&&nr(i),sr(i,i.return);break;case 26:case 27:case 5:Cr(s,i,n),n&&null===r&&4&a&&ar(i),sr(i,i.return);break;case 12:default:Cr(s,i,n);break;case 13:Cr(s,i,n),n&&4&a&&fr(s,i);break;case 22:null===i.memoizedState&&Cr(s,i,n),sr(i,i.return)}t=t.sibling}}function Tr(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Pn(n))}function Sr(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pn(e))}function _r(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Er(e,t,n,r),t=t.sibling}function Er(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:_r(e,t,n,r),2048&s&&er(9,t);break;case 3:_r(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pn(e)));break;case 12:if(2048&s){_r(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){xs(t,t.return,l)}}else _r(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,null!==t.memoizedState?4&i._visibility?_r(e,t,n,r):Mr(e,t):4&i._visibility?_r(e,t,n,r):(i._visibility|=4,Br(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&Tr(t.alternate,t);break;case 24:_r(e,t,n,r),2048&s&&Sr(t.alternate,t);break;default:_r(e,t,n,r)}}function Br(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Br(i,a,o,l,s),er(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?4&u._visibility?Br(i,a,o,l,s):Mr(i,a):(u._visibility|=4,Br(i,a,o,l,s)),s&&2048&c&&Tr(a.alternate,a);break;case 24:Br(i,a,o,l,s),s&&2048&c&&Sr(a.alternate,a);break;default:Br(i,a,o,l,s)}t=t.sibling}}function Mr(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Mr(n,r),2048&s&&Tr(r.alternate,r);break;case 24:Mr(n,r),2048&s&&Sr(r.alternate,r);break;default:Mr(n,r)}t=t.sibling}}function kr(e){if(e.subtreeFlags&vc)for(e=e.child;null!==e;)Lr(e),e=e.sibling}function Lr(e){switch(e.tag){case 26:kr(e),e.flags&vc&&(null!==e.memoizedState?co(xc,e.memoizedState,e.memoizedProps):zi(e.type,e.memoizedProps));break;case 5:kr(e),e.flags&vc&&zi(e.type,e.memoizedProps);break;case 3:case 4:if(Xa){var t=xc;xc=Ja(e.stateNode.containerInfo),kr(e),xc=t}else kr(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=vc,vc=16777216,kr(e),vc=t):kr(e));break;default:kr(e)}}function Ir(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Dr(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ac=r,Ur(r,e)}Ir(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Pr(e),e=e.sibling}function Pr(e){switch(e.tag){case 0:case 11:case 15:Dr(e),2048&e.flags&&tr(9,e,e.return);break;case 3:case 12:default:Dr(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Fr(e)):Dr(e)}}function Fr(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Ac=r,Ur(r,e)}Ir(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:tr(8,t,t.return),Fr(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Fr(t));break;default:Fr(t)}e=e.sibling}}function Ur(e,t){for(;null!==Ac;){var n=Ac;switch(n.tag){case 0:case 11:case 15:tr(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Pn(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Ac=r;else e:for(n=e;null!==Ac;){var s=(r=Ac).sibling,i=r.return;if(Ar(r),r===n){Ac=null;break e}if(null!==s){s.return=i,Ac=s;break e}Ac=i}}}function Rr(e){var t=Li(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=Yi(e)))throw Error(s(362));return e.stateNode.current}function Or(e,t){var n=e.tag;switch(t.$$typeof){case bc:if(e.type===t.value)return!0;break;case wc:e:{for(t=t.value,e=[e,0],n=0;n<e.length;){var r=e[n++],i=r.tag,a=e[n++],o=t[a];if(5!==i&&26!==i&&27!==i||!ea(r)){for(;null!=o&&Or(r,o);)o=t[++a];if(a===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,a),r=r.sibling}}t=!1}return t;case Nc:if((5===n||26===n||27===n)&&ta(e.stateNode,t.value))return!0;break;case Cc:if((5===n||6===n||26===n||27===n)&&(null!==(e=Zi(e))&&0<=e.indexOf(t.value)))return!0;break;case jc:if((5===n||26===n||27===n)&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Hr(e){switch(e.$$typeof){case bc:return"<"+(a(e.value)||"Unknown")+">";case wc:return":has("+(Hr(e)||"")+")";case Nc:return'[role="'+e.value+'"]';case Cc:return'"'+e.value+'"';case jc:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Qr(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var s=e[r++],i=s.tag,a=e[r++],o=t[a];if(5!==i&&26!==i&&27!==i||!ea(s)){for(;null!=o&&Or(s,o);)o=t[++a];if(a===t.length)n.push(s);else for(s=s.child;null!==s;)e.push(s,a),s=s.sibling}}return n}function zr(e,t){if(!Xi)throw Error(s(363));e=Qr(e=Rr(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++],i=r.tag;if(5===i||26===i||27===i)ea(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function Vr(){if(0!==(2&_c)&&0!==Mc)return Mc&-Mc;if(null!==ui.T){return 0!==pl?pl:se()}return Fi()}function Kr(){0===Qc&&(Qc=0===(536870912&Mc)||tl?N():536870912);var e=Ml.current;return null!==e&&(e.flags|=32),Qc}function Gr(e,t,n){(e===Ec&&2===kc||null!==e.cancelPendingCommit)&&(es(e,0),Yr(e,Mc,Qc,!1)),T(e,n),0!==(2&_c)&&e===Ec||(e===Ec&&(0===(2&_c)&&(Oc|=n),4===Uc&&Yr(e,Mc,Qc,!1)),J(e))}function qr(e,t,n){if(0!==(6&_c))throw Error(s(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||b(e,t),i=r?function(e,t){var n=_c;_c|=2;var r=rs(),i=ss();Ec!==e||Mc!==t?($c=null,Wc=Eo()+500,es(e,t)):Dc=b(e,t);e:for(;;)try{if(0!==kc&&null!==Bc){t=Bc;var a=Lc;t:switch(kc){case 1:kc=0,Lc=null,ds(e,t,a,1);break;case 2:if(fe(a)){kc=0,Lc=null,us(t);break}t=function(){2===kc&&Ec===e&&(kc=7),J(e)},a.then(t,t);break e;case 3:kc=7;break e;case 4:kc=5;break e;case 7:fe(a)?(kc=0,Lc=null,us(t)):(kc=0,Lc=null,ds(e,t,a,7));break;case 5:var o=null;switch(Bc.tag){case 26:o=Bc.memoizedState;case 5:case 27:var l=Bc,c=l.type,u=l.pendingProps;if(o?lo(o):Hi(c,u)){kc=0,Lc=null;var d=l.sibling;if(null!==d)Bc=d;else{var h=l.return;null!==h?(Bc=h,hs(h)):Bc=null}break t}}kc=0,Lc=null,ds(e,t,a,5);break;case 6:kc=0,Lc=null,ds(e,t,a,6);break;case 8:Zr(),Uc=6;break e;default:throw Error(s(462))}}ls();break}catch(m){ts(e,m)}return rc=nc=null,ui.H=r,ui.A=i,_c=n,null!==Bc?0:(Ec=null,Mc=0,G(),Uc)}(e,t):as(e,t,!0),a=r;;){if(0===i){Dc&&!r&&Yr(e,t,0,!1);break}if(6===i)Yr(e,t,0,!Ic);else{if(n=e.current.alternate,a&&!Xr(n)){i=as(e,t,!1),a=!1;continue}if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Vc;var c=ki&&l.current.memoizedState.isDehydrated;if(c&&(es(l,o).flags|=256),2!==(o=as(l,o,!1))){if(Pc&&!c){l.errorRecoveryDisabledLanes|=a,Oc|=a,i=4;break e}a=Kc,Kc=i,null!==a&&Wr(a)}i=o}if(a=!1,2!==i)continue}}if(1===i){es(e,0),Yr(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(s(345));case 4:if((4194176&t)===t){Yr(r,t,Qc,!Ic);break e}break;case 2:Kc=null;break;case 3:case 5:break;default:throw Error(s(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(a=qc+300-Eo())){if(Yr(r,t,Qc,!Ic),0!==y(r,0))break e;r.timeoutHandle=Ti($r.bind(null,r,n,Kc,$c,Gc,t,Qc,Oc,zc,Ic,2,-0,0),a)}else $r(r,n,Kc,$c,Gc,t,Qc,Oc,zc,Ic,0,-0,0)}}break}J(e)}function Wr(e){null===Kc?Kc=e:Kc.push.apply(Kc,e)}function $r(e,t,n,r,s,i,a,o,l,c,u,d,h){var m=t.subtreeFlags;if((8192&m||16785408===(16785408&m))&&(Qi(),Lr(t),null!==(t=Vi())))return e.cancelPendingCommit=t(As.bind(null,e,n,r,s,a,o,l,1,d,h)),void Yr(e,i,a,!c);As(e,n,r,s,a,o,l,u,d,h)}function Xr(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Uo(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yr(e,t,n,r){t&=~Hc,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-yo(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&S(e,n,t)}function Jr(){return 0!==(6&_c)||(Z(0,!1),!1)}function Zr(){if(null!==Bc){if(0===kc)var e=Bc.return;else rc=nc=null,Qe(e=Bc),Cl=null,Tl=0,e=Bc;for(;null!==e;)Zn(e.alternate,e),e=e.return;Bc=null}}function es(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==_i&&(e.timeoutHandle=_i,Si(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Zr(),Ec=e,Bc=n=Ts(e.current,null),Mc=t,kc=0,Lc=null,Ic=!1,Dc=b(e,t),Pc=!1,zc=Qc=Hc=Oc=Rc=Uc=0,Kc=Vc=null,Gc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-yo(r),i=1<<s;t|=e[s],r&=~i}return Fc=t,G(),n}function ts(e,t){Dl=null,ui.H=Gl,t===bl?(t=ye(),kc=3):t===wl?(t=ye(),kc=4):kc=t===Jl?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,Lc=t,null===Bc&&(Uc=1,Xt(e,M(t,e.current)))}function ns(){var e=Ml.current;return null===e||((4194176&Mc)===Mc?null===kl:((62914560&Mc)===Mc||0!==(536870912&Mc))&&e===kl)}function rs(){var e=ui.H;return ui.H=Gl,null===e?Gl:e}function ss(){var e=ui.A;return ui.A=yc,e}function is(){Uc=4,Ic||(4194176&Mc)!==Mc&&null!==Ml.current||(Dc=!0),0===(134217727&Rc)&&0===(134217727&Oc)||null===Ec||Yr(Ec,Mc,Qc,!1)}function as(e,t,n){var r=_c;_c|=2;var s=rs(),i=ss();Ec===e&&Mc===t||($c=null,es(e,t)),t=!1;var a=Uc;e:for(;;)try{if(0!==kc&&null!==Bc){var o=Bc,l=Lc;switch(kc){case 8:Zr(),a=6;break e;case 3:case 2:case 6:null===Ml.current&&(t=!0);var c=kc;if(kc=0,Lc=null,ds(e,o,l,c),n&&Dc){a=0;break e}break;default:c=kc,kc=0,Lc=null,ds(e,o,l,c)}}os(),a=Uc;break}catch(u){ts(e,u)}return t&&e.shellSuspendCounter++,rc=nc=null,_c=r,ui.H=s,ui.A=i,null===Bc&&(Ec=null,Mc=0,G()),a}function os(){for(;null!==Bc;)cs(Bc)}function ls(){for(;null!==Bc&&!So();)cs(Bc)}function cs(e){var t=jn(e.alternate,e,Fc);e.memoizedProps=e.pendingProps,null===t?hs(e):Bc=t}function us(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=un(n,t,t.pendingProps,t.type,void 0,Mc);break;case 11:t=un(n,t,t.pendingProps,t.type.render,t.ref,Mc);break;case 5:Qe(t);default:Zn(n,t),t=jn(n,t=Bc=Ss(t,Fc),Fc)}e.memoizedProps=e.pendingProps,null===t?hs(e):Bc=t}function ds(e,t,n,r){rc=nc=null,Qe(t),Cl=null,Tl=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&En(t,n,i,!0),null!==(n=Ml.current)){switch(n.tag){case 13:return null===kl?is():null===n.alternate&&0===Uc&&(Uc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Nl?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),vs(e,r,i)),!1;case 22:return n.flags|=65536,r===Nl?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),vs(e,r,i)),!1}throw Error(s(435,n.tag))}return vs(e,r,i),is(),!1}if(tl)return null!==(t=Ml.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==sl&&K(M(e=Error(s(422),{cause:r}),n))):(r!==sl&&K(M(t=Error(s(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=M(r,n),de(e,i=Jt(e.stateNode,r,i)),4!==Uc&&(Uc=2)),!1;var a=Error(s(520),{cause:r});if(a=M(a,n),null===Vc?Vc=[a]:Vc.push(a),4!==Uc&&(Uc=2),null===t)return!0;r=M(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,de(n,e=Jt(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Xc||!Xc.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,en(i=Zt(i),e,n,r),de(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,Mc))return Uc=1,Xt(e,M(n,e.current)),void(Bc=null)}catch(a){if(null!==i)throw Bc=i,a;return Uc=1,Xt(e,M(n,e.current)),void(Bc=null)}32768&t.flags?(tl||1===r?e=!0:Dc||0!==(536870912&Mc)?e=!1:(Ic=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ml.current)&&13===r.tag&&(r.flags|=16384))),ms(t,e)):hs(t)}function hs(e){var t=e;do{if(0!==(32768&t.flags))return void ms(t,Ic);e=t.return;var n=Yn(t.alternate,t,Fc);if(null!==n)return void(Bc=n);if(null!==(t=t.sibling))return void(Bc=t);Bc=t=e}while(null!==t);0===Uc&&(Uc=5)}function ms(e,t){do{var n=Jn(e.alternate,e);if(null!==n)return n.flags&=32767,void(Bc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(Bc=e);Bc=e=n}while(null!==e);Uc=6,Bc=null}function As(e,t,n,r,i,a,o,l,c,u){var d=ui.T,h=Pi();try{Di(2),ui.T=null,function(e,t,n,r,i,a,o,l){do{ps()}while(null!==Jc);if(0!==(6&_c))throw Error(s(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-yo(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var m=h[u];null!==m&&(m.lane&=-536870913)}n&=~d}0!==r&&S(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,r,u|=ol,a,o,l),e===Ec&&(Bc=Ec=null,Mc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Yc||(Yc=!0,eu=u,tu=n,function(e,t){Co(e,t)}(ko,(function(){return ps(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=ui.T,ui.T=null,a=Pi(),Di(2),o=_c,_c|=4,function(e,t){for(vi(e.containerInfo),Ac=t;null!==Ac;)if(t=(e=Ac).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ac=t;else for(;null!==Ac;){var n=(e=Ac).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&t)&&null!==n){t=void 0;var r=e,i=n.memoizedProps;n=n.memoizedState;var a=r.stateNode;try{var o=$t(r.type,i,(r.elementType,r.type));t=a.getSnapshotBeforeUpdate(o,n),a.__reactInternalSnapshotBeforeUpdate=t}catch(l){xs(r,r.return,l)}}break;case 3:0!==(1024&t)&&Bi&&xa(e.stateNode.containerInfo);break;default:if(0!==(1024&t))throw Error(s(163))}if(null!==(t=e.sibling)){t.return=e.return,Ac=t;break}Ac=e.return}o=gc,gc=!1}(e,c),yr(c,e),yi(e.containerInfo),e.current=c,mr(e,c.alternate,c),_o(),_c=o,Di(a),ui.T=n):e.current=c,Yc?(Yc=!1,Jc=e,Zc=r):gs(e,u),u=e.pendingLanes,0===u&&(Xc=null),function(e){if(Fo&&"function"===typeof Fo.onCommitFiberRoot)try{Fo.onCommitFiberRoot(Po,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),J(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],i(u.value,{componentStack:u.stack});0!==(3&Zc)&&ps(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===ru?nu++:(nu=0,ru=e):nu=0,Z(0,!1)}(e,t,n,r,h,i,a,o)}finally{ui.T=d,Di(h)}}function gs(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Pn(t)))}function ps(){if(null!==Jc){var e=Jc,t=eu;eu=0;var n=E(Zc),r=32>n?32:n;n=ui.T;var i=Pi();try{if(Di(r),ui.T=null,null===Jc)var a=!1;else{r=tu,tu=null;var o=Jc,l=Zc;if(Jc=null,Zc=0,0!==(6&_c))throw Error(s(331));var c=_c;if(_c|=4,Pr(o.current),Er(o,o.current,l,r),_c=c,Z(0,!1),Fo&&"function"===typeof Fo.onPostCommitFiberRoot)try{Fo.onPostCommitFiberRoot(Po,o)}catch(u){}a=!0}return a}finally{Di(i),ui.T=n,gs(e,t)}}return!1}function fs(e,t,n){t=M(n,t),null!==(e=ce(e,t=Jt(e.stateNode,t,2),2))&&(T(e,2),J(e))}function xs(e,t,n){if(3===e.tag)fs(e,e,n);else for(;null!==t;){if(3===t.tag){fs(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xc||!Xc.has(r))){e=M(n,e),null!==(r=ce(t,n=Zt(2),2))&&(en(n,r,t,e),T(r,2),J(r));break}}t=t.return}}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Sc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(Pc=!0,s.add(n),e=ys.bind(null,e,t,n),t.then(e,e))}function ys(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ec===e&&(Mc&n)===n&&(4===Uc||3===Uc&&(62914560&Mc)===Mc&&300>Eo()-qc?0===(2&_c)&&es(e,0):Hc|=n,zc===Mc&&(zc=0)),J(e)}function bs(e,t){0===t&&(t=j()),null!==(e=$(e,t))&&(T(e,t),J(e))}function ws(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),bs(e,n)}function Ns(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==r&&r.delete(t),bs(e,n)}function js(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ts(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=31457280&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Ss(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function _s(e,n,r,i,a,o){var l=0;if(i=e,"function"===typeof e)Cs(e)&&(l=1);else if("string"===typeof e)l=Xa&&uo?Ya(e,r,$o.current)?26:po(e)?27:5:Xa?Ya(e,r,$o.current)?26:5:uo&&po(e)?27:5;else e:switch(e){case qs:return Es(r.children,a,o,n);case Ws:l=8,a|=24;break;case $s:return(e=t(12,r,n,2|a)).elementType=$s,e.lanes=o,e;case ei:return(e=t(13,r,n,a)).elementType=ei,e.lanes=o,e;case ti:return(e=t(19,r,n,a)).elementType=ti,e.lanes=o,e;case si:return Bs(r,a,o,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Xs:case Js:l=10;break e;case Ys:l=9;break e;case Zs:l=11;break e;case ni:l=14;break e;case ri:l=16,i=null;break e}l=29,r=Error(s(130,null===e?"null":typeof e,"")),i=null}return(n=t(l,r,n,a)).elementType=e,n.type=i,n.lanes=o,n}function Es(e,n,r,s){return(e=t(7,e,s,n)).lanes=r,e}function Bs(e,n,r,i){(e=t(22,e,i,n)).elementType=si,e.lanes=r;var a={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=a._current;if(null===e)throw Error(s(456));if(0===(2&a._pendingVisibility)){var t=$(e,2);null!==t&&(a._pendingVisibility|=2,Gr(t,0,2))}},attach:function(){var e=a._current;if(null===e)throw Error(s(456));if(0!==(2&a._pendingVisibility)){var t=$(e,2);null!==t&&(a._pendingVisibility&=-3,Gr(t,0,2))}}};return e.stateNode=a,e}function Ms(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function ks(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Ls(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=_i,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Is(e,n,r,s,i,a,o,l,c,u,d,h){return e=new Ls(e,n,r,o,l,c,u,h),n=1,!0===a&&(n|=24),a=t(3,null,null,n),e.current=a,a.stateNode=e,(n=Dn()).refCount++,e.pooledCache=n,n.refCount++,a.memoizedState={element:s,isDehydrated:r,cache:n},ae(a),e}function Ds(e){return e?e=vo:vo}function Ps(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=null!==(e=m(t))?A(e):null)?null:pi(e.stateNode)}function Fs(e,t,n,r,s,i){s=Ds(s),null===r.context?r.context=s:r.pendingContext=s,(r=le(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ce(e,r,t))&&(Gr(n,0,t),ue(n,e,t))}function Us(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Rs(e,t){Us(e,t),(e=e.alternate)&&Us(e,t)}var Os={},Hs=n(950),Qs=n(340),zs=Object.assign,Vs=Symbol.for("react.element"),Ks=Symbol.for("react.transitional.element"),Gs=Symbol.for("react.portal"),qs=Symbol.for("react.fragment"),Ws=Symbol.for("react.strict_mode"),$s=Symbol.for("react.profiler"),Xs=Symbol.for("react.provider"),Ys=Symbol.for("react.consumer"),Js=Symbol.for("react.context"),Zs=Symbol.for("react.forward_ref"),ei=Symbol.for("react.suspense"),ti=Symbol.for("react.suspense_list"),ni=Symbol.for("react.memo"),ri=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var si=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var ii,ai,oi=Symbol.for("react.memo_cache_sentinel"),li=Symbol.iterator,ci=Symbol.for("react.client.reference"),ui=Hs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,di=!1,hi=Array.isArray,mi=e.rendererVersion,Ai=e.rendererPackageName,gi=e.extraDevToolsConfig,pi=e.getPublicInstance,fi=e.getRootHostContext,xi=e.getChildHostContext,vi=e.prepareForCommit,yi=e.resetAfterCommit,bi=e.createInstance,wi=e.appendInitialChild,Ni=e.finalizeInitialChildren,ji=e.shouldSetTextContent,Ci=e.createTextInstance,Ti=e.scheduleTimeout,Si=e.cancelTimeout,_i=e.noTimeout,Ei=e.isPrimaryRenderer;e.warnsIfNotActing;var Bi=e.supportsMutation,Mi=e.supportsPersistence,ki=e.supportsHydration,Li=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ii=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Di=e.setCurrentUpdatePriority,Pi=e.getCurrentUpdatePriority,Fi=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Ui=e.shouldAttemptEagerTransition,Ri=e.detachDeletedInstance;e.requestPostPaintCallback;var Oi=e.maySuspendCommit,Hi=e.preloadInstance,Qi=e.startSuspendingCommit,zi=e.suspendInstance,Vi=e.waitForCommitToBeReady,Ki=e.NotPendingTransition,Gi=e.HostTransitionContext,qi=e.resetFormInstance;e.bindToConsole;var Wi=e.supportsMicrotasks,$i=e.scheduleMicrotask,Xi=e.supportsTestSelectors,Yi=e.findFiberRoot,Ji=e.getBoundingRect,Zi=e.getTextContent,ea=e.isHiddenSubtree,ta=e.matchAccessibilityRole,na=e.setFocusIfFocusable,ra=e.setupIntersectionObserver,sa=e.appendChild,ia=e.appendChildToContainer,aa=e.commitTextUpdate,oa=e.commitMount,la=e.commitUpdate,ca=e.insertBefore,ua=e.insertInContainerBefore,da=e.removeChild,ha=e.removeChildFromContainer,ma=e.resetTextContent,Aa=e.hideInstance,ga=e.hideTextInstance,pa=e.unhideInstance,fa=e.unhideTextInstance,xa=e.clearContainer,va=e.cloneInstance,ya=e.createContainerChildSet,ba=e.appendChildToContainerChildSet,wa=e.finalizeContainerChildren,Na=e.replaceContainerChildren,ja=e.cloneHiddenInstance,Ca=e.cloneHiddenTextInstance,Ta=e.isSuspenseInstancePending,Sa=e.isSuspenseInstanceFallback,_a=e.getSuspenseInstanceFallbackErrorDetails,Ea=e.registerSuspenseInstanceRetry,Ba=e.canHydrateFormStateMarker,Ma=e.isFormStateMarkerMatching,ka=e.getNextHydratableSibling,La=e.getFirstHydratableChild,Ia=e.getFirstHydratableChildWithinContainer,Da=e.getFirstHydratableChildWithinSuspenseInstance,Pa=e.canHydrateInstance,Fa=e.canHydrateTextInstance,Ua=e.canHydrateSuspenseInstance,Ra=e.hydrateInstance,Oa=e.hydrateTextInstance,Ha=e.hydrateSuspenseInstance,Qa=e.getNextHydratableInstanceAfterSuspenseInstance,za=e.commitHydratedContainer,Va=e.commitHydratedSuspenseInstance,Ka=e.clearSuspenseBoundary,Ga=e.clearSuspenseBoundaryFromContainer,qa=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Wa=e.validateHydratableInstance,$a=e.validateHydratableTextInstance,Xa=e.supportsResources,Ya=e.isHostHoistableType,Ja=e.getHoistableRoot,Za=e.getResource,eo=e.acquireResource,to=e.releaseResource,no=e.hydrateHoistable,ro=e.mountHoistable,so=e.unmountHoistable,io=e.createHoistableInstance,ao=e.prepareToCommitHoistables,oo=e.mayResourceSuspendCommit,lo=e.preloadResource,co=e.suspendResource,uo=e.supportsSingletons,ho=e.resolveSingletonInstance,mo=e.clearSingleton,Ao=e.acquireSingletonInstance,go=e.releaseSingletonInstance,po=e.isHostSingletonType,fo=[],xo=-1,vo={},yo=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bo(e)/wo|0)|0},bo=Math.log,wo=Math.LN2,No=128,jo=4194304,Co=Qs.unstable_scheduleCallback,To=Qs.unstable_cancelCallback,So=Qs.unstable_shouldYield,_o=Qs.unstable_requestPaint,Eo=Qs.unstable_now,Bo=Qs.unstable_ImmediatePriority,Mo=Qs.unstable_UserBlockingPriority,ko=Qs.unstable_NormalPriority,Lo=Qs.unstable_IdlePriority,Io=Qs.log,Do=Qs.unstable_setDisableYieldValue,Po=null,Fo=null,Uo="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Ro=new WeakMap,Oo=[],Ho=0,Qo=null,zo=0,Vo=[],Ko=0,Go=null,qo=1,Wo="",$o=p(null),Xo=p(null),Yo=p(null),Jo=p(null),Zo=null,el=null,tl=!1,nl=null,rl=!1,sl=Error(s(519)),il=[],al=0,ol=0,ll=null,cl=null,ul=!1,dl=!1,hl=!1,ml=0,Al=null,gl=0,pl=0,fl=null,xl=!1,vl=!1,yl=Object.prototype.hasOwnProperty,bl=Error(s(460)),wl=Error(s(474)),Nl={then:function(){}},jl=null,Cl=null,Tl=0,Sl=Ce(!0),_l=Ce(!1),El=p(null),Bl=p(0),Ml=p(null),kl=null,Ll=p(0),Il=0,Dl=null,Pl=null,Fl=null,Ul=!1,Rl=!1,Ol=!1,Hl=0,Ql=0,zl=null,Vl=0,Kl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Gl={readContext:kn,use:Ge,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie};Gl.useCacheRefresh=Ie,Gl.useMemoCache=Ie,Gl.useHostTransitionStatus=Ie,Gl.useFormState=Ie,Gl.useActionState=Ie,Gl.useOptimistic=Ie;var ql={readContext:kn,use:Ge,useCallback:function(e,t){return ze().memoizedState=[e,void 0===t?null:t],e},useContext:kn,useEffect:wt,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yt(4194308,4,Tt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yt(4194308,4,e,t)},useInsertionEffect:function(e,t){yt(4,2,e,t)},useMemo:function(e,t){var n=ze();t=void 0===t?null:t;var r=e();if(Ol){B(!0);try{e()}finally{B(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ze();if(void 0!==n){var s=n(t);if(Ol){B(!0);try{n(t)}finally{B(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Rt.bind(null,Dl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ze().memoizedState=e},useState:function(e){var t=(e=st(e)).queue,n=Ot.bind(null,Dl,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_t,useDeferredValue:function(e,t){return Mt(ze(),e,t)},useTransition:function(){var e=st(!1);return e=Lt.bind(null,Dl,e.queue,!0,!1),ze().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Dl,i=ze();if(tl){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ec)throw Error(s(349));0!==(60&Mc)||Ze(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,wt(tt.bind(null,r,a,e),[e]),r.flags|=2048,xt(9,et.bind(null,r,a,n,t),{destroy:void 0},null),n},useId:function(){var e=ze(),t=Ec.identifierPrefix;if(tl){var n=Wo;t=":"+t+"R"+(n=(qo&~(1<<32-yo(qo)-1)).toString(32)+n),0<(n=Hl++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Vl++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ze().memoizedState=Ut.bind(null,Dl)}};ql.useMemoCache=qe,ql.useHostTransitionStatus=Dt,ql.useFormState=mt,ql.useActionState=mt,ql.useOptimistic=function(e){var t=ze();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Qt.bind(null,Dl,!0,n),n.dispatch=t,[e,t]};var Wl={readContext:kn,use:Ge,useCallback:Et,useContext:kn,useEffect:Nt,useImperativeHandle:St,useInsertionEffect:jt,useLayoutEffect:Ct,useMemo:Bt,useReducer:$e,useRef:vt,useState:function(){return $e(We)},useDebugValue:_t,useDeferredValue:function(e,t){return kt(Ve(),Pl.memoizedState,e,t)},useTransition:function(){var e=$e(We)[0],t=Ve().memoizedState;return["boolean"===typeof e?e:Ke(e),t]},useSyncExternalStore:Je,useId:Pt};Wl.useCacheRefresh=Ft,Wl.useMemoCache=qe,Wl.useHostTransitionStatus=Dt,Wl.useFormState=At,Wl.useActionState=At,Wl.useOptimistic=function(e,t){return it(Ve(),0,e,t)};var $l={readContext:kn,use:Ge,useCallback:Et,useContext:kn,useEffect:Nt,useImperativeHandle:St,useInsertionEffect:jt,useLayoutEffect:Ct,useMemo:Bt,useReducer:Ye,useRef:vt,useState:function(){return Ye(We)},useDebugValue:_t,useDeferredValue:function(e,t){var n=Ve();return null===Pl?Mt(n,e,t):kt(n,Pl.memoizedState,e,t)},useTransition:function(){var e=Ye(We)[0],t=Ve().memoizedState;return["boolean"===typeof e?e:Ke(e),t]},useSyncExternalStore:Je,useId:Pt};$l.useCacheRefresh=Ft,$l.useMemoCache=qe,$l.useHostTransitionStatus=Dt,$l.useFormState=ft,$l.useActionState=ft,$l.useOptimistic=function(e,t){var n=Ve();return null!==Pl?it(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Xl={isMounted:function(e){return!!(e=e._reactInternals)&&d(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Vr(),s=le(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ce(e,s,r))&&(Gr(t,0,r),ue(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Vr(),s=le(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ce(e,s,r))&&(Gr(t,0,r),ue(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vr(),r=le(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ce(e,r,n))&&(Gr(t,0,n),ue(t,e,n))}},Yl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Jl=Error(s(461)),Zl=!1,ec={dehydrated:null,treeContext:null,retryLane:0},tc=p(null),nc=null,rc=null,sc="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},ic=Qs.unstable_scheduleCallback,ac=Qs.unstable_NormalPriority,oc={$$typeof:Js,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},lc=ui.S;ui.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Al){var n=Al=[];gl=0,pl=se(),fl={status:"pending",value:void 0,then:function(e){n.push(e)}}}gl++,t.then(ie,ie)}(0,t),null!==lc&&lc(e,t)};var cc=p(null),uc=!1,dc=!1,hc=!1,mc="function"===typeof WeakSet?WeakSet:Set,Ac=null,gc=!1,pc=null,fc=!1,xc=null,vc=8192,yc={getCacheForType:function(e){var t=kn(oc),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},bc=0,wc=1,Nc=2,jc=3,Cc=4;if("function"===typeof Symbol&&Symbol.for){var Tc=Symbol.for;bc=Tc("selector.component"),wc=Tc("selector.has_pseudo_class"),Nc=Tc("selector.role"),jc=Tc("selector.test_id"),Cc=Tc("selector.text")}var Sc="function"===typeof WeakMap?WeakMap:Map,_c=0,Ec=null,Bc=null,Mc=0,kc=0,Lc=null,Ic=!1,Dc=!1,Pc=!1,Fc=0,Uc=0,Rc=0,Oc=0,Hc=0,Qc=0,zc=0,Vc=null,Kc=null,Gc=!1,qc=0,Wc=1/0,$c=null,Xc=null,Yc=!1,Jc=null,Zc=0,eu=0,tu=null,nu=0,ru=null;return Os.attemptContinuousHydration=function(e){if(13===e.tag){var t=$(e,67108864);null!==t&&Gr(t,0,67108864),Rs(e,67108864)}},Os.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Vr(),n=$(e,t);null!==n&&Gr(n,0,t),Rs(e,t)}},Os.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=v(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-yo(t);e.entanglements[1]|=n,t&=~n}J(e),0===(6&_c)&&(Wc=Eo()+500,Z(0,!1))}}break;case 13:null!==(t=$(e,2))&&Gr(t,0,2),Jr(),Rs(e,2)}},Os.batchedUpdates=function(e,t){return e(t)},Os.createComponentSelector=function(e){return{$$typeof:bc,value:e}},Os.createContainer=function(e,t,n,r,s,i,a,o,l,c){return Is(e,t,!1,null,0,r,i,a,o,l,0,null)},Os.createHasPseudoClassSelector=function(e){return{$$typeof:wc,value:e}},Os.createHydrationContainer=function(e,t,n,r,s,i,a,o,l,c,u,d,h){return(e=Is(n,r,!0,e,0,i,o,l,c,u,0,h)).context=Ds(null),n=e.current,(s=le(r=Vr())).callback=void 0!==t&&null!==t?t:null,ce(n,s,r),e.current.lanes=r,T(e,r),J(e),e},Os.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Gs,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},Os.createRoleSelector=function(e){return{$$typeof:Nc,value:e}},Os.createTestNameSelector=function(e){return{$$typeof:jc,value:e}},Os.createTextSelector=function(e){return{$$typeof:Cc,value:e}},Os.defaultOnCaughtError=function(e){console.error(e)},Os.defaultOnRecoverableError=function(e){Yl(e)},Os.defaultOnUncaughtError=function(e){Yl(e)},Os.deferredUpdates=function(e){var t=ui.T,n=Pi();try{return Di(32),ui.T=null,e()}finally{Di(n),ui.T=t}},Os.discreteUpdates=function(e,t,n,r,s){var i=ui.T,a=Pi();try{return Di(2),ui.T=null,e(t,n,r,s)}finally{Di(a),ui.T=i,0===_c&&(Wc=Eo()+500)}},Os.findAllNodes=zr,Os.findBoundingRects=function(e,t){if(!Xi)throw Error(s(363));t=zr(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Ji(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,o=a+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,d=u+c.width,h=c.y,m=h+c.height;if(r>=u&&a>=h&&i<=d&&o<=m){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||m<a||h>o)){h>a&&(c.height+=h-a,c.y=a),m<o&&(c.height=o-h),e.splice(t,1);break}if(!(a!==h||n.height!==c.height||d<r||u>i)){u>r&&(c.width+=u-r,c.x=r),d<i&&(c.width=i-u),e.splice(t,1);break}}return e},Os.findHostInstance=Ps,Os.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=m(e))?g(e):null)?null:pi(e.stateNode)},Os.findHostInstanceWithWarning=function(e){return Ps(e)},Os.flushPassiveEffects=ps,Os.flushSyncFromReconciler=function(e){var t=_c;_c|=1;var n=ui.T,r=Pi();try{if(Di(2),ui.T=null,e)return e()}finally{Di(r),ui.T=n,0===(6&(_c=t))&&Z(0,!1)}},Os.flushSyncWork=Jr,Os.focusWithin=function(e,t){if(!Xi)throw Error(s(363));for(t=Qr(e=Rr(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],r=n.tag;if(!ea(n)){if((5===r||26===r||27===r)&&na(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},Os.getFindAllNodesFailureDescription=function(e,t){if(!Xi)throw Error(s(363));var n=0,r=[];e=[Rr(e),0];for(var i=0;i<e.length;){var a=e[i++],o=a.tag,l=e[i++],c=t[l];if((5!==o&&26!==o&&27!==o||!ea(a))&&(Or(a,c)&&(r.push(Hr(c)),++l>n&&(n=l)),l<t.length))for(a=a.child;null!==a;)e.push(a,l),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Hr(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},Os.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return pi(e.child.stateNode);default:return e.child.stateNode}},Os.injectIntoDevTools=function(){var e={bundleType:0,version:mi,rendererPackageName:Ai,currentDispatcherRef:ui,findFiberByHostInstance:Li,reconcilerVersion:"19.0.0"};if(null!==gi&&(e.rendererConfig=gi),"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Po=t.inject(e),Fo=t}catch(n){}e=!!t.checkDCE}}return e},Os.isAlreadyRendering=function(){return!1},Os.observeVisibleRects=function(e,t,n,r){if(!Xi)throw Error(s(363));e=zr(e,t);var i=ra(e,n,r).disconnect;return{disconnect:function(){i()}}},Os.shouldError=function(){return null},Os.shouldSuspend=function(){return!1},Os.startHostTransition=function(e,t,n,i){if(5!==e.tag)throw Error(s(476));var a=It(e).queue;Lt(e,a,t,Ki,null===n?r:function(){var t=It(e).next.queue;return Ht(e,t,{},Vr()),n(i)})},Os.updateContainer=function(e,t,n,r){var s=t.current,i=Vr();return Fs(s,i,e,t,n,r),i},Os.updateContainerSync=function(e,t,n,r){return 0===t.tag&&ps(),Fs(t.current,2,e,t,n,r),2},Os},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},624:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},a=s.INFO,o={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},751:(e,t,n)=>{"use strict";n.d(t,{qk:()=>Ne,c7:()=>Ce,KR:()=>je,D:()=>we});var r=n(493),s=n(170),i=n(253);const a="firebasestorage.googleapis.com",o="storageBucket";class l extends s.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(d(e),`Firebase Storage: ${t} (${d(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,l.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var c,u;function d(e){return"storage/"+e}function h(){return new l(c.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function m(){return new l(c.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A(){return new l(c.CANCELED,"User canceled the upload/download.")}function g(){return new l(c.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function p(e){return new l(c.INVALID_ARGUMENT,e)}function f(){return new l(c.APP_DELETED,"The Firebase app was deleted.")}function x(e,t){return new l(c.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function v(e){throw new l(c.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(c||(c={}));class y{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=y.makeFromUrl(e,t)}catch(s){return new y(e,"")}if(""===n.path)return n;throw r=e,new l(c.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),u=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===a?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let a=0;a<u.length;a++){const t=u[a],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new y(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new l(c.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class b{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function w(e){return"string"===typeof e||e instanceof String}function N(e){return j()&&e instanceof Blob}function j(){return"undefined"!==typeof Blob}function C(e,t,n,r){if(r<t)throw p(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw p(`Invalid value for '${e}'. Expected ${n} or less.`)}function T(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function S(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function _(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(u||(u={}));class E{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new B(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===u.NO_ERROR,s=n.getStatus();if(!t||_(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===u.ABORT;return void e(!1,new B(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new B(i,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==s){const e=h();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?f():A())}else{r(m())}};this.canceled_?t(0,new B(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout((()=>{s=null,e(m,l())}),t)}function h(){i&&clearTimeout(i)}function m(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let A=!1;function g(e){A||(A=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout((()=>{a=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class B{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function M(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function k(){const e=M();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(j())return new Blob(n);throw new l(c.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function L(e){if("undefined"===typeof atob)throw t="base-64",new l(c.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const I="raw",D="base64",P="base64url",F="data_url";class U{constructor(e,t){this.data=e,this.contentType=t||null}}function R(e,t){switch(e){case I:return new U(O(t));case D:case P:return new U(H(e,t));case F:return new U(function(e){const t=new Q(e);return t.base64?H(D,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw x(F,"Malformed data URL.")}return O(t)}(t.rest)}(t),new Q(t).contentType)}throw h()}function O(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function H(e,t){switch(e){case D:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw x(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case P:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw x(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=L(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw x(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Q{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw x(F,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class z{constructor(e,t){let n=0,r="";N(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(N(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new z(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new z(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(j()){const e=t.map((e=>e instanceof z?e.data_:e));return new z(k.apply(null,e))}{const e=t.map((e=>w(e)?R(I,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let s=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]})),new z(r,!0)}}uploadData(){return this.data_}}function V(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function K(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function G(e,t){return t}class q{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||G}}let W=null;function $(){if(W)return W;const e=[];e.push(new q("bucket")),e.push(new q("generation")),e.push(new q("metageneration")),e.push(new q("name","fullPath",!0));const t=new q("name");t.xform=function(e,t){return function(e){return!w(e)||e.length<2?e:K(e)}(t)},e.push(t);const n=new q("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new q("timeCreated")),e.push(new q("updated")),e.push(new q("md5Hash",null,!0)),e.push(new q("cacheControl",null,!0)),e.push(new q("contentDisposition",null,!0)),e.push(new q("contentEncoding",null,!0)),e.push(new q("contentLanguage",null,!0)),e.push(new q("contentType",null,!0)),e.push(new q("metadata","customMetadata",!0)),W=e,W}function X(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new y(n,r);return t._makeStorageReference(s)}})}(r,e),r}function Y(e,t,n){const r=V(t);if(null===r)return null;return X(e,r,n)}function J(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Z{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ee(e){if(!e)throw h()}function te(e,t){return function(n,r){const s=Y(e,r,t);return ee(null!==s),s}}function ne(e,t){return function(n,r){const s=Y(e,r,t);return ee(null!==s),function(e,t,n,r){const s=V(t);if(null===s)return null;if(!w(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map((t=>{const s=e.bucket,i=e.fullPath;return T("/b/"+a(s)+"/o/"+a(i),n,r)+S({alt:"media",token:t})}))[0]}(s,r,e.host,e._protocol)}}function re(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new l(c.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new l(c.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new l(c.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new l(c.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function se(e){const t=re(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new l(c.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function ie(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ae(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=ie(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+J(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=z.getBlob(c,r,u);if(null===d)throw g();const h={name:l.fullPath},m=T(i,e.host,e._protocol),A=e.maxUploadRetryTime,p=new Z(m,"POST",te(e,n),A);return p.urlParams=h,p.headers=a,p.body=d.uploadData(),p.errorHandler=re(t),p}let oe=null;class le{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=u.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=u.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r,i){if(this.sent_)throw v("cannot .send() more than once");if((0,s.zJ)(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw v("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw v("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw v("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw v("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ce extends le{initXhr(){this.xhr_.responseType="text"}}function ue(){return oe?oe():new ce}class de{constructor(e,t){this._service=e,this._location=t instanceof y?t:y.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new de(e,t)}get root(){const e=new y(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new y(this._location.bucket,e);return new de(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new l(c.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function he(e,t,n){e._throwIfRoot("uploadBytes");const r=ae(e.storage,e._location,$(),new z(t,!0),n);return e.storage.makeRequestWithTokens(r,ue).then((t=>({metadata:t,ref:e})))}function me(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=T(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new Z(r,"GET",ne(e,n),s);return i.errorHandler=se(t),i}(e.storage,e._location,$());return e.storage.makeRequestWithTokens(t,ue).then((e=>{if(null===e)throw new l(c.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ae(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new y(e._location.bucket,n);return new de(e.storage,r)}function ge(e,t){if(e instanceof xe){const n=e;if(null==n._bucket)throw new l(c.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+o+"' property when initializing the app?");const r=new de(n,n._bucket);return null!=t?ge(r,t):r}return void 0!==t?Ae(e,t):e}function pe(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof xe)return new de(e,t);throw p("To use ref(service, url), the first argument must be a Storage instance.")}return ge(e,t)}function fe(e,t){const n=null===t||void 0===t?void 0:t[o];return null==n?null:y.makeFromBucketSpec(n,e)}class xe{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=a,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?y.makeFromBucketSpec(r,this._host):fe(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=y.makeFromBucketSpec(this._url,e):this._bucket=fe(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new de(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new b(f());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=S(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new E(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then((()=>this._requests.delete(i)),(()=>this._requests.delete(i))),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const ve="@firebase/storage",ye="0.13.13",be="storage";function we(e,t,n){return he(e=(0,s.Ku)(e),t,n)}function Ne(e){return me(e=(0,s.Ku)(e))}function je(e,t){return pe(e=(0,s.Ku)(e),t)}function Ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,s.Ku)(e);const n=(0,r.j6)(e,be).getImmediate({identifier:t}),i=(0,s.yU)("storage");return i&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`;const i=(0,s.zJ)(t);i&&((0,s.gE)(`https://${e.host}/b`),(0,s.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(e._overrideAuthToken="string"===typeof a?a:(0,s.Fy)(a,e.app.options.projectId))}(e,t,n,r)}(n,...i),n}function Te(e,t){let{instanceIdentifier:n}=t;const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new xe(s,i,a,n,r.MF)}(0,r.om)(new i.uA(be,Te,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(ve,ye,""),(0,r.KO)(ve,ye,"esm2017")},759:(e,t,n)=>{"use strict";var r=n(950);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),s=r[0].inst,u=r[1];return o((function(){s.value=n,s.getSnapshot=t,c(s)&&u({inst:s})}),[e,n,t]),a((function(){return c(s)&&u({inst:s}),e((function(){c(s)&&u({inst:s})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},815:(e,t,n)=>{"use strict";n.d(t,{Wp:()=>r.Wp});var r=n(493);(0,r.KO)("firebase","11.9.1","app")},863:(e,t,n)=>{"use strict";var r=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},878:(e,t,n)=>{"use strict";e.exports=n(287)},916:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},940:(e,t,n)=>{"use strict";var r=n(950),s=n(538);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=s.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var n=r(e);return void 0!==s&&s(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,s]);var m=a(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=m}),[m]),u(m),m}},950:(e,t,n)=>{"use strict";e.exports=n(983)},983:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,p={};function f(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||A}function x(){}function v(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||A}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=f.prototype;var y=v.prototype=new x;y.constructor=v,g(y,f.prototype),y.isPureReactComponent=!0;var b=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function j(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(){}function E(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return E((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+S(e,0):i,b(a)?(s="",null!=u&&(s=u.replace(T,"$&/")+"/"),E(a,t,s,"",(function(e){return e}))):null!=a&&(C(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=j(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,A=""===i?".":i+":";if(b(e))for(var g=0;g<e.length;g++)u+=E(i=e[g],t,s,o=A+S(i,g),a);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(i=e.next()).done;)u+=E(i=i.value,t,s,o=A+S(i,g++),a);else if("object"===o){if("function"===typeof e.then)return E(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function B(e,t,n){if(null==e)return e;var r=[],s=0;return E(e,r,"","",(function(e){return t.call(n,e,s++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:B,forEach:function(e,t,n){B(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return B(e,(function(){t++})),t},toArray:function(e){return B(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=s,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!N.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return j(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)N.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return j(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),s=w.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(L,k)}catch(i){k(i)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=w.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{82:"eb76e141",205:"598ec5fe",206:"6f3bb63f",265:"54ef201a",393:"30a64030",514:"b6a5c293"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="lunar-calendar:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise(((n,r)=>s=e[t]=[n,r]));r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunklunar_calendar=self.webpackChunklunar_calendar||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>yn,AddEquation:()=>Ut,AddOperation:()=>gn,AdditiveAnimationBlendMode:()=>ns,AdditiveBlending:()=>It,AgXToneMapping:()=>wn,AlphaFormat:()=>rr,AlwaysCompare:()=>Os,AlwaysDepth:()=>an,AlwaysStencilFunc:()=>ks,AmbientLight:()=>nm,AnimationAction:()=>Gm,AnimationClip:()=>Ch,AnimationLoader:()=>Ih,AnimationMixer:()=>Wm,AnimationObjectGroup:()=>Km,AnimationUtils:()=>hh,ArcCurve:()=>Pu,ArrayCamera:()=>wm,ArrowHelper:()=>zA,AttachedBindMode:()=>jn,Audio:()=>Bm,AudioAnalyser:()=>Pm,AudioContext:()=>pm,AudioListener:()=>Em,AudioLoader:()=>fm,AxesHelper:()=>VA,BackSide:()=>Bt,BasicDepthPacking:()=>as,BasicShadowMap:()=>Ct,BatchedMesh:()=>Gc,Bone:()=>sc,BooleanKeyframeTrack:()=>xh,Box2:()=>uA,Box3:()=>$i,Box3Helper:()=>UA,BoxGeometry:()=>il,BoxHelper:()=>FA,BufferAttribute:()=>_o,BufferGeometry:()=>Ko,BufferGeometryLoader:()=>cm,ByteType:()=>Gn,Cache:()=>Sh,Camera:()=>dl,CameraHelper:()=>IA,CanvasTexture:()=>yu,CapsuleGeometry:()=>Nu,CatmullRomCurve3:()=>Qu,CineonToneMapping:()=>vn,CircleGeometry:()=>ju,ClampToEdgeWrapping:()=>Ln,Clock:()=>Nm,Color:()=>go,ColorKeyframeTrack:()=>vh,ColorManagement:()=>_i,CompressedArrayTexture:()=>xu,CompressedCubeTexture:()=>vu,CompressedTexture:()=>fu,CompressedTextureLoader:()=>Dh,ConeGeometry:()=>Tu,ConstantAlphaFactor:()=>nn,ConstantColorFactor:()=>en,Controls:()=>GA,CubeCamera:()=>fl,CubeReflectionMapping:()=>Sn,CubeRefractionMapping:()=>_n,CubeTexture:()=>xl,CubeTextureLoader:()=>Fh,CubeUVReflectionMapping:()=>Mn,CubicBezierCurve:()=>Gu,CubicBezierCurve3:()=>qu,CubicInterpolant:()=>Ah,CullFaceBack:()=>wt,CullFaceFront:()=>Nt,CullFaceFrontBack:()=>jt,CullFaceNone:()=>bt,Curve:()=>Iu,CurvePath:()=>ed,CustomBlending:()=>Ft,CustomToneMapping:()=>bn,CylinderGeometry:()=>Cu,Cylindrical:()=>oA,Data3DTexture:()=>zi,DataArrayTexture:()=>Hi,DataTexture:()=>ic,DataTextureLoader:()=>Uh,DataUtils:()=>jo,DecrementStencilOp:()=>bs,DecrementWrapStencilOp:()=>Ns,DefaultLoadingManager:()=>Eh,DepthArrayTexture:()=>wu,DepthFormat:()=>ar,DepthStencilFormat:()=>or,DepthTexture:()=>bu,DetachedBindMode:()=>Cn,DirectionalLight:()=>tm,DirectionalLightHelper:()=>MA,DiscreteInterpolant:()=>ph,DodecahedronGeometry:()=>_u,DoubleSide:()=>Mt,DstAlphaFactor:()=>$t,DstColorFactor:()=>Yt,DynamicCopyUsage:()=>Ws,DynamicDrawUsage:()=>Qs,DynamicReadUsage:()=>Ks,EdgesGeometry:()=>Lu,EllipseCurve:()=>Du,EqualCompare:()=>Ds,EqualDepth:()=>cn,EqualStencilFunc:()=>Ss,EquirectangularReflectionMapping:()=>En,EquirectangularRefractionMapping:()=>Bn,Euler:()=>ka,EventDispatcher:()=>ri,ExtrudeGeometry:()=>Ld,FileLoader:()=>Lh,Float16BufferAttribute:()=>Po,Float32BufferAttribute:()=>Fo,FloatType:()=>Yn,Fog:()=>jl,FogExp2:()=>Nl,FramebufferTexture:()=>pu,FrontSide:()=>Et,Frustum:()=>jc,FrustumArray:()=>Sc,GLBufferAttribute:()=>tA,GLSL1:()=>Xs,GLSL3:()=>Ys,GreaterCompare:()=>Fs,GreaterDepth:()=>dn,GreaterEqualCompare:()=>Rs,GreaterEqualDepth:()=>un,GreaterEqualStencilFunc:()=>Ms,GreaterStencilFunc:()=>Es,GridHelper:()=>TA,Group:()=>yl,HalfFloatType:()=>Jn,HemisphereLight:()=>Hh,HemisphereLightHelper:()=>CA,IcosahedronGeometry:()=>Dd,ImageBitmapLoader:()=>Am,ImageLoader:()=>Ph,ImageUtils:()=>ki,IncrementStencilOp:()=>ys,IncrementWrapStencilOp:()=>ws,InstancedBufferAttribute:()=>cc,InstancedBufferGeometry:()=>lm,InstancedInterleavedBuffer:()=>eA,InstancedMesh:()=>fc,Int16BufferAttribute:()=>ko,Int32BufferAttribute:()=>Io,Int8BufferAttribute:()=>Eo,IntType:()=>$n,InterleavedBuffer:()=>Tl,InterleavedBufferAttribute:()=>_l,Interpolant:()=>mh,InterpolateDiscrete:()=>$r,InterpolateLinear:()=>Xr,InterpolateSmooth:()=>Yr,InterpolationSamplingMode:()=>ni,InterpolationSamplingType:()=>ti,InvertStencilOp:()=>js,KeepStencilOp:()=>xs,KeyframeTrack:()=>fh,LOD:()=>ql,LatheGeometry:()=>Pd,Layers:()=>La,LessCompare:()=>Is,LessDepth:()=>on,LessEqualCompare:()=>Ps,LessEqualDepth:()=>ln,LessEqualStencilFunc:()=>_s,LessStencilFunc:()=>Ts,Light:()=>Oh,LightProbe:()=>im,Line:()=>tu,Line3:()=>mA,LineBasicMaterial:()=>qc,LineCurve:()=>Wu,LineCurve3:()=>$u,LineDashedMaterial:()=>ah,LineLoop:()=>au,LineSegments:()=>iu,LinearFilter:()=>On,LinearInterpolant:()=>gh,LinearMipMapLinearFilter:()=>Vn,LinearMipMapNearestFilter:()=>Qn,LinearMipmapLinearFilter:()=>zn,LinearMipmapNearestFilter:()=>Hn,LinearSRGBColorSpace:()=>As,LinearToneMapping:()=>fn,LinearTransfer:()=>gs,Loader:()=>Bh,LoaderUtils:()=>om,LoadingManager:()=>_h,LoopOnce:()=>Gr,LoopPingPong:()=>Wr,LoopRepeat:()=>qr,MOUSE:()=>vt,Material:()=>xo,MaterialLoader:()=>am,MathUtils:()=>Ai,Matrix2:()=>lA,Matrix3:()=>pi,Matrix4:()=>wa,MaxEquation:()=>Qt,Mesh:()=>rl,MeshBasicMaterial:()=>vo,MeshDepthMaterial:()=>rh,MeshDistanceMaterial:()=>sh,MeshLambertMaterial:()=>nh,MeshMatcapMaterial:()=>ih,MeshNormalMaterial:()=>th,MeshPhongMaterial:()=>Zd,MeshPhysicalMaterial:()=>Jd,MeshStandardMaterial:()=>Yd,MeshToonMaterial:()=>eh,MinEquation:()=>Ht,MirroredRepeatWrapping:()=>In,MixOperation:()=>An,MultiplyBlending:()=>Pt,MultiplyOperation:()=>mn,NearestFilter:()=>Dn,NearestMipMapLinearFilter:()=>Rn,NearestMipMapNearestFilter:()=>Fn,NearestMipmapLinearFilter:()=>Un,NearestMipmapNearestFilter:()=>Pn,NeutralToneMapping:()=>Nn,NeverCompare:()=>Ls,NeverDepth:()=>sn,NeverStencilFunc:()=>Cs,NoBlending:()=>kt,NoColorSpace:()=>hs,NoToneMapping:()=>pn,NormalAnimationBlendMode:()=>ts,NormalBlending:()=>Lt,NotEqualCompare:()=>Us,NotEqualDepth:()=>hn,NotEqualStencilFunc:()=>Bs,NumberKeyframeTrack:()=>yh,Object3D:()=>$a,ObjectLoader:()=>um,ObjectSpaceNormalMap:()=>ds,OctahedronGeometry:()=>Fd,OneFactor:()=>Vt,OneMinusConstantAlphaFactor:()=>rn,OneMinusConstantColorFactor:()=>tn,OneMinusDstAlphaFactor:()=>Xt,OneMinusDstColorFactor:()=>Jt,OneMinusSrcAlphaFactor:()=>Wt,OneMinusSrcColorFactor:()=>Gt,OrthographicCamera:()=>Zh,PCFShadowMap:()=>Tt,PCFSoftShadowMap:()=>St,PMREMGenerator:()=>bg,Path:()=>td,PerspectiveCamera:()=>gl,Plane:()=>bc,PlaneGeometry:()=>Ud,PlaneHelper:()=>RA,PointLight:()=>Jh,PointLightHelper:()=>bA,Points:()=>hu,PointsMaterial:()=>ou,PolarGridHelper:()=>SA,PolyhedronGeometry:()=>Su,PositionalAudio:()=>Dm,PropertyBinding:()=>Vm,PropertyMixer:()=>Fm,QuadraticBezierCurve:()=>Xu,QuadraticBezierCurve3:()=>Yu,Quaternion:()=>Ki,QuaternionKeyframeTrack:()=>wh,QuaternionLinearInterpolant:()=>bh,RED_GREEN_RGTC2_Format:()=>Vr,RED_RGTC1_Format:()=>Qr,REVISION:()=>xt,RGBADepthPacking:()=>os,RGBAFormat:()=>ir,RGBAIntegerFormat:()=>mr,RGBA_ASTC_10x10_Format:()=>Pr,RGBA_ASTC_10x5_Format:()=>Lr,RGBA_ASTC_10x6_Format:()=>Ir,RGBA_ASTC_10x8_Format:()=>Dr,RGBA_ASTC_12x10_Format:()=>Fr,RGBA_ASTC_12x12_Format:()=>Ur,RGBA_ASTC_4x4_Format:()=>Cr,RGBA_ASTC_5x4_Format:()=>Tr,RGBA_ASTC_5x5_Format:()=>Sr,RGBA_ASTC_6x5_Format:()=>_r,RGBA_ASTC_6x6_Format:()=>Er,RGBA_ASTC_8x5_Format:()=>Br,RGBA_ASTC_8x6_Format:()=>Mr,RGBA_ASTC_8x8_Format:()=>kr,RGBA_BPTC_Format:()=>Rr,RGBA_ETC2_EAC_Format:()=>jr,RGBA_PVRTC_2BPPV1_Format:()=>br,RGBA_PVRTC_4BPPV1_Format:()=>yr,RGBA_S3TC_DXT1_Format:()=>gr,RGBA_S3TC_DXT3_Format:()=>pr,RGBA_S3TC_DXT5_Format:()=>fr,RGBDepthPacking:()=>ls,RGBFormat:()=>sr,RGBIntegerFormat:()=>hr,RGB_BPTC_SIGNED_Format:()=>Or,RGB_BPTC_UNSIGNED_Format:()=>Hr,RGB_ETC1_Format:()=>wr,RGB_ETC2_Format:()=>Nr,RGB_PVRTC_2BPPV1_Format:()=>vr,RGB_PVRTC_4BPPV1_Format:()=>xr,RGB_S3TC_DXT1_Format:()=>Ar,RGDepthPacking:()=>cs,RGFormat:()=>ur,RGIntegerFormat:()=>dr,RawShaderMaterial:()=>Xd,Ray:()=>ba,Raycaster:()=>rA,RectAreaLight:()=>rm,RedFormat:()=>lr,RedIntegerFormat:()=>cr,ReinhardToneMapping:()=>xn,RenderTarget:()=>Ri,RenderTarget3D:()=>$m,RenderTargetArray:()=>Xm,RepeatWrapping:()=>kn,ReplaceStencilOp:()=>vs,ReverseSubtractEquation:()=>Ot,RingGeometry:()=>Rd,SIGNED_RED_GREEN_RGTC2_Format:()=>Kr,SIGNED_RED_RGTC1_Format:()=>zr,SRGBColorSpace:()=>ms,SRGBTransfer:()=>ps,Scene:()=>Cl,ShaderChunk:()=>YA,ShaderLib:()=>ZA,ShaderMaterial:()=>ul,ShadowMaterial:()=>$d,Shape:()=>nd,ShapeGeometry:()=>Od,ShapePath:()=>KA,ShapeUtils:()=>Bd,ShortType:()=>qn,Skeleton:()=>lc,SkeletonHelper:()=>vA,SkinnedMesh:()=>rc,Source:()=>Ii,Sphere:()=>ma,SphereGeometry:()=>Hd,Spherical:()=>aA,SphericalHarmonics3:()=>sm,SplineCurve:()=>Ju,SpotLight:()=>qh,SpotLightHelper:()=>gA,Sprite:()=>zl,SpriteMaterial:()=>El,SrcAlphaFactor:()=>qt,SrcAlphaSaturateFactor:()=>Zt,SrcColorFactor:()=>Kt,StaticCopyUsage:()=>qs,StaticDrawUsage:()=>Hs,StaticReadUsage:()=>Vs,StereoCamera:()=>bm,StreamCopyUsage:()=>$s,StreamDrawUsage:()=>zs,StreamReadUsage:()=>Gs,StringKeyframeTrack:()=>Nh,SubtractEquation:()=>Rt,SubtractiveBlending:()=>Dt,TOUCH:()=>yt,TangentSpaceNormalMap:()=>us,TetrahedronGeometry:()=>Qd,Texture:()=>Fi,TextureLoader:()=>Rh,TextureUtils:()=>WA,TimestampQuery:()=>ei,TorusGeometry:()=>zd,TorusKnotGeometry:()=>Vd,Triangle:()=>co,TriangleFanDrawMode:()=>is,TriangleStripDrawMode:()=>ss,TrianglesDrawMode:()=>rs,TubeGeometry:()=>Kd,UVMapping:()=>Tn,Uint16BufferAttribute:()=>Lo,Uint32BufferAttribute:()=>Do,Uint8BufferAttribute:()=>Bo,Uint8ClampedBufferAttribute:()=>Mo,Uniform:()=>Ym,UniformsGroup:()=>Zm,UniformsLib:()=>JA,UniformsUtils:()=>cl,UnsignedByteType:()=>Kn,UnsignedInt248Type:()=>tr,UnsignedInt5999Type:()=>nr,UnsignedIntType:()=>Xn,UnsignedShort4444Type:()=>Zn,UnsignedShort5551Type:()=>er,UnsignedShortType:()=>Wn,VSMShadowMap:()=>_t,Vector2:()=>gi,Vector3:()=>Gi,Vector4:()=>Ui,VectorKeyframeTrack:()=>jh,VideoFrameTexture:()=>gu,VideoTexture:()=>Au,WebGL3DRenderTarget:()=>Vi,WebGLArrayRenderTarget:()=>Qi,WebGLCoordinateSystem:()=>Js,WebGLCubeRenderTarget:()=>vl,WebGLRenderTarget:()=>Oi,WebGLRenderer:()=>kf,WebGLUtils:()=>Cf,WebGPUCoordinateSystem:()=>Zs,WebXRController:()=>wl,WireframeGeometry:()=>Gd,WrapAroundEnding:()=>es,ZeroCurvatureEnding:()=>Jr,ZeroFactor:()=>zt,ZeroSlopeEnding:()=>Zr,ZeroStencilOp:()=>fs,createCanvasElement:()=>wi});var t=n(950),r=n.t(t,2),s=n(352),i=(n(599),"popstate");function a(){return m((function(e,t){let{pathname:n,search:r,hash:s}=e.location;return u("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?h(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,h="POP",m=null,A=g();function g(){return(l.state||{idx:null}).idx}function p(){h="POP";let e=g(),t=null==e?null:e-A;A=e,m&&m({action:h,location:x.location,delta:t})}function f(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return n=n.replace(/ $/,"%20"),o(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==A&&(A=0,l.replaceState({...l.state,idx:A},""));let x={get action(){return h},get location(){return e(s,l)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(i,p),m=e,()=>{s.removeEventListener(i,p),m=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h="PUSH";let r=u(x.location,e,t);n&&n(r,e),A=g()+1;let i=c(r,A),o=x.createHref(r);try{l.pushState(i,"",o)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(o)}a&&m&&m({action:h,location:x.location,delta:1})},replace:function(e,t){h="REPLACE";let r=u(x.location,e,t);n&&n(r,e),A=g();let s=c(r,A),i=x.createHref(r);l.replaceState(s,"",i),a&&m&&m({action:h,location:x.location,delta:0})},go:e=>l.go(e)};return x}new WeakMap;function A(e,t){return g(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function g(e,t,n,r){let s=E(("string"===typeof t?h(t):t).pathname||"/",n);if(null==s)return null;let i=p(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=_(s);a=T(i[o],e,r)}return a}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let l=I([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),p(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of f(e.path))s(e,t,n);else s(e,t)})),t}function f(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=f(r.join("/")),o=[];return o.push(...a.map((e=>""===e?i:[i,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var x=/^:[\w-]+$/,v=3,y=2,b=1,w=10,N=-2,j=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=N),t&&(r+=y),n.filter((e=>!j(e))).reduce(((e,t)=>e+(x.test(t)?v:""===t?b:w)),r)}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=S({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:I([i,u.pathname]),pathnameBase:D(I([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=I([i,u.pathnameBase]))}return a}function S(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function _(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function k(e){let t=M(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function L(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=h(e):(r={...e},o(!r.pathname||!r.pathname.includes("?"),B("?","pathname","search",r)),o(!r.pathname||!r.pathname.includes("#"),B("#","pathname","hash",r)),o(!r.search||!r.search.includes("#"),B("#","search","hash",r)));let i,a=""===e||""===r.pathname,l=a?"/":r.pathname;if(null==l)i=n;else{let e=t.length-1;if(!s&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?h(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:P(r),hash:F(s)}}(r,i),u=l&&"/"!==l&&l.endsWith("/"),d=(a||"."===l)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var I=e=>e.join("/").replace(/\/\/+/g,"/"),D=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),P=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var R=["POST","PUT","PATCH","DELETE"],O=(new Set(R),["GET",...R]);new Set(O),Symbol("ResetLoaderData");var H=t.createContext(null);H.displayName="DataRouter";var Q=t.createContext(null);Q.displayName="DataRouterState";var z=t.createContext({isTransitioning:!1});z.displayName="ViewTransition";var V=t.createContext(new Map);V.displayName="Fetchers";var K=t.createContext(null);K.displayName="Await";var G=t.createContext(null);G.displayName="Navigation";var q=t.createContext(null);q.displayName="Location";var W=t.createContext({outlet:null,matches:[],isDataRoute:!1});W.displayName="Route";var $=t.createContext(null);$.displayName="RouteError";function X(){return null!=t.useContext(q)}function Y(){return o(X(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(q).location}var J="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Z(e){t.useContext(G).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(W);return e?function(){let{router:e}=ue("useNavigate"),n=he("useNavigate"),r=t.useRef(!1);Z((()=>{r.current=!0}));let s=t.useCallback((async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(r.current,J),r.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,{fromRouteId:n,...s}))}),[e,n]);return s}():function(){o(X(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(H),{basename:n,navigator:r}=t.useContext(G),{matches:s}=t.useContext(W),{pathname:i}=Y(),a=JSON.stringify(k(s)),c=t.useRef(!1);Z((()=>{c.current=!0}));let u=t.useCallback((function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(c.current,J),!c.current)return;if("number"===typeof t)return void r.go(t);let o=L(t,JSON.parse(a),i,"path"===s.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:I([n,o.pathname])),(s.replace?r.replace:r.push)(o,s.state,s)}),[n,r,a,i,e]);return u}()}t.createContext(null);function te(){let{matches:e}=t.useContext(W),n=e[e.length-1];return n?n.params:{}}function ne(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=t.useContext(W),{pathname:s}=Y(),i=JSON.stringify(k(r));return t.useMemo((()=>L(e,JSON.parse(i),s,"path"===n)),[e,i,s,n])}function re(e,n,r,s){o(X(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=t.useContext(G),{matches:c}=t.useContext(W),u=c[c.length-1],d=u?u.params:{},m=u?u.pathname:"/",g=u?u.pathnameBase:"/",p=u&&u.route;{let e=p&&p.path||"";ge(m,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let f,x=Y();if(n){let e="string"===typeof n?h(n):n;o("/"===g||e.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${e.pathname}" was given in the \`location\` prop.`),f=e}else f=x;let v=f.pathname||"/",y=v;if("/"!==g){let e=g.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!a&&r&&r.matches&&r.matches.length>0?r.matches:A(e,{pathname:y});l(p||null!=b,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),l(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=le(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:I([g,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?g:I([g,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),c,r,s);return n&&w?t.createElement(q.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function se(){let e=me(),n=U(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,o)}var ie=t.createElement(se,null),ae=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(W.Provider,{value:this.props.routeContext},t.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oe(e){let{routeContext:n,match:r,children:s}=e,i=t.useContext(H);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(W.Provider,{value:n},s)}function le(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,i=r?.errors;if(null!=i){let e=s.findIndex((e=>e.route.id&&void 0!==i?.[e.route.id]));o(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,l=-1;if(r)for(let t=0;t<s.length;t++){let e=s[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){a=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight(((e,o,c)=>{let u,d=!1,h=null,m=null;r&&(u=i&&o.route.id?i[o.route.id]:void 0,h=o.route.errorElement||ie,a&&(l<0&&0===c?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):l===c&&(d=!0,m=o.route.hydrateFallbackElement||null)));let A=n.concat(s.slice(0,c+1)),g=()=>{let n;return n=u?h:d?m:o.route.Component?t.createElement(o.route.Component,null):o.route.element?o.route.element:e,t.createElement(oe,{match:o,routeContext:{outlet:e,matches:A,isDataRoute:null!=r},children:n})};return r&&(o.route.ErrorBoundary||o.route.errorElement||0===c)?t.createElement(ae,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:g(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):g()}),null)}function ce(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ue(e){let n=t.useContext(H);return o(n,ce(e)),n}function de(e){let n=t.useContext(Q);return o(n,ce(e)),n}function he(e){let n=function(e){let n=t.useContext(W);return o(n,ce(e)),n}(e),r=n.matches[n.matches.length-1];return o(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function me(){let e=t.useContext($),n=de("useRouteError"),r=he("useRouteError");return void 0!==e?e:n.errors?.[r]}var Ae={};function ge(e,t,n){t||Ae[e]||(Ae[e]=!0,l(!1,n))}t.memo((function(e){let{routes:t,future:n,state:r}=e;return re(t,void 0,r,n)}));function pe(e){let{to:n,replace:r,state:s,relative:i}=e;o(X(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=t.useContext(G);l(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=t.useContext(W),{pathname:u}=Y(),d=ee(),h=L(n,k(c),u,"path"===i),m=JSON.stringify(h);return t.useEffect((()=>{d(JSON.parse(m),{replace:r,state:s,relative:i})}),[d,m,i,r,s]),null}function fe(e){o(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xe(e){let{basename:n="/",children:r=null,location:s,navigationType:i="POP",navigator:a,static:c=!1}=e;o(!X(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:u,navigator:a,static:c,future:{}})),[u,a,c]);"string"===typeof s&&(s=h(s));let{pathname:m="/",search:A="",hash:g="",state:p=null,key:f="default"}=s,x=t.useMemo((()=>{let e=E(m,u);return null==e?null:{location:{pathname:e,search:A,hash:g,state:p,key:f},navigationType:i}}),[u,m,A,g,p,f,i]);return l(null!=x,`<Router basename="${u}"> is not able to match the URL "${m}${A}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==x?null:t.createElement(G.Provider,{value:d},t.createElement(q.Provider,{children:r,value:x}))}function ve(e){let{children:t,location:n}=e;return re(ye(t),n)}t.Component;function ye(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return t.Children.forEach(e,((e,s)=>{if(!t.isValidElement(e))return;let i=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,ye(e.props.children,i));o(e.type===fe,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),o(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,i)),r.push(a)})),r}var be="get",we="application/x-www-form-urlencoded";function Ne(e){return null!=e&&"string"===typeof e.tagName}function je(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}var Ce=null;var Te=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Se(e){return null==e||Te.has(e)?e:(l(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${we}"`),null)}function _e(e,t){let n,r,s,i,a;if(Ne(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?E(a,t):null,n=e.getAttribute("method")||be,s=Se(e.getAttribute("enctype"))||we,i=new FormData(e)}else if(function(e){return Ne(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ne(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?E(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||be,s=Se(e.getAttribute("formenctype"))||Se(a.getAttribute("enctype"))||we,i=new FormData(a,e),!function(){if(null===Ce)try{new FormData(document.createElement("form"),0),Ce=!1}catch(e){Ce=!0}return Ce}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(Ne(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=be,r=null,s=we,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Ee(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Be(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Me(e){return null!=e&&"string"===typeof e.page}function ke(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Le(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===i?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===i?t.filter(((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Ie(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s})).flat(1),[...new Set(r)];var r}function De(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,s)=>{if(t&&!Me(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e}),[])}function Pe(e){return{__html:e}}Symbol("SingleFetchRedirect");function Fe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===E(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}t.Component;function Ue(e){let{error:n,isOutsideRemixApp:r}=e;console.error(n);let s,i=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(U(n))return t.createElement(Re,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),i);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Re,{title:"Application Error!",isOutsideRemixApp:r},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function Re(e){let{title:n,renderScripts:r,isOutsideRemixApp:s,children:i}=e,{routeModules:a}=Ve();return a.root?.Layout&&!s?i:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,r?t.createElement(Ye,null):null)))}function Oe(e){return!0===e}function He(){let e=t.useContext(H);return Ee(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Qe(){let e=t.useContext(Q);return Ee(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ze=t.createContext(void 0);function Ve(){let e=t.useContext(ze);return Ee(e,"You must render this element inside a <HydratedRouter> element"),e}function Ke(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ge(e,t,n){if(n&&!Xe)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function qe(e){let{page:n,...r}=e,{router:s}=He(),i=t.useMemo((()=>A(s.routes,n,s.basename)),[s.routes,n,s.basename]);return i?t.createElement($e,{page:n,matches:i,...r}):null}function We(e){let{manifest:n,routeModules:r}=Ve(),[s,i]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){return De((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Be(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(ke).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,n,r).then((e=>{t||i(e)})),()=>{t=!0}}),[e,n,r]),s}function $e(e){let{page:n,matches:r,...s}=e,i=Y(),{manifest:a,routeModules:o}=Ve(),{basename:l}=He(),{loaderData:c,matches:u}=Qe(),d=t.useMemo((()=>Le(n,r,u,a,i,"data")),[n,r,u,a,i]),h=t.useMemo((()=>Le(n,r,u,a,i,"assets")),[n,r,u,a,i]),m=t.useMemo((()=>{if(n===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(r.forEach((n=>{let r=a.routes[n.route.id];r&&r.hasLoader&&(!d.some((e=>e.route.id===n.route.id))&&n.route.id in c&&o[n.route.id]?.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let s=Fe(n,l);return t&&e.size>0&&s.searchParams.set("_routes",r.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[l,c,i,a,d,r,n,o]),A=t.useMemo((()=>Ie(h,a)),[h,a]),g=We(h);return t.createElement(t.Fragment,null,m.map((e=>t.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...s}))),A.map((e=>t.createElement("link",{key:e,rel:"modulepreload",href:e,...s}))),g.map((e=>{let{key:n,link:r}=e;return t.createElement("link",{key:n,...r})})))}ze.displayName="FrameworkContext";var Xe=!1;function Ye(e){let{manifest:n,serverHandoffString:r,isSpaMode:s,ssr:i,renderMeta:a}=Ve(),{router:o,static:l,staticContext:c}=He(),{matches:u}=Qe(),d=Oe(i);a&&(a.didRenderScripts=!0);let h=Ge(u,null,s);t.useEffect((()=>{0}),[]);let m=t.useMemo((()=>{let s=c?`window.__reactRouterContext = ${r};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=l?`${n.hmr?.runtime?`import ${JSON.stringify(n.hmr.runtime)};`:""}${d?"":`import ${JSON.stringify(n.url)}`};\n${h.map(((e,t)=>{let r=`route${t}`,s=n.routes[e.route.id];Ee(s,`Route ${e.route.id} not found in manifest`);let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:`${r}_clientAction`}]:[],...a?[{module:a,varName:`${r}_clientLoader`}]:[],...o?[{module:o,varName:`${r}_clientMiddleware`}]:[],...l?[{module:l,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===u.length?`import * as ${r} from ${JSON.stringify(c)};`:[u.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${u.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${d?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let{sri:n,...r}=e,s=new Set(t.state.matches.map((e=>e.route.id))),i=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(i.pop();i.length>0;)a.push(`/${i.join("/")}`),i.pop();a.forEach((e=>{let n=A(t.routes,e,t.basename);n&&n.forEach((e=>s.add(e.route.id)))}));let o=[...s].reduce(((e,t)=>Object.assign(e,{[t]:r.routes[t]})),{});return{...r,routes:o,sri:!!n||void 0}}(n,o),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(n.entry.module)});`:" ";return t.createElement(t.Fragment,null,t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(s),type:void 0}),t.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Pe(i),type:"module",async:!0}))}),[]),g=Xe?[]:(n.entry.imports.concat(Ie(h,n,{includeHydrateFallback:!0})),[...new Set(p)]);var p;let f="object"===typeof n.sri?n.sri:{};return Xe?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:f})}}):null,d?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:f[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:f[n.entry.module],suppressHydrationWarning:!0}),g.map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:f[n],suppressHydrationWarning:!0}))),m)}function Je(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Ze="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Ze&&(window.__reactRouterVersion="7.5.0")}catch(DP){}function et(e){let{basename:n,children:r,window:s}=e,i=t.useRef();null==i.current&&(i.current=a({window:s,v5Compat:!0}));let o=i.current,[l,c]=t.useState({action:o.action,location:o.location}),u=t.useCallback((e=>{t.startTransition((()=>c(e)))}),[c]);return t.useLayoutEffect((()=>o.listen(u)),[o,u]),t.createElement(xe,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o})}var tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=t.forwardRef((function(e,n){let r,{onClick:s,discover:i="render",prefetch:a="none",relative:c,reloadDocument:u,replace:h,state:m,target:A,to:g,preventScrollReset:p,viewTransition:f,...x}=e,{basename:v}=t.useContext(G),y="string"===typeof g&&tt.test(g),b=!1;if("string"===typeof g&&y&&(r=g,Ze))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=E(t.pathname,v);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:b=!0}catch(DP){l(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(X(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=t.useContext(G),{hash:i,pathname:a,search:l}=ne(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:I([r,a])),s.createHref({pathname:c,search:l,hash:i})}(g,{relative:c}),[N,j,C]=function(e,n){let r=t.useContext(ze),[s,i]=t.useState(!1),[a,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,m=t.useRef(null);t.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return m.current&&e.observe(m.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(s){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let A=()=>{i(!0)},g=()=>{i(!1),o(!1)};return r?"intent"!==e?[a,m,{}]:[a,m,{onFocus:Ke(l,A),onBlur:Ke(c,g),onMouseEnter:Ke(u,A),onMouseLeave:Ke(d,g),onTouchStart:Ke(h,A)}]:[!1,m,{}]}(a,x),T=function(e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ee(),c=Y(),u=ne(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:d(c)===d(u);l(e,{replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o})}}),[c,l,u,r,s,n,e,i,a,o])}(g,{replace:h,state:m,target:A,preventScrollReset:p,relative:c,viewTransition:f});let S=t.createElement("a",{...x,...C,href:r||w,onClick:b||u?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:Je(n,j),target:A,"data-discover":y||"render"!==i?void 0:"true"});return N&&!y?t.createElement(t.Fragment,null,S,t.createElement(qe,{page:w})):S}));nt.displayName="Link",t.forwardRef((function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d,...h}=e,m=ne(c,{relative:h.relative}),A=Y(),g=t.useContext(Q),{navigator:p,basename:f}=t.useContext(G),x=null!=g&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.useContext(z);o(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=it("useViewTransitionState"),i=ne(e,{relative:n.relative});if(!r.isTransitioning)return!1;let a=E(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=E(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=S(i.pathname,l)||null!=S(i.pathname,a)}(m)&&!0===u,v=p.encodeLocation?p.encodeLocation(m).pathname:m.pathname,y=A.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(y=y.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&f&&(b=E(b,f)||b);const w="/"!==v&&v.endsWith("/")?v.length-1:v.length;let N,j=y===v||!a&&y.startsWith(v)&&"/"===y.charAt(w),C=null!=b&&(b===v||!a&&b.startsWith(v)&&"/"===b.charAt(v.length)),T={isActive:j,isPending:C,isTransitioning:x},_=j?r:void 0;N="function"===typeof i?i(T):[i,j?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let B="function"===typeof l?l(T):l;return t.createElement(nt,{...h,"aria-current":_,className:N,ref:n,style:B,to:c,viewTransition:u},"function"===typeof d?d(T):d)})).displayName="NavLink";var rt=t.forwardRef(((e,n)=>{let{discover:r="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:l,state:c,method:u=be,action:h,onSubmit:m,relative:A,preventScrollReset:g,viewTransition:p,...f}=e,x=ct(),v=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=t.useContext(G),s=t.useContext(W);o(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...ne(e||".",{relative:n})},l=Y();if(null==e){a.search=l.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some((e=>""===e));if(n){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:I([r,a.pathname]));return d(a)}(h,{relative:A}),y="get"===u.toLowerCase()?"get":"post",b="string"===typeof h&&tt.test(h);return t.createElement("form",{ref:n,method:y,action:v,onSubmit:a?m:e=>{if(m&&m(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;x(t||e.currentTarget,{fetcherKey:s,method:n,navigate:i,replace:l,state:c,relative:A,preventScrollReset:g,viewTransition:p})},...f,"data-discover":b||"render"!==r?void 0:"true"})}));function st(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function it(e){let n=t.useContext(H);return o(n,st(e)),n}function at(e){l("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=t.useRef(je(e)),r=t.useRef(!1),s=Y(),i=t.useMemo((()=>function(e,t){let n=je(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(s.search,r.current?null:n.current)),[s.search]),a=ee(),o=t.useCallback(((e,t)=>{const n=je("function"===typeof e?e(i):e);r.current=!0,a("?"+n,t)}),[a,i]);return[i,o]}rt.displayName="Form";var ot=0,lt=()=>`__${String(++ot)}__`;function ct(){let{router:e}=it("useSubmit"),{basename:n}=t.useContext(G),r=he("useRouteId");return t.useCallback((async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=_e(t,n);if(!1===s.navigate){let t=s.fetcherKey||lt();await e.fetch(t,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})}),[e,n,r])}new TextEncoder;function ut(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const dt=t.forwardRef(ut);function ht(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const mt=t.forwardRef(ht);var At=n(414);const gt=e=>{let{className:t=""}=e;return(0,At.jsxs)("nav",{className:`flex items-center gap-2 mb-6 text-sm ${t}`,children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-16 rounded"}),(0,At.jsx)("span",{className:"text-gray-500",children:"/"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-20 rounded"}),(0,At.jsx)("span",{className:"text-gray-500",children:"/"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-32 rounded"})]})},pt=e=>{let{items:n=[],showBackButton:r=!1,backTo:s="/",backText:i="Quay l\u1ea1i",className:a=""}=e;return(0,At.jsxs)("nav",{className:`flex items-center gap-2 mb-6 text-sm ${a}`,children:[r&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)(nt,{to:s,className:"text-green-400 hover:text-green-300 transition-colors flex items-center gap-1 whitespace-nowrap",children:[(0,At.jsx)(mt,{className:"w-4 h-4"}),i]}),n.length>0&&(0,At.jsx)("span",{className:"text-gray-500",children:"/"})]}),n.map(((e,r)=>(0,At.jsxs)(t.Fragment,{children:[e.link?(0,At.jsx)(nt,{to:e.link,className:"text-green-400 hover:text-green-300 transition-colors whitespace-nowrap",children:e.text}):(0,At.jsx)("span",{className:"text-gray-400 truncate",children:e.text}),r<n.length-1&&(0,At.jsx)("span",{className:"text-gray-500",children:"/"})]},r)))]})},ft=()=>(0,At.jsx)("div",{className:"min-h-screen  py-8 px-4 box-style text-left",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto pt-4",children:[(0,At.jsx)(pt,{items:[{text:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt",link:null}],showBackButton:!0,backTo:"/login",backText:"\u0110\u0103ng k\xfd"}),(0,At.jsxs)("div",{className:"text-center my-8",children:[(0,At.jsx)(dt,{className:"mx-auto h-16 w-16 text-green-400 mb-4"}),(0,At.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"H\u01b0\u1edbng d\u1eabn x\xf3a d\u1eef li\u1ec7u"}),(0,At.jsxs)("p",{className:"text-gray-300",children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",(new Date).toLocaleDateString("vi-VN")]})]}),(0,At.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-8 text-gray-300 space-y-6",children:[(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Cam k\u1ebft b\u1ea3o m\u1eadt"}),(0,At.jsx)("p",{children:"Ch\xfang t\xf4i cam k\u1ebft b\u1ea3o v\u1ec7 quy\u1ec1n ri\xeang t\u01b0 v\xe0 th\xf4ng tin c\xe1 nh\xe2n c\u1ee7a b\u1ea1n. Ch\xednh s\xe1ch b\u1ea3o m\u1eadt n\xe0y gi\u1ea3i th\xedch c\xe1ch ch\xfang t\xf4i thu th\u1eadp, s\u1eed d\u1ee5ng, l\u01b0u tr\u1eef v\xe0 b\u1ea3o v\u1ec7 th\xf4ng tin c\u1ee7a b\u1ea1n khi s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n."})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Th\xf4ng tin ch\xfang t\xf4i thu th\u1eadp"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"2.1. Th\xf4ng tin c\xe1 nh\xe2n"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,At.jsx)("li",{children:"T\xean hi\u1ec3n th\u1ecb v\xe0 email khi \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"Th\xf4ng tin sinh n\u0103m, gi\u1edd sinh \u0111\u1ec3 t\xednh to\xe1n b\xe1t t\u1ef1"}),(0,At.jsx)("li",{children:"Th\xf4ng tin v\u1ecb tr\xed (n\u1ebfu \u0111\u01b0\u1ee3c c\u1ea5p ph\xe9p)"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"2.2. Th\xf4ng tin s\u1eed d\u1ee5ng"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,At.jsx)("li",{children:"L\u1ecbch s\u1eed v\xe0o c\xe1c trang tra c\u1ee9u"}),(0,At.jsx)("li",{children:"Th\u1eddi gian v\xe0 t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("li",{children:"C\xe1c t\u01b0\u01a1ng t\xe1c v\u1edbi n\u1ed9i dung v\xe0 t\xednh n\u0103ng"}),(0,At.jsx)("li",{children:"Th\xf4ng tin k\u1ef9 thu\u1eadt v\u1ec1 thi\u1ebft b\u1ecb v\xe0 tr\xecnh duy\u1ec7t"})]})]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. C\xe1ch x\xf3a d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{children:"B\u1ea1n c\xf3 quy\u1ec1n x\xf3a d\u1eef li\u1ec7u theo c\xe1c b\u01b0\u1edbc sau:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,At.jsx)("li",{children:(0,At.jsx)("strong",{children:"Truy c\u1eadp v\xe0o th\xf4ng tin c\xe1 nh\xe2n:"})}),(0,At.jsx)("li",{children:(0,At.jsx)("strong",{children:'K\xe9o xu\u1ed1ng ch\u1ecdn n\xfat "X\xf3a th\xf4ng tin c\xe1 nh\xe2n"'})}),(0,At.jsx)("li",{children:(0,At.jsx)("strong",{children:"L\xfac n\xe0y m\u1ecdi th\xf4ng tin b\u1ea1n l\u01b0u tr\u1eef trong \u1ee9ng d\u1ee5ng s\u1ebd b\u1ecb x\xf3a"})})]})]})]})]})}),xt="176",vt={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yt={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bt=0,wt=1,Nt=2,jt=3,Ct=0,Tt=1,St=2,_t=3,Et=0,Bt=1,Mt=2,kt=0,Lt=1,It=2,Dt=3,Pt=4,Ft=5,Ut=100,Rt=101,Ot=102,Ht=103,Qt=104,zt=200,Vt=201,Kt=202,Gt=203,qt=204,Wt=205,$t=206,Xt=207,Yt=208,Jt=209,Zt=210,en=211,tn=212,nn=213,rn=214,sn=0,an=1,on=2,ln=3,cn=4,un=5,dn=6,hn=7,mn=0,An=1,gn=2,pn=0,fn=1,xn=2,vn=3,yn=4,bn=5,wn=6,Nn=7,jn="attached",Cn="detached",Tn=300,Sn=301,_n=302,En=303,Bn=304,Mn=306,kn=1e3,Ln=1001,In=1002,Dn=1003,Pn=1004,Fn=1004,Un=1005,Rn=1005,On=1006,Hn=1007,Qn=1007,zn=1008,Vn=1008,Kn=1009,Gn=1010,qn=1011,Wn=1012,$n=1013,Xn=1014,Yn=1015,Jn=1016,Zn=1017,er=1018,tr=1020,nr=35902,rr=1021,sr=1022,ir=1023,ar=1026,or=1027,lr=1028,cr=1029,ur=1030,dr=1031,hr=1032,mr=1033,Ar=33776,gr=33777,pr=33778,fr=33779,xr=35840,vr=35841,yr=35842,br=35843,wr=36196,Nr=37492,jr=37496,Cr=37808,Tr=37809,Sr=37810,_r=37811,Er=37812,Br=37813,Mr=37814,kr=37815,Lr=37816,Ir=37817,Dr=37818,Pr=37819,Fr=37820,Ur=37821,Rr=36492,Or=36494,Hr=36495,Qr=36283,zr=36284,Vr=36285,Kr=36286,Gr=2200,qr=2201,Wr=2202,$r=2300,Xr=2301,Yr=2302,Jr=2400,Zr=2401,es=2402,ts=2500,ns=2501,rs=0,ss=1,is=2,as=3200,os=3201,ls=3202,cs=3203,us=0,ds=1,hs="",ms="srgb",As="srgb-linear",gs="linear",ps="srgb",fs=0,xs=7680,vs=7681,ys=7682,bs=7683,ws=34055,Ns=34056,js=5386,Cs=512,Ts=513,Ss=514,_s=515,Es=516,Bs=517,Ms=518,ks=519,Ls=512,Is=513,Ds=514,Ps=515,Fs=516,Us=517,Rs=518,Os=519,Hs=35044,Qs=35048,zs=35040,Vs=35045,Ks=35049,Gs=35041,qs=35046,Ws=35050,$s=35042,Xs="100",Ys="300 es",Js=2e3,Zs=2001,ei={COMPUTE:"compute",RENDER:"render"},ti={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},ni={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};class ri{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ii=1234567;const ai=Math.PI/180,oi=180/Math.PI;function li(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(si[255&e]+si[e>>8&255]+si[e>>16&255]+si[e>>24&255]+"-"+si[255&t]+si[t>>8&255]+"-"+si[t>>16&15|64]+si[t>>24&255]+"-"+si[63&n|128]+si[n>>8&255]+"-"+si[n>>16&255]+si[n>>24&255]+si[255&r]+si[r>>8&255]+si[r>>16&255]+si[r>>24&255]).toLowerCase()}function ci(e,t,n){return Math.max(t,Math.min(n,e))}function ui(e,t){return(e%t+t)%t}function di(e,t,n){return(1-n)*e+n*t}function hi(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function mi(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Ai={DEG2RAD:ai,RAD2DEG:oi,generateUUID:li,clamp:ci,euclideanModulo:ui,mapLinear:function(e,t,n,r,s){return r+(e-t)*(s-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:di,damp:function(e,t,n,r){return di(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(ui(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(ii=e);let t=ii+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*ai},radToDeg:function(e){return e*oi},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,s){const i=Math.cos,a=Math.sin,o=i(n/2),l=a(n/2),c=i((t+r)/2),u=a((t+r)/2),d=i((t-r)/2),h=a((t-r)/2),m=i((r-t)/2),A=a((r-t)/2);switch(s){case"XYX":e.set(o*u,l*d,l*h,o*c);break;case"YZY":e.set(l*h,o*u,l*d,o*c);break;case"ZXZ":e.set(l*d,l*h,o*u,o*c);break;case"XZX":e.set(o*u,l*A,l*m,o*c);break;case"YXY":e.set(l*m,o*u,l*A,o*c);break;case"ZYZ":e.set(l*A,l*m,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}},normalize:mi,denormalize:hi};class gi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;gi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,i=this.y-e.y;return this.x=s*n-i*r+e.x,this.y=s*r+i*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pi{constructor(e,t,n,r,s,i,a,o,l){pi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,i,a,o,l)}set(e,t,n,r,s,i,a,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=o,c[6]=n,c[7]=i,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],m=n[8],A=r[0],g=r[3],p=r[6],f=r[1],x=r[4],v=r[7],y=r[2],b=r[5],w=r[8];return s[0]=i*A+a*f+o*y,s[3]=i*g+a*x+o*b,s[6]=i*p+a*v+o*w,s[1]=l*A+c*f+u*y,s[4]=l*g+c*x+u*b,s[7]=l*p+c*v+u*w,s[2]=d*A+h*f+m*y,s[5]=d*g+h*x+m*b,s[8]=d*p+h*v+m*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*i*c-t*a*l-n*s*c+n*a*o+r*s*l-r*i*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*i-a*l,d=a*o-c*s,h=l*s-i*o,m=t*u+n*d+r*h;if(0===m)return this.set(0,0,0,0,0,0,0,0,0);const A=1/m;return e[0]=u*A,e[1]=(r*l-c*n)*A,e[2]=(a*n-r*i)*A,e[3]=d*A,e[4]=(c*t-r*o)*A,e[5]=(r*s-a*t)*A,e[6]=h*A,e[7]=(n*o-l*t)*A,e[8]=(i*t-n*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,i,a){const o=Math.cos(s),l=Math.sin(s);return this.set(n*o,n*l,-n*(o*i+l*a)+i+e,-r*l,r*o,-r*(-l*i+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fi.makeScale(e,t)),this}rotate(e){return this.premultiply(fi.makeRotation(-e)),this}translate(e,t){return this.premultiply(fi.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const fi=new pi;function xi(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const vi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function yi(e,t){return new vi[e](t)}function bi(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function wi(){const e=bi("canvas");return e.style.display="block",e}const Ni={};function ji(e){e in Ni||(Ni[e]=!0,console.warn(e))}const Ci=(new pi).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ti=(new pi).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Si(){const e={enabled:!0,workingColorSpace:As,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===ps&&(e.r=Ei(e.r),e.g=Ei(e.g),e.b=Ei(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===ps&&(e.r=Bi(e.r),e.g=Bi(e.g),e.b=Bi(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===hs?gs:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[As]:{primaries:t,whitePoint:r,transfer:gs,toXYZ:Ci,fromXYZ:Ti,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ms},outputColorSpaceConfig:{drawingBufferColorSpace:ms}},[ms]:{primaries:t,whitePoint:r,transfer:ps,toXYZ:Ci,fromXYZ:Ti,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ms}}}),e}const _i=Si();function Ei(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Bi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Mi;class ki{static getDataURL(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Mi&&(Mi=bi("canvas")),Mi.width=e.width,Mi.height=e.height;const n=Mi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Mi}return t.toDataURL(n)}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=bi("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let e=0;e<s.length;e++)s[e]=255*Ei(s[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ei(t[e]/255)):t[e]=Ei(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Li=0;class Ii{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Li++}),this.uuid=li(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Di(r[t].image)):e.push(Di(r[t]))}else e=Di(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Di(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?ki.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Pi=0;class Fi extends ri{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fi.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fi.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ln,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ln,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:On,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zn,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ir,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Kn,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Fi.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:hs;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Pi++}),this.uuid=li(),this.name="",this.source=new Ii(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=i,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new gi(0,0),this.repeat=new gi(1,1),this.center=new gi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Tn)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case kn:e.x=e.x-Math.floor(e.x);break;case Ln:e.x=e.x<0?0:1;break;case In:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case kn:e.y=e.y-Math.floor(e.y);break;case Ln:e.y=e.y<0?0:1;break;case In:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}Fi.DEFAULT_IMAGE=null,Fi.DEFAULT_MAPPING=Tn,Fi.DEFAULT_ANISOTROPY=1;class Ui{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Ui.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r+i[12]*s,this.y=i[1]*t+i[5]*n+i[9]*r+i[13]*s,this.z=i[2]*t+i[6]*n+i[10]*r+i[14]*s,this.w=i[3]*t+i[7]*n+i[11]*r+i[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const i=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],d=o[1],h=o[5],m=o[9],A=o[2],g=o[6],p=o[10];if(Math.abs(c-d)<i&&Math.abs(u-A)<i&&Math.abs(m-g)<i){if(Math.abs(c+d)<a&&Math.abs(u+A)<a&&Math.abs(m+g)<a&&Math.abs(l+h+p-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,f=(p+1)/2,x=(c+d)/4,v=(u+A)/4,y=(m+g)/4;return e>o&&e>f?e<i?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(e),r=x/n,s=v/n):o>f?o<i?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(o),n=x/r,s=y/r):f<i?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(f),n=v/s,r=y/s),this.set(n,r,s,t),this}let f=Math.sqrt((g-m)*(g-m)+(u-A)*(u-A)+(d-c)*(d-c));return Math.abs(f)<.001&&(f=1),this.x=(g-m)/f,this.y=(u-A)/f,this.z=(d-c)/f,this.w=Math.acos((l+h+p-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this.z=ci(this.z,e.z,t.z),this.w=ci(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this.z=ci(this.z,e,t),this.w=ci(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ri extends ri{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth?n.depth:1,this.scissor=new Ui(0,0,e,t),this.scissorTest=!1,this.viewport=new Ui(0,0,e,t);const r={width:e,height:t,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:On,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const s=new Fi(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const i=n.count;for(let a=0;a<i;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new Ii(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Oi extends Ri{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Hi extends Fi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Dn,this.minFilter=Dn,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Qi extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Hi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class zi extends Fi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Dn,this.minFilter=Dn,this.wrapR=Ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vi extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new zi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ki{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,i,a){let o=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=s[i+0],h=s[i+1],m=s[i+2],A=s[i+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=m,void(e[t+3]=A);if(u!==A||o!==d||l!==h||c!==m){let e=1-a;const t=o*d+l*h+c*m+u*A,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const s=Math.sqrt(r),i=Math.atan2(s,t*n);e=Math.sin(e*i)/s,a=Math.sin(a*i)/s}const s=a*n;if(o=o*e+d*s,l=l*e+h*s,c=c*e+m*s,u=u*e+A*s,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,s,i){const a=n[r],o=n[r+1],l=n[r+2],c=n[r+3],u=s[i],d=s[i+1],h=s[i+2],m=s[i+3];return e[t]=a*m+c*u+o*h-l*d,e[t+1]=o*m+c*d+l*u-a*h,e[t+2]=l*m+c*h+a*d-o*u,e[t+3]=c*m-a*u-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,s=e._z,i=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(r/2),u=a(s/2),d=o(n/2),h=o(r/2),m=o(s/2);switch(i){case"XYZ":this._x=d*c*u+l*h*m,this._y=l*h*u-d*c*m,this._z=l*c*m+d*h*u,this._w=l*c*u-d*h*m;break;case"YXZ":this._x=d*c*u+l*h*m,this._y=l*h*u-d*c*m,this._z=l*c*m-d*h*u,this._w=l*c*u+d*h*m;break;case"ZXY":this._x=d*c*u-l*h*m,this._y=l*h*u+d*c*m,this._z=l*c*m+d*h*u,this._w=l*c*u-d*h*m;break;case"ZYX":this._x=d*c*u-l*h*m,this._y=l*h*u+d*c*m,this._z=l*c*m-d*h*u,this._w=l*c*u+d*h*m;break;case"YZX":this._x=d*c*u+l*h*m,this._y=l*h*u+d*c*m,this._z=l*c*m-d*h*u,this._w=l*c*u-d*h*m;break;case"XZY":this._x=d*c*u-l*h*m,this._y=l*h*u-d*c*m,this._z=l*c*m+d*h*u,this._w=l*c*u+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],i=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-o)*e,this._y=(s-l)*e,this._z=(i-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+i)/e,this._z=(s+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(s-l)/e,this._x=(r+i)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(i-r)/e,this._x=(s+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ci(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,i=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+i*a+r*l-s*o,this._y=r*c+i*o+s*a-n*l,this._z=s*c+i*l+n*o-r*a,this._w=i*c-n*a-r*o-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,i=this._w;let a=i*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=i,this._x=n,this._y=r,this._z=s,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*i+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*s+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=i*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Gi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Gi.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Wi.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Wi.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,i=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*i,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*i,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*i,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,i=e.y,a=e.z,o=e.w,l=2*(i*r-a*n),c=2*(a*t-s*r),u=2*(s*n-i*t);return this.x=t+o*l+i*u-a*c,this.y=n+o*c+a*l-s*u,this.z=r+o*u+s*c-i*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ci(this.x,e.x,t.x),this.y=ci(this.y,e.y,t.y),this.z=ci(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ci(this.x,e,t),this.y=ci(this.y,e,t),this.z=ci(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(ci(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,i=t.x,a=t.y,o=t.z;return this.x=r*o-s*a,this.y=s*i-n*o,this.z=n*a-r*i,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return qi.copy(this).projectOnVector(e),this.sub(qi)}reflect(e){return this.sub(qi.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ci(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const qi=new Gi,Wi=new Ki;class $i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Yi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Yi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Yi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Yi):Yi.fromBufferAttribute(r,t),Yi.applyMatrix4(e.matrixWorld),this.expandByPoint(Yi);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Ji.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Ji.copy(n.boundingBox)),Ji.applyMatrix4(e.matrixWorld),this.union(Ji)}const r=e.children;for(let s=0,i=r.length;s<i;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Yi),Yi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ia),aa.subVectors(this.max,ia),Zi.subVectors(e.a,ia),ea.subVectors(e.b,ia),ta.subVectors(e.c,ia),na.subVectors(ea,Zi),ra.subVectors(ta,ea),sa.subVectors(Zi,ta);let t=[0,-na.z,na.y,0,-ra.z,ra.y,0,-sa.z,sa.y,na.z,0,-na.x,ra.z,0,-ra.x,sa.z,0,-sa.x,-na.y,na.x,0,-ra.y,ra.x,0,-sa.y,sa.x,0];return!!ca(t,Zi,ea,ta,aa)&&(t=[1,0,0,0,1,0,0,0,1],!!ca(t,Zi,ea,ta,aa)&&(oa.crossVectors(na,ra),t=[oa.x,oa.y,oa.z],ca(t,Zi,ea,ta,aa)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Yi).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Xi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Xi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Xi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Xi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Xi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Xi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Xi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Xi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Xi)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xi=[new Gi,new Gi,new Gi,new Gi,new Gi,new Gi,new Gi,new Gi],Yi=new Gi,Ji=new $i,Zi=new Gi,ea=new Gi,ta=new Gi,na=new Gi,ra=new Gi,sa=new Gi,ia=new Gi,aa=new Gi,oa=new Gi,la=new Gi;function ca(e,t,n,r,s){for(let i=0,a=e.length-3;i<=a;i+=3){la.fromArray(e,i);const a=s.x*Math.abs(la.x)+s.y*Math.abs(la.y)+s.z*Math.abs(la.z),o=t.dot(la),l=n.dot(la),c=r.dot(la);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const ua=new $i,da=new Gi,ha=new Gi;class ma{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ua.setFromPoints(e).getCenter(n);let r=0;for(let s=0,i=e.length;s<i;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;da.subVectors(e,this.center);const t=da.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(da,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ha.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(da.copy(e.center).add(ha)),this.expandByPoint(da.copy(e.center).sub(ha))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Aa=new Gi,ga=new Gi,pa=new Gi,fa=new Gi,xa=new Gi,va=new Gi,ya=new Gi;class ba{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Aa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Aa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Aa.copy(this.origin).addScaledVector(this.direction,t),Aa.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ga.copy(e).add(t).multiplyScalar(.5),pa.copy(t).sub(e).normalize(),fa.copy(this.origin).sub(ga);const s=.5*e.distanceTo(t),i=-this.direction.dot(pa),a=fa.dot(this.direction),o=-fa.dot(pa),l=fa.lengthSq(),c=Math.abs(1-i*i);let u,d,h,m;if(c>0)if(u=i*o-a,d=i*a-o,m=s*c,u>=0)if(d>=-m)if(d<=m){const e=1/c;u*=e,d*=e,h=u*(u+i*d+2*a)+d*(i*u+d+2*o)+l}else d=s,u=Math.max(0,-(i*d+a)),h=-u*u+d*(d+2*o)+l;else d=-s,u=Math.max(0,-(i*d+a)),h=-u*u+d*(d+2*o)+l;else d<=-m?(u=Math.max(0,-(-i*s+a)),d=u>0?-s:Math.min(Math.max(-s,-o),s),h=-u*u+d*(d+2*o)+l):d<=m?(u=0,d=Math.min(Math.max(-s,-o),s),h=d*(d+2*o)+l):(u=Math.max(0,-(i*s+a)),d=u>0?s:Math.min(Math.max(-s,-o),s),h=-u*u+d*(d+2*o)+l);else d=i>0?-s:s,u=Math.max(0,-(i*d+a)),h=-u*u+d*(d+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(ga).addScaledVector(pa,d),h}intersectSphere(e,t){Aa.subVectors(e.center,this.origin);const n=Aa.dot(this.direction),r=Aa.dot(Aa)-n*n,s=e.radius*e.radius;if(r>s)return null;const i=Math.sqrt(s-r),a=n-i,o=n+i;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,i,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(s=(e.min.y-d.y)*c,i=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,i=(e.min.y-d.y)*c),n>i||s>r?null:((s>n||isNaN(n))&&(n=s),(i<r||isNaN(r))&&(r=i),u>=0?(a=(e.min.z-d.z)*u,o=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,o=(e.min.z-d.z)*u),n>o||a>r?null:((a>n||n!==n)&&(n=a),(o<r||r!==r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Aa)}intersectTriangle(e,t,n,r,s){xa.subVectors(t,e),va.subVectors(n,e),ya.crossVectors(xa,va);let i,a=this.direction.dot(ya);if(a>0){if(r)return null;i=1}else{if(!(a<0))return null;i=-1,a=-a}fa.subVectors(this.origin,e);const o=i*this.direction.dot(va.crossVectors(fa,va));if(o<0)return null;const l=i*this.direction.dot(xa.cross(fa));if(l<0)return null;if(o+l>a)return null;const c=-i*fa.dot(ya);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class wa{constructor(e,t,n,r,s,i,a,o,l,c,u,d,h,m,A,g){wa.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,s,i,a,o,l,c,u,d,h,m,A,g)}set(e,t,n,r,s,i,a,o,l,c,u,d,h,m,A,g){const p=this.elements;return p[0]=e,p[4]=t,p[8]=n,p[12]=r,p[1]=s,p[5]=i,p[9]=a,p[13]=o,p[2]=l,p[6]=c,p[10]=u,p[14]=d,p[3]=h,p[7]=m,p[11]=A,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new wa).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Na.setFromMatrixColumn(e,0).length(),s=1/Na.setFromMatrixColumn(e,1).length(),i=1/Na.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,i=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(s),u=Math.sin(s);if("XYZ"===e.order){const e=i*c,n=i*u,r=a*c,s=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+r*l,t[5]=e-s*l,t[9]=-a*o,t[2]=s-e*l,t[6]=r+n*l,t[10]=i*o}else if("YXZ"===e.order){const e=o*c,n=o*u,r=l*c,s=l*u;t[0]=e+s*a,t[4]=r*a-n,t[8]=i*l,t[1]=i*u,t[5]=i*c,t[9]=-a,t[2]=n*a-r,t[6]=s+e*a,t[10]=i*o}else if("ZXY"===e.order){const e=o*c,n=o*u,r=l*c,s=l*u;t[0]=e-s*a,t[4]=-i*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=i*c,t[9]=s-e*a,t[2]=-i*l,t[6]=a,t[10]=i*o}else if("ZYX"===e.order){const e=i*c,n=i*u,r=a*c,s=a*u;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+s,t[1]=o*u,t[5]=s*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=i*o}else if("YZX"===e.order){const e=i*o,n=i*l,r=a*o,s=a*l;t[0]=o*c,t[4]=s-e*u,t[8]=r*u+n,t[1]=u,t[5]=i*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-s*u}else if("XZY"===e.order){const e=i*o,n=i*l,r=a*o,s=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+s,t[5]=i*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=s*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ca,e,Ta)}lookAt(e,t,n){const r=this.elements;return Ea.subVectors(e,t),0===Ea.lengthSq()&&(Ea.z=1),Ea.normalize(),Sa.crossVectors(n,Ea),0===Sa.lengthSq()&&(1===Math.abs(n.z)?Ea.x+=1e-4:Ea.z+=1e-4,Ea.normalize(),Sa.crossVectors(n,Ea)),Sa.normalize(),_a.crossVectors(Ea,Sa),r[0]=Sa.x,r[4]=_a.x,r[8]=Ea.x,r[1]=Sa.y,r[5]=_a.y,r[9]=Ea.y,r[2]=Sa.z,r[6]=_a.z,r[10]=Ea.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,i=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],m=n[2],A=n[6],g=n[10],p=n[14],f=n[3],x=n[7],v=n[11],y=n[15],b=r[0],w=r[4],N=r[8],j=r[12],C=r[1],T=r[5],S=r[9],_=r[13],E=r[2],B=r[6],M=r[10],k=r[14],L=r[3],I=r[7],D=r[11],P=r[15];return s[0]=i*b+a*C+o*E+l*L,s[4]=i*w+a*T+o*B+l*I,s[8]=i*N+a*S+o*M+l*D,s[12]=i*j+a*_+o*k+l*P,s[1]=c*b+u*C+d*E+h*L,s[5]=c*w+u*T+d*B+h*I,s[9]=c*N+u*S+d*M+h*D,s[13]=c*j+u*_+d*k+h*P,s[2]=m*b+A*C+g*E+p*L,s[6]=m*w+A*T+g*B+p*I,s[10]=m*N+A*S+g*M+p*D,s[14]=m*j+A*_+g*k+p*P,s[3]=f*b+x*C+v*E+y*L,s[7]=f*w+x*T+v*B+y*I,s[11]=f*N+x*S+v*M+y*D,s[15]=f*j+x*_+v*k+y*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],i=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+s*o*u-r*l*u-s*a*d+n*l*d+r*a*h-n*o*h)+e[7]*(+t*o*h-t*l*d+s*i*d-r*i*h+r*l*c-s*o*c)+e[11]*(+t*l*u-t*a*h-s*i*u+n*i*h+s*a*c-n*l*c)+e[15]*(-r*a*c-t*o*u+t*a*d+r*i*u-n*i*d+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],i=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],m=e[12],A=e[13],g=e[14],p=e[15],f=u*g*l-A*d*l+A*o*h-a*g*h-u*o*p+a*d*p,x=m*d*l-c*g*l-m*o*h+i*g*h+c*o*p-i*d*p,v=c*A*l-m*u*l+m*a*h-i*A*h-c*a*p+i*u*p,y=m*u*o-c*A*o-m*a*d+i*A*d+c*a*g-i*u*g,b=t*f+n*x+r*v+s*y;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=f*w,e[1]=(A*d*s-u*g*s-A*r*h+n*g*h+u*r*p-n*d*p)*w,e[2]=(a*g*s-A*o*s+A*r*l-n*g*l-a*r*p+n*o*p)*w,e[3]=(u*o*s-a*d*s-u*r*l+n*d*l+a*r*h-n*o*h)*w,e[4]=x*w,e[5]=(c*g*s-m*d*s+m*r*h-t*g*h-c*r*p+t*d*p)*w,e[6]=(m*o*s-i*g*s-m*r*l+t*g*l+i*r*p-t*o*p)*w,e[7]=(i*d*s-c*o*s+c*r*l-t*d*l-i*r*h+t*o*h)*w,e[8]=v*w,e[9]=(m*u*s-c*A*s-m*n*h+t*A*h+c*n*p-t*u*p)*w,e[10]=(i*A*s-m*a*s+m*n*l-t*A*l-i*n*p+t*a*p)*w,e[11]=(c*a*s-i*u*s-c*n*l+t*u*l+i*n*h-t*a*h)*w,e[12]=y*w,e[13]=(c*A*r-m*u*r+m*n*d-t*A*d-c*n*g+t*u*g)*w,e[14]=(m*a*r-i*A*r-m*n*o+t*A*o+i*n*g-t*a*g)*w,e[15]=(i*u*r-c*a*r+c*n*o-t*u*o-i*n*d+t*a*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,i=e.x,a=e.y,o=e.z,l=s*i,c=s*a;return this.set(l*i+n,l*a-r*o,l*o+r*a,0,l*a+r*o,c*a+n,c*o-r*i,0,l*o-r*a,c*o+r*i,s*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,i){return this.set(1,n,s,0,e,1,i,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,i=t._y,a=t._z,o=t._w,l=s+s,c=i+i,u=a+a,d=s*l,h=s*c,m=s*u,A=i*c,g=i*u,p=a*u,f=o*l,x=o*c,v=o*u,y=n.x,b=n.y,w=n.z;return r[0]=(1-(A+p))*y,r[1]=(h+v)*y,r[2]=(m-x)*y,r[3]=0,r[4]=(h-v)*b,r[5]=(1-(d+p))*b,r[6]=(g+f)*b,r[7]=0,r[8]=(m+x)*w,r[9]=(g-f)*w,r[10]=(1-(d+A))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Na.set(r[0],r[1],r[2]).length();const i=Na.set(r[4],r[5],r[6]).length(),a=Na.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ja.copy(this);const o=1/s,l=1/i,c=1/a;return ja.elements[0]*=o,ja.elements[1]*=o,ja.elements[2]*=o,ja.elements[4]*=l,ja.elements[5]*=l,ja.elements[6]*=l,ja.elements[8]*=c,ja.elements[9]*=c,ja.elements[10]*=c,t.setFromRotationMatrix(ja),n.x=s,n.y=i,n.z=a,this}makePerspective(e,t,n,r,s,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Js;const o=this.elements,l=2*s/(t-e),c=2*s/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,m;if(a===Js)h=-(i+s)/(i-s),m=-2*i*s/(i-s);else{if(a!==Zs)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);h=-i/(i-s),m=-i*s/(i-s)}return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=m,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,s,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Js;const o=this.elements,l=1/(t-e),c=1/(n-r),u=1/(i-s),d=(t+e)*l,h=(n+r)*c;let m,A;if(a===Js)m=(i+s)*u,A=-2*u;else{if(a!==Zs)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);m=s*u,A=-1*u}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=A,o[14]=-m,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Na=new Gi,ja=new wa,Ca=new Gi(0,0,0),Ta=new Gi(1,1,1),Sa=new Gi,_a=new Gi,Ea=new Gi,Ba=new wa,Ma=new Ki;class ka{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ka.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,s=r[0],i=r[4],a=r[8],o=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(ci(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-i,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ci(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(ci(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-i,l)):(this._y=0,this._z=Math.atan2(o,s));break;case"ZYX":this._y=Math.asin(-ci(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,s)):(this._x=0,this._z=Math.atan2(-i,l));break;case"YZX":this._z=Math.asin(ci(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-ci(i,-1,1)),Math.abs(i)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Ba.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ba,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Ma.setFromEuler(this),this.setFromQuaternion(Ma,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ka.DEFAULT_ORDER="XYZ";class La{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let Ia=0;const Da=new Gi,Pa=new Ki,Fa=new wa,Ua=new Gi,Ra=new Gi,Oa=new Gi,Ha=new Ki,Qa=new Gi(1,0,0),za=new Gi(0,1,0),Va=new Gi(0,0,1),Ka={type:"added"},Ga={type:"removed"},qa={type:"childadded",child:null},Wa={type:"childremoved",child:null};class $a extends ri{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ia++}),this.uuid=li(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$a.DEFAULT_UP.clone();const e=new Gi,t=new ka,n=new Ki,r=new Gi(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new wa},normalMatrix:{value:new pi}}),this.matrix=new wa,this.matrixWorld=new wa,this.matrixAutoUpdate=$a.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=$a.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new La,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pa.setFromAxisAngle(e,t),this.quaternion.multiply(Pa),this}rotateOnWorldAxis(e,t){return Pa.setFromAxisAngle(e,t),this.quaternion.premultiply(Pa),this}rotateX(e){return this.rotateOnAxis(Qa,e)}rotateY(e){return this.rotateOnAxis(za,e)}rotateZ(e){return this.rotateOnAxis(Va,e)}translateOnAxis(e,t){return Da.copy(e).applyQuaternion(this.quaternion),this.position.add(Da.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Qa,e)}translateY(e){return this.translateOnAxis(za,e)}translateZ(e){return this.translateOnAxis(Va,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Ua.copy(e):Ua.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ra.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(Ra,Ua,this.up):Fa.lookAt(Ua,Ra,this.up),this.quaternion.setFromRotationMatrix(Fa),r&&(Fa.extractRotation(r.matrixWorld),Pa.setFromRotationMatrix(Fa),this.quaternion.premultiply(Pa.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Ka),qa.child=e,this.dispatchEvent(qa),qa.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ga),Wa.child=e,this.dispatchEvent(Wa),Wa.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Ka),qa.child=e,this.dispatchEvent(qa),qa.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let s=0,i=r.length;s<i;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ra,e,Oa),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ra,Ha,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function s(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map((e=>({...e,boundingBox:e.boundingBox?{min:e.boundingBox.min.toArray(),max:e.boundingBox.max.toArray()}:void 0,boundingSphere:e.boundingSphere?{radius:e.boundingSphere.radius,center:e.boundingSphere.center.toArray()}:void 0}))),r.instanceInfo=this._instanceInfo.map((e=>({...e}))),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];s(e.shapes,r)}else s(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(s(e.materials,this.material[n]));r.material=t}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(s(e.animations,n))}}if(t){const t=i(e.geometries),r=i(e.materials),s=i(e.textures),a=i(e.images),o=i(e.shapes),l=i(e.skeletons),c=i(e.animations),u=i(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),s.length>0&&(n.textures=s),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function i(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}$a.DEFAULT_UP=new Gi(0,1,0),$a.DEFAULT_MATRIX_AUTO_UPDATE=!0,$a.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xa=new Gi,Ya=new Gi,Ja=new Gi,Za=new Gi,eo=new Gi,to=new Gi,no=new Gi,ro=new Gi,so=new Gi,io=new Gi,ao=new Ui,oo=new Ui,lo=new Ui;class co{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gi;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Xa.subVectors(e,t),r.cross(Xa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Xa.subVectors(r,t),Ya.subVectors(n,t),Ja.subVectors(e,t);const i=Xa.dot(Xa),a=Xa.dot(Ya),o=Xa.dot(Ja),l=Ya.dot(Ya),c=Ya.dot(Ja),u=i*l-a*a;if(0===u)return s.set(0,0,0),null;const d=1/u,h=(l*o-a*c)*d,m=(i*c-a*o)*d;return s.set(1-h-m,m,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Za)&&(Za.x>=0&&Za.y>=0&&Za.x+Za.y<=1)}static getInterpolation(e,t,n,r,s,i,a,o){return null===this.getBarycoord(e,t,n,r,Za)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(s,Za.x),o.addScaledVector(i,Za.y),o.addScaledVector(a,Za.z),o)}static getInterpolatedAttribute(e,t,n,r,s,i){return ao.setScalar(0),oo.setScalar(0),lo.setScalar(0),ao.fromBufferAttribute(e,t),oo.fromBufferAttribute(e,n),lo.fromBufferAttribute(e,r),i.setScalar(0),i.addScaledVector(ao,s.x),i.addScaledVector(oo,s.y),i.addScaledVector(lo,s.z),i}static isFrontFacing(e,t,n,r){return Xa.subVectors(n,t),Ya.subVectors(e,t),Xa.cross(Ya).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xa.subVectors(this.c,this.b),Ya.subVectors(this.a,this.b),.5*Xa.cross(Ya).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return co.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return co.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return co.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return co.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return co.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let i,a;eo.subVectors(r,n),to.subVectors(s,n),ro.subVectors(e,n);const o=eo.dot(ro),l=to.dot(ro);if(o<=0&&l<=0)return t.copy(n);so.subVectors(e,r);const c=eo.dot(so),u=to.dot(so);if(c>=0&&u<=c)return t.copy(r);const d=o*u-c*l;if(d<=0&&o>=0&&c<=0)return i=o/(o-c),t.copy(n).addScaledVector(eo,i);io.subVectors(e,s);const h=eo.dot(io),m=to.dot(io);if(m>=0&&h<=m)return t.copy(s);const A=h*l-o*m;if(A<=0&&l>=0&&m<=0)return a=l/(l-m),t.copy(n).addScaledVector(to,a);const g=c*m-h*u;if(g<=0&&u-c>=0&&h-m>=0)return no.subVectors(s,r),a=(u-c)/(u-c+(h-m)),t.copy(r).addScaledVector(no,a);const p=1/(g+A+d);return i=A*p,a=d*p,t.copy(n).addScaledVector(eo,i).addScaledVector(to,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const uo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ho={h:0,s:0,l:0},mo={h:0,s:0,l:0};function Ao(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class go{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,_i.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_i.workingColorSpace;return this.r=e,this.g=t,this.b=n,_i.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_i.workingColorSpace;if(e=ui(e,1),t=ci(t,0,1),n=ci(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,s=2*n-r;this.r=Ao(s,r,e+1/3),this.g=Ao(s,r,e),this.b=Ao(s,r,e-1/3)}return _i.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const i=t[1],a=t[2];switch(i){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],s=r.length;if(3===s)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===s)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ms;const n=uo[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ei(e.r),this.g=Ei(e.g),this.b=Ei(e.b),this}copyLinearToSRGB(e){return this.r=Bi(e.r),this.g=Bi(e.g),this.b=Bi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms;return _i.fromWorkingColorSpace(po.copy(this),e),65536*Math.round(ci(255*po.r,0,255))+256*Math.round(ci(255*po.g,0,255))+Math.round(ci(255*po.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_i.workingColorSpace;_i.fromWorkingColorSpace(po.copy(this),t);const n=po.r,r=po.g,s=po.b,i=Math.max(n,r,s),a=Math.min(n,r,s);let o,l;const c=(a+i)/2;if(a===i)o=0,l=0;else{const e=i-a;switch(l=c<=.5?e/(i+a):e/(2-i-a),i){case n:o=(r-s)/e+(r<s?6:0);break;case r:o=(s-n)/e+2;break;case s:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_i.workingColorSpace;return _i.fromWorkingColorSpace(po.copy(this),t),e.r=po.r,e.g=po.g,e.b=po.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ms;_i.fromWorkingColorSpace(po.copy(this),e);const t=po.r,n=po.g,r=po.b;return e!==ms?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(ho),this.setHSL(ho.h+e,ho.s+t,ho.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ho),e.getHSL(mo);const n=di(ho.h,mo.h,t),r=di(ho.s,mo.s,t),s=di(ho.l,mo.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const po=new go;go.NAMES=uo;let fo=0;class xo extends ri{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fo++}),this.uuid=li(),this.name="",this.type="Material",this.blending=Lt,this.side=Et,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qt,this.blendDst=Wt,this.blendEquation=Ut,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new go(0,0,0),this.blendAlpha=0,this.depthFunc=ln,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ks,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xs,this.stencilZFail=xs,this.stencilZPass=xs,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Lt&&(n.blending=this.blending),this.side!==Et&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==qt&&(n.blendSrc=this.blendSrc),this.blendDst!==Wt&&(n.blendDst=this.blendDst),this.blendEquation!==Ut&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ln&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ks&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xs&&(n.stencilFail=this.stencilFail),this.stencilZFail!==xs&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==xs&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),s=r(e.images);t.length>0&&(n.textures=t),s.length>0&&(n.images=s)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class vo extends xo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new go(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ka,this.combine=mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yo=bo();function bo(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,s[l]=24,s[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,s[l]=-e-1,s[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,s[l]=13,s[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,s[l]=24,s[256|l]=24):(r[l]=31744,r[256|l]=64512,s[l]=13,s[256|l]=13)}const i=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,i[l]=e|t}for(let l=1024;l<2048;++l)i[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:s,mantissaTable:i,exponentTable:a,offsetTable:o}}function wo(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=ci(e,-65504,65504),yo.floatView[0]=e;const t=yo.uint32View[0],n=t>>23&511;return yo.baseTable[n]+((8388607&t)>>yo.shiftTable[n])}function No(e){const t=e>>10;return yo.uint32View[0]=yo.mantissaTable[yo.offsetTable[t]+(1023&e)]+yo.exponentTable[t],yo.floatView[0]}class jo{static toHalfFloat(e){return wo(e)}static fromHalfFloat(e){return No(e)}}const Co=new Gi,To=new gi;let So=0;class _o{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:So++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Hs,this.updateRanges=[],this.gpuType=Yn,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)To.fromBufferAttribute(this,t),To.applyMatrix3(e),this.setXY(t,To.x,To.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Co.fromBufferAttribute(this,t),Co.applyMatrix3(e),this.setXYZ(t,Co.x,Co.y,Co.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Co.fromBufferAttribute(this,t),Co.applyMatrix4(e),this.setXYZ(t,Co.x,Co.y,Co.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Co.fromBufferAttribute(this,t),Co.applyNormalMatrix(e),this.setXYZ(t,Co.x,Co.y,Co.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Co.fromBufferAttribute(this,t),Co.transformDirection(e),this.setXYZ(t,Co.x,Co.y,Co.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=hi(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mi(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Hs&&(e.usage=this.usage),e}}class Eo extends _o{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Bo extends _o{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Mo extends _o{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ko extends _o{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Lo extends _o{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Io extends _o{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Do extends _o{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Po extends _o{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=No(this.array[e*this.itemSize]);return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize]=wo(t),this}getY(e){let t=No(this.array[e*this.itemSize+1]);return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+1]=wo(t),this}getZ(e){let t=No(this.array[e*this.itemSize+2]);return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+2]=wo(t),this}getW(e){let t=No(this.array[e*this.itemSize+3]);return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.array[e*this.itemSize+3]=wo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.array[e+0]=wo(t),this.array[e+1]=wo(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.array[e+0]=wo(t),this.array[e+1]=wo(n),this.array[e+2]=wo(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.array[e+0]=wo(t),this.array[e+1]=wo(n),this.array[e+2]=wo(r),this.array[e+3]=wo(s),this}}class Fo extends _o{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Uo=0;const Ro=new wa,Oo=new $a,Ho=new Gi,Qo=new $i,zo=new $i,Vo=new Gi;class Ko extends ri{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Uo++}),this.uuid=li(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xi(e)?Do:Lo)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new pi).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ro.makeRotationFromQuaternion(e),this.applyMatrix4(Ro),this}rotateX(e){return Ro.makeRotationX(e),this.applyMatrix4(Ro),this}rotateY(e){return Ro.makeRotationY(e),this.applyMatrix4(Ro),this}rotateZ(e){return Ro.makeRotationZ(e),this.applyMatrix4(Ro),this}translate(e,t,n){return Ro.makeTranslation(e,t,n),this.applyMatrix4(Ro),this}scale(e,t,n){return Ro.makeScale(e,t,n),this.applyMatrix4(Ro),this}lookAt(e){return Oo.lookAt(e),Oo.updateMatrix(),this.applyMatrix4(Oo.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ho).negate(),this.translate(Ho.x,Ho.y,Ho.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new Fo(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new $i);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Gi(-1/0,-1/0,-1/0),new Gi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];Qo.setFromBufferAttribute(e),this.morphTargetsRelative?(Vo.addVectors(this.boundingBox.min,Qo.min),this.boundingBox.expandByPoint(Vo),Vo.addVectors(this.boundingBox.max,Qo.max),this.boundingBox.expandByPoint(Vo)):(this.boundingBox.expandByPoint(Qo.min),this.boundingBox.expandByPoint(Qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ma);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Gi,1/0);if(e){const n=this.boundingSphere.center;if(Qo.setFromBufferAttribute(e),t)for(let e=0,s=t.length;e<s;e++){const n=t[e];zo.setFromBufferAttribute(n),this.morphTargetsRelative?(Vo.addVectors(Qo.min,zo.min),Qo.expandByPoint(Vo),Vo.addVectors(Qo.max,zo.max),Qo.expandByPoint(Vo)):(Qo.expandByPoint(zo.min),Qo.expandByPoint(zo.max))}Qo.getCenter(n);let r=0;for(let t=0,s=e.count;t<s;t++)Vo.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Vo));if(t)for(let s=0,i=t.length;s<i;s++){const i=t[s],a=this.morphTargetsRelative;for(let t=0,s=i.count;t<s;t++)Vo.fromBufferAttribute(i,t),a&&(Ho.fromBufferAttribute(e,t),Vo.add(Ho)),r=Math.max(r,n.distanceToSquared(Vo))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,s=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new _o(new Float32Array(4*n.count),4));const i=this.getAttribute("tangent"),a=[],o=[];for(let N=0;N<n.count;N++)a[N]=new Gi,o[N]=new Gi;const l=new Gi,c=new Gi,u=new Gi,d=new gi,h=new gi,m=new gi,A=new Gi,g=new Gi;function p(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),d.fromBufferAttribute(s,e),h.fromBufferAttribute(s,t),m.fromBufferAttribute(s,r),c.sub(l),u.sub(l),h.sub(d),m.sub(d);const i=1/(h.x*m.y-m.x*h.y);isFinite(i)&&(A.copy(c).multiplyScalar(m.y).addScaledVector(u,-h.y).multiplyScalar(i),g.copy(u).multiplyScalar(h.x).addScaledVector(c,-m.x).multiplyScalar(i),a[e].add(A),a[t].add(A),a[r].add(A),o[e].add(g),o[t].add(g),o[r].add(g))}let f=this.groups;0===f.length&&(f=[{start:0,count:e.count}]);for(let N=0,j=f.length;N<j;++N){const t=f[N],n=t.start;for(let r=n,s=n+t.count;r<s;r+=3)p(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const x=new Gi,v=new Gi,y=new Gi,b=new Gi;function w(e){y.fromBufferAttribute(r,e),b.copy(y);const t=a[e];x.copy(t),x.sub(y.multiplyScalar(y.dot(t))).normalize(),v.crossVectors(b,t);const n=v.dot(o[e])<0?-1:1;i.setXYZW(e,x.x,x.y,x.z,n)}for(let N=0,j=f.length;N<j;++N){const t=f[N],n=t.start;for(let r=n,s=n+t.count;r<s;r+=3)w(e.getX(r+0)),w(e.getX(r+1)),w(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new _o(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Gi,s=new Gi,i=new Gi,a=new Gi,o=new Gi,l=new Gi,c=new Gi,u=new Gi;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),m=e.getX(d+1),A=e.getX(d+2);r.fromBufferAttribute(t,h),s.fromBufferAttribute(t,m),i.fromBufferAttribute(t,A),c.subVectors(i,s),u.subVectors(r,s),c.cross(u),a.fromBufferAttribute(n,h),o.fromBufferAttribute(n,m),l.fromBufferAttribute(n,A),a.add(c),o.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(m,o.x,o.y,o.z),n.setXYZ(A,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),s.fromBufferAttribute(t,e+1),i.fromBufferAttribute(t,e+2),c.subVectors(i,s),u.subVectors(r,s),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Vo.fromBufferAttribute(e,t),Vo.normalize(),e.setXYZ(t,Vo.x,Vo.y,Vo.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,s=e.normalized,i=new n.constructor(t.length*r);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)i[o++]=n[a++]}return new _o(i,r,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ko,n=this.index.array,r=this.attributes;for(const a in r){const s=e(r[a],n);t.setAttribute(a,s)}const s=this.morphAttributes;for(const a in s){const r=[],i=s[a];for(let t=0,s=i.length;t<s;t++){const s=e(i[t],n);r.push(s)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const i=this.groups;for(let a=0,o=i.length;a<o;a++){const e=i[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let s=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];n.push(s.toJSON(e.data))}n.length>0&&(r[o]=n,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const i=this.groups;i.length>0&&(e.data.groups=JSON.parse(JSON.stringify(i)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const s=e.morphAttributes;for(const l in s){const e=[],n=s[l];for(let r=0,s=n.length;r<s;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const i=e.groups;for(let l=0,c=i.length;l<c;l++){const e=i[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Go=new wa,qo=new ba,Wo=new ma,$o=new Gi,Xo=new Gi,Yo=new Gi,Jo=new Gi,Zo=new Gi,el=new Gi,tl=new Gi,nl=new Gi;class rl extends $a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ko,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,i=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){el.set(0,0,0);for(let n=0,r=s.length;n<r;n++){const r=a[n],o=s[n];0!==r&&(Zo.fromBufferAttribute(o,e),i?el.addScaledVector(Zo,r):el.addScaledVector(Zo.sub(t),r))}t.add(el)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Wo.copy(n.boundingSphere),Wo.applyMatrix4(s),qo.copy(e.ray).recast(e.near),!1===Wo.containsPoint(qo.origin)){if(null===qo.intersectSphere(Wo,$o))return;if(qo.origin.distanceToSquared($o)>(e.far-e.near)**2)return}Go.copy(s).invert(),qo.copy(e.ray).applyMatrix4(Go),null!==n.boundingBox&&!1===qo.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,qo)}}_computeIntersections(e,t,n){let r;const s=this.geometry,i=this.material,a=s.index,o=s.attributes.position,l=s.attributes.uv,c=s.attributes.uv1,u=s.attributes.normal,d=s.groups,h=s.drawRange;if(null!==a)if(Array.isArray(i))for(let m=0,A=d.length;m<A;m++){const s=d[m],o=i[s.materialIndex];for(let i=Math.max(s.start,h.start),d=Math.min(a.count,Math.min(s.start+s.count,h.start+h.count));i<d;i+=3){r=sl(this,o,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{for(let s=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);s<o;s+=3){r=sl(this,i,e,n,l,c,u,a.getX(s),a.getX(s+1),a.getX(s+2)),r&&(r.faceIndex=Math.floor(s/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(i))for(let m=0,A=d.length;m<A;m++){const s=d[m],a=i[s.materialIndex];for(let i=Math.max(s.start,h.start),d=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));i<d;i+=3){r=sl(this,a,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{for(let s=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);s<a;s+=3){r=sl(this,i,e,n,l,c,u,s,s+1,s+2),r&&(r.faceIndex=Math.floor(s/3),t.push(r))}}}}function sl(e,t,n,r,s,i,a,o,l,c){e.getVertexPosition(o,Xo),e.getVertexPosition(l,Yo),e.getVertexPosition(c,Jo);const u=function(e,t,n,r,s,i,a,o){let l;if(l=t.side===Bt?r.intersectTriangle(a,i,s,!0,o):r.intersectTriangle(s,i,a,t.side===Et,o),null===l)return null;nl.copy(o),nl.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(nl);return c<n.near||c>n.far?null:{distance:c,point:nl.clone(),object:e}}(e,t,n,r,Xo,Yo,Jo,tl);if(u){const e=new Gi;co.getBarycoord(tl,Xo,Yo,Jo,e),s&&(u.uv=co.getInterpolatedAttribute(s,o,l,c,e,new gi)),i&&(u.uv1=co.getInterpolatedAttribute(i,o,l,c,e,new gi)),a&&(u.normal=co.getInterpolatedAttribute(a,o,l,c,e,new Gi),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new Gi,materialIndex:0};co.getNormal(Xo,Yo,Jo,t.normal),u.face=t,u.barycoord=e}return u}class il extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:i};const a=this;r=Math.floor(r),s=Math.floor(s),i=Math.floor(i);const o=[],l=[],c=[],u=[];let d=0,h=0;function m(e,t,n,r,s,i,m,A,g,p,f){const x=i/g,v=m/p,y=i/2,b=m/2,w=A/2,N=g+1,j=p+1;let C=0,T=0;const S=new Gi;for(let a=0;a<j;a++){const i=a*v-b;for(let o=0;o<N;o++){const d=o*x-y;S[e]=d*r,S[t]=i*s,S[n]=w,l.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=A>0?1:-1,c.push(S.x,S.y,S.z),u.push(o/g),u.push(1-a/p),C+=1}}for(let a=0;a<p;a++)for(let e=0;e<g;e++){const t=d+e+N*a,n=d+e+N*(a+1),r=d+(e+1)+N*(a+1),s=d+(e+1)+N*a;o.push(t,n,s),o.push(n,r,s),T+=6}a.addGroup(h,T,f),h+=T,d+=C}m("z","y","x",-1,-1,n,t,e,i,s,0),m("z","y","x",1,-1,n,t,-e,i,s,1),m("x","z","y",1,1,e,n,t,r,i,2),m("x","z","y",1,-1,e,n,-t,r,i,3),m("x","y","z",1,-1,e,t,n,r,s,4),m("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(o),this.setAttribute("position",new Fo(l,3)),this.setAttribute("normal",new Fo(c,3)),this.setAttribute("uv",new Fo(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new il(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function al(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const s=e[n][r];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=s.clone():Array.isArray(s)?t[n][r]=s.slice():t[n][r]=s}}return t}function ol(e){const t={};for(let n=0;n<e.length;n++){const r=al(e[n]);for(const e in r)t[e]=r[e]}return t}function ll(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:_i.workingColorSpace}const cl={clone:al,merge:ol};class ul extends xo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=al(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class dl extends $a{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wa,this.projectionMatrix=new wa,this.projectionMatrixInverse=new wa,this.coordinateSystem=Js}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const hl=new Gi,ml=new gi,Al=new gi;class gl extends dl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*oi*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ai*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*oi*Math.atan(Math.tan(.5*ai*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){hl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(hl.x,hl.y).multiplyScalar(-e/hl.z),hl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(hl.x,hl.y).multiplyScalar(-e/hl.z)}getViewSize(e,t){return this.getViewBounds(e,ml,Al),t.subVectors(Al,ml)}setViewOffset(e,t,n,r,s,i){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ai*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,a=i.fullHeight;s+=i.offsetX*r/e,t-=i.offsetY*n/a,r*=i.width/e,n*=i.height/a}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const pl=-90;class fl extends $a{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new gl(pl,1,e,t);r.layers=this.layers,this.add(r);const s=new gl(pl,1,e,t);s.layers=this.layers,this.add(s);const i=new gl(pl,1,e,t);i.layers=this.layers,this.add(i);const a=new gl(pl,1,e,t);a.layers=this.layers,this.add(a);const o=new gl(pl,1,e,t);o.layers=this.layers,this.add(o);const l=new gl(pl,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,i,a,o]=t;for(const l of t)this.remove(l);if(e===Js)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),i.up.set(0,0,1),i.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==Zs)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),i.up.set(0,0,-1),i.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,i,a,o,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,i),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=m,n.texture.needsPMREMUpdate=!0}}class xl extends Fi{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0,arguments.length>9?arguments[9]:void 0),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vl extends Oi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new xl(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:On}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new il(5,5,5),s=new ul({name:"CubemapFromEquirect",uniforms:al(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Bt,blending:kt});s.uniforms.tEquirect.value=t;const i=new rl(r,s),a=t.minFilter;t.minFilter===zn&&(t.minFilter=On);return new fl(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}clear(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(s)}}class yl extends $a{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bl={type:"move"};class wl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new yl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new yl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Gi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Gi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new yl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Gi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Gi),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,i=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){i=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],s=l.joints["thumb-tip"],a=r.position.distanceTo(s.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(o.matrix.fromArray(s.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,s.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(s.linearVelocity)):o.hasLinearVelocity=!1,s.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(s.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(bl)))}return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==s),null!==l&&(l.visible=null!==i),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new yl;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new go(e),this.density=t}clone(){return new Nl(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class jl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new go(e),this.near=t,this.far=n}clone(){return new jl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Cl extends $a{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ka,this.environmentIntensity=1,this.environmentRotation=new ka,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Tl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Hs,this.updateRanges=[],this.version=0,this.uuid=li()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=li()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=li()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Sl=new Gi;class _l{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Sl.fromBufferAttribute(this,t),Sl.applyMatrix4(e),this.setXYZ(t,Sl.x,Sl.y,Sl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Sl.fromBufferAttribute(this,t),Sl.applyNormalMatrix(e),this.setXYZ(t,Sl.x,Sl.y,Sl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Sl.fromBufferAttribute(this,t),Sl.transformDirection(e),this.setXYZ(t,Sl.x,Sl.y,Sl.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=hi(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mi(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=mi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hi(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=mi(t,this.array),n=mi(n,this.array),r=mi(r,this.array),s=mi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new _o(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _l(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class El extends xo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new go(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bl;const Ml=new Gi,kl=new Gi,Ll=new Gi,Il=new gi,Dl=new gi,Pl=new wa,Fl=new Gi,Ul=new Gi,Rl=new Gi,Ol=new gi,Hl=new gi,Ql=new gi;class zl extends $a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new El;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Bl){Bl=new Ko;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Tl(e,5);Bl.setIndex([0,1,2,0,2,3]),Bl.setAttribute("position",new _l(t,3,0,!1)),Bl.setAttribute("uv",new _l(t,2,3,!1))}this.geometry=Bl,this.material=e,this.center=new gi(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kl.setFromMatrixScale(this.matrixWorld),Pl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ll.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&kl.multiplyScalar(-Ll.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const i=this.center;Vl(Fl.set(-.5,-.5,0),Ll,i,kl,r,s),Vl(Ul.set(.5,-.5,0),Ll,i,kl,r,s),Vl(Rl.set(.5,.5,0),Ll,i,kl,r,s),Ol.set(0,0),Hl.set(1,0),Ql.set(1,1);let a=e.ray.intersectTriangle(Fl,Ul,Rl,!1,Ml);if(null===a&&(Vl(Ul.set(-.5,.5,0),Ll,i,kl,r,s),Hl.set(0,1),a=e.ray.intersectTriangle(Fl,Rl,Ul,!1,Ml),null===a))return;const o=e.ray.origin.distanceTo(Ml);o<e.near||o>e.far||t.push({distance:o,point:Ml.clone(),uv:co.getInterpolation(Ml,Fl,Ul,Rl,Ol,Hl,Ql,new gi),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Vl(e,t,n,r,s,i){Il.subVectors(e,n).addScalar(.5).multiply(r),void 0!==s?(Dl.x=i*Il.x-s*Il.y,Dl.y=s*Il.x+i*Il.y):Dl.copy(Il),e.copy(t),e.x+=Dl.x,e.y+=Dl.y,e.applyMatrix4(Pl)}const Kl=new Gi,Gl=new Gi;class ql extends $a{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Kl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Kl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Kl.setFromMatrixPosition(e.matrixWorld),Gl.setFromMatrixPosition(this.matrixWorld);const n=Kl.distanceTo(Gl)/e.zoom;let r,s;for(t[0].object.visible=!0,r=1,s=t.length;r<s;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Wl=new Gi,$l=new Ui,Xl=new Ui,Yl=new Gi,Jl=new wa,Zl=new Gi,ec=new ma,tc=new wa,nc=new ba;class rc extends rl{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=jn,this.bindMatrix=new wa,this.bindMatrixInverse=new wa,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new $i),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Zl),this.boundingBox.expandByPoint(Zl)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new ma),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Zl),this.boundingSphere.expandByPoint(Zl)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),ec.copy(this.boundingSphere),ec.applyMatrix4(r),!1!==e.ray.intersectsSphere(ec)&&(tc.copy(r).invert(),nc.copy(e.ray).applyMatrix4(tc),null!==this.boundingBox&&!1===nc.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,nc)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ui,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===jn?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Cn?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;$l.fromBufferAttribute(r.attributes.skinIndex,e),Xl.fromBufferAttribute(r.attributes.skinWeight,e),Wl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const e=Xl.getComponent(s);if(0!==e){const r=$l.getComponent(s);Jl.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Yl.copy(Wl).applyMatrix4(Jl),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class sc extends $a{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ic extends Fi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Dn,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Dn,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ac=new wa,oc=new wa;class lc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=li(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new wa)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new wa;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,i=e.length;s<i;s++){const r=e[s]?e[s].matrixWorld:oc;ac.multiplyMatrices(r,t[s]),ac.toArray(n,16*s)}null!==r&&(r.needsUpdate=!0)}clone(){return new lc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ic(t,e,e,ir,Yn);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let s=t[r];void 0===s&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new sc),this.bones.push(s),this.boneInverses.push((new wa).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const s=t[r];e.bones.push(s.uuid);const i=n[r];e.boneInverses.push(i.toArray())}return e}}class cc extends _o{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const uc=new wa,dc=new wa,hc=[],mc=new $i,Ac=new wa,gc=new rl,pc=new ma;class fc extends rl{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cc(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Ac)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new $i),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,uc),mc.copy(e.boundingBox).applyMatrix4(uc),this.boundingBox.union(mc)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new ma),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,uc),pc.copy(e.boundingSphere).applyMatrix4(uc),this.boundingSphere.union(pc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=e*(n.length+1)+1;for(let i=0;i<n.length;i++)n[i]=r[s+i]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(gc.geometry=this.geometry,gc.material=this.material,void 0!==gc.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),pc.copy(this.boundingSphere),pc.applyMatrix4(n),!1!==e.ray.intersectsSphere(pc)))for(let s=0;s<r;s++){this.getMatrixAt(s,uc),dc.multiplyMatrices(n,uc),gc.matrixWorld=dc,gc.raycast(e,hc);for(let e=0,n=hc.length;e<n;e++){const n=hc[e];n.instanceId=s,n.object=this,t.push(n)}hc.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new cc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new ic(new Float32Array(r*this.count),r,this.count,lr,Yn));const s=this.morphTexture.source.data.data;let i=0;for(let l=0;l<n.length;l++)i+=n[l];const a=this.geometry.morphTargetsRelative?1:1-i,o=r*e;s[o]=a,s.set(n,o+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}const xc=new Gi,vc=new Gi,yc=new pi;class bc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=xc.subVectors(n,t).cross(vc.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(xc),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||yc.getNormalMatrix(e),r=this.coplanarPoint(xc).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const wc=new ma,Nc=new Gi;class jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new bc,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new bc,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new bc,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new bc;this.planes=[e,t,n,r,s,i]}set(e,t,n,r,s,i){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(i),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Js;const n=this.planes,r=e.elements,s=r[0],i=r[1],a=r[2],o=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],m=r[9],A=r[10],g=r[11],p=r[12],f=r[13],x=r[14],v=r[15];if(n[0].setComponents(o-s,d-l,g-h,v-p).normalize(),n[1].setComponents(o+s,d+l,g+h,v+p).normalize(),n[2].setComponents(o+i,d+c,g+m,v+f).normalize(),n[3].setComponents(o-i,d-c,g-m,v-f).normalize(),n[4].setComponents(o-a,d-u,g-A,v-x).normalize(),t===Js)n[5].setComponents(o+a,d+u,g+A,v+x).normalize();else{if(t!==Zs)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,A,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),wc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),wc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(wc)}intersectsSprite(e){return wc.center.set(0,0,0),wc.radius=.7071067811865476,wc.applyMatrix4(e.matrixWorld),this.intersectsSphere(wc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++){if(t[s].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Nc.x=r.normal.x>0?e.max.x:e.min.x,Nc.y=r.normal.y>0?e.max.y:e.min.y,Nc.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Nc)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}const Cc=new wa,Tc=new jc;class Sc{constructor(){this.coordinateSystem=Js}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Cc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Tc.setFromProjectionMatrix(Cc,this.coordinateSystem),Tc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Cc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Tc.setFromProjectionMatrix(Cc,this.coordinateSystem),Tc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Cc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Tc.setFromProjectionMatrix(Cc,this.coordinateSystem),Tc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Cc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Tc.setFromProjectionMatrix(Cc,this.coordinateSystem),Tc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(Cc.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),Tc.setFromProjectionMatrix(Cc,this.coordinateSystem),Tc.containsPoint(e))return!0}return!1}clone(){return new Sc}}function _c(e,t){return e-t}function Ec(e,t){return e.z-t.z}function Bc(e,t){return t.z-e.z}class Mc{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,i=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];i.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const kc=new wa,Lc=new go(1,1,1),Ic=new jc,Dc=new Sc,Pc=new $i,Fc=new ma,Uc=new Gi,Rc=new Gi,Oc=new Gi,Hc=new Mc,Qc=new rl,zc=[];function Vc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const s=e.count;for(let i=0;i<s;i++)for(let s=0;s<r;s++)t.setComponent(i+n,s,e.getComponent(i,s))}else t.array.set(e.array,n*r);t.needsUpdate=!0}function Kc(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class Gc extends rl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,r=arguments.length>3?arguments[3]:void 0;super(new Ko,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new ic(t,e,e,ir,Yn);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new ic(t,e,e,cr,Xn);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new ic(t,e,e,ir,Yn);n.colorSpace=_i.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const s=e.getAttribute(r),{array:i,itemSize:a,normalized:o}=s,l=new i.constructor(n*a),c=new _o(l,a,o);t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new _o(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new $i);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,kc),this.getBoundingBoxAt(r,Pc).applyMatrix4(kc),e.union(Pc)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ma);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,kc),this.getBoundingSphereAt(r,Fc).applyMatrix4(kc),e.union(Fc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(_c),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const r=this._matricesTexture;kc.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const s=this._colorsTexture;return s&&(Lc.toArray(s.image.data,4*n),s.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const i=e.getIndex();if(null!==i&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?i.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let a;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(_c),a=this._availableGeometryIds.shift(),s[a]=r):(a=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(a,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,a}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),s=n.getIndex(),i=t.getIndex(),a=this._geometryInfo[e];if(r&&i.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const o=a.vertexStart,l=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const e=t.getAttribute(c),r=n.getAttribute(c);Vc(e,r,o);const s=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<s;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(o*s,l*s)}if(r){const e=a.indexStart,n=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let t=0;t<i.count;t++)s.setX(e+t,o+i.getX(t));for(let t=i.count,r=n;t<r;t++)s.setX(e+t,o);s.needsUpdate=!0,s.addUpdateRange(e,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,null!==t.boundingBox&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,null!==t.boundingSphere&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map(((e,t)=>t)).sort(((e,t)=>n[e].vertexStart-n[t].vertexStart)),s=this.geometry;for(let i=0,a=n.length;i<a;i++){const a=r[i],o=n[a];if(!1!==o.active){if(null!==s.index){if(o.indexStart!==t){const{indexStart:n,vertexStart:r,reservedIndexCount:i}=o,a=s.index,l=a.array,c=e-r;for(let e=n;e<n+i;e++)l[e]=l[e]+c;a.array.copyWithin(t,n,n+i),a.addUpdateRange(t,i),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=o,r=s.attributes;for(const s in r){const i=r[s],{array:a,itemSize:o}=i;a.copyWithin(e*o,t*o,(t+n)*o),i.addUpdateRange(e*o,n*o)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=s.index?o.indexStart:o.vertexStart,this._nextIndexStart=s.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){const e=new $i,t=n.index,s=n.attributes.position;for(let n=r.start,i=r.start+r.count;n<i;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(Uc.fromBufferAttribute(s,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){const t=new ma;this.getBoundingBoxAt(e,Pc),Pc.getCenter(t.center);const s=n.index,i=n.attributes.position;let a=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;s&&(n=s.getX(n)),Uc.fromBufferAttribute(i,n),a=Math.max(a,t.center.distanceToSquared(Uc))}t.radius=Math.sqrt(a),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(_c);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Kc(this._multiDrawCounts,r),Kc(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const i=this._indirectTexture,a=this._matricesTexture,o=this._colorsTexture;i.dispose(),this._initIndirectTexture(),Kc(i.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Kc(a.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),Kc(o.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter((e=>e.active));if(Math.max(...n.map((e=>e.vertexStart+e.reservedVertexCount)))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index){if(Math.max(...n.map((e=>e.indexStart+e.reservedIndexCount)))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`)}const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ko,this._initializeGeometry(r));const s=this.geometry;r.index&&Kc(r.index.array,s.index.array);for(const i in r.attributes)Kc(r.attributes[i].array,s.attributes[i].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,i=this.geometry;Qc.material=this.material,Qc.geometry.index=i.index,Qc.geometry.attributes=i.attributes,null===Qc.geometry.boundingBox&&(Qc.geometry.boundingBox=new $i),null===Qc.geometry.boundingSphere&&(Qc.geometry.boundingSphere=new ma);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;const i=n[a].geometryIndex,o=r[i];Qc.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(a,Qc.matrixWorld).premultiply(s),this.getBoundingBoxAt(i,Qc.geometry.boundingBox),this.getBoundingSphereAt(i,Qc.geometry.boundingSphere),Qc.raycast(e,zc);for(let e=0,n=zc.length;e<n;e++){const n=zc[e];n.object=this,n.batchId=a,t.push(n)}zc.length=0}Qc.material=null,Qc.geometry.index=null,Qc.geometry.attributes={},Qc.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map((e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null}))),this._instanceInfo=e._instanceInfo.map((e=>({...e}))),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const i=r.getIndex(),a=null===i?1:i.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._geometryInfo,d=this.perObjectFrustumCulled,h=this._indirectTexture,m=h.image.data,A=n.isArrayCamera?Dc:Ic;d&&!n.isArrayCamera&&(kc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Ic.setFromProjectionMatrix(kc,e.coordinateSystem));let g=0;if(this.sortObjects){kc.copy(this.matrixWorld).invert(),Uc.setFromMatrixPosition(n.matrixWorld).applyMatrix4(kc),Rc.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(kc);for(let r=0,s=o.length;r<s;r++)if(o[r].visible&&o[r].active){const e=o[r].geometryIndex;this.getMatrixAt(r,kc),this.getBoundingSphereAt(e,Fc).applyMatrix4(kc);let t=!1;if(d&&(t=!A.intersectsSphere(Fc,n)),!t){const t=u[e],n=Oc.subVectors(Fc.center,Uc).dot(Rc);Hc.push(t.start,t.count,n,r)}}const e=Hc.list,t=this.customSort;null===t?e.sort(s.transparent?Bc:Ec):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[g]=t.start*a,c[g]=t.count,m[g]=t.index,g++}Hc.reset()}else for(let p=0,f=o.length;p<f;p++)if(o[p].visible&&o[p].active){const e=o[p].geometryIndex;let t=!1;if(d&&(this.getMatrixAt(p,kc),this.getBoundingSphereAt(e,Fc).applyMatrix4(kc),t=!A.intersectsSphere(Fc,n)),!t){const t=u[e];l[g]=t.start*a,c[g]=t.count,m[g]=p,g++}}h.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,i){this.onBeforeRender(e,null,r,s,i)}}class qc extends xo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new go(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Wc=new Gi,$c=new Gi,Xc=new wa,Yc=new ba,Jc=new ma,Zc=new Gi,eu=new Gi;class tu extends $a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ko,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qc;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Wc.fromBufferAttribute(t,e-1),$c.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Wc.distanceTo($c);e.setAttribute("lineDistance",new Fo(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jc.copy(n.boundingSphere),Jc.applyMatrix4(r),Jc.radius+=s,!1===e.ray.intersectsSphere(Jc))return;Xc.copy(r).invert(),Yc.copy(e.ray).applyMatrix4(Xc);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,i.start),r=Math.min(c.count,i.start+i.count);for(let s=n,i=r-1;s<i;s+=l){const n=c.getX(s),r=c.getX(s+1),i=nu(this,e,Yc,o,n,r,s);i&&t.push(i)}if(this.isLineLoop){const s=c.getX(r-1),i=c.getX(n),a=nu(this,e,Yc,o,s,i,r-1);a&&t.push(a)}}else{const n=Math.max(0,i.start),r=Math.min(u.count,i.start+i.count);for(let s=n,i=r-1;s<i;s+=l){const n=nu(this,e,Yc,o,s,s+1,s);n&&t.push(n)}if(this.isLineLoop){const s=nu(this,e,Yc,o,r-1,n,r-1);s&&t.push(s)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function nu(e,t,n,r,s,i,a){const o=e.geometry.attributes.position;Wc.fromBufferAttribute(o,s),$c.fromBufferAttribute(o,i);if(n.distanceSqToSegment(Wc,$c,Zc,eu)>r)return;Zc.applyMatrix4(e.matrixWorld);const l=t.ray.origin.distanceTo(Zc);return l<t.near||l>t.far?void 0:{distance:l,point:eu.clone().applyMatrix4(e.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:e}}const ru=new Gi,su=new Gi;class iu extends tu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)ru.fromBufferAttribute(t,e),su.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+ru.distanceTo(su);e.setAttribute("lineDistance",new Fo(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class au extends tu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ou extends xo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new go(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const lu=new wa,cu=new ba,uu=new ma,du=new Gi;class hu extends $a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ko,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ou;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,i=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uu.copy(n.boundingSphere),uu.applyMatrix4(r),uu.radius+=s,!1===e.ray.intersectsSphere(uu))return;lu.copy(r).invert(),cu.copy(e.ray).applyMatrix4(lu);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,i.start),s=Math.min(l.count,i.start+i.count);n<s;n++){const s=l.getX(n);du.fromBufferAttribute(c,s),mu(du,s,o,r,e,t,this)}}else{for(let n=Math.max(0,i.start),s=Math.min(c.count,i.start+i.count);n<s;n++)du.fromBufferAttribute(c,n),mu(du,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function mu(e,t,n,r,s,i,a){const o=cu.distanceSqToPoint(e);if(o<n){const n=new Gi;cu.closestPointToPoint(e,n),n.applyMatrix4(r);const l=s.ray.origin.distanceTo(n);if(l<s.near||l>s.far)return;i.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:a})}}class Au extends Fi{constructor(e,t,n,r){super(e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:On,arguments.length>5&&void 0!==arguments[5]?arguments[5]:On,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8?arguments[8]:void 0),this.isVideoTexture=!0,this.generateMipmaps=!1;const s=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){s.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class gu extends Au{constructor(e,t,n,r,s,i,a,o){super({},e,t,n,r,s,i,a,o),this.isVideoFrameTexture=!0}update(){}clone(){return(new this.constructor).copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class pu extends Fi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Dn,this.minFilter=Dn,this.generateMipmaps=!1,this.needsUpdate=!0}}class fu extends Fi{constructor(e,t,n,r,s,i,a,o,l,c,u,d){super(null,i,a,o,l,c,r,s,u,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xu extends fu{constructor(e,t,n,r,s,i){super(e,t,n,s,i),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ln,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vu extends fu{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Sn),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class yu extends Fi{constructor(e,t,n,r,s,i,a,o,l){super(e,t,n,r,s,i,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class bu extends Fi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xn,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Dn,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Dn,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ar;if(c!==ar&&c!==or)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,i,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ii(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class wu extends bu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:n},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Nu extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const i=[],a=[],o=[],l=[],c=t/2,u=Math.PI/2*e,d=t,h=2*u+d,m=2*n+s,A=r+1,g=new Gi,p=new Gi;for(let f=0;f<=m;f++){let x=0,v=0,y=0,b=0;if(f<=n){const t=f/n,r=t*Math.PI/2;v=-c-e*Math.cos(r),y=e*Math.sin(r),b=-e*Math.cos(r),x=t*u}else if(f<=n+s){const r=(f-n)/s;v=r*t-c,y=e,b=0,x=u+r*d}else{const t=(f-n-s)/n,r=t*Math.PI/2;v=c+e*Math.sin(r),y=e*Math.cos(r),b=e*Math.sin(r),x=u+d+t*u}const w=Math.max(0,Math.min(1,x/h));let N=0;0===f?N=.5/r:f===m&&(N=-.5/r);for(let e=0;e<=r;e++){const t=e/r,n=t*Math.PI*2,s=Math.sin(n),i=Math.cos(n);p.x=-y*i,p.y=v,p.z=y*s,a.push(p.x,p.y,p.z),g.set(-y*i,b,y*s),g.normalize(),o.push(g.x,g.y,g.z),l.push(t+N,w)}if(f>0){const e=(f-1)*A;for(let t=0;t<r;t++){const n=e+t,r=e+t+1,s=f*A+t,a=f*A+t+1;i.push(n,r,s),i.push(r,a,s)}}}this.setIndex(i),this.setAttribute("position",new Fo(a,3)),this.setAttribute("normal",new Fo(o,3)),this.setAttribute("uv",new Fo(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nu(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class ju extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],i=[],a=[],o=[],l=new Gi,c=new gi;i.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const s=n+u/t*r;l.x=e*Math.cos(s),l.y=e*Math.sin(s),i.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(i[d]/e+1)/2,c.y=(i[d+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)s.push(u,u+1,0);this.setIndex(s),this.setAttribute("position",new Fo(i,3)),this.setAttribute("normal",new Fo(a,3)),this.setAttribute("uv",new Fo(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ju(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cu extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:i,thetaStart:a,thetaLength:o};const l=this;r=Math.floor(r),s=Math.floor(s);const c=[],u=[],d=[],h=[];let m=0;const A=[],g=n/2;let p=0;function f(n){const s=m,i=new gi,A=new Gi;let f=0;const x=!0===n?e:t,v=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,g*v,0),d.push(0,v,0),h.push(.5,.5),m++;const y=m;for(let e=0;e<=r;e++){const t=e/r*o+a,n=Math.cos(t),s=Math.sin(t);A.x=x*s,A.y=g*v,A.z=x*n,u.push(A.x,A.y,A.z),d.push(0,v,0),i.x=.5*n+.5,i.y=.5*s*v+.5,h.push(i.x,i.y),m++}for(let e=0;e<r;e++){const t=s+e,r=y+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),f+=3}l.addGroup(p,f,!0===n?1:2),p+=f}!function(){const i=new Gi,f=new Gi;let x=0;const v=(t-e)/n;for(let l=0;l<=s;l++){const c=[],p=l/s,x=p*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,s=t*o+a,l=Math.sin(s),A=Math.cos(s);f.x=x*l,f.y=-p*n+g,f.z=x*A,u.push(f.x,f.y,f.z),i.set(l,v,A).normalize(),d.push(i.x,i.y,i.z),h.push(t,1-p),c.push(m++)}A.push(c)}for(let n=0;n<r;n++)for(let r=0;r<s;r++){const i=A[r][n],a=A[r+1][n],o=A[r+1][n+1],l=A[r][n+1];(e>0||0!==r)&&(c.push(i,a,l),x+=3),(t>0||r!==s-1)&&(c.push(a,o,l),x+=3)}l.addGroup(p,x,0),p+=x}(),!1===i&&(e>0&&f(!0),t>0&&f(!1)),this.setIndex(c),this.setAttribute("position",new Fo(u,3)),this.setAttribute("normal",new Fo(d,3)),this.setAttribute("uv",new Fo(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tu extends Cu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,s,i,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:i,thetaLength:a}}static fromJSON(e){return new Tu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Su extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],i=[];function a(e,t,n,r){const s=r+1,i=[];for(let a=0;a<=s;a++){i[a]=[];const r=e.clone().lerp(n,a/s),o=t.clone().lerp(n,a/s),l=s-a;for(let e=0;e<=l;e++)i[a][e]=0===e&&a===s?r:r.clone().lerp(o,e/l)}for(let a=0;a<s;a++)for(let e=0;e<2*(s-a)-1;e++){const t=Math.floor(e/2);e%2===0?(o(i[a][t+1]),o(i[a+1][t]),o(i[a][t])):(o(i[a][t+1]),o(i[a+1][t+1]),o(i[a+1][t]))}}function o(e){s.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(i[t]=e.x-1),0===n.x&&0===n.z&&(i[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Gi,r=new Gi,s=new Gi;for(let i=0;i<t.length;i+=3)l(t[i+0],n),l(t[i+1],r),l(t[i+2],s),a(n,r,s,e)}(r),function(e){const t=new Gi;for(let n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}(n),function(){const e=new Gi;for(let n=0;n<s.length;n+=3){e.x=s[n+0],e.y=s[n+1],e.z=s[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);i.push(r,1-a)}var t;(function(){const e=new Gi,t=new Gi,n=new Gi,r=new Gi,a=new gi,o=new gi,l=new gi;for(let d=0,h=0;d<s.length;d+=9,h+=6){e.set(s[d+0],s[d+1],s[d+2]),t.set(s[d+3],s[d+4],s[d+5]),n.set(s[d+6],s[d+7],s[d+8]),a.set(i[h+0],i[h+1]),o.set(i[h+2],i[h+3]),l.set(i[h+4],i[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const m=u(r);c(a,h+0,e,m),c(o,h+2,t,m),c(l,h+4,n,m)}})(),function(){for(let e=0;e<i.length;e+=6){const t=i[e+0],n=i[e+2],r=i[e+4],s=Math.max(t,n,r),a=Math.min(t,n,r);s>.9&&a<.1&&(t<.2&&(i[e+0]+=1),n<.2&&(i[e+2]+=1),r<.2&&(i[e+4]+=1))}}()}(),this.setAttribute("position",new Fo(s,3)),this.setAttribute("normal",new Fo(s.slice(),3)),this.setAttribute("uv",new Fo(i,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Su(e.vertices,e.indices,e.radius,e.details)}}class _u extends Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _u(e.radius,e.detail)}}const Eu=new Gi,Bu=new Gi,Mu=new Gi,ku=new co;class Lu extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),s=Math.cos(ai*t),i=e.getIndex(),a=e.getAttribute("position"),o=i?i.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let e=0;e<o;e+=3){i?(l[0]=i.getX(e),l[1]=i.getX(e+1),l[2]=i.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=ku;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),ku.getNormal(Mu),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],i=ku[c[e]],a=ku[c[t]],o=`${n}_${r}`,m=`${r}_${n}`;m in d&&d[m]?(Mu.dot(d[m].normal)<=s&&(h.push(i.x,i.y,i.z),h.push(a.x,a.y,a.z)),d[m]=null):o in d||(d[o]={index0:l[e],index1:l[t],normal:Mu.clone()})}}for(const e in d)if(d[e]){const{index0:t,index1:n}=d[e];Eu.fromBufferAttribute(a,t),Bu.fromBufferAttribute(a,n),h.push(Eu.x,Eu.y,Eu.z),h.push(Bu.x,Bu.y,Bu.z)}this.setAttribute("position",new Fo(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Iu{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let i=1;i<=e;i++)n=this.getPoint(i/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getLengths();let r=0;const s=n.length;let i;i=t||e*n[s-1];let a,o=0,l=s-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),a=n[r]-i,a<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===i)return r/(s-1);const c=n[r];return(r+(i-c)/(n[r+1]-c))/(s-1)}getTangent(e,t){const n=1e-4;let r=e-n,s=e+n;r<0&&(r=0),s>1&&(s=1);const i=this.getPoint(r),a=this.getPoint(s),o=t||(i.isVector2?new gi:new Gi);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new Gi,r=[],s=[],i=[],a=new Gi,o=new wa;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new Gi)}s[0]=new Gi,i[0]=new Gi;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),i[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),i[h]=i[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(ci(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(o.makeRotationAxis(a,e))}i[h].crossVectors(r[h],s[h])}if(!0===t){let t=Math.acos(ci(s[0].dot(s[e]),-1,1));t/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(t=-t);for(let n=1;n<=e;n++)s[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),i[n].crossVectors(r[n],s[n])}return{tangents:r,normals:s,binormals:i}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Du extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=i,this.aClockwise=a,this.aRotation=o}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=s?0:n),!0!==this.aClockwise||s||(r===n?r=-n:r-=n);const i=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(i),o=this.aY+this.yRadius*Math.sin(i);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=o-this.aY;a=n*e-r*t+this.aX,o=n*t+r*e+this.aY}return t.set(a,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Pu extends Du{constructor(e,t,n,r,s,i){super(e,t,n,n,r,s,i),this.isArcCurve=!0,this.type="ArcCurve"}}function Fu(){let e=0,t=0,n=0,r=0;function s(s,i,a,o){e=s,t=a,n=-3*s+3*i-2*a-o,r=2*s-2*i+a+o}return{initCatmullRom:function(e,t,n,r,i){s(t,n,i*(n-e),i*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,i,a,o){let l=(t-e)/i-(n-e)/(i+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l*=a,c*=a,s(t,n,l,c)},calc:function(s){const i=s*s;return e+t*s+n*i+r*(i*s)}}}const Uu=new Gi,Ru=new Fu,Ou=new Fu,Hu=new Fu;class Qu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=this.points,r=n.length,s=(r-(this.closed?0:1))*e;let i,a,o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:0===l&&o===r-1&&(o=r-2,l=1),this.closed||o>0?i=n[(o-1)%r]:(Uu.subVectors(n[0],n[1]).add(n[0]),i=Uu);const c=n[o%r],u=n[(o+1)%r];if(this.closed||o+2<r?a=n[(o+2)%r]:(Uu.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=Uu),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(i.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Ru.initNonuniformCatmullRom(i.x,c.x,u.x,a.x,t,n,r),Ou.initNonuniformCatmullRom(i.y,c.y,u.y,a.y,t,n,r),Hu.initNonuniformCatmullRom(i.z,c.z,u.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Ru.initCatmullRom(i.x,c.x,u.x,a.x,this.tension),Ou.initCatmullRom(i.y,c.y,u.y,a.y,this.tension),Hu.initCatmullRom(i.z,c.z,u.z,a.z,this.tension));return t.set(Ru.calc(l),Ou.calc(l),Hu.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Gi).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zu(e,t,n,r,s){const i=.5*(r-t),a=.5*(s-n),o=e*e;return(2*n-2*r+i+a)*(e*o)+(-3*n+3*r-2*i-a)*o+i*e+n}function Vu(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ku(e,t,n,r,s){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,s)}class Gu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gi;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=this.v0,r=this.v1,s=this.v2,i=this.v3;return t.set(Ku(e,n.x,r.x,s.x,i.x),Ku(e,n.y,r.y,s.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class qu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Gi;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=this.v0,r=this.v1,s=this.v2,i=this.v3;return t.set(Ku(e,n.x,r.x,s.x,i.x),Ku(e,n.y,r.y,s.y,i.y),Ku(e,n.z,r.z,s.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Wu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $u extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Xu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new gi;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=this.v0,r=this.v1,s=this.v2;return t.set(Vu(e,n.x,r.x,s.x),Vu(e,n.y,r.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Yu extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Gi;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi,n=this.v0,r=this.v1,s=this.v2;return t.set(Vu(e,n.x,r.x,s.x),Vu(e,n.y,r.y,s.y),Vu(e,n.z,r.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ju extends Iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi,n=this.points,r=(n.length-1)*e,s=Math.floor(r),i=r-s,a=n[0===s?s:s-1],o=n[s],l=n[s>n.length-2?n.length-1:s+1],c=n[s>n.length-3?n.length-1:s+2];return t.set(zu(i,a.x,o.x,l.x,c.x),zu(i,a.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new gi).fromArray(n))}return this}}var Zu=Object.freeze({__proto__:null,ArcCurve:Pu,CatmullRomCurve3:Qu,CubicBezierCurve:Gu,CubicBezierCurve3:qu,EllipseCurve:Du,LineCurve:Wu,LineCurve3:$u,QuadraticBezierCurve:Xu,QuadraticBezierCurve3:Yu,SplineCurve:Ju});class ed extends Iu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Zu[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const e=r[s]-n,i=this.curves[s],a=i.getLength(),o=0===a?0:1-e/a;return i.getPointAt(o,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const i=s[r],a=i.isEllipseCurve?2*e:i.isLineCurve||i.isLineCurve3?1:i.isSplineCurve?e*i.points.length:e,o=i.getPoints(a);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Zu[n.type]).fromJSON(n))}return this}}class td extends ed{constructor(e){super(),this.type="Path",this.currentPoint=new gi,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Wu(this.currentPoint.clone(),new gi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new Xu(this.currentPoint.clone(),new gi(e,t),new gi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,i){const a=new Gu(this.currentPoint.clone(),new gi(e,t),new gi(n,r),new gi(s,i));return this.curves.push(a),this.currentPoint.set(s,i),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Ju(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,i){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,r,s,i),this}absarc(e,t,n,r,s,i){return this.absellipse(e,t,n,n,r,s,i),this}ellipse(e,t,n,r,s,i,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,s,i,a,o),this}absellipse(e,t,n,r,s,i,a,o){const l=new Du(e,t,n,r,s,i,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class nd extends td{constructor(e){super(e),this.uuid=li(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new td).fromJSON(n))}return this}}function rd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,s=r?t[0]*n:e.length;let i=sd(e,0,s,n,!0);const a=[];if(!i||i.next===i.prev)return a;let o,l,c;if(r&&(i=function(e,t,n,r){const s=[];for(let i=0,a=t.length;i<a;i++){const n=sd(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1);n===n.next&&(n.steiner=!0),s.push(gd(n))}s.sort(dd);for(let i=0;i<s.length;i++)n=hd(s[i],n);return n}(e,t,i,n)),e.length>80*n){o=1/0,l=1/0;let t=-1/0,r=-1/0;for(let i=n;i<s;i+=n){const n=e[i],s=e[i+1];n<o&&(o=n),s<l&&(l=s),n>t&&(t=n),s>r&&(r=s)}c=Math.max(t-o,r-l),c=0!==c?32767/c:0}return ad(i,a,n,o,l,c,0),a}function sd(e,t,n,r,s){let i;if(s===function(e,t,n,r){let s=0;for(let i=t,a=n-r;i<n;i+=r)s+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return s}(e,t,n,r)>0)for(let a=t;a<n;a+=r)i=Td(a/r|0,e[a],e[a+1],i);else for(let a=n-r;a>=t;a-=r)i=Td(a/r|0,e[a],e[a+1],i);return i&&yd(i,i.next)&&(Sd(i),i=i.next),i}function id(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!yd(r,r.next)&&0!==vd(r.prev,r,r.next))r=r.next;else{if(Sd(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function ad(e,t,n,r,s,i,a){if(!e)return;!a&&i&&function(e,t,n,r){let s=e;do{0===s.z&&(s.z=Ad(s.x,s.y,t,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){let t,n=1;do{let r,s=e;e=null;let i=null;for(t=0;s;){t++;let a=s,o=0;for(let e=0;e<n&&(o++,a=a.nextZ,a);e++);let l=n;for(;o>0||l>0&&a;)0!==o&&(0===l||!a||s.z<=a.z)?(r=s,s=s.nextZ,o--):(r=a,a=a.nextZ,l--),i?i.nextZ=r:e=r,r.prevZ=i,i=r;s=a}i.nextZ=null,n*=2}while(t>1)}(s)}(e,r,s,i);let o=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(i?ld(e,r,s,i):od(e))t.push(l.i,e.i,c.i),Sd(e),e=c.next,o=c.next;else if((e=c)===o){a?1===a?ad(e=cd(id(e),t),t,n,r,s,i,2):2===a&&ud(e,t,n,r,s,i):ad(id(e),t,n,r,s,i,1);break}}}function od(e){const t=e.prev,n=e,r=e.next;if(vd(t,n,r)>=0)return!1;const s=t.x,i=n.x,a=r.x,o=t.y,l=n.y,c=r.y,u=Math.min(s,i,a),d=Math.min(o,l,c),h=Math.max(s,i,a),m=Math.max(o,l,c);let A=r.next;for(;A!==t;){if(A.x>=u&&A.x<=h&&A.y>=d&&A.y<=m&&fd(s,o,i,l,a,c,A.x,A.y)&&vd(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function ld(e,t,n,r){const s=e.prev,i=e,a=e.next;if(vd(s,i,a)>=0)return!1;const o=s.x,l=i.x,c=a.x,u=s.y,d=i.y,h=a.y,m=Math.min(o,l,c),A=Math.min(u,d,h),g=Math.max(o,l,c),p=Math.max(u,d,h),f=Ad(m,A,t,n,r),x=Ad(g,p,t,n,r);let v=e.prevZ,y=e.nextZ;for(;v&&v.z>=f&&y&&y.z<=x;){if(v.x>=m&&v.x<=g&&v.y>=A&&v.y<=p&&v!==s&&v!==a&&fd(o,u,l,d,c,h,v.x,v.y)&&vd(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,y.x>=m&&y.x<=g&&y.y>=A&&y.y<=p&&y!==s&&y!==a&&fd(o,u,l,d,c,h,y.x,y.y)&&vd(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;v&&v.z>=f;){if(v.x>=m&&v.x<=g&&v.y>=A&&v.y<=p&&v!==s&&v!==a&&fd(o,u,l,d,c,h,v.x,v.y)&&vd(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;y&&y.z<=x;){if(y.x>=m&&y.x<=g&&y.y>=A&&y.y<=p&&y!==s&&y!==a&&fd(o,u,l,d,c,h,y.x,y.y)&&vd(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function cd(e,t){let n=e;do{const r=n.prev,s=n.next.next;!yd(r,s)&&bd(r,n,n.next,s)&&jd(r,s)&&jd(s,r)&&(t.push(r.i,n.i,s.i),Sd(n),Sd(n.next),n=e=s),n=n.next}while(n!==e);return id(n)}function ud(e,t,n,r,s,i){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&xd(a,e)){let o=Cd(a,e);return a=id(a,a.next),o=id(o,o.next),ad(a,t,n,r,s,i,0),void ad(o,t,n,r,s,i,0)}e=e.next}a=a.next}while(a!==e)}function dd(e,t){let n=e.x-t.x;if(0===n&&(n=e.y-t.y,0===n)){n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)}return n}function hd(e,t){const n=function(e,t){let n=t;const r=e.x,s=e.y;let i,a=-1/0;if(yd(e,n))return n;do{if(yd(e,n.next))return n.next;if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a&&(a=e,i=n.x<n.next.x?n:n.next,e===r))return i}n=n.next}while(n!==t);if(!i)return null;const o=i,l=i.x,c=i.y;let u=1/0;n=i;do{if(r>=n.x&&n.x>=l&&r!==n.x&&pd(s<c?r:a,s,l,c,s<c?a:r,s,n.x,n.y)){const t=Math.abs(s-n.y)/(r-n.x);jd(n,e)&&(t<u||t===u&&(n.x>i.x||n.x===i.x&&md(i,n)))&&(i=n,u=t)}n=n.next}while(n!==o);return i}(e,t);if(!n)return t;const r=Cd(n,e);return id(r,r.next),id(n,n.next)}function md(e,t){return vd(e.prev,e,t.prev)<0&&vd(t.next,e,e.next)<0}function Ad(e,t,n,r,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function gd(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function pd(e,t,n,r,s,i,a,o){return(s-a)*(t-o)>=(e-a)*(i-o)&&(e-a)*(r-o)>=(n-a)*(t-o)&&(n-a)*(i-o)>=(s-a)*(r-o)}function fd(e,t,n,r,s,i,a,o){return!(e===a&&t===o)&&pd(e,t,n,r,s,i,a,o)}function xd(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&bd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(jd(e,t)&&jd(t,e)&&function(e,t){let n=e,r=!1;const s=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!==n.next.y>i&&n.next.y!==n.y&&s<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(vd(e.prev,e,t.prev)||vd(e,t.prev,t))||yd(e,t)&&vd(e.prev,e,e.next)>0&&vd(t.prev,t,t.next)>0)}function vd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function yd(e,t){return e.x===t.x&&e.y===t.y}function bd(e,t,n,r){const s=Nd(vd(e,t,n)),i=Nd(vd(e,t,r)),a=Nd(vd(n,r,e)),o=Nd(vd(n,r,t));return s!==i&&a!==o||(!(0!==s||!wd(e,n,t))||(!(0!==i||!wd(e,r,t))||(!(0!==a||!wd(n,e,r))||!(0!==o||!wd(n,t,r)))))}function wd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Nd(e){return e>0?1:e<0?-1:0}function jd(e,t){return vd(e.prev,e,e.next)<0?vd(e,t,e.next)>=0&&vd(e,e.prev,t)>=0:vd(e,t,e.prev)<0||vd(e,e.next,t)<0}function Cd(e,t){const n=_d(e.i,e.x,e.y),r=_d(t.i,t.x,t.y),s=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=s,s.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function Td(e,t,n,r){const s=_d(e,t,n);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function Sd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _d(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ed{static triangulate(e,t){return rd(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:2)}}class Bd{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return Bd.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Md(e),kd(n,e);let i=e.length;t.forEach(Md);for(let o=0;o<t.length;o++)r.push(i),i+=t[o].length,kd(n,t[o]);const a=Ed.triangulate(n,r);for(let o=0;o<a.length;o+=3)s.push(a.slice(o,o+3));return s}}function Md(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function kd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Ld extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nd([new gi(.5,.5),new gi(-.5,.5),new gi(-.5,-.5),new gi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,o=e.length;a<o;a++){i(e[a])}function i(e){const i=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,d=void 0!==t.bevelSize?t.bevelSize:u-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3;const A=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:Id;let p,f,x,v,y,b=!1;A&&(p=A.getSpacedPoints(o),b=!0,c=!1,f=A.computeFrenetFrames(o,!1),x=new Gi,v=new Gi,y=new Gi),c||(m=0,u=0,d=0,h=0);const w=e.extractPoints(a);let N=w.shape;const j=w.holes;if(!Bd.isClockWise(N)){N=N.reverse();for(let e=0,t=j.length;e<t;e++){const t=j[e];Bd.isClockWise(t)&&(j[e]=t.reverse())}}function C(e){const t=1e-10*1e-10;let n=e[0];for(let r=1;r<=e.length;r++){const s=r%e.length,i=e[s],a=i.x-n.x,o=i.y-n.y,l=a*a+o*o,c=Math.max(Math.abs(i.x),Math.abs(i.y),Math.abs(n.x),Math.abs(n.y));l<=t*c*c?(e.splice(s,1),r--):n=i}}C(N),j.forEach(C);const T=j.length,S=N;for(let t=0;t<T;t++){const e=j[t];N=N.concat(e)}function _(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const E=N.length;function B(e,t,n){let r,s,i;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,d=a*c-o*l;if(Math.abs(d)>Number.EPSILON){const d=Math.sqrt(u),h=Math.sqrt(l*l+c*c),m=t.x-o/d,A=t.y+a/d,g=((n.x-c/h-m)*c-(n.y+l/h-A)*l)/(a*c-o*l);r=m+a*g-e.x,s=A+o*g-e.y;const p=r*r+s*s;if(p<=2)return new gi(r,s);i=Math.sqrt(p/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,s=a,i=Math.sqrt(u)):(r=a,s=o,i=Math.sqrt(u/2))}return new gi(r/i,s/i)}const M=[];for(let t=0,n=S.length,r=n-1,s=t+1;t<n;t++,r++,s++)r===n&&(r=0),s===n&&(s=0),M[t]=B(S[t],S[r],S[s]);const k=[];let L,I,D=M.concat();for(let t=0,n=T;t<n;t++){const e=j[t];L=[];for(let t=0,n=e.length,r=n-1,s=t+1;t<n;t++,r++,s++)r===n&&(r=0),s===n&&(s=0),L[t]=B(e[t],e[r],e[s]);k.push(L),D=D.concat(L)}if(0===m)I=Bd.triangulateShape(S,j);else{const e=[],t=[];for(let n=0;n<m;n++){const r=n/m,s=u*Math.cos(r*Math.PI/2),i=d*Math.sin(r*Math.PI/2)+h;for(let t=0,n=S.length;t<n;t++){const n=_(S[t],M[t],i);R(n.x,n.y,-s),0===r&&e.push(n)}for(let e=0,n=T;e<n;e++){const n=j[e];L=k[e];const a=[];for(let e=0,t=n.length;e<t;e++){const t=_(n[e],L[e],i);R(t.x,t.y,-s),0===r&&a.push(t)}0===r&&t.push(a)}}I=Bd.triangulateShape(e,t)}const P=I.length,F=d+h;for(let t=0;t<E;t++){const e=c?_(N[t],D[t],F):N[t];b?(v.copy(f.normals[0]).multiplyScalar(e.x),x.copy(f.binormals[0]).multiplyScalar(e.y),y.copy(p[0]).add(v).add(x),R(y.x,y.y,y.z)):R(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<E;e++){const n=c?_(N[e],D[e],F):N[e];b?(v.copy(f.normals[t]).multiplyScalar(n.x),x.copy(f.binormals[t]).multiplyScalar(n.y),y.copy(p[t]).add(v).add(x),R(y.x,y.y,y.z)):R(n.x,n.y,l/o*t)}for(let t=m-1;t>=0;t--){const e=t/m,n=u*Math.cos(e*Math.PI/2),r=d*Math.sin(e*Math.PI/2)+h;for(let t=0,s=S.length;t<s;t++){const e=_(S[t],M[t],r);R(e.x,e.y,l+n)}for(let t=0,s=j.length;t<s;t++){const e=j[t];L=k[t];for(let t=0,s=e.length;t<s;t++){const s=_(e[t],L[t],r);b?R(s.x,s.y+p[o-1].y,p[o-1].x+n):R(s.x,s.y,l+n)}}}function U(e,t){let n=e.length;for(;--n>=0;){const r=n;let s=n-1;s<0&&(s=e.length-1);for(let e=0,n=o+2*m;e<n;e++){const n=E*e,i=E*(e+1);H(t+r+n,t+s+n,t+s+i,t+r+i)}}}function R(e,t,n){i.push(e),i.push(t),i.push(n)}function O(e,t,s){Q(e),Q(t),Q(s);const i=r.length/3,a=g.generateTopUV(n,r,i-3,i-2,i-1);z(a[0]),z(a[1]),z(a[2])}function H(e,t,s,i){Q(e),Q(t),Q(i),Q(t),Q(s),Q(i);const a=r.length/3,o=g.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);z(o[0]),z(o[1]),z(o[3]),z(o[1]),z(o[2]),z(o[3])}function Q(e){r.push(i[3*e+0]),r.push(i[3*e+1]),r.push(i[3*e+2])}function z(e){s.push(e.x),s.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=E*e;for(let n=0;n<P;n++){const e=I[n];O(e[2]+t,e[1]+t,e[0]+t)}e=o+2*m,t=E*e;for(let n=0;n<P;n++){const e=I[n];O(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=I[e];O(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=I[e];O(t[0]+E*o,t[1]+E*o,t[2]+E*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;U(S,t),t+=S.length;for(let n=0,r=j.length;n<r;n++){const e=j[n];U(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Fo(r,3)),this.setAttribute("uv",new Fo(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,s=e.length;r<s;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let s=0,i=e.shapes.length;s<i;s++){const r=t[e.shapes[s]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Zu[r.type]).fromJSON(r)),new Ld(n,e.options)}}const Id={generateTopUV:function(e,t,n,r,s){const i=t[3*n],a=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*s],u=t[3*s+1];return[new gi(i,a),new gi(o,l),new gi(c,u)]},generateSideWallUV:function(e,t,n,r,s,i){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],d=t[3*r+2],h=t[3*s],m=t[3*s+1],A=t[3*s+2],g=t[3*i],p=t[3*i+1],f=t[3*i+2];return Math.abs(o-u)<Math.abs(a-c)?[new gi(a,1-l),new gi(c,1-d),new gi(h,1-A),new gi(g,1-f)]:[new gi(o,1-l),new gi(u,1-d),new gi(m,1-A),new gi(p,1-f)]}};class Dd extends Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Dd(e.radius,e.detail)}}class Pd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new gi(0,-.5),new gi(.5,0),new gi(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=ci(r,0,2*Math.PI);const s=[],i=[],a=[],o=[],l=[],c=1/t,u=new Gi,d=new gi,h=new Gi,m=new Gi,A=new Gi;let g=0,p=0;for(let f=0;f<=e.length-1;f++)switch(f){case 0:g=e[f+1].x-e[f].x,p=e[f+1].y-e[f].y,h.x=1*p,h.y=-g,h.z=0*p,A.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(A.x,A.y,A.z);break;default:g=e[f+1].x-e[f].x,p=e[f+1].y-e[f].y,h.x=1*p,h.y=-g,h.z=0*p,m.copy(h),h.x+=A.x,h.y+=A.y,h.z+=A.z,h.normalize(),o.push(h.x,h.y,h.z),A.copy(m)}for(let f=0;f<=t;f++){const s=n+f*c*r,h=Math.sin(s),m=Math.cos(s);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*m,i.push(u.x,u.y,u.z),d.x=f/t,d.y=n/(e.length-1),a.push(d.x,d.y);const r=o[3*n+0]*h,s=o[3*n+1],c=o[3*n+0]*m;l.push(r,s,c)}}for(let f=0;f<t;f++)for(let t=0;t<e.length-1;t++){const n=t+f*e.length,r=n,i=n+e.length,a=n+e.length+1,o=n+1;s.push(r,i,o),s.push(a,o,i)}this.setIndex(s),this.setAttribute("position",new Fo(i,3)),this.setAttribute("uv",new Fo(a,2)),this.setAttribute("normal",new Fo(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pd(e.points,e.segments,e.phiStart,e.phiLength)}}class Fd extends Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Fd(e.radius,e.detail)}}class Ud extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,i=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,c=o+1,u=e/a,d=t/o,h=[],m=[],A=[],g=[];for(let p=0;p<c;p++){const e=p*d-i;for(let t=0;t<l;t++){const n=t*u-s;m.push(n,-e,0),A.push(0,0,1),g.push(t/a),g.push(1-p/o)}}for(let p=0;p<o;p++)for(let e=0;e<a;e++){const t=e+l*p,n=e+l*(p+1),r=e+1+l*(p+1),s=e+1+l*p;h.push(t,n,s),h.push(n,r,s)}this.setIndex(h),this.setAttribute("position",new Fo(m,3)),this.setAttribute("normal",new Fo(A,3)),this.setAttribute("uv",new Fo(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ud(e.width,e.height,e.widthSegments,e.heightSegments)}}class Rd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:i},n=Math.max(3,n),r=Math.max(1,r);const a=[],o=[],l=[],c=[];let u=e;const d=(t-e)/r,h=new Gi,m=new gi;for(let A=0;A<=r;A++){for(let e=0;e<=n;e++){const r=s+e/n*i;h.x=u*Math.cos(r),h.y=u*Math.sin(r),o.push(h.x,h.y,h.z),l.push(0,0,1),m.x=(h.x/t+1)/2,m.y=(h.y/t+1)/2,c.push(m.x,m.y)}u+=d}for(let A=0;A<r;A++){const e=A*(n+1);for(let t=0;t<n;t++){const r=t+e,s=r,i=r+n+1,o=r+n+2,l=r+1;a.push(s,i,l),a.push(i,o,l)}}this.setIndex(a),this.setAttribute("position",new Fo(o,3)),this.setAttribute("normal",new Fo(l,3)),this.setAttribute("uv",new Fo(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Od extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nd([new gi(0,.5),new gi(-.5,-.5),new gi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],i=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,o,c),a+=o,o=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Bd.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Bd.isClockWise(e)&&(u[t]=e.reverse())}const d=Bd.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),s.push(0,0,1),i.push(e.x,e.y)}for(let t=0,r=d.length;t<r;t++){const e=d[t],r=e[0]+a,s=e[1]+a,i=e[2]+a;n.push(r,s,i),o+=3}}this.setIndex(n),this.setAttribute("position",new Fo(r,3)),this.setAttribute("normal",new Fo(s,3)),this.setAttribute("uv",new Fo(i,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const s=t[e.shapes[r]];n.push(s)}return new Od(n,e.curveSegments)}}class Hd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:i,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(i+a,Math.PI);let l=0;const c=[],u=new Gi,d=new Gi,h=[],m=[],A=[],g=[];for(let p=0;p<=n;p++){const h=[],f=p/n;let x=0;0===p&&0===i?x=.5/t:p===n&&o===Math.PI&&(x=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(r+o*s)*Math.sin(i+f*a),u.y=e*Math.cos(i+f*a),u.z=e*Math.sin(r+o*s)*Math.sin(i+f*a),m.push(u.x,u.y,u.z),d.copy(u).normalize(),A.push(d.x,d.y,d.z),g.push(o+x,1-f),h.push(l++)}c.push(h)}for(let p=0;p<n;p++)for(let e=0;e<t;e++){const t=c[p][e+1],r=c[p][e],s=c[p+1][e],a=c[p+1][e+1];(0!==p||i>0)&&h.push(t,r,a),(p!==n-1||o<Math.PI)&&h.push(r,s,a)}this.setIndex(h),this.setAttribute("position",new Fo(m,3)),this.setAttribute("normal",new Fo(A,3)),this.setAttribute("uv",new Fo(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qd extends Su{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qd(e.radius,e.detail)}}class zd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const i=[],a=[],o=[],l=[],c=new Gi,u=new Gi,d=new Gi;for(let h=0;h<=n;h++)for(let i=0;i<=r;i++){const m=i/r*s,A=h/n*Math.PI*2;u.x=(e+t*Math.cos(A))*Math.cos(m),u.y=(e+t*Math.cos(A))*Math.sin(m),u.z=t*Math.sin(A),a.push(u.x,u.y,u.z),c.x=e*Math.cos(m),c.y=e*Math.sin(m),d.subVectors(u,c).normalize(),o.push(d.x,d.y,d.z),l.push(i/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,s=(r+1)*(h-1)+e,a=(r+1)*h+e;i.push(t,n,a),i.push(n,s,a)}this.setIndex(i),this.setAttribute("position",new Fo(a,3)),this.setAttribute("normal",new Fo(o,3)),this.setAttribute("uv",new Fo(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Vd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new Gi,d=new Gi,h=new Gi,m=new Gi,A=new Gi,g=new Gi,p=new Gi;for(let x=0;x<=n;++x){const a=x/n*s*Math.PI*2;f(a,s,i,e,h),f(a+.01,s,i,e,m),g.subVectors(m,h),p.addVectors(m,h),A.crossVectors(g,p),p.crossVectors(A,g),A.normalize(),p.normalize();for(let e=0;e<=r;++e){const s=e/r*Math.PI*2,i=-t*Math.cos(s),a=t*Math.sin(s);u.x=h.x+(i*p.x+a*A.x),u.y=h.y+(i*p.y+a*A.y),u.z=h.z+(i*p.z+a*A.z),o.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(x/n),c.push(e/r)}}for(let x=1;x<=n;x++)for(let e=1;e<=r;e++){const t=(r+1)*(x-1)+(e-1),n=(r+1)*x+(e-1),s=(r+1)*x+e,i=(r+1)*(x-1)+e;a.push(t,n,i),a.push(n,s,i)}function f(e,t,n,r,s){const i=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);s.x=r*(2+l)*.5*i,s.y=r*(2+l)*a*.5,s.z=r*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new Fo(o,3)),this.setAttribute("normal",new Fo(l,3)),this.setAttribute("uv",new Fo(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Kd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yu(new Gi(-1,-1,0),new Gi(-1,1,0),new Gi(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const i=e.computeFrenetFrames(t,s);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals;const a=new Gi,o=new Gi,l=new gi;let c=new Gi;const u=[],d=[],h=[],m=[];function A(s){c=e.getPointAt(s/t,c);const l=i.normals[s],h=i.binormals[s];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,s=Math.sin(t),i=-Math.cos(t);o.x=i*l.x+s*h.x,o.y=i*l.y+s*h.y,o.z=i*l.z+s*h.z,o.normalize(),d.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)A(e);A(!1===s?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),s=(r+1)*e+(t-1),i=(r+1)*e+t,a=(r+1)*(e-1)+t;m.push(n,s,a),m.push(s,i,a)}}()}(),this.setIndex(m),this.setAttribute("position",new Fo(u,3)),this.setAttribute("normal",new Fo(d,3)),this.setAttribute("uv",new Fo(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Kd((new Zu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Gd extends Ko{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new Gi,s=new Gi;if(null!==e.index){const i=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=a.getX(e+l),c=a.getX(e+(l+1)%3);r.fromBufferAttribute(i,o),s.fromBufferAttribute(i,c),!0===qd(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const i=e.attributes.position;for(let e=0,a=i.count/3;e<a;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(i,a),s.fromBufferAttribute(i,l),!0===qd(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Fo(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function qd(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,s=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(s)&&(n.add(r),n.add(s),!0)}var Wd=Object.freeze({__proto__:null,BoxGeometry:il,CapsuleGeometry:Nu,CircleGeometry:ju,ConeGeometry:Tu,CylinderGeometry:Cu,DodecahedronGeometry:_u,EdgesGeometry:Lu,ExtrudeGeometry:Ld,IcosahedronGeometry:Dd,LatheGeometry:Pd,OctahedronGeometry:Fd,PlaneGeometry:Ud,PolyhedronGeometry:Su,RingGeometry:Rd,ShapeGeometry:Od,SphereGeometry:Hd,TetrahedronGeometry:Qd,TorusGeometry:zd,TorusKnotGeometry:Vd,TubeGeometry:Kd,WireframeGeometry:Gd});class $d extends xo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new go(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Xd extends ul{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Yd extends xo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new go(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new go(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ka,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jd extends Yd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ci(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new go(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new go(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new go(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Zd extends xo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new go(16777215),this.specular=new go(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new go(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ka,this.combine=mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eh extends xo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new go(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new go(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class th extends xo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nh extends xo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new go(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new go(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ka,this.combine=mn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rh extends xo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=as,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class sh extends xo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class ih extends xo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new go(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=us,this.normalScale=new gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ah extends qc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function oh(e,t){return e&&e.constructor!==t?"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function lh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ch(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function uh(e,t,n){const r=e.length,s=new e.constructor(r);for(let i=0,a=0;a!==r;++i){const r=n[i]*t;for(let n=0;n!==t;++n)s[a++]=e[r+n]}return s}function dh(e,t,n,r){let s=1,i=e[0];for(;void 0!==i&&void 0===i[r];)i=e[s++];if(void 0===i)return;let a=i[r];if(void 0!==a)if(Array.isArray(a))do{a=i[r],void 0!==a&&(t.push(i.time),n.push(...a)),i=e[s++]}while(void 0!==i);else if(void 0!==a.toArray)do{a=i[r],void 0!==a&&(t.push(i.time),a.toArray(n,n.length)),i=e[s++]}while(void 0!==i);else do{a=i[r],void 0!==a&&(t.push(i.time),n.push(a)),i=e[s++]}while(void 0!==i)}class hh{static convertArray(e,t){return oh(e,t)}static isTypedArray(e){return lh(e)}static getKeyframeOrder(e){return ch(e)}static sortedArray(e,t,n){return uh(e,t,n)}static flattenJSON(e,t,n,r){dh(e,t,n,r)}static subclip(e,t,n,r){return function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const i=e.clone();i.name=t;const a=[];for(let l=0;l<i.tracks.length;++l){const e=i.tracks[l],t=e.getValueSize(),o=[],c=[];for(let i=0;i<e.times.length;++i){const a=e.times[i]*s;if(!(a<n||a>=r)){o.push(e.times[i]);for(let n=0;n<t;++n)c.push(e.values[i*t+n])}}0!==o.length&&(e.times=oh(o,e.times.constructor),e.values=oh(c,e.values.constructor),a.push(e))}i.tracks=a;let o=1/0;for(let l=0;l<i.tracks.length;++l)o>i.tracks[l].times[0]&&(o=i.tracks[l].times[0]);for(let l=0;l<i.tracks.length;++l)i.tracks[l].shift(-1*o);return i.resetDuration(),i}(e,t,n,r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:30)}static makeClipAdditive(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const s=n.tracks.length,i=t/r;for(let a=0;a<s;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===s)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const d=t.times.length-1;let h;if(i<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(i>=t.times[d]){const e=d*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,r=l-o;e.evaluate(i),h=e.resultBuffer.slice(n,r)}"quaternion"===r&&(new Ki).fromArray(h).normalize().conjugate().toArray(h);const m=s.times.length;for(let e=0;e<m;++e){const t=e*u+c;if("quaternion"===r)Ki.multiplyQuaternionsFlat(s.values,t,h,0,s.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)s.values[t+n]-=h[n]}}}return e.blendMode=ns,e}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:30)}}class mh{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let i;n:{r:if(!(e<r)){for(let i=n+2;;){if(void 0===r){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===i)break;if(s=r,r=t[++n],e<r)break t}i=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let i=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===i)break;if(r=s,s=t[--n-1],e>=s)break t}i=n,n=0}}for(;n<i;){const r=n+i>>>1;e<t[r]?i=r:n=r+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let i=0;i!==r;++i)t[i]=n[s+i];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ah extends mh{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jr,endingEnd:Jr}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,i=e+1,a=r[s],o=r[i];if(void 0===a)switch(this.getSettings_().endingStart){case Zr:s=e,a=2*t-n;break;case es:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Zr:i=e,o=2*n-t;break;case es:i=1,o=n+r[1]-r[0];break;default:i=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=s*c,this._offsetNext=i*c}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(n-t)/(r-t),A=m*m,g=A*m,p=-d*g+2*d*A-d*m,f=(1+d)*g+(-1.5-2*d)*A+(-.5+d)*m+1,x=(-1-h)*g+(1.5+h)*A+.5*m,v=h*g-h*A;for(let y=0;y!==a;++y)s[y]=p*i[c+y]+f*i[l+y]+x*i[o+y]+v*i[u+y];return s}}class gh extends mh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==a;++d)s[d]=i[l+d]*u+i[o+d]*c;return s}}class ph extends mh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class fh{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oh(t,this.TimeBufferType),this.values=oh(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:oh(e.times,Array),values:oh(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ph(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ah(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $r:t=this.InterpolantFactoryMethodDiscrete;break;case Xr:t=this.InterpolantFactoryMethodLinear;break;case Yr:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $r;case this.InterpolantFactoryMethodLinear:return Xr;case this.InterpolantFactoryMethodSmooth:return Yr}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,i=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==i&&n[i]>t;)--i;if(++i,0!==s||i!==r){s>=i&&(i=Math.max(i,1),s=i-1);const e=this.getValueSize();this.times=n.slice(s,i),this.values=this.values.slice(s*e,i*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let i=null;for(let a=0;a!==s;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==i&&i>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,i),e=!1;break}i=t}if(void 0!==r&&lh(r))for(let a=0,o=r.length;a!==o;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Yr,s=e.length-1;let i=1;for(let a=1;a<s;++a){let s=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)s=!0;else{const e=a*n,r=e-n,i=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[i+a]){s=!0;break}}}if(s){if(a!==i){e[i]=e[a];const r=a*n,s=i*n;for(let e=0;e!==n;++e)t[s+e]=t[r+e]}++i}}if(s>0){e[i]=e[s];for(let e=s*n,r=i*n,a=0;a!==n;++a)t[r+a]=t[e+a];++i}return i!==e.length?(this.times=e.slice(0,i),this.values=t.slice(0,i*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}fh.prototype.ValueTypeName="",fh.prototype.TimeBufferType=Float32Array,fh.prototype.ValueBufferType=Float32Array,fh.prototype.DefaultInterpolation=Xr;class xh extends fh{constructor(e,t,n){super(e,t,n)}}xh.prototype.ValueTypeName="bool",xh.prototype.ValueBufferType=Array,xh.prototype.DefaultInterpolation=$r,xh.prototype.InterpolantFactoryMethodLinear=void 0,xh.prototype.InterpolantFactoryMethodSmooth=void 0;class vh extends fh{constructor(e,t,n,r){super(e,t,n,r)}}vh.prototype.ValueTypeName="color";class yh extends fh{constructor(e,t,n,r){super(e,t,n,r)}}yh.prototype.ValueTypeName="number";class bh extends mh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,i=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)Ki.slerpFlat(s,0,i,l-a,i,l,o);return s}}class wh extends fh{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new bh(this.times,this.values,this.getValueSize(),e)}}wh.prototype.ValueTypeName="quaternion",wh.prototype.InterpolantFactoryMethodSmooth=void 0;class Nh extends fh{constructor(e,t,n){super(e,t,n)}}Nh.prototype.ValueTypeName="string",Nh.prototype.ValueBufferType=Array,Nh.prototype.DefaultInterpolation=$r,Nh.prototype.InterpolantFactoryMethodLinear=void 0,Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class jh extends fh{constructor(e,t,n,r){super(e,t,n,r)}}jh.prototype.ValueTypeName="vector";class Ch{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ts;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=li(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let i=0,a=n.length;i!==a;++i)t.push(Th(n[i]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,i=n.length;s!==i;++s)t.push(fh.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,i=[];for(let a=0;a<s;a++){let e=[],o=[];e.push((a+s-1)%s,a,(a+1)%s),o.push(0,1,0);const l=ch(e);e=uh(e,1,l),o=uh(o,1,l),r||0!==e[0]||(e.push(s),o.push(o[0])),i.push(new yh(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,i)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(s);if(n&&n.length>1){const e=n[1];let s=r[e];s||(r[e]=s=[]),s.push(t)}}const i=[];for(const a in r)i.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return i}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,s){if(0!==n.length){const i=[],a=[];dh(n,i,a,r),0!==i.length&&s.push(new e(t,i,a))}},r=[],s=e.name||"default",i=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const s in t){const t=[],i=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),i.push(r.morphTarget===s?1:0)}r.push(new yh(".morphTargetInfluence["+s+"]",t,i))}o=t.length*i}else{const s=".bones["+t[c].name+"]";n(jh,s+".position",e,"pos",r),n(wh,s+".quaternion",e,"rot",r),n(jh,s+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(s,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Th(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yh;case"vector":case"vector2":case"vector3":case"vector4":return jh;case"color":return vh;case"quaternion":return wh;case"bool":case"boolean":return xh;case"string":return Nh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];dh(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Sh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class _h{constructor(e,t,n){const r=this;let s,i=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Eh=new _h;class Bh{constructor(e){this.manager=void 0!==e?e:Eh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,s){n.load(e,r,t,s)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Bh.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mh={};class kh extends Error{constructor(e,t){super(e),this.response=t}}class Lh extends Bh{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Sh.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout((()=>{t&&t(s),this.manager.itemEnd(e)}),0),s;if(void 0!==Mh[e])return void Mh[e].push({onLoad:t,onProgress:n,onError:r});Mh[e]=[],Mh[e].push({onLoad:t,onProgress:n,onError:r});const i=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(i).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Mh[e],r=t.body.getReader(),s=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),i=s?parseInt(s):0,a=0!==i;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:s,value:l}=r;if(s)e.close();else{o+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:i});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new kh(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(""===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Sh.add(e,t);const n=Mh[e];delete Mh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Mh[e];if(void 0===n)throw this.manager.itemError(e),t;delete Mh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Ih extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Lh(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(n){try{t(s.parse(JSON.parse(n)))}catch(DP){r?r(DP):console.error(DP),s.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Ch.parse(e[n]);t.push(r)}return t}}class Dh extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=[],a=new fu,o=new Lh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const n=s.parse(e,!0);i[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=On),a.image=i,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else o.load(e,(function(e){const n=s.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){i[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)i[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),i[t].format=n.format,i[t].width=n.width,i[t].height=n.height}a.image=i}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=On),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class Ph extends Bh{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=Sh.get(e);if(void 0!==i)return s.manager.itemStart(e),setTimeout((function(){t&&t(i),s.manager.itemEnd(e)}),0),i;const a=bi("img");function o(){c(),Sh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(t){c(),r&&r(t),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Fh extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=new xl;s.colorSpace=ms;const i=new Ph(this.manager);i.setCrossOrigin(this.crossOrigin),i.setPath(this.path);let a=0;function o(n){i.load(e[n],(function(e){s.images[n]=e,a++,6===a&&(s.needsUpdate=!0,t&&t(s))}),void 0,r)}for(let l=0;l<e.length;++l)o(l);return s}}class Uh extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new ic,a=new Lh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,(function(e){let n;try{n=s.parse(e)}catch(a){if(void 0===r)return void console.error(a);r(a)}void 0!==n.image?i.image=n.image:void 0!==n.data&&(i.image.width=n.width,i.image.height=n.height,i.image.data=n.data),i.wrapS=void 0!==n.wrapS?n.wrapS:Ln,i.wrapT=void 0!==n.wrapT?n.wrapT:Ln,i.magFilter=void 0!==n.magFilter?n.magFilter:On,i.minFilter=void 0!==n.minFilter?n.minFilter:On,i.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(i.colorSpace=n.colorSpace),void 0!==n.flipY&&(i.flipY=n.flipY),void 0!==n.format&&(i.format=n.format),void 0!==n.type&&(i.type=n.type),void 0!==n.mipmaps&&(i.mipmaps=n.mipmaps,i.minFilter=zn),1===n.mipmapCount&&(i.minFilter=On),void 0!==n.generateMipmaps&&(i.generateMipmaps=n.generateMipmaps),i.needsUpdate=!0,t&&t(i,n)}),n,r),i}}class Rh extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=new Fi,i=new Ph(this.manager);return i.setCrossOrigin(this.crossOrigin),i.setPath(this.path),i.load(e,(function(e){s.image=e,s.needsUpdate=!0,void 0!==t&&t(s)}),n,r),s}}class Oh extends $a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new go(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class Hh extends Oh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy($a.DEFAULT_UP),this.updateMatrix(),this.groundColor=new go(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Qh=new wa,zh=new Gi,Vh=new Gi;class Kh{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gi(512,512),this.mapType=Kn,this.map=null,this.mapPass=null,this.matrix=new wa,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jc,this._frameExtents=new gi(1,1),this._viewportCount=1,this._viewports=[new Ui(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;zh.setFromMatrixPosition(e.matrixWorld),t.position.copy(zh),Vh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Vh),t.updateMatrixWorld(),Qh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Qh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Gh extends Kh{constructor(){super(new gl(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*oi*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;n===t.fov&&r===t.aspect&&s===t.far||(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qh extends Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($a.DEFAULT_UP),this.updateMatrix(),this.target=new $a,this.distance=n,this.angle=r,this.penumbra=s,this.decay=i,this.map=null,this.shadow=new Gh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Wh=new wa,$h=new Gi,Xh=new Gi;class Yh extends Kh{constructor(){super(new gl(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gi(4,2),this._viewportCount=6,this._viewports=[new Ui(2,1,1,1),new Ui(0,1,1,1),new Ui(3,1,1,1),new Ui(1,1,1,1),new Ui(3,0,1,1),new Ui(1,0,1,1)],this._cubeDirections=[new Gi(1,0,0),new Gi(-1,0,0),new Gi(0,0,1),new Gi(0,0,-1),new Gi(0,1,0),new Gi(0,-1,0)],this._cubeUps=[new Gi(0,1,0),new Gi(0,1,0),new Gi(0,1,0),new Gi(0,1,0),new Gi(0,0,1),new Gi(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),$h.setFromMatrixPosition(e.matrixWorld),n.position.copy($h),Xh.copy(n.position),Xh.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Xh),n.updateMatrixWorld(),r.makeTranslation(-$h.x,-$h.y,-$h.z),Wh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wh)}}class Jh extends Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Yh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zh extends dl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=i,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,i){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=i,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,i=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=e*this.view.offsetX,i=s+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(s,i,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class em extends Kh{constructor(){super(new Zh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class tm extends Oh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($a.DEFAULT_UP),this.updateMatrix(),this.target=new $a,this.shadow=new em}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class nm extends Oh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class rm extends Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class sm{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Gi)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.282095),t.addScaledVector(i[1],.488603*r),t.addScaledVector(i[2],.488603*s),t.addScaledVector(i[3],.488603*n),t.addScaledVector(i[4],n*r*1.092548),t.addScaledVector(i[5],r*s*1.092548),t.addScaledVector(i[6],.315392*(3*s*s-1)),t.addScaledVector(i[7],n*s*1.092548),t.addScaledVector(i[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,i=this.coefficients;return t.copy(i[0]).multiplyScalar(.886227),t.addScaledVector(i[1],1.023328*r),t.addScaledVector(i[2],1.023328*s),t.addScaledVector(i[3],1.023328*n),t.addScaledVector(i[4],.858086*n*r),t.addScaledVector(i[5],.858086*r*s),t.addScaledVector(i[6],.743125*s*s-.247708),t.addScaledVector(i[7],.858086*n*s),t.addScaledVector(i[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class im extends Oh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new sm;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class am extends Bh{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,i=new Lh(s.manager);i.setPath(s.path),i.setRequestHeader(s.requestHeader),i.setWithCredentials(s.withCredentials),i.load(e,(function(n){try{t(s.parse(JSON.parse(n)))}catch(DP){r?r(DP):console.error(DP),s.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new go).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const s in e.uniforms){const t=e.uniforms[s];switch(r.uniforms[s]={},t.type){case"t":r.uniforms[s].value=n(t.value);break;case"c":r.uniforms[s].value=(new go).setHex(t.value);break;case"v2":r.uniforms[s].value=(new gi).fromArray(t.value);break;case"v3":r.uniforms[s].value=(new Gi).fromArray(t.value);break;case"v4":r.uniforms[s].value=(new Ui).fromArray(t.value);break;case"m3":r.uniforms[s].value=(new pi).fromArray(t.value);break;case"m4":r.uniforms[s].value=(new wa).fromArray(t.value);break;default:r.uniforms[s].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new gi).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new gi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return am.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:$d,SpriteMaterial:El,RawShaderMaterial:Xd,ShaderMaterial:ul,PointsMaterial:ou,MeshPhysicalMaterial:Jd,MeshStandardMaterial:Yd,MeshPhongMaterial:Zd,MeshToonMaterial:eh,MeshNormalMaterial:th,MeshLambertMaterial:nh,MeshDepthMaterial:rh,MeshDistanceMaterial:sh,MeshBasicMaterial:vo,MeshMatcapMaterial:ih,LineDashedMaterial:ah,LineBasicMaterial:qc,Material:xo}[e]}}class om{static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class lm extends Ko{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class cm extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Lh(s.manager);i.setPath(s.path),i.setRequestHeader(s.requestHeader),i.setWithCredentials(s.withCredentials),i.load(e,(function(n){try{t(s.parse(JSON.parse(n)))}catch(DP){r?r(DP):console.error(DP),s.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const s=e.interleavedBuffers[r],i=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,s=r[t],i=new Uint32Array(s).buffer;return n[t]=i,i}(e,s.buffer),a=yi(s.type,i),o=new Tl(a,s.stride);return o.uuid=s.uuid,t[r]=o,o}const s=e.isInstancedBufferGeometry?new lm:new Ko,i=e.data.index;if(void 0!==i){const e=yi(i.type,i.array);s.setIndex(new _o(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const s=r(e.data,t.data);n=new _l(s,t.itemSize,t.offset,t.normalized)}else{const e=yi(t.type,t.array);n=new(t.isInstancedBufferAttribute?cc:_o)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),s.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let s=0,i=t.length;s<i;s++){const i=t[s];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new _l(t,i.itemSize,i.offset,i.normalized)}else{const e=yi(i.type,i.array);a=new _o(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),n.push(a)}s.morphAttributes[u]=n}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){const e=l[u];s.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Gi;void 0!==c.center&&e.fromArray(c.center),s.boundingSphere=new ma(e,c.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class um extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=""===this.path?om.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Lh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let i=null;try{i=JSON.parse(n)}catch(o){return void 0!==r&&r(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}const a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);s.parse(i,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?om.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Lh(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const s=await r.loadAsync(e,t),i=JSON.parse(s),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,s,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in i)if(i[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),i=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,r,a,i,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new nd).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let s=0,i=e.length;s<i;s++){const t=(new lc).fromJSON(e[s],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new cm;for(let s=0,i=e.length;s<i;s++){let i;const a=e[s];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":i=r.parse(a);break;default:a.type in Wd?i=Wd[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}i.uuid=a.uuid,void 0!==a.name&&(i.name=a.name),void 0!==a.userData&&(i.userData=a.userData),n[a.uuid]=i}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const s=new am;s.setTextures(t);for(let t=0,i=e.length;t<i;t++){const i=e[t];void 0===n[i.uuid]&&(n[i.uuid]=s.parse(i)),r[i.uuid]=n[i.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],s=Ch.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function i(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),s.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:yi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new _h(t);s=new Ph(n),s.setCrossOrigin(this.crossOrigin);for(let t=0,s=e.length;t<s;t++){const n=e[t],s=n.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=i(s[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ic(n.data,n.width,n.height)))}r[n.uuid]=new Ii(e)}else{const e=i(n.url);r[n.uuid]=new Ii(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(e){if("string"===typeof e){const n=e,s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(s)}return e.data?{data:yi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Ph(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],i=r.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=i[t],r=await s(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new ic(r.data,r.width,r.height)))}n[r.uuid]=new Ii(e)}else{const e=await s(r.url);n[r.uuid]=new Ii(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let s=0,i=e.length;s<i;s++){const i=e[s];void 0===i.image&&console.warn('THREE.ObjectLoader: No "image" specified for',i.uuid),void 0===t[i.image]&&console.warn("THREE.ObjectLoader: Undefined image",i.image);const a=t[i.image],o=a.data;let l;Array.isArray(o)?(l=new xl,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new ic:new Fi,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=i.uuid,void 0!==i.name&&(l.name=i.name),void 0!==i.mapping&&(l.mapping=n(i.mapping,dm)),void 0!==i.channel&&(l.channel=i.channel),void 0!==i.offset&&l.offset.fromArray(i.offset),void 0!==i.repeat&&l.repeat.fromArray(i.repeat),void 0!==i.center&&l.center.fromArray(i.center),void 0!==i.rotation&&(l.rotation=i.rotation),void 0!==i.wrap&&(l.wrapS=n(i.wrap[0],hm),l.wrapT=n(i.wrap[1],hm)),void 0!==i.format&&(l.format=i.format),void 0!==i.internalFormat&&(l.internalFormat=i.internalFormat),void 0!==i.type&&(l.type=i.type),void 0!==i.colorSpace&&(l.colorSpace=i.colorSpace),void 0!==i.minFilter&&(l.minFilter=n(i.minFilter,mm)),void 0!==i.magFilter&&(l.magFilter=n(i.magFilter,mm)),void 0!==i.anisotropy&&(l.anisotropy=i.anisotropy),void 0!==i.flipY&&(l.flipY=i.flipY),void 0!==i.generateMipmaps&&(l.generateMipmaps=i.generateMipmaps),void 0!==i.premultiplyAlpha&&(l.premultiplyAlpha=i.premultiplyAlpha),void 0!==i.unpackAlignment&&(l.unpackAlignment=i.unpackAlignment),void 0!==i.compareFunction&&(l.compareFunction=i.compareFunction),void 0!==i.userData&&(l.userData=i.userData),r[i.uuid]=l}return r}parseObject(e,t,n,r,s){let i,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];void 0===n[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(n[s])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":i=new Cl,void 0!==e.background&&(Number.isInteger(e.background)?i.background=new go(e.background):i.background=u(e.background)),void 0!==e.environment&&(i.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new jl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Nl(e.fog.color,e.fog.density)),""!==e.fog.name&&(i.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(i.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(i.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&i.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(i.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&i.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":i=new gl(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Zh(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new nm(e.color,e.intensity);break;case"DirectionalLight":i=new tm(e.color,e.intensity),i.target=e.target||"";break;case"PointLight":i=new Jh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new rm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new qh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),i.target=e.target||"";break;case"HemisphereLight":i=new Hh(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new im).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),i=new rc(a,o),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),i=new rl(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;i=new fc(a,o,t),i.instanceMatrix=new cc(new Float32Array(n.array),16),void 0!==r&&(i.instanceColor=new cc(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":a=l(e.geometry),o=c(e.material),i=new Gc(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,o),i.geometry=a,i.perObjectFrustumCulled=e.perObjectFrustumCulled,i.sortObjects=e.sortObjects,i._drawRanges=e.drawRanges,i._reservedRanges=e.reservedRanges,i._geometryInfo=e.geometryInfo.map((e=>{let t=null,n=null;return void 0!==e.boundingBox&&(t=new $i,t.min.fromArray(e.boundingBox.min),t.max.fromArray(e.boundingBox.max)),void 0!==e.boundingSphere&&(n=new ma,n.radius=e.boundingSphere.radius,n.center.fromArray(e.boundingSphere.center)),{...e,boundingBox:t,boundingSphere:n}})),i._instanceInfo=e.instanceInfo,i._availableInstanceIds=e._availableInstanceIds,i._availableGeometryIds=e._availableGeometryIds,i._nextIndexStart=e.nextIndexStart,i._nextVertexStart=e.nextVertexStart,i._geometryCount=e.geometryCount,i._maxInstanceCount=e.maxInstanceCount,i._maxVertexCount=e.maxVertexCount,i._maxIndexCount=e.maxIndexCount,i._geometryInitialized=e.geometryInitialized,i._matricesTexture=u(e.matricesTexture.uuid),i._indirectTexture=u(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(i._colorsTexture=u(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(i.boundingSphere=new ma,i.boundingSphere.center.fromArray(e.boundingSphere.center),i.boundingSphere.radius=e.boundingSphere.radius),void 0!==e.boundingBox&&(i.boundingBox=new $i,i.boundingBox.min.fromArray(e.boundingBox.min),i.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":i=new ql;break;case"Line":i=new tu(l(e.geometry),c(e.material));break;case"LineLoop":i=new au(l(e.geometry),c(e.material));break;case"LineSegments":i=new iu(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":i=new hu(l(e.geometry),c(e.material));break;case"Sprite":i=new zl(c(e.material));break;case"Group":i=new yl;break;case"Bone":i=new sc;break;default:i=new $a}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.up&&i.up.fromArray(e.up),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(i.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)i.add(this.parseObject(a[e],t,n,r,s))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(s[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance,n.hysteresis)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}bindLightTargets(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new $a}}))}}const dm={UVMapping:Tn,CubeReflectionMapping:Sn,CubeRefractionMapping:_n,EquirectangularReflectionMapping:En,EquirectangularRefractionMapping:Bn,CubeUVReflectionMapping:Mn},hm={RepeatWrapping:kn,ClampToEdgeWrapping:Ln,MirroredRepeatWrapping:In},mm={NearestFilter:Dn,NearestMipmapNearestFilter:Pn,NearestMipmapLinearFilter:Un,LinearFilter:On,LinearMipmapNearestFilter:Hn,LinearMipmapLinearFilter:zn};class Am extends Bh{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,i=Sh.get(e);if(void 0!==i)return s.manager.itemStart(e),i.then?void i.then((n=>{t&&t(n),s.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(i),s.manager.itemEnd(e)}),0),i);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const o=fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(s.options,{colorSpaceConversion:"none"}))})).then((function(n){return Sh.add(e,n),t&&t(n),s.manager.itemEnd(e),n})).catch((function(t){r&&r(t),Sh.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)}));Sh.add(e,o),s.manager.itemStart(e)}}let gm;class pm{static getContext(){return void 0===gm&&(gm=new(window.AudioContext||window.webkitAudioContext)),gm}static setContext(e){gm=e}}class fm extends Bh{constructor(e){super(e)}load(e,t,n,r){const s=this,i=new Lh(this.manager);function a(t){r?r(t):console.error(t),s.manager.itemError(e)}i.setResponseType("arraybuffer"),i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(function(e){try{const n=e.slice(0);pm.getContext().decodeAudioData(n,(function(e){t(e)})).catch(a)}catch(DP){a(DP)}}),n,r)}}const xm=new wa,vm=new wa,ym=new wa;class bm{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ym.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,s=t.near*Math.tan(ai*t.fov*.5)/t.zoom;let i,a;vm.elements[12]=-n,xm.elements[12]=n,i=-s*t.aspect+r,a=s*t.aspect+r,ym.elements[0]=2*t.near/(a-i),ym.elements[8]=(a+i)/(a-i),this.cameraL.projectionMatrix.copy(ym),i=-s*t.aspect-r,a=s*t.aspect-r,ym.elements[0]=2*t.near/(a-i),ym.elements[8]=(a+i)/(a-i),this.cameraR.projectionMatrix.copy(ym)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(vm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(xm)}}class wm extends gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Nm{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jm(){return performance.now()}const Cm=new Gi,Tm=new Ki,Sm=new Gi,_m=new Gi;class Em extends $a{constructor(){super(),this.type="AudioListener",this.context=pm.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Nm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cm,Tm,Sm),_m.set(0,0,-1).applyQuaternion(Tm),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Cm.x,e),t.positionY.linearRampToValueAtTime(Cm.y,e),t.positionZ.linearRampToValueAtTime(Cm.z,e),t.forwardX.linearRampToValueAtTime(_m.x,e),t.forwardY.linearRampToValueAtTime(_m.y,e),t.forwardZ.linearRampToValueAtTime(_m.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Cm.x,Cm.y,Cm.z),t.setOrientation(_m.x,_m.y,_m.z,n.x,n.y,n.z)}}class Bm extends $a{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Mm=new Gi,km=new Ki,Lm=new Gi,Im=new Gi;class Dm extends Bm{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Mm,km,Lm),Im.set(0,0,1).applyQuaternion(km);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Mm.x,e),t.positionY.linearRampToValueAtTime(Mm.y,e),t.positionZ.linearRampToValueAtTime(Mm.z,e),t.orientationX.linearRampToValueAtTime(Im.x,e),t.orientationY.linearRampToValueAtTime(Im.y,e),t.orientationZ.linearRampToValueAtTime(Im.z,e)}else t.setPosition(Mm.x,Mm.y,Mm.z),t.setOrientation(Im.x,Im.y,Im.z)}}class Pm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Fm{constructor(e,t,n){let r,s,i;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,i=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,i=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,s=this._lerpAdditive,i=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=i,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let i=this.cumulativeWeight;if(0===i){for(let e=0;e!==r;++e)n[s+e]=n[e];i=t}else{i+=t;const e=t/i;this._mixBufferRegion(n,s,0,e,r)}this.cumulativeWeight=i}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,i=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-s,t)}i>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,i=r;s!==i;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let i=0;i!==s;++i)e[t+i]=e[n+i]}_slerp(e,t,n,r){Ki.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const i=this._workIndex*s;Ki.multiplyQuaternionsFlat(e,i,e,t,e,n),Ki.slerpFlat(e,t,e,t,e,i,r)}_lerp(e,t,n,r,s){const i=1-r;for(let a=0;a!==s;++a){const s=t+a;e[s]=e[s]*i+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let i=0;i!==s;++i){const s=t+i;e[s]=e[s]+e[n+i]*r}}}const Um="\\[\\]\\.:\\/",Rm=new RegExp("["+Um+"]","g"),Om="[^"+Um+"]",Hm="[^"+Um.replace("\\.","")+"]",Qm=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Om)+/(WCOD+)?/.source.replace("WCOD",Hm)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Om)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Om)+"$"),zm=["material","materials","bones","map"];class Vm{constructor(e,t,n){this.path=t,this.parsedPath=n||Vm.parseTrackName(t),this.node=Vm.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Vm.Composite(e,t,n):new Vm(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Rm,"")}static parseTrackName(e){const t=Qm.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==zm.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const s=e[r];if(s.name===t||s.uuid===t)return s;const i=n(s.children);if(i)return i}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Vm.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const i=e[r];if(void 0===i){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?a=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}o=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=s}else void 0!==i.fromArray&&void 0!==i.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(o=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Vm.Composite=class{constructor(e,t,n){const r=n||Vm.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Vm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Vm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Vm.prototype.GetterByBindingType=[Vm.prototype._getValue_direct,Vm.prototype._getValue_array,Vm.prototype._getValue_arrayElement,Vm.prototype._getValue_toArray],Vm.prototype.SetterByBindingTypeAndVersioning=[[Vm.prototype._setValue_direct,Vm.prototype._setValue_direct_setNeedsUpdate,Vm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Vm.prototype._setValue_array,Vm.prototype._setValue_array_setNeedsUpdate,Vm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Vm.prototype._setValue_arrayElement,Vm.prototype._setValue_arrayElement_setNeedsUpdate,Vm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Vm.prototype._setValue_fromArray,Vm.prototype._setValue_fromArray_setNeedsUpdate,Vm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Km{constructor(){this.isAnimationObjectGroup=!0,this.uuid=li(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,i=s.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],d=u.uuid;let h=t[d];if(void 0===h){h=o++,t[d]=h,e.push(u);for(let e=0,t=i;e!==t;++e)s[e].push(new Vm(u,n[e],r[e]))}else if(h<l){a=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[d]=o,e[o]=u;for(let e=0,t=i;e!==t;++e){const t=s[e],i=t[o];let a=t[h];t[h]=i,void 0===a&&(a=new Vm(u,n[e],r[e])),t[o]=a}}else e[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let i=0,a=arguments.length;i!==a;++i){const a=arguments[i],o=a.uuid,l=t[o];if(void 0!==l&&l>=s){const i=s++,c=e[i];t[c.uuid]=l,e[l]=c,t[o]=i,e[i]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[i],s=t[l];t[l]=r,t[i]=s}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,i=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<s){const a=--s,o=e[a],c=--i,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],s=t[c];t[l]=r,t[a]=s,t.pop()}}else{const s=--i,a=e[s];s>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[s],t.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(void 0!==r)return s[r];const i=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);r=s.length,n[e]=r,i.push(e),a.push(t),s.push(u);for(let d=c,h=o.length;d!==h;++d){const n=o[d];u[d]=new Vm(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,s=this._parsedPaths,i=this._bindings,a=i.length-1,o=i[a];t[e[a]]=n,i[n]=o,i.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class Gm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,i=s.length,a=new Array(i),o={endingStart:Jr,endingEnd:Jr};for(let l=0;l!==i;++l){const e=s[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.fadeOut(t),this.fadeIn(t),!0===n){const n=this._clip.duration,r=e._clip.duration,s=r/n,i=n/r;e.warp(1,s,t),this.warp(i,1,t)}return this}crossFadeTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,i=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,o[1]=s+n,l[0]=e/i,l[1]=t/i,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const r=(e-s)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const i=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===ns)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(i),t[n].accumulateAdditive(a);else for(let n=0,s=e.length;n!==s;++n)e[n].evaluate(i),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const i=n===Wr;if(0===e)return-1===s?r:i&&1===(1&s)?t-r:r;if(n===Gr){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,i)):this._setEndings(0===this.repetitions,!0,i)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,s+=Math.abs(n);const a=this.repetitions-s;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,i)}else this._setEndings(!1,!1,i);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(i&&1===(1&s))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Zr,r.endingEnd=Zr):(r.endingStart=e?this.zeroSlopeAtStart?Zr:Jr:es,r.endingEnd=t?this.zeroSlopeAtEnd?Zr:Jr:es)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let i=this._weightInterpolant;null===i&&(i=r._lendControlInterpolant(),this._weightInterpolant=i);const a=i.parameterPositions,o=i.sampleValues;return a[0]=s,o[0]=t,a[1]=s+e,o[1]=n,this}}const qm=new Float32Array(1);class Wm extends ri{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,i=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==s;++u){const e=r[u],s=e.name;let l=c[s];if(void 0!==l)++l.referenceCount,i[u]=l;else{if(l=i[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,s));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new Fm(Vm.create(n,s,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,s),i[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let i=s[t];if(void 0===i)i={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=i;else{const t=i.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),i.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,i=this._actionsByClip,a=i[s],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete i[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let i=r[t];void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,i=this._bindingsByRootAndName,a=i[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[s],0===Object.keys(a).length&&delete i[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new gh(new Float32Array(2),new Float32Array(2),1,qm),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let i="string"===typeof e?Ch.findByName(r,e):e;const a=null!==i?i.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==i?i.blendMode:ts),void 0!==o){const e=o.actionByRoot[s];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===i&&(i=l._clip)}if(null===i)return null;const c=new Gm(this,i,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,s),c}existingAction(e,t){const n=t||this._root,r=n.uuid,s="string"===typeof e?Ch.findByName(n,e):e,i=s?s.uuid:e,a=this._actionsByClip[i];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),i=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,s,i)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(i);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(void 0!==s){const e=s.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const s=r._cacheIndex,i=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,i._cacheIndex=s,t[s]=i,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const e=n[s].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const s in r){const e=r[s];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class $m extends Ri{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTarget3D=!0,this.depth=n,this.texture=new zi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Xm extends Ri{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isRenderTargetArray=!0,this.depth=n,this.texture=new Hi(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ym{constructor(e){this.value=e}clone(){return new Ym(void 0===this.value.clone?this.value:this.value.clone())}}let Jm=0;class Zm extends ri{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Jm++}),this.name="",this.usage=Hs,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class eA extends Tl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class tA{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const nA=new wa;class rA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new ba(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new La,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return nA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(nA),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return iA(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(sA),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,s=e.length;r<s;r++)iA(e[r],this,n,t);return n.sort(sA),n}}function sA(e,t){return e.distance-t.distance}function iA(e,t,n,r){let s=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(s=!1)}if(!0===s&&!0===r){const r=e.children;for(let e=0,s=r.length;e<s;e++)iA(r[e],t,n,!0)}}class aA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=ci(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ci(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class oA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class lA{constructor(e,t,n,r){lA.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const cA=new gi;class uA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gi(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=cA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,cA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const dA=new Gi,hA=new Gi;class mA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dA.subVectors(e,this.start),hA.subVectors(this.end,this.start);const n=hA.dot(hA);let r=hA.dot(dA)/n;return t&&(r=ci(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const AA=new Gi;class gA extends $a{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Ko,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let i=0,a=1,o=32;i<o;i++,a++){const e=i/o*Math.PI*2,t=a/o*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Fo(r,3));const s=new qc({fog:!1,toneMapped:!1});this.cone=new iu(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),AA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(AA),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const pA=new Gi,fA=new wa,xA=new wa;class vA extends iu{constructor(e){const t=yA(e),n=new Ko,r=[],s=[],i=new go(0,0,1),a=new go(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(i.r,i.g,i.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Fo(r,3)),n.setAttribute("color",new Fo(s,3));super(n,new qc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");xA.copy(this.root.matrixWorld).invert();for(let s=0,i=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(fA.multiplyMatrices(xA,e.matrixWorld),pA.setFromMatrixPosition(fA),r.setXYZ(i,pA.x,pA.y,pA.z),fA.multiplyMatrices(xA,e.parent.matrixWorld),pA.setFromMatrixPosition(fA),r.setXYZ(i+1,pA.x,pA.y,pA.z),i+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yA(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push(...yA(e.children[n]));return t}class bA extends rl{constructor(e,t,n){super(new Hd(t,4,2),new vo({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wA=new Gi,NA=new go,jA=new go;class CA extends $a{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Fd(t);r.rotateY(.5*Math.PI),this.material=new vo({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),i=new Float32Array(3*s.count);r.setAttribute("color",new _o(i,3)),this.add(new rl(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");NA.copy(this.light.color),jA.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?NA:jA;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wA.setFromMatrixPosition(this.light.matrixWorld).negate())}}class TA extends iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new go(n),r=new go(r);const s=t/2,i=e/t,a=e/2,o=[],l=[];for(let u=0,d=0,h=-a;u<=t;u++,h+=i){o.push(-a,0,h,a,0,h),o.push(h,0,-a,h,0,a);const e=u===s?n:r;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new Ko;c.setAttribute("position",new Fo(o,3)),c.setAttribute("color",new Fo(l,3));super(c,new qc({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class SA extends iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;s=new go(s),i=new go(i);const a=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const u=1&c?s:i;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?s:i,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),s=Math.sin(n)*l,i=Math.cos(n)*l;a.push(s,0,i),o.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),s=Math.sin(n)*l,i=Math.cos(n)*l,a.push(s,0,i),o.push(t.r,t.g,t.b)}}const l=new Ko;l.setAttribute("position",new Fo(a,3)),l.setAttribute("color",new Fo(o,3));super(l,new qc({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _A=new Gi,EA=new Gi,BA=new Gi;class MA extends $a{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Ko;r.setAttribute("position",new Fo([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new qc({fog:!1,toneMapped:!1});this.lightPlane=new tu(r,s),this.add(this.lightPlane),r=new Ko,r.setAttribute("position",new Fo([0,0,0,0,0,1],3)),this.targetLine=new tu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_A.setFromMatrixPosition(this.light.matrixWorld),EA.setFromMatrixPosition(this.light.target.matrixWorld),BA.subVectors(EA,_A),this.lightPlane.lookAt(EA),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(EA),this.targetLine.scale.z=BA.length()}}const kA=new Gi,LA=new dl;class IA extends iu{constructor(e){const t=new Ko,n=new qc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],i={};function a(e,t){o(e),o(t)}function o(e){r.push(0,0,0),s.push(0,0,0),void 0===i[e]&&(i[e]=[]),i[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Fo(r,3)),t.setAttribute("color",new Fo(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=i,this.update();const l=new go(16755200),c=new go(16711680),u=new go(43775),d=new go(16777215),h=new go(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,s){const i=this.geometry.getAttribute("color");i.setXYZ(0,e.r,e.g,e.b),i.setXYZ(1,e.r,e.g,e.b),i.setXYZ(2,e.r,e.g,e.b),i.setXYZ(3,e.r,e.g,e.b),i.setXYZ(4,e.r,e.g,e.b),i.setXYZ(5,e.r,e.g,e.b),i.setXYZ(6,e.r,e.g,e.b),i.setXYZ(7,e.r,e.g,e.b),i.setXYZ(8,e.r,e.g,e.b),i.setXYZ(9,e.r,e.g,e.b),i.setXYZ(10,e.r,e.g,e.b),i.setXYZ(11,e.r,e.g,e.b),i.setXYZ(12,e.r,e.g,e.b),i.setXYZ(13,e.r,e.g,e.b),i.setXYZ(14,e.r,e.g,e.b),i.setXYZ(15,e.r,e.g,e.b),i.setXYZ(16,e.r,e.g,e.b),i.setXYZ(17,e.r,e.g,e.b),i.setXYZ(18,e.r,e.g,e.b),i.setXYZ(19,e.r,e.g,e.b),i.setXYZ(20,e.r,e.g,e.b),i.setXYZ(21,e.r,e.g,e.b),i.setXYZ(22,e.r,e.g,e.b),i.setXYZ(23,e.r,e.g,e.b),i.setXYZ(24,t.r,t.g,t.b),i.setXYZ(25,t.r,t.g,t.b),i.setXYZ(26,t.r,t.g,t.b),i.setXYZ(27,t.r,t.g,t.b),i.setXYZ(28,t.r,t.g,t.b),i.setXYZ(29,t.r,t.g,t.b),i.setXYZ(30,t.r,t.g,t.b),i.setXYZ(31,t.r,t.g,t.b),i.setXYZ(32,n.r,n.g,n.b),i.setXYZ(33,n.r,n.g,n.b),i.setXYZ(34,n.r,n.g,n.b),i.setXYZ(35,n.r,n.g,n.b),i.setXYZ(36,n.r,n.g,n.b),i.setXYZ(37,n.r,n.g,n.b),i.setXYZ(38,r.r,r.g,r.b),i.setXYZ(39,r.r,r.g,r.b),i.setXYZ(40,s.r,s.g,s.b),i.setXYZ(41,s.r,s.g,s.b),i.setXYZ(42,s.r,s.g,s.b),i.setXYZ(43,s.r,s.g,s.b),i.setXYZ(44,s.r,s.g,s.b),i.setXYZ(45,s.r,s.g,s.b),i.setXYZ(46,s.r,s.g,s.b),i.setXYZ(47,s.r,s.g,s.b),i.setXYZ(48,s.r,s.g,s.b),i.setXYZ(49,s.r,s.g,s.b),i.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;LA.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const n=this.camera.coordinateSystem===Js?-1:0;DA("c",t,e,LA,0,0,n),DA("t",t,e,LA,0,0,1),DA("n1",t,e,LA,-1,-1,n),DA("n2",t,e,LA,1,-1,n),DA("n3",t,e,LA,-1,1,n),DA("n4",t,e,LA,1,1,n),DA("f1",t,e,LA,-1,-1,1),DA("f2",t,e,LA,1,-1,1),DA("f3",t,e,LA,-1,1,1),DA("f4",t,e,LA,1,1,1),DA("u1",t,e,LA,.7,1.1,n),DA("u2",t,e,LA,-.7,1.1,n),DA("u3",t,e,LA,0,2,n),DA("cf1",t,e,LA,-1,0,1),DA("cf2",t,e,LA,1,0,1),DA("cf3",t,e,LA,0,-1,1),DA("cf4",t,e,LA,0,1,1),DA("cn1",t,e,LA,-1,0,n),DA("cn2",t,e,LA,1,0,n),DA("cn3",t,e,LA,0,-1,n),DA("cn4",t,e,LA,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function DA(e,t,n,r,s,i,a){kA.set(s,i,a).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],kA.x,kA.y,kA.z)}}const PA=new $i;class FA extends iu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Ko;s.setIndex(new _o(n,1)),s.setAttribute("position",new _o(r,3)),super(s,new qc({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&PA.setFromObject(this.object),PA.isEmpty())return;const e=PA.min,t=PA.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class UA extends iu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Ko;r.setIndex(new _o(n,1)),r.setAttribute("position",new Fo([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new qc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class RA extends tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new Ko;r.setAttribute("position",new Fo([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new qc({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new Ko;s.setAttribute("position",new Fo([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new rl(s,new vo({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const OA=new Gi;let HA,QA;class zA extends $a{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gi(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Gi(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;super(),this.type="ArrowHelper",void 0===HA&&(HA=new Ko,HA.setAttribute("position",new Fo([0,0,0,0,1,0],3)),QA=new Tu(.5,1,5,1),QA.translate(0,-.5,0)),this.position.copy(t),this.line=new tu(HA,new qc({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new rl(QA,new vo({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,i)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{OA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(OA,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class VA extends iu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ko;n.setAttribute("position",new Fo(t,3)),n.setAttribute("color",new Fo([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new qc({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new go,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class KA{constructor(){this.type="ShapePath",this.color=new go,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new td,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,i){return this.currentPath.bezierCurveTo(e,t,n,r,s,i),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let s=n-1,i=0;i<n;s=i++){let n=t[s],a=t[i],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[i],o=-o,a=t[s],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=Bd.isClockWise,r=this.subPaths;if(0===r.length)return[];let s,i,a;const o=[];if(1===r.length)return i=r[0],a=new nd,a.curves=i.curves,o.push(a),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,m=[],A=0;u[A]=void 0,m[A]=[];for(let g=0,p=r.length;g<p;g++)i=r[g],d=i.getPoints(),s=n(d),s=e?!s:s,s?(!l&&u[A]&&A++,u[A]={s:new nd,p:d},u[A].s.curves=i.curves,l&&A++,m[A]=[]):m[A].push({h:i,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],s=new nd;s.curves=r.curves,t.push(s)}return t}(r);if(u.length>1){let e=!1,n=0;for(let t=0,r=u.length;t<r;t++)c[t]=[];for(let r=0,s=u.length;r<s;r++){const s=m[r];for(let i=0;i<s.length;i++){const a=s[i];let o=!0;for(let s=0;s<u.length;s++)t(a.p,u[s].p)&&(r!==s&&n++,o?(o=!1,c[s].push(a)):e=!0);o&&c[r].push(a)}}n>0&&!1===e&&(m=c)}for(let g=0,p=u.length;g<p;g++){a=u[g].s,o.push(a),h=m[g];for(let e=0,t=h.length;e<t;e++)a.holes.push(h[e].h)}return o}}class GA extends ri{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0!==e?(null!==this.domElement&&this.disconnect(),this.domElement=e):console.warn("THREE.Controls: connect() now requires an element.")}disconnect(){}dispose(){}update(){}}function qA(e,t,n,r){const s=function(e){switch(e){case Kn:case Gn:return{byteLength:1,components:1};case Wn:case qn:case Jn:return{byteLength:2,components:1};case Zn:case er:return{byteLength:2,components:4};case Xn:case $n:case Yn:return{byteLength:4,components:1};case nr:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case rr:return e*t;case lr:case cr:return e*t/s.components*s.byteLength;case ur:case dr:return e*t*2/s.components*s.byteLength;case sr:return e*t*3/s.components*s.byteLength;case ir:case mr:return e*t*4/s.components*s.byteLength;case Ar:case gr:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case pr:case fr:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case vr:case br:return Math.max(e,16)*Math.max(t,8)/4;case xr:case yr:return Math.max(e,8)*Math.max(t,8)/2;case wr:case Nr:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case jr:case Cr:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Tr:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Sr:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case _r:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Er:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Br:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case Mr:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case kr:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case Lr:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Ir:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Dr:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Pr:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Fr:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Ur:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Rr:case Or:case Hr:return Math.ceil(e/4)*Math.ceil(t/4)*16;case Qr:case zr:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Vr:case Kr:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}class WA{static contain(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}(e)}static getByteLength(e,t,n,r){return qA(e,t,n,r)}}function $A(){let e=null,t=!1,n=null,r=null;function s(t,i){n(t,i),r=e.requestAnimationFrame(s)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(s),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function XA(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const s=t.get(n);if(void 0===s)t.set(n,function(t,n){const r=t.array,s=t.usage,i=r.byteLength,a=e.createBuffer();let o;if(e.bindBuffer(n,a),e.bufferData(n,r,s),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:i}}(n,r));else if(s.version<n.version){if(s.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const s=n.array,i=n.updateRanges;if(e.bindBuffer(r,t),0===i.length)e.bufferSubData(r,0,s);else{i.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<i.length;e++){const n=i[t],r=i[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,i[t]=r)}i.length=t+1;for(let n=0,a=i.length;n<a;n++){const t=i[n];e.bufferSubData(r,t.start*s.BYTES_PER_ELEMENT,s,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(s.buffer,n,r),s.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xt}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xt);const YA={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},JA={common:{diffuse:{value:new go(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pi}},envmap:{envMap:{value:null},envMapRotation:{value:new pi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pi},normalScale:{value:new gi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new go(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new go(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0},uvTransform:{value:new pi}},sprite:{diffuse:{value:new go(16777215)},opacity:{value:1},center:{value:new gi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pi},alphaMap:{value:null},alphaMapTransform:{value:new pi},alphaTest:{value:0}}},ZA={basic:{uniforms:ol([JA.common,JA.specularmap,JA.envmap,JA.aomap,JA.lightmap,JA.fog]),vertexShader:YA.meshbasic_vert,fragmentShader:YA.meshbasic_frag},lambert:{uniforms:ol([JA.common,JA.specularmap,JA.envmap,JA.aomap,JA.lightmap,JA.emissivemap,JA.bumpmap,JA.normalmap,JA.displacementmap,JA.fog,JA.lights,{emissive:{value:new go(0)}}]),vertexShader:YA.meshlambert_vert,fragmentShader:YA.meshlambert_frag},phong:{uniforms:ol([JA.common,JA.specularmap,JA.envmap,JA.aomap,JA.lightmap,JA.emissivemap,JA.bumpmap,JA.normalmap,JA.displacementmap,JA.fog,JA.lights,{emissive:{value:new go(0)},specular:{value:new go(1118481)},shininess:{value:30}}]),vertexShader:YA.meshphong_vert,fragmentShader:YA.meshphong_frag},standard:{uniforms:ol([JA.common,JA.envmap,JA.aomap,JA.lightmap,JA.emissivemap,JA.bumpmap,JA.normalmap,JA.displacementmap,JA.roughnessmap,JA.metalnessmap,JA.fog,JA.lights,{emissive:{value:new go(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:YA.meshphysical_vert,fragmentShader:YA.meshphysical_frag},toon:{uniforms:ol([JA.common,JA.aomap,JA.lightmap,JA.emissivemap,JA.bumpmap,JA.normalmap,JA.displacementmap,JA.gradientmap,JA.fog,JA.lights,{emissive:{value:new go(0)}}]),vertexShader:YA.meshtoon_vert,fragmentShader:YA.meshtoon_frag},matcap:{uniforms:ol([JA.common,JA.bumpmap,JA.normalmap,JA.displacementmap,JA.fog,{matcap:{value:null}}]),vertexShader:YA.meshmatcap_vert,fragmentShader:YA.meshmatcap_frag},points:{uniforms:ol([JA.points,JA.fog]),vertexShader:YA.points_vert,fragmentShader:YA.points_frag},dashed:{uniforms:ol([JA.common,JA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:YA.linedashed_vert,fragmentShader:YA.linedashed_frag},depth:{uniforms:ol([JA.common,JA.displacementmap]),vertexShader:YA.depth_vert,fragmentShader:YA.depth_frag},normal:{uniforms:ol([JA.common,JA.bumpmap,JA.normalmap,JA.displacementmap,{opacity:{value:1}}]),vertexShader:YA.meshnormal_vert,fragmentShader:YA.meshnormal_frag},sprite:{uniforms:ol([JA.sprite,JA.fog]),vertexShader:YA.sprite_vert,fragmentShader:YA.sprite_frag},background:{uniforms:{uvTransform:{value:new pi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:YA.background_vert,fragmentShader:YA.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new pi}},vertexShader:YA.backgroundCube_vert,fragmentShader:YA.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:YA.cube_vert,fragmentShader:YA.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:YA.equirect_vert,fragmentShader:YA.equirect_frag},distanceRGBA:{uniforms:ol([JA.common,JA.displacementmap,{referencePosition:{value:new Gi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:YA.distanceRGBA_vert,fragmentShader:YA.distanceRGBA_frag},shadow:{uniforms:ol([JA.lights,JA.fog,{color:{value:new go(0)},opacity:{value:1}}]),vertexShader:YA.shadow_vert,fragmentShader:YA.shadow_frag}};ZA.physical={uniforms:ol([ZA.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pi},clearcoatNormalScale:{value:new gi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pi},sheen:{value:0},sheenColor:{value:new go(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pi},transmissionSamplerSize:{value:new gi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pi},attenuationDistance:{value:0},attenuationColor:{value:new go(0)},specularColor:{value:new go(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pi},anisotropyVector:{value:new gi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pi}}]),vertexShader:YA.meshphysical_vert,fragmentShader:YA.meshphysical_frag};const eg={r:0,b:0,g:0},tg=new ka,ng=new wa;function rg(e,t,n,r,s,i,a){const o=new go(0);let l,c,u=!0===i?0:1,d=null,h=0,m=null;function A(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function g(t,n){t.getRGB(eg,ll(e)),r.buffers.color.setClear(eg.r,eg.g,eg.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,g(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,g(o,u)},render:function(t){let n=!1;const s=A(t);null===s?g(o,u):s&&s.isColor&&(g(s,1),n=!0);const i=e.xr.getEnvironmentBlendMode();"additive"===i?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===i&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=A(n);r&&(r.isCubeTexture||r.mapping===Mn)?(void 0===c&&(c=new rl(new il(1,1,1),new ul({name:"BackgroundCubeMaterial",uniforms:al(ZA.backgroundCube.uniforms),vertexShader:ZA.backgroundCube.vertexShader,fragmentShader:ZA.backgroundCube.fragmentShader,side:Bt,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(c)),tg.copy(n.backgroundRotation),tg.x*=-1,tg.y*=-1,tg.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(tg.y*=-1,tg.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(ng.makeRotationFromEuler(tg)),c.material.toneMapped=_i.getTransfer(r.colorSpace)!==ps,d===r&&h===r.version&&m===e.toneMapping||(c.material.needsUpdate=!0,d=r,h=r.version,m=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new rl(new Ud(2,2),new ul({name:"BackgroundMaterial",uniforms:al(ZA.background.uniforms),vertexShader:ZA.background.vertexShader,fragmentShader:ZA.background.fragmentShader,side:Et,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=_i.getTransfer(r.colorSpace)!==ps,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),d===r&&h===r.version&&m===e.toneMapping||(l.material.needsUpdate=!0,d=r,h=r.version,m=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function sg(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},s=c(null);let i=s,a=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],s=[];for(let i=0;i<n;i++)t[i]=0,r[i]=0,s[i]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:s,object:e,attributes:{},index:null}}function u(){const e=i.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function d(e){h(e,0)}function h(t,n){const r=i.newAttributes,s=i.enabledAttributes,a=i.attributeDivisors;r[t]=1,0===s[t]&&(e.enableVertexAttribArray(t),s[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function m(){const t=i.newAttributes,n=i.enabledAttributes;for(let r=0,s=n.length;r<s;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function A(t,n,r,s,i,a,o){!0===o?e.vertexAttribIPointer(t,n,r,i,a):e.vertexAttribPointer(t,n,r,s,i,a)}function g(){p(),a=!0,i!==s&&(i=s,o(i.object))}function p(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:function(n,s,l,g,p){let f=!1;const x=function(t,n,s){const i=!0===s.wireframe;let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let o=a[n.id];void 0===o&&(o={},a[n.id]=o);let l=o[i];void 0===l&&(l=c(e.createVertexArray()),o[i]=l);return l}(g,l,s);i!==x&&(i=x,o(i.object)),f=function(e,t,n,r){const s=i.attributes,a=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){const t=s[i];let n=a[i];if(void 0===n&&("instanceMatrix"===i&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return i.attributesNum!==o||i.index!==r}(n,g,l,p),f&&function(e,t,n,r){const s={},a=t.attributes;let o=0;const l=n.getAttributes();for(const i in l){if(l[i].location>=0){let t=a[i];void 0===t&&("instanceMatrix"===i&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===i&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),s[i]=n,o++}}i.attributes=s,i.attributesNum=o,i.index=r}(n,g,l,p),null!==p&&t.update(p,e.ELEMENT_ARRAY_BUFFER),(f||a)&&(a=!1,function(n,r,s,i){u();const a=i.attributes,o=s.getAttributes(),l=r.defaultAttributeValues;for(const c in o){const r=o[c];if(r.location>=0){let s=a[c];if(void 0===s&&("instanceMatrix"===c&&n.instanceMatrix&&(s=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(s=n.instanceColor)),void 0!==s){const a=s.normalized,o=s.itemSize,l=t.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,m=l.bytesPerElement,g=u===e.INT||u===e.UNSIGNED_INT||s.gpuType===$n;if(s.isInterleavedBufferAttribute){const t=s.data,l=t.stride,p=s.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)h(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)d(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)A(r.location+e,o/r.locationSize,u,a,l*m,(p+o/r.locationSize*e)*m,g)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)h(r.location+e,s.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===i._maxInstanceCount&&(i._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)d(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)A(r.location+e,o/r.locationSize,u,a,o*m,o/r.locationSize*e*m,g)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}m()}(n,s,l,g),null!==p&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(p).buffer))},reset:g,resetDefaultState:p,dispose:function(){g();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const s=n[e.id];for(const e in s)l(s[e].object),delete s[e];delete n[e.id]}},initAttributes:u,enableAttribute:d,disableUnusedAttributes:m}}function ig(e,t,n){let r;function s(t,s,i){0!==i&&(e.drawArraysInstanced(r,t,s,i),n.update(s,r,i))}this.setMode=function(e){r=e},this.render=function(t,s){e.drawArrays(r,t,s),n.update(s,r,1)},this.renderInstances=s,this.renderMultiDraw=function(e,s,i){if(0===i)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,s,0,i);let a=0;for(let t=0;t<i;t++)a+=s[t];n.update(a,r,1)},this.renderMultiDrawInstances=function(e,i,a,o){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)s(e[t],i[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,i,0,o,0,a);let t=0;for(let e=0;e<a;e++)t+=i[e]*o[e];n.update(t,r,1)}}}function ag(e,t,n,r){let s;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==s)return s;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");s=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s},getMaxPrecision:i,textureFormatReadable:function(t){return t===ir||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const s=n===Jn&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Kn&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==Yn&&!s)},precision:a,logarithmicDepthBuffer:l,reverseDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:d>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function og(e){const t=this;let n=null,r=0,s=!1,i=!1;const a=new bc,o=new pi,l={value:null,needsUpdate:!1};function c(e,n,r,s){const i=null!==e?e.length:0;let c=null;if(0!==i){if(c=l.value,!0!==s||null===c){const t=r+4*i,s=n.matrixWorldInverse;o.getNormalMatrix(s),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==i;++n,l+=4)a.copy(e[n]).applyMatrix4(s,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=i,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||s;return s=t,r=e.length,n},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const d=a.clippingPlanes,h=a.clipIntersection,m=a.clipShadows,A=e.get(a);if(!s||null===d||0===d.length||i&&!m)i?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=i?0:r,t=4*e;let s=A.clippingState||null;l.value=s,s=c(d,o,t,u);for(let r=0;r!==t;++r)s[r]=n[r];A.clippingState=s,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function lg(e){let t=new WeakMap;function n(e,t){return t===En?e.mapping=Sn:t===Bn&&(e.mapping=_n),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture){const i=s.mapping;if(i===En||i===Bn){if(t.has(s)){return n(t.get(s).texture,s.mapping)}{const i=s.image;if(i&&i.height>0){const a=new vl(i.height);return a.fromEquirectangularTexture(e,s),t.set(s,a),s.addEventListener("dispose",r),n(a.texture,s.mapping)}return null}}}return s},dispose:function(){t=new WeakMap}}}const cg=[.125,.215,.35,.446,.526,.582],ug=20,dg=new Zh,hg=new go;let mg=null,Ag=0,gg=0,pg=!1;const fg=(1+Math.sqrt(5))/2,xg=1/fg,vg=[new Gi(-fg,xg,0),new Gi(fg,xg,0),new Gi(-xg,0,fg),new Gi(xg,0,fg),new Gi(0,fg,-xg),new Gi(0,fg,xg),new Gi(-1,1,-1),new Gi(1,1,-1),new Gi(-1,1,1),new Gi(1,1,1)],yg=new Gi;class bg{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{size:i=256,position:a=yg}=s;mg=this._renderer.getRenderTarget(),Ag=this._renderer.getActiveCubeFace(),gg=this._renderer.getActiveMipmapLevel(),pg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(i);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,r,o,a),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Cg(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=jg(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mg,Ag,gg),this._renderer.xr.enabled=pg,e.scissorTest=!1,Ng(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Sn||e.mapping===_n?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mg=this._renderer.getRenderTarget(),Ag=this._renderer.getActiveCubeFace(),gg=this._renderer.getActiveMipmapLevel(),pg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:On,minFilter:On,generateMipmaps:!1,type:Jn,format:ir,colorSpace:As,depthBuffer:!1},r=wg(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=wg(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let s=e;const i=e-4+1+cg.length;for(let a=0;a<i;a++){const i=Math.pow(2,s);n.push(i);let o=1/i;a>e-4?o=cg[a-e+4-1]:0===a&&(o=0),r.push(o);const l=1/(i-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,m=6,A=3,g=2,p=1,f=new Float32Array(A*m*h),x=new Float32Array(g*m*h),v=new Float32Array(p*m*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];f.set(r,A*m*e),x.set(d,g*m*e);const s=[e,e,e,e,e,e];v.set(s,p*m*e)}const y=new Ko;y.setAttribute("position",new _o(f,A)),y.setAttribute("uv",new _o(x,g)),y.setAttribute("faceIndex",new _o(v,p)),t.push(y),s>4&&s--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(ug),s=new Gi(0,1,0),i=new ul({name:"SphericalGaussianBlur",defines:{n:ug,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:Tg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:kt,depthTest:!1,depthWrite:!1});return i}(r,e,t)}return r}_compileMaterial(e){const t=new rl(this._lodPlanes[0],e);this._renderer.compile(t,dg)}_sceneToCubeUV(e,t,n,r,s){const i=new gl(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(hg),l.toneMapping=pn,l.autoClear=!1;const d=new vo({name:"PMREM.Background",side:Bt,depthWrite:!1,depthTest:!1}),h=new rl(new il,d);let m=!1;const A=e.background;A?A.isColor&&(d.color.copy(A),e.background=null,m=!0):(d.color.copy(hg),m=!0);for(let g=0;g<6;g++){const t=g%3;0===t?(i.up.set(0,a[g],0),i.position.set(s.x,s.y,s.z),i.lookAt(s.x+o[g],s.y,s.z)):1===t?(i.up.set(0,0,a[g]),i.position.set(s.x,s.y,s.z),i.lookAt(s.x,s.y+o[g],s.z)):(i.up.set(0,a[g],0),i.position.set(s.x,s.y,s.z),i.lookAt(s.x,s.y,s.z+o[g]));const n=this._cubeSize;Ng(r,t*n,g>2?n:0,n,n),l.setRenderTarget(r),m&&l.render(h,i),l.render(e,i)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=A}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Sn||e.mapping===_n;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Cg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=jg());const s=r?this._cubemapMaterial:this._equirectMaterial,i=new rl(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const a=this._cubeSize;Ng(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(i,dg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const t=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),n=vg[(r-s-1)%vg.length];this._blur(e,s-1,s,t,n)}t.autoClear=n}_blur(e,t,n,r,s){const i=this._pingPongRenderTarget;this._halfBlur(e,i,t,n,r,"latitudinal",s),this._halfBlur(i,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,i,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==i&&"longitudinal"!==i&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new rl(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(s)?Math.PI/(2*d):2*Math.PI/39,m=s/h,A=isFinite(s)?1+Math.floor(3*m):ug;A>ug&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to 20`);const g=[];let p=0;for(let v=0;v<ug;++v){const e=v/m,t=Math.exp(-e*e/2);g.push(t),0===v?p+=t:v<A&&(p+=2*t)}for(let v=0;v<g.length;v++)g[v]=g[v]/p;u.envMap.value=e.texture,u.samples.value=A,u.weights.value=g,u.latitudinal.value="latitudinal"===i,a&&(u.poleAxis.value=a);const{_lodMax:f}=this;u.dTheta.value=h,u.mipInt.value=f-n;const x=this._sizeLods[r];Ng(t,3*x*(r>f-4?r-f+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,dg)}}function wg(e,t,n){const r=new Oi(e,t,n);return r.texture.mapping=Mn,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ng(e,t,n,r,s){e.viewport.set(t,n,r,s),e.scissor.set(t,n,r,s)}function jg(){return new ul({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Tg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:kt,depthTest:!1,depthWrite:!1})}function Cg(){return new ul({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Tg(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:kt,depthTest:!1,depthWrite:!1})}function Tg(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Sg(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const s=t.get(n);void 0!==s&&(t.delete(n),s.dispose())}return{get:function(s){if(s&&s.isTexture){const i=s.mapping,a=i===En||i===Bn,o=i===Sn||i===_n;if(a||o){let i=t.get(s);const l=void 0!==i?i.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==l)return null===n&&(n=new bg(e)),i=a?n.fromEquirectangular(s,i):n.fromCubemap(s,i),i.texture.pmremVersion=s.pmremVersion,t.set(s,i),i.texture;if(void 0!==i)return i.texture;{const l=s.image;return a&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new bg(e)),i=a?n.fromEquirectangular(s):n.fromCubemap(s),i.texture.pmremVersion=s.pmremVersion,t.set(s,i),s.addEventListener("dispose",r),i.texture):null}}}return s},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function _g(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&ji("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Eg(e,t,n,r){const s={},i=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete s[o.id];const l=i.get(o);l&&(t.remove(l),i.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,s=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],s=e[t+1],i=e[t+2];n.push(r,s,s,i,i,r)}}else{if(void 0===s)return;{const e=s.array;a=s.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,s=t+2;n.push(e,r,r,s,s,e)}}}const o=new(xi(n)?Do:Lo)(n,1);o.version=a;const l=i.get(e);l&&t.remove(l),i.set(e,o)}return{get:function(e,t){return!0===s[t.id]||(t.addEventListener("dispose",a),s[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const s in r)t.update(r[s],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=i.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return i.get(e)}}}function Bg(e,t,n){let r,s,i;function a(t,a,o){0!==o&&(e.drawElementsInstanced(r,a,s,t*i,o),n.update(a,r,o))}this.setMode=function(e){r=e},this.setIndex=function(e){s=e.type,i=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,s,t*i),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,i,0,s,e,0,a);let o=0;for(let t=0;t<a;t++)o+=i[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/i,o[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,o,0,s,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,r,1)}}}function Mg(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,s){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=s*(n/3);break;case e.LINES:t.lines+=s*(n/2);break;case e.LINE_STRIP:t.lines+=s*(n-1);break;case e.LINE_LOOP:t.lines+=s*n;break;case e.POINTS:t.points+=s*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function kg(e,t,n){const r=new WeakMap,s=new Ui;return{update:function(i,a,o){const l=i.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let d=r.get(a);if(void 0===d||d.count!==u){void 0!==d&&d.texture.dispose();const h=void 0!==a.morphAttributes.position,m=void 0!==a.morphAttributes.normal,A=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],p=a.morphAttributes.normal||[],f=a.morphAttributes.color||[];let x=0;!0===h&&(x=1),!0===m&&(x=2),!0===A&&(x=3);let v=a.attributes.position.count*x,y=1;v>t.maxTextureSize&&(y=Math.ceil(v/t.maxTextureSize),v=t.maxTextureSize);const b=new Float32Array(v*y*4*u),w=new Hi(b,v,y,u);w.type=Yn,w.needsUpdate=!0;const N=4*x;for(let C=0;C<u;C++){const T=g[C],S=p[C],_=f[C],E=v*y*4*C;for(let B=0;B<T.count;B++){const M=B*N;!0===h&&(s.fromBufferAttribute(T,B),b[E+M+0]=s.x,b[E+M+1]=s.y,b[E+M+2]=s.z,b[E+M+3]=0),!0===m&&(s.fromBufferAttribute(S,B),b[E+M+4]=s.x,b[E+M+5]=s.y,b[E+M+6]=s.z,b[E+M+7]=0),!0===A&&(s.fromBufferAttribute(_,B),b[E+M+8]=s.x,b[E+M+9]=s.y,b[E+M+10]=s.z,b[E+M+11]=4===_.itemSize?s.w:1)}}function j(){w.dispose(),r.delete(a),a.removeEventListener("dispose",j)}d={count:u,texture:w,size:new gi(v,y)},r.set(a,d),a.addEventListener("dispose",j)}if(!0===i.isInstancedMesh&&null!==i.morphTexture)o.getUniforms().setValue(e,"morphTexture",i.morphTexture,n);else{let k=0;for(let I=0;I<l.length;I++)k+=l[I];const L=a.morphTargetsRelative?1:1-k;o.getUniforms().setValue(e,"morphTargetBaseInfluence",L),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",d.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",d.size)}}}function Lg(e,t,n,r){let s=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const o=r.render.frame,l=a.geometry,c=t.get(a,l);if(s.get(c)!==o&&(t.update(c),s.set(c,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",i)&&a.addEventListener("dispose",i),s.get(a)!==o&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),s.set(a,o))),a.isSkinnedMesh){const e=a.skeleton;s.get(e)!==o&&(e.update(),s.set(e,o))}return c},dispose:function(){s=new WeakMap}}}const Ig=new Fi,Dg=new bu(1,1),Pg=new Hi,Fg=new zi,Ug=new xl,Rg=[],Og=[],Hg=new Float32Array(16),Qg=new Float32Array(9),zg=new Float32Array(4);function Vg(e,t,n){const r=e[0];if(r<=0||r>0)return e;const s=t*n;let i=Rg[s];if(void 0===i&&(i=new Float32Array(s),Rg[s]=i),0!==t){r.toArray(i,0);for(let r=1,s=0;r!==t;++r)s+=n,e[r].toArray(i,s)}return i}function Kg(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Gg(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function qg(e,t){let n=Og[t];void 0===n&&(n=new Int32Array(t),Og[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Wg(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function $g(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kg(n,t))return;e.uniform2fv(this.addr,t),Gg(n,t)}}function Xg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Kg(n,t))return;e.uniform3fv(this.addr,t),Gg(n,t)}}function Yg(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kg(n,t))return;e.uniform4fv(this.addr,t),Gg(n,t)}}function Jg(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kg(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gg(n,t)}else{if(Kg(n,r))return;zg.set(r),e.uniformMatrix2fv(this.addr,!1,zg),Gg(n,r)}}function Zg(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kg(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gg(n,t)}else{if(Kg(n,r))return;Qg.set(r),e.uniformMatrix3fv(this.addr,!1,Qg),Gg(n,r)}}function ep(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kg(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gg(n,t)}else{if(Kg(n,r))return;Hg.set(r),e.uniformMatrix4fv(this.addr,!1,Hg),Gg(n,r)}}function tp(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function np(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kg(n,t))return;e.uniform2iv(this.addr,t),Gg(n,t)}}function rp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Kg(n,t))return;e.uniform3iv(this.addr,t),Gg(n,t)}}function sp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kg(n,t))return;e.uniform4iv(this.addr,t),Gg(n,t)}}function ip(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ap(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kg(n,t))return;e.uniform2uiv(this.addr,t),Gg(n,t)}}function op(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Kg(n,t))return;e.uniform3uiv(this.addr,t),Gg(n,t)}}function lp(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kg(n,t))return;e.uniform4uiv(this.addr,t),Gg(n,t)}}function cp(e,t,n){const r=this.cache,s=n.allocateTextureUnit();let i;r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),this.type===e.SAMPLER_2D_SHADOW?(Dg.compareFunction=Ps,i=Dg):i=Ig,n.setTexture2D(t||i,s)}function up(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture3D(t||Fg,s)}function dp(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTextureCube(t||Ug,s)}function hp(e,t,n){const r=this.cache,s=n.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),n.setTexture2DArray(t||Pg,s)}function mp(e,t){e.uniform1fv(this.addr,t)}function Ap(e,t){const n=Vg(t,this.size,2);e.uniform2fv(this.addr,n)}function gp(e,t){const n=Vg(t,this.size,3);e.uniform3fv(this.addr,n)}function pp(e,t){const n=Vg(t,this.size,4);e.uniform4fv(this.addr,n)}function fp(e,t){const n=Vg(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function xp(e,t){const n=Vg(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function vp(e,t){const n=Vg(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function yp(e,t){e.uniform1iv(this.addr,t)}function bp(e,t){e.uniform2iv(this.addr,t)}function wp(e,t){e.uniform3iv(this.addr,t)}function Np(e,t){e.uniform4iv(this.addr,t)}function jp(e,t){e.uniform1uiv(this.addr,t)}function Cp(e,t){e.uniform2uiv(this.addr,t)}function Tp(e,t){e.uniform3uiv(this.addr,t)}function Sp(e,t){e.uniform4uiv(this.addr,t)}function _p(e,t,n){const r=this.cache,s=t.length,i=qg(n,s);Kg(r,i)||(e.uniform1iv(this.addr,i),Gg(r,i));for(let a=0;a!==s;++a)n.setTexture2D(t[a]||Ig,i[a])}function Ep(e,t,n){const r=this.cache,s=t.length,i=qg(n,s);Kg(r,i)||(e.uniform1iv(this.addr,i),Gg(r,i));for(let a=0;a!==s;++a)n.setTexture3D(t[a]||Fg,i[a])}function Bp(e,t,n){const r=this.cache,s=t.length,i=qg(n,s);Kg(r,i)||(e.uniform1iv(this.addr,i),Gg(r,i));for(let a=0;a!==s;++a)n.setTextureCube(t[a]||Ug,i[a])}function Mp(e,t,n){const r=this.cache,s=t.length,i=qg(n,s);Kg(r,i)||(e.uniform1iv(this.addr,i),Gg(r,i));for(let a=0;a!==s;++a)n.setTexture2DArray(t[a]||Pg,i[a])}class kp{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Wg;case 35664:return $g;case 35665:return Xg;case 35666:return Yg;case 35674:return Jg;case 35675:return Zg;case 35676:return ep;case 5124:case 35670:return tp;case 35667:case 35671:return np;case 35668:case 35672:return rp;case 35669:case 35673:return sp;case 5125:return ip;case 36294:return ap;case 36295:return op;case 36296:return lp;case 35678:case 36198:case 36298:case 36306:case 35682:return cp;case 35679:case 36299:case 36307:return up;case 35680:case 36300:case 36308:case 36293:return dp;case 36289:case 36303:case 36311:case 36292:return hp}}(t.type)}}class Lp{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return mp;case 35664:return Ap;case 35665:return gp;case 35666:return pp;case 35674:return fp;case 35675:return xp;case 35676:return vp;case 5124:case 35670:return yp;case 35667:case 35671:return bp;case 35668:case 35672:return wp;case 35669:case 35673:return Np;case 5125:return jp;case 36294:return Cp;case 36295:return Tp;case 36296:return Sp;case 35678:case 36198:case 36298:case 36306:case 35682:return _p;case 35679:case 36299:case 36307:return Ep;case 35680:case 36300:case 36308:case 36293:return Bp;case 36289:case 36303:case 36311:case 36292:return Mp}}(t.type)}}class Ip{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,i=r.length;s!==i;++s){const i=r[s];i.setValue(e,t[i.id],n)}}}const Dp=/(\w+)(\])?(\[|\.)?/g;function Pp(e,t){e.seq.push(t),e.map[t.id]=t}function Fp(e,t,n){const r=e.name,s=r.length;for(Dp.lastIndex=0;;){const i=Dp.exec(r),a=Dp.lastIndex;let o=i[1];const l="]"===i[2],c=i[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===s){Pp(n,void 0===c?new kp(o,e,t):new Lp(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Ip(o),Pp(n,e)),n=e}}}class Up{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Fp(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,i=t.length;s!==i;++s){const i=t[s],a=n[i.id];!1!==a.needsUpdate&&i.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const s=e[r];s.id in t&&n.push(s)}return n}}function Rp(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Op=0;const Hp=new pi;function Qp(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(r&&""===s)return"";const i=/ERROR: 0:(\d+)/.exec(s);if(i){const r=parseInt(i[1]);return n.toUpperCase()+"\n\n"+s+"\n\n"+function(e,t){const n=e.split("\n"),r=[],s=Math.max(t-6,0),i=Math.min(t+6,n.length);for(let a=s;a<i;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return s}function zp(e,t){const n=function(e){_i._getMatrix(Hp,_i.workingColorSpace,e);const t=`mat3( ${Hp.elements.map((e=>e.toFixed(4)))} )`;switch(_i.getTransfer(e)){case gs:return[t,"LinearTransferOETF"];case ps:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function Vp(e,t){let n;switch(t){case fn:n="Linear";break;case xn:n="Reinhard";break;case vn:n="Cineon";break;case yn:n="ACESFilmic";break;case wn:n="AgX";break;case Nn:n="Neutral";break;case bn:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Kp=new Gi;function Gp(){_i.getLuminanceCoefficients(Kp);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Kp.x.toFixed(4)}, ${Kp.y.toFixed(4)}, ${Kp.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function qp(e){return""!==e}function Wp(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function $p(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Xp=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yp(e){return e.replace(Xp,Zp)}const Jp=new Map;function Zp(e,t){let n=YA[t];if(void 0===n){const e=Jp.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=YA[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Yp(n)}const ef=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tf(e){return e.replace(ef,nf)}function nf(e,t,n,r){let s="";for(let i=parseInt(t);i<parseInt(n);i++)s+=r.replace(/\[\s*i\s*\]/g,"[ "+i+" ]").replace(/UNROLLED_LOOP_INDEX/g,i);return s}function rf(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function sf(e,t,n,r){const s=e.getContext(),i=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Tt?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===St?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===_t&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Sn:case _n:t="ENVMAP_TYPE_CUBE";break;case Mn:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===_n&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case mn:t="ENVMAP_BLENDING_MULTIPLY";break;case An:t="ENVMAP_BLENDING_MIX";break;case gn:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),m=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(qp).join("\n")}(n),A=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(i),g=s.createProgram();let p,f,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(p=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(qp).join("\n"),p.length>0&&(p+="\n"),f=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(qp).join("\n"),f.length>0&&(f+="\n")):(p=[rf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qp).join("\n"),f=[rf(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==pn?"#define TONE_MAPPING":"",n.toneMapping!==pn?YA.tonemapping_pars_fragment:"",n.toneMapping!==pn?Vp("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",YA.colorspace_pars_fragment,zp("linearToOutputTexel",n.outputColorSpace),Gp(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(qp).join("\n")),a=Yp(a),a=Wp(a,n),a=$p(a,n),o=Yp(o),o=Wp(o,n),o=$p(o,n),a=tf(a),o=tf(o),!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",p=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+p,f=["#define varying in",n.glslVersion===Ys?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ys?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+f);const v=x+p+a,y=x+f+o,b=Rp(s,s.VERTEX_SHADER,v),w=Rp(s,s.FRAGMENT_SHADER,y);function N(t){if(e.debug.checkShaderErrors){const n=s.getProgramInfoLog(g).trim(),r=s.getShaderInfoLog(b).trim(),i=s.getShaderInfoLog(w).trim();let a=!0,o=!0;if(!1===s.getProgramParameter(g,s.LINK_STATUS))if(a=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(s,g,b,w);else{const e=Qp(s,b,"vertex"),r=Qp(s,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(g,s.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==i||(o=!1);o&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:p},fragmentShader:{log:i,prefix:f}})}s.deleteShader(b),s.deleteShader(w),j=new Up(s,g),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<r;s++){const r=e.getActiveAttrib(t,s),i=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:a}}return n}(s,g)}let j,C;s.attachShader(g,b),s.attachShader(g,w),void 0!==n.index0AttributeName?s.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(g,0,"position"),s.linkProgram(g),this.getUniforms=function(){return void 0===j&&N(this),j},this.getAttributes=function(){return void 0===C&&N(this),C};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=s.getProgramParameter(g,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Op++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=w,this}let af=0;class of{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),i=this._getShaderCacheForMaterial(e);return!1===i.has(r)&&(i.add(r),r.usedTimes++),!1===i.has(s)&&(i.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new lf(e),t.set(e,n)),n}}class lf{constructor(e){this.id=af++,this.code=e,this.usedTimes=0}}function cf(e,t,n,r,s,i,a){const o=new La,l=new of,c=new Set,u=[],d=s.logarithmicDepthBuffer,h=s.vertexTextures;let m=s.precision;const A={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(i,o,u,p,f){const x=p.fog,v=f.geometry,y=i.isMeshStandardMaterial?p.environment:null,b=(i.isMeshStandardMaterial?n:t).get(i.envMap||y),w=b&&b.mapping===Mn?b.image.height:null,N=A[i.type];null!==i.precision&&(m=s.getMaxPrecision(i.precision),m!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",m,"instead."));const j=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,C=void 0!==j?j.length:0;let T,S,_,E,B=0;if(void 0!==v.morphAttributes.position&&(B=1),void 0!==v.morphAttributes.normal&&(B=2),void 0!==v.morphAttributes.color&&(B=3),N){const e=ZA[N];T=e.vertexShader,S=e.fragmentShader}else T=i.vertexShader,S=i.fragmentShader,l.update(i),_=l.getVertexShaderID(i),E=l.getFragmentShaderID(i);const M=e.getRenderTarget(),k=e.state.buffers.depth.getReversed(),L=!0===f.isInstancedMesh,I=!0===f.isBatchedMesh,D=!!i.map,P=!!i.matcap,F=!!b,U=!!i.aoMap,R=!!i.lightMap,O=!!i.bumpMap,H=!!i.normalMap,Q=!!i.displacementMap,z=!!i.emissiveMap,V=!!i.metalnessMap,K=!!i.roughnessMap,G=i.anisotropy>0,q=i.clearcoat>0,W=i.dispersion>0,$=i.iridescence>0,X=i.sheen>0,Y=i.transmission>0,J=G&&!!i.anisotropyMap,Z=q&&!!i.clearcoatMap,ee=q&&!!i.clearcoatNormalMap,te=q&&!!i.clearcoatRoughnessMap,ne=$&&!!i.iridescenceMap,re=$&&!!i.iridescenceThicknessMap,se=X&&!!i.sheenColorMap,ie=X&&!!i.sheenRoughnessMap,ae=!!i.specularMap,oe=!!i.specularColorMap,le=!!i.specularIntensityMap,ce=Y&&!!i.transmissionMap,ue=Y&&!!i.thicknessMap,de=!!i.gradientMap,he=!!i.alphaMap,me=i.alphaTest>0,Ae=!!i.alphaHash,ge=!!i.extensions;let pe=pn;i.toneMapped&&(null!==M&&!0!==M.isXRRenderTarget||(pe=e.toneMapping));const fe={shaderID:N,shaderType:i.type,shaderName:i.name,vertexShader:T,fragmentShader:S,defines:i.defines,customVertexShaderID:_,customFragmentShaderID:E,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:m,batching:I,batchingColor:I&&null!==f._colorsTexture,instancing:L,instancingColor:L&&null!==f.instanceColor,instancingMorph:L&&null!==f.morphTexture,supportsVertexTextures:h,outputColorSpace:null===M?e.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:As,alphaToCoverage:!!i.alphaToCoverage,map:D,matcap:P,envMap:F,envMapMode:F&&b.mapping,envMapCubeUVHeight:w,aoMap:U,lightMap:R,bumpMap:O,normalMap:H,displacementMap:h&&Q,emissiveMap:z,normalMapObjectSpace:H&&i.normalMapType===ds,normalMapTangentSpace:H&&i.normalMapType===us,metalnessMap:V,roughnessMap:K,anisotropy:G,anisotropyMap:J,clearcoat:q,clearcoatMap:Z,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:W,iridescence:$,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:X,sheenColorMap:se,sheenRoughnessMap:ie,specularMap:ae,specularColorMap:oe,specularIntensityMap:le,transmission:Y,transmissionMap:ce,thicknessMap:ue,gradientMap:de,opaque:!1===i.transparent&&i.blending===Lt&&!1===i.alphaToCoverage,alphaMap:he,alphaTest:me,alphaHash:Ae,combine:i.combine,mapUv:D&&g(i.map.channel),aoMapUv:U&&g(i.aoMap.channel),lightMapUv:R&&g(i.lightMap.channel),bumpMapUv:O&&g(i.bumpMap.channel),normalMapUv:H&&g(i.normalMap.channel),displacementMapUv:Q&&g(i.displacementMap.channel),emissiveMapUv:z&&g(i.emissiveMap.channel),metalnessMapUv:V&&g(i.metalnessMap.channel),roughnessMapUv:K&&g(i.roughnessMap.channel),anisotropyMapUv:J&&g(i.anisotropyMap.channel),clearcoatMapUv:Z&&g(i.clearcoatMap.channel),clearcoatNormalMapUv:ee&&g(i.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&g(i.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&g(i.iridescenceMap.channel),iridescenceThicknessMapUv:re&&g(i.iridescenceThicknessMap.channel),sheenColorMapUv:se&&g(i.sheenColorMap.channel),sheenRoughnessMapUv:ie&&g(i.sheenRoughnessMap.channel),specularMapUv:ae&&g(i.specularMap.channel),specularColorMapUv:oe&&g(i.specularColorMap.channel),specularIntensityMapUv:le&&g(i.specularIntensityMap.channel),transmissionMapUv:ce&&g(i.transmissionMap.channel),thicknessMapUv:ue&&g(i.thicknessMap.channel),alphaMapUv:he&&g(i.alphaMap.channel),vertexTangents:!!v.attributes.tangent&&(H||G),vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&!!v.attributes.color&&4===v.attributes.color.itemSize,pointsUvs:!0===f.isPoints&&!!v.attributes.uv&&(D||he),fog:!!x,useFog:!0===i.fog,fogExp2:!!x&&x.isFogExp2,flatShading:!0===i.flatShading,sizeAttenuation:!0===i.sizeAttenuation,logarithmicDepthBuffer:d,reverseDepthBuffer:k,skinning:!0===f.isSkinnedMesh,morphTargets:void 0!==v.morphAttributes.position,morphNormals:void 0!==v.morphAttributes.normal,morphColors:void 0!==v.morphAttributes.color,morphTargetsCount:C,morphTextureStride:B,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:pe,decodeVideoTexture:D&&!0===i.map.isVideoTexture&&_i.getTransfer(i.map.colorSpace)===ps,decodeVideoTextureEmissive:z&&!0===i.emissiveMap.isVideoTexture&&_i.getTransfer(i.emissiveMap.colorSpace)===ps,premultipliedAlpha:i.premultipliedAlpha,doubleSided:i.side===Mt,flipSided:i.side===Bt,useDepthPacking:i.depthPacking>=0,depthPacking:i.depthPacking||0,index0AttributeName:i.index0AttributeName,extensionClipCullDistance:ge&&!0===i.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ge&&!0===i.extensions.multiDraw||I)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:i.customProgramCacheKey()};return fe.vertexUv1s=c.has(1),fe.vertexUv2s=c.has(2),fe.vertexUv3s=c.has(3),c.clear(),fe},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reverseDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=A[e.type];let n;if(t){const e=ZA[t];n=cl.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,s=u.length;e<s;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new sf(e,n,t,i),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function uf(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function df(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function hf(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function mf(){const e=[];let t=0;const n=[],r=[],s=[];function i(n,r,s,i,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:s,groupOrder:i,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=s,l.groupOrder=i,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:s,init:function(){t=0,n.length=0,r.length=0,s.length=0},push:function(e,t,a,o,l,c){const u=i(e,t,a,o,l,c);a.transmission>0?r.push(u):!0===a.transparent?s.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=i(e,t,a,o,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?s.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||df),r.length>1&&r.sort(t||hf),s.length>1&&s.sort(t||hf)}}}function Af(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let s;return void 0===r?(s=new mf,e.set(t,[s])):n>=r.length?(s=new mf,r.push(s)):s=r[n],s},dispose:function(){e=new WeakMap}}}function gf(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Gi,color:new go};break;case"SpotLight":n={position:new Gi,direction:new Gi,color:new go,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Gi,color:new go,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Gi,skyColor:new go,groundColor:new go};break;case"RectAreaLight":n={color:new go,position:new Gi,halfWidth:new Gi,halfHeight:new Gi}}return e[t.id]=n,n}}}let pf=0;function ff(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function xf(e){const t=new gf,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gi};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gi,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let o=0;o<9;o++)r.probe.push(new Gi);const s=new Gi,i=new wa,a=new wa;return{setup:function(s){let i=0,a=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,d=0,h=0,m=0,A=0,g=0,p=0,f=0,x=0;s.sort(ff);for(let e=0,y=s.length;e<y;e++){const v=s[e],y=v.color,b=v.intensity,w=v.distance,N=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)i+=y.r*b,a+=y.g*b,o+=y.b*b;else if(v.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(v.sh.coefficients[e],b);x++}else if(v.isDirectionalLight){const e=t.get(v);if(e.color.copy(v.color).multiplyScalar(v.intensity),v.castShadow){const e=v.shadow,t=n.get(v);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=N,r.directionalShadowMatrix[l]=v.shadow.matrix,m++}r.directional[l]=e,l++}else if(v.isSpotLight){const e=t.get(v);e.position.setFromMatrixPosition(v.matrixWorld),e.color.copy(y).multiplyScalar(b),e.distance=w,e.coneCos=Math.cos(v.angle),e.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),e.decay=v.decay,r.spot[u]=e;const s=v.shadow;if(v.map&&(r.spotLightMap[p]=v.map,p++,s.updateMatrices(v),v.castShadow&&f++),r.spotLightMatrix[u]=s.matrix,v.castShadow){const e=n.get(v);e.shadowIntensity=s.intensity,e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=N,g++}u++}else if(v.isRectAreaLight){const e=t.get(v);e.color.copy(y).multiplyScalar(b),e.halfWidth.set(.5*v.width,0,0),e.halfHeight.set(0,.5*v.height,0),r.rectArea[d]=e,d++}else if(v.isPointLight){const e=t.get(v);if(e.color.copy(v.color).multiplyScalar(v.intensity),e.distance=v.distance,e.decay=v.decay,v.castShadow){const e=v.shadow,t=n.get(v);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=N,r.pointShadowMatrix[c]=v.shadow.matrix,A++}r.point[c]=e,c++}else if(v.isHemisphereLight){const e=t.get(v);e.skyColor.copy(v.color).multiplyScalar(b),e.groundColor.copy(v.groundColor).multiplyScalar(b),r.hemi[h]=e,h++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=JA.LTC_FLOAT_1,r.rectAreaLTC2=JA.LTC_FLOAT_2):(r.rectAreaLTC1=JA.LTC_HALF_1,r.rectAreaLTC2=JA.LTC_HALF_2)),r.ambient[0]=i,r.ambient[1]=a,r.ambient[2]=o;const v=r.hash;v.directionalLength===l&&v.pointLength===c&&v.spotLength===u&&v.rectAreaLength===d&&v.hemiLength===h&&v.numDirectionalShadows===m&&v.numPointShadows===A&&v.numSpotShadows===g&&v.numSpotMaps===p&&v.numLightProbes===x||(r.directional.length=l,r.spot.length=u,r.rectArea.length=d,r.point.length=c,r.hemi.length=h,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=g+p-f,r.spotLightMap.length=p,r.numSpotLightShadowsWithMaps=f,r.numLightProbes=x,v.directionalLength=l,v.pointLength=c,v.spotLength=u,v.rectAreaLength=d,v.hemiLength=h,v.numDirectionalShadows=m,v.numPointShadows=A,v.numSpotShadows=g,v.numSpotMaps=p,v.numLightProbes=x,r.version=pf++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,m=e.length;h<m;h++){const t=e[h];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),a.identity(),i.copy(t.matrixWorld),i.premultiply(d),a.extractRotation(i),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=r.point[o];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),o++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:r}}function vf(e){const t=new xf(e),n=[],r=[];const s={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){s.camera=e,n.length=0,r.length=0},state:s,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function yf(e){let t=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=t.get(n);let i;return void 0===s?(i=new vf(e),t.set(n,[i])):r>=s.length?(i=new vf(e),s.push(i)):i=s[r],i},dispose:function(){t=new WeakMap}}}function bf(e,t,n){let r=new jc;const s=new gi,i=new gi,a=new Ui,o=new rh({depthPacking:os}),l=new sh,c={},u=n.maxTextureSize,d={[Et]:Bt,[Bt]:Et,[Mt]:Mt},h=new ul({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const A=new Ko;A.setAttribute("position",new _o(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new rl(A,h),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tt;let f=this.type;function x(n,r){const i=t.update(g);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,m.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Oi(s.x,s.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,h,g,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,m,g,null)}function v(t,n,r,s){let i=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)i=a;else if(i=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=i.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let s=r[t];void 0===s&&(s=i.clone(),r[t]=s,n.addEventListener("dispose",b)),i=s}if(i.visible=n.visible,i.wireframe=n.wireframe,i.side=s===_t?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],i.alphaMap=n.alphaMap,i.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,i.map=n.map,i.clipShadows=n.clipShadows,i.clippingPlanes=n.clippingPlanes,i.clipIntersection=n.clipIntersection,i.displacementMap=n.displacementMap,i.displacementScale=n.displacementScale,i.displacementBias=n.displacementBias,i.wireframeLinewidth=n.wireframeLinewidth,i.linewidth=n.linewidth,!0===r.isPointLight&&!0===i.isMeshDistanceMaterial){e.properties.get(i).light=r}return i}function y(n,s,i,a,o){if(!1===n.visible)return;if(n.layers.test(s.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===_t)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=v(n,d,a,o);n.onBeforeShadow(e,n,s,i,r,t,u),e.renderBufferDirect(i,null,r,t,n,u),n.onAfterShadow(e,n,s,i,r,t,u)}}}else if(l.visible){const t=v(n,l,a,o);n.onBeforeShadow(e,n,s,i,r,t,null),e.renderBufferDirect(i,null,r,t,n,null),n.onAfterShadow(e,n,s,i,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],s,i,a,o)}function b(e){e.target.removeEventListener("dispose",b);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===p.enabled)return;if(!1===p.autoUpdate&&!1===p.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(kt),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const m=f!==_t&&this.type===_t,A=f===_t&&this.type!==_t;for(let g=0,p=t.length;g<p;g++){const l=t[g],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;s.copy(c.mapSize);const d=c.getFrameExtents();if(s.multiply(d),i.copy(c.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(i.x=Math.floor(u/d.x),s.x=i.x*d.x,c.mapSize.x=i.x),s.y>u&&(i.y=Math.floor(u/d.y),s.y=i.y*d.y,c.mapSize.y=i.y)),null===c.map||!0===m||!0===A){const e=this.type!==_t?{minFilter:Dn,magFilter:Dn}:{};null!==c.map&&c.map.dispose(),c.map=new Oi(s.x,s.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const p=c.getViewportCount();for(let e=0;e<p;e++){const t=c.getViewport(e);a.set(i.x*t.x,i.y*t.y,i.x*t.z,i.y*t.w),h.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),y(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===_t&&x(c,o),c.needsUpdate=!1}f=this.type,p.needsUpdate=!1,e.setRenderTarget(l,c,d)}}const wf={[sn]:an,[on]:dn,[cn]:hn,[ln]:un,[an]:sn,[dn]:on,[hn]:cn,[un]:ln};function Nf(e,t){const n=new function(){let t=!1;const n=new Ui;let r=null;const s=new Ui(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,a,o){!0===o&&(t*=a,r*=a,i*=a),n.set(t,r,i,a),!1===s.equals(n)&&(e.clearColor(t,r,i,a),s.copy(n))},reset:function(){t=!1,r=null,s.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,s=null,i=null,a=null;return{setReversed:function(e){if(r!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),r=e;const s=a;a=null,this.setClear(s)}},getReversed:function(){return r},setTest:function(t){t?O(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(t){s===t||n||(e.depthMask(t),s=t)},setFunc:function(t){if(r&&(t=wf[t]),i!==t){switch(t){case sn:e.depthFunc(e.NEVER);break;case an:e.depthFunc(e.ALWAYS);break;case on:e.depthFunc(e.LESS);break;case ln:e.depthFunc(e.LEQUAL);break;case cn:e.depthFunc(e.EQUAL);break;case un:e.depthFunc(e.GEQUAL);break;case dn:e.depthFunc(e.GREATER);break;case hn:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){n=e},setClear:function(t){a!==t&&(r&&(t=1-t),e.clearDepth(t),a=t)},reset:function(){n=!1,s=null,i=null,a=null,r=!1}}},s=new function(){let t=!1,n=null,r=null,s=null,i=null,a=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?O(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&s===n&&i===a||(e.stencilFunc(t,n,a),r=t,s=n,i=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,s=null,i=null,a=null,o=null,l=null,c=null}}},i=new WeakMap,a=new WeakMap;let o={},l={},c=new WeakMap,u=[],d=null,h=!1,m=null,A=null,g=null,p=null,f=null,x=null,v=null,y=new go(0,0,0),b=0,w=!1,N=null,j=null,C=null,T=null,S=null;const _=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let E=!1,B=0;const M=e.getParameter(e.VERSION);-1!==M.indexOf("WebGL")?(B=parseFloat(/^WebGL (\d)/.exec(M)[1]),E=B>=1):-1!==M.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL ES (\d)/.exec(M)[1]),E=B>=2);let k=null,L={};const I=e.getParameter(e.SCISSOR_BOX),D=e.getParameter(e.VIEWPORT),P=(new Ui).fromArray(I),F=(new Ui).fromArray(D);function U(t,n,r,s){const i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}const R={};function O(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function H(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}R[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),R[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),R[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),R[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),s.setClear(0),O(e.DEPTH_TEST),r.setFunc(ln),K(!1),G(wt),O(e.CULL_FACE),V(kt);const Q={[Ut]:e.FUNC_ADD,[Rt]:e.FUNC_SUBTRACT,[Ot]:e.FUNC_REVERSE_SUBTRACT};Q[Ht]=e.MIN,Q[Qt]=e.MAX;const z={[zt]:e.ZERO,[Vt]:e.ONE,[Kt]:e.SRC_COLOR,[qt]:e.SRC_ALPHA,[Zt]:e.SRC_ALPHA_SATURATE,[Yt]:e.DST_COLOR,[$t]:e.DST_ALPHA,[Gt]:e.ONE_MINUS_SRC_COLOR,[Wt]:e.ONE_MINUS_SRC_ALPHA,[Jt]:e.ONE_MINUS_DST_COLOR,[Xt]:e.ONE_MINUS_DST_ALPHA,[en]:e.CONSTANT_COLOR,[tn]:e.ONE_MINUS_CONSTANT_COLOR,[nn]:e.CONSTANT_ALPHA,[rn]:e.ONE_MINUS_CONSTANT_ALPHA};function V(t,n,r,s,i,a,o,l,c,u){if(t!==kt){if(!1===h&&(O(e.BLEND),h=!0),t===Ft)i=i||n,a=a||r,o=o||s,n===A&&i===f||(e.blendEquationSeparate(Q[n],Q[i]),A=n,f=i),r===g&&s===p&&a===x&&o===v||(e.blendFuncSeparate(z[r],z[s],z[a],z[o]),g=r,p=s,x=a,v=o),!1!==l.equals(y)&&c===b||(e.blendColor(l.r,l.g,l.b,c),y.copy(l),b=c),m=t,w=!1;else if(t!==m||u!==w){if(A===Ut&&f===Ut||(e.blendEquation(e.FUNC_ADD),A=Ut,f=Ut),u)switch(t){case Lt:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case It:e.blendFunc(e.ONE,e.ONE);break;case Dt:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Pt:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Lt:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case It:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case Dt:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Pt:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,p=null,x=null,v=null,y.set(0,0,0),b=0,m=t,w=u}}else!0===h&&(H(e.BLEND),h=!1)}function K(t){N!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),N=t)}function G(t){t!==bt?(O(e.CULL_FACE),t!==j&&(t===wt?e.cullFace(e.BACK):t===Nt?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),j=t}function q(t,n,r){t?(O(e.POLYGON_OFFSET_FILL),T===n&&S===r||(e.polygonOffset(n,r),T=n,S=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:s},enable:O,disable:H,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=u,s=!1;if(t){r=c.get(n),void 0===r&&(r=[],c.set(n,r));const i=t.textures;if(r.length!==i.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=i.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=i.length,s=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,s=!0);s&&e.drawBuffers(r)},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:V,setMaterial:function(t,i){t.side===Mt?H(e.CULL_FACE):O(e.CULL_FACE);let a=t.side===Bt;i&&(a=!a),K(a),t.blending===Lt&&!1===t.transparent?V(kt):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?O(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:K,setCullFace:G,setLineWidth:function(t){t!==C&&(E&&e.lineWidth(t),C=t)},setPolygonOffset:q,setScissorTest:function(t){t?O(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+_-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===k?e.TEXTURE0+_-1:k);let s=L[r];void 0===s&&(s={type:void 0,texture:void 0},L[r]=s),s.type===t&&s.texture===n||(k!==r&&(e.activeTexture(r),k=r),e.bindTexture(t,n||R[t]),s.type=t,s.texture=n)},unbindTexture:function(){const t=L[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=a.get(n);void 0===r&&(r=new WeakMap,a.set(n,r));let s=r.get(t);void 0===s&&(s=e.getUniformBlockIndex(n,t.name),r.set(t,s))},uniformBlockBinding:function(t,n){const r=a.get(n).get(t);i.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===P.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),P.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},k=null,L={},l={},c=new WeakMap,u=[],d=null,h=!1,m=null,A=null,g=null,p=null,f=null,x=null,v=null,y=new go(0,0,0),b=0,w=!1,N=null,j=null,C=null,T=null,S=null,P.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),s.reset()}}}function jf(e,t,n,r,s,i,a){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new gi,u=new WeakMap;let d;const h=new WeakMap;let m=!1;try{m="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(z){}function A(e,t){return m?new OffscreenCanvas(e,t):bi("canvas")}function g(e,t,n){let r=1;const s=Q(e);if((s.width>n||s.height>n)&&(r=n/Math.max(s.width,s.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*s.width),i=Math.floor(r*s.height);void 0===d&&(d=A(n,i));const a=t?A(n,i):d;a.width=n,a.height=i;return a.getContext("2d").drawImage(e,0,0,n,i),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+s.width+"x"+s.height+") to ("+n+"x"+i+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+s.width+"x"+s.height+")."),e}return e}function p(e){return e.generateMipmaps}function f(t){e.generateMipmap(t)}function x(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function v(n,r,s,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;if(r===e.RED&&(s===e.FLOAT&&(o=e.R32F),s===e.HALF_FLOAT&&(o=e.R16F),s===e.UNSIGNED_BYTE&&(o=e.R8)),r===e.RED_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.R8UI),s===e.UNSIGNED_SHORT&&(o=e.R16UI),s===e.UNSIGNED_INT&&(o=e.R32UI),s===e.BYTE&&(o=e.R8I),s===e.SHORT&&(o=e.R16I),s===e.INT&&(o=e.R32I)),r===e.RG&&(s===e.FLOAT&&(o=e.RG32F),s===e.HALF_FLOAT&&(o=e.RG16F),s===e.UNSIGNED_BYTE&&(o=e.RG8)),r===e.RG_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RG8UI),s===e.UNSIGNED_SHORT&&(o=e.RG16UI),s===e.UNSIGNED_INT&&(o=e.RG32UI),s===e.BYTE&&(o=e.RG8I),s===e.SHORT&&(o=e.RG16I),s===e.INT&&(o=e.RG32I)),r===e.RGB_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RGB8UI),s===e.UNSIGNED_SHORT&&(o=e.RGB16UI),s===e.UNSIGNED_INT&&(o=e.RGB32UI),s===e.BYTE&&(o=e.RGB8I),s===e.SHORT&&(o=e.RGB16I),s===e.INT&&(o=e.RGB32I)),r===e.RGBA_INTEGER&&(s===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),s===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),s===e.UNSIGNED_INT&&(o=e.RGBA32UI),s===e.BYTE&&(o=e.RGBA8I),s===e.SHORT&&(o=e.RGBA16I),s===e.INT&&(o=e.RGBA32I)),r===e.RGB&&s===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),r===e.RGBA){const t=a?gs:_i.getTransfer(i);s===e.FLOAT&&(o=e.RGBA32F),s===e.HALF_FLOAT&&(o=e.RGBA16F),s===e.UNSIGNED_BYTE&&(o=t===ps?e.SRGB8_ALPHA8:e.RGBA8),s===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),s===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function y(t,n){let r;return t?null===n||n===Xn||n===tr?r=e.DEPTH24_STENCIL8:n===Yn?r=e.DEPTH32F_STENCIL8:n===Wn&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Xn||n===tr?r=e.DEPTH_COMPONENT24:n===Yn?r=e.DEPTH_COMPONENT32F:n===Wn&&(r=e.DEPTH_COMPONENT16),r}function b(e,t){return!0===p(e)||e.isFramebufferTexture&&e.minFilter!==Dn&&e.minFilter!==On?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,s=h.get(n);if(s){const r=s[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&j(e),0===Object.keys(s).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function N(t){const n=t.target;n.removeEventListener("dispose",N),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const s=t.textures;for(let i=0,o=s.length;i<o;i++){const t=r.get(s[i]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(s[i])}r.remove(t)}(n)}function j(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const s=t.source;delete h.get(s)[n.__cacheKey],a.memory.textures--}let C=0;function T(t,s){const i=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&i.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(i,t,s);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,i.__webglTexture,e.TEXTURE0+s)}const S={[kn]:e.REPEAT,[Ln]:e.CLAMP_TO_EDGE,[In]:e.MIRRORED_REPEAT},_={[Dn]:e.NEAREST,[Pn]:e.NEAREST_MIPMAP_NEAREST,[Un]:e.NEAREST_MIPMAP_LINEAR,[On]:e.LINEAR,[Hn]:e.LINEAR_MIPMAP_NEAREST,[zn]:e.LINEAR_MIPMAP_LINEAR},E={[Ls]:e.NEVER,[Os]:e.ALWAYS,[Is]:e.LESS,[Ps]:e.LEQUAL,[Ds]:e.EQUAL,[Rs]:e.GEQUAL,[Fs]:e.GREATER,[Us]:e.NOTEQUAL};function B(n,i){if(i.type!==Yn||!1!==t.has("OES_texture_float_linear")||i.magFilter!==On&&i.magFilter!==Hn&&i.magFilter!==Un&&i.magFilter!==zn&&i.minFilter!==On&&i.minFilter!==Hn&&i.minFilter!==Un&&i.minFilter!==zn||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,S[i.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,S[i.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,S[i.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,_[i.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,_[i.minFilter]),i.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,E[i.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(i.magFilter===Dn)return;if(i.minFilter!==Un&&i.minFilter!==zn)return;if(i.type===Yn&&!1===t.has("OES_texture_float_linear"))return;if(i.anisotropy>1||r.get(i).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i.anisotropy,s.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy}}}function M(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const s=n.source;let i=h.get(s);void 0===i&&(i={},h.set(s,i));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===i[o]&&(i[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),i[o].usedTimes++;const s=i[t.__cacheKey];void 0!==s&&(i[t.__cacheKey].usedTimes--,0===s.usedTimes&&j(n)),t.__cacheKey=o,t.__webglTexture=i[o].texture}return r}function k(t,a,o){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=M(t,a),u=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=_i.getPrimaries(_i.workingColorSpace),r=a.colorSpace===hs?null:_i.getPrimaries(a.colorSpace),h=a.colorSpace===hs||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let m=g(a.image,!1,s.maxTextureSize);m=H(a,m);const A=i.convert(a.format,a.colorSpace),x=i.convert(a.type);let w,N=v(a.internalFormat,A,x,a.colorSpace,a.isVideoTexture);B(l,a);const j=a.mipmaps,C=!0!==a.isVideoTexture,T=void 0===d.__version||!0===c,S=u.dataReady,_=b(a,m);if(a.isDepthTexture)N=y(a.format===or,a.type),T&&(C?n.texStorage2D(e.TEXTURE_2D,1,N,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,N,m.width,m.height,0,A,x,null));else if(a.isDataTexture)if(j.length>0){C&&T&&n.texStorage2D(e.TEXTURE_2D,_,N,j[0].width,j[0].height);for(let t=0,r=j.length;t<r;t++)w=j[t],C?S&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,A,x,w.data):n.texImage2D(e.TEXTURE_2D,t,N,w.width,w.height,0,A,x,w.data);a.generateMipmaps=!1}else C?(T&&n.texStorage2D(e.TEXTURE_2D,_,N,m.width,m.height),S&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,A,x,m.data)):n.texImage2D(e.TEXTURE_2D,0,N,m.width,m.height,0,A,x,m.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){C&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,_,N,j[0].width,j[0].height,m.depth);for(let t=0,r=j.length;t<r;t++)if(w=j[t],a.format!==ir)if(null!==A)if(C){if(S)if(a.layerUpdates.size>0){const r=qA(w.width,w.height,a.format,a.type);for(const s of a.layerUpdates){const i=w.data.subarray(s*r/w.data.BYTES_PER_ELEMENT,(s+1)*r/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,s,w.width,w.height,1,A,i)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,m.depth,A,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,N,w.width,w.height,m.depth,0,w.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else C?S&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,m.depth,A,x,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,N,w.width,w.height,m.depth,0,A,x,w.data)}else{C&&T&&n.texStorage2D(e.TEXTURE_2D,_,N,j[0].width,j[0].height);for(let t=0,r=j.length;t<r;t++)w=j[t],a.format!==ir?null!==A?C?S&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,A,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,N,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?S&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,A,x,w.data):n.texImage2D(e.TEXTURE_2D,t,N,w.width,w.height,0,A,x,w.data)}else if(a.isDataArrayTexture)if(C){if(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,_,N,m.width,m.height,m.depth),S)if(a.layerUpdates.size>0){const t=qA(m.width,m.height,a.format,a.type);for(const r of a.layerUpdates){const s=m.data.subarray(r*t/m.data.BYTES_PER_ELEMENT,(r+1)*t/m.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,m.width,m.height,1,A,x,s)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,A,x,m.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,N,m.width,m.height,m.depth,0,A,x,m.data);else if(a.isData3DTexture)C?(T&&n.texStorage3D(e.TEXTURE_3D,_,N,m.width,m.height,m.depth),S&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,A,x,m.data)):n.texImage3D(e.TEXTURE_3D,0,N,m.width,m.height,m.depth,0,A,x,m.data);else if(a.isFramebufferTexture){if(T)if(C)n.texStorage2D(e.TEXTURE_2D,_,N,m.width,m.height);else{let t=m.width,r=m.height;for(let s=0;s<_;s++)n.texImage2D(e.TEXTURE_2D,s,N,t,r,0,A,x,null),t>>=1,r>>=1}}else if(j.length>0){if(C&&T){const t=Q(j[0]);n.texStorage2D(e.TEXTURE_2D,_,N,t.width,t.height)}for(let t=0,r=j.length;t<r;t++)w=j[t],C?S&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,A,x,w):n.texImage2D(e.TEXTURE_2D,t,N,A,x,w);a.generateMipmaps=!1}else if(C){if(T){const t=Q(m);n.texStorage2D(e.TEXTURE_2D,_,N,t.width,t.height)}S&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,A,x,m)}else n.texImage2D(e.TEXTURE_2D,0,N,A,x,m);p(a)&&f(l),d.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function L(t,s,a,l,c,u){const d=i.convert(a.format,a.colorSpace),h=i.convert(a.type),m=v(a.internalFormat,d,h,a.colorSpace),A=r.get(s),g=r.get(a);if(g.__renderTarget=s,!A.__hasExternalTextures){const t=Math.max(1,s.width>>u),r=Math.max(1,s.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,m,t,r,s.depth,0,d,h,null):n.texImage2D(c,u,m,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),O(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,g.__webglTexture,0,R(s)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,g.__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function I(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const s=n.depthTexture,i=s&&s.isDepthTexture?s.type:null,a=y(n.stencilBuffer,i),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=R(n);O(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let s=0;s<t.length;s++){const a=t[s],l=i.convert(a.format,a.colorSpace),c=i.convert(a.type),u=v(a.internalFormat,l,c,a.colorSpace),d=R(n);r&&!1===O(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):O(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function D(t,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const i=r.get(s.depthTexture);i.__renderTarget=s,i.__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),T(s.depthTexture,0);const a=i.__webglTexture,l=R(s);if(s.depthTexture.format===ar)O(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(s.depthTexture.format!==or)throw new Error("Unknown depthTexture format");O(s)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function P(t){const s=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(s.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(s.__depthDisposeCallback&&s.__depthDisposeCallback(),e){const t=()=>{delete s.__boundDepthTexture,delete s.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),s.__depthDisposeCallback=t}s.__boundDepthTexture=e}if(t.depthTexture&&!s.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?D(s.__webglFramebuffer[0],t):D(s.__webglFramebuffer,t)}else if(i){s.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[r]),void 0===s.__webglDepthbuffer[r])s.__webglDepthbuffer[r]=e.createRenderbuffer(),I(s.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=s.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}else{const r=t.texture.mipmaps;if(r&&r.length>0?n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,s.__webglFramebuffer),void 0===s.__webglDepthbuffer)s.__webglDepthbuffer=e.createRenderbuffer(),I(s.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=s.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],U=[];function R(e){return Math.min(s.maxSamples,e.samples)}function O(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,t){const n=e.colorSpace,r=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==As&&n!==hs&&(_i.getTransfer(n)===ps?r===ir&&s===Kn||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function Q(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=C;return e>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+s.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=T,this.setTexture2DArray=function(t,s){const i=r.get(t);t.version>0&&i.__version!==t.version?k(i,t,s):n.bindTexture(e.TEXTURE_2D_ARRAY,i.__webglTexture,e.TEXTURE0+s)},this.setTexture3D=function(t,s){const i=r.get(t);t.version>0&&i.__version!==t.version?k(i,t,s):n.bindTexture(e.TEXTURE_3D,i.__webglTexture,e.TEXTURE0+s)},this.setTextureCube=function(t,a){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,a,o){if(6!==a.image.length)return;const l=M(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=_i.getPrimaries(_i.workingColorSpace),r=a.colorSpace===hs?null:_i.getPrimaries(a.colorSpace),d=a.colorSpace===hs||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const h=a.isCompressedTexture||a.image[0].isCompressedTexture,m=a.image[0]&&a.image[0].isDataTexture,A=[];for(let e=0;e<6;e++)A[e]=h||m?m?a.image[e].image:a.image[e]:g(a.image[e],!0,s.maxCubemapSize),A[e]=H(a,A[e]);const x=A[0],y=i.convert(a.format,a.colorSpace),w=i.convert(a.type),N=v(a.internalFormat,y,w,a.colorSpace),j=!0!==a.isVideoTexture,C=void 0===u.__version||!0===l,T=c.dataReady;let S,_=b(a,x);if(B(e.TEXTURE_CUBE_MAP,a),h){j&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,_,N,x.width,x.height);for(let t=0;t<6;t++){S=A[t].mipmaps;for(let r=0;r<S.length;r++){const s=S[r];a.format!==ir?null!==y?j?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,y,s.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,N,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):j?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,s.width,s.height,y,w,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,N,s.width,s.height,0,y,w,s.data)}}}else{if(S=a.mipmaps,j&&C){S.length>0&&_++;const t=Q(A[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,_,N,t.width,t.height)}for(let t=0;t<6;t++)if(m){j?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,A[t].width,A[t].height,y,w,A[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,N,A[t].width,A[t].height,0,y,w,A[t].data);for(let r=0;r<S.length;r++){const s=S[r].image[t].image;j?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,s.width,s.height,y,w,s.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,N,s.width,s.height,0,y,w,s.data)}}else{j?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,y,w,A[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,N,y,w,A[t]);for(let r=0;r<S.length;r++){const s=S[r];j?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,y,w,s.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,N,y,w,s.image[t])}}}p(a)&&f(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(o,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,s){const i=r.get(t);void 0!==n&&L(i.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==s&&P(t)},this.setupRenderTarget=function(t){const s=t.texture,o=r.get(t),l=r.get(s);t.addEventListener("dispose",N);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,d=c.length>1;if(d||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,a.memory.textures++),u){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(s.mipmaps&&s.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<s.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(s.mipmaps&&s.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<s.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===O(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const s=i.convert(r.format,r.colorSpace),a=i.convert(r.type),l=v(r.internalFormat,s,a,r.colorSpace,!0===t.isXRRenderTarget),u=R(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),I(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),B(e.TEXTURE_CUBE_MAP,s);for(let n=0;n<6;n++)if(s.mipmaps&&s.mipmaps.length>0)for(let r=0;r<s.mipmaps.length;r++)L(o.__webglFramebuffer[n][r],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else L(o.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);p(s)&&f(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let s=0,i=c.length;s<i;s++){const i=c[s],a=r.get(i);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),B(e.TEXTURE_2D,i),L(o.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,0),p(i)&&f(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),B(r,s),s.mipmaps&&s.mipmaps.length>0)for(let n=0;n<s.mipmaps.length;n++)L(o.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,r,n);else L(o.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,r,0);p(s)&&f(r),n.unbindTexture()}t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let s=0,i=t.length;s<i;s++){const i=t[s];if(p(i)){const t=x(e),s=r.get(i).__webglTexture;n.bindTexture(t,s),f(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===O(t)){const s=t.textures,i=t.width,a=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=s.length>1;if(d)for(let t=0;t<s.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<s.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(s[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,i,a,0,0,i,a,o,e.NEAREST),!0===l&&(F.length=0,U.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(c),U.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,U)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<s.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const i=r.get(s[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,i,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=P,this.setupFrameBufferTexture=L,this.useMultisampledRTT=O}function Cf(e,t){return{convert:function(n){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hs;const i=_i.getTransfer(s);if(n===Kn)return e.UNSIGNED_BYTE;if(n===Zn)return e.UNSIGNED_SHORT_4_4_4_4;if(n===er)return e.UNSIGNED_SHORT_5_5_5_1;if(n===nr)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Gn)return e.BYTE;if(n===qn)return e.SHORT;if(n===Wn)return e.UNSIGNED_SHORT;if(n===$n)return e.INT;if(n===Xn)return e.UNSIGNED_INT;if(n===Yn)return e.FLOAT;if(n===Jn)return e.HALF_FLOAT;if(n===rr)return e.ALPHA;if(n===sr)return e.RGB;if(n===ir)return e.RGBA;if(n===ar)return e.DEPTH_COMPONENT;if(n===or)return e.DEPTH_STENCIL;if(n===lr)return e.RED;if(n===cr)return e.RED_INTEGER;if(n===ur)return e.RG;if(n===dr)return e.RG_INTEGER;if(n===mr)return e.RGBA_INTEGER;if(n===Ar||n===gr||n===pr||n===fr)if(i===ps){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Ar)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===gr)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===pr)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===fr)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Ar)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===gr)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===pr)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===fr)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===xr||n===vr||n===yr||n===br){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===xr)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===vr)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===yr)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===br)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===wr||n===Nr||n===jr){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===wr||n===Nr)return i===ps?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===jr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Cr||n===Tr||n===Sr||n===_r||n===Er||n===Br||n===Mr||n===kr||n===Lr||n===Ir||n===Dr||n===Pr||n===Fr||n===Ur){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Cr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Tr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Sr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_r)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Er)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Br)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Mr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===kr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Lr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ir)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Dr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Pr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Fr)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ur)return i===ps?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Rr||n===Or||n===Hr){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Rr)return i===ps?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Or)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Hr)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Qr||n===zr||n===Vr||n===Kr){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===Rr)return r.COMPRESSED_RED_RGTC1_EXT;if(n===zr)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Vr)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Kr)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===tr?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Tf{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new Fi;e.properties.get(r).__webglTexture=t.texture,t.depthNear===n.depthNear&&t.depthFar===n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new ul({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new rl(new Ud(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Sf extends ri{constructor(e,t){super();const n=this;let r=null,s=1,i=null,a="local-floor",o=1,l=null,c=null,u=null,d=null,h=null,m=null;const A=new Tf,g=t.getContextAttributes();let p=null,f=null;const x=[],v=[],y=new gi;let b=null;const w=new gl;w.viewport=new Ui;const N=new gl;N.viewport=new Ui;const j=[w,N],C=new wm;let T=null,S=null;function _(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||i),n.dispatchEvent({type:e.type,data:e.inputSource}))}function E(){r.removeEventListener("select",_),r.removeEventListener("selectstart",_),r.removeEventListener("selectend",_),r.removeEventListener("squeeze",_),r.removeEventListener("squeezestart",_),r.removeEventListener("squeezeend",_),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",B);for(let e=0;e<x.length;e++){const t=v[e];null!==t&&(v[e]=null,x[e].disconnect(t))}T=null,S=null,A.reset(),e.setRenderTarget(p),h=null,d=null,u=null,r=null,f=null,D.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(y.width,y.height,!1),n.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const s=x[r];s&&s.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new wl,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new wl,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new wl,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||i},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){p=e.getRenderTarget(),r.addEventListener("select",_),r.addEventListener("selectstart",_),r.addEventListener("selectend",_),r.addEventListener("squeeze",_),r.addEventListener("squeezestart",_),r.addEventListener("squeezeend",_),r.addEventListener("end",E),r.addEventListener("inputsourceschange",B),!0!==g.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(y);if("undefined"!==typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,i=null,a=null;g.depth&&(a=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=g.stencil?or:ar,i=g.stencil?tr:Xn);const o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(o),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),f=new Oi(d.textureWidth,d.textureHeight,{format:ir,type:Kn,depthTexture:new bu(d.textureWidth,d.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}else{const n={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),f=new Oi(h.framebufferWidth,h.framebufferHeight,{format:ir,type:Kn,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}f.isXRRenderTarget=!0,this.setFoveation(o),l=null,i=await r.requestReferenceSpace(a),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};const M=new Gi,k=new Gi;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==A.texture&&(A.depthNear>0&&(t=A.depthNear),A.depthFar>0&&(n=A.depthFar)),C.near=N.near=w.near=t,C.far=N.far=w.far=n,T===C.near&&S===C.far||(r.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,S=C.far),w.layers.mask=2|e.layers.mask,N.layers.mask=4|e.layers.mask,C.layers.mask=w.layers.mask|N.layers.mask;const s=e.parent,i=C.cameras;L(C,s);for(let r=0;r<i.length;r++)L(i[r],s);2===i.length?function(e,t,n){M.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=M.distanceTo(k),s=t.projectionMatrix.elements,i=n.projectionMatrix.elements,a=s[14]/(s[10]-1),o=s[14]/(s[10]+1),l=(s[9]+1)/s[5],c=(s[9]-1)/s[5],u=(s[8]-1)/s[0],d=(i[8]+1)/i[0],h=a*u,m=a*d,A=r/(-u+d),g=A*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(g),e.translateZ(A),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===s[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+A,n=o+A,s=h-g,i=m+(r-g),u=l*o/n*t,d=c*o/n*t;e.projectionMatrix.makePerspective(s,i,u,d,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,w,N):C.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*oi*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,s)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==d||null!==h)return o},this.setFoveation=function(e){o=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==A.texture},this.getDepthSensingMesh=function(){return A.getMesh(C)};let I=null;const D=new $A;D.setAnimationLoop((function(t,s){if(c=s.getViewerPose(l||i),m=s,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(f,h.framebuffer),e.setRenderTarget(f));let n=!1;t.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const s=t[r];let i=null;if(null!==h)i=h.getViewport(s);else{const t=u.getViewSubImage(d,s);i=t.viewport,0===r&&(e.setRenderTargetTextures(f,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(f))}let a=j[r];void 0===a&&(a=new gl,a.layers.enable(r),a.viewport=new Ui,j[r]=a),a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(s.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(i.x,i.y,i.width,i.height),0===r&&(C.matrix.copy(a.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===n&&C.cameras.push(a)}const s=r.enabledFeatures;if(s&&s.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&u){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&A.init(e,n,r.renderState)}}for(let e=0;e<x.length;e++){const t=v[e],n=x[e];null!==t&&void 0!==n&&n.update(t,s,l||i)}I&&I(t,s),s.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:s}),m=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}const _f=new ka,Ef=new wa;function Bf(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===Bt&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===Bt&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const s=t.get(r),i=s.envMap,a=s.envMapRotation;i&&(e.envMap.value=i,_f.copy(a),_f.x*=-1,_f.y*=-1,_f.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(_f.y*=-1,_f.z*=-1),e.envMapRotation.value.setFromMatrix4(Ef.makeRotationFromEuler(_f)),e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,ll(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,s,i,a,o){s.isMeshBasicMaterial||s.isMeshLambertMaterial?r(e,s):s.isMeshToonMaterial?(r(e,s),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,s)):s.isMeshPhongMaterial?(r(e,s),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,s)):s.isMeshStandardMaterial?(r(e,s),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,s),s.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Bt&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,s,o)):s.isMeshMatcapMaterial?(r(e,s),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,s)):s.isMeshDepthMaterial?r(e,s):s.isMeshDistanceMaterial?(r(e,s),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,s)):s.isMeshNormalMaterial?r(e,s):s.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,s),s.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,s)):s.isPointsMaterial?function(e,t,r,s){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*s,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s,i,a):s.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,s):s.isShadowMaterial?(e.color.value.copy(s.color),e.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}}}function Mf(e,t,n,r){let s={},i={},a=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const s=e.value,i=t+"_"+n;if(void 0===r[i])return r[i]="number"===typeof s||"boolean"===typeof s?s:s.clone(),!0;{const e=r[i];if("number"===typeof s||"boolean"===typeof s){if(e!==s)return r[i]=s,!0}else if(!1===e.equals(s))return e.copy(s),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(s[n.id]),delete s[n.id],delete i[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=s[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let i=0,a=t.length;i<a;i++){const e=Array.isArray(t[i])?t[i]:[t[i]];for(let t=0,s=e.length;t<s;t++){const s=e[t],i=Array.isArray(s.value)?s.value:[s.value];for(let e=0,t=i.length;e<t;e++){const t=c(i[e]),a=n%r,o=a%t.boundary,l=a+o;n+=o,0!==l&&r-l<t.storage&&(n+=r-l),s.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,n+=t.storage}}}const s=n%r;s>0&&(n+=r-s);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),s=t.__size,i=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,s,i),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),s[n.id]=h,n.addEventListener("dispose",u));const m=d.program;r.updateUBOMapping(n,m);const A=t.render.frame;i[n.id]!==A&&(!function(t){const n=s[t.id],r=t.uniforms,i=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let s=0,a=r.length;s<a;s++){const t=Array.isArray(r[s])?r[s]:[r[s]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,s,n,i)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let s=0;for(let i=0;i<n.length;i++){const a=n[i],o=c(a);"number"===typeof a||"boolean"===typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+s,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,s),s+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),i[n.id]=A)},dispose:function(){for(const t in s)e.deleteBuffer(s[t]);a=[],s={},i={}}}}class kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=wi(),context:n=null,depth:r=!0,stencil:s=!1,alpha:i=!1,antialias:a=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:d=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=i;const m=new Uint32Array(4),A=new Int32Array(4);let g=null,p=null;const f=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=pn,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const v=this;let y=!1;this._outputColorSpace=ms;let b=0,w=0,N=null,j=-1,C=null;const T=new Ui,S=new Ui;let _=null;const E=new go(0);let B=0,M=t.width,k=t.height,L=1,I=null,D=null;const P=new Ui(0,0,M,k),F=new Ui(0,0,M,k);let U=!1;const R=new jc;let O=!1,H=!1;const Q=new wa,z=new wa,V=new Gi,K=new Ui,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let q=!1;function W(){return null===N?L:1}let $,X,Y,J,Z,ee,te,ne,re,se,ie,ae,oe,le,ce,ue,de,he,me,Ae,ge,pe,fe,xe,ve=n;function ye(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${xt}`),t.addEventListener("webglcontextlost",Ne,!1),t.addEventListener("webglcontextrestored",je,!1),t.addEventListener("webglcontextcreationerror",Ce,!1),null===ve){const t="webgl2";if(ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}function be(){$=new _g(ve),$.init(),pe=new Cf(ve,$),X=new ag(ve,$,e,pe),Y=new Nf(ve,$),X.reverseDepthBuffer&&d&&Y.buffers.depth.setReversed(!0),J=new Mg(ve),Z=new uf,ee=new jf(ve,$,Y,Z,X,pe,J),te=new lg(v),ne=new Sg(v),re=new XA(ve),fe=new sg(ve,re),se=new Eg(ve,re,J,fe),ie=new Lg(ve,se,re,J),me=new kg(ve,X,ee),ue=new og(Z),ae=new cf(v,te,ne,$,X,fe,ue),oe=new Bf(v,Z),le=new Af,ce=new yf($),he=new rg(v,te,ne,Y,ie,h,o),de=new bf(v,ie,X),xe=new Mf(ve,J,X,Y),Ae=new ig(ve,$,J),ge=new Bg(ve,$,J),J.programs=ae.programs,v.capabilities=X,v.extensions=$,v.properties=Z,v.renderLists=le,v.shadowMap=de,v.state=Y,v.info=J}be();const we=new Sf(v,ve);function Ne(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=J.autoReset,t=de.enabled,n=de.autoUpdate,r=de.needsUpdate,s=de.type;be(),J.autoReset=e,de.enabled=t,de.autoUpdate=n,de.needsUpdate=r,de.type=s}function Ce(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Te(e){const t=e.target;t.removeEventListener("dispose",Te),function(e){(function(e){const t=Z.get(e).programs;void 0!==t&&(t.forEach((function(e){ae.releaseProgram(e)})),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),Z.remove(e)}(t)}function Se(e,t,n){!0===e.transparent&&e.side===Mt&&!1===e.forceSinglePass?(e.side=Bt,e.needsUpdate=!0,Fe(e,t,n),e.side=Et,e.needsUpdate=!0,Fe(e,t,n),e.side=Mt):Fe(e,t,n)}this.xr=we,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(e){void 0!==e&&(L=e,this.setSize(M,k,!1))},this.getSize=function(e){return e.set(M,k)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,k=n,t.width=Math.floor(e*L),t.height=Math.floor(n*L),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(M*L,k*L).floor()},this.setDrawingBufferSize=function(e,n,r){M=e,k=n,L=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),Y.viewport(T.copy(P).multiplyScalar(L).round())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),Y.scissor(S.copy(F).multiplyScalar(L).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(e){Y.setScissorTest(U=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor(...arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha(...arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==N){const t=N.texture.format;e=t===mr||t===dr||t===cr}if(e){const e=N.texture.type,t=e===Kn||e===Xn||e===Wn||e===tr||e===Zn||e===er,n=he.getClearColor(),r=he.getClearAlpha(),s=n.r,i=n.g,a=n.b;t?(m[0]=s,m[1]=i,m[2]=a,m[3]=r,ve.clearBufferuiv(ve.COLOR,0,m)):(A[0]=s,A[1]=i,A[2]=a,A[3]=r,ve.clearBufferiv(ve.COLOR,0,A))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ne,!1),t.removeEventListener("webglcontextrestored",je,!1),t.removeEventListener("webglcontextcreationerror",Ce,!1),he.dispose(),le.dispose(),ce.dispose(),Z.dispose(),te.dispose(),ne.dispose(),ie.dispose(),fe.dispose(),xe.dispose(),ae.dispose(),we.dispose(),we.removeEventListener("sessionstart",Ee),we.removeEventListener("sessionend",Be),Me.stop()},this.renderBufferDirect=function(e,t,n,r,s,i){null===t&&(t=G);const a=s.isMesh&&s.matrixWorld.determinant()<0,o=function(e,t,n,r,s){!0!==t.isScene&&(t=G);ee.resetTextureUnits();const i=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===N?v.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:As,l=(r.isMeshStandardMaterial?ne:te).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,m=!!n.morphAttributes.color;let A=pn;r.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(A=v.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,f=void 0!==g?g.length:0,x=Z.get(r),y=p.state.lights;if(!0===O&&(!0===H||e!==C)){const t=e===C&&r.id===j;ue.setState(r,e,t)}let b=!1;r.version===x.__version?x.needsLights&&x.lightsStateVersion!==y.state.version||x.outputColorSpace!==o||s.isBatchedMesh&&!1===x.batching?b=!0:s.isBatchedMesh||!0!==x.batching?s.isBatchedMesh&&!0===x.batchingColor&&null===s.colorTexture||s.isBatchedMesh&&!1===x.batchingColor&&null!==s.colorTexture||s.isInstancedMesh&&!1===x.instancing?b=!0:s.isInstancedMesh||!0!==x.instancing?s.isSkinnedMesh&&!1===x.skinning?b=!0:s.isSkinnedMesh||!0!==x.skinning?s.isInstancedMesh&&!0===x.instancingColor&&null===s.instanceColor||s.isInstancedMesh&&!1===x.instancingColor&&null!==s.instanceColor||s.isInstancedMesh&&!0===x.instancingMorph&&null===s.morphTexture||s.isInstancedMesh&&!1===x.instancingMorph&&null!==s.morphTexture||x.envMap!==l||!0===r.fog&&x.fog!==i?b=!0:void 0===x.numClippingPlanes||x.numClippingPlanes===ue.numPlanes&&x.numIntersection===ue.numIntersection?(x.vertexAlphas!==c||x.vertexTangents!==u||x.morphTargets!==d||x.morphNormals!==h||x.morphColors!==m||x.toneMapping!==A||x.morphTargetsCount!==f)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,x.__version=r.version);let w=x.currentProgram;!0===b&&(w=Fe(r,t,s));let T=!1,S=!1,_=!1;const E=w.getUniforms(),B=x.uniforms;Y.useProgram(w.program)&&(T=!0,S=!0,_=!0);r.id!==j&&(j=r.id,S=!0);if(T||C!==e){Y.buffers.depth.getReversed()?(Q.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(Q),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(Q),E.setValue(ve,"projectionMatrix",Q)):E.setValue(ve,"projectionMatrix",e.projectionMatrix),E.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=E.map.cameraPosition;void 0!==t&&t.setValue(ve,V.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&E.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&E.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,S=!0,_=!0)}if(s.isSkinnedMesh){E.setOptional(ve,s,"bindMatrix"),E.setOptional(ve,s,"bindMatrixInverse");const e=s.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),E.setValue(ve,"boneTexture",e.boneTexture,ee))}s.isBatchedMesh&&(E.setOptional(ve,s,"batchingTexture"),E.setValue(ve,"batchingTexture",s._matricesTexture,ee),E.setOptional(ve,s,"batchingIdTexture"),E.setValue(ve,"batchingIdTexture",s._indirectTexture,ee),E.setOptional(ve,s,"batchingColorTexture"),null!==s._colorsTexture&&E.setValue(ve,"batchingColorTexture",s._colorsTexture,ee));const M=n.morphAttributes;void 0===M.position&&void 0===M.normal&&void 0===M.color||me.update(s,n,w);(S||x.receiveShadow!==s.receiveShadow)&&(x.receiveShadow=s.receiveShadow,E.setValue(ve,"receiveShadow",s.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(B.envMap.value=l,B.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(B.envMapIntensity.value=t.environmentIntensity);S&&(E.setValue(ve,"toneMappingExposure",v.toneMappingExposure),x.needsLights&&(D=_,(I=B).ambientLightColor.needsUpdate=D,I.lightProbe.needsUpdate=D,I.directionalLights.needsUpdate=D,I.directionalLightShadows.needsUpdate=D,I.pointLights.needsUpdate=D,I.pointLightShadows.needsUpdate=D,I.spotLights.needsUpdate=D,I.spotLightShadows.needsUpdate=D,I.rectAreaLights.needsUpdate=D,I.hemisphereLights.needsUpdate=D),i&&!0===r.fog&&oe.refreshFogUniforms(B,i),oe.refreshMaterialUniforms(B,r,L,k,p.state.transmissionRenderTarget[e.id]),Up.upload(ve,Ue(x),B,ee));var I,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Up.upload(ve,Ue(x),B,ee),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&E.setValue(ve,"center",s.center);if(E.setValue(ve,"modelViewMatrix",s.modelViewMatrix),E.setValue(ve,"normalMatrix",s.normalMatrix),E.setValue(ve,"modelMatrix",s.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];xe.update(n,w),xe.bind(n,w)}}return w}(e,t,n,r,s);Y.setMaterial(r,a);let l=n.index,c=1;if(!0===r.wireframe){if(l=se.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,m=(u.start+u.count)*c;null!==i&&(h=Math.max(h,i.start*c),m=Math.min(m,(i.start+i.count)*c)),null!==l?(h=Math.max(h,0),m=Math.min(m,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),m=Math.min(m,d.count));const A=m-h;if(A<0||A===1/0)return;let g;fe.setup(s,r,o,n,l);let f=Ae;if(null!==l&&(g=re.get(l),f=ge,f.setIndex(g)),s.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*W()),f.setMode(ve.LINES)):f.setMode(ve.TRIANGLES);else if(s.isLine){let e=r.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*W()),s.isLineSegments?f.setMode(ve.LINES):s.isLineLoop?f.setMode(ve.LINE_LOOP):f.setMode(ve.LINE_STRIP)}else s.isPoints?f.setMode(ve.POINTS):s.isSprite&&f.setMode(ve.TRIANGLES);if(s.isBatchedMesh)if(null!==s._multiDrawInstances)ji("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),f.renderMultiDrawInstances(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount,s._multiDrawInstances);else if($.get("WEBGL_multi_draw"))f.renderMultiDraw(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount);else{const e=s._multiDrawStarts,t=s._multiDrawCounts,n=s._multiDrawCount,i=l?re.get(l).bytesPerElement:1,a=Z.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)a.setValue(ve,"_gl_DrawID",r),f.render(e[r]/i,t[r])}else if(s.isInstancedMesh)f.renderInstances(h,A,s.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);f.renderInstances(h,A,t)}else f.render(h,A)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),p=ce.get(n),p.init(t),x.push(p),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights();const r=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let s=0;s<t.length;s++){const i=t[s];Se(i,n,e),r.add(i)}else Se(t,n,e),r.add(t)})),p=x.pop(),r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){Z.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==$.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let _e=null;function Ee(){Me.stop()}function Be(){Me.start()}const Me=new $A;function ke(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){r&&K.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=ie.update(e),s=e.material;s.visible&&g.push(e,t,s,n,K.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||R.intersectsObject(e))){const t=ie.update(e),s=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),K.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),K.copy(t.boundingSphere.center)),K.applyMatrix4(e.matrixWorld).applyMatrix4(z)),Array.isArray(s)){const r=t.groups;for(let i=0,a=r.length;i<a;i++){const a=r[i],o=s[a.materialIndex];o&&o.visible&&g.push(e,t,o,n,K.z,a)}}else s.visible&&g.push(e,t,s,n,K.z,null)}const s=e.children;for(let i=0,a=s.length;i<a;i++)ke(s[i],t,n,r)}function Le(e,t,n,r){const s=e.opaque,i=e.transmissive,a=e.transparent;p.setupLightsView(n),!0===O&&ue.setGlobalState(v.clippingPlanes,n),r&&Y.viewport(T.copy(r)),s.length>0&&De(s,t,n),i.length>0&&De(i,t,n),a.length>0&&De(a,t,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Ie(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===p.state.transmissionRenderTarget[r.id]&&(p.state.transmissionRenderTarget[r.id]=new Oi(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")||$.has("EXT_color_buffer_float")?Jn:Kn,minFilter:zn,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:_i.workingColorSpace}));const i=p.state.transmissionRenderTarget[r.id],a=r.viewport||T;i.setSize(a.z*v.transmissionResolutionScale,a.w*v.transmissionResolutionScale);const o=v.getRenderTarget();v.setRenderTarget(i),v.getClearColor(E),B=v.getClearAlpha(),B<1&&v.setClearColor(16777215,.5),v.clear(),q&&he.render(n);const l=v.toneMapping;v.toneMapping=pn;const c=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),p.setupLightsView(r),!0===O&&ue.setGlobalState(v.clippingPlanes,r),De(e,n,r),ee.updateMultisampleRenderTarget(i),ee.updateRenderTargetMipmap(i),!1===$.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let s=0,i=t.length;s<i;s++){const i=t[s],a=i.object,o=i.geometry,l=i.material,c=i.group;if(l.side===Mt&&a.layers.test(r.layers)){const t=l.side;l.side=Bt,l.needsUpdate=!0,Pe(a,n,r,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(i),ee.updateRenderTargetMipmap(i))}v.setRenderTarget(o),v.setClearColor(E,B),void 0!==c&&(r.viewport=c),v.toneMapping=l}function De(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let s=0,i=e.length;s<i;s++){const i=e[s],a=i.object,o=i.geometry,l=i.group;let c=i.material;!0===c.allowOverride&&null!==r&&(c=r),a.layers.test(n.layers)&&Pe(a,t,n,o,c,l)}}function Pe(e,t,n,r,s,i){e.onBeforeRender(v,t,n,r,s,i),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(v,t,n,r,e,i),!0===s.transparent&&s.side===Mt&&!1===s.forceSinglePass?(s.side=Bt,s.needsUpdate=!0,v.renderBufferDirect(n,t,r,s,e,i),s.side=Et,s.needsUpdate=!0,v.renderBufferDirect(n,t,r,s,e,i),s.side=Mt):v.renderBufferDirect(n,t,r,s,e,i),e.onAfterRender(v,t,n,r,s,i)}function Fe(e,t,n){!0!==t.isScene&&(t=G);const r=Z.get(e),s=p.state.lights,i=p.state.shadowsArray,a=s.state.version,o=ae.getParameters(e,s.state,i,t,n),l=ae.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ne:te).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Te),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Re(e,o),u}else o.uniforms=ae.getUniforms(e),e.onBeforeCompile(o,v),u=ae.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=ue.uniform),Re(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=s.state.ambient,d.lightProbe.value=s.state.probe,d.directionalLights.value=s.state.directional,d.directionalLightShadows.value=s.state.directionalShadow,d.spotLights.value=s.state.spot,d.spotLightShadows.value=s.state.spotShadow,d.rectAreaLights.value=s.state.rectArea,d.ltc_1.value=s.state.rectAreaLTC1,d.ltc_2.value=s.state.rectAreaLTC2,d.pointLights.value=s.state.point,d.pointLightShadows.value=s.state.pointShadow,d.hemisphereLights.value=s.state.hemi,d.directionalShadowMap.value=s.state.directionalShadowMap,d.directionalShadowMatrix.value=s.state.directionalShadowMatrix,d.spotShadowMap.value=s.state.spotShadowMap,d.spotLightMatrix.value=s.state.spotLightMatrix,d.spotLightMap.value=s.state.spotLightMap,d.pointShadowMap.value=s.state.pointShadowMap,d.pointShadowMatrix.value=s.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Ue(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Up.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Re(e,t){const n=Z.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Me.setAnimationLoop((function(e){_e&&_e(e)})),"undefined"!==typeof self&&Me.setContext(self),this.setAnimationLoop=function(e){_e=e,we.setAnimationLoop(e),null===e?Me.stop():Me.start()},we.addEventListener("sessionstart",Ee),we.addEventListener("sessionend",Be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,N),p=ce.get(e,x.length),p.init(t),x.push(p),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(z),H=this.localClippingEnabled,O=ue.init(this.clippingPlanes,H),g=le.get(e,f.length),g.init(),f.push(g),!0===we.enabled&&!0===we.isPresenting){const e=v.xr.getDepthSensingMesh();null!==e&&ke(e,t,-1/0,v.sortObjects)}ke(e,t,0,v.sortObjects),g.finish(),!0===v.sortObjects&&g.sort(I,D),q=!1===we.enabled||!1===we.isPresenting||!1===we.hasDepthSensing(),q&&he.addToRenderList(g,e),this.info.render.frame++,!0===O&&ue.beginShadows();const n=p.state.shadowsArray;de.render(n,e,t),!0===O&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=g.opaque,s=g.transmissive;if(p.setupLights(),t.isArrayCamera){const n=t.cameras;if(s.length>0)for(let t=0,i=n.length;t<i;t++){Ie(r,s,e,n[t])}q&&he.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Le(g,e,r,r.viewport)}}else s.length>0&&Ie(r,s,e,t),q&&he.render(e),Le(g,e,t);null!==N&&0===w&&(ee.updateMultisampleRenderTarget(N),ee.updateRenderTargetMipmap(N)),!0===e.isScene&&e.onAfterRender(v,e,t),fe.resetDefaultState(),j=-1,C=null,x.pop(),x.length>0?(p=x[x.length-1],!0===O&&ue.setGlobalState(v.clippingPlanes,p.state.camera)):p=null,f.pop(),g=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(e,t,n){const r=Z.get(e);r.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===r.__autoAllocateDepthBuffer&&(r.__useRenderToTexture=!1),Z.get(e.texture).__webglTexture=t,Z.get(e.depthTexture).__webglTexture=r.__autoAllocateDepthBuffer?void 0:n,r.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=Z.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Oe=ve.createFramebuffer();this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;N=e,b=t,w=n;let r=!0,s=null,i=!1,a=!1;if(e){const o=Z.get(e);if(void 0!==o.__useDefaultFramebuffer)Y.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1;else if(void 0===o.__webglFramebuffer)ee.setupRenderTarget(e);else if(o.__hasExternalTextures)ee.rebindTextures(e,Z.get(e.texture).__webglTexture,Z.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&Z.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=Z.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=Array.isArray(c[t])?c[t][n]:c[t],i=!0):s=e.samples>0&&!1===ee.useMultisampledRTT(e)?Z.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,T.copy(e.viewport),S.copy(e.scissor),_=e.scissorTest}else T.copy(P).multiplyScalar(L).floor(),S.copy(F).multiplyScalar(L).floor(),_=U;0!==n&&(s=Oe);if(Y.bindFramebuffer(ve.FRAMEBUFFER,s)&&r&&Y.drawBuffers(e,s),Y.viewport(T),Y.scissor(S),Y.setScissorTest(_),i){const r=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=Z.get(e.texture),s=t;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n,s)}else if(null!==e&&0!==n){const t=Z.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,t.__webglTexture,n)}j=-1},this.readRenderTargetPixels=function(e,t,n,r,s,i,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){Y.bindFramebuffer(ve.FRAMEBUFFER,o);try{const a=e.texture,o=a.format,l=a.type;if(!X.textureFormatReadable(o))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-s&&ve.readPixels(t,n,r,s,pe.convert(o),pe.convert(l),i)}finally{const e=null!==N?Z.get(N).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,s,i,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Z.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-s){Y.bindFramebuffer(ve.FRAMEBUFFER,o);const a=e.texture,l=a.format,c=a.type;if(!X.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const u=ve.createBuffer();ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.bufferData(ve.PIXEL_PACK_BUFFER,i.byteLength,ve.STREAM_READ),ve.readPixels(t,n,r,s,pe.convert(l),pe.convert(c),0);const d=null!==N?Z.get(N).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,d);const h=ve.fenceSync(ve.SYNC_GPU_COMMANDS_COMPLETE,0);return ve.flush(),await function(e,t,n){return new Promise((function(r,s){setTimeout((function i(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:s();break;case e.TIMEOUT_EXPIRED:setTimeout(i,n);break;default:r()}}),n)}))}(ve,h,4),ve.bindBuffer(ve.PIXEL_PACK_BUFFER,u),ve.getBufferSubData(ve.PIXEL_PACK_BUFFER,0,i),ve.deleteBuffer(u),ve.deleteSync(h),i}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),s=Math.floor(e.image.width*r),i=Math.floor(e.image.height*r),a=null!==t?t.x:0,o=null!==t?t.y:0;ee.setTexture2D(e,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,a,o,s,i),Y.unbindTexture()};const He=ve.createFramebuffer(),Qe=ve.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,r,s,i,a,o,l,c,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;null===A&&(0!==m?(ji("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),A=m,m=0):A=0);const g=e.isCompressedTexture?e.mipmaps[A]:e.image;if(null!==d)n=d.max.x-d.min.x,r=d.max.y-d.min.y,s=d.isBox3?d.max.z-d.min.z:1,i=d.min.x,a=d.min.y,o=d.isBox3?d.min.z:0;else{const t=Math.pow(2,-m);n=Math.floor(g.width*t),r=Math.floor(g.height*t),s=e.isDataArrayTexture?g.depth:e.isData3DTexture?Math.floor(g.depth*t):1,i=0,a=0,o=0}null!==h?(l=h.x,c=h.y,u=h.z):(l=0,c=0,u=0);const p=pe.convert(t.format),f=pe.convert(t.type);let x;t.isData3DTexture?(ee.setTexture3D(t,0),x=ve.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),x=ve.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),x=ve.TEXTURE_2D),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const v=ve.getParameter(ve.UNPACK_ROW_LENGTH),y=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),b=ve.getParameter(ve.UNPACK_SKIP_PIXELS),w=ve.getParameter(ve.UNPACK_SKIP_ROWS),N=ve.getParameter(ve.UNPACK_SKIP_IMAGES);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,i),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,a),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,o);const j=e.isDataArrayTexture||e.isData3DTexture,C=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const d=Z.get(e),h=Z.get(t),g=Z.get(d.__renderTarget),p=Z.get(h.__renderTarget);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,g.__webglFramebuffer),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,p.__webglFramebuffer);for(let f=0;f<s;f++)j&&(ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,Z.get(e).__webglTexture,m,o+f),ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,Z.get(t).__webglTexture,A,u+f)),ve.blitFramebuffer(i,a,n,r,l,c,n,r,ve.DEPTH_BUFFER_BIT,ve.NEAREST);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,null),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else if(0!==m||e.isRenderTargetTexture||Z.has(e)){const d=Z.get(e),h=Z.get(t);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,He),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,Qe);for(let e=0;e<s;e++)j?ve.framebufferTextureLayer(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,d.__webglTexture,m,o+e):ve.framebufferTexture2D(ve.READ_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,d.__webglTexture,m),C?ve.framebufferTextureLayer(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,h.__webglTexture,A,u+e):ve.framebufferTexture2D(ve.DRAW_FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,h.__webglTexture,A),0!==m?ve.blitFramebuffer(i,a,n,r,l,c,n,r,ve.COLOR_BUFFER_BIT,ve.NEAREST):C?ve.copyTexSubImage3D(x,A,l,c,u+e,i,a,n,r):ve.copyTexSubImage2D(x,A,l,c,i,a,n,r);Y.bindFramebuffer(ve.READ_FRAMEBUFFER,null),Y.bindFramebuffer(ve.DRAW_FRAMEBUFFER,null)}else C?e.isDataTexture||e.isData3DTexture?ve.texSubImage3D(x,A,l,c,u,n,r,s,p,f,g.data):t.isCompressedArrayTexture?ve.compressedTexSubImage3D(x,A,l,c,u,n,r,s,p,g.data):ve.texSubImage3D(x,A,l,c,u,n,r,s,p,f,g):e.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,A,l,c,n,r,p,f,g.data):e.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,A,l,c,g.width,g.height,p,g.data):ve.texSubImage2D(ve.TEXTURE_2D,A,l,c,n,r,p,f,g);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,v),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,y),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,b),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,w),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,N),0===A&&t.generateMipmaps&&ve.generateMipmap(x),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return ji('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,s)},this.initRenderTarget=function(e){void 0===Z.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){b=0,w=0,N=null,Y.reset(),fe.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Js}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=_i._getDrawingBufferColorSpace(e),t.unpackColorSpace=_i._getUnpackColorSpace()}}var Lf=n(878),If=n(44);const Df=e=>{let t;const n=new Set,r=(e,r)=>{const s="function"===typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!==typeof s||null===s)?s:Object.assign({},t,s),n.forEach((n=>n(t,e)))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,s,i);return i},{useSyncExternalStoreWithSelector:Pf}=If,Ff=e=>e;const Uf=(e,n)=>{const r=(e=>e?Df(e):Df)(e),s=function(e){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ff,r=arguments.length>2?arguments[2]:void 0;const s=Pf(e.subscribe,e.getState,e.getInitialState,n,r);return t.useDebugValue(s),s}(r,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:n)};return Object.assign(s,r),s};var Rf=n(235),Of=n.n(Rf),Hf=n(340);const Qf=[];function zf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let s=0;s<r;s++)if(!n(e[s],t[s]))return!1;return!0}function Vf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const a of Qf)if(zf(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const s={keys:t,equal:r.equal,remove:()=>{const e=Qf.indexOf(s);-1!==e&&Qf.splice(e,1)},promise:(i=e,"object"===typeof i&&"function"===typeof i.then?e:e(...t)).then((e=>{s.response=e,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))})).catch((e=>s.error=e))};var i;if(Qf.push(s),!n)throw s.promise}(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product))})()?t.useLayoutEffect:t.useEffect;function Kf(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=Kf(r,t,n);if(e)return e;r=t?null:r.sibling}}function Gf(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const qf=Gf(t.createContext(null));class Wf extends t.Component{render(){return t.createElement(qf.Provider,{value:this._reactInternals},this.props.children)}}function $f(){const e=t.useContext(qf);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo((()=>{for(const t of[e,null==e?void 0:e.alternate]){if(!t)continue;const e=Kf(t,!1,(e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(e)return e}}),[e,n])}const Xf=Symbol.for("react.context"),Yf=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===Xf;function Jf(){const e=function(){const e=$f(),[n]=t.useState((()=>new Map));n.clear();let r=e;for(;r;){const e=r.type;Yf(e)&&e!==qf&&!n.has(e)&&n.set(e,t.use(Gf(e))),r=r.return}return n}();return t.useMemo((()=>Array.from(e.keys()).reduce(((n,r)=>s=>t.createElement(n,null,t.createElement(r.Provider,{...s,value:e.get(r)}))),(e=>t.createElement(Wf,{...e})))),[e])}function Zf(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}r.act;const ex=e=>e&&e.isOrthographicCamera,tx=e=>null!=e&&("string"===typeof e||"number"===typeof e||e.isColor),nx=((e,t)=>"undefined"!==typeof window&&((null==(e=window.document)?void 0:e.createElement)||"ReactNative"===(null==(t=window.navigator)?void 0:t.product)))()?t.useLayoutEffect:t.useEffect;function rx(e){const n=t.useRef(e);return nx((()=>{n.current=e}),[e]),n}function sx(e){let{set:t}=e;return nx((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}const ix=(e=>((e=class extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function ax(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function ox(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}const lx={obj:e=>e===Object(e)&&!lx.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:r="reference",strict:s=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(lx.str(e)||lx.num(e)||lx.boo(e))return e===t;const i=lx.obj(e);if(i&&"reference"===r)return e===t;const a=lx.arr(e);if(a&&"reference"===n)return e===t;if((a||i)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(i&&"shallow"===n&&"shallow"===r){for(o in s?t:e)if(!lx.equ(e[o],t[o],{strict:s,objects:"reference"}))return!1}else for(o in s?t:e)if(e[o]!==t[o])return!1;if(lx.und(o)){if(a&&0===e.length&&0===t.length)return!0;if(i&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function cx(e){const t={nodes:{},materials:{},meshes:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)})),t}const ux=["children","key","ref"];function dx(e){const t={};for(const n in e)ux.includes(n)||(t[n]=e[n]);return t}function hx(e,t,n,r){const s=e;let i=null==s?void 0:s.__r3f;return i||(i={root:t,type:n,parent:null,children:[],props:dx(r),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=i)),i}function mx(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};n=e;for(const s of t.split("-")){var r;t=s,e=n,n=null==(r=n)?void 0:r[t]}return{root:e,key:t,target:n}}const Ax=/-\d+$/;function gx(e,t){if(lx.str(t.props.attach)){if(Ax.test(t.props.attach)){const n=t.props.attach.replace(Ax,""),{root:r,key:s}=mx(e.object,n);Array.isArray(r[s])||(r[s]=[])}const{root:n,key:r}=mx(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else lx.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function px(e,t){if(lx.str(t.props.attach)){const{root:n,key:r}=mx(e.object,t.props.attach),s=t.previousAttach;void 0===s?delete n[r]:n[r]=s}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}const fx=[...ux,"args","dispose","attach","object","onUpdate","dispose"],xx=new Map;function vx(e){let t=xx.get(e.constructor);try{t||(t=new e.constructor,xx.set(e.constructor,t))}catch(DP){}return t}const yx=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],bx=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function wx(e,t){var n;const r=e.__r3f,s=r&&Zf(r).getState(),i=null==r?void 0:r.eventCount;for(const o in t){let n=t[o];if(fx.includes(o))continue;if(r&&bx.test(o)){"function"===typeof n?r.handlers[o]=n:delete r.handlers[o],r.eventCount=Object.keys(r.handlers).length;continue}if(void 0===n)continue;let{root:i,key:l,target:c}=mx(e,o);if(c instanceof La&&n instanceof La)c.mask=n.mask;else if(c instanceof go&&tx(n))c.set(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"function"===typeof c.copy&&null!=n&&n.constructor&&c.constructor===n.constructor)c.copy(n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&Array.isArray(n))"function"===typeof c.fromArray?c.fromArray(n):c.set(...n);else if(null!==c&&"object"===typeof c&&"function"===typeof c.set&&"number"===typeof n)"function"===typeof c.setScalar?c.setScalar(n):c.set(n);else{var a;i[l]=n,s&&!s.linear&&yx.includes(l)&&null!=(a=i[l])&&a.isTexture&&i[l].format===ir&&i[l].type===Kn&&(i[l].colorSpace=ms)}}if(null!=r&&r.parent&&null!=s&&s.internal&&null!=(n=r.object)&&n.isObject3D&&i!==r.eventCount){const e=r.object,t=s.internal.interaction.indexOf(e);t>-1&&s.internal.interaction.splice(t,1),r.eventCount&&null!==e.raycast&&s.internal.interaction.push(e)}return r&&void 0===r.props.attach&&(r.object.isBufferGeometry?r.props.attach="geometry":r.object.isMaterial&&(r.props.attach="material")),r&&Nx(r),e}function Nx(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);const n=null==(t=e.root)||null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function jx(e,t){e.manual||(ex(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix())}const Cx=e=>null==e?void 0:e.isObject3D;function Tx(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Sx(e,t,n,r){const s=n.get(t);s&&(n.delete(t),0===n.size&&(e.delete(r),s.target.releasePointerCapture(r)))}function _x(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f;if(n.hovered.delete(Tx(e)),null!=r&&r.eventCount){const n=r.handlers,s={...e,intersections:t};null==n.onPointerOut||n.onPointerOut(s),null==n.onPointerLeave||n.onPointerLeave(s)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(i){const{onPointerMissed:a,internal:o}=e.getState();o.lastEvent.current=i;const l="onPointerMove"===s,c="onClick"===s||"onContextMenu"===s||"onDoubleClick"===s,u=function(t,n){const r=e.getState(),s=new Set,i=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){const t=ox(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=a.flatMap((function(e){const n=ox(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=ox(e.object),r=ox(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=Tx(e);return!s.has(t)&&(s.add(t),!0)}));r.events.filter&&(o=r.events.filter(o,r));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&i.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())s.has(Tx(e.intersection))||i.push(e.intersection);return i}(i,l?t:void 0),d=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],s=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+s*s))}(i):0;"onPointerDown"===s&&(o.initialClick=[i.offsetX,i.offsetY],o.initialHits=u.map((e=>e.eventObject))),c&&!u.length&&d<=2&&(r(i,o.interaction),a&&a(i)),l&&n(u),function(e,t,r,s){if(e.length){const i={stopped:!1};for(const a of e){let o=ox(a.object);if(o||a.object.traverseAncestors((e=>{const t=ox(e);if(t)return o=t,!1})),o){const{raycaster:l,pointer:c,camera:u,internal:d}=o,h=new Gi(c.x,c.y,0).unproject(u),m=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(a.eventObject))&&t},A=e=>{const n={intersection:a,target:t.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(a.eventObject,n):d.capturedMap.set(e,new Map([[a.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&Sx(d.capturedMap,a.eventObject,t,e)};let p={};for(let e in t){let n=t[e];"function"!==typeof n&&(p[e]=n)}let f={...a,...p,pointer:c,intersections:e,stopped:i.stopped,delta:r,unprojectedPoint:h,ray:l.ray,camera:u,stopPropagation(){const r="pointerId"in t&&d.capturedMap.get(t.pointerId);(!r||r.has(a.eventObject))&&(f.stopped=i.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((e=>e.eventObject===a.eventObject)))&&n([...e.slice(0,e.indexOf(a)),a])},target:{hasPointerCapture:m,setPointerCapture:A,releasePointerCapture:g},currentTarget:{hasPointerCapture:m,setPointerCapture:A,releasePointerCapture:g},nativeEvent:t};if(s(f),!0===i.stopped)break}}}}(u,i,d,(function(e){const t=e.eventObject,n=t.__r3f;if(null==n||!n.eventCount)return;const a=n.handlers;if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=Tx(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[s];n?c&&!o.initialHits.includes(t)||(r(i,o.interaction.filter((e=>!o.initialHits.includes(e)))),n(e)):c&&o.initialHits.includes(t)&&r(i,o.interaction.filter((e=>!o.initialHits.includes(e))))}}))}}}}const Ex=e=>!(null==e||!e.render),Bx=t.createContext(null),Mx=(e,n)=>{const r=(s=(r,s)=>{const i=new Gi,a=new Gi,o=new Gi;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s().size;const{width:r,height:l,top:c,left:u}=n,d=r/l;t.isVector3?o.copy(t):o.set(...t);const h=e.getWorldPosition(i).distanceTo(o);if(ex(e))return{width:r/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:h,aspect:d};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,s=n*(r/l);return{width:s,height:n,top:c,left:u,factor:r/s,distance:h,aspect:d}}}let c;const u=e=>r((t=>({performance:{...t.performance,current:e}}))),d=new gi,h={set:r,get:s,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(s(),t)},advance:(e,t)=>n(e,t,s()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Nm,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=s();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((()=>u(s().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>r((t=>({...t,events:{...t.events,...e}}))),setSize:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=s().camera,c={width:e,height:t,top:n,left:i};r((e=>({size:c,viewport:{...e.viewport,...l(o,a,c)}})))},setDpr:e=>r((t=>{const n=ax(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=s().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((()=>({frameloop:e})))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:t.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{const r=s().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=s().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return h},s?Uf(s,i):Uf);var s,i;const a=r.getState();let o=a.size,l=a.viewport.dpr,c=a.camera;return r.subscribe((()=>{const{camera:e,size:t,viewport:n,gl:s,set:i}=r.getState();if(t.width!==o.width||t.height!==o.height||n.dpr!==l){o=t,l=n.dpr,jx(e,t),n.dpr>0&&s.setPixelRatio(n.dpr);const r="undefined"!==typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,r)}e!==c&&(c=e,i((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),r.subscribe((t=>e(t))),r};function kx(){const e=t.useContext(Bx);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Lx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return kx()(e,t)}function Ix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=kx(),r=n.getState().internal.subscribe,s=rx(e);return nx((()=>r(s,t,n)),[t,r,n]),null}const Dx=new WeakMap;function Px(e,t){return function(n){let r;(e=>{var t;return"function"===typeof e&&(null==e||null==(t=e.prototype)?void 0:t.constructor)===e})(n)?(r=Dx.get(n),r||(r=new n,Dx.set(n,r))):r=n,e&&e(r);for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return Promise.all(i.map((e=>new Promise(((n,s)=>r.load(e,(e=>{Cx(null==e?void 0:e.scene)&&Object.assign(e,cx(e.scene)),n(e)}),t,(t=>s(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`)))))))))}}function Fx(e,t,n,r){const s=Array.isArray(t)?t:[t],i=((e,t,n)=>Vf(e,t,!1,n))(Px(n,r),[e,...s],{equal:lx.equ});return Array.isArray(t)?i:i[0]}function Ux(e){const n=Of()(e);return n.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version}),n}Fx.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{Vf(e,t,!0,n)})(Px(n),[e,...r])},Fx.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)Qf.splice(0,Qf.length);else{const t=Qf.find((t=>zf(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const Rx={},Ox=/^three(?=[A-Z])/,Hx=e=>`${e[0].toUpperCase()}${e.slice(1)}`;let Qx=0;function zx(e,t){const n=Hx(e),r=Rx[n];if("primitive"!==e&&!r)throw new Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function Vx(e){var t;e.isHidden&&(e.props.attach&&null!=(t=e.parent)&&t.object?gx(e.parent,e):Cx(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,Nx(e))}function Kx(e,t,n){const r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var s,i;const e=Rx[Hx(t.type)];t.object=null!=(s=t.props.object)?s:new e(...null!=(i=t.props.args)?i:[]),t.object.__r3f=t}if(wx(t.object,t.props),t.props.attach)gx(e,t);else if(Cx(t.object)&&Cx(e.object)){const r=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==r){const n=e.object.children.indexOf(t.object);if(-1!==n){e.object.children.splice(n,1);const s=n<r?r-1:r;e.object.children.splice(s,0,t.object)}else t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object})}else e.object.add(t.object)}for(const e of t.children)Kx(t,e);Nx(t)}}function Gx(e,t){t&&(t.parent=e,e.children.push(t),Kx(e,t))}function qx(e,t,n){if(!t||!n)return;t.parent=e;const r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),Kx(e,t,n)}function Wx(e){if("function"===typeof e.dispose){const t=()=>{try{e.dispose()}catch{}};"undefined"!==typeof IS_REACT_ACT_ENVIRONMENT?t():(0,Hf.unstable_scheduleCallback)(Hf.unstable_IdlePriority,t)}}function $x(e,t,n){if(!t)return;t.parent=null;const r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?px(e,t):Cx(t.object)&&Cx(e.object)&&(e.object.remove(t.object),function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{Sx(n.capturedMap,t,e,r)}))}(Zf(t),t.object));const s=null!==t.props.dispose&&!1!==n;for(let i=t.children.length-1;i>=0;i--){$x(t,t.children[i],s)}t.children.length=0,delete t.object.__r3f,s&&"primitive"!==t.type&&"Scene"!==t.object.type&&Wx(t.object),void 0===n&&Nx(t)}function Xx(e,t){for(const n of[e,e.alternate])if(null!==n)if("function"===typeof n.ref){null==n.refCleanup||n.refCleanup();const e=n.ref(t);"function"===typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}const Yx=[];const Jx=()=>{},Zx={};let ev=0;const tv=Ux({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return zx(e=Hx(e)in Rx?e:e.replace(Ox,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,hx(t.object,n,e,t)},removeChild:$x,appendChild:Gx,appendInitialChild:Gx,insertBefore:qx,appendChildToContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&Gx(n,t)},removeChildFromContainer(e,t){const n=e.getState().scene.__r3f;t&&n&&$x(n,t)},insertInContainerBefore(e,t,n){const r=e.getState().scene.__r3f;t&&n&&r&&qx(r,t,n)},getRootHostContext:()=>Zx,getChildHostContext:()=>Zx,commitUpdate(e,t,n,r,s){var i,a,o;zx(t,r);let l=!1;if(("primitive"===e.type&&n.object!==r.object||(null==(i=r.args)?void 0:i.length)!==(null==(a=n.args)?void 0:a.length)||null!=(o=r.args)&&o.some(((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])})))&&(l=!0),l)Yx.push([e,{...r},s]);else{const t=function(e,t){const n={};for(const r in t)if(!fx.includes(r)&&!lx.equ(t[r],e.props[r])){n[r]=t[r];for(const e in t)e.startsWith(`${r}-`)&&(n[e]=t[e])}for(const r in e.props){if(fx.includes(r)||t.hasOwnProperty(r))continue;const{root:s,key:i}=mx(e.object,r);if(s.constructor&&0===s.constructor.length){const e=vx(s);lx.und(e)||(n[i]=e[i])}else n[i]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),wx(e.object,t))}(null===s.sibling||0===(4&s.flags))&&function(){for(const[n]of Yx){const e=n.parent;if(e){n.props.attach?px(e,n):Cx(n.object)&&Cx(e.object)&&e.object.remove(n.object);for(const e of n.children)e.props.attach?px(n,e):Cx(e.object)&&Cx(n.object)&&n.object.remove(e.object)}n.isHidden&&Vx(n),n.object.__r3f&&delete n.object.__r3f,"primitive"!==n.type&&Wx(n.object)}for(const[n,r,s]of Yx){n.props=r;const i=n.parent;if(i){var e,t;const r=Rx[Hx(n.type)];n.object=null!=(e=n.props.object)?e:new r(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,Xx(s,n.object),wx(n.object,n.props),n.props.attach?gx(i,n):Cx(n.object)&&Cx(i.object)&&i.object.add(n.object);for(const e of n.children)e.props.attach?gx(n,e):Cx(e.object)&&Cx(n.object)&&n.object.add(e.object);Nx(n)}}Yx.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>hx(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){var t;e.isHidden||(e.props.attach&&null!=(t=e.parent)&&t.object?px(e.parent,e):Cx(e.object)&&(e.object.visible=!1),e.isHidden=!0,Nx(e))},unhideInstance:Vx,createTextInstance:Jx,hideTextInstance:Jx,unhideTextInstance:Jx,scheduleTimeout:"function"===typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"===typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:t.createContext(null),setCurrentUpdatePriority(e){ev=e},getCurrentUpdatePriority:()=>ev,resolveUpdatePriority(){var e;if(0!==ev)return ev;switch("undefined"!==typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Lf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Lf.ContinuousEventPriority;default:return Lf.DefaultEventPriority}},resetFormInstance(){}}),nv=new Map,rv={objects:"shallow",strict:!1};function sv(e){const t=nv.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s="function"===typeof reportError?reportError:console.error,i=r||Mx(bv,wv),a=n||tv.createContainer(i,Lf.ConcurrentRoot,null,!1,null,"",s,s,s,null);let o,l;t||nv.set(e,{fiber:a,store:i});let c=!1,u=null;return{async configure(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u=new Promise((e=>t=e));let{gl:r,size:s,scene:a,events:d,onCreated:h,shadows:m=!1,linear:A=!1,flat:g=!1,legacy:p=!1,orthographic:f=!1,frameloop:x="always",dpr:v=[1,2],performance:y,raycaster:b,camera:w,onPointerMissed:N}=n,j=i.getState(),C=j.gl;if(!j.gl){const t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"===typeof r?await r(t):r;C=Ex(n)?n:new kf({...t,...r}),j.set({gl:C})}let T=j.raycaster;T||j.set({raycaster:T=new rA});const{params:S,..._}=b||{};if(lx.equ(_,T,rv)||wx(T,{..._}),lx.equ(S,T.params,rv)||wx(T,{params:{...T.params,...S}}),!j.camera||j.camera===l&&!lx.equ(l,w,rv)){l=w;const e=null==w?void 0:w.isCamera,t=e?w:f?new Zh(0,0,0,0,.1,1e3):new gl(75,0,.1,1e3);e||(t.position.z=5,w&&(wx(t,w),t.manual||("aspect"in w||"left"in w||"right"in w||"bottom"in w||"top"in w)&&(t.manual=!0,t.updateProjectionMatrix())),j.camera||null!=w&&w.rotation||t.lookAt(0,0,0)),j.set({camera:t}),T.camera=t}if(!j.scene){let e;null!=a&&a.isScene?(e=a,hx(e,i,"",{})):(e=new Cl,hx(e,i,"",{}),a&&wx(e,a)),j.set({scene:e})}d&&!j.events.handlers&&j.set({events:d(i)});const E=function(e,t){if(!t&&"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:r,left:s}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:s}}return!t&&"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,s);if(lx.equ(E,j.size,rv)||j.setSize(E.width,E.height,E.top,E.left),v&&j.viewport.dpr!==ax(v)&&j.setDpr(v),j.frameloop!==x&&j.setFrameloop(x),j.onPointerMissed||j.set({onPointerMissed:N}),y&&!lx.equ(y,j.performance,rv)&&j.set((e=>({performance:{...e.performance,...y}}))),!j.xr){var B;const e=(e,t)=>{const n=i.getState();"never"!==n.frameloop&&wv(e,!0,n,t)},t=()=>{const t=i.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||bv(t)},n={connect(){const e=i.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=i.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(B=C.xr)?void 0:B.addEventListener)&&n.connect(),j.set({xr:n})}if(C.shadowMap){const e=C.shadowMap.enabled,t=C.shadowMap.type;if(C.shadowMap.enabled=!!m,lx.boo(m))C.shadowMap.type=St;else if(lx.str(m)){var M;const e={basic:Ct,percentage:Tt,soft:St,variance:_t};C.shadowMap.type=null!=(M=e[m])?M:St}else lx.obj(m)&&Object.assign(C.shadowMap,m);e===C.shadowMap.enabled&&t===C.shadowMap.type||(C.shadowMap.needsUpdate=!0)}return _i.enabled=!p,c||(C.outputColorSpace=A?As:ms,C.toneMapping=g?pn:yn),j.legacy!==p&&j.set((()=>({legacy:p}))),j.linear!==A&&j.set((()=>({linear:A}))),j.flat!==g&&j.set((()=>({flat:g}))),!r||lx.fun(r)||Ex(r)||lx.equ(r,C,rv)||wx(C,r),o=h,c=!0,t(),this},render(t){return c||u||this.configure(),u.then((()=>{tv.updateContainer((0,At.jsx)(iv,{store:i,children:t,onCreated:o,rootElement:e}),a,null,(()=>{}))})),i},unmount(){av(e)}}}function iv(e){let{store:t,children:n,onCreated:r,rootElement:s}=e;return nx((()=>{const e=t.getState();e.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(s)}),[]),(0,At.jsx)(Bx.Provider,{value:t,children:n})}function av(e,t){const n=nv.get(e),r=null==n?void 0:n.fiber;if(r){const s=null==n?void 0:n.store.getState();s&&(s.internal.active=!1),tv.updateContainer(null,r,null,(()=>{s&&setTimeout((()=>{try{var n,r,i,a;null==s.events.disconnect||s.events.disconnect(),null==(n=s.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(i=s.gl)||null==i.forceContextLoss||i.forceContextLoss(),null!=(a=s.gl)&&a.xr&&s.xr.disconnect(),function(e){"Scene"!==e.type&&(null==e.dispose||e.dispose());for(const t in e){const n=e[t];"Scene"!==(null==n?void 0:n.type)&&(null==n||null==n.dispose||n.dispose())}}(s.scene),nv.delete(e),t&&t(e)}catch(DP){}}),500)}))}}const ov=new Set,lv=new Set,cv=new Set;function uv(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function dv(e,t){switch(e){case"before":return uv(ov,t);case"after":return uv(lv,t);case"tail":return uv(cv,t)}}let hv,mv;function Av(e,t,n){let r=t.clock.getDelta();"never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),hv=t.internal.subscribers;for(let s=0;s<hv.length;s++)mv=hv[s],mv.ref.current(mv.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let gv,pv,fv,xv=!1,vv=!1;function yv(e){pv=requestAnimationFrame(yv),xv=!0,gv=0,dv("before",e),vv=!0;for(const n of nv.values()){var t;fv=n.store.getState(),!fv.internal.active||!("always"===fv.frameloop||fv.internal.frames>0)||null!=(t=fv.gl.xr)&&t.isPresenting||(gv+=Av(e,fv))}if(vv=!1,dv("after",e),0===gv)return dv("tail",e),xv=!1,cancelAnimationFrame(pv)}function bv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var n;if(!e)return nv.forEach((e=>bv(e.store.getState(),t)));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(e.internal.frames=t>1?Math.min(60,e.internal.frames+t):vv?2:1,xv||(xv=!0,requestAnimationFrame(yv)))}function wv(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(t&&dv("before",e),n)Av(e,n,r);else for(const s of nv.values())Av(e,s.store.getState());t&&dv("after",e)}const Nv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function jv(e){const{handlePointer:t}=_x(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Nv).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n((e=>({events:{...e.events,connected:t}}))),r.handlers)for(const e in r.handlers){const n=r.handlers[e],[s,i]=Nv[e];t.addEventListener(s,n,{passive:i})}},disconnect:()=>{const{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(const e in n.handlers){const t=n.handlers[e],[r]=Nv[e];n.connected.removeEventListener(r,t)}t((e=>({events:{...e.events,connected:void 0}})))}}}}function Cv(e,t){let n;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];window.clearTimeout(n),n=window.setTimeout((()=>e(...s)),t)}}function Tv(){let{debounce:e,scroll:n,polyfill:r,offsetSize:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const i=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,d=(0,t.useRef)(!1);(0,t.useEffect)((()=>(d.current=!0,()=>{d.current=!1})));const[h,m,A]=(0,t.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:i,right:a,x:c,y:u}=l.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:i,right:a,x:c,y:u};l.current.element instanceof HTMLElement&&s&&(h.height=l.current.element.offsetHeight,h.width=l.current.element.offsetWidth),Object.freeze(h),d.current&&!Ev(l.current.lastBounds,h)&&o(l.current.lastBounds=h)};return[e,u?Cv(e,u):e,c?Cv(e,c):e]}),[o,s,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",A,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function p(){l.current.element&&(l.current.resizeObserver=new i(A),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",A,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{A()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,n){(0,t.useEffect)((()=>{if(n){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,n])}(A,!!n),function(e){(0,t.useEffect)((()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])}(m),(0,t.useEffect)((()=>{g(),p()}),[n,A,m]),(0,t.useEffect)((()=>g),[]),[e=>{!e||e===l.current.element||(g(),l.current.element=e,l.current.scrollContainers=Sv(e),p())},a,h]}function Sv(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Sv(e.parentElement)]}const _v=["x","y","top","bottom","left","right","width","height"],Ev=(e,t)=>_v.every((n=>e[n]===t[n]));function Bv(n){let{ref:r,children:s,fallback:i,resize:a,style:o,gl:l,events:c=jv,eventSource:u,eventPrefix:d,shadows:h,linear:m,flat:A,legacy:g,orthographic:p,frameloop:f,dpr:x,performance:v,raycaster:y,camera:b,scene:w,onPointerMissed:N,onCreated:j,...C}=n;t.useMemo((()=>function(e){if("function"===typeof e){const t=""+Qx++;return Rx[t]=e,t}Object.assign(Rx,e)}(e)),[]);const T=function(){const e=$f(),n=Jf();return t.useMemo((()=>r=>{let{children:s}=r;const i=Kf(e,!0,(e=>e.type===t.StrictMode))?t.StrictMode:t.Fragment;return(0,At.jsx)(i,{children:(0,At.jsx)(n,{children:s})})}),[e,n])}(),[S,_]=Tv({scroll:!0,debounce:{scroll:50,resize:0},...a}),E=t.useRef(null),B=t.useRef(null);t.useImperativeHandle(r,(()=>E.current));const M=rx(N),[k,L]=t.useState(!1),[I,D]=t.useState(!1);if(k)throw k;if(I)throw I;const P=t.useRef(null);nx((()=>{const e=E.current;if(_.width>0&&_.height>0&&e){async function n(){await P.current.configure({gl:l,scene:w,events:c,shadows:h,linear:m,flat:A,legacy:g,orthographic:p,frameloop:f,dpr:x,performance:v,raycaster:y,camera:b,size:_,onPointerMissed:function(){return null==M.current?void 0:M.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:B.current),d&&e.setEvents({compute:(e,t)=>{const n=e[d+"X"],r=e[d+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==j||j(e)}}),P.current.render((0,At.jsx)(T,{children:(0,At.jsx)(ix,{set:D,children:(0,At.jsx)(t.Suspense,{fallback:(0,At.jsx)(sx,{set:L}),children:null!=s?s:null})})}))}P.current||(P.current=sv(e)),n()}})),t.useEffect((()=>{const e=E.current;if(e)return()=>av(e)}),[]);const F=u?"none":"auto";return(0,At.jsx)("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...o},...C,children:(0,At.jsx)("div",{ref:S,style:{width:"100%",height:"100%"},children:(0,At.jsx)("canvas",{ref:E,style:{display:"block"},children:i})})})}function Mv(e){return(0,At.jsx)(Wf,{children:(0,At.jsx)(Bv,{...e})})}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(null,arguments)}const Lv=new Gi,Iv=new Gi,Dv=new Gi,Pv=new gi;function Fv(e,t,n){const r=Lv.setFromMatrixPosition(e.matrixWorld);r.project(t);const s=n.width/2,i=n.height/2;return[r.x*s+s,-r.y*i+i]}const Uv=e=>Math.abs(e)<1e-10?0:e;function Rv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let s=0;16!==s;s++)r+=Uv(t[s]*e.elements[s])+(15!==s?",":")");return n+r}const Ov=(Hv=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>Rv(e,Hv));var Hv;const Qv=(e,t)=>Rv(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)");const zv=t.forwardRef(((e,n)=>{let{children:r,eps:i=.001,style:a,className:o,prepend:l,center:c,fullscreen:u,portal:d,distanceFactor:h,sprite:m=!1,transform:A=!1,occlude:g,onOcclude:p,castShadow:f,receiveShadow:x,material:v,geometry:y,zIndexRange:b=[16777271,0],calculatePosition:w=Fv,as:N="div",wrapperClass:j,pointerEvents:C="auto",...T}=e;const{gl:S,camera:_,scene:E,size:B,raycaster:M,events:k,viewport:L}=Lx(),[I]=t.useState((()=>document.createElement(N))),D=t.useRef(null),P=t.useRef(null),F=t.useRef(0),U=t.useRef([0,0]),R=t.useRef(null),O=t.useRef(null),H=(null==d?void 0:d.current)||k.connected||S.domElement.parentNode,Q=t.useRef(null),z=t.useRef(!1),V=t.useMemo((()=>g&&"blending"!==g||Array.isArray(g)&&g.length&&function(e){return e&&"object"===typeof e&&"current"in e}(g[0])),[g]);t.useLayoutEffect((()=>{const e=S.domElement;g&&"blending"===g?(e.style.zIndex=`${Math.floor(b[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[g]),t.useLayoutEffect((()=>{if(P.current){const e=D.current=s.createRoot(I);if(E.updateMatrixWorld(),A)I.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=w(P.current,_,B);I.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return H&&(l?H.prepend(I):H.appendChild(I)),()=>{H&&H.removeChild(I),e.unmount()}}}),[H,A]),t.useLayoutEffect((()=>{j&&(I.className=j)}),[j]);const K=t.useMemo((()=>A?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:c?"translate3d(-50%,-50%,0)":"none",...u&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...a}),[a,c,u,B,A]),G=t.useMemo((()=>({position:"absolute",pointerEvents:C})),[C]);t.useLayoutEffect((()=>{var e,s;(z.current=!1,A)?null==(e=D.current)||e.render(t.createElement("div",{ref:R,style:K},t.createElement("div",{ref:O,style:G},t.createElement("div",{ref:n,className:o,style:a,children:r})))):null==(s=D.current)||s.render(t.createElement("div",{ref:n,style:K,className:o,children:r}))}));const q=t.useRef(!0);Ix((e=>{if(P.current){_.updateMatrixWorld(),P.current.updateWorldMatrix(!0,!1);const e=A?U.current:w(P.current,_,B);if(A||Math.abs(F.current-_.zoom)>i||Math.abs(U.current[0]-e[0])>i||Math.abs(U.current[1]-e[1])>i){const t=function(e,t){const n=Lv.setFromMatrixPosition(e.matrixWorld),r=Iv.setFromMatrixPosition(t.matrixWorld),s=n.sub(r),i=t.getWorldDirection(Dv);return s.angleTo(i)>Math.PI/2}(P.current,_);let n=!1;V&&(Array.isArray(g)?n=g.map((e=>e.current)):"blending"!==g&&(n=[E]));const r=q.current;if(n){const e=function(e,t,n,r){const s=Lv.setFromMatrixPosition(e.matrixWorld),i=s.clone();i.project(t),Pv.set(i.x,i.y),n.setFromCamera(Pv,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return s.distanceTo(n.ray.origin)<e}return!0}(P.current,_,M,n);q.current=e&&!t}else q.current=!t;r!==q.current&&(p?p(!q.current):I.style.display=q.current?"block":"none");const s=Math.floor(b[0]/2),i=g?V?[b[0],s]:[s-1,0]:b;if(I.style.zIndex=`${function(e,t,n){if(t instanceof gl||t instanceof Zh){const r=Lv.setFromMatrixPosition(e.matrixWorld),s=Iv.setFromMatrixPosition(t.matrixWorld),i=r.distanceTo(s),a=(n[1]-n[0])/(t.far-t.near),o=n[1]-a*t.far;return Math.round(a*i+o)}}(P.current,_,i)}`,A){const[e,t]=[B.width/2,B.height/2],n=_.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:s,left:i,bottom:a,right:o}=_,l=Ov(_.matrixWorldInverse),c=r?`scale(${n})translate(${Uv(-(o+i)/2)}px,${Uv((s+a)/2)}px)`:`translateZ(${n}px)`;let u=P.current.matrixWorld;m&&(u=_.matrixWorldInverse.clone().transpose().copyPosition(u).scale(P.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),I.style.width=B.width+"px",I.style.height=B.height+"px",I.style.perspective=r?"":`${n}px`,R.current&&O.current&&(R.current.style.transform=`${c}${l}translate(${e}px,${t}px)`,O.current.style.transform=Qv(u,1/((h||10)/400)))}else{const t=void 0===h?1:function(e,t){if(t instanceof Zh)return t.zoom;if(t instanceof gl){const n=Lv.setFromMatrixPosition(e.matrixWorld),r=Iv.setFromMatrixPosition(t.matrixWorld),s=t.fov*Math.PI/180,i=n.distanceTo(r);return 1/(2*Math.tan(s/2)*i)}return 1}(P.current,_)*h;I.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}U.current=e,F.current=_.zoom}}if(!V&&Q.current&&!z.current)if(A){if(R.current){const e=R.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=_;if(t||y)T.scale&&(Array.isArray(T.scale)?T.scale instanceof Gi?Q.current.scale.copy(T.scale.clone().divideScalar(1)):Q.current.scale.set(1/T.scale[0],1/T.scale[1],1/T.scale[2]):Q.current.scale.setScalar(1/T.scale));else{const t=(h||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;Q.current.scale.set(n,r,1)}z.current=!0}}}else{const t=I.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/L.factor,n=t.clientWidth*e,r=t.clientHeight*e;Q.current.scale.set(n,r,1),z.current=!0}Q.current.lookAt(e.camera.position)}}));const W=t.useMemo((()=>({vertexShader:A?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[A]);return t.createElement("group",kv({},T,{ref:P}),g&&!V&&t.createElement("mesh",{castShadow:f,receiveShadow:x,ref:Q},y||t.createElement("planeGeometry",null),v||t.createElement("shaderMaterial",{side:Mt,vertexShader:W.vertexShader,fragmentShader:W.fragmentShader})))})),Vv=(()=>parseInt(xt.replace(/\D+/g,"")))();class Kv extends ul{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:`\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <${Vv>=154?"colorspace_fragment":"encodings_fragment"}>\n      }`})}}const Gv=e=>(new Gi).setFromSpherical(new aA(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),qv=t.forwardRef(((e,n)=>{let{radius:r=100,depth:s=50,count:i=5e3,saturation:a=0,factor:o=4,fade:l=!1,speed:c=1}=e;const u=t.useRef(null),[d,h,m]=t.useMemo((()=>{const e=[],t=[],n=Array.from({length:i},(()=>(.5+.5*Math.random())*o)),l=new go;let c=r+s;const u=s/i;for(let r=0;r<i;r++)c-=u*Math.random(),e.push(...Gv(c).toArray()),l.setHSL(r/i,a,.9),t.push(l.r,l.g,l.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(n)]}),[i,s,o,r,a]);Ix((e=>u.current&&(u.current.uniforms.time.value=e.clock.elapsedTime*c)));const[A]=t.useState((()=>new Kv));return t.createElement("points",{ref:n},t.createElement("bufferGeometry",null,t.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),t.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),t.createElement("bufferAttribute",{attach:"attributes-size",args:[m,1]})),t.createElement("primitive",{ref:u,object:A,attach:"material",blending:It,"uniforms-fade-value":l,depthWrite:!1,transparent:!0,vertexColors:!0}))}));var Wv=Object.defineProperty,$v=(e,t,n)=>(((e,t,n)=>{t in e?Wv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class Xv{constructor(){$v(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var Yv=Object.defineProperty,Jv=(e,t,n)=>(((e,t,n)=>{t in e?Yv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const Zv=new ba,ey=new bc,ty=Math.cos(Math.PI/180*70),ny=(e,t)=>(e%t+t)%t;class ry extends Xv{constructor(e,t){super(),Jv(this,"object"),Jv(this,"domElement"),Jv(this,"enabled",!0),Jv(this,"target",new Gi),Jv(this,"minDistance",0),Jv(this,"maxDistance",1/0),Jv(this,"minZoom",0),Jv(this,"maxZoom",1/0),Jv(this,"minPolarAngle",0),Jv(this,"maxPolarAngle",Math.PI),Jv(this,"minAzimuthAngle",-1/0),Jv(this,"maxAzimuthAngle",1/0),Jv(this,"enableDamping",!1),Jv(this,"dampingFactor",.05),Jv(this,"enableZoom",!0),Jv(this,"zoomSpeed",1),Jv(this,"enableRotate",!0),Jv(this,"rotateSpeed",1),Jv(this,"enablePan",!0),Jv(this,"panSpeed",1),Jv(this,"screenSpacePanning",!0),Jv(this,"keyPanSpeed",7),Jv(this,"zoomToCursor",!1),Jv(this,"autoRotate",!1),Jv(this,"autoRotateSpeed",2),Jv(this,"reverseOrbit",!1),Jv(this,"reverseHorizontalOrbit",!1),Jv(this,"reverseVerticalOrbit",!1),Jv(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Jv(this,"mouseButtons",{LEFT:vt.ROTATE,MIDDLE:vt.DOLLY,RIGHT:vt.PAN}),Jv(this,"touches",{ONE:yt.ROTATE,TWO:yt.DOLLY_PAN}),Jv(this,"target0"),Jv(this,"position0"),Jv(this,"zoom0"),Jv(this,"_domElementKeyEvents",null),Jv(this,"getPolarAngle"),Jv(this,"getAzimuthalAngle"),Jv(this,"setPolarAngle"),Jv(this,"setAzimuthalAngle"),Jv(this,"getDistance"),Jv(this,"getZoomScale"),Jv(this,"listenToKeyEvents"),Jv(this,"stopListenToKeyEvents"),Jv(this,"saveState"),Jv(this,"reset"),Jv(this,"update"),Jv(this,"connect"),Jv(this,"dispose"),Jv(this,"dollyIn"),Jv(this,"dollyOut"),Jv(this,"getScale"),Jv(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=ny(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let s=Math.abs(t-r);2*Math.PI-s<s&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=ny(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let s=Math.abs(t-r);2*Math.PI-s<s&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",X),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",X),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),o=a.NONE},this.update=(()=>{const t=new Gi,s=new Gi(0,1,0),i=(new Ki).setFromUnitVectors(e.up,s),m=i.clone().invert(),A=new Gi,g=new Ki,p=2*Math.PI;return function(){const f=n.object.position;i.setFromUnitVectors(e.up,s),m.copy(i).invert(),t.copy(f).sub(n.target),t.applyQuaternion(i),c.setFromVector3(t),n.autoRotate&&o===a.NONE&&_(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let x=n.minAzimuthAngle,v=n.maxAzimuthAngle;isFinite(x)&&isFinite(v)&&(x<-Math.PI?x+=p:x>Math.PI&&(x-=p),v<-Math.PI?v+=p:v>Math.PI&&(v-=p),c.theta=x<=v?Math.max(x,Math.min(v,c.theta)):c.theta>(x+v)/2?Math.max(x,c.theta):Math.min(v,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&j||n.object.isOrthographicCamera?c.radius=F(c.radius):c.radius=F(c.radius*d),t.setFromSpherical(c),t.applyQuaternion(m),f.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),h.set(0,0,0));let y=!1;if(n.zoomToCursor&&j){let r=null;if(n.object instanceof gl&&n.object.isPerspectiveCamera){const e=t.length();r=F(e*d);const s=e-r;n.object.position.addScaledVector(w,s),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new Gi(N.x,N.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix(),y=!0;const s=new Gi(N.x,N.y,0);s.unproject(n.object),n.object.position.sub(s).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(Zv.origin.copy(n.object.position),Zv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Zv.direction))<ty?e.lookAt(n.target):(ey.setFromNormalAndCoplanarPoint(n.object.up,n.target),Zv.intersectPlane(ey,n.target))))}else n.object instanceof Zh&&n.object.isOrthographicCamera&&(y=1!==d,y&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/d)),n.object.updateProjectionMatrix()));return d=1,j=!1,!!(y||A.distanceToSquared(n.object.position)>l||8*(1-g.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),A.copy(n.object.position),g.copy(n.object.quaternion),y=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Y),n.domElement.addEventListener("pointerdown",G),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",$)},this.dispose=()=>{var e,t,r,s,i,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",Y),null==(t=n.domElement)||t.removeEventListener("pointerdown",G),null==(r=n.domElement)||r.removeEventListener("pointercancel",W),null==(s=n.domElement)||s.removeEventListener("wheel",$),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",q),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",X)};const n=this,r={type:"change"},s={type:"start"},i={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=a.NONE;const l=1e-6,c=new aA,u=new aA;let d=1;const h=new Gi,m=new gi,A=new gi,g=new gi,p=new gi,f=new gi,x=new gi,v=new gi,y=new gi,b=new gi,w=new Gi,N=new gi;let j=!1;const C=[],T={};function S(){return Math.pow(.95,n.zoomSpeed)}function _(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function E(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const B=(()=>{const e=new Gi;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),M=(()=>{const e=new Gi;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),k=(()=>{const e=new Gi;return function(t,r){const s=n.domElement;if(s&&n.object instanceof gl&&n.object.isPerspectiveCamera){const i=n.object.position;e.copy(i).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),B(2*t*a/s.clientHeight,n.object.matrix),M(2*r*a/s.clientHeight,n.object.matrix)}else s&&n.object instanceof Zh&&n.object.isOrthographicCamera?(B(t*(n.object.right-n.object.left)/n.object.zoom/s.clientWidth,n.object.matrix),M(r*(n.object.top-n.object.bottom)/n.object.zoom/s.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function L(e){n.object instanceof gl&&n.object.isPerspectiveCamera||n.object instanceof Zh&&n.object.isOrthographicCamera?d=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){L(d/e)}function D(e){L(d*e)}function P(e){if(!n.zoomToCursor||!n.domElement)return;j=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top,i=t.width,a=t.height;N.x=r/i*2-1,N.y=-s/a*2+1,w.set(N.x,N.y,1).unproject(n.object).sub(n.object.position).normalize()}function F(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function U(e){m.set(e.clientX,e.clientY)}function R(e){p.set(e.clientX,e.clientY)}function O(){if(1==C.length)m.set(C[0].pageX,C[0].pageY);else{const e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);m.set(e,t)}}function H(){if(1==C.length)p.set(C[0].pageX,C[0].pageY);else{const e=.5*(C[0].pageX+C[1].pageX),t=.5*(C[0].pageY+C[1].pageY);p.set(e,t)}}function Q(){const e=C[0].pageX-C[1].pageX,t=C[0].pageY-C[1].pageY,n=Math.sqrt(e*e+t*t);v.set(0,n)}function z(e){if(1==C.length)A.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);A.set(n,r)}g.subVectors(A,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(_(2*Math.PI*g.x/t.clientHeight),E(2*Math.PI*g.y/t.clientHeight)),m.copy(A)}function V(e){if(1==C.length)f.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}x.subVectors(f,p).multiplyScalar(n.panSpeed),k(x.x,x.y),p.copy(f)}function K(e){const t=Z(e),r=e.pageX-t.x,s=e.pageY-t.y,i=Math.sqrt(r*r+s*s);y.set(0,i),b.set(0,Math.pow(y.y/v.y,n.zoomSpeed)),I(b.y),v.copy(y)}function G(e){var t,r;!1!==n.enabled&&(0===C.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",W)),function(e){C.push(e)}(e),"touch"===e.pointerType?function(e){switch(J(e),C.length){case 1:switch(n.touches.ONE){case yt.ROTATE:if(!1===n.enableRotate)return;O(),o=a.TOUCH_ROTATE;break;case yt.PAN:if(!1===n.enablePan)return;H(),o=a.TOUCH_PAN;break;default:o=a.NONE}break;case 2:switch(n.touches.TWO){case yt.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Q(),n.enablePan&&H(),o=a.TOUCH_DOLLY_PAN;break;case yt.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Q(),n.enableRotate&&O(),o=a.TOUCH_DOLLY_ROTATE;break;default:o=a.NONE}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(s)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case vt.DOLLY:if(!1===n.enableZoom)return;!function(e){P(e),v.set(e.clientX,e.clientY)}(e),o=a.DOLLY;break;case vt.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;R(e),o=a.PAN}else{if(!1===n.enableRotate)return;U(e),o=a.ROTATE}break;case vt.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;U(e),o=a.ROTATE}else{if(!1===n.enablePan)return;R(e),o=a.PAN}break;default:o=a.NONE}o!==a.NONE&&n.dispatchEvent(s)}(e))}function q(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(J(e),o){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;z(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;V(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&K(e),n.enablePan&&V(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&K(e),n.enableRotate&&z(e)}(e),n.update();break;default:o=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),g.subVectors(A,m).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(_(2*Math.PI*g.x/t.clientHeight),E(2*Math.PI*g.y/t.clientHeight)),m.copy(A),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,v),b.y>0?I(S()):b.y<0&&D(S()),v.copy(y),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){f.set(e.clientX,e.clientY),x.subVectors(f,p).multiplyScalar(n.panSpeed),k(x.x,x.y),p.copy(f),n.update()}(e)}}(e))}function W(e){var t,r,s;!function(e){delete T[e.pointerId];for(let t=0;t<C.length;t++)if(C[t].pointerId==e.pointerId)return void C.splice(t,1)}(e),0===C.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",q),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",W)),n.dispatchEvent(i),o=a.NONE}function $(e){!1===n.enabled||!1===n.enableZoom||o!==a.NONE&&o!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(s),function(e){P(e),e.deltaY<0?D(S()):e.deltaY>0&&I(S()),n.update()}(e),n.dispatchEvent(i))}function X(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:k(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:k(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Y(e){!1!==n.enabled&&e.preventDefault()}function J(e){let t=T[e.pointerId];void 0===t&&(t=new gi,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Z(e){const t=e.pointerId===C[0].pointerId?C[1]:C[0];return T[t.pointerId]}this.dollyIn=function(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S()),n.update()},this.dollyOut=function(){I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S()),n.update()},this.getScale=()=>d,this.setScale=e=>{L(e),n.update()},this.getZoomScale=()=>S(),void 0!==t&&this.connect(t),this.update()}}const sy=t.forwardRef(((e,n)=>{let{makeDefault:r,camera:s,regress:i,domElement:a,enableDamping:o=!0,keyEvents:l=!1,onChange:c,onStart:u,onEnd:d,...h}=e;const m=Lx((e=>e.invalidate)),A=Lx((e=>e.camera)),g=Lx((e=>e.gl)),p=Lx((e=>e.events)),f=Lx((e=>e.setEvents)),x=Lx((e=>e.set)),v=Lx((e=>e.get)),y=Lx((e=>e.performance)),b=s||A,w=a||p.connected||g.domElement,N=t.useMemo((()=>new ry(b)),[b]);return Ix((()=>{N.enabled&&N.update()}),-1),t.useEffect((()=>(l&&N.connect(!0===l?w:l),N.connect(w),()=>{N.dispose()})),[l,w,i,N,m]),t.useEffect((()=>{const e=e=>{m(),i&&y.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{d&&d(e)};return N.addEventListener("change",e),N.addEventListener("start",t),N.addEventListener("end",n),()=>{N.removeEventListener("start",t),N.removeEventListener("end",n),N.removeEventListener("change",e)}}),[c,u,d,N,m,f]),t.useEffect((()=>{if(r){const e=v().controls;return x({controls:N}),()=>x({controls:e})}}),[r,N]),t.createElement("primitive",kv({ref:n,object:N,enableDamping:o},h))})),iy=new $i,ay=new Gi;class oy extends lm{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new Fo([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new Fo([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new eA(t,6,1);return this.setAttribute("instanceStart",new _l(n,3,0)),this.setAttribute("instanceEnd",new _l(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new eA(t,2*n,1);return this.setAttribute("instanceColorStart",new _l(r,n,0)),this.setAttribute("instanceColorEnd",new _l(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Gd(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new $i);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),iy.setFromBufferAttribute(t),this.boundingBox.union(iy))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ma),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,i=e.count;s<i;s++)ay.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ay)),ay.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(ay));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}const ly=(()=>parseInt(xt.replace(/\D+/g,"")))();class cy extends ul{constructor(e){super({type:"LineMaterial",uniforms:cl.clone(cl.merge([JA.common,JA.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new gi(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:"\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\n\t\t\t\tuniform float linewidth;\n\t\t\t\tuniform vec2 resolution;\n\n\t\t\t\tattribute vec3 instanceStart;\n\t\t\t\tattribute vec3 instanceEnd;\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t\tattribute vec4 instanceColorStart;\n\t\t\t\t\t\tattribute vec4 instanceColorEnd;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t\tattribute vec3 instanceColorStart;\n\t\t\t\t\t\tattribute vec3 instanceColorEnd;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashScale;\n\t\t\t\t\tattribute float instanceDistanceStart;\n\t\t\t\t\tattribute float instanceDistanceEnd;\n\t\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#endif\n\n\t\t\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t\t\t// conservative estimate of the near plane\n\t\t\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#ifdef USE_COLOR\n\n\t\t\t\t\t\tvLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t\t\t// camera space\n\t\t\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\tworldStart = start.xyz;\n\t\t\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\t\t\tif ( perspective ) {\n\n\t\t\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// clip space\n\t\t\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t\t\t// ndc space\n\t\t\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t\t\t// direction\n\t\t\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t\t\t// account for clip-space aspect ratio\n\t\t\t\t\tdir.x *= aspect;\n\t\t\t\t\tdir = normalize( dir );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\t\t\tvec3 offset;\n\t\t\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t\t\t// set the world position\n\t\t\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t\t\t// project the worldpos\n\t\t\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t\t\t// segments overlap neatly\n\t\t\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\t\t\tdir.x /= aspect;\n\t\t\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset += - dir;\n\n\t\t\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\t\t\toffset += dir;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth;\n\n\t\t\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t\t\t// select end\n\t\t\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t\t\t// back to clip space\n\t\t\t\t\t\toffset *= clip.w;\n\n\t\t\t\t\t\tclip.xy += offset;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_Position = clip;\n\n\t\t\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:`\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float linewidth;\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashOffset;\n\t\t\t\t\tuniform float dashSize;\n\t\t\t\t\tuniform float gapSize;\n\n\t\t\t\t#endif\n\n\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\t\t\tfloat mua;\n\t\t\t\t\tfloat mub;\n\n\t\t\t\t\tvec3 p13 = p1 - p3;\n\t\t\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\t\t\tmua = numer / denom;\n\t\t\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\t\t\treturn vec2( mua, mub );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat alpha = opacity;\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\t\t\tfloat len = length( delta );\n\t\t\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\t\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\t\tdiffuseColor *= vLineColor;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tdiffuseColor.rgb *= vLineColor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t\t\tgl_FragColor = diffuseColor;\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <${ly>=154?"colorspace_fragment":"encodings_fragment"}>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(e){Boolean(e)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const uy=ly>=125?"uv1":"uv2",dy=new Ui,hy=new Gi,my=new Gi,Ay=new Ui,gy=new Ui,py=new Ui,fy=new Gi,xy=new wa,vy=new mA,yy=new Gi,by=new $i,wy=new ma,Ny=new Ui;let jy,Cy;function Ty(e,t,n){return Ny.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),Ny.multiplyScalar(1/Ny.w),Ny.x=Cy/n.width,Ny.y=Cy/n.height,Ny.applyMatrix4(e.projectionMatrixInverse),Ny.multiplyScalar(1/Ny.w),Math.abs(Math.max(Ny.x,Ny.y))}class Sy extends rl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oy,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cy({color:16777215*Math.random()})),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let i=0,a=0,o=t.count;i<o;i++,a+=2)hy.fromBufferAttribute(t,i),my.fromBufferAttribute(n,i),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+hy.distanceTo(my);const s=new eA(r,2,1);return e.setAttribute("instanceDistanceStart",new _l(s,1,0)),e.setAttribute("instanceDistanceEnd",new _l(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;null!==r||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=void 0!==e.params.Line2&&e.params.Line2.threshold||0;jy=e.ray;const i=this.matrixWorld,a=this.geometry,o=this.material;let l,c;if(Cy=o.linewidth+s,null===a.boundingSphere&&a.computeBoundingSphere(),wy.copy(a.boundingSphere).applyMatrix4(i),n)l=.5*Cy;else{l=Ty(r,Math.max(r.near,wy.distanceToPoint(jy.origin)),o.resolution)}if(wy.radius+=l,!1!==jy.intersectsSphere(wy)){if(null===a.boundingBox&&a.computeBoundingBox(),by.copy(a.boundingBox).applyMatrix4(i),n)c=.5*Cy;else{c=Ty(r,Math.max(r.near,by.distanceToPoint(jy.origin)),o.resolution)}by.expandByScalar(c),!1!==jy.intersectsBox(by)&&(n?function(e,t){const n=e.matrixWorld,r=e.geometry,s=r.attributes.instanceStart,i=r.attributes.instanceEnd;for(let a=0,o=Math.min(r.instanceCount,s.count);a<o;a++){vy.start.fromBufferAttribute(s,a),vy.end.fromBufferAttribute(i,a),vy.applyMatrix4(n);const r=new Gi,o=new Gi;jy.distanceSqToSegment(vy.start,vy.end,o,r),o.distanceTo(r)<.5*Cy&&t.push({point:o,pointOnLine:r,distance:jy.origin.distanceTo(o),object:e,face:null,faceIndex:a,uv:null,[uy]:null})}}(this,t):function(e,t,n){const r=t.projectionMatrix,s=e.material.resolution,i=e.matrixWorld,a=e.geometry,o=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,o.count),u=-t.near;jy.at(1,py),py.w=1,py.applyMatrix4(t.matrixWorldInverse),py.applyMatrix4(r),py.multiplyScalar(1/py.w),py.x*=s.x/2,py.y*=s.y/2,py.z=0,fy.copy(py),xy.multiplyMatrices(t.matrixWorldInverse,i);for(let d=0,h=c;d<h;d++){if(Ay.fromBufferAttribute(o,d),gy.fromBufferAttribute(l,d),Ay.w=1,gy.w=1,Ay.applyMatrix4(xy),gy.applyMatrix4(xy),Ay.z>u&&gy.z>u)continue;if(Ay.z>u){const e=Ay.z-gy.z,t=(Ay.z-u)/e;Ay.lerp(gy,t)}else if(gy.z>u){const e=gy.z-Ay.z,t=(gy.z-u)/e;gy.lerp(Ay,t)}Ay.applyMatrix4(r),gy.applyMatrix4(r),Ay.multiplyScalar(1/Ay.w),gy.multiplyScalar(1/gy.w),Ay.x*=s.x/2,Ay.y*=s.y/2,gy.x*=s.x/2,gy.y*=s.y/2,vy.start.copy(Ay),vy.start.z=0,vy.end.copy(gy),vy.end.z=0;const t=vy.closestPointToPointParameter(fy,!0);vy.at(t,yy);const a=Ai.lerp(Ay.z,gy.z,t),c=a>=-1&&a<=1,h=fy.distanceTo(yy)<.5*Cy;if(c&&h){vy.start.fromBufferAttribute(o,d),vy.end.fromBufferAttribute(l,d),vy.start.applyMatrix4(i),vy.end.applyMatrix4(i);const t=new Gi,r=new Gi;jy.distanceSqToSegment(vy.start,vy.end,r,t),n.push({point:r,pointOnLine:t,distance:jy.origin.distanceTo(r),object:e,face:null,faceIndex:d,uv:null,[uy]:null})}}}(this,r,t))}}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(dy),this.material.uniforms.resolution.value.set(dy.z,dy.w))}}class _y extends oy{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=e.length-t,r=new Float32Array(2*n);if(3===t)for(let s=0;s<n;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<n;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Ey extends Sy{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _y,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cy({color:16777215*Math.random()})),this.isLine2=!0,this.type="Line2"}}const By=t.forwardRef((function(e,n){let{points:r,color:s=16777215,vertexColors:i,linewidth:a,lineWidth:o,segments:l,dashed:c,...u}=e;var d,h;const m=Lx((e=>e.size)),A=t.useMemo((()=>l?new Sy:new Ey),[l]),[g]=t.useState((()=>new cy)),p=4===(null==i||null==(d=i[0])?void 0:d.length)?4:3,f=t.useMemo((()=>{const e=l?new oy:new _y,t=r.map((e=>{const t=Array.isArray(e);return e instanceof Gi||e instanceof Ui?[e.x,e.y,e.z]:e instanceof gi?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e}));if(e.setPositions(t.flat()),i){s=16777215;const t=i.map((e=>e instanceof go?e.toArray():e));e.setColors(t.flat(),p)}return e}),[r,l,i,p]);return t.useLayoutEffect((()=>{A.computeLineDistances()}),[r,A]),t.useLayoutEffect((()=>{c?g.defines.USE_DASH="":delete g.defines.USE_DASH,g.needsUpdate=!0}),[c,g]),t.useEffect((()=>()=>{f.dispose(),g.dispose()}),[f]),t.createElement("primitive",kv({object:A,ref:n},u),t.createElement("primitive",{object:f,attach:"geometry"}),t.createElement("primitive",kv({object:g,attach:"material",color:s,vertexColors:Boolean(i),resolution:[m.width,m.height],linewidth:null!==(h=null!==a&&void 0!==a?a:o)&&void 0!==h?h:1,dashed:c,transparent:4===p},u)))}));function My(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ky=t.forwardRef(My);function Ly(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Iy=t.forwardRef(Ly);function Dy(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"}))}const Py=t.forwardRef(Dy);function Fy(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Uy=t.forwardRef(Fy),Ry=JSON.parse('{"W":[{"name":"M\u1eb7t Tr\u1eddi","englishName":"Sun","radius":10,"distance":0,"color":"#FFFF99","orbitalPeriod":0,"tilt":0,"rotationSpeed":0.04,"hasBumpMap":false,"mass":"1.989 \xd7 10^30 kg","density":"1.408 g/cm\xb3","surfaceGravity":"274 m/s\xb2","escapeVelocity":"617.7 km/s","averageTemperature":"5,500\xb0C","atmosphere":"H2 (73.46%), He (24.85%), O (0.77%), C (0.29%), Fe (0.16%)","moons":0,"rings":false,"description":"Ng\xf4i sao trung t\xe2m c\u1ee7a H\u1ec7 M\u1eb7t Tr\u1eddi. Cung c\u1ea5p n\u0103ng l\u01b0\u1ee3ng v\xe0 \xe1nh s\xe1ng cho t\u1ea5t c\u1ea3 c\xe1c h\xe0nh tinh. Nhi\u1ec7t \u0111\u1ed9 b\u1ec1 m\u1eb7t kho\u1ea3ng 5,500\xb0C v\xe0 nhi\u1ec7t \u0111\u1ed9 l\xf5i l\xean \u0111\u1ebfn 15 tri\u1ec7u \u0111\u1ed9 C.","comparison":{"size":"To h\u01a1n 109 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"149.6 tri\u1ec7u km"}},{"name":"Sao Th\u1ee7y","englishName":"Mercury","radius":0.4,"distance":4,"color":"#A9A9A9","orbitalPeriod":88,"tilt":0.03,"rotationSpeed":0.017,"hasBumpMap":true,"mass":"3.285 \xd7 10^23 kg","density":"5.427 g/cm\xb3","surfaceGravity":"3.7 m/s\xb2","escapeVelocity":"4.25 km/s","averageTemperature":"167\xb0C","atmosphere":"Kh\xf4ng \u0111\xe1ng k\u1ec3","moons":0,"rings":false,"description":"H\xe0nh tinh nh\u1ecf nh\u1ea5t v\xe0 g\u1ea7n M\u1eb7t Tr\u1eddi nh\u1ea5t trong H\u1ec7 M\u1eb7t Tr\u1eddi. B\u1ec1 m\u1eb7t \u0111\u1ea7y h\u1ed1 va ch\u1ea1m v\xe0 kh\xf4ng c\xf3 kh\xed quy\u1ec3n \u0111\xe1ng k\u1ec3.","comparison":{"size":"To h\u01a1n 0.38 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"77 tri\u1ec7u km"}},{"name":"Sao Kim","englishName":"Venus","radius":0.6,"distance":7,"color":"#E6E6FA","orbitalPeriod":225,"tilt":177.3,"rotationSpeed":0.004,"hasBumpMap":true,"mass":"4.867 \xd7 10^24 kg","density":"5.243 g/cm\xb3","surfaceGravity":"8.87 m/s\xb2","escapeVelocity":"10.36 km/s","averageTemperature":"462\xb0C","atmosphere":"CO2 (96.5%), N2 (3.5%)","moons":0,"rings":false,"description":"H\xe0nh tinh n\xf3ng nh\u1ea5t trong H\u1ec7 M\u1eb7t Tr\u1eddi v\u1edbi hi\u1ec7u \u1ee9ng nh\xe0 k\xednh m\u1ea1nh. Quay ng\u01b0\u1ee3c chi\u1ec1u so v\u1edbi c\xe1c h\xe0nh tinh kh\xe1c.","comparison":{"size":"To h\u01a1n 0.95 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"38 tri\u1ec7u km"}},{"name":"Tr\xe1i \u0110\u1ea5t","englishName":"Earth","radius":0.6,"distance":10,"color":"#6495ED","orbitalPeriod":365,"tilt":23.44,"rotationSpeed":1,"hasBumpMap":true,"mass":"5.972 \xd7 10^24 kg","density":"5.514 g/cm\xb3","surfaceGravity":"9.807 m/s\xb2","escapeVelocity":"11.186 km/s","averageTemperature":"15\xb0C","atmosphere":"N2 (78%), O2 (21%), Ar (1%)","moons":1,"rings":false,"description":"H\xe0nh tinh duy nh\u1ea5t c\xf3 s\u1ef1 s\u1ed1ng \u0111\u01b0\u1ee3c bi\u1ebft \u0111\u1ebfn. C\xf3 n\u01b0\u1edbc l\u1ecfng tr\xean b\u1ec1 m\u1eb7t v\xe0 kh\xed quy\u1ec3n gi\xe0u oxy.","comparison":{"size":"To h\u01a1n 1 l\u1ea7n (chu\u1ea9n)","distance":"0 km (chu\u1ea9n)"},"moon":{"name":"M\u1eb7t Tr\u0103ng","englishName":"Moon","radius":"0.27 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"384,400 km","orbitalPeriod":"27.3 ng\xe0y","rotationPeriod":"27.3 ng\xe0y","mass":"7.347 \xd7 10^22 kg","surfaceGravity":"1.62 m/s\xb2","averageTemperature":"-20\xb0C","atmosphere":"Kh\xf4ng \u0111\xe1ng k\u1ec3","description":"V\u1ec7 tinh t\u1ef1 nhi\xean duy nh\u1ea5t c\u1ee7a Tr\xe1i \u0110\u1ea5t. B\u1ec1 m\u1eb7t \u0111\u1ea7y h\u1ed1 va ch\u1ea1m v\xe0 kh\xf4ng c\xf3 kh\xed quy\u1ec3n \u0111\xe1ng k\u1ec3.","comparison":{"size":"B\u1eb1ng 0.27 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"384,400 km"}}},{"name":"Sao H\u1ecfa","englishName":"Mars","radius":0.5,"distance":14,"color":"#CD5C5C","orbitalPeriod":687,"tilt":25.19,"rotationSpeed":0.97,"hasBumpMap":true,"mass":"6.39 \xd7 10^23 kg","density":"3.933 g/cm\xb3","surfaceGravity":"3.721 m/s\xb2","escapeVelocity":"5.03 km/s","averageTemperature":"-63\xb0C","atmosphere":"CO2 (95%), N2 (2.7%), Ar (1.6%)","moons":2,"rings":false,"description":"H\xe0nh tinh \u0111\u1ecf v\u1edbi b\u1ec1 m\u1eb7t \u0111\u1ea7y n\xfai l\u1eeda v\xe0 h\u1ebbm n\xfai. C\xf3 b\u1eb1ng ch\u1ee9ng v\u1ec1 n\u01b0\u1edbc l\u1ecfng trong qu\xe1 kh\u1ee9.","comparison":{"size":"To h\u01a1n 0.53 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"54.6 tri\u1ec7u km"}},{"name":"Sao M\u1ed9c","englishName":"Jupiter","radius":1.2,"distance":20,"color":"#DEB887","orbitalPeriod":4333,"tilt":3.13,"rotationSpeed":2.4,"hasBumpMap":true,"mass":"1.898 \xd7 10^27 kg","density":"1.326 g/cm\xb3","surfaceGravity":"24.79 m/s\xb2","escapeVelocity":"59.5 km/s","averageTemperature":"-110\xb0C","atmosphere":"H2 (90%), He (10%)","moons":79,"rings":true,"description":"H\xe0nh tinh l\u1edbn nh\u1ea5t trong H\u1ec7 M\u1eb7t Tr\u1eddi. C\xf3 V\u1ebft \u0110\u1ecf L\u1edbn - m\u1ed9t c\u01a1n b\xe3o kh\u1ed5ng l\u1ed3 \u0111\xe3 t\u1ed3n t\u1ea1i h\xe0ng tr\u0103m n\u0103m.","comparison":{"size":"To h\u01a1n 11.2 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"588 tri\u1ec7u km"}},{"name":"Sao Th\u1ed5","englishName":"Saturn","radius":1,"distance":25,"color":"#F4A460","orbitalPeriod":10759,"tilt":26.73,"rotationSpeed":2.2,"hasBumpMap":true,"mass":"5.683 \xd7 10^26 kg","density":"0.687 g/cm\xb3","surfaceGravity":"10.44 m/s\xb2","escapeVelocity":"35.5 km/s","averageTemperature":"-140\xb0C","atmosphere":"H2 (96%), He (3%)","moons":82,"rings":true,"description":"H\xe0nh tinh n\u1ed5i ti\u1ebfng v\u1edbi h\u1ec7 th\u1ed1ng v\xe0nh \u0111ai r\u1ed9ng l\u1edbn. C\xf3 m\u1eadt \u0111\u1ed9 th\u1ea5p nh\u1ea5t trong c\xe1c h\xe0nh tinh.","comparison":{"size":"To h\u01a1n 9.5 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"1.2 t\u1ef7 km"}},{"name":"Sao Thi\xean V\u01b0\u01a1ng","englishName":"Uranus","radius":0.8,"distance":30,"color":"#87CEEB","orbitalPeriod":30687,"tilt":97.77,"rotationSpeed":1.4,"mass":"8.681 \xd7 10^25 kg","density":"1.27 g/cm\xb3","surfaceGravity":"8.69 m/s\xb2","escapeVelocity":"21.3 km/s","averageTemperature":"-195\xb0C","atmosphere":"H2 (83%), He (15%), CH4 (2%)","moons":27,"rings":true,"description":"H\xe0nh tinh \u0111\u1ea7u ti\xean \u0111\u01b0\u1ee3c ph\xe1t hi\u1ec7n b\u1eb1ng k\xednh thi\xean v\u0103n. C\xf3 tr\u1ee5c quay g\u1ea7n nh\u01b0 song song v\u1edbi m\u1eb7t ph\u1eb3ng qu\u1ef9 \u0111\u1ea1o.","comparison":{"size":"To h\u01a1n 4 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"2.6 t\u1ef7 km"}},{"name":"Sao H\u1ea3i V\u01b0\u01a1ng","englishName":"Neptune","radius":0.8,"distance":35,"color":"#1E90FF","orbitalPeriod":60190,"tilt":28.32,"rotationSpeed":1.5,"mass":"1.024 \xd7 10^26 kg","density":"1.638 g/cm\xb3","surfaceGravity":"11.15 m/s\xb2","escapeVelocity":"23.5 km/s","averageTemperature":"-200\xb0C","atmosphere":"H2 (80%), He (19%), CH4 (1%)","moons":14,"rings":true,"description":"H\xe0nh tinh xa nh\u1ea5t trong H\u1ec7 M\u1eb7t Tr\u1eddi. C\xf3 nh\u1eefng c\u01a1n b\xe3o m\u1ea1nh nh\u1ea5t v\u1edbi t\u1ed1c \u0111\u1ed9 gi\xf3 l\xean \u0111\u1ebfn 2,100 km/h.","comparison":{"size":"To h\u01a1n 3.9 l\u1ea7n Tr\xe1i \u0110\u1ea5t","distance":"4.3 t\u1ef7 km"}}]}');function Oy(e){const t=new Date(2e3,0,6),n=29.530588853,r=Math.abs(e-t);return Math.floor(r/864e5)%n/n}function Hy(e){return e<.03||e>=.97?"\ud83c\udf11":e<.22?"\ud83c\udf12":e<.28?"\ud83c\udf13":e<.47?"\ud83c\udf14":e<.53?"\ud83c\udf15":e<.72?"\ud83c\udf16":e<.78?"\ud83c\udf17":"\ud83c\udf18"}const Qy=[3193507,5679952,4336544,2927457,5415792,3953128,6345056,4908208,3631398,5823136,4479824,3217106,5647072,4104928,2679506,5163344,3724630,6075680,4634256,3300772,5789136,4335056,2926003,5415600,4040887,6334800,4895904,3519141,5942608,4478384,3156852,5645680,4215545,6574768,5138768,3698006,6183584,4631376,3299028,5786336,4367728,2966867,5296800,3926183,6346064,4872864,3452325,5936592,4606688,3058356,5547216,4117176,6599312,5027152,3692375,6172064,4756944,3296629,5786032,4367536,2991283,5270160,3845528,6318928,4991840,3511141,5935984,4606320,3172708,5432480,3992170,6478480,5135056,3746518,6171360,4756192,3328725,5687632,4248736,2872483,5289616,3823527,6313392,4990416,3577269,5935792,4499792,3070292,5551264,3978576,2648914,5133744,3811190,6169968,4739760,3320485,5695824,4221600,2800291,5286736],zy=[3951576,6441696,5023088,3691733,6083168,4512080,3233108,5658272,4233936,2774482,5262048,3843510,6333648,4772432,3396181,5813568,4380320,2928034,5412272,4147575,6572400,5022896,3585205,6056528,4615504,3222356,5647200,4232560,2904818,5261680,3827046,6214816,4778576,3369621,5790416,4467552,3114723,5411552,4049111,6474064,5035168,3528870,5944656,4609696,3253684,5645776,4231888,2806450,5286224,3716439,6188192,4765008,3494741,5787040,4367792,3097971,5526192,3975592,6351184,5008032,3583654,5942096,4606816,3189476,5678448,4215392,2683491,5167424,3726151,6084256,4757200,3427797,5917392,4367568,2938036,5419600,3986776,6337856,4896160,3626406,6067632,4606384,3189108,5678256,4237904,2730578,5139744,3779911,6204256,4756336,3427061,5917040,4482224,2913443,5302864,4024920,6444704,4893392,3577557,6066912],Vy=[4639072,3070292,5559456,4119120,2782546,5133984,3712935,6202832,4887216,3320501,5810512,4371616,2931364,5287248,3954137,6441888,5023152,3625334,6050416,4614448,3176756,5532320,4107600,2775890,5262176,3712742,6202592,4772448,3336805,5690656,4250272,2971299,5396176,3951355,6441424,5022928,3657910,5943888,4502816,3071269,5551520,4085200,2774450,5261744,3843447,6202544,4762192,3387989,5795104,4238688,2968419,5395312,4082152,6343024,5002416,3631270,5954128,4479648,3122852,5548752,4215520,2675427,5163344,3724631,6214816,4643152,3300693,5789344,4368080,2905556,5395120,3975608,6465840,4895888,3454630,5942608,4609440,3058532,5547376,4215472,2797939,5138736,3697463,6187680,4762960,3353301,5778272,4367728,3035876,5296480,3860824,6346016,4905616,3496614,5920464,4598496,3189204,5546704,4116816,2681170],Ky=[5158176,3725095,6204832,4871600,3550645,5916080,4498096,3060404,5548368,3978585,6449952,5025104,3692390,6050672,4736368,3302772,5788336,4221264,2783571,5266080,3910311,6203088,4868832,3515109,5940560,4379296,3007140,5428560,4086459,6444704,5019344,3754422,6179504,4630736,3200181,5681808,4240720,2780498,5262752,3904871,6329712,4868528,3451253,5924016,4483728,2931348,5401424,4074336,2665313,5018992,3689190,6082912,4646048,3075365,5560976,4217680,2897619,5253856,3838935,6329040,4901200,3331414,5813408,4372112,3038612,5395888,4072954,6563248,5149360,3582646,6056272,4617376,3256997,5549392,4216224,2796403,5383536,3822455,6312624,4876624,3435862,5790368,4369232,3036884,5524192,3974512,2647250,5034592,3599014,5952848,4610720,3190181,5674448,4213456,2795955,5285072,3855031,6206032,4764992,3396950],Gy=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"],qy=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],Wy=["110100101100","001101001011","110011010010","101100110100","001011001101","010010110011"],$y=["Xu\xe2n ph\xe2n","Thanh minh","C\u1ed1c v\u0169","L\u1eadp h\u1ea1","Ti\u1ec3u m\xe3n","Mang ch\u1ee7ng","H\u1ea1 ch\xed","Ti\u1ec3u th\u1eed","\u0110\u1ea1i th\u1eed","L\u1eadp thu","X\u1eed th\u1eed","B\u1ea1ch l\u1ed9","Thu ph\xe2n","H\xe0n l\u1ed9","S\u01b0\u01a1ng gi\xe1ng","L\u1eadp \u0111\xf4ng","Ti\u1ec3u tuy\u1ebft","\u0110\u1ea1i tuy\u1ebft","\u0110\xf4ng ch\xed","Ti\u1ec3u h\xe0n","\u0110\u1ea1i h\xe0n","L\u1eadp xu\xe2n","V\u0169 Th\u1ee7y","Kinh tr\u1eadp"],Xy=e=>Math.floor(e),Yy=(e,t,n)=>{const r=Xy((14-t)/12),s=n+4800-r;return e+Xy((153*(t+12*r-3)+2)/5)+365*s+Xy(s/4)-Xy(s/100)+Xy(s/400)-32045},Jy=e=>{let t=e,n=t;if(t>=2299161){const e=Xy((t-1867216.25)/36524.25);n=t+1+e-Xy(e/4)}const r=n+1524,s=Xy((r-122.1)/365.25),i=Xy(365.25*s),a=Xy((r-i)/30.6001),o=a<14?a-1:a-13;return[Xy(r-i-Xy(30.6001*a)),o,o<3?s-4715:s-4716]};class Zy{constructor(e,t,n,r,s){this.day=e,this.month=t,this.year=n,this.leap=r,this.jd=s}}const eb=e=>{let t;return t=e<1900?Qy[e-1800]:e<2e3?zy[e-1900]:e<2100?Vy[e-2e3]:Ky[e-2100],tb(e,t)},tb=(e,t)=>{const n=[29,30],r=new Array(12),s=t>>17,i=15&t,a=n[t>>16&1];let o=Yy(1,1,e)+s,l=t>>4;for(let u=0;u<12;u++)r[12-u-1]=n[1&l],l>>=1;const c=[];if(0===i)for(let u=1;u<=12;u++)c.push(new Zy(1,u,e,0,o)),o+=r[u-1];else{for(let t=1;t<=i;t++)c.push(new Zy(1,t,e,0,o)),o+=r[t-1];c.push(new Zy(1,i,e,1,o)),o+=a;for(let t=i+1;t<=12;t++)c.push(new Zy(1,t,e,0,o)),o+=r[t-1]}return c},nb=(e,t,n)=>{if(n<1800||2199<n)return new Zy(0,0,0,0,0);let r=eb(n);const s=Yy(e,t,n);return s<r[0].jd&&(r=eb(n-1)),((e,t)=>{if(e>ub||e<cb||t[0].jd>e)return new Zy(0,0,0,0,e);let n=t.length-1;for(;e<t[n].jd;)n--;const r=e-t[n].jd;return new Zy(t[n].day+r,t[n].month,t[n].year,t[n].leap,e)})(s,r)},rb=e=>[Gy[(e.jd+9)%10]+" "+qy[(e.jd+1)%12],Gy[(12*e.year+e.month+3)%10]+" "+qy[(e.month+1)%12],sb(e.year)],sb=e=>Gy[(e+6)%10]+" "+qy[(e+8)%12],ib=e=>Gy[2*(e-1)%10],ab=e=>{const t=Wy[(e+1)%12%6];let n="",r=0;for(let s=0;s<12;s++)"1"===t.charAt(s)&&(n+=qy[s],n+=" ("+(2*s+23)%24+"-"+(2*s+1)%24+")",r++<5&&(n+=", "),3===r&&(n+="\n"));return n},ob=(e,t)=>Xy(lb(e-.5-t/24)/Math.PI*12),lb=e=>{const t=(e-2451545)/36525,n=t*t,r=Math.PI/180,s=357.5291+35999.0503*t-1559e-7*n-48e-8*t*n,i=280.46645+36000.76983*t+3032e-7*n;let a=(1.9146-.004817*t-14e-6*n)*Math.sin(r*s);a=a+(.019993-101e-6*t)*Math.sin(2*r*s)+29e-5*Math.sin(3*r*s);let o=i+a;return o*=r,o-=2*Math.PI*Xy(o/(2*Math.PI)),o},cb=Yy(25,1,1800),ub=Yy(31,12,2199);function db(e,t){if(!t||!e)return"";const n=t.find((t=>t.canChi===e));return n&&n.quai?`${n.quai.van} - ${n.quai.khi}`:""}function hb(e,t,n){if(!e)return null;const r=e.canChi.split(" ")[0],s=e.canChi.split(" ")[1],i="Qu\xfd"===t&&"T\u1ef5"===n||"Qu\xfd"===t&&"H\u1ee3i"===n,a="Qu\xfd"===t&&"H\u1ee3i"===n,o="Qu\xfd"===t&&"S\u1eedu"===n,l="\u1ea4t"===t&&"M\xf9i"===n,c="K\u1ef7"===t&&"D\u1eadu"===n,u="\u1ea4t"===t&&"M\xe3o"===n,d="T\xe2n"===t&&"T\u1ef5"===n;if(i&&["Nh\xe2m","T\xfd","Qu\xfd"].includes(r))return{pham:!0,reason:"Qu\xfd T\u1ef5/H\u1ee3i - T\u1ecda Nh\xe2m/T\xfd/Qu\xfd"};if(a&&["S\u1eedu","C\u1ea5n","D\u1ea7n"].includes(s))return{pham:!0,reason:"Qu\xfd H\u1ee3i - T\u1ecda S\u1eedu/C\u1ea5n/D\u1ea7n"};if(o&&["Gi\xe1p","M\xe3o","\u1ea4t","Th\xecn","T\u1ed1n","T\u1ef5"].includes(s))return{pham:!0,reason:"Qu\xfd S\u1eedu - T\u1ecda Gi\xe1p/M\xe3o/\u1ea4t/Th\xecn/T\u1ed1n/T\u1ef5"};if(l&&["B\xednh","Ng\u1ecd","\u0110inh"].includes(r))return{pham:!0,reason:"\u1ea4t M\xf9i - T\u1ecda B\xednh/Ng\u1ecd/\u0110inh"};if(c&&["M\xf9i","Kh\xf4n","Th\xe2n"].includes(s))return{pham:!0,reason:"K\u1ef7 D\u1eadu - T\u1ecda M\xf9i/Kh\xf4n/Th\xe2n"};if(u&&["Canh","D\u1eadu","T\xe2n"].includes(r))return{pham:!0,reason:"\u1ea4t M\xe3o - T\u1ecda Canh/D\u1eadu/T\xe2n"};if(d&&["Tu\u1ea5t","C\xe0n","H\u1ee3i"].includes(s))return{pham:!0,reason:"T\xe2n T\u1ef5 - T\u1ecda Tu\u1ea5t/C\xe0n/H\u1ee3i"};let h="";return h=i?`Qu\xfd ${n} - T\u1ecda kh\xf4ng ph\u1ea3i Nh\xe2m/T\xfd/Qu\xfd`:a?"Qu\xfd H\u1ee3i - T\u1ecda kh\xf4ng ph\u1ea3i S\u1eedu/C\u1ea5n/D\u1ea7n":o?"Qu\xfd S\u1eedu - T\u1ecda kh\xf4ng ph\u1ea3i Gi\xe1p/M\xe3o/\u1ea4t/Th\xecn/T\u1ed1n/T\u1ef5":l?"\u1ea4t M\xf9i - T\u1ecda kh\xf4ng ph\u1ea3i B\xednh/Ng\u1ecd/\u0110inh":c?"K\u1ef7 D\u1eadu - T\u1ecda kh\xf4ng ph\u1ea3i M\xf9i/Kh\xf4n/Th\xe2n":u?"\u1ea4t M\xe3o - T\u1ecda kh\xf4ng ph\u1ea3i Canh/D\u1eadu/T\xe2n":d?"T\xe2n T\u1ef5 - T\u1ecda kh\xf4ng ph\u1ea3i Tu\u1ea5t/C\xe0n/H\u1ee3i":"Kh\xf4ng thu\u1ed9c c\xe1c tr\u01b0\u1eddng h\u1ee3p B\xe1t S\xe1t",{pham:!1,reason:h}}const mb=function(e){let{currentDate:n,onClose:r}=e;const[s,i]=(0,t.useState)(n.getFullYear()),[a,o]=(0,t.useState)(n.getMonth()),l=Array.from({length:31},((e,t)=>2e3+t));return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:(0,At.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg w-[90%] max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-white",children:"L\u1ecbch Pha Tr\u0103ng / \xc2m L\u1ecbch"}),(0,At.jsx)("button",{onClick:r,className:"text-white hover:text-yellow-400",children:(0,At.jsx)(ky,{className:"w-6 h-6"})})]}),(0,At.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,At.jsx)("select",{value:s,onChange:e=>i(Number(e.target.value)),className:"bg-gray-800 text-white px-3 py-2 rounded",children:l.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))}),(0,At.jsx)("select",{value:a,onChange:e=>o(Number(e.target.value)),className:"bg-gray-800 text-white px-3 py-2 rounded",children:["Th\xe1ng 1","Th\xe1ng 2","Th\xe1ng 3","Th\xe1ng 4","Th\xe1ng 5","Th\xe1ng 6","Th\xe1ng 7","Th\xe1ng 8","Th\xe1ng 9","Th\xe1ng 10","Th\xe1ng 11","Th\xe1ng 12"].map(((e,t)=>(0,At.jsx)("option",{value:t,children:e},t)))})]}),(0,At.jsxs)("div",{className:"grid grid-cols-7 gap-2 -mx-4",children:[["CN","T2","T3","T4","T5","T6","T7"].map((e=>(0,At.jsx)("div",{className:"text-center text-gray-400 text-sm py-2",children:e},e))),(()=>{const e=new Date(s,a+1,0).getDate(),t=[],n=new Date;for(let r=1;r<=e;r++){const e=Oy(new Date(s,a,r)),i=nb(r,a+1,s),o=Math.round(e<.5?2*e*100:2*(1-e)*100),l=(.00257+15e-5*Math.sin(2*e*Math.PI)).toFixed(6),c=r===n.getDate()&&a===n.getMonth()&&s===n.getFullYear();t.push({date:r,phase:e,emoji:Hy(e),illumination:o,distance:l,isToday:c,lunar:{day:i.day,month:i.month,year:i.year,leap:i.leap}})}return t})().map(((e,t)=>(0,At.jsxs)("div",{className:"aspect-square rounded-lg flex flex-col items-center justify-center p-1 transition-all duration-200 "+(e.isToday?"border-b-2 border-yellow-400 shadow-lg":"bg-gray-800"),children:[(0,At.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,At.jsx)("span",{className:"text-xs font-medium "+(e.isToday?"text-yellow-500 font-bold":"text-white"),children:e.date}),(0,At.jsx)("span",{className:"text-xs text-gray-400",children:"/"}),(0,At.jsx)("span",{className:"text-xs text-cyan-300",children:e.lunar.day})]}),(0,At.jsx)("span",{className:"text-lg mb-1",children:e.emoji}),(0,At.jsxs)("span",{className:"text-[10px] text-yellow-300",children:[e.illumination,"%"]})]},t)))]})]})})},Ab=JSON.parse('[{"name":"\u0110\u1ea1i H\xf9ng Tinh","englishName":"Ursa Major (Big Dipper)","stars":[{"name":"Dubhe (\u03b1 UMa)","position":[80,30,60]},{"name":"Merak (\u03b2 UMa)","position":[75,25,65]},{"name":"Phecda (\u03b3 UMa)","position":[70,20,70]},{"name":"Megrez (\u03b4 UMa)","position":[65,25,75]},{"name":"Alioth (\u03b5 UMa)","position":[60,30,80]},{"name":"Mizar (\u03b6 UMa)","position":[55,25,85]},{"name":"Alkaid (\u03b7 UMa)","position":[50,20,90]}],"lines":[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],"color":"#AAFFFF","description":"Ch\xf2m sao \u0110\u1ea1i H\xf9ng Tinh, c\xf2n g\u1ecdi l\xe0 G\u1ea5u L\u1edbn, l\xe0 m\u1ed9t trong nh\u1eefng ch\xf2m sao d\u1ec5 nh\u1eadn bi\u1ebft nh\u1ea5t tr\xean b\u1ea7u tr\u1eddi \u0111\xeam. Ph\u1ea7n \'G\xe1o N\u01b0\u1edbc L\u1edbn\' (Big Dipper) l\xe0 m\u1ed9t ph\u1ea7n c\u1ee7a ch\xf2m sao n\xe0y."},{"name":"Ti\u1ec3u H\xf9ng Tinh","englishName":"Ursa Minor (Little Dipper)","stars":[{"name":"Polaris (\u03b1 UMi)","position":[90,40,40]},{"name":"Kochab (\u03b2 UMi)","position":[85,45,45]},{"name":"Pherkad (\u03b3 UMi)","position":[80,50,50]},{"name":"Yildun (\u03b4 UMi)","position":[75,45,55]},{"name":"Epsilon UMi (\u03b5 UMi)","position":[70,40,60]},{"name":"Zeta UMi (\u03b6 UMi)","position":[65,45,65]},{"name":"Eta UMi (\u03b7 UMi)","position":[60,50,70]}],"lines":[[0,1],[1,2],[0,3],[3,4],[4,5],[5,6]],"color":"#FFAAAA","description":"Ch\xf2m sao Ti\u1ec3u H\xf9ng Tinh, hay G\u1ea5u Nh\u1ecf, ch\u1ee9a sao B\u1eafc C\u1ef1c (Polaris) - ng\xf4i sao \u0111\u1ecbnh h\u01b0\u1edbng quan tr\u1ecdng \u1edf b\xe1n c\u1ea7u b\u1eafc."},{"name":"Thi\xean V\u01b0\u01a1ng","englishName":"Cepheus","stars":[{"name":"Alderamin (\u03b1 Cep)","position":[95,35,20]},{"name":"Alfirk (\u03b2 Cep)","position":[92,40,25]},{"name":"Gamma Cep (\u03b3 Cep)","position":[97,38,18]},{"name":"Delta Cep (\u03b4 Cep)","position":[93,42,22]},{"name":"Epsilon Cep (\u03b5 Cep)","position":[90,37,27]}],"lines":[[0,1],[1,2],[2,0],[1,3],[3,4],[4,0]],"color":"#AAFFAA","description":"Ch\xf2m sao Thi\xean V\u01b0\u01a1ng (Cepheus) c\xf3 h\xecnh d\u1ea1ng gi\u1ed1ng ng\xf4i nh\xe0 v\u1edbi m\xe1i nh\u1ecdn. Trong th\u1ea7n tho\u1ea1i Hy L\u1ea1p, Cepheus l\xe0 vua c\u1ee7a Ethiopia."}]');new class{constructor(){this.fps=60,this.memoryUsage=0,this.isLowPerformance=!1,this.frameCount=0,this.lastTime=performance.now()}update(){this.frameCount++;const e=performance.now();return e-this.lastTime>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.lastTime=e,this.isLowPerformance=this.fps<30,performance.memory&&(this.memoryUsage=performance.memory.usedJSHeapSize/1024/1024)),{fps:this.fps,memoryUsage:this.memoryUsage,isLowPerformance:this.isLowPerformance}}getOptimalQuality(){return this.isLowPerformance||this.memoryUsage>200?"low":this.fps<45||this.memoryUsage>100?"medium":"high"}};const gb={camera:{defaultView:"custom",custom:{position:[0,30,20],up:[0,1,0]},earth:{position:[10.55,1.76,4.9],up:[0,1,0]},moon:{position:[10.55,1.5,4.5],up:[0,1,0]},solar:{position:[0,30,50],up:[0,1,0]}},speed:{rotation:{earth:1,moon:1/27.3,sun:.04,mercury:1/58.6,venus:1/243,mars:1/1.03,jupiter:1/.41,saturn:1/.45,uranus:1/.72,neptune:1/.67},orbit:{earth:1/365.25,moon:13.368,mercury:.240846/365.25,venus:.615/365.25,mars:1.881/365.25,jupiter:11.87/365.25,saturn:29.46/365.25,uranus:84.01/365.25,neptune:164.8/365.25},timeScale:365,timeScale100x:100,timeScale300x:300,rotationFactor:.01}},pb=10,fb=[{name:"Mercury",radius:.035,distance:4},{name:"Venus",radius:.087,distance:7.5},{name:"Earth",radius:.092,distance:12},{name:"Mars",radius:.049,distance:15.2},{name:"Jupiter",radius:1.02,distance:52/3},{name:"Saturn",radius:.86,distance:19},{name:"Uranus",radius:.37,distance:32},{name:"Neptune",radius:.36,distance:30}],xb={radius:.025,distance:.25};const vb=[{name:"Sao Th\u1ee7y",englishName:"Mercury",radius:.4,distance:4,color:"#A9A9A9",orbitalPeriod:88,tilt:.03,rotationSpeed:gb.speed.rotation.mercury,hasBumpMap:!0},{name:"Sao Kim",englishName:"Venus",radius:.6,distance:7,color:"#E6E6FA",orbitalPeriod:225,tilt:177.3,rotationSpeed:gb.speed.rotation.venus,hasBumpMap:!0},{name:"Tr\xe1i \u0110\u1ea5t",englishName:"Earth",radius:.6,distance:10,color:"#6495ED",orbitalPeriod:365,tilt:23.44,showCompass:!0,dayColor:"#6495ED",nightColor:"#001133",hasMoon:!0,rotationSpeed:gb.speed.rotation.earth,hasBumpMap:!0},{name:"Sao H\u1ecfa",englishName:"Mars",radius:.5,distance:14,color:"#CD5C5C",orbitalPeriod:687,tilt:25.19,rotationSpeed:gb.speed.rotation.mars,hasBumpMap:!0},{name:"Sao M\u1ed9c",englishName:"Jupiter",radius:1.2,distance:20,color:"#DEB887",orbitalPeriod:4333,tilt:3.13,rotationSpeed:gb.speed.rotation.jupiter,hasBumpMap:!0},{name:"Sao Th\u1ed5",englishName:"Saturn",radius:1,distance:25,color:"#F4A460",orbitalPeriod:10759,tilt:26.73,hasRings:!0,rotationSpeed:gb.speed.rotation.saturn,hasBumpMap:!0},{name:"Sao Thi\xean V\u01b0\u01a1ng",englishName:"Uranus",radius:.8,distance:30,color:"#87CEEB",orbitalPeriod:30687,tilt:97.77,rotationSpeed:gb.speed.rotation.uranus},{name:"Sao H\u1ea3i V\u01b0\u01a1ng",englishName:"Neptune",radius:.8,distance:35,color:"#1E90FF",orbitalPeriod:60190,tilt:28.32,rotationSpeed:gb.speed.rotation.neptune}],yb=[{name:"B\u1ea1ch D\u01b0\u01a1ng",englishName:"Aries",period:"21/3 - 19/4",stars:bb(0),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"L\u1eeda",symbol:"\u2648",color:"#FF5733"},{name:"Kim Ng\u01b0u",englishName:"Taurus",period:"20/4 - 20/5",stars:bb(1),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"\u0110\u1ea5t",symbol:"\u2649",color:"#33FF57"},{name:"Song T\u1eed",englishName:"Gemini",period:"21/5 - 20/6",stars:bb(2),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"Kh\xed",symbol:"\u264a",color:"#5733FF"},{name:"C\u1ef1 Gi\u1ea3i",englishName:"Cancer",period:"21/6 - 22/7",stars:bb(3),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"N\u01b0\u1edbc",symbol:"\u264b",color:"#33FFFF"},{name:"S\u01b0 T\u1eed",englishName:"Leo",period:"23/7 - 22/8",stars:bb(4),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"L\u1eeda",symbol:"\u264c",color:"#FFFF33"},{name:"X\u1eed N\u1eef",englishName:"Virgo",period:"23/8 - 22/9",stars:bb(5),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"\u0110\u1ea5t",symbol:"\u264d",color:"#FF33FF"},{name:"Thi\xean B\xecnh",englishName:"Libra",period:"23/9 - 22/10",stars:bb(6),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"Kh\xed",symbol:"\u264e",color:"#33FFAA"},{name:"B\u1ecd C\u1ea1p",englishName:"Scorpio",period:"23/10 - 21/11",stars:bb(7),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"N\u01b0\u1edbc",symbol:"\u264f",color:"#AA33FF"},{name:"Nh\xe2n M\xe3",englishName:"Sagittarius",period:"22/11 - 21/12",stars:bb(8),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"L\u1eeda",symbol:"\u2650",color:"#FF3333"},{name:"Ma K\u1ebft",englishName:"Capricorn",period:"22/12 - 19/1",stars:bb(9),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"\u0110\u1ea5t",symbol:"\u2651",color:"#33FF33"},{name:"B\u1ea3o B\xecnh",englishName:"Aquarius",period:"20/1 - 18/2",stars:bb(10),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"Kh\xed",symbol:"\u2652",color:"#3333FF"},{name:"Song Ng\u01b0",englishName:"Pisces",period:"19/2 - 20/3",stars:bb(11),lines:[[0,1],[1,2],[2,3],[3,4],[4,5],[5,6]],element:"N\u01b0\u1edbc",symbol:"\u2653",color:"#33AAFF"}];function bb(e){const t=30*e*Math.PI/180,n=[];for(let r=0;r<7;r++){const s=t+30*r/7*Math.PI/180,i=10*Math.random()-5+80,a=i*Math.cos(s),o=i*Math.sin(s),l=20*Math.random()-10;n.push({name:`Star-${e}-${r}`,position:[a,l,o]})}return n}function wb(e){const t=e.getMonth()+1,n=e.getDate();return 3===t&&n>=21||4===t&&n<=19?0:4===t&&n>=20||5===t&&n<=20?1:5===t&&n>=21||6===t&&n<=20?2:6===t&&n>=21||7===t&&n<=22?3:7===t&&n>=23||8===t&&n<=22?4:8===t&&n>=23||9===t&&n<=22?5:9===t&&n>=23||10===t&&n<=22?6:10===t&&n>=23||11===t&&n<=21?7:11===t&&n>=22||12===t&&n<=21?8:12===t&&n>=22||1===t&&n<=19?9:1===t&&n>=20||2===t&&n<=18?10:11}function Nb(e){let{viewMode:n,targetPosition:r,setTargetPosition:s}=e;const{camera:i}=Lx(),[a,o]=(0,t.useState)(!1),l=(0,t.useRef)(new Gi),c=(0,t.useRef)(new Gi),u=(0,t.useRef)(0);return(0,t.useEffect)((()=>{s("3d"===n?{position:gb.camera.solar.position,up:gb.camera.solar.up}:{position:[0,50,0],up:[0,0,-1]})}),[n,s]),(0,t.useEffect)((()=>{const e=gb.camera.defaultView;"earth"===e?s({position:gb.camera.earth.position,up:gb.camera.earth.up}):"custom"===e&&s({position:gb.camera.custom.position,up:gb.camera.custom.up})}),[s]),Ix((e=>{let{clock:t}=e;if(r&&a){const e=1e3*t.getElapsedTime()-u.current,s=Math.min(e/1e3,1),a=(n=s)<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,d=l.current.x+(r.position[0]-l.current.x)*a,h=l.current.y+(r.position[1]-l.current.y)*a,m=l.current.z+(r.position[2]-l.current.z)*a,A=c.current.x+(r.up[0]-c.current.x)*a,g=c.current.y+(r.up[1]-c.current.y)*a,p=c.current.z+(r.up[2]-c.current.z)*a;i.position.set(d,h,m),i.up.set(A,g,p),i.updateProjectionMatrix(),s>=1&&o(!1)}var n})),(0,t.useEffect)((()=>{r&&(l.current.copy(i.position),c.current.copy(i.up),u.current=performance.now(),o(!0))}),[r,i]),null}function jb(){const{camera:e}=Lx(),[n,r]=(0,t.useState)({position:[0,0,0],fov:60,up:[0,1,0],zoom:1});return Ix((()=>{r({position:[Math.round(100*e.position.x)/100,Math.round(100*e.position.y)/100,Math.round(100*e.position.z)/100],fov:Math.round(e.fov),up:[Math.round(100*e.up.x)/100,Math.round(100*e.up.y)/100,Math.round(100*e.up.z)/100],zoom:Math.round(100*e.zoom)/100})})),(0,At.jsx)(zv,{position:[0,0,0],style:{pointerEvents:"none"},children:(0,At.jsxs)("div",{className:"absolute bottom-4 left-4 bg-black bg-opacity-70 text-white p-3 rounded-lg text-xs font-mono w-[300px] translate-y-[400px] translate-x-[400px] hidden md:block opacity-10",children:[(0,At.jsxs)("div",{children:["Camera Position: [",n.position.join(", "),"]"]}),(0,At.jsxs)("div",{children:["FOV: ",n.fov,"\xb0"]})]})})}const Cb=new Rh,Tb=new Map;function Sb(e){if(Tb.has(e))return Tb.get(e);const t=Cb.load(e);return Tb.set(e,t),t}const _b={earth:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/earthmap1k_traiDat.jpg"),moon:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/moonmap1k_matTrang.jpg"),sun:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/sun.jpg"),mercury:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/mercurymap.jpg"),saturn:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/saturnmap_saoTho.jpg"),mars:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/marsmap1k_saoHoa.jpg"),jupiter:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/jupitermap_saoMoc.jpg"),venus:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/venusmap_saoKim.jpg"),neptune:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/neptunemap_saoHaiVuong.jpg"),uranus:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/uranusmap_saoThienVuong.jpg")},Eb={venus:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/venusbump_saoKim.jpg"),earth:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/earthbump1k_traiDat.jpg"),moon:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/moonbump1k_matTrang.jpg"),mars:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/marsbump1k_saoHoa.jpg"),mercury:Sb("https://stc-support-manage-brand.zdn.vn/medias/drive/2020/solar/mercurybump.jpg")};function Bb(e){let{timeScale:n=1,radius:r=.27,distance:s=1.5,isPaused:i=!1,onPlanetClick:a}=e;const o=(0,t.useRef)(null),l=(0,t.useRef)(null),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)([s,0,0]);Ix((e=>{let{clock:t}=e;if(i)return;const r=t.getElapsedTime()*n,a=2*Math.PI*(r/2360580),c=s*Math.cos(a),u=s*Math.sin(a);if(l.current&&l.current.position.set(c,0,u),h([c,0,u]),o.current){const e=2360580,t=2*Math.PI*(r/e);o.current.rotation.y=t}}));return(0,At.jsx)("group",{ref:l,children:(0,At.jsxs)("mesh",{ref:o,onPointerOver:()=>u(!0),onPointerOut:()=>u(!1),onClick:()=>{a&&a({name:"M\u1eb7t Tr\u0103ng",englishName:"Moon",radius:r,distance:s,orbitalPeriod:"27.3 ng\xe0y",rotationPeriod:"27.3 ng\xe0y",mass:"7.347 \xd7 10^22 kg",surfaceGravity:"1.62 m/s\xb2",averageTemperature:"-20\xb0C",atmosphere:"Kh\xf4ng \u0111\xe1ng k\u1ec3",description:"V\u1ec7 tinh t\u1ef1 nhi\xean duy nh\u1ea5t c\u1ee7a Tr\xe1i \u0110\u1ea5t. B\u1ec1 m\u1eb7t \u0111\u1ea7y h\u1ed1 va ch\u1ea1m v\xe0 kh\xf4ng c\xf3 kh\xed quy\u1ec3n \u0111\xe1ng k\u1ec3.",comparison:{size:"B\u1eb1ng 0.27 l\u1ea7n Tr\xe1i \u0110\u1ea5t",distance:"384,400 km"}})},children:[(0,At.jsx)("sphereGeometry",{args:[r,32,32]}),(0,At.jsx)("meshStandardMaterial",{map:_b.moon,bumpMap:Eb.moon,bumpScale:.05,emissive:c?"#FFFFFF":"black",emissiveIntensity:c?.3:0})]})})}function Mb(e){var n,r,s,i,a,o,l,c,u,d,h;let{timeScale:m=1,onReload:A,onLoad:g}=e;const[p,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)("3d"),[y,b]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)(new Date),[I,D]=(0,t.useState)(1),[P,F]=(0,t.useState)(!1),[U,R]=(0,t.useState)(new Date),[O,H]=(0,t.useState)(!1),[Q,z]=(0,t.useState)(null),[V,K]=(0,t.useState)(!1),G=(0,t.useRef)(null),q=(0,t.useRef)(null),W=(0,t.useRef)(0);(0,t.useEffect)((()=>{if(O)return;const e=t=>{W.current||(W.current=t);if(t-W.current>=1e3){L(new Date);const e=new Date(U.getTime()+1e3*I);R(e),W.current=t}q.current=requestAnimationFrame(e)};return q.current=requestAnimationFrame(e),()=>{q.current&&cancelAnimationFrame(q.current)}}),[I,U,O]);const[$,X]=(0,t.useState)(!0),Y=(0,t.useMemo)((()=>function(){const e=new Date("2000-01-01T12:00:00Z"),t=((new Date).getTime()-e.getTime())/864e5/365.25;return{mercury:t*gb.speed.orbit.mercury*360%360,venus:t*gb.speed.orbit.venus*360%360,earth:t*gb.speed.orbit.earth*360%360,mars:t*gb.speed.orbit.mars*360%360,jupiter:t*gb.speed.orbit.jupiter*360%360,saturn:t*gb.speed.orbit.saturn*360%360,uranus:t*gb.speed.orbit.uranus*360%360,neptune:t*gb.speed.orbit.neptune*360%360}}()),[]),J=fb;(0,t.useEffect)((()=>()=>{q.current&&cancelAnimationFrame(q.current)}),[]);const Z=e=>{z(e)},ee=Hy(Oy(new Date(k.getFullYear(),k.getMonth(),k.getDate())));return(0,At.jsxs)("div",{className:"w-full h-[85vh] md:h-[100vh] relative",ref:G,children:[(0,At.jsxs)("div",{className:"fixed top-16 left-6 text-white p-2 rounded z-40",children:[(0,At.jsxs)("div",{className:"flex items-center gap-8 md:gap-4",children:[(0,At.jsx)("div",{className:"cursor-pointer flex items-center justify-start p-1 "+(_?"text-yellow-400":"text-white"),onClick:()=>E(!_),children:_?(0,At.jsx)(ky,{className:"w-8 h-8 md:w-6 md:h-6"}):(0,At.jsx)(Iy,{className:"w-8 h-8 md:w-6 md:h-6"})}),(0,At.jsx)("button",{onClick:()=>K(!0),className:"text-blue-400 hover:text-blue-300 cursor-pointer flex items-center gap-2",children:(0,At.jsx)("span",{className:"text-[30px]",children:ee})}),(0,At.jsx)("button",{className:"text-blue-600 rounded",onClick:()=>{X(!$),M(!0===$?{position:gb.camera.earth.position,up:gb.camera.earth.up}:{position:gb.camera.solar.position,up:gb.camera.solar.up})},children:$?(0,At.jsx)(Py,{className:"w-8 h-8 md:w-6 md:h-6 text-white"}):(0,At.jsx)(Py,{className:"w-8 h-8 md:w-6 md:h-6 text-yellow-400"})})]}),_&&(0,At.jsxs)("div",{className:"flex flex-col gap-2 items-center bg-white bg-opacity-20 rounded p-4 text-sm font-normal",children:[(0,At.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 items-center",children:[(0,At.jsxs)("span",{children:["Ng\xe0y hi\u1ec7n t\u1ea1i: ",k.toLocaleDateString()]}),(0,At.jsxs)("span",{children:["Gi\u1edd hi\u1ec7n t\u1ea1i: ",k.toLocaleTimeString()]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("label",{htmlFor:"timeScaleSelect",className:"mr-2",children:"Th\u1eddi gian:"}),(0,At.jsxs)("select",{id:"timeScaleSelect",value:I,onChange:e=>{D(Number(e.target.value))},className:"text-black px-2 py-1 rounded",disabled:O,children:[(0,At.jsx)("option",{value:1,children:"1 gi\xe2y th\u1ef1c"}),(0,At.jsx)("option",{value:3600,children:"1 gi\u1edd/gi\xe2y"}),(0,At.jsx)("option",{value:86400,children:"1 ng\xe0y/gi\xe2y"}),(0,At.jsx)("option",{value:604800,children:"1 tu\u1ea7n/gi\xe2y"}),(0,At.jsx)("option",{value:2629746,children:"1 th\xe1ng/gi\xe2y"}),(0,At.jsx)("option",{value:31556952,children:"1 n\u0103m/gi\xe2y"})]}),(0,At.jsx)("button",{onClick:()=>{H(!O)},className:"px-2 py-1 rounded "+(O?"bg-red-500":"bg-green-500"),children:O?"Ti\u1ebfp t\u1ee5c":"T\u1ea1m d\u1eebng"})]}),(0,At.jsx)("div",{children:(0,At.jsxs)("span",{children:["Ng\xe0y m\xf4 ph\u1ecfng: ",U.toLocaleDateString("vi-VN")]})})]})]}),(0,At.jsxs)("div",{className:"fixed top-16 right-6 p-2 z-40 flex flex-col gap-2 text-xs font-normal w-[150px]",children:[(0,At.jsx)("div",{className:"cursor-pointer flex items-center justify-end p-1 "+(T?"text-yellow-400":"text-white"),onClick:()=>S(!T),children:T?(0,At.jsx)(ky,{className:"w-8 h-8 md:w-6 md:h-6"}):(0,At.jsx)(Uy,{className:"w-8 h-8 md:w-6 md:h-6"})}),T&&(0,At.jsxs)("div",{className:"absolute bg-white bg-opacity-20 top-12 right-4 rounded text-white p-1 z-40 flex flex-col gap-1 text-xs font-normal w-[150px]",children:[(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+("3d"===x?"text-yellow-400":"text-white"),onClick:()=>v("3d"===x?"top-down":"3d"),children:"3D"}),(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+(p?"text-yellow-400":"text-white"),onClick:()=>f(!p),children:"T\xean Sao"}),(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+(y?"text-yellow-400":"text-white"),onClick:()=>b(!y),children:"La b\xe0n"}),(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+(w?"text-yellow-400":"text-white"),onClick:()=>N(!w),children:"Ch\xf2m sao B\u1eafc"}),(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+(j?"text-yellow-400":"text-white"),onClick:()=>C(!j),children:"Cung ho\xe0ng \u0111\u1ea1o"}),(0,At.jsx)("button",{className:"w-full bg-black rounded p-2 "+(P?"text-yellow-400":"text-white"),onClick:()=>{F(!P)},children:"T\u1ef7 l\u1ec7 th\u1ef1c"})]})]}),(0,At.jsxs)(Mv,{camera:"earth"===gb.camera.defaultView?{position:gb.camera.earth.position,fov:60,up:gb.camera.earth.up}:"moon"===gb.camera.defaultView?{position:gb.camera.moon.position,fov:60,up:gb.camera.moon.up}:{position:gb.camera.solar.position,fov:60,up:gb.camera.solar.up},onCreated:()=>{g&&g()},gl:{antialias:!0,alpha:!0,powerPreference:"high-performance",preserveDrawingBuffer:!0},children:[(0,At.jsx)(Nb,{viewMode:x,targetPosition:B,setTargetPosition:M}),(0,At.jsx)(jb,{}),(0,At.jsx)("ambientLight",{intensity:.75}),(0,At.jsx)("pointLight",{position:[0,0,0],intensity:2,color:"#FFFF99"}),(0,At.jsx)(Ib,{showLabel:p,scale:P?pb:2.5,onPlanetClick:Z}),vb.map(((e,t)=>{const n=J.find((t=>t.name.toLowerCase()===e.englishName.toLowerCase()));return(0,At.jsx)(Db,{name:e.name,englishName:e.englishName,radius:P&&n?n.radius:e.radius,distance:P&&n?n.distance:e.distance,color:e.color,dayColor:e.dayColor,nightColor:e.nightColor,tilt:e.tilt,hasRings:e.hasRings,hasBumpMap:e.hasBumpMap,showCompass:e.showCompass&&y,showLabel:p,rotationSpeed:e.rotationSpeed,secondsPerSimulatedSecond:I,orbitSpeed:gb.speed.orbit[e.englishName.toLowerCase()],planetIndex:t,initialAngle:Y[e.englishName.toLowerCase()]||0,isScaled:P,isPaused:O,onPlanetClick:Z,selectedPlanet:Q},e.name)})),vb.map(((e,t)=>{const n=J.find((t=>t.name.toLowerCase()===e.englishName.toLowerCase()));return(0,At.jsx)(Pb,{distance:P&&n?n.distance:e.distance},`orbit-${e.name}`)})),w&&Ab.map((e=>(0,At.jsx)(Ub,{name:e.name,englishName:e.englishName,stars:e.stars,lines:e.lines,color:e.color,showLabel:p},e.name))),j&&yb.map(((e,t)=>(0,At.jsx)(Lb,{name:e.name,englishName:e.englishName,stars:e.stars,lines:e.lines,showLabel:p,period:e.period,element:e.element,symbol:e.symbol,color:e.color,isActive:t===wb(new Date)},e.name))),j&&(0,At.jsx)(kb,{}),(0,At.jsx)(qv,{radius:100,depth:50,count:5e3,factor:4}),(0,At.jsx)(sy,{enableZoom:!0,enablePan:!0,enableRotate:!0,zoomSpeed:.6,panSpeed:.5,rotateSpeed:.5,onChange:e=>{}})]}),(0,At.jsx)("div",{id:"infiPlanets",className:"absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 z-50",children:Q&&(0,At.jsxs)("div",{className:"bg-black bg-opacity-80 text-white p-4 rounded-lg w-[320px]",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h3",{className:"text-xl font-bold",children:Q.name}),(0,At.jsx)("button",{onClick:()=>{z(null)},className:"text-white hover:text-yellow-400",children:(0,At.jsx)(ky,{className:"w-6 h-6"})})]}),(0,At.jsxs)("div",{className:"space-y-2 text-sm font-normal text-left",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"T\xean ti\u1ebfng Anh:"})," ",Q.englishName]}),"Moon"===Q.englishName?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Kh\u1ed1i l\u01b0\u1ee3ng:"})," 7.347 \xd7 10^22 kg"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"M\u1eadt \u0111\u1ed9:"})," 3.34 g/cm\xb3"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Tr\u1ecdng l\u1ef1c b\u1ec1 m\u1eb7t:"})," 1.62 m/s\xb2"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"V\u1eadn t\u1ed1c tho\xe1t:"})," 2.38 km/s"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Nhi\u1ec7t \u0111\u1ed9 trung b\xecnh:"})," -20\xb0C"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Kh\xed quy\u1ec3n:"})," Kh\xf4ng \u0111\xe1ng k\u1ec3"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"S\u1ed1 m\u1eb7t tr\u0103ng:"})," 0"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"V\xe0nh \u0111ai:"})," Kh\xf4ng"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"M\xf4 t\u1ea3:"})," V\u1ec7 tinh t\u1ef1 nhi\xean duy nh\u1ea5t c\u1ee7a Tr\xe1i \u0110\u1ea5t. B\u1ec1 m\u1eb7t \u0111\u1ea7y h\u1ed1 va ch\u1ea1m v\xe0 kh\xf4ng c\xf3 kh\xed quy\u1ec3n \u0111\xe1ng k\u1ec3."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"So s\xe1nh:"})," B\u1eb1ng 0.27 l\u1ea7n Tr\xe1i \u0110\u1ea5t v\xe0 c\xe1ch Tr\xe1i \u0110\u1ea5t 384,400 km"]})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Kh\u1ed1i l\u01b0\u1ee3ng:"})," ",null===(n=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===n?void 0:n.mass]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"M\u1eadt \u0111\u1ed9:"})," ",null===(r=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===r?void 0:r.density]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Tr\u1ecdng l\u1ef1c b\u1ec1 m\u1eb7t:"})," ",null===(s=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===s?void 0:s.surfaceGravity]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"V\u1eadn t\u1ed1c tho\xe1t:"})," ",null===(i=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===i?void 0:i.escapeVelocity]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Nhi\u1ec7t \u0111\u1ed9 trung b\xecnh:"})," ",null===(a=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===a?void 0:a.averageTemperature]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"Kh\xed quy\u1ec3n:"})," ",null===(o=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===o?void 0:o.atmosphere]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"S\u1ed1 m\u1eb7t tr\u0103ng:"})," ",null===(l=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===l?void 0:l.moons]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"V\xe0nh \u0111ai:"})," ",null!==(c=Ry.W.find((e=>e.englishName===Q.englishName)))&&void 0!==c&&c.rings?"C\xf3":"Kh\xf4ng"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"M\xf4 t\u1ea3:"})," ",null===(u=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===u?void 0:u.description]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"So s\xe1nh:"})," ",null===(d=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===d?void 0:d.comparison.size," v\xe0 c\xe1ch Tr\xe1i \u0110\u1ea5t ",null===(h=Ry.W.find((e=>e.englishName===Q.englishName)))||void 0===h?void 0:h.comparison.distance]})]})]})]})}),V&&(0,At.jsx)("div",{className:"fixed inset-0 z-[9999]",children:(0,At.jsx)(mb,{currentDate:k,onClose:()=>K(!1)})})]})}function kb(){const e=(0,t.useMemo)((()=>{const e=[];for(let t=0;t<=72;t++){const n=t/72*Math.PI*2,r=80*Math.cos(n),s=80*Math.sin(n);e.push([r,0,s])}return e}),[]);return(0,At.jsx)(By,{points:e,color:"#FFAA00",lineWidth:1,opacity:.2,transparent:!0})}function Lb(e){let{name:n,englishName:r,stars:s,lines:i,showLabel:a=!0,period:o,element:l,symbol:c,color:u,isActive:d}=e;const[h,m]=(0,t.useState)(!1),A=(0,t.useMemo)((()=>[s.reduce(((e,t)=>e+t.position[0]),0)/s.length,s.reduce(((e,t)=>e+t.position[1]),0)/s.length,s.reduce(((e,t)=>e+t.position[2]),0)/s.length]),[s]);return(0,At.jsxs)("group",{onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),children:[s.map(((e,t)=>(0,At.jsxs)("mesh",{position:e.position,children:[(0,At.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,At.jsx)("meshBasicMaterial",{color:d?"#FFFFFF":"#CCCCCC"})]},t))),i.map(((e,t)=>{if(e[0]<0||e[0]>=s.length||e[1]<0||e[1]>=s.length)return null;const n=s[e[0]].position,r=s[e[1]].position;return(0,At.jsx)(By,{points:[n,r],color:d?u:"#4080FF",lineWidth:d?1.5:1,opacity:h||d?.8:.4,transparent:!0},t)})),a&&(0,At.jsx)(zv,{position:A,center:!0,children:(0,At.jsxs)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",color:d?u:h?"#FFFFFF":"#AAAAFF",transform:"translateY(-20px)",fontSize:"0.6rem",whiteSpace:"nowrap",fontWeight:d?"bold":"normal"},children:[c," ",n]})}),(h||d)&&(0,At.jsx)(zv,{position:[A[0],A[1]+5,A[2]],center:!0,children:(0,At.jsxs)("div",{className:"bg-black bg-opacity-70 text-white p-2 rounded text-xs w-[180px] space-y-2",children:[(0,At.jsxs)("div",{children:["Cung: ",n]}),(0,At.jsxs)("div",{children:["Th\u1eddi gian: ",o]}),(0,At.jsxs)("div",{children:["Nguy\xean t\u1ed1: ",l]})]})})]})}function Ib(e){let{showLabel:n=!0,scale:r,onPlanetClick:s}=e;const i=(0,t.useRef)(null),[a,o]=(0,t.useState)(.1),[l,c]=(0,t.useState)(!1);return Ix((e=>{let{clock:t}=e;if(i.current){const e=gb.speed.rotation.sun*gb.speed.timeScale*gb.speed.rotationFactor;i.current.rotation.y=t.getElapsedTime()*e;const n=t.getElapsedTime(),r=.5+.3*Math.sin(3*n)+.2*Math.sin(7.3*n);o(r)}})),(0,At.jsxs)("group",{children:[(0,At.jsxs)("mesh",{ref:i,position:[0,0,0],onPointerOver:()=>c(!0),onPointerOut:()=>c(!1),onClick:()=>s({name:"M\u1eb7t Tr\u1eddi",englishName:"Sun",radius:r,distance:0,color:"#FFFF99",orbitalPeriod:0,tilt:0,rotationSpeed:gb.speed.rotation.sun}),children:[(0,At.jsx)("sphereGeometry",{args:[r,32,32]}),(0,At.jsx)("meshStandardMaterial",{map:_b.sun,emissive:"#FFFF99",emissiveIntensity:l?.5:.01}),(0,At.jsx)("pointLight",{position:[0,0,0],intensity:1.5+a,color:"#FFFF99",distance:100})]}),(0,At.jsxs)("mesh",{position:[0,0,0],children:[(0,At.jsx)("sphereGeometry",{args:[1.01*r,32,32]}),(0,At.jsx)("meshBasicMaterial",{color:"#FFD700",transparent:!0,opacity:l?.3:.18+.12*a,blending:It})]}),n&&(0,At.jsx)(zv,{position:[0,0,0],center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#FFFF99",transform:"translateY(-20px)",fontSize:"10px",minWidth:"80px"},children:"M\u1eb7t Tr\u1eddi"})})]})}function Db(e){let{name:n,englishName:r,radius:s,distance:i,color:a,dayColor:o="#6495ED",nightColor:l="#001133",tilt:c,hasRings:u=!1,hasBumpMap:d=!1,showCompass:h=!1,showLabel:m=!0,rotationSpeed:A=.01,secondsPerSimulatedSecond:g=1,orbitSpeed:p=1,planetIndex:f=0,initialAngle:x=0,isScaled:v=!1,isPaused:y=!1,onPlanetClick:b,selectedPlanet:w}=e;const N=(0,t.useRef)(null),j=(0,t.useRef)(null),C=(0,t.useRef)(null),[T,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)([i,0,0]);(0,t.useRef)(0),(0,t.useRef)(0);Ix((e=>{let{clock:t}=e;if(y)return;const n=t.getElapsedTime()*g;let s;s="Earth"===r?31556736:31556736*Fb(r);const a=x*Math.PI/180+2*Math.PI*(n/s),o=i*Math.cos(a),l=i*Math.sin(a);if(j.current&&j.current.position.set(o,0,l),E([o,0,l]),N.current){let e=86400;"Earth"===r?e=86400:"Sun"===r?e=216e4:"Mercury"===r?e=5068800:"Venus"===r?e=20995200:"Mars"===r?e=88992:"Jupiter"===r?e=36840:"Saturn"===r?e=38880:"Uranus"===r?e=62208:"Neptune"===r&&(e=57960);const t=2*Math.PI*(n/e);N.current.rotation.y=t}}));const B=Ai.degToRad(23.44);return(0,At.jsxs)("group",{ref:j,children:["Earth"===r?(0,At.jsxs)("group",{rotation:[0,0,B],children:[(0,At.jsxs)("mesh",{ref:N,onClick:()=>b({name:n,englishName:r,radius:s,distance:i,color:a,dayColor:o,nightColor:l,tilt:c,hasRings:u,hasBumpMap:d,showCompass:h,rotationSpeed:A,orbitalPeriod:365.25*Fb(r)}),onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),children:[(0,At.jsx)("sphereGeometry",{args:[s,32,32]}),_b[r.toLowerCase()]?(0,At.jsx)("meshStandardMaterial",{map:_b[r.toLowerCase()],bumpMap:d?Eb[r.toLowerCase()]:null,bumpScale:1,emissive:T||(null===w||void 0===w?void 0:w.englishName)===r?a:"black",emissiveIntensity:T||(null===w||void 0===w?void 0:w.englishName)===r?.3:0}):(0,At.jsx)("meshStandardMaterial",{color:a,emissive:T||(null===w||void 0===w?void 0:w.englishName)===r?a:"black",emissiveIntensity:T||(null===w||void 0===w?void 0:w.englishName)===r?.3:0}),m&&(0,At.jsx)(zv,{position:[0,s+.2,0],center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs text-white",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",transform:"translateY(-20px)",fontSize:"10px",whiteSpace:"nowrap",minWidth:"80px"},children:"Tr\xe1i \u0110\u1ea5t"})})]}),(0,At.jsxs)("mesh",{children:[(0,At.jsx)("cylinderGeometry",{args:[.01,.01,1.5,10]}),(0,At.jsx)("meshBasicMaterial",{color:"white",opacity:.1,transparent:!0})]})]}):(0,At.jsxs)("group",{rotation:[c*Math.PI/180,0,0],children:[(0,At.jsxs)("mesh",{ref:N,onPointerOver:()=>S(!0),onPointerOut:()=>S(!1),onClick:()=>b({name:n,englishName:r,radius:s,distance:i,color:a,dayColor:o,nightColor:l,tilt:c,hasRings:u,hasBumpMap:d,showCompass:h,rotationSpeed:A,orbitalPeriod:365.25*Fb(r)}),children:[(0,At.jsx)("sphereGeometry",{args:[s,32,32]}),_b[r.toLowerCase()]?(0,At.jsx)("meshStandardMaterial",{map:_b[r.toLowerCase()],bumpMap:d?Eb[r.toLowerCase()]:null,bumpScale:.05,emissive:T||(null===w||void 0===w?void 0:w.englishName)===r?a:"black",emissiveIntensity:T||(null===w||void 0===w?void 0:w.englishName)===r?.3:0}):(0,At.jsx)("meshStandardMaterial",{color:a,emissive:T||(null===w||void 0===w?void 0:w.englishName)===r?a:"black",emissiveIntensity:T||(null===w||void 0===w?void 0:w.englishName)===r?.3:0})]}),u&&(0,At.jsxs)("mesh",{ref:C,rotation:[Math.PI/2,0,0],children:[(0,At.jsx)("ringGeometry",{args:[1.4*s,2.2*s,64]}),(0,At.jsx)("meshBasicMaterial",{color:"#F4A460",transparent:!0,opacity:.8,side:Mt})]})]}),"Earth"===r&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("mesh",{rotation:[Math.PI/2,0,0],position:[0,0,0],children:[(0,At.jsx)("ringGeometry",{args:[v?xb.distance:1.5,v?xb.distance+.02:1.52,64]}),(0,At.jsx)("meshBasicMaterial",{color:"#FFFFFF",opacity:.15,transparent:!0,side:Mt})]}),(0,At.jsx)(Bb,{timeScale:g,radius:v?xb.radius:.27,distance:v?xb.distance:1.5,isPaused:y,onPlanetClick:b}),m&&(0,At.jsx)(zv,{position:[1.55,0,0],center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs bg-black bg-opacity-50 text-white transform -translate-y-5 text-[8px] min-w-[80px]",children:"M\u1eb7t Tr\u0103ng"})})]}),h&&(0,At.jsx)(Rb,{radius:s}),m&&"Earth"!==r&&(0,At.jsx)(zv,{position:[0,0,0],center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs bg-black bg-opacity-50 text-white transform -translate-y-5 text-[8px] min-w-[80px]",children:n})})]})}function Pb(e){let{distance:t}=e;return(0,At.jsxs)("mesh",{rotation:[Math.PI/2,0,0],position:[0,0,0],children:[(0,At.jsx)("ringGeometry",{args:[t,t+.05,64]}),(0,At.jsx)("meshBasicMaterial",{color:"#FFFFFF",opacity:.1,transparent:!0,side:Mt})]})}function Fb(e){switch(e){case"Mercury":return.2408467;case"Venus":return.61519726;case"Earth":default:return 1;case"Mars":return 1.8808158;case"Jupiter":return 11.862615;case"Saturn":return 29.447498;case"Uranus":return 84.016846;case"Neptune":return 164.79132}}function Ub(e){let{name:n,englishName:r,stars:s,lines:i,showLabel:a=!0,color:o}=e;const[l,c]=(0,t.useState)(!1),u=(0,t.useMemo)((()=>[s.reduce(((e,t)=>e+t.position[0]),0)/s.length,s.reduce(((e,t)=>e+t.position[1]),0)/s.length,s.reduce(((e,t)=>e+t.position[2]),0)/s.length]),[s]);return(0,At.jsxs)("group",{onPointerOver:()=>c(!0),onPointerOut:()=>c(!1),children:[s.map(((e,t)=>(0,At.jsxs)("mesh",{position:e.position,children:[(0,At.jsx)("sphereGeometry",{args:[.3,16,16]}),(0,At.jsx)("meshBasicMaterial",{color:"#FFFFFF"})]},t))),i.map(((e,t)=>{const n=s[e[0]].position,r=s[e[1]].position;return(0,At.jsx)(By,{points:[n,r],color:o,lineWidth:1,opacity:l?.8:1,transparent:!0},t)})),a&&(0,At.jsx)(zv,{position:u,center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",color:l?"#FFFFFF":"#AAAAFF",transform:"translateY(-20px)",fontSize:"10px",whiteSpace:"nowrap",minWidth:"80px"},children:n})})]})}function Rb(e){let{radius:n}=e;const{camera:r}=Lx(),s=(0,t.useRef)(null),i=((0,t.useRef)(null),[0,0,1.5*-n]),a=[0,0,1.5*n],o=[1.5*n,0,0],l=[1.5*-n,0,0];return Ix((()=>{if(s.current){const e=new Gi;r.getWorldPosition(e);const t=new Gi;t.subVectors(e,s.current.position),t.normalize();const n=new Ki;n.setFromUnitVectors(new Gi(0,1,0),t),s.current.quaternion.copy(n)}})),(0,At.jsxs)("group",{ref:s,position:[0,2*n,0],children:[(0,At.jsxs)("mesh",{rotation:[Math.PI/2,0,0],children:[(0,At.jsx)("ringGeometry",{args:[1.2*n,1.3*n,32]}),(0,At.jsx)("meshBasicMaterial",{color:"#FFFFFF",opacity:.5,transparent:!0,side:Mt})]}),(0,At.jsx)("group",{children:(0,At.jsxs)("mesh",{children:[(0,At.jsx)("sphereGeometry",{args:[.1*n,16,16]}),(0,At.jsx)("meshBasicMaterial",{color:"#CCCCCC"})]})}),(0,At.jsx)(By,{points:[[0,0,0],i],color:"blue",lineWidth:2}),(0,At.jsx)(By,{points:[[0,0,0],a],color:"red",lineWidth:2}),(0,At.jsx)(By,{points:[[0,0,0],o],color:"green",lineWidth:2}),(0,At.jsx)(By,{points:[[0,0,0],l],color:"white",lineWidth:2}),(0,At.jsx)(zv,{position:i,color:"yellow",lineWidth:2}),(0,At.jsx)(zv,{position:i,center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:"blue"},children:"B"})}),(0,At.jsx)(zv,{position:a,center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:"red"},children:"N"})}),(0,At.jsx)(zv,{position:o,center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:"green"},children:"\u0110"})}),(0,At.jsx)(zv,{position:l,center:!0,children:(0,At.jsx)("div",{className:"px-1 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white"},children:"T"})})]})}const Ob=function(){const[e,n]=(0,t.useState)(!0),[r,s]=(0,t.useState)(!0),i=(0,t.useRef)(null);return(0,t.useLayoutEffect)((()=>(sessionStorage.getItem("solarRefreshed")?sessionStorage.removeItem("solarRefreshed"):(sessionStorage.setItem("solarRefreshed","true"),window.location.reload()),()=>{Tb.forEach((e=>{e&&e.dispose&&e.dispose()})),Tb.clear()})),[]),(0,At.jsxs)("div",{className:"w-full h-[85vh] md:h-[100vh] relative",ref:i,children:[e?(0,At.jsx)(Mb,{onReload:()=>{n(!1),s(!0),setTimeout((()=>{n(!0)}),100)},onLoad:()=>s(!1)}):(0,At.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,At.jsx)("div",{className:"text-white",children:"\u0110ang t\u1ea3i l\u1ea1i..."})}),r&&(0,At.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,At.jsx)("div",{className:"text-white text-xl",children:"\u0110ang t\u1ea3i h\u1ec7 m\u1eb7t tr\u1eddi..."})})]})};var Hb=n(220),Qb=n(469);const zb=new Map;new Map;let Vb=null,Kb=!1;const Gb=e=>{const n=Y(),r=(0,t.useRef)(new Set),s=(0,t.useRef)(0),i=(0,t.useCallback)((()=>{if(!e||!Qb.db)return;if(!qb(n.pathname,e))return;const t=Date.now();if(t-s.current<1e4)return;s.current=t;const i=`${e}_${Math.floor(t/6e4)}`;r.current.has(i)||(r.current.add(i),Wb(e))}),[e,n.pathname]);(0,t.useEffect)((()=>{i()}),[i]),(0,t.useEffect)((()=>()=>{zb.size>0&&Xb()}),[])},qb=(e,t)=>({"/":"solar","/solar":"solar","/calendar":"calendar","/lich-viet":"lich-viet","/battu":"battu","/lakinh":"lakinh","/luchao":"luchao","/kymon":"kymon","/profile":"profile","/news":"news"}[e]===t),Wb=e=>{const t=zb.get(e)||0;zb.set(e,t+1),$b(),Jb(e)},$b=()=>{Vb&&clearTimeout(Vb),Vb=setTimeout((async()=>{await Xb()}),3e4),zb.size>=50&&(clearTimeout(Vb),Xb())},Xb=async()=>{if(0===zb.size||Kb)return;Kb=!0;const e=Array.from(zb.entries()),t=e.reduce(((e,t)=>{let[,n]=t;return e+n}),0);try{const r=(0,Hb.wP)(Qb.db),s=new Date;for(const[t,o]of e){const e=(0,Hb.doc)(Qb.db,"pageVisits",t);try{(await(0,Hb.getDoc)(e)).exists()?r.update(e,{count:(0,Hb.GV)(o),lastVisited:s,batchUpdatedAt:s,lastBatchSize:o}):r.set(e,{count:o,pageName:t,lastVisited:s,createdAt:s,batchUpdatedAt:s,lastBatchSize:o})}catch(n){r.update(e,{count:(0,Hb.GV)(o),lastVisited:s,batchUpdatedAt:s})}}const i=r.commit(),a=new Promise(((e,t)=>setTimeout((()=>t(new Error("Batch timeout"))),5e3)));await Promise.race([i,a]),zb.clear(),Zb(),tw(e.length,t,!0)}catch(r){console.error("\u274c Batch update failed:",r),await Yb(e),tw(e.length,t,!1)}finally{Kb=!1}},Yb=async e=>{for(const[n,r]of e)try{const e=(0,Hb.doc)(Qb.db,"pageVisits",n);(await(0,Hb.getDoc)(e)).exists()?await(0,Hb.mZ)(e,{count:(0,Hb.GV)(r),lastVisited:new Date,fallbackUpdate:!0}):await(0,Hb.BN)(e,{count:r,pageName:n,lastVisited:new Date,createdAt:new Date,fallbackUpdate:!0})}catch(t){console.error(`\u274c Fallback failed for ${n}:`,t),ew(n,r)}zb.clear()},Jb=e=>{try{const t=JSON.parse(localStorage.getItem("visit_backup")||"{}");t[e]=(t[e]||0)+1,t._timestamp=Date.now(),localStorage.setItem("visit_backup",JSON.stringify(t))}catch(t){}},Zb=()=>{try{localStorage.removeItem("visit_backup")}catch(e){}},ew=(e,t)=>{try{const n=JSON.parse(localStorage.getItem("failed_visits")||"{}");n[e]=(n[e]||0)+t,n._timestamp=Date.now(),localStorage.setItem("failed_visits",JSON.stringify(n))}catch(n){}},tw=(e,t,n)=>{try{const r={timestamp:Date.now(),pageCount:e,visitCount:t,success:n,queueSize:zb.size},s=JSON.parse(localStorage.getItem("batch_metrics")||"[]");s.push(r),s.length>100&&s.splice(0,s.length-100),localStorage.setItem("batch_metrics",JSON.stringify(s))}catch(r){}};"undefined"!==typeof window&&(setTimeout((async()=>{try{const e=JSON.parse(localStorage.getItem("failed_visits")||"{}"),t=Object.keys(e).filter((e=>"_timestamp"!==e));if(0===t.length)return;for(const n of t)Wb(n,e[n]);localStorage.removeItem("failed_visits"),await Xb()}catch(e){console.error("Failed to recover visits:",e)}}),2e3),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&zb.size>0&&Xb()})),window.addEventListener("beforeunload",(()=>{if(zb.size>0){const e=Object.fromEntries(zb);localStorage.setItem("pending_visits",JSON.stringify({...e,_timestamp:Date.now()}))}})));var nw=n(45);const rw="viettaquang.design@gmail.com",sw=e=>e?e instanceof Date?e:e&&"function"===typeof e.toDate?e.toDate():"number"===typeof e||"string"===typeof e?new Date(e):null:null,iw=e=>{const t=sw(e);if(!t)return"";try{return t.toLocaleDateString("vi-VN")}catch(n){return t.toLocaleDateString()}},aw=e=>{const t=sw(e);if(!t)return"";try{return t.toLocaleTimeString("vi-VN")}catch(n){return t.toLocaleTimeString()}},ow=async(e,t)=>{if(!e||!t)return{isVerified:!1,firebaseVerified:!1,adminVerified:!1,source:"none"};const n=e.emailVerified;let r=!1,s=null;if(Qb.db)try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",t));if(e.exists()){const t=e.data();r=t.adminVerifiedEmail||!1,s=t.adminVerifiedAt}}catch(a){console.error("L\u1ed7i ki\u1ec3m tra admin verification:",a)}let i="none";n&&r?i="both":n?i="firebase":r&&(i="admin");return{isVerified:n||r,firebaseVerified:n,adminVerified:r,adminVerifiedAt:s,source:i}},lw=async function(e){if(Qb.db&&e)try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(t.exists()){t.data()}}catch(t){}},cw=()=>{const e=window.location.hostname,t=["localhost","127.0.0.1","thiendianhan-app.firebaseapp.com","thiendianhan.vercel.app"].includes(e);return t},uw=2592e6;const dw=new class{constructor(){this.storageKey="article_access_cache",this.configKey="article_access_config",this.configCache=null,this.configLastFetch=0,this.CONFIG_CACHE_DURATION=3e5}async getAccessDuration(){try{const e=Date.now();if(this.configCache&&e-this.configLastFetch<this.CONFIG_CACHE_DURATION)return this.configCache;const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"adminConfig","articleAccess"));if(t.exists()){const n=24*t.data().accessDurationDays*60*60*1e3;return this.configCache=n,this.configLastFetch=e,n}return this.configCache=uw,this.configLastFetch=e,uw}catch(e){return console.error("Error loading access duration config:",e),uw}}clearConfigCache(){this.configCache=null,this.configLastFetch=0}async getAccessConfig(){try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"adminConfig","articleAccess"));if(e.exists()){const t=e.data();return{accessDurationDays:t.accessDurationDays||30,enabled:void 0===t.enabled||t.enabled,lastUpdated:t.lastUpdated,updatedBy:t.updatedBy}}return{accessDurationDays:30,enabled:!0,lastUpdated:null,updatedBy:null}}catch(e){return console.error("Error loading access config:",e),{accessDurationDays:30,enabled:!0,lastUpdated:null,updatedBy:null}}}async hasAccess(e,t){if(!e||!t)return!1;try{const n=this.getLocalAccess(e,t);if(n&&n.expiresAt>Date.now())return!0;const r=await this.getDatabaseAccess(e,t);return!!(r&&r.expiresAt>Date.now())&&(this.setLocalAccess(e,t,r.expiresAt),!0)}catch(n){return console.error("Error checking article access:",n),!1}}async grantAccess(e,t,n,r){if(!e||!t)return!1;try{const s=await this.getAccessDuration(),i=Date.now()+s;return await this.saveDatabaseAccess(e,t,i,n,r),this.setLocalAccess(e,t,i),{success:!0,expiresAt:i}}catch(s){return console.error("Error granting article access:",s),{success:!1,error:s.message}}}getLocalAccess(e,t){try{const n=localStorage.getItem(this.storageKey);if(!n)return null;const r=JSON.parse(n);return r[`${e}_${t}`]||null}catch(n){return console.error("Error reading local access cache:",n),null}}setLocalAccess(e,t,n){try{const r=localStorage.getItem(this.storageKey),s=r?JSON.parse(r):{};s[`${e}_${t}`]={expiresAt:n,grantedAt:Date.now()},localStorage.setItem(this.storageKey,JSON.stringify(s))}catch(r){console.error("Error saving local access cache:",r)}}async getDatabaseAccess(e,t){try{const s=(0,Hb.doc)(Qb.db,"articleAccess",`${e}_${t}`),i=await(0,Hb.getDoc)(s);if(i.exists()){var n,r;const e=i.data();return{expiresAt:(null===(n=e.expiresAt)||void 0===n?void 0:n.toMillis())||0,grantedAt:(null===(r=e.grantedAt)||void 0===r?void 0:r.toMillis())||0}}return null}catch(s){return console.error("Error getting database access:",s),null}}async saveDatabaseAccess(e,t,n,r,s){try{const i=(0,Hb.doc)(Qb.db,"articleAccess",`${e}_${t}`);await(0,Hb.BN)(i,{articleId:e,userId:t,articleTitle:s,starCost:r,grantedAt:(0,Hb.O5)(),expiresAt:new Date(n),lastAccessed:(0,Hb.O5)()})}catch(i){throw console.error("Error saving database access:",i),i}}async updateLastAccessed(e,t){try{const n=(0,Hb.doc)(Qb.db,"articleAccess",`${e}_${t}`);await(0,Hb.mZ)(n,{lastAccessed:(0,Hb.O5)()})}catch(n){console.error("Error updating last accessed:",n)}}cleanupExpiredCache(){try{const e=localStorage.getItem(this.storageKey);if(!e)return;const t=JSON.parse(e),n=Date.now(),r={};Object.keys(t).forEach((e=>{const s=t[e];s.expiresAt>n&&(r[e]=s)})),localStorage.setItem(this.storageKey,JSON.stringify(r))}catch(e){console.error("Error cleaning up expired cache:",e)}}clearUserAccess(e){try{const t=localStorage.getItem(this.storageKey);if(!t)return;const n=JSON.parse(t),r={};Object.keys(n).forEach((t=>{t.endsWith(`_${e}`)||(r[t]=n[t])})),localStorage.setItem(this.storageKey,JSON.stringify(r))}catch(t){console.error("Error clearing user access:",t)}}getAccessInfo(e,t){const n=this.getLocalAccess(e,t);if(!n)return null;const r=Date.now(),s=n.expiresAt,i=Math.ceil((s-r)/864e5);return{hasAccess:s>r,expiresAt:s,daysLeft:Math.max(0,i),grantedAt:n.grantedAt}}async refreshAccessInfo(e,t){try{const n=await this.getDatabaseAccess(e,t);if(n&&n.expiresAt>Date.now()){this.setLocalAccess(e,t,n.expiresAt);const r=Date.now(),s=n.expiresAt,i=Math.ceil((s-r)/864e5);return{hasAccess:s>r,expiresAt:s,daysLeft:Math.max(0,i),grantedAt:n.grantedAt}}return null}catch(n){return console.error("Error refreshing access info:",n),null}}async migrateExistingAccess(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{const t=await this.getAccessConfig(),n=24*t.accessDurationDays*60*60*1e3;console.log(`\ud83d\udd04 Starting migration to ${t.accessDurationDays} days access duration`);const r=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleAccess"),(0,Hb._M)("expiresAt",">",new Date)),s=await(0,Hb.GG)(r);if(s.empty)return console.log("\u2705 No active access records found to migrate"),{success:!0,migrated:0,total:0};const i=(0,Hb.wP)(Qb.db);let a=0;const o=s.size;return s.forEach((r=>{const s=r.data(),o=s.expiresAt.toMillis(),l=s.grantedAt.toMillis()+n;(!e||l>o)&&(i.update(r.ref,{expiresAt:new Date(l),migratedAt:(0,Hb.O5)(),previousExpiresAt:s.expiresAt,migrationReason:`Updated to ${t.accessDurationDays} days duration`}),a++)})),a>0?(await i.commit(),console.log(`\u2705 Successfully migrated ${a}/${o} access records`),this.clearLocalCache()):console.log("\u2139\ufe0f No access records needed migration"),{success:!0,migrated:a,total:o}}catch(t){return console.error("\u274c Error migrating access records:",t),{success:!1,error:t.message,migrated:0,total:0}}}clearLocalCache(){try{localStorage.removeItem(this.storageKey),console.log("\ud83d\uddd1\ufe0f Cleared local access cache")}catch(e){console.error("Error clearing local cache:",e)}}async updateUserAccessDuration(e,t){try{const n=`${e}_${t}`,r=(0,Hb.doc)(Qb.db,"articleAccess",n),s=await(0,Hb.getDoc)(r);if(!s.exists())return{success:!1,error:"Access record not found"};const i=s.data(),a=i.grantedAt.toMillis(),o=a+await this.getAccessDuration();return await(0,Hb.mZ)(r,{expiresAt:new Date(o),migratedAt:(0,Hb.O5)(),previousExpiresAt:i.expiresAt,migrationReason:"Individual access duration update"}),this.setLocalAccess(e,t,o),{success:!0,newExpiresAt:o}}catch(n){return console.error("Error updating user access duration:",n),{success:!1,error:n.message}}}},hw=dw,mw=(0,t.createContext)();function Aw(){return(0,t.useContext)(mw)}function gw(e){let{children:n}=e;const[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)({}),[d,h]=(0,t.useState)(!1),[m,A]=(0,t.useState)("basic"),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(0),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(!1),[S,_]=(0,t.useState)(!1),E={home:!0,calendar:!0,solar:!0,battu:!0,luchao:!0,lakinh:!1,kymon:!1,profile:!0},B={home:!0,calendar:!0,solar:!0,battu:!0,luchao:!0,lakinh:!0,kymon:!0,profile:!0},[M,k]=(0,t.useState)({basic:{label:"Basic",icon:"\u2b50",color:"gray",duration:30,maxStars:20,resetPeriod:"monthly"},standard:{label:"Standard",icon:"\ud83c\udf1f",color:"blue",duration:30,maxStars:200,resetPeriod:"monthly"},premium:{label:"Premium",icon:"\ud83d\udc8e",color:"purple",duration:365,maxStars:3e3,resetPeriod:"yearly"},master:{label:"Master",icon:"\ud83d\udc51",color:"yellow",duration:365,maxStars:200,resetPeriod:"daily"},sponsor:{label:"Sponsor",icon:"\ud83c\udfc5",color:"orange",duration:365,maxStars:5e3,resetPeriod:"yearly"}}),L=async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","membershipPackages"));if(e.exists()){const t=e.data().packages,n={};Object.entries(t).forEach((e=>{let[t,r]=e;n[t]={label:r.name,icon:r.icon,color:r.color,duration:r.duration,maxStars:r.maxStars,resetPeriod:r.resetPeriod}})),k(n)}}catch(e){console.error("Error loading membership tiers:",e)}},I={...M,admin:{label:"Admin",icon:"\ud83d\udc51",color:"purple",duration:0,maxStars:999999,resetPeriod:"never"}},D=async e=>{try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","dailyRewards"));if(!t.exists()||!t.data().enabled)return!1;const n=t.data(),r=n.intervalMode||"daily",s=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(!s.exists())return!1;const i=s.data().dailyLoginStreak||{};if(!i.lastRewardDate)return!0;const a=i.lastRewardDate.toDate?i.lastRewardDate.toDate():new Date(i.lastRewardDate),o=new Date;if("daily"===r){o.setHours(0,0,0,0),a.setHours(0,0,0,0);return Math.floor((o-a)/864e5)>=1}if("interval"===r){const e=n.claimInterval||6;return(o-a)/36e5>=e}return!1}catch(t){return console.error("Error checking daily reward eligibility:",t),!1}};async function P(e){if(!e||!Qb.db)return!1;try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("username","==",e.toLowerCase()));return!(await(0,Hb.GG)(t)).empty}catch(t){return console.error("L\u1ed7i ki\u1ec3m tra username:",t),!1}}async function F(e){if(!e||!Qb.db)return null;try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("username","==",e.toLowerCase())),n=await(0,Hb.GG)(t);if(!n.empty){const e=n.docs[0];return{id:e.id,...e.data()}}return null}catch(t){return console.error("L\u1ed7i t\xecm user b\u1eb1ng username:",t),null}}async function U(e){if(!e||!Qb.db)return null;try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("displayName","==",e)),n=await(0,Hb.GG)(t);if(!n.empty){const e=n.docs[0];return{id:e.id,...e.data()}}const r=(0,Hb.P)((0,Hb.rJ)(Qb.db,"profiles"),(0,Hb._M)("displayName","==",e)),s=await(0,Hb.GG)(r);if(!s.empty){const e=s.docs[0].data();if(e.userId){const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e.userId));if(t.exists())return{id:t.id,...t.data()}}}return null}catch(t){return console.error("L\u1ed7i t\xecm user b\u1eb1ng displayName:",t),null}}function R(e,t){return e&&e.trim()?e.toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20):t.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,"").substring(0,20)}async function O(){if(Qb.auth)try{r&&await lw(r.uid,"AuthContext-beforeLogout");if("clearAppBadge"in navigator&&window.matchMedia("(display-mode: standalone)").matches)try{navigator.clearAppBadge()}catch(e){}if($(),localStorage.removeItem("loginTime"),localStorage.removeItem("loginExpiration"),localStorage.removeItem("isAuthenticated"),null!==r&&void 0!==r&&r.uid){const e=[];for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith("article_paid_")&&n.endsWith(`_${r.uid}`)&&e.push(n)}e.forEach((e=>sessionStorage.removeItem(e))),hw.clearUserAccess(r.uid)}return await(0,nw.CI)(Qb.auth),s(null),l(!1),u({}),A("basic"),p(null),x(0),y(null),h(!1),{message:"\u0110\u0103ng xu\u1ea5t th\xe0nh c\xf4ng!"}}catch(e){if(console.error("L\u1ed7i \u0111\u0103ng xu\u1ea5t:",e),$(),null!==r&&void 0!==r&&r.uid){const e=[];for(let t=0;t<sessionStorage.length;t++){const n=sessionStorage.key(t);n&&n.startsWith("article_paid_")&&n.endsWith(`_${r.uid}`)&&e.push(n)}e.forEach((e=>sessionStorage.removeItem(e))),hw.clearUserAccess(r.uid)}try{await(0,nw.CI)(Qb.auth)}catch(t){console.error("L\u1ed7i signOut:",t)}return s(null),l(!1),u({}),A("basic"),p(null),x(0),y(null),h(!1),{message:"\u0110\xe3 \u0111\u0103ng xu\u1ea5t (c\xf3 l\u1ed7i nh\u01b0ng v\u1eabn clear state)"}}}async function H(e,t){if(Qb.db&&e)try{var n;const r=(0,Hb.doc)(Qb.db,"users",e.uid),s=await(0,Hb.getDoc)(r),i=R(e.displayName||"",e.email||"");let a=i;if(!s.exists()){let e=1;for(;await P(a);)a=`${i}${e}`,e++}const o={email:e.email,displayName:e.displayName||"",photoURL:e.photoURL||"",emailVerified:e.emailVerified,loginProvider:t,updatedAt:(0,Hb.O5)(),lastLoginAt:(0,Hb.O5)(),...s.exists()?{}:{username:a,membershipTier:"basic",membershipExpiry:null,permissions:E,stars:(null===(n=M.basic)||void 0===n?void 0:n.maxStars)||20,starsLastReset:(0,Hb.O5)(),createdAt:(0,Hb.O5)(),isActive:!0,disabled:!1,dailyLoginStreak:{currentStreak:0,longestStreak:0,lastLoginDate:null,lastRewardDate:null}}};await(0,Hb.BN)(r,o,{merge:!0});const l=(new Date).getTime(),c=(new Date).getTime()+864e5;localStorage.setItem("loginTime",l.toString()),localStorage.setItem("loginExpiration",c.toString())}catch(r){throw console.error(`\u274c Error creating ${t} user profile:`,r),r}}function Q(){if("true"===localStorage.getItem("isAuthenticated"))return!1;const e=localStorage.getItem("loginExpiration");if(!e)return!1;return(new Date).getTime()>parseInt(e)}async function z(e){var t;if(!Qb.db||!e)return u(E),A("basic"),p(null),x((null===(t=M.basic)||void 0===t?void 0:t.maxStars)||20),y(null),void h(!1);try{j(e),h(!0);const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(N!==e)return;if(t.exists()){var n,r,s,i;const a=t.data(),o=a.disabled||!1;if(_(o),o)return u({}),A("basic"),p(null),x(0),void y(null);const l=a.membershipTier||"basic",c=(null===(n=a.membershipExpiry)||void 0===n?void 0:n.toDate())||null,d=await X(e,l,c);let h=a;if(d){const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));h=t.exists()?t.data():a}let m=h.membershipTier||"basic";q()&&"admin"!==m&&(m="admin",await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),{membershipTier:"admin",membershipExpiry:null,stars:999999,updatedAt:(0,Hb.O5)()},{merge:!0}));const g=K(h.permissions||E,m,(null===(r=h.membershipExpiry)||void 0===r?void 0:r.toDate())||null);u(g),A(m),p((null===(s=h.membershipExpiry)||void 0===s?void 0:s.toDate())||null),x(h.stars||10),y((null===(i=h.starsLastReset)||void 0===i?void 0:i.toDate())||null);const f=h.starsLastReset;V(e,m,f,h).then((e=>{})).catch((e=>{console.error("\u274c Error handling stars reset on login:",e)})),setTimeout((async()=>{try{await D(e)&&T(!0)}catch(t){console.error("Error checking daily reward eligibility:",t)}}),3e3)}else{const t=new Date,n=q(),r={uid:e,emailVerified:!1,createdAt:(0,Hb.O5)(),permissions:n?B:E,membershipTier:n?"admin":"basic",membershipExpiry:n?null:new Date(t.getTime()+2592e6),stars:n?999999:10,starsLastReset:(0,Hb.O5)(),starsResetDate:n?null:new Date(t.getTime()+2592e6)};await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),r),u(n?B:E),A(n?"admin":"basic"),p(r.membershipExpiry),x(n?999999:10),y(t)}}catch(a){console.error("L\u1ed7i khi t\u1ea3i quy\u1ec1n truy c\u1eadp:",a),u(E),A("basic"),p(null),x(10),y(null)}finally{h(!1)}}async function V(e,t,n,r){if(!I[t]||!Qb.db||!e)return!1;if(q())return!1;const s=I[t],i=new Date;let a=!1,o=null;const l=r.stars||0,c=r.adminStars||0;if(n||0!==l){if(n){const e=n.toDate?n.toDate():new Date(n);switch(s.resetPeriod){case"daily":a=i.toDateString()!==e.toDateString(),o=new Date(i.setHours(24,0,0,0));break;case"weekly":const t=new Date(i);t.setDate(i.getDate()-i.getDay());const n=new Date(e);n.setDate(e.getDate()-e.getDay()),a=t.getTime()!==n.getTime(),o=new Date(i.getTime()+24*(7-i.getDay())*60*60*1e3);break;case"monthly":a=i.getMonth()!==e.getMonth()||i.getFullYear()!==e.getFullYear(),o=new Date(i.getFullYear(),i.getMonth()+1,1);break;case"yearly":a=i.getFullYear()!==e.getFullYear(),o=new Date(i.getFullYear()+1,0,1)}}else if(!n&&l>0){const t=Math.max(0,l-s.maxStars);if(t>0)try{await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),{adminStars:t},{merge:!0})}catch(u){console.error("Error updating adminStars:",u)}a=!1}}else a=!0;if(!a)return!1;try{const t={stars:s.maxStars+c,starsLastReset:(0,Hb.O5)(),starsResetDate:o||null};return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),t,{merge:!0}),!0}catch(u){return console.error(`\u274c L\u1ed7i reset sao cho user ${e}:`,u),!1}}function K(e,t,n){return"admin"===t?B:"basic"===t?{...E,...e}:"master"===t||"standard"===t||"premium"===t||"sponsor"===t?n&&new Date>n?E:B:E}function G(e){const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(t&&n===rw)return{hasPermission:!0};if(!r||!o)return{hasPermission:!1,reason:"not_verified"};if(d)return{hasPermission:!0};const s=!1!==c[e],i=localStorage.getItem(`pagePointsConfig_${e}`);if(i)try{const e=JSON.parse(i);if(e.lockedForBasic&&"basic"===m)return{hasPermission:!1,reason:"basic_locked"};if(e.enabled&&e.pointsToDeduct>0&&f<e.pointsToDeduct)return{hasPermission:!1,reason:"insufficient_stars"}}catch(a){console.error("Error parsing page points config:",a)}return s?{hasPermission:!0}:{hasPermission:!1,reason:"access_denied"}}function q(){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw}function W(e){if(b&&(b(),w(null)),Qb.db&&e)try{const t=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"users",e),(t=>{if(t.exists()){var n;const r=t.data(),s=r.disabled||!1;s!==S&&_(s);const i=r.stars||0;i!==f&&x(i);const a=r.membershipTier||"basic",o=(null===(n=r.membershipExpiry)||void 0===n?void 0:n.toDate())||null,l=q()?"admin":a;X(e,a,o).then((e=>{})).catch((e=>{console.error("\u274c Error handling real-time membership expiry:",e)})),l!==m&&A(l),o!==g&&p(o);const c=r.starsLastReset;c!==v&&y(c),V(e,l,c,r).then((e=>{})).catch((e=>{console.error("\u274c Error handling real-time stars reset:",e)}));const d=K(r.permissions||E,l,o);u(d)}}),(e=>{console.error("Error in user document listener:",e)}));w((()=>t))}catch(t){console.error("Error setting up user document listener:",t)}}function $(){b&&(b(),w(null))}async function X(e,t,n){if(!e||!n||!Qb.db)return!1;if(!q())return!1;if(q()&&r&&r.uid===e)return!1;const s=new Date;if(s>n&&"basic"!==t)try{const n=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(!n.exists())return!1;const r=n.data(),i=r.stars||0,a=r.adminStars||0,o=I[t],l=I.basic,c=(null===o||void 0===o?void 0:o.maxStars)||0,u=(null===l||void 0===l?void 0:l.maxStars)||20;let d=i-c;d+=u,d<u+a&&(d=u+a);const h=new Date(s.getTime()+2592e6),m={membershipTier:"basic",membershipExpiry:h,stars:d,updatedAt:(0,Hb.O5)()};return"basic"!==t&&(m.hasHighTierHistory=!0,r.firstHighTierDate&&(m.firstHighTierDate=r.firstHighTierDate),r.lastHighTierDate&&(m.lastHighTierDate=r.lastHighTierDate)),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),m,{merge:!0}),A("basic"),p(h),x(d),!0}catch(i){return console.error("\u274c L\u1ed7i x\u1eed l\xfd h\u1ebft h\u1ea1n membership:",i),"permission-denied"===i.code||"unavailable"===i.code||i.code,!1}return!1}(0,t.useEffect)((()=>{L()}),[]),(0,t.useEffect)((()=>{if(!q())return;const e=async()=>{if(Qb.db)try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),n=await(0,Hb.GG)(t);let r=0;const s=new Date;for(const i of n.docs){var e;const t=i.data(),n=i.id,a=t.membershipTier||"basic",o=(null===(e=t.membershipExpiry)||void 0===e?void 0:e.toDate())||null;if(!o||"basic"===a)continue;if(s>o){await X(n,a,o)&&r++}}}catch(t){if(console.error("\u274c Error in admin background expired membership check:",t),"permission-denied"===t.code)return;if("unavailable"===t.code||"deadline-exceeded"===t.code)return}};e();const t=setInterval(e,36e5);return()=>clearInterval(t)}),[Qb.db,q]),(0,t.useEffect)((()=>{if(!Qb.auth)return void a(!1);const e=(0,nw.hg)(Qb.auth,(async e=>{try{if(e){const n="true"===localStorage.getItem("adminFirebaseAuth"),i=(localStorage.getItem("adminEmail"),localStorage.getItem("loginExpiration"));if(!n&&i&&Q())return await O(),s(null),l(!1),u({}),void a(!1);e.emailVerified;if(r&&r.uid!==e.uid&&($(),u({}),A("basic"),p(null),x(0),y(null),j(null),_(!1)),e.email===rw)try{const t=(0,Hb.doc)(Qb.db,"users",e.uid);(await(0,Hb.getDoc)(t)).exists()||await(0,Hb.BN)(t,{email:e.email,displayName:"Admin",createdAt:(0,Hb.O5)(),updatedAt:(0,Hb.O5)(),stars:1e3,adminStars:1e3,membershipTier:"admin",adminVerifiedEmail:!0,permissions:{all:!0},transactionsSummary:{totalEarned:1e3,totalSpent:0,lastTransaction:Date.now()}})}catch(t){console.error("\u274c L\u1ed7i t\u1ea1o admin document:",t)}s(e);let o=e.emailVerified;if(!o&&Qb.db)try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e.uid));if(t.exists()){const n=t.data();o=n.emailVerified||n.adminVerifiedEmail||!1,await lw(e.uid,"AuthContext-onAuthStateChanged")}}catch(t){console.error("L\u1ed7i ki\u1ec3m tra admin verification:",t)}l(o),n?(u(B),W(e.uid)):o?(await z(e.uid),W(e.uid)):u(E)}else r&&$(),s(null),l(!1),u({}),A("basic"),p(null),x(0),y(null),j(null),_(!1)}catch(t){console.error("L\u1ed7i trong onAuthStateChanged:",t),$(),s(null),l(!1),u({}),A("basic"),p(null),y(null),_(!1)}finally{a(!1)}}));return()=>{e(),$()}}),[]);const Y={currentUser:r,isEmailVerified:o,userPermissions:c,permissionsLoading:d,membershipTier:m,membershipExpiry:g,userStars:f,starsLastReset:v,membershipTiers:I,isUserDisabled:S,signup:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!Qb.auth)throw new Error("Firebase Authentication ch\u01b0a \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh");try{const s=(await(0,nw.eJ)(Qb.auth,e,t)).user;n&&await(0,nw.r7)(s,{displayName:n}),await(0,nw.gA)(s);let i=R(n,e),a=await P(i),o=1;for(;a;)i=R(n,e)+o,a=await P(i),o++;await L();const l=M.basic||{maxStars:20,duration:30},c=new Date,u={uid:s.uid,email:s.email,username:i,displayName:n||"",emailVerified:!1,createdAt:(0,Hb.O5)(),lastLoginAt:(0,Hb.O5)(),permissions:E,membershipTier:"basic",membershipExpiry:new Date(c.getTime()+24*l.duration*60*60*1e3),stars:l.maxStars,starsLastReset:(0,Hb.O5)(),starsResetDate:new Date(c.getTime()+24*l.duration*60*60*1e3)};return r&&(u.agreements={ageConfirmation:r.ageConfirmation,termsAccepted:r.termsAccepted,dataConsent:r.dataConsent,agreedAt:(0,Hb.O5)()}),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",s.uid),u),{user:s,message:"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng! Vui l\xf2ng ki\u1ec3m tra email \u0111\u1ec3 x\xe1c th\u1ef1c t\xe0i kho\u1ea3n."}}catch(s){throw console.error("L\u1ed7i \u0111\u0103ng k\xfd:",s),s}},login:async function(e,t){if(!Qb.auth)throw new Error("Firebase Authentication ch\u01b0a \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh");try{let n=e;if(!e.includes("@")){let t=await F(e);if(t||(t=await U(e)),!t)throw new Error("T\xean \u0111\u0103ng nh\u1eadp/t\xean hi\u1ec3n th\u1ecb kh\xf4ng t\u1ed3n t\u1ea1i");n=t.email}const r=(await(0,nw.signInWithEmailAndPassword)(Qb.auth,n,t)).user,s=(new Date).getTime(),i=s+2592e5;return localStorage.setItem("loginTime",s.toString()),localStorage.setItem("loginExpiration",i.toString()),Qb.db&&await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",r.uid),{lastLoginAt:(0,Hb.O5)(),emailVerified:r.emailVerified},{merge:!0}),r.emailVerified&&setTimeout((async()=>{try{await D(r.uid)&&T(!0)}catch(e){console.error("Error checking daily reward on login:",e)}}),2e3),{user:r,message:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!"}}catch(n){throw console.error("L\u1ed7i \u0111\u0103ng nh\u1eadp:",n),n}},logout:O,resetPassword:async function(e){if(!Qb.auth)throw new Error("Firebase Auth ch\u01b0a \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o");try{const t={url:`${window.location.origin}/password-reset`,handleCodeInApp:!0};return await(0,nw.J1)(Qb.auth,e,t),{success:!0,message:"Email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi. Vui l\xf2ng ki\u1ec3m tra h\u1ed9p th\u01b0 c\u1ee7a b\u1ea1n."}}catch(t){console.error("L\u1ed7i g\u1eedi email reset password:",t);let e="C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi email \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u";switch(t.code){case"auth/user-not-found":e="Email n\xe0y kh\xf4ng t\u1ed3n t\u1ea1i trong h\u1ec7 th\u1ed1ng";break;case"auth/invalid-email":e="Email kh\xf4ng h\u1ee3p l\u1ec7";break;case"auth/too-many-requests":e="Qu\xe1 nhi\u1ec1u y\xeau c\u1ea7u. Vui l\xf2ng th\u1eed l\u1ea1i sau";break;case"auth/network-request-failed":e="L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng";break;default:e=t.message||e}throw new Error(e)}},signInWithGoogle:async function(){if(!Qb.auth)throw new Error("Firebase Auth ch\u01b0a \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o");if(!cw()){const e=window.location.hostname;throw new Error(`Domain ${e} ch\u01b0a \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng nh\u1eadp Google. Vui l\xf2ng li\xean h\u1ec7 admin \u0111\u1ec3 th\xeam domain v\xe0o Firebase Console.`)}try{var e;const t=new nw.HF;t.addScope("profile"),t.addScope("email");const n=await(0,nw.df)(Qb.auth,t),r=n.user;return await H(r,"google"),{user:r,message:"\u0110\u0103ng nh\u1eadp Google th\xe0nh c\xf4ng!",isNewUser:(null===(e=n._tokenResponse)||void 0===e?void 0:e.isNewUser)||!1}}catch(t){console.error("L\u1ed7i \u0111\u0103ng nh\u1eadp Google:",t);let e="C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng nh\u1eadp b\u1eb1ng Google";switch(t.code){case"auth/popup-closed-by-user":e="\u0110\xe3 h\u1ee7y \u0111\u0103ng nh\u1eadp";break;case"auth/popup-blocked":e="Popup b\u1ecb ch\u1eb7n b\u1edfi tr\xecnh duy\u1ec7t";break;case"auth/account-exists-with-different-credential":e="Email n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd v\u1edbi ph\u01b0\u01a1ng th\u1ee9c kh\xe1c";break;case"auth/network-request-failed":e="L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng";break;case"auth/unauthorized-domain":e="Domain n\xe0y ch\u01b0a \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng nh\u1eadp. Vui l\xf2ng li\xean h\u1ec7 admin \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3.";break;default:e=t.message||e}throw new Error(e)}},signInWithFacebook:async function(){if(!Qb.auth)throw new Error("Firebase Auth ch\u01b0a \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o");try{var e;const t=new nw.sk;t.addScope("email"),t.addScope("public_profile");const n=await(0,nw.df)(Qb.auth,t),r=n.user;return await H(r,"facebook"),{user:r,message:"\u0110\u0103ng nh\u1eadp Facebook th\xe0nh c\xf4ng!",isNewUser:(null===(e=n._tokenResponse)||void 0===e?void 0:e.isNewUser)||!1}}catch(t){console.error("L\u1ed7i \u0111\u0103ng nh\u1eadp Facebook:",t);let e="C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng nh\u1eadp b\u1eb1ng Facebook";switch(t.code){case"auth/popup-closed-by-user":e="\u0110\xe3 h\u1ee7y \u0111\u0103ng nh\u1eadp";break;case"auth/popup-blocked":e="Popup b\u1ecb ch\u1eb7n b\u1edfi tr\xecnh duy\u1ec7t";break;case"auth/account-exists-with-different-credential":e="Email n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd v\u1edbi ph\u01b0\u01a1ng th\u1ee9c kh\xe1c";break;case"auth/network-request-failed":e="L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng";break;default:e=t.message||e}throw new Error(e)}},resendVerificationEmail:async function(){if(!Qb.auth||!r)throw new Error("Kh\xf4ng c\xf3 ng\u01b0\u1eddi d\xf9ng n\xe0o \u0111ang \u0111\u0103ng nh\u1eadp");try{return await(0,nw.gA)(r),{message:"Email x\xe1c th\u1ef1c \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi l\u1ea1i!"}}catch(e){throw console.error("L\u1ed7i g\u1eedi email x\xe1c th\u1ef1c:",e),e}},isLoginExpired:Q,hasPagePermission:function(e){return G(e).hasPermission},checkPagePermission:G,loadUserPermissions:z,calculateEffectivePermissions:K,checkAndResetStars:V,adminSubtractUserStars:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Admin tr\u1eeb sao";if(!Qb.db||!e||t<=0)return!1;try{const r=(0,Hb.doc)(Qb.db,"users",e),s=await(0,Hb.getDoc)(r);if(!s.exists())return!1;const i=s.data(),a=i.stars||0,o=i.adminStars||0;if(a<t)return!1;const l=a-t;let c=o;if(o>0){c=o-Math.min(t,o)}const u=Date.now(),d=new Date(u).toISOString().substring(0,7),h=(0,Hb.wP)(Qb.db);h.update(r,{stars:l,adminStars:c,"transactionsSummary.totalSpent":(0,Hb.GV)(t),"transactionsSummary.lastTransaction":u,[`starTransactions.${u}`]:{type:"spend",amount:t,reason:n,timestamp:u},updatedAt:(0,Hb.O5)()});const m=(0,Hb.doc)(Qb.db,"users",e,"starTransactions",u.toString());return h.set(m,{type:"spend",amount:t,reason:n,timestamp:u,month:d}),await h.commit(),!0}catch(r){return console.error("L\u1ed7i admin tr\u1eeb sao:",r),!1}},consumeUserStars:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Star consumption";if(!Qb.db||!e||t<=0)return!1;if(q())return!0;try{const r=(0,Hb.doc)(Qb.db,"users",e),s=await(0,Hb.getDoc)(r);if(!s.exists())return!1;const i=s.data(),a=i.stars||0,o=i.adminStars||0;if(a>=t){const s=a-t;let i=o;if(o>0){i=o-Math.min(t,o)}const l=Date.now(),c=new Date(l).toISOString().substring(0,7),u=(0,Hb.wP)(Qb.db);u.update(r,{stars:s,adminStars:i,"transactionsSummary.totalSpent":(0,Hb.GV)(t),"transactionsSummary.lastTransaction":l,[`starTransactions.${l}`]:{type:"spend",amount:t,reason:n,timestamp:l},updatedAt:(0,Hb.O5)()});const d=(0,Hb.doc)(Qb.db,"users",e,"starTransactions",l.toString());return u.set(d,{type:"spend",amount:t,reason:n,timestamp:l,month:c}),await u.commit(),!0}return!1}catch(r){return console.error("L\u1ed7i consumeUserStars:",r),!1}},addUserStars:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Star reward";if(!Qb.db||!e||t<=0)return!1;try{const r=Date.now(),s=new Date(r).toISOString().substring(0,7),i=(0,Hb.wP)(Qb.db),a=(0,Hb.doc)(Qb.db,"users",e),o=await(0,Hb.getDoc)(a);if(!o.exists())return!1;const l=o.data(),c=l.stars||0,u=l.adminStars||0;i.update(a,{stars:c+t,adminStars:u+t,"transactionsSummary.totalEarned":(0,Hb.GV)(t),"transactionsSummary.lastTransaction":r,updatedAt:(0,Hb.O5)()}),i.update(a,{[`starTransactions.${r}`]:{type:"earn",amount:t,reason:n,timestamp:r}});const d=(0,Hb.doc)(Qb.db,"users",e,"starTransactions",r.toString());return i.set(d,{type:"earn",amount:t,reason:n,timestamp:r,month:s}),await i.commit(),setTimeout((()=>{window.forceRefreshStarTransactions&&window.forceRefreshStarTransactions()}),1e3),!0}catch(r){return console.error("L\u1ed7i khi th\xeam \u0111i\u1ec3m:",r),!1}},subtractUserStars:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Star deduction";if(!r||!Qb.db||e<=0)return!1;if(q())return!0;try{const n=(0,Hb.doc)(Qb.db,"users",r.uid),s=await(0,Hb.getDoc)(n);if(!s.exists())return!1;const i=s.data(),a=i.stars||0,o=i.adminStars||0;if(a<e)return!1;const l=a-e;let c=o;if(o>0){c=o-Math.min(e,o)}const u=Date.now(),d=new Date(u).toISOString().substring(0,7),h={type:"spend",amount:e,reason:t,timestamp:u},m=(0,Hb.wP)(Qb.db);m.update(n,{stars:l,adminStars:c,"transactionsSummary.totalSpent":(0,Hb.GV)(e),"transactionsSummary.lastTransaction":u,[`starTransactions.${u}`]:h,updatedAt:(0,Hb.O5)()});const A=(0,Hb.doc)(Qb.db,"users",r.uid,"starTransactions",u.toString());return m.set(A,{type:"spend",amount:e,reason:t,timestamp:u,month:d}),await m.commit(),!0}catch(n){return console.error("L\u1ed7i tr\u1eeb sao:",n),!1}},checkUsernameExists:P,findUserByUsername:F,findUserByDisplayName:U,generateUsername:R,reloadUserVerificationStatus:async function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||r;if(!e||!Qb.db)return!1;try{e.reload&&await e.reload();const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e.uid));if(t.exists()){const n=t.data(),r=e.emailVerified||n.adminVerifiedEmail||!1;return s(e),l(r),r&&!Object.keys(c).length&&(await z(e.uid),W(e.uid)),r}return!1}catch(t){return console.error("L\u1ed7i reload verification status:",t),!1}},showDailyRewardsModal:C,setShowDailyRewardsModal:T,handleMembershipExpiry:X,handleMembershipUpgrade:async function(e,t,n){if(!e||!t||!n||!Qb.db)return!1;if(q()&&r&&r.uid===e)return!1;if(t===n)return!1;try{const r=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(!r.exists())return!1;const s=r.data(),i=s.stars||0,a=s.adminStars||0,o=I[t],l=I[n],c=(null===o||void 0===o?void 0:o.maxStars)||("basic"===t?20:"standard"===t?200:"premium"===t?3e3:"sponsor"===t?5e3:200),u=(null===l||void 0===l?void 0:l.maxStars)||("basic"===n?20:"standard"===n?200:"premium"===n?3e3:"sponsor"===n?5e3:200);let d=i-c;d+=u,d<u+a&&(d=u+a);const h=new Date,m=new Date(h.getTime()+24*l.duration*60*60*1e3),g={membershipTier:n,membershipExpiry:m,stars:d,updatedAt:(0,Hb.O5)()};return"basic"!==n&&(g.hasHighTierHistory=!0,g.lastHighTierDate=(0,Hb.O5)(),s.firstHighTierDate||(g.firstHighTierDate=(0,Hb.O5)())),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",e),g,{merge:!0}),A(n),p(m),x(d),!0}catch(s){return console.error("\u274c L\u1ed7i n\xe2ng c\u1ea5p membership:",s),!1}},isAdminFirebase:q};return(0,At.jsx)(mw.Provider,{value:Y,children:!i&&n})}const pw=e=>{const{currentUser:n,userStars:r,subtractUserStars:s,membershipTier:i}=Aw(),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(!1),[h,m]=(0,t.useState)(0),[A,g]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!0);(0,t.useEffect)((()=>{c(!0);let t=!0;const n=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"admin","pagePointsDeduction"),(n=>{try{if(n.exists()){var r;const s=null===(r=n.data().pages)||void 0===r?void 0:r[e],i=s?{...{enabled:!1,pointsToDeduct:1,countdownSeconds:5,cooldownMinutes:60,displayName:e,description:""},...s}:null;o(i),i?localStorage.setItem(`pagePointsConfig_${e}`,JSON.stringify(i)):localStorage.removeItem(`pagePointsConfig_${e}`),!t&&i&&window.showToast&&window.showToast(`C\u1ea5u h\xecnh trang ${i.displayName||e} \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt`,"info")}else o(null)}catch(s){console.error("Error processing config update:",s),o(null)}finally{c(!1),t=!1}}),(e=>{console.error("Error listening to config changes:",e),o(null),c(!1)}));return()=>{n(),localStorage.removeItem(`pagePointsConfig_${e}`)}}),[e]),(0,t.useEffect)((()=>{const t=()=>{const t=`pageDeduction_${e}_lastTime`,n=localStorage.getItem(t);if(!n)return void g(!1);Date.now()-parseInt(n)<60*((null===a||void 0===a?void 0:a.cooldownMinutes)||60)*1e3?g(!0):(g(!1),localStorage.removeItem(t))};t();const n=setInterval(t,6e4);return()=>clearInterval(n)}),[e,null===a||void 0===a?void 0:a.cooldownMinutes]);const x=(0,t.useCallback)((t=>{if("undefined"===typeof window||!window.showToast)return;const n="true"===localStorage.getItem("adminFirebaseAuth"),r=localStorage.getItem("adminEmail");if(n&&r===rw)return;if("sponsor"===i)return;const s=(null===a||void 0===a?void 0:a.displayName)||e,o=`S\u1ebd tr\u1eeb ${(null===a||void 0===a?void 0:a.pointsToDeduct)||1} sao sau ${t} gi\xe2y - ${s}`,l=`countdown_${e}`;window.updateToast&&window.currentCountdownToastId===l?window.updateToast(l,o,"warning",1200):window.currentCountdownToastId=window.showToast(o,"warning",1200,l)}),[e,null===a||void 0===a?void 0:a.displayName,null===a||void 0===a?void 0:a.pointsToDeduct,i]),v=(0,t.useCallback)((()=>{"undefined"!==typeof window&&window.removeToast&&window.currentCountdownToastId&&(window.removeToast(window.currentCountdownToastId),window.currentCountdownToastId=null)}),[]),y=(0,t.useCallback)((async()=>{if(!n||!a||A)return;const t="true"===localStorage.getItem("adminFirebaseAuth"),o=localStorage.getItem("adminEmail");if(t&&o===rw)return g(!0),d(!1),void m(0);if("sponsor"===i)return g(!0),d(!1),void m(0);if(r<a.pointsToDeduct){if(window.showToast){const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!(t&&n===rw)&&"sponsor"!==i){const t=a.displayName||e;window.showToast(`B\u1ea1n kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 truy c\u1eadp trang ${t}. C\u1ea7n ${a.pointsToDeduct} sao, hi\u1ec7n c\xf3 ${r} sao.`,"error")}}return d(!1),m(0),void v()}try{const t=`Truy c\u1eadp trang ${a.displayName||e}`;if(await s(a.pointsToDeduct,t)){const t=`pageDeduction_${e}_lastTime`;localStorage.setItem(t,Date.now().toString());const r=`pageDeduction_${e}_detail`;localStorage.setItem(r,JSON.stringify({timestamp:(new Date).toISOString(),points:a.pointsToDeduct,page:e,cooldownMinutes:a.cooldownMinutes||60})),g(!0);try{var l,c;const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",n.uid)),r=(null===(l=(t.exists()?t.data():{}).pageDeductions)||void 0===l||null===(c=l[e])||void 0===c?void 0:c.totalDeductions)||0;await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",n.uid),{[`pageDeductions.${e}`]:{lastDeduction:new Date,totalDeductions:r+1,pointsDeducted:a.pointsToDeduct}})}catch(u){}if(window.showToast){const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");t&&n===rw||"sponsor"===i||window.showToast(`\u0110\xe3 tr\u1eeb ${a.pointsToDeduct} sao cho trang ${a.displayName||e}`,"info")}}else{if(window.showToast){const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!(t&&n===rw)&&"sponsor"!==i){const t=a.displayName||e;window.showToast(`B\u1ea1n kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 truy c\u1eadp trang ${t}. C\u1ea7n ${a.pointsToDeduct} sao, hi\u1ec7n c\xf3 ${r} sao.`,"error")}}d(!1),m(0),v()}}catch(h){}finally{d(!1),m(0)}}),[n,a,A,e,s,r,v]),b=(0,t.useRef)(i),w=(0,t.useRef)(!1);(0,t.useEffect)((()=>{b.current=i;const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");w.current=e&&t===rw}),[i]);const N=(0,t.useCallback)((()=>{if(!u||h<=0||window.currentPageCountdownInterval)return;if(w.current||"sponsor"===b.current){const e=setInterval((()=>{m((t=>{const n=t-1;return n<=0?(clearInterval(e),setTimeout((()=>{v()}),100),y(),0):n}))}),1e3);return void(window.currentPageCountdownInterval=e)}window.currentCountdownToastId&&(window.currentCountdownToastId=null),setTimeout((()=>{x(h)}),100);const e=setInterval((()=>{m((t=>{const n=t-1;return n<=0?(clearInterval(e),setTimeout((()=>{v()}),100),y(),0):(document.hidden||w.current||"sponsor"===b.current||setTimeout((()=>{x(n)}),100),n)}))}),1e3);window.currentPageCountdownInterval=e}),[u,h,x,v,y]),j=(0,t.useCallback)((()=>!!u&&(window.currentPageCountdownInterval&&(clearInterval(window.currentPageCountdownInterval),window.currentPageCountdownInterval=null),v(),y(),!0)),[u,v,y]),C=(0,t.useCallback)((async()=>{localStorage.getItem("adminFirebaseAuth"),localStorage.getItem("adminEmail");if(!n||!a||!a.enabled||A||u)return!1;if(!w.current&&"sponsor"!==b.current&&r<a.pointsToDeduct){if(window.showToast&&!w.current&&"sponsor"!==b.current){const t=a.displayName||e;window.showToast(`B\u1ea1n kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 truy c\u1eadp trang ${t}. C\u1ea7n ${a.pointsToDeduct} sao, hi\u1ec7n c\xf3 ${r} sao.`,"error")}return!1}try{if(d(!0),m(a.countdownSeconds),w.current||"sponsor"===b.current){const t=setInterval((()=>{m((n=>{const r=n-1;return r<=0?(clearInterval(t),window.currentPageCountdownInterval=null,setTimeout((()=>{v()}),100),window[`deductionInProgress_${e}`]||(window[`deductionInProgress_${e}`]=!0,y().finally((()=>{delete window[`deductionInProgress_${e}`]}))),0):r}))}),1e3);return window.currentPageCountdownInterval=t,!0}document.hidden||w.current||"sponsor"===b.current||setTimeout((()=>{x(a.countdownSeconds)}),100);const t=setInterval((()=>{m((n=>{const r=n-1;return r<=0?(clearInterval(t),window.currentPageCountdownInterval=null,setTimeout((()=>{v()}),100),window[`deductionInProgress_${e}`]||(window[`deductionInProgress_${e}`]=!0,y().finally((()=>{delete window[`deductionInProgress_${e}`]}))),0):(document.hidden||w.current||"sponsor"===b.current||setTimeout((()=>{x(r)}),100),r)}))}),1e3);return window.currentPageCountdownInterval=t,!0}catch(t){return console.error("Countdown error:",t),d(!1),!1}}),[n,a,A,u,r,e,x,v,y]),T=(0,t.useCallback)((()=>{window.currentPageCountdownInterval&&(clearInterval(window.currentPageCountdownInterval),window.currentPageCountdownInterval=null),v(),d(!1),m(0)}),[v]);(0,t.useEffect)((()=>{const e=()=>{const e=!document.hidden;f(e),!e&&u?(window.currentPageCountdownInterval&&(clearInterval(window.currentPageCountdownInterval),window.currentPageCountdownInterval=null),v()):e&&u&&h>0&&!window.currentPageCountdownInterval&&N()};return document.addEventListener("visibilitychange",e),f(!document.hidden),()=>{document.removeEventListener("visibilitychange",e)}}),[u,h,e,N,v]),(0,t.useLayoutEffect)((()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail"),s=e&&t===rw;if(a&&a.enabled&&n&&(s||"sponsor"===i||r>=a.pointsToDeduct)&&!A&&!u&&!l&&p){const e=setTimeout((()=>{a&&a.enabled&&n&&(s||"sponsor"===i||r>=a.pointsToDeduct)&&!A&&!u&&p&&C()}),1e3);return()=>clearTimeout(e)}}),[a,null===n||void 0===n?void 0:n.uid,r,A,u,l,e,C,p]),(0,t.useEffect)((()=>()=>{window.currentPageCountdownInterval&&(clearInterval(window.currentPageCountdownInterval),window.currentPageCountdownInterval=null),v()}),[v]),(0,t.useEffect)((()=>(u?window.skipCountdown=j:delete window.skipCountdown,()=>{delete window.skipCountdown})),[u,j]),(0,t.useEffect)((()=>{if(p&&u&&h>0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(e&&t===rw)return;if("sponsor"===i)return;const n=setTimeout((()=>{p&&u&&h>0&&x(h)}),200);return()=>clearTimeout(n)}}),[p,u,h,x,i]);const S=(0,t.useCallback)((()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail"),s=e&&t===rw;return n&&a&&a.enabled&&!A&&!u&&(s||"sponsor"===i||r>=a.pointsToDeduct)}),[n,a,A,u,r,i]),_=(0,t.useCallback)((()=>u&&a?{timeRemaining:h,pointsToDeduct:a.pointsToDeduct,pageName:a.displayName||e,initialTime:a.countdownSeconds,isActive:!0}:null),[u,h,a,e]),E=(0,t.useCallback)((()=>{const t=`pageDeduction_${e}_lastTime`,n=localStorage.getItem(t);if(!n||null===a||void 0===a||!a.cooldownMinutes)return null;const r=Date.now()-parseInt(n),s=60*a.cooldownMinutes*1e3;if(r>=s)return null;const i=s-r;return{remainingMinutes:Math.ceil(i/6e4),remainingSeconds:Math.ceil(i/1e3),totalCooldownMinutes:a.cooldownMinutes,lastDeductTime:new Date(parseInt(n))}}),[e,null===a||void 0===a?void 0:a.cooldownMinutes]),B={isCountingDown:u,timeRemaining:h,pointsToDeduct:(null===a||void 0===a?void 0:a.pointsToDeduct)||0,pageName:(null===a||void 0===a?void 0:a.displayName)||e,initialTime:(null===a||void 0===a?void 0:a.countdownSeconds)||0,canDeduct:S()};return{pageConfig:a,loading:l,isCountdownActive:u,countdownTime:h,hasDeductedThisSession:A,canDeductPoints:S(),triggerCountdown:C,startPointsDeduction:C,cancelCountdown:T||(()=>{}),skipCountdownAndDeductNow:j,countdownInfo:B,getCountdownInfo:_(),getRemainingCooldown:E(),isPageVisible:p}},fw=e=>{let{title:n,description:r,keywords:s,image:i,url:a,type:o="website",author:l="Thi\xean \u0110\u1ecba Nh\xe2n",publishedTime:c,modifiedTime:u,section:d,tags:h=[]}=e;const m="Thi\xean \u0110\u1ecba Nh\xe2n",A="https://thiendianhan.app",g=n?`${n} - ${m}`:m,p=a?`${A}${a}`:A,f=i?i.startsWith("http")?i:`${A}${i}`:"https://stc-support-manage-brand.zdn.vn/medias/drive/2020/thiendianhan/HuyenKhongDaiQuai.png",x=s?s.join(", "):"l\u1ecbch \xe2m, l\u1ecbch d\u01b0\u01a1ng, b\xe1t t\u1ef1, phong th\u1ee7y, xem ng\xe0y, la b\xe0n, t\u1eed vi, thi\xean v\u0103n";return(0,t.useEffect)((()=>{document.title=g;const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=n?`meta[property="${e}"]`:`meta[name="${e}"]`;let s=document.querySelector(r);s||(s=document.createElement("meta"),n?s.setAttribute("property",e):s.setAttribute("name",e),document.head.appendChild(s)),s.setAttribute("content",t)};if(e("description",r),e("keywords",x),e("author",l),e("robots","index, follow"),e("language","Vietnamese"),e("revisit-after","7 days"),e("distribution","global"),e("rating","general"),e("viewport","width=device-width, initial-scale=1, maximum-scale=5"),e("format-detection","telephone=no"),((e,t)=>{let n=document.querySelector(`link[rel="${e}"]`);n||(n=document.createElement("link"),n.setAttribute("rel",e),document.head.appendChild(n)),n.setAttribute("href",t)})("canonical",p),e("og:title",g,!0),e("og:description",r,!0),e("og:image",f,!0),e("og:url",p,!0),e("og:type",o,!0),e("og:site_name",m,!0),e("og:locale","vi_VN",!0),e("twitter:card","summary_large_image"),e("twitter:title",g),e("twitter:description",r),e("twitter:image",f),e("twitter:site","@thiendianhan"),"article"===o){c&&e("article:published_time",c,!0),u&&e("article:modified_time",u,!0),l&&e("article:author",l,!0),d&&e("article:section",d,!0);document.querySelectorAll('meta[property="article:tag"]').forEach((e=>e.remove())),h.forEach((e=>{const t=document.createElement("meta");t.setAttribute("property","article:tag"),t.setAttribute("content",e),document.head.appendChild(t)}))}if(document.querySelectorAll('script[type="application/ld+json"]').forEach((e=>e.remove())),"article"===o){const e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.textContent=JSON.stringify({"@context":"https://schema.org","@type":"Article",headline:n,description:r,image:f,author:{"@type":"Person",name:l},publisher:{"@type":"Organization",name:m,logo:{"@type":"ImageObject",url:`${A}/appstore.png`}},datePublished:c,dateModified:u||c,mainEntityOfPage:{"@type":"WebPage","@id":p}}),document.head.appendChild(e)}else if("website"===o){const e=document.createElement("script");e.setAttribute("type","application/ld+json"),e.textContent=JSON.stringify({"@context":"https://schema.org","@type":"WebSite",name:m,description:r,url:A,potentialAction:{"@type":"SearchAction",target:`${A}/search?q={search_term_string}`,"query-input":"required name=search_term_string"}}),document.head.appendChild(e)}return()=>{}}),[g,r,x,l,p,f,o,c,u,d,h,m,A]),null},xw={solar:{title:"H\u1ec7 M\u1eb7t Tr\u1eddi 3D - Kh\xe1m ph\xe1 v\u0169 tr\u1ee5",description:"M\xf4 ph\u1ecfng h\u1ec7 m\u1eb7t tr\u1eddi 3D t\u01b0\u01a1ng t\xe1c. Kh\xe1m ph\xe1 8 h\xe0nh tinh v\u1edbi th\xf4ng tin chi ti\u1ebft v\u1ec1 k\xedch th\u01b0\u1edbc, kho\u1ea3ng c\xe1ch v\xe0 \u0111\u1eb7c \u0111i\u1ec3m c\u1ee7a t\u1eebng h\xe0nh tinh.",keywords:["h\u1ec7 m\u1eb7t tr\u1eddi","h\xe0nh tinh","v\u0169 tr\u1ee5","thi\xean v\u0103n h\u1ecdc","3D","t\u01b0\u01a1ng t\xe1c"],url:"/solar",type:"website"},calendar:{title:"Xem Ng\xe0y T\u1ed1t X\u1ea5u - L\u1ecbch \xe2m d\u01b0\u01a1ng",description:"T\xecm ng\xe0y t\u1ed1t cho c\xe1c ho\u1ea1t \u0111\u1ed9ng quan tr\u1ecdng. T\xednh to\xe1n theo \xe2m l\u1ecbch v\xe0 d\u01b0\u01a1ng l\u1ecbch Vi\u1ec7t Nam. Xem ng\xe0y \u0111\u1eb9p \u0111\u1ec3 c\u01b0\u1edbi h\u1ecfi, khai tr\u01b0\u01a1ng, \u0111\u1ed9ng th\u1ed5.",keywords:["xem ng\xe0y t\u1ed1t","l\u1ecbch \xe2m","ng\xe0y \u0111\u1eb9p","c\u01b0\u1edbi h\u1ecfi","khai tr\u01b0\u01a1ng","\u0111\u1ed9ng th\u1ed5"],url:"/calendar",type:"website"},lichViet:{title:"L\u1ecbch Vi\u1ec7t Nam - \xc2m l\u1ecbch v\xe0 Ti\u1ebft kh\xed",description:"L\u1ecbch Vi\u1ec7t Nam \u0111\u1ea7y \u0111\u1ee7 v\u1edbi \xe2m l\u1ecbch, d\u01b0\u01a1ng l\u1ecbch v\xe0 24 ti\u1ebft kh\xed. Xem ng\xe0y \xe2m l\u1ecbch, pha m\u1eb7t tr\u0103ng, ng\xe0y l\u1ec5 t\u1ebft Vi\u1ec7t Nam.",keywords:["l\u1ecbch vi\u1ec7t nam","\xe2m l\u1ecbch","ti\u1ebft kh\xed","pha m\u1eb7t tr\u0103ng","ng\xe0y l\u1ec5 t\u1ebft"],url:"/lich-viet",type:"website"},battu:{title:"B\xe1t T\u1ef1 - Ph\xe2n t\xedch v\u1eadn m\u1ec7nh c\xe1 nh\xe2n",description:"T\xednh to\xe1n b\xe1t t\u1ef1 chi ti\u1ebft. Ph\xe2n t\xedch ng\u0169 h\xe0nh sinh kh\u1eafc, t\u01b0 v\u1ea5n h\u01b0\u1edbng \u0111i v\xe0 ngh\u1ec1 nghi\u1ec7p ph\xf9 h\u1ee3p v\u1edbi b\u1ea3n m\u1ec7nh.",keywords:["b\xe1t t\u1ef1","t\u1eed vi","ng\u0169 h\xe0nh","v\u1eadn m\u1ec7nh","ngh\u1ec1 nghi\u1ec7p","h\u01b0\u1edbng \u0111i"],url:"/battu",type:"website"},lakinh:{title:"La Kinh - La b\xe0n phong th\u1ee7y \u0111i\u1ec7n t\u1eed",description:"La b\xe0n phong th\u1ee7y \u0111i\u1ec7n t\u1eed ch\xednh x\xe1c. T\xednh h\u01b0\u1edbng phong th\u1ee7y, x\xe1c \u0111\u1ecbnh c\xe1t hung theo \u0111\u1ecba l\xfd v\xe0 h\u01b0\u1edbng nh\xe0.",keywords:["la k\xednh","la b\xe0n phong th\u1ee7y","h\u01b0\u1edbng nh\xe0","\u0111\u1ecba l\xfd","c\xe1t hung"],url:"/lakinh",type:"website"},luchao:{title:"L\u1ee5c H\xe0o - D\u1ef1 \u0111o\xe1n th\u1ee7y tri\u1ec1u",description:"D\u1ef1 \u0111o\xe1n th\u1ee7y tri\u1ec1u theo khu v\u1ef1c. Th\xf4ng tin chi ti\u1ebft v\u1ec1 pha m\u1eb7t tr\u0103ng v\xe0 l\u1ecbch th\u1ee7y tri\u1ec1u h\xe0ng ng\xe0y.",keywords:["l\u1ee5c h\xe0o","th\u1ee7y tri\u1ec1u","pha m\u1eb7t tr\u0103ng","l\u1ecbch th\u1ee7y tri\u1ec1u"],url:"/luchao",type:"website"},kymon:{title:"K\u1ef3 M\xf4n - B\xed thu\u1eadt c\u1ed5 x\u01b0a",description:"Kh\xe1m ph\xe1 b\xed thu\u1eadt K\u1ef3 M\xf4n c\u1ed5 x\u01b0a. Ph\u01b0\u01a1ng ph\xe1p d\u1ef1 \u0111o\xe1n v\xe0 ch\u1ecdn th\u1eddi \u0111i\u1ec3m t\u1ed1t cho c\xe1c ho\u1ea1t \u0111\u1ed9ng quan tr\u1ecdng.",keywords:["k\u1ef3 m\xf4n","b\xed thu\u1eadt","d\u1ef1 \u0111o\xe1n","th\u1eddi \u0111i\u1ec3m t\u1ed1t"],url:"/kymon",type:"website"}},vw=e=>{let{page:t,customProps:n={}}=e;const r=xw[t];return r?(0,At.jsx)(fw,{...r,...n}):null},yw=()=>{Gb("solar");const{countdownInfo:e,cancelCountdown:n}=pw("solar");return(0,t.useEffect)((()=>()=>{e.isCountingDown&&n()}),[e.isCountingDown,n]),(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(vw,{page:"solar"}),(0,At.jsx)("div",{className:"max-w-full h-full mx-auto overflow-hidden p-0 flex items-center justify-center text-white font-bold z-30 relative",children:(0,At.jsx)(Ob,{})})]})};function bw(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const ww=t.forwardRef(bw);function Nw(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const jw=t.forwardRef(Nw);function Cw(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Tw=t.forwardRef(Cw),Sw=e=>{let{pageKey:t,pageName:n,requiredStars:r}=e;const{userStars:s}=Aw();return(0,At.jsx)("div",{className:"flex items-center justify-center px-4 py-20",children:(0,At.jsxs)("div",{className:"max-w-md w-full bg-slate-900 p-8 rounded-xl text-center",children:[(0,At.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,At.jsx)(jw,{className:"h-16 w-16 text-yellow-500"})}),(0,At.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 truy c\u1eadp"}),(0,At.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-lg p-4 mb-6",children:[(0,At.jsxs)("p",{className:"text-yellow-200 mb-3",children:["Trang ",(0,At.jsx)("strong",{children:n||t})," y\xeau c\u1ea7u ",(0,At.jsxs)("strong",{children:[r," sao"]})," \u0111\u1ec3 truy c\u1eadp."]}),(0,At.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"Sao hi\u1ec7n t\u1ea1i:"}),(0,At.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-lg font-bold "+(s>=r?"text-green-400":"text-red-400"),children:s}),(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-400 fill-current"})]})]}),s<r&&(0,At.jsxs)("p",{className:"text-yellow-300 text-sm mt-2",children:["C\u1ea7n th\xeam ",(0,At.jsxs)("strong",{children:[r-s," sao"]})," n\u1eefa"]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("button",{onClick:()=>window.location.href="/",className:"w-full py-2 px-4 button-style text-white rounded-lg transition-colors",children:"V\u1ec1 trang ch\u1ee7"}),(0,At.jsx)("button",{onClick:()=>window.history.back(),className:"w-full py-2 px-4 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Quay l\u1ea1i"})]})]})})};var _w=n(307),Ew=n.n(_w);const Bw=[3193507,5679952,4336544,2927457,5415792,3953128,6345056,4908208,3631398,5823136,4479824,3217106,5647072,4104928,2679506,5163344,3724630,6075680,4634256,3300772,5789136,4335056,2926003,5415600,4040887,6334800,4895904,3519141,5942608,4478384,3156852,5645680,4215545,6574768,5138768,3698006,6183584,4631376,3299028,5786336,4367728,2966867,5296800,3926183,6346064,4872864,3452325,5936592,4606688,3058356,5547216,4117176,6599312,5027152,3692375,6172064,4756944,3296629,5786032,4367536,2991283,5270160,3845528,6318928,4991840,3511141,5935984,4606320,3172708,5432480,3992170,6478480,5135056,3746518,6171360,4756192,3328725,5687632,4248736,2872483,5289616,3823527,6313392,4990416,3577269,5935792,4499792,3070292,5551264,3978576,2648914,5133744,3811190,6169968,4739760,3320485,5695824,4221600,2800291,5286736],Mw=[3951576,6441696,5023088,3691733,6083168,4512080,3233108,5658272,4233936,2774482,5262048,3843510,6333648,4772432,3396181,5813568,4380320,2928034,5412272,4147575,6572400,5022896,3585205,6056528,4615504,3222356,5647200,4232560,2904818,5261680,3827046,6214816,4778576,3369621,5790416,4467552,3114723,5411552,4049111,6474064,5035168,3528870,5944656,4609696,3253684,5645776,4231888,2806450,5286224,3716439,6188192,4765008,3494741,5787040,4367792,3097971,5526192,3975592,6351184,5008032,3583654,5942096,4606816,3189476,5678448,4215392,2683491,5167424,3726151,6084256,4757200,3427797,5917392,4367568,2938036,5419600,3986776,6337856,4896160,3626406,6067632,4606384,3189108,5678256,4237904,2730578,5139744,3779911,6204256,4756336,3427061,5917040,4482224,2913443,5302864,4024920,6444704,4893392,3577557,6066912],kw=[4639072,3070292,5559456,4119120,2782546,5133984,3712935,6202832,4887216,3320501,5810512,4371616,2931364,5287248,3954137,6441888,5023152,3625334,6050416,4614448,3176756,5532320,4107600,2775890,5262176,3712742,6202592,4772448,3336805,5690656,4250272,2971299,5396176,3951355,6441424,5022928,3657910,5943888,4502816,3071269,5551520,4085200,2774450,5261744,3843447,6202544,4762192,3387989,5795104,4238688,2968419,5395312,4082152,6343024,5002416,3631270,5954128,4479648,3122852,5548752,4215520,2675427,5163344,3724631,6214816,4643152,3300693,5789344,4368080,2905556,5395120,3975608,6465840,4895888,3454630,5942608,4609440,3058532,5547376,4215472,2797939,5138736,3697463,6187680,4762960,3353301,5778272,4367728,3035876,5296480,3860824,6346016,4905616,3496614,5920464,4598496,3189204,5546704,4116816,2681170],Lw=[5158176,3725095,6204832,4871600,3550645,5916080,4498096,3060404,5548368,3978585,6449952,5025104,3692390,6050672,4736368,3302772,5788336,4221264,2783571,5266080,3910311,6203088,4868832,3515109,5940560,4379296,3007140,5428560,4086459,6444704,5019344,3754422,6179504,4630736,3200181,5681808,4240720,2780498,5262752,3904871,6329712,4868528,3451253,5924016,4483728,2931348,5401424,4074336,2665313,5018992,3689190,6082912,4646048,3075365,5560976,4217680,2897619,5253856,3838935,6329040,4901200,3331414,5813408,4372112,3038612,5395888,4072954,6563248,5149360,3582646,6056272,4617376,3256997,5549392,4216224,2796403,5383536,3822455,6312624,4876624,3435862,5790368,4369232,3036884,5524192,3974512,2647250,5034592,3599014,5952848,4610720,3190181,5674448,4213456,2795955,5285072,3855031,6206032,4764992,3396950],Iw=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"],Dw=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],Pw=["110100101100","001101001011","110011010010","101100110100","001011001101","010010110011"],Fw=["Xu\xe2n ph\xe2n","Thanh minh","C\u1ed1c v\u0169","L\u1eadp h\u1ea1","Ti\u1ec3u m\xe3n","Mang ch\u1ee7ng","H\u1ea1 ch\xed","Ti\u1ec3u th\u1eed","\u0110\u1ea1i th\u1eed","L\u1eadp thu","X\u1eed th\u1eed","B\u1ea1ch l\u1ed9","Thu ph\xe2n","H\xe0n l\u1ed9","S\u01b0\u01a1ng gi\xe1ng","L\u1eadp \u0111\xf4ng","Ti\u1ec3u tuy\u1ebft","\u0110\u1ea1i tuy\u1ebft","\u0110\xf4ng ch\xed","Ti\u1ec3u h\xe0n","\u0110\u1ea1i h\xe0n","L\u1eadp xu\xe2n","V\u0169 Th\u1ee7y","Kinh tr\u1eadp"],Uw=e=>Math.floor(e),Rw=(e,t,n)=>{const r=Uw((14-t)/12),s=n+4800-r;return e+Uw((153*(t+12*r-3)+2)/5)+365*s+Uw(s/4)-Uw(s/100)+Uw(s/400)-32045};class Ow{constructor(e,t,n,r,s){this.day=e,this.month=t,this.year=n,this.leap=r,this.jd=s}}const Hw=e=>{let t;return t=e<1900?Bw[e-1800]:e<2e3?Mw[e-1900]:e<2100?kw[e-2e3]:Lw[e-2100],Qw(e,t)},Qw=(e,t)=>{const n=[29,30],r=new Array(12),s=t>>17,i=15&t,a=n[t>>16&1];let o=Rw(1,1,e)+s,l=t>>4;for(let u=0;u<12;u++)r[12-u-1]=n[1&l],l>>=1;const c=[];if(0===i)for(let u=1;u<=12;u++)c.push(new Ow(1,u,e,0,o)),o+=r[u-1];else{for(let t=1;t<=i;t++)c.push(new Ow(1,t,e,0,o)),o+=r[t-1];c.push(new Ow(1,i,e,1,o)),o+=a;for(let t=i+1;t<=12;t++)c.push(new Ow(1,t,e,0,o)),o+=r[t-1]}return c},zw=(e,t,n)=>{if(n<1800||2199<n)return new Ow(0,0,0,0,0);let r=Hw(n);const s=Rw(e,t,n);return s<r[0].jd&&(r=Hw(n-1)),((e,t)=>{if(e>Yw||e<Xw||t[0].jd>e)return new Ow(0,0,0,0,e);let n=t.length-1;for(;e<t[n].jd;)n--;const r=e-t[n].jd;return new Ow(t[n].day+r,t[n].month,t[n].year,t[n].leap,e)})(s,r)},Vw=e=>[Iw[(e.jd+9)%10]+" "+Dw[(e.jd+1)%12],Iw[(12*e.year+e.month+3)%10]+" "+Dw[(e.month+1)%12],Kw(e.year)],Kw=e=>Iw[(e+6)%10]+" "+Dw[(e+8)%12],Gw=e=>Iw[2*(e-1)%10],qw=e=>{const t=Pw[(e+1)%12%6];let n="",r=0;for(let s=0;s<12;s++)"1"===t.charAt(s)&&(n+=Dw[s],n+=" ("+(2*s+23)%24+"-"+(2*s+1)%24+")",r++<5&&(n+=", "),3===r&&(n+="\n"));return n},Ww=(e,t)=>Uw($w(e-.5-t/24)/Math.PI*12),$w=e=>{const t=(e-2451545)/36525,n=t*t,r=Math.PI/180,s=357.5291+35999.0503*t-1559e-7*n-48e-8*t*n,i=280.46645+36000.76983*t+3032e-7*n;let a=(1.9146-.004817*t-14e-6*n)*Math.sin(r*s);a=a+(.019993-101e-6*t)*Math.sin(2*r*s)+29e-5*Math.sin(3*r*s);let o=i+a;return o*=r,o-=2*Math.PI*Uw(o/(2*Math.PI)),o},Xw=Rw(25,1,1800),Yw=Rw(31,12,2199),Jw={WRAPPER:" rounded p-3",TITLE:"font-bold border-b pb-2 mb-2",CONTENT:"space-y-3"},Zw={ITEM:" text-xs",ITEM_2:" text-sm font-bold",WRAPPER:"flex gap-2 items-center justify-start py-2"},eN={WRAPPER:"p-3 md:p-4 bg-gray-50 rounded-lg border-2 border-purple-500",TITLE:"text-base md:text-lg font-bold text-slate-700 mb-3 text-center pb-2",GRID:"grid grid-cols-1 grid-cols-2 md:grid-cols-4 gap-4",GRID2:"grid grid-cols-1 grid-cols-2 gap-4"},tN=e=>{let{dayDetails:n,analyzeThapThan:r,truongSinhMap:s,getTanCanChi:i,includeHourPillar:a=!0}=e;const[o,l]=(0,t.useState)(!1);if(!n)return null;if(!a&&!n.canChi)return null;if(a&&!n.currentCanChiHour)return null;const c=r(a?[n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]:[n.canChi[0],n.canChi[1],n.canChi[2]]),u={};c.forEach((e=>{u[e.tru]||(u[e.tru]=[]),u[e.tru].push(e)}));const d={};c.forEach((e=>{"Nh\u1eadt Ch\u1ee7"!==e.thapThan&&(d[e.thapThan]||(d[e.thapThan]=0),d[e.thapThan]++)}));const h={"Gi\xe1p":"text-green-600","\u1ea4t":"text-green-600","B\xednh":"text-red-600","\u0110inh":"text-red-600","M\u1eadu":"text-yellow-600","K\u1ef7":"text-yellow-600",Canh:"text-gray-600","T\xe2n":"text-gray-600","Nh\xe2m":"text-blue-600","Qu\xfd":"text-blue-600"};return(0,At.jsxs)("div",{className:"p-3 md:p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsx)("h4",{className:"text-base md:text-lg font-bold text-gray-200 mb-3 text-center pb-2",children:"Th\u1eadp Th\u1ea7n"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsx)("div",{className:Jw.WRAPPER+" bg-gray-900 border-b border-gray-600 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Thi\xean \u1ea4n"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Thi\xean \u1ea4n"]||0})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Ch\xednh \u1ea4n"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Ch\xednh \u1ea4n"]||0})]})]})}),(0,At.jsx)("div",{className:Jw.WRAPPER+" bg-gray-900 border-b border-gray-600 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"T\u1ef7 Ki\xean"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["T\u1ef7 Ki\xean"]||0})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Ki\u1ebfp T\xe0i"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Ki\u1ebfp T\xe0i"]||0})]})]})}),(0,At.jsx)("div",{className:Jw.WRAPPER+" bg-gray-900 border-b border-gray-600 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Th\u1ef1c Th\u1ea7n"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Th\u1ef1c Th\u1ea7n"]||0})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Th\u01b0\u01a1ng Quan"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Th\u01b0\u01a1ng Quan"]||0})]})]})}),(0,At.jsx)("div",{className:Jw.WRAPPER+" bg-gray-900 border-b border-gray-600 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Thi\xean T\xe0i"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Thi\xean T\xe0i"]||0})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Ch\xednh T\xe0i"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Ch\xednh T\xe0i"]||0})]})]})}),(0,At.jsx)("div",{className:Jw.WRAPPER+" bg-gray-900 border-b border-gray-600 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Th\u1ea5t S\xe1t"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Th\u1ea5t S\xe1t"]||0})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"Ch\xednh Quan"}),(0,At.jsx)("div",{className:"text-xl font-bold text-gray-200",children:d["Ch\xednh Quan"]||0})]})]})})]}),(0,At.jsx)("button",{onClick:()=>l(!o),className:"mt-2 px-4 py-2 text-gray-400 hover:text-gray-200 underline xemqltl",children:o?"\u1ea8n chi ti\u1ebft":"Xem chi ti\u1ebft"}),o&&(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"md:grid md:grid-cols-4 gap-4",children:[Object.entries(u).map((e=>{let[t,r]=e;return(0,At.jsxs)("div",{className:"border-b border-gray-600 p-2 bg-gray-900 rounded-lg mb-3",children:[(0,At.jsx)("h5",{className:"font-bold border-b border-gray-600 pb-2 mb-2 text-gray-200",children:t}),(0,At.jsx)("div",{className:"space-y-4",children:r.map(((e,t)=>(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,At.jsx)("span",{className:h[e.can],children:e.can})," -",(0,At.jsxs)("span",{className:" "+("M\u1ed9c"===e.nguHanh?"text-green-600":"H\u1ecfa"===e.nguHanh?"text-red-600":"Th\u1ed5"===e.nguHanh?"text-yellow-600":"Kim"===e.nguHanh?"text-gray-600":"text-blue-600"),children:[" ",e.nguHanh," "]}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",e.amDuong,")"]})]}),(0,At.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,At.jsx)("div",{className:"text-sm text-gray-300 font-semibold",children:e.thapThan}),(t=>{const r=n.canChi[1].split(" ")[1],i=(null===(t=s[e.can])||void 0===t?void 0:t[r])||{name:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",score:0};return(0,At.jsx)("div",{className:Zw.ITEM,children:(0,At.jsx)("span",{className:"font-bold "+(i.score>0?"text-green-600":i.score<0?"text-red-600":"text-gray-400"),children:i.name})})})()]}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const t=e.chi,r=n.canChi[1].split(" ")[1];return i(t).map(((e,t)=>{var n;const i=(null===(n=s[e])||void 0===n?void 0:n[r])||{name:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",score:0};return(0,At.jsxs)("div",{className:"mb-1",children:[e,": ",(0,At.jsx)("span",{className:"font-bold "+(i.score>0?"text-green-600":i.score<0?"text-red-600":"text-gray-400"),children:i.name})]},t)}))})()})]},t)))})]},t)})),(0,At.jsx)("div",{className:"text-sm italic text-gray-400 col-span-4 text-center",children:"(Tr\u01b0\u1eddng Sinh theo Chi th\xe1ng)"})]})})]})},nN=e=>{let{dayDetails:n,thienCanQuyNhan:r,thienCanThienLoc:s,includeHourPillar:i=!0}=e;const[a,o]=(0,t.useState)(!1),l={"Gi\xe1p":"text-green-600","\u1ea4t":"text-green-600","B\xednh":"text-red-600","\u0110inh":"text-red-600","M\u1eadu":"text-yellow-600","K\u1ef7":"text-yellow-600",Canh:"text-gray-600","T\xe2n":"text-gray-600","Nh\xe2m":"text-blue-600","Qu\xfd":"text-blue-600"},{quyNhanCount:c,thienLocCount:u,quyNhanDetails:d,thienLocDetails:h}=(0,t.useMemo)((()=>{if(!n)return{quyNhanCount:0,thienLocCount:0,quyNhanDetails:[],thienLocDetails:[]};if(!i&&!n.canChi)return{quyNhanCount:0,thienLocCount:0,quyNhanDetails:[],thienLocDetails:[]};if(i&&!n.currentCanChiHour)return{quyNhanCount:0,thienLocCount:0,quyNhanDetails:[],thienLocDetails:[]};const e=i?[n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]:[n.canChi[0],n.canChi[1],n.canChi[2]],t=e.map((e=>e.split(" ")[1]));e.map((e=>e.split(" ")[0]));let a=0;const o=i?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"],l=e.map(((e,n)=>{const[s,i]=e.split(" "),l=r[s]||[],c=t.filter((e=>l.includes(e))),u=l.filter((e=>!c.includes(e)));return c.forEach((e=>{l.includes(e)&&a++})),{title:o[n],can:s,existingQuyNhan:c,missingQuyNhan:u}}));let c=0;const u=e.map(((e,n)=>{const[r,i]=e.split(" "),a=s[r],l=t.includes(a);return l&&c++,{title:o[n],can:r,thienLoc:a,hasThienLoc:l}}));return{quyNhanCount:a,thienLocCount:c,quyNhanDetails:l,thienLocDetails:u}}),[n,r,s,i]);return n&&(i||n.canChi)?i&&!n.currentCanChiHour?null:(0,At.jsxs)("div",{className:"p-3 md:p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsx)("h4",{className:"text-base md:text-lg font-bold text-purple-500 mb-3 text-center pb-2 hidden",children:"Qu\xfd Nh\xe2n v\xe0 Thi\xean L\u1ed9c"}),(0,At.jsxs)("div",{className:"mt-4 text-center pt-3",children:[(0,At.jsxs)("div",{className:"font-bold text-sm md:text-base grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{className:"text-red-500 block md:inline mb-2 md:mb-0 md:mr-4 border-b border-gray-600 p-2 bg-gray-900 rounded-lg",children:["\u0110ang c\xf3: ",c," Qu\xfd Nh\xe2n"]}),(0,At.jsxs)("div",{className:"text-blue-500 block md:inline border-b border-gray-600 p-2 bg-gray-900 rounded-lg",children:["\u0110ang c\xf3: ",u," Thi\xean L\u1ed9c"]})]}),(0,At.jsx)("button",{onClick:()=>o(!a),className:"mt-2 px-4 py-2 text-gray-400 hover:text-gray-200 underline",children:a?"\u1ea8n chi ti\u1ebft":"Xem chi ti\u1ebft"}),a&&(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsx)("div",{className:"bg-gray-800 rounded-lg p-3",children:(0,At.jsx)("div",{className:"space-y-3",children:d.map(((e,t)=>(0,At.jsxs)("div",{className:"border border-gray-600 rounded p-3 bg-gray-700",children:[(0,At.jsxs)("div",{className:"font-bold text-gray-200",children:[e.title," (",e.can,")"]}),(0,At.jsxs)("div",{className:"text-sm mt-1",children:[(0,At.jsx)("div",{className:"text-green-600",children:e.existingQuyNhan.length>0?(0,At.jsxs)(At.Fragment,{children:["\u0110\xe3 c\xf3: ",e.existingQuyNhan.map((e=>(0,At.jsxs)("span",{className:`font-bold ${l[e]}`,children:[e,", "]},e))).reduce(((e,t)=>[e,"",t]),[])]}):""}),e.missingQuyNhan.length>0&&(0,At.jsxs)("div",{className:"text-orange-500",children:["C\u1ea7n: ",e.missingQuyNhan.map((e=>(0,At.jsxs)("span",{className:`font-bold ${l[e]}`,children:[e,", "]},e))).reduce(((e,t)=>[e," ",t]),[])]})]})]},t)))})}),(0,At.jsx)("div",{className:"bg-gray-800 rounded-lg p-3",children:(0,At.jsx)("div",{className:"space-y-3",children:h.map(((e,t)=>(0,At.jsxs)("div",{className:"border border-gray-600 rounded p-3 bg-gray-700",children:[(0,At.jsxs)("div",{className:"font-bold text-gray-200",children:[e.title," (",e.can,")"]}),(0,At.jsx)("div",{className:"text-sm mt-1",children:(0,At.jsx)("div",{className:e.hasThienLoc?"text-green-600":"text-orange-500",children:e.hasThienLoc?(0,At.jsxs)(At.Fragment,{children:["\u0110\xe3 c\xf3: ",(0,At.jsx)("span",{className:`font-bold ${l[e.thienLoc]}`,children:e.thienLoc})]}):(0,At.jsxs)(At.Fragment,{children:["C\u1ea7n: ",(0,At.jsx)("span",{className:`font-bold ${l[e.thienLoc]}`,children:e.thienLoc})]})})})]},t)))})})]})]})]}):null},rN=e=>{let{dayDetails:n,countNguHanh:r,getTanCanChi:s,canNguHanh:i,includeHourPillar:a=!0,onNguHanhStats:o}=e;const l=t.useMemo((()=>n&&(a||n.canChi)?a&&!n.currentCanChiHour?null:a?[n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]:[n.canChi[0],n.canChi[1],n.canChi[2]]:null),[n,a]),c=t.useMemo((()=>l&&r?r(l):null),[l,r]);t.useEffect((()=>{if(o&&"function"===typeof o&&c){JSON.stringify(c)!==JSON.stringify(u.current)&&(u.current=c,o(c))}}),[c,o]);const u=t.useRef(null);return n&&(a||n.canChi)?a&&!n.currentCanChiHour?null:(0,At.jsxs)("div",{className:"p-3 md:p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsxs)("h4",{className:"text-base md:text-lg font-bold text-gray-200 mb-3 text-center pb-2",children:["Ng\u0169 H\xe0nh Can ",a?"T\u1ee9":"Tam"," tr\u1ee5"]}),(0,At.jsx)("div",{className:"grid grid-cols-5 gap-2 md:gap-4",children:c&&Object.entries(c).map((e=>{let[t,n]=e;return(0,At.jsxs)("div",{className:"text-center border-b border-gray-600 p-2 bg-gray-900 rounded-lg",children:[(0,At.jsx)("div",{className:`text-lg font-bold mb-2 \n                            ${"M\u1ed9c"===t?"text-green-600":""}\n                            ${"H\u1ecfa"===t?"text-red-600":""}\n                            ${"Th\u1ed5"===t?"text-yellow-600":""}\n                            ${"Kim"===t?"text-gray-600":""}\n                            ${"Th\u1ee7y"===t?"text-blue-600":""}\n                        `,children:t}),(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-200",children:n})]},t)}))}),(0,At.jsx)("div",{className:"mt-4 grid grid-cols-4 gap-2 hidden",children:l&&(a?[{title:"Gi\u1edd",data:l[0]},{title:"Ng\xe0y",data:l[1]},{title:"Th\xe1ng",data:l[2]},{title:"N\u0103m",data:l[3]}]:[{title:"Ng\xe0y",data:l[0]},{title:"Th\xe1ng",data:l[1]},{title:"N\u0103m",data:l[2]}]).map(((e,t)=>{const[n,r]=e.data.split(" "),a=s(r);return(0,At.jsxs)("div",{className:"text-center border border-gray-600 rounded p-2 bg-gray-800 gap-2 flex flex-wrap flex-col",children:[(0,At.jsxs)("div",{className:`text-xs \n                                    ${"M\u1ed9c"===i[n]?"text-green-600":""}\n                                    ${"H\u1ecfa"===i[n]?"text-red-600":""}\n                                    ${"Th\u1ed5"===i[n]?"text-yellow-600":""}\n                                    ${"Kim"===i[n]?"text-gray-600":""}\n                                    ${"Th\u1ee7y"===i[n]?"text-blue-600":""}`,children:[(0,At.jsx)("span",{className:"font-bold",children:n}),(0,At.jsxs)("span",{className:"px-0.5",children:["(",i[n],")"]})]}),(0,At.jsx)("div",{className:"text-xs mt-0 gap-2 flex flex-wrap flex-col",children:a.length>0?a.map((e=>(0,At.jsxs)("div",{className:` \n                                            ${"M\u1ed9c"===i[e]?"text-green-600":""}\n                                            ${"H\u1ecfa"===i[e]?"text-red-600":""}\n                                            ${"Th\u1ed5"===i[e]?"text-yellow-600":""}\n                                            ${"Kim"===i[e]?"text-gray-600":""}\n                                            ${"Th\u1ee7y"===i[e]?"text-blue-600":""}\n                                        `,children:[(0,At.jsx)("span",{className:"font-bold",children:e}),(0,At.jsxs)("span",{className:"px-0.5",children:["(",i[e],")"]})]},e))).reduce(((e,t)=>[e," ",t]),[]):null})]},t)}))})]}):null},sN={"Gi\xe1p T\xfd":"H\u1ea3i Trung Kim","\u1ea4t S\u1eedu":"H\u1ea3i Trung Kim","B\xednh D\u1ea7n":"L\u01b0 Trung H\u1ecfa","\u0110inh M\xe3o":"L\u01b0 Trung H\u1ecfa","M\u1eadu Th\xecn":"\u0110\u1ea1i L\xe2m M\u1ed9c","K\u1ef7 T\u1ef5":"\u0110\u1ea1i L\xe2m M\u1ed9c","Canh Ng\u1ecd":"L\u1ed9 B\xe0ng Th\u1ed5","T\xe2n M\xf9i":"L\u1ed9 B\xe0ng Th\u1ed5","Nh\xe2m Th\xe2n":"Ki\u1ebfm Phong Kim","Qu\xfd D\u1eadu":"Ki\u1ebfm Phong Kim","Gi\xe1p Tu\u1ea5t":"S\u01a1n \u0110\u1ea7u H\u1ecfa","\u1ea4t H\u1ee3i":"S\u01a1n \u0110\u1ea7u H\u1ecfa","B\xednh T\xfd":"Gi\u1ea3n H\u1ea1 Th\u1ee7y","\u0110inh S\u1eedu":"Gi\u1ea3n H\u1ea1 Th\u1ee7y","M\u1eadu D\u1ea7n":"Th\xe0nh \u0110\u1ea7u Th\u1ed5","K\u1ef7 M\xe3o":"Th\xe0nh \u0110\u1ea7u Th\u1ed5","Canh Th\xecn":"B\u1ea1ch L\u1ea1p Kim","T\xe2n T\u1ef5":"B\u1ea1ch L\u1ea1p Kim","Nh\xe2m Ng\u1ecd":"D\u01b0\u01a1ng Li\u1ec5u M\u1ed9c","Qu\xfd M\xf9i":"D\u01b0\u01a1ng Li\u1ec5u M\u1ed9c","Gi\xe1p Th\xe2n":"Tuy\u1ec1n Trung Th\u1ee7y","\u1ea4t D\u1eadu":"Tuy\u1ec1n Trung Th\u1ee7y","B\xednh Tu\u1ea5t":"\u1ed0c Th\u01b0\u1ee3ng Th\u1ed5","\u0110inh H\u1ee3i":"\u1ed0c Th\u01b0\u1ee3ng Th\u1ed5","M\u1eadu T\xfd":"T\xedch L\u1ecbch H\u1ecfa","K\u1ef7 S\u1eedu":"T\xedch L\u1ecbch H\u1ecfa","Canh D\u1ea7n":"T\xf9ng B\xe1ch M\u1ed9c","T\xe2n M\xe3o":"T\xf9ng B\xe1ch M\u1ed9c","Nh\xe2m Th\xecn":"Tr\u01b0\u1eddng L\u01b0u Th\u1ee7y","Qu\xfd T\u1ef5":"Tr\u01b0\u1eddng L\u01b0u Th\u1ee7y","Gi\xe1p Ng\u1ecd":"Sa Trung Kim","\u1ea4t M\xf9i":"Sa Trung Kim","B\xednh Th\xe2n":"S\u01a1n H\u1ea1 H\u1ecfa","\u0110inh D\u1eadu":"S\u01a1n H\u1ea1 H\u1ecfa","M\u1eadu Tu\u1ea5t":"B\xecnh \u0110\u1ecba M\u1ed9c","K\u1ef7 H\u1ee3i":"B\xecnh \u0110\u1ecba M\u1ed9c","Canh T\xfd":"B\xedch Th\u01b0\u1ee3ng Th\u1ed5","T\xe2n S\u1eedu":"B\xedch Th\u01b0\u1ee3ng Th\u1ed5","Nh\xe2m D\u1ea7n":"Kim B\u1ea1ch Kim","Qu\xfd M\xe3o":"Kim B\u1ea1ch Kim","Gi\xe1p Th\xecn":"Ph\xfac \u0110\u0103ng H\u1ecfa","\u1ea4t T\u1ef5":"Ph\xfac \u0110\u0103ng H\u1ecfa","B\xednh Ng\u1ecd":"Thi\xean H\xe0 Th\u1ee7y","\u0110inh M\xf9i":"Thi\xean H\xe0 Th\u1ee7y","M\u1eadu Th\xe2n":"\u0110\u1ea1i D\u1ecbch Th\u1ed5","K\u1ef7 D\u1eadu":"\u0110\u1ea1i D\u1ecbch Th\u1ed5","Canh Tu\u1ea5t":"Thoa Xuy\u1ebfn Kim","T\xe2n H\u1ee3i":"Thoa Xuy\u1ebfn Kim","Nh\xe2m T\xfd":"Tang \u0110\u1ed1 M\u1ed9c","Qu\xfd S\u1eedu":"Tang \u0110\u1ed1 M\u1ed9c","Gi\xe1p D\u1ea7n":"\u0110\u1ea1i Kh\xea Th\u1ee7y","\u1ea4t M\xe3o":"\u0110\u1ea1i Kh\xea Th\u1ee7y","B\xednh Th\xecn":"Sa Trung Th\u1ed5","\u0110inh T\u1ef5":"Sa Trung Th\u1ed5","M\u1eadu Ng\u1ecd":"Thi\xean Th\u01b0\u1ee3ng H\u1ecfa","K\u1ef7 M\xf9i":"Thi\xean Th\u01b0\u1ee3ng H\u1ecfa","Canh Th\xe2n":"Th\u1ea1ch L\u1ef1u M\u1ed9c","T\xe2n D\u1eadu":"Th\u1ea1ch L\u1ef1u M\u1ed9c","Nh\xe2m Tu\u1ea5t":"\u0110\u1ea1i H\u1ea3i Th\u1ee7y","Qu\xfd H\u1ee3i":"\u0110\u1ea1i H\u1ea3i Th\u1ee7y"},iN={"H\u1ea3i Trung Kim":"Kim","L\u01b0 Trung H\u1ecfa":"H\u1ecfa","\u0110\u1ea1i L\xe2m M\u1ed9c":"M\u1ed9c","L\u1ed9 B\xe0ng Th\u1ed5":"Th\u1ed5","Ki\u1ebfm Phong Kim":"Kim","S\u01a1n \u0110\u1ea7u H\u1ecfa":"H\u1ecfa","Gi\u1ea3n H\u1ea1 Th\u1ee7y":"Th\u1ee7y","Th\xe0nh \u0110\u1ea7u Th\u1ed5":"Th\u1ed5","B\u1ea1ch L\u1ea1p Kim":"Kim","D\u01b0\u01a1ng Li\u1ec5u M\u1ed9c":"M\u1ed9c","Tuy\u1ec1n Trung Th\u1ee7y":"Th\u1ee7y","\u1ed0c Th\u01b0\u1ee3ng Th\u1ed5":"Th\u1ed5","T\xedch L\u1ecbch H\u1ecfa":"H\u1ecfa","T\xf9ng B\xe1ch M\u1ed9c":"M\u1ed9c","Tr\u01b0\u1eddng L\u01b0u Th\u1ee7y":"Th\u1ee7y","Sa Trung Kim":"Kim","S\u01a1n H\u1ea1 H\u1ecfa":"H\u1ecfa","B\xecnh \u0110\u1ecba M\u1ed9c":"M\u1ed9c","B\xedch Th\u01b0\u1ee3ng Th\u1ed5":"Th\u1ed5","Kim B\u1ea1ch Kim":"Kim","Ph\xfac \u0110\u0103ng H\u1ecfa":"H\u1ecfa","Thi\xean H\xe0 Th\u1ee7y":"Th\u1ee7y","\u0110\u1ea1i D\u1ecbch Th\u1ed5":"Th\u1ed5","Thoa Xuy\u1ebfn Kim":"Kim","Tang \u0110\u1ed1 M\u1ed9c":"M\u1ed9c","\u0110\u1ea1i Kh\xea Th\u1ee7y":"Th\u1ee7y","Sa Trung Th\u1ed5":"Th\u1ed5","Thi\xean Th\u01b0\u1ee3ng H\u1ecfa":"H\u1ecfa","Th\u1ea1ch L\u1ef1u M\u1ed9c":"M\u1ed9c","\u0110\u1ea1i H\u1ea3i Th\u1ee7y":"Th\u1ee7y"},aN={Kim:"text-gray-100","M\u1ed9c":"text-green-600","Th\u1ee7y":"text-blue-600","H\u1ecfa":"text-red-600","Th\u1ed5":"text-yellow-600"},oN=e=>{const[t,n]=e.split(" "),r=sN[`${t} ${n}`]||"Kh\xf4ng x\xe1c \u0111\u1ecbnh",s=iN[r]||"";return{napAm:r,nguHanh:s,color:aN[s]||"text-gray-600"}},lN=e=>{let{dayDetails:t,nguHanhColors:n,className:r,gender:s}=e;if(!t)return null;const i=(e,n)=>{const r=parseInt(t.solarDate.split("/")[2]).toString().split("").reduce(((e,t)=>e+parseInt(t)),0)%9||9;let s;"male"===n?(s=11-r,5===s&&(s=2)):(s=4+r,5===s&&(s=8)),s>9&&(s=s.toString().split("").reduce(((e,t)=>e+parseInt(t)),0));return{1:"Kh\u1ea3m",2:"Kh\xf4n",3:"Ch\u1ea5n",4:"T\u1ed1n",5:"Trung Cung",6:"C\xe0n",7:"\u0110o\xe0i",8:"C\u1ea5n",9:"Ly"}[s]||"Kh\xf4ng x\xe1c \u0111\u1ecbnh"},a=i(t.canChi[2],"female"),o=i(t.canChi[2],"male"),l=(e=>{const[t,n]=e.split(" ");let r={"Gi\xe1p":1,"\u1ea4t":1,"B\xednh":2,"\u0110inh":2,"M\u1eadu":3,"K\u1ef7":3,Canh:4,"T\xe2n":4,"Nh\xe2m":5,"Qu\xfd":5}[t]+{"T\xfd":0,"S\u1eedu":0,"Ng\u1ecd":0,"M\xf9i":0,"D\u1ea7n":1,"M\xe3o":1,"Th\xe2n":1,"D\u1eadu":1,"Th\xecn":2,"T\u1ef5":2,"Tu\u1ea5t":2,"H\u1ee3i":2}[n];return r>5&&(r-=5),{1:"Kim",2:"Th\u1ee7y",3:"H\u1ecfa",4:"Th\u1ed5",5:"M\u1ed9c"}[r]})(t.canChi[2]),{napAm:c,color:u}=oN(t.canChi[2]),d="male"===s?{label:"Nam Cung phi",value:o}:"female"===s?{label:"N\u1eef Cung phi",value:a}:null;return(0,At.jsxs)("div",{className:`mb-4 bg-gray-800 rounded-lg p-4 ${r}`,children:[d?(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsxs)("p",{className:"text-gray-300",children:[d.label,":",(0,At.jsx)("span",{className:"font-bold mx-2 text-white",children:d.value})]})}):(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,At.jsx)("div",{children:(0,At.jsxs)("p",{className:"text-gray-300",children:["Nam Cung phi:",(0,At.jsx)("span",{className:"font-bold mx-2 text-white",children:o})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("p",{className:"text-gray-300",children:["N\u1eef Cung phi:",(0,At.jsx)("span",{className:"font-bold mx-2 text-white",children:a})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-600 p-4 bg-gray-900 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"M\u1ec7nh:"}),(0,At.jsx)("span",{className:`font-bold ${u} ${[l]}`,children:l})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-600 p-4 bg-gray-900 rounded-lg",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"Ng\u0169 h\xe0nh n\u1ea1p \xe2m:"}),(0,At.jsx)("span",{className:`font-bold ${u}`,children:c})]})]})]})};function cN(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const uN=t.forwardRef(cN);function dN(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const hN=t.forwardRef(dN),mN=e=>{var n,r,s,i,a,o,l,c,u,d,h,m,A,g,p,f;let{dayDetails:x,nguHanhAmDuong:v,tanCanMapping:y,analyzeThapThan:b,nhatChuResult:w,includeHourPillar:N=!0,onCachCucChange:j}=e;const[C,T]=(0,t.useState)(!1),S=(0,t.useRef)(null);if((0,t.useEffect)((()=>{var e;if(!x)return;if(!N&&!x.canChi)return;if(N&&!x.currentCanChiHour)return;const t=N?[x.currentCanChiHour,x.canChi[0],x.canChi[1],x.canChi[2]]:[x.canChi[0],x.canChi[1],x.canChi[2]],n=(b(t),N?1:0),[r]=t[n].split(" "),s=null===(e=v.can[r])||void 0===e?void 0:e.nguHanh,i=N?2:1,[,a]=t[i].split(" "),o=e=>t.reduce(((t,n)=>{var r,s;const[i,a]=n.split(" ");(null===(r=v.can[i])||void 0===r?void 0:r.nguHanh)===e&&t++,(null===(s=v.chi[a])||void 0===s?void 0:s.nguHanh)===e&&t++;return(y[a]||[]).forEach((n=>{var r;(null===(r=v.can[n.can])||void 0===r?void 0:r.nguHanh)===e&&t++})),t}),0),l=(e,n)=>{const r=t.map((e=>e.split(" ")[1]));return{hasTamHoi:e.every((e=>r.includes(e))),hasTamHop:n.every((e=>r.includes(e)))}},c=[],u=("Gi\xe1p"===r||"\u1ea4t"===r)&&"M\u1ed9c"===s,d="D\u1ea7n"===a||"M\xe3o"===a||"Th\xecn"===a||"H\u1ee3i"===a,h=N?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"];let m=[];t.forEach(((e,t)=>{const[n,r]=e.split(" ");"Canh"!==n&&"T\xe2n"!==n||m.push(`${h[t]} (Can: ${n})`),"D\u1eadu"!==r&&"Th\xe2n"!==r||m.push(`${h[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"Canh"!==e.can&&"T\xe2n"!==e.can||m.push(`${h[t]} (T\xe0n can: ${e.can})`)}))}));const A=m.length>0,{hasTamHoi:g,hasTamHop:p}=l(["D\u1ea7n","M\xe3o","Th\xecn"],["H\u1ee3i","M\xe3o","M\xf9i"]),f=o("M\u1ed9c");u&&d&&!A&&(g||p||f>=3)&&c.push("Kh\xfac Tr\u1ef1c");const w=("B\xednh"===r||"\u0110inh"===r)&&"H\u1ecfa"===s,C="T\u1ef5"===a||"Ng\u1ecd"===a||"M\xf9i"===a||"D\u1ea7n"===a;let T=[];t.forEach(((e,t)=>{const[n,r]=e.split(" ");"Nh\xe2m"!==n&&"Qu\xfd"!==n||T.push(`${h[t]} (Can: ${n})`),"H\u1ee3i"!==r&&"T\xfd"!==r||T.push(`${h[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"Nh\xe2m"!==e.can&&"Qu\xfd"!==e.can||T.push(`${h[t]} (T\xe0n can: ${e.can})`)}))}));const _=T.length>0,{hasTamHoi:E,hasTamHop:B}=l(["T\u1ef5","Ng\u1ecd","M\xf9i"],["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t"]),M=o("H\u1ecfa");w&&C&&!_&&(E||B||M>=3)&&c.push("Vi\xeam Th\u01b0\u1ee3ng");const k=c.map((e=>({name:e,dungThan:null}))),L=JSON.stringify(k);L!==S.current&&j&&"function"===typeof j&&(S.current=L,j(k))}),[x,v,y,b,w,N,j]),!x)return null;if(!N&&!x.canChi)return null;if(N&&!x.currentCanChiHour)return null;const _=N?[x.currentCanChiHour,x.canChi[0],x.canChi[1],x.canChi[2]]:[x.canChi[0],x.canChi[1],x.canChi[2]],E=(b(_),N?1:0),[B]=_[E].split(" "),M=null===(n=v.can[B])||void 0===n?void 0:n.nguHanh,k=N?2:1,[,L]=_[k].split(" "),I=e=>_.reduce(((t,n)=>{var r,s;const[i,a]=n.split(" ");(null===(r=v.can[i])||void 0===r?void 0:r.nguHanh)===e&&t++,(null===(s=v.chi[a])||void 0===s?void 0:s.nguHanh)===e&&t++;return(y[a]||[]).forEach((n=>{var r;(null===(r=v.can[n.can])||void 0===r?void 0:r.nguHanh)===e&&t++})),t}),0),D=(e,t)=>{const n=_.map((e=>e.split(" ")[1]));return{hasTamHoi:e.every((e=>n.includes(e))),hasTamHop:t.every((e=>n.includes(e)))}},P=("Gi\xe1p"===B||"\u1ea4t"===B)&&"M\u1ed9c"===M,F="D\u1ea7n"===L||"M\xe3o"===L||"Th\xecn"===L||"H\u1ee3i"===L;let U=[];const R=N?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"];_.forEach(((e,t)=>{const[n,r]=e.split(" ");"Canh"!==n&&"T\xe2n"!==n||U.push(`${R[t]} (Can: ${n})`),"D\u1eadu"!==r&&"Th\xe2n"!==r||U.push(`${R[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"Canh"!==e.can&&"T\xe2n"!==e.can||U.push(`${R[t]} (T\xe0n can: ${e.can})`)}))}));const O=U.length>0,{hasTamHoi:H,hasTamHop:Q}=D(["D\u1ea7n","M\xe3o","Th\xecn"],["H\u1ee3i","M\xe3o","M\xf9i"]),z=I("M\u1ed9c"),V=P&&F&&!O&&(H||Q||z>=3),K=("B\xednh"===B||"\u0110inh"===B)&&"H\u1ecfa"===M,G="T\u1ef5"===L||"Ng\u1ecd"===L||"M\xf9i"===L||"D\u1ea7n"===L;let q=[];_.forEach(((e,t)=>{const[n,r]=e.split(" ");"Nh\xe2m"!==n&&"Qu\xfd"!==n||q.push(`${R[t]} (Can: ${n})`),"H\u1ee3i"!==r&&"T\xfd"!==r||q.push(`${R[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"Nh\xe2m"!==e.can&&"Qu\xfd"!==e.can||q.push(`${R[t]} (T\xe0n can: ${e.can})`)}))}));const W=q.length>0,{hasTamHoi:$,hasTamHop:X}=D(["T\u1ef5","Ng\u1ecd","M\xf9i"],["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t"]),Y=I("H\u1ecfa"),J=Y>=3,Z=K&&G&&!W&&($||X||J),ee=("Canh"===B||"T\xe2n"===B)&&"Kim"===M,te="Th\xe2n"===L||"D\u1eadu"===L||"Tu\u1ea5t"===L||"T\u1ef5"===L;let ne=[];_.forEach(((e,t)=>{const[n,r]=e.split(" ");"B\xednh"!==n&&"\u0110inh"!==n||ne.push(`${R[t]} (Can: ${n})`),"T\u1ef5"!==r&&"Ng\u1ecd"!==r||ne.push(`${R[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"B\xednh"!==e.can&&"\u0110inh"!==e.can||ne.push(`${R[t]} (T\xe0n can: ${e.can})`)}))}));const re=ne.length>0,{hasTamHoi:se,hasTamHop:ie}=D(["Th\xe2n","D\u1eadu","Tu\u1ea5t"],["T\u1ef5","D\u1eadu","S\u1eedu"]),ae=I("Kim"),oe=ae>=3,le=ee&&te&&!re&&(se||ie||oe),ce=("Nh\xe2m"===B||"Qu\xfd"===B)&&"Th\u1ee7y"===M,ue="H\u1ee3i"===L||"T\xfd"===L||"S\u1eedu"===L||"Th\xe2n"===L;let de=[];_.forEach(((e,t)=>{const[n,r]=e.split(" ");"M\u1eadu"!==n&&"K\u1ef7"!==n||de.push(`${R[t]} (Can: ${n})`),"Th\xecn"!==r&&"Tu\u1ea5t"!==r&&"S\u1eedu"!==r&&"M\xf9i"!==r||de.push(`${R[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"M\u1eadu"!==e.can&&"K\u1ef7"!==e.can||de.push(`${R[t]} (T\xe0n can: ${e.can})`)}))}));const he=de.length>0,{hasTamHoi:me,hasTamHop:Ae}=D(["H\u1ee3i","T\xfd","S\u1eedu"],["Th\xe2n","T\xfd","Th\xecn"]),ge=I("Th\u1ee7y"),pe=ge>=3,fe=ce&&ue&&!he&&(me||Ae||pe),xe=("M\u1eadu"===B||"K\u1ef7"===B)&&"Th\u1ed5"===M,ve="Th\xecn"===L||"Tu\u1ea5t"===L||"S\u1eedu"===L||"M\xf9i"===L;let ye=[];_.forEach(((e,t)=>{const[n,r]=e.split(" ");"Gi\xe1p"!==n&&"\u1ea4t"!==n||ye.push(`${R[t]} (Can: ${n})`),"D\u1ea7n"!==r&&"M\xe3o"!==r||ye.push(`${R[t]} (Chi: ${r})`);(y[r]||[]).forEach((e=>{"Gi\xe1p"!==e.can&&"\u1ea4t"!==e.can||ye.push(`${R[t]} (T\xe0n can: ${e.can})`)}))}));const be=ye.length>0,{hasTamHoi:we,hasTamHop:Ne}=D(["Th\xecn","Tu\u1ea5t","S\u1eedu","M\xf9i"],["Th\xecn","S\u1eedu","Tu\u1ea5t"]),je=I("Th\u1ed5"),Ce=je>=3,Te=xe&&ve&&!be&&(we||Ne||Ce),Se=!1===w,_e=b(_),Ee=_e.some((e=>["T\u1ef7 Ki\xean","Ki\u1ebfp T\xe0i","Thi\xean \u1ea4n","Ch\xednh \u1ea4n"].includes(e.thapThan))),Be=(e=>e.reduce(((e,t)=>["Th\u1ef1c Th\u1ea7n","Th\u01b0\u01a1ng Quan","Thi\xean T\xe0i","Ch\xednh T\xe0i"].includes(t.thapThan)?e+1:e),0))(_e),Me=Be>=3,ke=Se&&!Ee&&Me,Le=_e.filter((e=>["T\u1ef7 Ki\xean","Ki\u1ebfp T\xe0i","Thi\xean \u1ea4n","Ch\xednh \u1ea4n"].includes(e.thapThan))).map((e=>`${e.thapThan} (${e.tru}${"T\xe0n Can"===e.type?" - T\xe0n can":""})`)),Ie=_e.filter((e=>["Th\u1ef1c Th\u1ea7n","Th\u01b0\u01a1ng Quan","Thi\xean T\xe0i","Ch\xednh T\xe0i"].includes(e.thapThan))).map((e=>`${e.thapThan} (${e.tru}${"T\xe0n Can"===e.type?" - T\xe0n can":""})`));let De=!1===w,Pe=!1,Fe=[];if(De){var Ue;const e=x.canChi[0].split(" ")[1],t=x.canChi[0].split(" ")[0],n=null===(Ue=v.can[t])||void 0===Ue?void 0:Ue.nguHanh;(y[e]||[]).forEach((e=>{var t;const r=null===(t=v.can[e.can])||void 0===t?void 0:t.nguHanh;r&&r!==n&&(Pe=!0,Fe.push(`${e.can} (${r})`))}))}const Re=b(_),Oe=Re.filter((e=>"Th\u1ea5t S\xe1t"===e.thapThan||"Ch\xednh Quan"===e.thapThan)),He=Re.filter((e=>"Th\u1ef1c Th\u1ea7n"===e.thapThan||"Th\u01b0\u01a1ng Quan"===e.thapThan)),Qe=Oe.length>=2,ze=0===He.length,Ve=Re.filter((e=>"Thi\xean T\xe0i"===e.thapThan||"Ch\xednh T\xe0i"===e.thapThan)),Ke=Ve.length>0,Ge=De&&Pe&&Qe&&ze&&Ke,qe=x.canChi[0].split(" ")[0],We=x.canChi[1].split(" ")[0],$e=null===(r=v.can[qe])||void 0===r?void 0:r.nguHanh,Xe=null===(s=v.can[We])||void 0===s?void 0:s.nguHanh,Ye={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"},Je=Ye[$e]===Xe,Ze=b(_),et=Ze.filter((e=>"Th\u1ef1c Th\u1ea7n"===e.thapThan||"Th\u01b0\u01a1ng Quan"===e.thapThan)),tt=et.length>=2,nt=Ze.filter((e=>"Thi\xean T\xe0i"===e.thapThan||"Ch\xednh T\xe0i"===e.thapThan)),rt=nt.length>0,st=_.map((e=>e.split(" ")[1])),it=[["D\u1ea7n","M\xe3o","Th\xecn","M\u1ed9c"],["T\u1ef5","Ng\u1ecd","M\xf9i","H\u1ecfa"],["Th\xe2n","D\u1eadu","Tu\u1ea5t","Kim"],["H\u1ee3i","T\xfd","S\u1eedu","Th\u1ee7y"]],at=[["Th\xe2n","T\xfd","Th\xecn","Th\u1ee7y"],["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t","H\u1ecfa"],["H\u1ee3i","M\xe3o","M\xf9i","M\u1ed9c"],["T\u1ef5","D\u1eadu","S\u1eedu","Kim"]],ot=[["D\u1ea7n","Ng\u1ecd","H\u1ecfa"],["Th\xe2n","T\xfd","Th\u1ee7y"],["H\u1ee3i","M\xe3o","M\u1ed9c"],["T\u1ef5","D\u1eadu","Kim"]];let lt=[];for(const[t,At,Kt,Gt]of it)st.includes(t)&&st.includes(At)&&st.includes(Kt)&&lt.push({type:"Tam h\u1ed9i",hanh:Gt,chi:[t,At,Kt]});for(const[t,At,Kt,Gt]of at)st.includes(t)&&st.includes(At)&&st.includes(Kt)&&lt.push({type:"Tam h\u1ee3p",hanh:Gt,chi:[t,At,Kt]});for(const[t,At,Kt]of ot)st.includes(t)&&st.includes(At)&&lt.push({type:"B\xe1n tam h\u1ee3p",hanh:Kt,chi:[t,At]});const ct=lt.some((e=>e.hanh===Xe)),ut=Ze.filter((e=>"Th\u1ea5t S\xe1t"===e.thapThan||"Ch\xednh Quan"===e.thapThan)),dt=Ze.filter((e=>"Thi\xean \u1ea4n"===e.thapThan||"Ch\xednh \u1ea4n"===e.thapThan)),ht=0===ut.length,mt=0===dt.length,gt=ht||mt,pt=Je&&tt&&rt&&ct&&gt,ft={"Gi\xe1p":"K\u1ef7","K\u1ef7":"Gi\xe1p","\u1ea4t":"Canh",Canh:"\u1ea4t","B\xednh":"T\xe2n","T\xe2n":"B\xednh","\u0110inh":"Nh\xe2m","Nh\xe2m":"\u0110inh","M\u1eadu":"Qu\xfd","Qu\xfd":"M\u1eadu"},xt={"Gi\xe1p":"Canh",Canh:"Gi\xe1p","\u1ea4t":"T\xe2n","T\xe2n":"\u1ea4t","B\xednh":"Nh\xe2m","Nh\xe2m":"B\xednh","\u0110inh":"Qu\xfd","Qu\xfd":"\u0110inh","M\u1eadu":"K\u1ef7","K\u1ef7":"M\u1eadu"},vt={"Gi\xe1p K\u1ef7":"Th\u1ed5","\u1ea4t Canh":"Kim","B\xednh T\xe2n":"Th\u1ee7y","\u0110inh Nh\xe2m":"M\u1ed9c","M\u1eadu Qu\xfd":"H\u1ecfa"},yt=null===x||void 0===x||null===(i=x.canChi)||void 0===i||null===(a=i[0])||void 0===a||null===(o=a.split(" "))||void 0===o?void 0:o[0],bt=null===x||void 0===x||null===(l=x.canChi)||void 0===l||null===(c=l[1])||void 0===c||null===(u=c.split(" "))||void 0===u?void 0:u[0],wt=null===x||void 0===x||null===(d=x.canChi)||void 0===d||null===(h=d[3])||void 0===h||null===(m=h.split(" "))||void 0===m?void 0:m[0];let Nt=[],jt=null,Ct=null;if(yt&&bt&&ft[yt]===bt){const e=[yt,bt].sort().join(" ");jt={can1:yt,can2:bt,tru1:"Ng\xe0y",tru2:"Th\xe1ng",hanh:vt[e]},Nt.push(jt)}if(yt&&wt&&ft[yt]===wt){const e=[yt,wt].sort().join(" ");Ct={can1:yt,can2:wt,tru1:"Ng\xe0y",tru2:"Gi\u1edd",hanh:vt[e]},Nt.push(Ct)}const Tt=Nt.length>0,St=e=>{const t=xt[e.can1],n=xt[e.can2];let r=[];return _.forEach(((s,i)=>{const[a]=s.split(" ");a!==t&&a!==n||R[i]===e.tru1||R[i]===e.tru2||r.push(`${a} (${R[i]})`)})),r},_t=Nt.map((e=>({...e,xungList:St(e)}))),Et=_t.some((e=>0===e.xungList.length)),Bt=null===x||void 0===x||null===(A=x.canChi)||void 0===A||null===(g=A[1])||void 0===g||null===(p=g.split(" "))||void 0===p?void 0:p[1],Mt=["D\u1ea7n","M\xe3o"].includes(kt=Bt)?"Xu\xe2n":["T\u1ef5","Ng\u1ecd"].includes(kt)?"H\u1ea1":["Th\xe2n","D\u1eadu"].includes(kt)?"Thu":["H\u1ee3i","T\xfd"].includes(kt)?"\u0110\xf4ng":"T\u1ee9 Qu\xfd";var kt;const Lt={"Xu\xe2n":"M\u1ed9c","H\u1ea1":"H\u1ecfa",Thu:"Kim","\u0110\xf4ng":"Th\u1ee7y","T\u1ee9 Qu\xfd":"Th\u1ed5"}[Mt],It=Nt.map((e=>{return{...e,hopMua:(t=e.hanh,t===Lt||Ye[Lt]===t)};var t})),Dt=It.some((e=>e.hopMua)),Pt=null===(f=v.chi[Bt])||void 0===f?void 0:f.nguHanh,Ft=Nt.map((e=>{return{...e,hopChi:(t=e.hanh,t===Pt||Ye[Pt]===t)};var t})),Ut=Ft.some((e=>e.hopChi)),Rt={Kim:"M\u1ed9c","M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim"},Ot=(()=>{let e={Kim:0,"M\u1ed9c":0,"Th\u1ee7y":0,"H\u1ecfa":0,"Th\u1ed5":0};return _.forEach((t=>{var n;const[r,s]=t.split(" "),i=null===(n=v.can[r])||void 0===n?void 0:n.nguHanh;i&&e[i]++;(y[s]||[]).forEach((t=>{var n;const r=null===(n=v.can[t.can])||void 0===n?void 0:n.nguHanh;r&&e[r]++}))})),e})(),Ht=Nt.map((e=>{return{...e,khongBiKhac:(t=e.hanh,Ot[Rt[t]]<=2),soHanhKhac:Ot[Rt[e.hanh]]};var t})),Qt=Ht.some((e=>e.khongBiKhac)),zt=Tt&&Et&&Dt&&Ut&&Qt,Vt=[];V&&Vt.push("Kh\xfac Tr\u1ef1c"),Z&&Vt.push("Vi\xeam Th\u01b0\u1ee3ng"),le&&Vt.push("T\xf2ng C\xe1ch"),fe&&Vt.push("Nhu\u1eadn H\u1ea1"),Te&&Vt.push("Gia T\u01b0\u1eddng"),ke&&Vt.push("T\xf2ng T\xe0i"),Ge&&Vt.push("T\xf2ng S\xe1t"),pt&&Vt.push("T\xf2ng Nhi"),zt&&Vt.push("H\xf3a Kh\xed");Vt.map((e=>"H\xf3a Kh\xed"===e&&Nt.length>0?{name:e,dungThan:Nt.map((e=>e.hanh))}:{name:e,dungThan:null}));return(0,At.jsxs)("div",{className:"space-y-4 text-sm text-gray-400 bg-gray-800 p-4 rounded-lg shadow mt-4",children:[(0,At.jsxs)("div",{className:"p-4 bg-gray-900 border-b border-gray-600 rounded-lg text-base shadow flex items-center gap-2 justify-center cursor-pointer",onClick:()=>T((e=>!e)),children:[(0,At.jsx)("span",{className:"font-bold text-gray-200",children:"C\xe1ch C\u1ee5c \u0110\u1eb7c Bi\u1ec7t:"}),Vt.length>0?(0,At.jsx)("span",{className:"text-green-600 font-semibold text-gray-200",children:Vt.join(", ")}):(0,At.jsx)("span",{className:"text-red-500 font-semibold text-gray-200",children:"Kh\xf4ng c\xf3"}),C?(0,At.jsx)(uN,{className:"w-4 h-4"}):(0,At.jsx)(hN,{className:"w-4 h-4"})]}),C&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4 text-gray-200",children:["C\xe1ch Kh\xfac Tr\u1ef1c (M\u1ed9c \u0111\u1ed9c v\u01b0\u1ee3ng)",(0,At.jsx)("span",{className:"uppercase ml-2 "+(V?"text-green-500":"text-red-500"),children:V?"C\xf3":"Kh\xf4ng"}),V&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: M\u1ed9c"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(P?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 text-gray-200",children:"Nh\u1eadt ch\u1ee7 l\xe0 Gi\xe1p, \u1ea4t M\u1ed9c"}),(0,At.jsxs)("p",{className:""+(P?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsxs)("b",{children:[B," ",M]})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(F?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 text-gray-200",children:"Sinh th\xe1ng D\u1ea7n, M\xe3o"}),(0,At.jsxs)("p",{className:""+(F?"text-green-500":"text-red-500"),children:["Sinh th\xe1ng: ",(0,At.jsx)("b",{children:L})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(O?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 text-gray-200",children:"Kh\xf4ng c\xf3 Canh, T\xe2n, D\u1eadu, Th\xe2n"}),(0,At.jsxs)("p",{className:""+(O?"text-red-500":"text-green-500"),children:[" ",(0,At.jsx)("b",{children:O?"C\xf3":"Kh\xf4ng c\xf3"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(O?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 md:text-left text-gray-200",children:"C\xf3 Tam H\u1ed9i/H\u1ee3p M\u1ed9c ho\u1eb7c nhi\u1ec1u M\u1ed9c"}),(0,At.jsxs)("p",{className:""+(H?"text-green-500":"text-red-500"),children:["Tam H\u1ed9i M\u1ed9c: ",(0,At.jsx)("b",{children:H?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(Q?"text-green-500":"text-red-500"),children:["Tam H\u1ee3p M\u1ed9c: ",(0,At.jsx)("b",{children:Q?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(z?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng M\u1ed9c: ",(0,At.jsx)("b",{children:z})]})]}),O&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:U.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 text-red-700",children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch Vi\xeam Th\u01b0\u1ee3ng (H\u1ecfa \u0111\u1ed9c v\u01b0\u1ee3ng)",(0,At.jsx)("span",{className:"uppercase ml-2 "+(Z?"text-green-500":"text-red-500"),children:Z?"C\xf3":"Kh\xf4ng"}),Z&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: H\u1ecfa"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(K?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 l\xe0 B\xednh, \u0110inh H\u1ecfa"}),(0,At.jsxs)("p",{className:""+(K?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsxs)("b",{children:[B," ",M]})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(G?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Sinh th\xe1ng T\u1ef5, Ng\u1ecd"}),(0,At.jsxs)("p",{className:""+(G?"text-green-500":"text-red-500"),children:["Sinh th\xe1ng: ",(0,At.jsx)("b",{children:L})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(W?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 Nh\xe2m, Qu\xfd, H\u1ee3i, T\xfd"}),(0,At.jsxs)("p",{className:""+(W?"text-red-500":"text-green-500"),children:[" ",(0,At.jsx)("b",{children:W?"C\xf3":"Kh\xf4ng c\xf3"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+($||X||J?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 md:text-left",children:"C\xf3 Tam H\u1ed9i/H\u1ee3p H\u1ecfa ho\u1eb7c nhi\u1ec1u H\u1ecfa"}),(0,At.jsxs)("p",{className:""+($?"text-green-500":"text-red-500"),children:["Tam H\u1ed9i H\u1ecfa: ",(0,At.jsx)("b",{children:$?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(X?"text-green-500":"text-red-500"),children:["Tam H\u1ee3p H\u1ecfa: ",(0,At.jsx)("b",{children:X?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(Y?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng H\u1ecfa: ",(0,At.jsx)("b",{children:Y})]})]}),W&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:q.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch T\xf2ng C\xe1ch (Kim \u0111\u1ed9c v\u01b0\u1ee3ng)",(0,At.jsx)("span",{className:"uppercase ml-2 "+(le?"text-green-500":"text-red-500"),children:le?"C\xf3":"Kh\xf4ng"}),le&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: Kim"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ee?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 l\xe0 Canh, T\xe2n Kim"}),(0,At.jsxs)("p",{className:""+(ee?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsxs)("b",{children:[B," ",M]})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(te?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Sinh th\xe1ng Th\xe2n, D\u1eadu"}),(0,At.jsxs)("p",{className:""+(te?"text-green-500":"text-red-500"),children:["Sinh th\xe1ng: ",(0,At.jsx)("b",{children:L})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(re?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 B\xednh, \u0110inh, T\u1ef5, Ng\u1ecd"}),(0,At.jsxs)("p",{className:""+(re?"text-red-500":"text-green-500"),children:[" ",(0,At.jsx)("b",{children:re?"C\xf3":"Kh\xf4ng c\xf3"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(se||ie||oe?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 md:text-left",children:"C\xf3 Tam H\u1ed9i/H\u1ee3p Kim ho\u1eb7c nhi\u1ec1u Kim"}),(0,At.jsxs)("p",{className:""+(se?"text-green-500":"text-red-500"),children:["Tam H\u1ed9i Kim: ",(0,At.jsx)("b",{children:se?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(ie?"text-green-500":"text-red-500"),children:["Tam H\u1ee3p Kim: ",(0,At.jsx)("b",{children:ie?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(ae?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng Kim: ",(0,At.jsx)("b",{children:ae})]})]}),re&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:ne.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch Nhu\u1eadn H\u1ea1 (Th\u1ee7y \u0111\u1ed9c v\u01b0\u1ee3ng)",(0,At.jsx)("span",{className:"uppercase ml-2 "+(fe?"text-green-500":"text-red-500"),children:fe?"C\xf3":"Kh\xf4ng"}),fe&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: Th\u1ee7y"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ce?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 l\xe0 Nh\xe2m, Qu\xfd Th\u1ee7y"}),(0,At.jsxs)("p",{className:""+(ce?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsxs)("b",{children:[B," ",M]})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ue?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Sinh th\xe1ng H\u1ee3i, T\xfd"}),(0,At.jsxs)("p",{className:""+(ue?"text-green-500":"text-red-500"),children:["Sinh th\xe1ng: ",(0,At.jsx)("b",{children:L})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(he?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 M\u1eadu, K\u1ef7, Th\xecn, Tu\u1ea5t, S\u1eedu, M\xf9i"}),(0,At.jsxs)("p",{className:""+(he?"text-red-500":"text-green-500"),children:[" ",(0,At.jsx)("b",{children:he?"C\xf3":"Kh\xf4ng c\xf3"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(me||Ae||pe?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 md:text-left",children:"C\xf3 Tam H\u1ed9i/H\u1ee3p Th\u1ee7y ho\u1eb7c nhi\u1ec1u Th\u1ee7y"}),(0,At.jsxs)("p",{className:""+(me?"text-green-500":"text-red-500"),children:["Tam H\u1ed9i Th\u1ee7y: ",(0,At.jsx)("b",{children:me?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(Ae?"text-green-500":"text-red-500"),children:["Tam H\u1ee3p Th\u1ee7y: ",(0,At.jsx)("b",{children:Ae?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(ge?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng Th\u1ee7y: ",(0,At.jsx)("b",{children:ge})]})]}),he&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:de.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch Gia T\u01b0\u1eddng (Th\u1ed5 \u0111\u1ed9c v\u01b0\u1ee3ng)",(0,At.jsx)("span",{className:"uppercase ml-2 "+(Te?"text-green-500":"text-red-500"),children:Te?"C\xf3":"Kh\xf4ng"}),Te&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: Th\u1ed5"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(xe?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 l\xe0 M\u1eadu, K\u1ef7 Th\u1ed5"}),(0,At.jsxs)("p",{className:""+(xe?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsxs)("b",{children:[B," ",M]})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ve?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Sinh th\xe1ng Th\xecn, Tu\u1ea5t, S\u1eedu, M\xf9i"}),(0,At.jsxs)("p",{className:""+(ve?"text-green-500":"text-red-500"),children:["Sinh th\xe1ng: ",(0,At.jsx)("b",{children:L})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(be?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 Gi\xe1p, \u1ea4t, D\u1ea7n, M\xe3o"}),(0,At.jsxs)("p",{className:""+(be?"text-red-500":"text-green-500"),children:[" ",(0,At.jsx)("b",{children:be?"C\xf3":"Kh\xf4ng c\xf3"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(we||Ne||Ce?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200 md:text-left",children:"C\xf3 Tam - T\u1ee9 Th\u1ed5 ho\u1eb7c nhi\u1ec1u Th\u1ed5"}),(0,At.jsxs)("p",{className:""+(Ne?"text-green-500":"text-red-500"),children:["Tam Th\u1ed5: ",(0,At.jsx)("b",{children:Ne?"C\xf3":"Kh\xf4ng"})]}),(0,At.jsxs)("p",{className:""+(je?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng Th\u1ed5: ",(0,At.jsx)("b",{children:je})]})]}),be&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:ye.join(" - ")})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch T\xf2ng T\xe0i",(0,At.jsx)("span",{className:"uppercase ml-2 "+(ke?"text-green-500":"text-red-500"),children:ke?"C\xf3":"Kh\xf4ng"}),ke&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: Th\u1ef1c Th\u01b0\u01a1ng sinh T\xe0i"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Se?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 nh\u01b0\u1ee3c"}),(0,At.jsxs)("p",{className:""+(Se?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsx)("b",{children:Se?"Suy":"V\u01b0\u1ee3ng"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Ee?"border-red-600":"border-green-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 T\u1ef7 Ki\xean, Ki\u1ebfp T\xe0i, Thi\xean \u1ea4n, Ch\xednh \u1ea4n"}),(0,At.jsxs)("p",{className:""+(Ee?"text-red-500":"text-green-500"),children:[" ",Ee?"Kh\xf4ng \u0111\u1ea1t":"\u0110\u1ea1t"]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Me?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nhi\u1ec1u Th\u1ef1c Th\u1ea7n, Th\u01b0\u01a1ng Quan, Thi\xean T\xe0i, Ch\xednh T\xe0i"}),(0,At.jsxs)("p",{className:""+(Me?"text-green-500":"text-red-500"),children:["S\u1ed1 l\u01b0\u1ee3ng: ",(0,At.jsx)("b",{children:Be})]})]}),Ee&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Le.length>0?Le.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t))):"Kh\xf4ng c\xf3"}),Ie.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Ie.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch T\xf2ng S\xe1t",(0,At.jsx)("span",{className:"uppercase ml-2 "+(Ge?"text-green-500":"text-red-500"),children:Ge?"C\xf3":"Kh\xf4ng"}),Ge&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: T\xe0i"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(De?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nh\u1eadt ch\u1ee7 nh\u01b0\u1ee3c"}),(0,At.jsxs)("p",{className:""+(De?"text-green-500":"text-red-500"),children:["Nh\u1eadt ch\u1ee7: ",(0,At.jsx)("b",{children:De?"Suy":"V\u01b0\u1ee3ng"})]})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Pe?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"T\xe0n can v\xe0 can nh\u1eadt ch\u1ee7 kh\xf4ng tr\xf9ng"}),(0,At.jsx)("p",{className:""+(Pe?"text-green-500":"text-red-500"),children:Pe?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Qe?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nhi\u1ec1u Th\u1ea5t S\xe1t, Ch\xednh Quan"}),(0,At.jsx)("p",{className:""+(Qe?"text-green-500":"text-red-500"),children:Qe?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ze?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 Th\u1ef1c Th\u1ea7n, Th\u01b0\u01a1ng Quan"}),(0,At.jsx)("p",{className:""+(ze?"text-green-500":"text-red-500"),children:ze?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Ke?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"C\xf3 Thi\xean T\xe0i, Ch\xednh T\xe0i"}),(0,At.jsx)("p",{className:""+(Ke?"text-green-500":"text-red-500"),children:Ke?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),Pe&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Fe.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t)))}),Oe.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Oe.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))}),He.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:He.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))}),Ve.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Ve.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch T\xf2ng Nhi",(0,At.jsx)("span",{className:"uppercase ml-2 "+(pt?"text-green-500":"text-red-500"),children:pt?"C\xf3":"Kh\xf4ng"}),pt&&(0,At.jsx)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:"- D\u1ee5ng Th\u1ea7n: Th\u1ef1c Th\u01b0\u01a1ng"})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Je?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Can ng\xe0y sinh ra can th\xe1ng"}),(0,At.jsx)("p",{className:""+(Je?"text-green-500":"text-red-500"),children:Je?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(tt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Nhi\u1ec1u Th\u1ef1c Th\u1ea7n, Th\u01b0\u01a1ng Quan"}),(0,At.jsx)("p",{className:""+(tt?"text-green-500":"text-red-500"),children:tt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(rt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"C\xf3 Thi\xean T\xe0i, Ch\xednh T\xe0i"}),(0,At.jsx)("p",{className:""+(rt?"text-green-500":"text-red-500"),children:rt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(ct?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Tam h\u1ed9i, Tam h\u1ee3p, B\xe1n tam c\xf9ng h\xe0nh can th\xe1ng"}),(0,At.jsx)("p",{className:""+(ct?"text-green-500":"text-red-500"),children:ct?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(gt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 Th\u1ea5t S\xe1t, Ch\xednh Quan, Thi\xean \u1ea4n, Ch\xednh \u1ea4n"}),(0,At.jsx)("p",{className:""+(gt?"text-green-500":"text-red-500"),children:gt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),et.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:et.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))}),nt.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:nt.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))}),ct&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:lt.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-blue-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-blue-700",children:[e.type,": ",e.chi.join(", ")," \u2192 ",e.hanh]},t)))}),!gt&&(ut.length>0||dt.length>0)&&(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:[ut.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t))),dt.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-yellow-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-yellow-700",children:[e.thapThan," (",e.tru,"T\xe0n Can"===e.type?" - T\xe0n can":"",")"]},t)))]})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsxs)("h3",{className:"text-base font-bold mb-4",children:["C\xe1ch H\xf3a Kh\xed",(0,At.jsx)("span",{className:"uppercase ml-2 "+(zt?"text-green-500":"text-red-500"),children:zt?"C\xf3":"Kh\xf4ng"}),zt&&Nt.length>0&&(0,At.jsxs)("span",{className:"ml-2 text-blue-600 font-semibold text-gray-200",children:["- D\u1ee5ng Th\u1ea7n: ",Nt.map((e=>e.hanh)).join(", ")]})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-1",children:[(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Tt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Can ng\xe0y h\u1ee3p h\xf3a v\u1edbi can th\xe1ng/gi\u1edd"}),(0,At.jsx)("p",{className:""+(Tt?"text-green-500":"text-red-500"),children:Tt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Et?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng c\xf3 can xung v\u1edbi can \u0111ang h\u1ee3p"}),(0,At.jsx)("p",{className:""+(Et?"text-green-500":"text-red-500"),children:Et?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Dt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Ng\u0169 h\xe0nh m\u1edbi h\u1ee3p v\u1edbi m\xf9a sinh"}),(0,At.jsx)("p",{className:""+(Dt?"text-green-500":"text-red-500"),children:Dt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Ut?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Ng\u0169 h\xe0nh m\u1edbi h\u1ee3p v\u1edbi chi th\xe1ng"}),(0,At.jsx)("p",{className:""+(Ut?"text-green-500":"text-red-500"),children:Ut?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),(0,At.jsxs)("div",{className:"md:flex justify-between gap-3 p-2 rounded border "+(Qt?"border-green-600":"border-red-600"),children:[(0,At.jsx)("p",{className:"font-semibold text-gray-200",children:"Kh\xf4ng b\u1ecb kh\u1eafc b\u1edfi ng\u0169 h\xe0nh nhi\u1ec1u"}),(0,At.jsx)("p",{className:""+(Qt?"text-green-500":"text-red-500"),children:Qt?"\u0110\u1ea1t":"Kh\xf4ng \u0111\u1ea1t"})]}),Nt.length>0&&(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Nt.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border border-green-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-green-700",children:[e.can1," (",e.tru1,") + ",e.can2," (",e.tru2,") \u2192 ",e.hanh]},t)))}),(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:[(0,At.jsxs)("span",{className:"text-blue-700 mr-2",children:["Chi th\xe1ng ",Bt," (",Pt,")"]}),Ft.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border rounded px-2 py-1 mr-1 mb-1 bg-gray-800 "+(e.hopChi?"border-green-600 text-green-700":"border-red-600 text-red-700"),children:[e.hanh," (",e.hopChi?"H\u1ee3p":"Kh\xf4ng h\u1ee3p",")"]},t)))]}),(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:[(0,At.jsxs)("span",{className:"text-blue-700 mr-2",children:["M\xf9a ",Mt," (",Lt,")"]}),It.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border rounded px-2 py-1 mr-1 mb-1 bg-gray-800 "+(e.hopMua?"border-green-600 text-green-700":"border-red-600 text-red-700"),children:[e.hanh," (",e.hopMua?"H\u1ee3p":"Kh\xf4ng h\u1ee3p",")"]},t)))]}),_t.map(((e,t)=>e.xungList.length>0?(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:[(0,At.jsxs)("span",{className:"text-red-700",children:["Can xung v\u1edbi ",e.can1," (",e.tru1,") + ",e.can2," (",e.tru2,"):"]}),e.xungList.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block border border-red-600 rounded px-2 py-1 mr-1 mb-1 bg-gray-800 text-red-700",children:e},t)))]},t):null)),(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1 col-span-2",children:Ht.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-block border rounded px-2 py-1 mr-1 mb-1 bg-gray-800 "+(e.khongBiKhac?"border-green-600 text-green-700":"border-red-600 text-red-700"),children:[e.hanh," b\u1ecb ",Rt[e.hanh]," kh\u1eafc (",e.soHanhKhac," l\u1ea7n)"]},t)))})]})]})]})]})},AN=e=>{var t,n;let{dayDetails:r,nguHanhAmDuong:s,tanCanMapping:i,truongSinhMap:a,analyzeThapThan:o,analyzeTruongSinh:l}=e;if(!r)return null;const[c,u]=r.currentCanChiHour.split(" "),{napAm:d,color:h}=oN(`${c} ${u}`),m=[r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]],A=o(m),g=(null===(t=A.find((e=>"Gi\u1edd"===e.tru&&"Thi\xean Can"===e.type)))||void 0===t||t.thapThan,A.filter((e=>"Gi\u1edd"===e.tru&&"T\xe0n Can"===e.type)));oN(`${c} ${u}`);return(0,At.jsxs)("div",{className:"border border-gray-700 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-700 pb-2",children:"Gi\u1edd"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=o([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Gi\u1edd"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=l([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Gi\u1edd"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.can[c].color} `,children:[c,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",s.can[c].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.chi[u].color} `,children:[u,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",s.chi[u].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${h}`,children:d}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-700 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(n=i[u])||void 0===n?void 0:n.map(((e,t)=>{const n=g.find((t=>t.can===e.can));return(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${s.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",s.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(null===n||void 0===n?void 0:n.thapThan)||""}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=r.canChi[1].split(" ")[1];if(a[e.can]&&a[e.can][t]){const{name:n,score:r}=a[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)}))})]})]})},gN=e=>{var t;let{dayDetails:n,nguHanhAmDuong:r,tanCanMapping:s,truongSinhMap:i,analyzeThapThan:a,analyzeTruongSinh:o}=e;if(!n)return null;const[l,c]=n.canChi[0].split(" "),{napAm:u,color:d}=oN(`${l} ${c}`);return(0,At.jsxs)("div",{className:"border border-gray-700 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-700 pb-2",children:"Ng\xe0y"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"Ng\xe0y"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=o([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"Ng\xe0y"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.can[l].color} `,children:[l,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[l].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.chi[c].color} `,children:[c,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.chi[c].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${d}`,children:u}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-700 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(t=s[c])||void 0===t?void 0:t.map(((e,t)=>(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${r.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const t=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((t=>"Ng\xe0y"===t.tru&&"T\xe0n Can"===t.type&&t.can===e.can));return t?t.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=n.canChi[1].split(" ")[1];if(i[e.can]&&i[e.can][t]){const{name:n,score:r}=i[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)))})]})]})},pN=e=>{var t;let{dayDetails:n,nguHanhAmDuong:r,tanCanMapping:s,truongSinhMap:i,analyzeThapThan:a,analyzeTruongSinh:o}=e;if(!n)return null;const[l,c]=n.canChi[1].split(" "),{napAm:u,color:d}=oN(`${l} ${c}`);return(0,At.jsxs)("div",{className:"border border-gray-700 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-700 pb-2",children:"Th\xe1ng"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"Th\xe1ng"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=o([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"Th\xe1ng"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.can[l].color} `,children:[l,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[l].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.chi[c].color} `,children:[c,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.chi[c].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${d}`,children:u}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-700 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(t=s[c])||void 0===t?void 0:t.map(((e,t)=>(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${r.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const t=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((t=>"Th\xe1ng"===t.tru&&"T\xe0n Can"===t.type&&t.can===e.can));return t?t.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=n.canChi[1].split(" ")[1];if(i[e.can]&&i[e.can][t]){const{name:n,score:r}=i[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)))})]})]})},fN=e=>{var t;let{dayDetails:n,nguHanhAmDuong:r,tanCanMapping:s,truongSinhMap:i,analyzeThapThan:a,analyzeTruongSinh:o}=e;if(!n)return null;const[l,c]=n.canChi[2].split(" "),{napAm:u,color:d}=oN(`${l} ${c}`);return(0,At.jsxs)("div",{className:"border border-gray-700 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-700 pb-2",children:"N\u0103m"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"N\u0103m"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=o([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((e=>"N\u0103m"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.can[l].color} `,children:[l,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[l].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${r.chi[c].color} `,children:[c,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.chi[c].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${d}`,children:u}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-700 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(t=s[c])||void 0===t?void 0:t.map(((e,t)=>(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${r.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-400",children:["(",r.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const t=a([n.currentCanChiHour,n.canChi[0],n.canChi[1],n.canChi[2]]).find((t=>"N\u0103m"===t.tru&&"T\xe0n Can"===t.type&&t.can===e.can));return t?t.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=n.canChi[1].split(" ")[1];if(i[e.can]&&i[e.can][t]){const{name:n,score:r}=i[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)))})]})]})},xN=e=>{var t,n;let{dayDetails:r,nguHanhAmDuong:s,tanCanMapping:i,truongSinhMap:a,analyzeThapThan:o,analyzeTruongSinh:l}=e;if(!r||!r.canChi||!r.canChi[1])return null;const[c,u]=r.canChi[1].split(" "),d=(Iw.indexOf(c)+1)%10,h=(Dw.indexOf(u)+3)%12,m=Iw[d],A=Dw[h],g=[r.currentCanChiHour,r.canChi[0],`${m} ${A}`,r.canChi[2]],p=o(g),f=(null===(t=p.find((e=>"Th\xe1ng"===e.tru&&"Thi\xean Can"===e.type)))||void 0===t?void 0:t.thapThan)||"",x=p.filter((e=>"Th\xe1ng"===e.tru&&"T\xe0n Can"===e.type)),{napAm:v,color:y}=oN(`${m} ${A}`);return(0,At.jsxs)("div",{className:"border border-gray-600 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-600 pb-2",children:"Thai Nguy\xean"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=o([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Thai Nguy\xean"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=l([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Thai Nguy\xean"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.can[m].color} `,children:[m,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.can[m].amDuong,")"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:f}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=r.canChi[1].split(" ")[1];if(a[m]&&a[m][e]){const{name:t,score:n}=a[m][e],r=n>0?"text-green-600":n<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:r,children:t})}return""})()})]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.chi[A].color} `,children:[A,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.chi[A].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${y}`,children:v}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-600 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(n=i[A])||void 0===n?void 0:n.map(((e,t)=>{const n=x.find((t=>t.can===e.can));return(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${s.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(null===n||void 0===n?void 0:n.thapThan)||""}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=r.canChi[1].split(" ")[1];if(a[e.can]&&a[e.can][t]){const{name:n,score:r}=a[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)}))})]})]})},vN=e=>{var t,n;let{dayDetails:r,nguHanhAmDuong:s,tanCanMapping:i,truongSinhMap:a,analyzeThapThan:o,analyzeTruongSinh:l}=e;if(!r||!r.canChi)return null;const c={1:"T\xfd",2:"H\u1ee3i",3:"Tu\u1ea5t",4:"D\u1eadu",5:"Th\xe2n",6:"M\xf9i",7:"Ng\u1ecd",8:"T\u1ef5",9:"Th\xecn",10:"M\xe3o",11:"D\u1ea7n",12:"S\u1eedu"}[parseInt(r.solarDate.split("/")[1])],[,u]=r.currentCanChiHour.split(" "),d=((e,t)=>{const n=Dw;n.indexOf(e),n.indexOf(t),n.indexOf("M\xe3o");let r={thang:e,gio:t};for(;"M\xe3o"!==r.gio;){const e=(n.indexOf(r.thang)+1)%12,t=(n.indexOf(r.gio)+1)%12;r={thang:n[e],gio:n[t]}}return r.thang})(c,u),h=(e=>{const[t]=r.canChi[2].split(" ");let n=(2*(Iw.indexOf(t)+1)+1)%10-1;const i=s.chi[e].amDuong;let a=Iw[n],o=s.can[a].amDuong;if(o!==i)for(let r=0;r<10&&(n=(n+1)%10,a=Iw[n],o=s.can[a].amDuong,o!==i);r++);return a})(d),m=[`${h} ${d}`,r.canChi[0],r.canChi[1],r.canChi[2]],A=o(m),g=(null===(t=A.find((e=>"Gi\u1edd"===e.tru&&"Thi\xean Can"===e.type)))||void 0===t?void 0:t.thapThan)||"",p=A.filter((e=>"Gi\u1edd"===e.tru&&"T\xe0n Can"===e.type)),{napAm:f,color:x}=oN(`${h} ${d}`);return(0,At.jsxs)("div",{className:"border border-gray-600 rounded-lg p-2 md:p-3 bg-gray-900",children:[(0,At.jsx)("div",{className:"text-base text-gray-300 border-b border-gray-600 pb-2",children:"Cung M\u1ec7nh"}),(0,At.jsx)("div",{className:"pt-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(()=>{const e=o([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Cung M\u1ec7nh"===e.tru&&"Thi\xean Can"===e.type));return e?e.thapThan:""})()}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=l([r.currentCanChiHour,r.canChi[0],r.canChi[1],r.canChi[2]]).find((e=>"Cung M\u1ec7nh"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.can[h].color} `,children:[h,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.can[h].amDuong,")"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:g}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const e=l(m).find((e=>"Gi\u1edd"===e.tru));if(e){const t=e.score>0?"text-green-600":e.score<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:t,children:e.name})}return""})()})]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsxs)("div",{className:`text-xl md:text-2xl font-bold ${s.chi[d].color} `,children:[d,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.chi[d].amDuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:`text-sm ${x}`,children:f}),(0,At.jsxs)("div",{className:"mt-2 border-t border-gray-600 pt-2",children:[(0,At.jsx)("div",{className:"text-gray-500",children:"-"}),(0,At.jsx)("div",{className:"space-y-4",children:null===(n=i[d])||void 0===n?void 0:n.map(((e,t)=>{const n=p.find((t=>t.can===e.can));return(0,At.jsxs)("div",{className:"text-md",children:[(0,At.jsxs)("span",{className:`font-bold ${s.can[e.can].color}`,children:[e.can,(0,At.jsxs)("span",{className:"text-xs ml-1 text-gray-300",children:["(",s.can[e.can].amDuong,")"]})]}),(0,At.jsxs)("span",{className:"text-xs ml-1 hidden",children:["(",e.diem,"%)"]}),(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"text-xs text-gray-400",children:(null===n||void 0===n?void 0:n.thapThan)||""}),(0,At.jsx)("div",{className:Zw.ITEM,children:(()=>{const t=r.canChi[1].split(" ")[1];if(a[e.can]&&a[e.can][t]){const{name:n,score:r}=a[e.can][t],s=r>0?"text-green-600":r<0?"text-red-600":"text-gray-400";return(0,At.jsx)("span",{className:s,children:n})}return""})()})]})]},t)}))})]})]})},yN={"M\u1ed9c":"text-green-600","H\u1ecfa":"text-red-500","Th\u1ed5":"text-yellow-700",Kim:"text-gray-500","Th\u1ee7y":"text-blue-600"},bN={"Gi\xe1p":"K\u1ef7","\u1ea4t":"Canh","B\xednh":"T\xe2n","\u0110inh":"Nh\xe2m","M\u1eadu":"Qu\xfd","K\u1ef7":"Gi\xe1p",Canh:"\u1ea4t","T\xe2n":"B\xednh","Nh\xe2m":"\u0110inh","Qu\xfd":"M\u1eadu"},wN={"Gi\xe1p":{"K\u1ef7":"Th\u1ed5"},"\u1ea4t":{Canh:"Kim"},"B\xednh":{"T\xe2n":"Th\u1ee7y"},"\u0110inh":{"Nh\xe2m":"M\u1ed9c"},"M\u1eadu":{"Qu\xfd":"H\u1ecfa"},"K\u1ef7":{"Gi\xe1p":"Th\u1ed5"},Canh:{"\u1ea4t":"Kim"},"T\xe2n":{"B\xednh":"Th\u1ee7y"},"Nh\xe2m":{"\u0110inh":"M\u1ed9c"},"Qu\xfd":{"M\u1eadu":"H\u1ecfa"}},NN={"Gi\xe1p":"Canh","\u1ea4t":"T\xe2n","B\xednh":"Nh\xe2m","\u0110inh":"Qu\xfd","M\u1eadu":"Gi\xe1p","K\u1ef7":"\u1ea4t",Canh:"B\xednh","T\xe2n":"\u0110inh","Nh\xe2m":"M\u1eadu","Qu\xfd":"K\u1ef7"},jN={"T\xfd":"S\u1eedu","S\u1eedu":"T\xfd","D\u1ea7n":"H\u1ee3i","M\xe3o":"Tu\u1ea5t","Th\xecn":"D\u1eadu","T\u1ef5":"Th\xe2n","Ng\u1ecd":"M\xf9i","M\xf9i":"Ng\u1ecd","Th\xe2n":"T\u1ef5","D\u1eadu":"Th\xecn","Tu\u1ea5t":"M\xe3o","H\u1ee3i":"D\u1ea7n"},CN={"T\xfd":"Ng\u1ecd","S\u1eedu":"M\xf9i","D\u1ea7n":"Th\xe2n","M\xe3o":"D\u1eadu","Th\xecn":"Tu\u1ea5t","T\u1ef5":"H\u1ee3i","Ng\u1ecd":"T\xfd","M\xf9i":"S\u1eedu","Th\xe2n":"D\u1ea7n","D\u1eadu":"M\xe3o","Tu\u1ea5t":"Th\xecn","H\u1ee3i":"T\u1ef5"},TN={"T\xfd":["M\xe3o"],"M\xe3o":["T\xfd"],"D\u1eadu":["D\u1eadu"],"Th\xecn":["Th\xecn"],"Ng\u1ecd":["Ng\u1ecd"],"H\u1ee3i":["H\u1ee3i"],"D\u1ea7n":["T\u1ef5"],"T\u1ef5":["Th\xe2n"],"Th\xe2n":["D\u1ea7n"],"S\u1eedu":["Tu\u1ea5t"],"Tu\u1ea5t":["M\xf9i"],"M\xf9i":["S\u1eedu"]},SN={"T\xfd":"M\xf9i","S\u1eedu":"Ng\u1ecd","D\u1ea7n":"T\u1ef5","M\xe3o":"Th\xecn","Th\xecn":"M\xe3o","T\u1ef5":"D\u1ea7n","Ng\u1ecd":"S\u1eedu","M\xf9i":"T\xfd","Th\xe2n":"H\u1ee3i","D\u1eadu":"Tu\u1ea5t","Tu\u1ea5t":"D\u1eadu","H\u1ee3i":"Th\xe2n"},_N={"T\u1ef5":"Tu\u1ea5t","Ng\u1ecd":"Tu\u1ea5t","H\u1ee3i":"Th\xecn","T\xfd":"Th\xecn","Th\xe2n":"S\u1eedu","D\u1eadu":"S\u1eedu","D\u1ea7n":"M\xf9i","M\xe3o":"M\xf9i"},EN=[["Th\xe2n","T\xfd","Th\xecn","Th\u1ee7y"],["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t","H\u1ecfa"],["H\u1ee3i","M\xe3o","M\xf9i","M\u1ed9c"],["T\u1ef5","D\u1eadu","S\u1eedu","Kim"]],BN=[["D\u1ea7n","Ng\u1ecd","H\u1ecfa"],["Th\xe2n","T\xfd","Th\u1ee7y"],["H\u1ee3i","M\xe3o","M\u1ed9c"],["T\u1ef5","D\u1eadu","Kim"]],MN=[["D\u1ea7n","M\xe3o","Th\xecn","M\u1ed9c"],["T\u1ef5","Ng\u1ecd","M\xf9i","H\u1ecfa"],["Th\xe2n","D\u1eadu","Tu\u1ea5t","Kim"],["H\u1ee3i","T\xfd","S\u1eedu","Th\u1ee7y"]],kN={"T\xfd":[{can:"Qu\xfd",diem:100}],"Ng\u1ecd":[{can:"\u0110inh",diem:70},{can:"K\u1ef7",diem:30}],"M\xe3o":[{can:"\u1ea4t",diem:100}],"D\u1eadu":[{can:"T\xe2n",diem:100}],"D\u1ea7n":[{can:"Gi\xe1p",diem:60},{can:"B\xednh",diem:30},{can:"M\u1eadu",diem:10}],"Th\xe2n":[{can:"Canh",diem:60},{can:"Nh\xe2m",diem:30},{can:"M\u1eadu",diem:10}],"T\u1ef5":[{can:"B\xednh",diem:60},{can:"Canh",diem:30},{can:"M\u1eadu",diem:10}],"H\u1ee3i":[{can:"Nh\xe2m",diem:70},{can:"Gi\xe1p",diem:30}],"Th\xecn":[{can:"M\u1eadu",diem:60},{can:"Qu\xfd",diem:30},{can:"\u1ea4t",diem:10}],"Tu\u1ea5t":[{can:"M\u1eadu",diem:60},{can:"\u0110inh",diem:30},{can:"T\xe2n",diem:10}],"S\u1eedu":[{can:"K\u1ef7",diem:60},{can:"T\xe2n",diem:30},{can:"Qu\xfd",diem:10}],"M\xf9i":[{can:"K\u1ef7",diem:60},{can:"\u1ea4t",diem:30},{can:"\u0110inh",diem:10}]},LN={"Gi\xe1p":"D\u1ea7n","\u1ea4t":"M\xe3o","B\xednh":"T\u1ef5","\u0110inh":"Ng\u1ecd","M\u1eadu":"T\u1ef5","K\u1ef7":"Ng\u1ecd",Canh:"Th\xe2n","T\xe2n":"D\u1eadu","Nh\xe2m":"H\u1ee3i","Qu\xfd":"T\xfd"},IN={"Gi\xe1p":["S\u1eedu","M\xf9i"],Canh:["S\u1eedu","M\xf9i"],"M\u1eadu":["S\u1eedu","M\xf9i"],"B\xednh":["H\u1ee3i","D\u1eadu"],"\u0110inh":["H\u1ee3i","D\u1eadu"],"T\xe2n":["Ng\u1ecd","D\u1ea7n"],"Nh\xe2m":["M\xe3o","T\u1ef5"],"Qu\xfd":["M\xe3o","T\u1ef5"],"\u1ea4t":["T\xfd","Th\xe2n"],"K\u1ef7":["T\xfd","Th\xe2n"]},DN={"Gi\xe1p":"M\u1ed9c","\u1ea4t":"M\u1ed9c","B\xednh":"H\u1ecfa","\u0110inh":"H\u1ecfa","M\u1eadu":"Th\u1ed5","K\u1ef7":"Th\u1ed5",Canh:"Kim","T\xe2n":"Kim","Nh\xe2m":"Th\u1ee7y","Qu\xfd":"Th\u1ee7y"},PN={"Gi\xe1p":{"H\u1ee3i":{name:"Tr\u01b0\u1eddng Sinh",score:4},"T\xfd":{name:"M\u1ed9c D\u1ee5c",score:2},"S\u1eedu":{name:"Quan \u0110\u1edbi",score:2},"D\u1ea7n":{name:"L\xe2m Quan",score:3},"M\xe3o":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"T\u1ef5":{name:"B\u1ec7nh",score:-2},"Ng\u1ecd":{name:"T\u1eed",score:-3},"M\xf9i":{name:"M\u1ed9",score:-5},"Th\xe2n":{name:"Tuy\u1ec7t",score:-4},"D\u1eadu":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},"\u1ea4t":{"Ng\u1ecd":{name:"Tr\u01b0\u1eddng Sinh",score:4},"T\u1ef5":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"M\xe3o":{name:"L\xe2m Quan",score:3},"D\u1ea7n":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"S\u1eedu":{name:"Suy",score:-1},"T\xfd":{name:"B\u1ec7nh",score:-2},"H\u1ee3i":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"D\u1eadu":{name:"Tuy\u1ec7t",score:-4},"Th\xe2n":{name:"Thai",score:1},"M\xf9i":{name:"D\u01b0\u1ee1ng",score:1}},"B\xednh":{"D\u1ea7n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"M\xe3o":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"T\u1ef5":{name:"L\xe2m Quan",score:3},"Ng\u1ecd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Th\xe2n":{name:"B\u1ec7nh",score:-2},"D\u1eadu":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"H\u1ee3i":{name:"Tuy\u1ec7t",score:-4},"T\xfd":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"\u0110inh":{"D\u1eadu":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Th\xe2n":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Ng\u1ecd":{name:"L\xe2m Quan",score:3},"T\u1ef5":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"M\xe3o":{name:"B\u1ec7nh",score:-2},"D\u1ea7n":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"T\xfd":{name:"Tuy\u1ec7t",score:-4},"H\u1ee3i":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},"M\u1eadu":{"D\u1ea7n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"M\xe3o":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"T\u1ef5":{name:"L\xe2m Quan",score:3},"Ng\u1ecd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Th\xe2n":{name:"B\u1ec7nh",score:-2},"D\u1eadu":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"H\u1ee3i":{name:"Tuy\u1ec7t",score:-4},"T\xfd":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"K\u1ef7":{"D\u1eadu":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Th\xe2n":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Ng\u1ecd":{name:"L\xe2m Quan",score:3},"T\u1ef5":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"M\xe3o":{name:"B\u1ec7nh",score:-2},"D\u1ea7n":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"T\xfd":{name:"Tuy\u1ec7t",score:-4},"H\u1ee3i":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},Canh:{"T\u1ef5":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Ng\u1ecd":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Th\xe2n":{name:"L\xe2m Quan",score:3},"D\u1eadu":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Tu\u1ea5t":{name:"Suy",score:-1},"H\u1ee3i":{name:"B\u1ec7nh",score:-2},"T\xfd":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"D\u1ea7n":{name:"Tuy\u1ec7t",score:-4},"M\xe3o":{name:"Thai",score:1},"Th\xecn":{name:"D\u01b0\u1ee1ng",score:1}},"T\xe2n":{"T\xfd":{name:"Tr\u01b0\u1eddng Sinh",score:4},"H\u1ee3i":{name:"M\u1ed9c D\u1ee5c",score:2},"Tu\u1ea5t":{name:"Quan \u0110\u1edbi",score:2},"D\u1eadu":{name:"L\xe2m Quan",score:3},"Th\xe2n":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Ng\u1ecd":{name:"B\u1ec7nh",score:-2},"T\u1ef5":{name:"T\u1eed",score:-3},"Th\xecn":{name:"M\u1ed9",score:-5},"M\xe3o":{name:"Tuy\u1ec7t",score:-4},"D\u1ea7n":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"Nh\xe2m":{"Th\xe2n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"D\u1eadu":{name:"M\u1ed9c D\u1ee5c",score:2},"Tu\u1ea5t":{name:"Quan \u0110\u1edbi",score:2},"H\u1ee3i":{name:"L\xe2m Quan",score:3},"T\xfd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"S\u1eedu":{name:"Suy",score:-1},"D\u1ea7n":{name:"B\u1ec7nh",score:-2},"M\xe3o":{name:"T\u1eed",score:-3},"Th\xecn":{name:"M\u1ed9",score:-5},"T\u1ef5":{name:"Tuy\u1ec7t",score:-4},"Ng\u1ecd":{name:"Thai",score:1},"M\xf9i":{name:"D\u01b0\u1ee1ng",score:1}},"Qu\xfd":{"M\xe3o":{name:"Tr\u01b0\u1eddng Sinh",score:4},"D\u1ea7n":{name:"M\u1ed9c D\u1ee5c",score:2},"S\u1eedu":{name:"Quan \u0110\u1edbi",score:2},"T\xfd":{name:"L\xe2m Quan",score:3},"H\u1ee3i":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Tu\u1ea5t":{name:"Suy",score:-1},"D\u1eadu":{name:"B\u1ec7nh",score:-2},"Th\xe2n":{name:"T\u1eed",score:-3},"M\xf9i":{name:"M\u1ed9",score:-5},"Ng\u1ecd":{name:"Tuy\u1ec7t",score:-4},"T\u1ef5":{name:"Thai",score:1},"Th\xecn":{name:"D\u01b0\u1ee1ng",score:1}}},FN={can:{"Gi\xe1p":{amDuong:"+",nguHanh:"M\u1ed9c",color:"text-green-600"},"\u1ea4t":{amDuong:"-",nguHanh:"M\u1ed9c",color:"text-green-600"},"B\xednh":{amDuong:"+",nguHanh:"H\u1ecfa",color:"text-red-600"},"\u0110inh":{amDuong:"-",nguHanh:"H\u1ecfa",color:"text-red-600"},"M\u1eadu":{amDuong:"+",nguHanh:"Th\u1ed5",color:"text-yellow-600"},"K\u1ef7":{amDuong:"-",nguHanh:"Th\u1ed5",color:"text-yellow-600"},Canh:{amDuong:"+",nguHanh:"Kim",color:"text-gray-400"},"T\xe2n":{amDuong:"-",nguHanh:"Kim",color:"text-gray-400"},"Nh\xe2m":{amDuong:"+",nguHanh:"Th\u1ee7y",color:"text-blue-600"},"Qu\xfd":{amDuong:"-",nguHanh:"Th\u1ee7y",color:"text-blue-600"}},chi:{"T\xfd":{amDuong:"+",nguHanh:"Th\u1ee7y",color:"text-blue-600"},"S\u1eedu":{amDuong:"-",nguHanh:"Th\u1ed5",color:"text-yellow-600"},"D\u1ea7n":{amDuong:"+",nguHanh:"M\u1ed9c",color:"text-green-600"},"M\xe3o":{amDuong:"-",nguHanh:"M\u1ed9c",color:"text-green-600"},"Th\xecn":{amDuong:"+",nguHanh:"Th\u1ed5",color:"text-yellow-600"},"T\u1ef5":{amDuong:"-",nguHanh:"H\u1ecfa",color:"text-red-600"},"Ng\u1ecd":{amDuong:"+",nguHanh:"H\u1ecfa",color:"text-red-600"},"M\xf9i":{amDuong:"-",nguHanh:"Th\u1ed5",color:"text-yellow-600"},"Th\xe2n":{amDuong:"+",nguHanh:"Kim",color:"text-gray-400"},"D\u1eadu":{amDuong:"-",nguHanh:"Kim",color:"text-gray-400"},"Tu\u1ea5t":{amDuong:"+",nguHanh:"Th\u1ed5",color:"text-yellow-600"},"H\u1ee3i":{amDuong:"-",nguHanh:"Th\u1ee7y",color:"text-blue-600"}},thapthan:{"Thi\xean \u1ea4n":{amDuong:"+"},"Ch\xednh \u1ea4n":{amDuong:"-"},"T\u1ef7 Ki\xean":{amDuong:"+"},"Ki\u1ebfp T\xe0i":{amDuong:"-"},"Th\u1ef1c Th\u1ea7n":{amDuong:"+"},"Th\u01b0\u01a1ng Quan":{amDuong:"-"},"Thi\xean T\xe0i":{amDuong:"+"},"Ch\xednh T\xe0i":{amDuong:"-"},"Th\u1ea5t S\xe1t":{amDuong:"+"},"Ch\xednh Quan":{amDuong:"-"}}},UN={"T\xfd":["D\u1ea7n","M\xe3o","Th\xecn"],"S\u1eedu":["H\u1ee3i","T\xfd","S\u1eedu"],"D\u1ea7n":["Th\xe2n","D\u1eadu","Tu\u1ea5t"],"M\xe3o":["T\u1ef5","Ng\u1ecd","M\xf9i"],"Th\xecn":["D\u1ea7n","M\xe3o","Th\xecn"],"T\u1ef5":["H\u1ee3i","T\xfd","S\u1eedu"],"Ng\u1ecd":["Th\xe2n","D\u1eadu","Tu\u1ea5t"],"M\xf9i":["T\u1ef5","Ng\u1ecd","M\xf9i"],"Th\xe2n":["D\u1ea7n","M\xe3o","Th\xecn"],"D\u1eadu":["H\u1ee3i","T\xfd","S\u1eedu"],"Tu\u1ea5t":["Th\xe2n","D\u1eadu","Tu\u1ea5t"],"H\u1ee3i":["T\u1ef5","Ng\u1ecd","M\xf9i"]},RN=e=>{let{dayDetails:n,nguHanhAmDuong:r,SINH:s,KHAC:i,analyzeNguHanhTuongSinh:a,analyzeNguHanhTuongKhac:o,includeHourPillar:l=!0}=e;const[c,u]=(0,t.useState)(!1);if(!n)return null;if(!l&&!n.canChi)return null;if(l&&!n.currentCanChiHour)return null;const[d,h]=n.canChi[1].split(" "),m=(Iw.indexOf(d)+1)%10,A=(Dw.indexOf(h)+3)%12,g=Iw[m],p=Dw[A],f=e=>{switch(e){case"M\u1ed9c":return"text-green-600";case"H\u1ecfa":return"text-red-600";case"Th\u1ed5":return"text-yellow-600";case"Kim":return"text-gray-600";case"Th\u1ee7y":return"text-blue-600";default:return"text-gray-500"}},x=e=>{switch(e){case"sinh":case"duocSinh":case"hop":case"tamHop":case"banTamHop":return"border-green-600 text-green-600";case"khac":case"biKhac":return"border-red-600 text-red-600";case"tamHoi":return"border-purple-600 text-purple-600";case"xung":case"haiChi":case"hinh":return"border-orange-600 text-orange-600";default:return"border-gray-600"}},v=e=>{switch(e){case"sinh":case"duocSinh":return"text-green-600";case"khac":case"biKhac":return"text-red-600";case"hop":case"tamHop":case"banTamHop":case"tamHoi":return"text-purple-600";case"xung":case"haiChi":case"hinh":return"text-orange-600";default:return"text-gray-600"}},y=e=>{switch(e){case"sinh":case"duocSinh":case"khac":case"biKhac":case"hop":case"xung":case"haiChi":case"hinh":default:return"";case"tamHop":return"\u25b3";case"banTamHop":return"\u25bd";case"tamHoi":return"\u25ef"}},b=(e,t,n)=>(0,At.jsx)("div",{className:Zw.WRAPPER+" flex bg-gray-800/50 rounded-lg p-4 text-gray-200",children:e.map(((e,r)=>(0,At.jsxs)("div",{className:`${Zw.ITEM_2} ${v(t)} flex flex-col justify-start -ml-4 mr-8`,children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"w-4 text-center hidden",children:y(t)}),(0,At.jsx)("span",{className:"text-gray-500 mr-1",children:e.name}),(0,At.jsx)("span",{className:f(e.chiNguHanh||e.nguHanh),children:e.otherCan})]}),("hinh"===t||"haiChi"===t)&&e.chiNguHanh&&(0,At.jsxs)("span",{className:`ml-1 hidden ${f(e.chiNguHanh)}`,children:["(",e.nguHanh,")"]}),"hop"===t&&e.hopHoaKhi&&(0,At.jsx)("span",{className:"ml-1 text-gray-500 mt-1",children:(0,At.jsxs)("span",{className:f(e.hopHoaKhi),children:["H\u1ee3p ho\xe1 ",e.hopHoaKhi]})})]},`${n}-${t}-${r}`)))}),w=(e,t)=>{const[n]=e.data.split(" "),s=r.can[n].nguHanh,i=j(e,n,s,t);return S(i)?(0,At.jsxs)("div",{className:Jw.WRAPPER,children:[(0,At.jsxs)("div",{className:Jw.TITLE+" flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-gray-200 font-bold",children:[e.name," "]}),(0,At.jsx)("span",{className:`font-medium text-sm ${f(s)}`,children:s})]}),(0,At.jsx)("div",{className:`text-xs mb-2 text-right ${f(s)}`}),(0,At.jsx)("div",{className:Jw.CONTENT,children:_(i,`can-${t}`)})]},`can-${t}`):null},N=(e,t)=>{const[,n]=e.data.split(" "),s=r.chi[n].nguHanh,i=C(e,n,s,t);return S(i)?(0,At.jsxs)("div",{className:Jw.WRAPPER,children:[(0,At.jsxs)("div",{className:Jw.TITLE+" flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-gray-200",children:[e.name," "]}),(0,At.jsx)("span",{className:`font-medium text-sm ${f(s)}`,children:s})]}),(0,At.jsx)("div",{className:`text-xs mb-2 text-right ${f(s)}`}),(0,At.jsx)("div",{className:Jw.CONTENT,children:_(i,`chi-${t}`)})]},`chi-${t}`):null},j=(e,t,a,o)=>{var c,u;const d=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],h={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(c=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(u=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===u?void 0:u[0]},hop:{list:[],nguHanh:null},xung:{list:[],nguHanh:NN[t]}},m=l?2:1,[A]=n.canChi[m-(l?1:0)].split(" ");return d.forEach(((t,n)=>{if(o===n)return;const[l]=t.data.split(" "),c=r.can[l].nguHanh;if(s[a]===c&&h.sinhRa.list.push({name:t.name,nguHanh:r.can[l].nguHanh}),s[c]===a&&h.duocSinh.list.push({name:t.name,nguHanh:r.can[l].nguHanh}),i[a]===c&&h.khac.list.push({name:t.name,nguHanh:r.can[l].nguHanh}),i[c]===a&&h.biKhac.list.push({name:t.name,nguHanh:r.can[l].nguHanh}),"Th\xe1ng"===e.name){if(bN[A]===l){const e=wN[A]&&wN[A][l];h.hop.list.push({name:t.name,nguHanh:r.can[l].nguHanh,hopHoaKhi:e,otherCan:l}),e&&(h.hop.nguHanh=l)}(e=>{const[,t]=e.split(" ");return kN[t]||[]})(t.data).forEach((e=>{if(bN[A]===e.can){const n=wN[A]&&wN[A][e.can];h.hop.list.push({name:`${t.name} (TC)`,nguHanh:r.can[e.can].nguHanh,hopHoaKhi:n,otherCan:e.can}),n&&(h.hop.nguHanh=e.can)}}))}})),h},C=(e,t,a,o)=>{var c,u;const d=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],h={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(c=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(u=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===u?void 0:u[0]},hop:{list:[],nguHanh:jN[t]},xung:{list:[],nguHanh:CN[t]},tamHop:{list:[],nguHanh:null},banTamHop:{list:[],nguHanh:null},tamHoi:{list:[],nguHanh:null},haiChi:{list:[],nguHanh:null},hinh:{list:[],nguHanh:null}};return d.forEach(((e,n)=>{if(o===n)return;const[,l]=e.data.split(" "),c=r.chi[l].nguHanh;s[a]===c&&h.sinhRa.list.push({name:e.name,nguHanh:r.chi[l].nguHanh}),s[c]===a&&h.duocSinh.list.push({name:e.name,nguHanh:r.chi[l].nguHanh}),i[a]===c&&h.khac.list.push({name:e.name,nguHanh:r.chi[l].nguHanh}),i[c]===a&&h.biKhac.list.push({name:e.name,nguHanh:r.chi[l].nguHanh}),jN[t]===l&&(h.hop.list.push({name:e.name,nguHanh:l,chiNguHanh:r.chi[l].nguHanh}),h.hop.nguHanh=l),CN[t]===l&&(h.xung.list.push({name:e.name,nguHanh:l,chiNguHanh:r.chi[l].nguHanh}),h.xung.nguHanh=l),SN[t]===l&&(h.haiChi.list.push({name:e.name,nguHanh:l,chiNguHanh:r.chi[l].nguHanh}),h.haiChi.nguHanh=l),TN[t]&&TN[t].includes(l)&&(h.hinh.list.push({name:e.name,nguHanh:l,chiNguHanh:r.chi[l].nguHanh}),h.hinh.nguHanh=l)})),T(h,t,d,o),h},T=(e,t,n,s)=>{const i=n.map((e=>e.data.split(" ")[1]));EN.forEach((s=>{const[a,o,l,c]=s;if(i.includes(a)&&i.includes(o)&&i.includes(l)){e.tamHop.nguHanh=a;const s=[a,o,l].filter((e=>e!==t));s.forEach((t=>{const s=n.find((e=>e.data.split(" ")[1]===t));s&&e.tamHop.list.push({name:s.name,nguHanh:t,chiNguHanh:r.chi[t].nguHanh})}))}})),0===e.tamHop.list.length&&BN.forEach((s=>{const[a,o,l]=s;if(i.includes(a)&&i.includes(o)){e.banTamHop.nguHanh=a;const s=[a,o].find((e=>e!==t));if(s){const t=n.find((e=>e.data.split(" ")[1]===s));t&&e.banTamHop.list.push({name:t.name,nguHanh:s,chiNguHanh:r.chi[s].nguHanh})}}})),MN.forEach((s=>{const[a,o,l,c]=s;if(i.includes(a)&&i.includes(o)&&i.includes(l)){e.tamHoi.nguHanh=a;const s=[a,o,l].filter((e=>e!==t));s.forEach((t=>{const s=n.find((e=>e.data.split(" ")[1]===t));s&&e.tamHoi.list.push({name:s.name,nguHanh:t,chiNguHanh:r.chi[t].nguHanh})}))}}))},S=e=>Object.values(e).some((e=>e.list.length>0)),_=(e,t)=>Object.entries(e).map((e=>{let[n,{list:r,nguHanh:s}]=e;if(0===r.length)return null;return((e,t,n,r,s)=>{const i=n[0],a="hinh"!==r&&"haiChi"!==r&&"hop"!==r&&"xung"!==r&&"tamHop"!==r&&"banTamHop"!==r&&"tamHoi"!==r||null===i||void 0===i||!i.chiNguHanh?"hop"!==r&&"xung"!==r||null===i||void 0===i||!i.otherCan?t?(0,At.jsx)("span",{className:`text-xs font-medium ${f(t)}`,children:t}):null:(0,At.jsxs)("span",{className:`text-xs font-medium ${f(i.nguHanh)}`,children:["(",i.otherCan,")"]}):(0,At.jsxs)("span",{className:`text-xs font-medium ${f(i.chiNguHanh)}`,children:["(",t,")"]});return(0,At.jsxs)("div",{className:"mb-1 pb-1",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,At.jsx)("span",{className:`border px-2 py-1 rounded-md text-xs ${x(r)} text-gray-200`,children:e}),a]}),(0,At.jsx)("div",{className:"mt-1",children:b(n,r,s)})]},`${s}-${r}`)})({sinhRa:"Sinh ra",duocSinh:"\u0110\u01b0\u1ee3c sinh b\u1edfi",khac:"Kh\u1eafc",biKhac:"B\u1ecb kh\u1eafc b\u1edfi",hop:"H\u1ee3p",xung:"Xung",tamHop:"Tam h\u1ee3p",banTamHop:"B\xe1n Tam H\u1ee3p",tamHoi:"Tam h\u1ed9i",haiChi:"H\u1ea1i",hinh:"H\xecnh"}[n],s,r,n,t)})).filter(Boolean),E={1:"T\xfd",2:"H\u1ee3i",3:"Tu\u1ea5t",4:"D\u1eadu",5:"Th\xe2n",6:"M\xf9i",7:"Ng\u1ecd",8:"T\u1ef5",9:"Th\xecn",10:"M\xe3o",11:"D\u1ea7n",12:"S\u1eedu"}[parseInt(n.solarDate.split("/")[1])],[,B]=n.currentCanChiHour.split(" "),M=((e,t)=>{const n=Dw;n.indexOf(e),n.indexOf(t),n.indexOf("M\xe3o");let r={thang:e,gio:t};for(;"M\xe3o"!==r.gio;){const e=(n.indexOf(r.thang)+1)%12,t=(n.indexOf(r.gio)+1)%12;r={thang:n[e],gio:n[t]}}return r.thang})(E,B),k=(e=>{const[t]=n.canChi[2].split(" ");let s=(2*(Iw.indexOf(t)+1)+1)%10-1;const i=r.chi[e].amDuong;let a=Iw[s],o=r.can[a].amDuong;if(o!==i)for(let n=0;n<10&&(s=(s+1)%10,a=Iw[s],o=r.can[a].amDuong,o!==i);n++);return a})(M);return(0,At.jsxs)("div",{className:" bg-gray-800 rounded-lg p-4",children:[(0,At.jsx)("button",{onClick:()=>u(!c),className:"mt-2 px-4 py-2 text-gray-200 hover:text-gray-50 underline font-bold",children:c?"\u1ea8n - Sinh - Kh\u1eafc - Xung - H\u1ee3p":"Xem - Sinh - Kh\u1eafc - Xung - H\u1ee3p"}),c&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:eN.GRID+" mt-4 bg-gray-800/50 rounded-lg p-4",children:(()=>{const e=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}];return[...e.map(((e,t)=>w(e,t))),...e.map(((e,t)=>N(e,t)))].filter(Boolean)})()}),(0,At.jsx)("div",{className:"mt-8",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Thai Nguy\xean"}),(0,At.jsx)("div",{className:eN.GRID2,children:(()=>{const e={name:"Thai Nguy\xean",data:`${g} ${p}`};((e,t,a)=>{var o,c;const u=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],d={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(o=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===o?void 0:o[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(c=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},hop:{list:[],nguHanh:bN[t]},xung:{list:[],nguHanh:NN[t]}};u.forEach((e=>{const[n]=e.data.split(" "),o=r.can[n].nguHanh;if(s[a]===o&&d.sinhRa.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),s[o]===a&&d.duocSinh.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),i[a]===o&&d.khac.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),i[o]===a&&d.biKhac.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),bN[t]===n){const s=wN[t]&&wN[t][n];d.hop.list.push({name:e.name,nguHanh:r.can[n].nguHanh,hopHoaKhi:s,otherCan:n}),s&&(d.hop.nguHanh=n)}NN[t]===n&&(d.xung.list.push({name:e.name,nguHanh:r.can[n].nguHanh,otherCan:n}),d.xung.nguHanh=n)}))})(0,g,r.can[g].nguHanh),((e,t,a)=>{var o,c;const u=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],d={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(o=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===o?void 0:o[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(c=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},hop:{list:[],nguHanh:jN[t]},xung:{list:[],nguHanh:CN[t]},tamHop:{list:[],nguHanh:null},banTamHop:{list:[],nguHanh:null},tamHoi:{list:[],nguHanh:null},haiChi:{list:[],nguHanh:null},hinh:{list:[],nguHanh:null}};u.forEach((e=>{const[,n]=e.data.split(" "),o=r.chi[n].nguHanh;s[a]===o&&d.sinhRa.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),s[o]===a&&d.duocSinh.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),i[a]===o&&d.khac.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),i[o]===a&&d.biKhac.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),jN[t]===n&&(d.hop.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.hop.nguHanh=n),CN[t]===n&&(d.xung.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.xung.nguHanh=n),SN[t]===n&&(d.haiChi.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.haiChi.nguHanh=n),TN[t]&&TN[t].includes(n)&&(d.hinh.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.hinh.nguHanh=n)})),T(d,t,u,-1)})(0,p,r.chi[p].nguHanh);return[w(e,-1),N(e,-1)].filter(Boolean)})()})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-bold text-gray-200 mb-4",children:"Cung M\u1ec7nh"}),(0,At.jsx)("div",{className:eN.GRID2,children:(()=>{const e={name:"Cung M\u1ec7nh",data:`${k} ${M}`};((e,t,a)=>{var o,c;const u=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],d={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(o=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===o?void 0:o[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(c=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},hop:{list:[],nguHanh:bN[t]},xung:{list:[],nguHanh:NN[t]}};u.forEach((e=>{const[n]=e.data.split(" "),o=r.can[n].nguHanh;if(s[a]===o&&d.sinhRa.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),s[o]===a&&d.duocSinh.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),i[a]===o&&d.khac.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),i[o]===a&&d.biKhac.list.push({name:e.name,nguHanh:r.can[n].nguHanh}),bN[t]===n){const s=wN[t]&&wN[t][n];d.hop.list.push({name:e.name,nguHanh:r.can[n].nguHanh,hopHoaKhi:s,otherCan:n}),s&&(d.hop.nguHanh=n)}NN[t]===n&&(d.xung.list.push({name:e.name,nguHanh:r.can[n].nguHanh,otherCan:n}),d.xung.nguHanh=n)}))})(0,k,r.can[k].nguHanh),((e,t,a)=>{var o,c;const u=l?[{name:"Gi\u1edd",data:n.currentCanChiHour},{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}]:[{name:"Ng\xe0y",data:n.canChi[0]},{name:"Th\xe1ng",data:n.canChi[1]},{name:"N\u0103m",data:n.canChi[2]}],d={sinhRa:{list:[],nguHanh:s[a]},duocSinh:{list:[],nguHanh:null===(o=Object.entries(s).find((e=>{let[t,n]=e;return n===a})))||void 0===o?void 0:o[0]},khac:{list:[],nguHanh:i[a]},biKhac:{list:[],nguHanh:null===(c=Object.entries(i).find((e=>{let[t,n]=e;return n===a})))||void 0===c?void 0:c[0]},hop:{list:[],nguHanh:jN[t]},xung:{list:[],nguHanh:CN[t]},tamHop:{list:[],nguHanh:null},banTamHop:{list:[],nguHanh:null},tamHoi:{list:[],nguHanh:null},haiChi:{list:[],nguHanh:null},hinh:{list:[],nguHanh:null}};u.forEach((e=>{const[,n]=e.data.split(" "),o=r.chi[n].nguHanh;s[a]===o&&d.sinhRa.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),s[o]===a&&d.duocSinh.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),i[a]===o&&d.khac.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),i[o]===a&&d.biKhac.list.push({name:e.name,nguHanh:r.chi[n].nguHanh}),jN[t]===n&&(d.hop.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.hop.nguHanh=n),CN[t]===n&&(d.xung.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.xung.nguHanh=n),SN[t]===n&&(d.haiChi.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.haiChi.nguHanh=n),TN[t]&&TN[t].includes(n)&&(d.hinh.list.push({name:e.name,nguHanh:n,chiNguHanh:r.chi[n].nguHanh}),d.hinh.nguHanh=n)})),T(d,t,u,-1)})(0,M,r.chi[M].nguHanh);return[w(e,-1),N(e,-1)].filter(Boolean)})()})]})]})})]})]})},ON=e=>{let{truongSinhResults:n,countTruongSinhStates:r,nguHanhColors:s}=e;const[i,a]=(0,t.useState)(!1);(0,t.useEffect)((()=>{a(!1)}),[n]);const{chis:o,cans:l,canCounts:c,results:u,chiTotals:d,stateTotals:h,totalScore:m}=(0,t.useMemo)((()=>{if(!n||!Array.isArray(n)||0===n.length)return{chis:[],cans:[],canCounts:{},results:[],chiTotals:[],stateTotals:{},totalScore:0};const e=n.map((e=>e.chi)),t=[...new Set(n.map((e=>e.can)))],r=t.reduce(((e,t)=>(e[t]=n.filter((e=>e.can===t)).length,e)),{}),s={"Gi\xe1p":{"H\u1ee3i":{name:"Tr\u01b0\u1eddng Sinh",score:4},"T\xfd":{name:"M\u1ed9c D\u1ee5c",score:2},"S\u1eedu":{name:"Quan \u0110\u1edbi",score:2},"D\u1ea7n":{name:"L\xe2m Quan",score:3},"M\xe3o":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"T\u1ef5":{name:"B\u1ec7nh",score:-2},"Ng\u1ecd":{name:"T\u1eed",score:-3},"M\xf9i":{name:"M\u1ed9",score:-5},"Th\xe2n":{name:"Tuy\u1ec7t",score:-4},"D\u1eadu":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},"\u1ea4t":{"Ng\u1ecd":{name:"Tr\u01b0\u1eddng Sinh",score:4},"T\u1ef5":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"M\xe3o":{name:"L\xe2m Quan",score:3},"D\u1ea7n":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"S\u1eedu":{name:"Suy",score:-1},"T\xfd":{name:"B\u1ec7nh",score:-2},"H\u1ee3i":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"D\u1eadu":{name:"Tuy\u1ec7t",score:-4},"Th\xe2n":{name:"Thai",score:1},"M\xf9i":{name:"D\u01b0\u1ee1ng",score:1}},"B\xednh":{"D\u1ea7n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"M\xe3o":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"T\u1ef5":{name:"L\xe2m Quan",score:3},"Ng\u1ecd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Th\xe2n":{name:"B\u1ec7nh",score:-2},"D\u1eadu":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"H\u1ee3i":{name:"Tuy\u1ec7t",score:-4},"T\xfd":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"\u0110inh":{"D\u1eadu":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Th\xe2n":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Ng\u1ecd":{name:"L\xe2m Quan",score:3},"T\u1ef5":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"M\xe3o":{name:"B\u1ec7nh",score:-2},"D\u1ea7n":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"T\xfd":{name:"Tuy\u1ec7t",score:-4},"H\u1ee3i":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},"M\u1eadu":{"D\u1ea7n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"M\xe3o":{name:"M\u1ed9c D\u1ee5c",score:2},"Th\xecn":{name:"Quan \u0110\u1edbi",score:2},"T\u1ef5":{name:"L\xe2m Quan",score:3},"Ng\u1ecd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Th\xe2n":{name:"B\u1ec7nh",score:-2},"D\u1eadu":{name:"T\u1eed",score:-3},"Tu\u1ea5t":{name:"M\u1ed9",score:-5},"H\u1ee3i":{name:"Tuy\u1ec7t",score:-4},"T\xfd":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"K\u1ef7":{"D\u1eadu":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Th\xe2n":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Ng\u1ecd":{name:"L\xe2m Quan",score:3},"T\u1ef5":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Th\xecn":{name:"Suy",score:-1},"M\xe3o":{name:"B\u1ec7nh",score:-2},"D\u1ea7n":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"T\xfd":{name:"Tuy\u1ec7t",score:-4},"H\u1ee3i":{name:"Thai",score:1},"Tu\u1ea5t":{name:"D\u01b0\u1ee1ng",score:1}},Canh:{"T\u1ef5":{name:"Tr\u01b0\u1eddng Sinh",score:4},"Ng\u1ecd":{name:"M\u1ed9c D\u1ee5c",score:2},"M\xf9i":{name:"Quan \u0110\u1edbi",score:2},"Th\xe2n":{name:"L\xe2m Quan",score:3},"D\u1eadu":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Tu\u1ea5t":{name:"Suy",score:-1},"H\u1ee3i":{name:"B\u1ec7nh",score:-2},"T\xfd":{name:"T\u1eed",score:-3},"S\u1eedu":{name:"M\u1ed9",score:-5},"D\u1ea7n":{name:"Tuy\u1ec7t",score:-4},"M\xe3o":{name:"Thai",score:1},"Th\xecn":{name:"D\u01b0\u1ee1ng",score:1}},"T\xe2n":{"T\xfd":{name:"Tr\u01b0\u1eddng Sinh",score:4},"H\u1ee3i":{name:"M\u1ed9c D\u1ee5c",score:2},"Tu\u1ea5t":{name:"Quan \u0110\u1edbi",score:2},"D\u1eadu":{name:"L\xe2m Quan",score:3},"Th\xe2n":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"M\xf9i":{name:"Suy",score:-1},"Ng\u1ecd":{name:"B\u1ec7nh",score:-2},"T\u1ef5":{name:"T\u1eed",score:-3},"Th\xecn":{name:"M\u1ed9",score:-5},"M\xe3o":{name:"Tuy\u1ec7t",score:-4},"D\u1ea7n":{name:"Thai",score:1},"S\u1eedu":{name:"D\u01b0\u1ee1ng",score:1}},"Nh\xe2m":{"Th\xe2n":{name:"Tr\u01b0\u1eddng Sinh",score:4},"D\u1eadu":{name:"M\u1ed9c D\u1ee5c",score:2},"Tu\u1ea5t":{name:"Quan \u0110\u1edbi",score:2},"H\u1ee3i":{name:"L\xe2m Quan",score:3},"T\xfd":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"S\u1eedu":{name:"Suy",score:-1},"D\u1ea7n":{name:"B\u1ec7nh",score:-2},"M\xe3o":{name:"T\u1eed",score:-3},"Th\xecn":{name:"M\u1ed9",score:-5},"T\u1ef5":{name:"Tuy\u1ec7t",score:-4},"Ng\u1ecd":{name:"Thai",score:1},"M\xf9i":{name:"D\u01b0\u1ee1ng",score:1}},"Qu\xfd":{"M\xe3o":{name:"Tr\u01b0\u1eddng Sinh",score:4},"D\u1ea7n":{name:"M\u1ed9c D\u1ee5c",score:2},"S\u1eedu":{name:"Quan \u0110\u1edbi",score:2},"T\xfd":{name:"L\xe2m Quan",score:3},"H\u1ee3i":{name:"\u0110\u1ebf V\u01b0\u1ee3ng",score:5},"Tu\u1ea5t":{name:"Suy",score:-1},"D\u1eadu":{name:"B\u1ec7nh",score:-2},"Th\xe2n":{name:"T\u1eed",score:-3},"M\xf9i":{name:"M\u1ed9",score:-5},"Ng\u1ecd":{name:"Tuy\u1ec7t",score:-4},"T\u1ef5":{name:"Thai",score:1},"Th\xecn":{name:"D\u01b0\u1ee1ng",score:1}}},i=e.map(((e,n)=>t.map((t=>{var i;const a=null===(i=s[t])||void 0===i?void 0:i[e];return{chi:e,can:t,name:(null===a||void 0===a?void 0:a.name)||"Kh\xf4ng c\xf3",score:(null===a||void 0===a?void 0:a.score)||0,count:r[t],pillar:["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"][n]}})))),a=i.map(((t,n)=>{const r=t.reduce(((e,t)=>e+t.score*t.count),0);return{chi:e[n],total:r,pillar:["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"][n]}})),o=i.reduce(((e,t)=>(t.forEach((t=>{e[t.name]||(e[t.name]={count:0,totalScore:0}),e[t.name].count+=t.count,e[t.name].totalScore+=t.score*t.count})),e)),{}),l=Object.values(o).reduce(((e,t)=>{let{totalScore:n}=t;return e+n}),0);return{chis:e,cans:t,canCounts:r,results:i,chiTotals:a,stateTotals:o,totalScore:l}}),[n]);return n&&Array.isArray(n)&&0!==n.length?"function"!==typeof r?null:s&&"object"===typeof s?(0,At.jsxs)("div",{className:"p-3 md:p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsxs)("div",{className:"flex justify-center items-center mb-4 border-b border-gray-600 p-2 bg-gray-900 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-base md:text-lg font-bold text-gray-200 text-center mb-0 px-3",children:"T\u1ed5ng \u0111i\u1ec3m V\xf2ng Tr\u01b0\u1eddng Sinh"}),(0,At.jsx)("div",{className:"font-bold text-indigo-400",children:m})]}),(0,At.jsx)("button",{onClick:()=>a(!i),className:"mt-0 px-4 py-2 text-gray-400 hover:text-gray-200 underline",children:i?"\u1ea8n chi ti\u1ebft":"Xem chi ti\u1ebft"}),i&&(0,At.jsx)("div",{className:"space-y-4",children:u.map(((e,t)=>(0,At.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,At.jsxs)("h5",{className:"font-bold border-b border-gray-600 pb-2 mb-2 text-gray-200",children:[d[t].pillar," - Chi ",(0,At.jsx)("span",{className:s[o[t]]||"",children:o[t]}),(0,At.jsxs)("span",{className:"ml-2 text-sm",children:["(T\u1ed5ng \u0111i\u1ec3m: ",(0,At.jsxs)("span",{className:d[t].total>0?"text-green-600":"text-red-600",children:[d[t].total>0?"+":"",d[t].total]}),")"]})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.map(((e,n)=>(0,At.jsxs)("div",{className:"border border-gray-600 rounded p-2 text-sm bg-gray-700",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsxs)("span",{className:"text-gray-200",children:[(0,At.jsx)("span",{className:s[e.can]||"",children:e.can}),e.can===l[n]&&e.chi===o[t]&&(0,At.jsxs)("span",{className:"ml-1 text-xs text-gray-400",children:["(",e.score," \u0111i\u1ec3m x ",e.count,")"]})]}),(0,At.jsx)("span",{className:"font-semibold text-gray-200",children:e.name})]}),(0,At.jsx)("div",{className:"text-right",children:(0,At.jsxs)("span",{className:e.score>0?"text-green-600":"text-red-600",children:[e.score>0?"+":"",e.score*e.count," \u0111i\u1ec3m"]})})]},`${o[t]}_${l[n]}`)))})]},`${o[t]}_${t}`)))})]}):null:null};function HN(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D")}const QN=[{name:"L\u1eadp Xu\xe2n",longitude:315},{name:"V\u0169 Th\u1ee7y",longitude:330},{name:"Kinh Tr\u1eadp",longitude:345},{name:"Xu\xe2n Ph\xe2n",longitude:0},{name:"Thanh Minh",longitude:15},{name:"C\u1ed1c V\u0169",longitude:30},{name:"L\u1eadp H\u1ea1",longitude:45},{name:"Ti\u1ec3u M\xe3n",longitude:60},{name:"Mang Ch\u1ee7ng",longitude:75},{name:"H\u1ea1 Ch\xed",longitude:90},{name:"Ti\u1ec3u Th\u1eed",longitude:105},{name:"\u0110\u1ea1i Th\u1eed",longitude:120},{name:"L\u1eadp Thu",longitude:135},{name:"X\u1eed Th\u1eed",longitude:150},{name:"B\u1ea1ch L\u1ed9",longitude:165},{name:"Thu Ph\xe2n",longitude:180},{name:"H\xe0n L\u1ed9",longitude:195},{name:"S\u01b0\u01a1ng Gi\xe1ng",longitude:210},{name:"L\u1eadp \u0110\xf4ng",longitude:225},{name:"Ti\u1ec3u Tuy\u1ebft",longitude:240},{name:"\u0110\u1ea1i Tuy\u1ebft",longitude:255},{name:"\u0110\xf4ng Ch\xed",longitude:270},{name:"Ti\u1ec3u H\xe0n",longitude:285},{name:"\u0110\u1ea1i H\xe0n",longitude:300}],zN=["D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i","T\xfd","S\u1eedu"];function VN(e,t){const n=Yy(1,1,t),r=Yy(31,12,t);for(let s=n;s<=r;s++)for(let t=0;t<1;t+=.01){const n=s+t,r=(180*lb(n)/Math.PI+360)%360-e;if(Math.abs(r)<.2){let t=n-.01,r=n;for(let n=0;n<10;n++){const n=(t+r)/2;(180*lb(n)/Math.PI+360)%360<e?t=n:r=n}const s=(t+r)/2;let[i,a,o]=Jy(s);i+=1;const l=s-Math.floor(s),c=Math.floor(24*l);return{day:i,month:a,year:o,hour:c,minute:Math.floor(60*(24*l-c))}}}return null}function KN(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z",clipRule:"evenodd"}))}const GN=t.forwardRef(KN);function qN(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const WN=t.forwardRef(qN),$N=e=>{let{dayDetails:n,nguHanhAmDuong:r,onDaiVanData:s,birthHour:i}=e;const[a,o]=(0,t.useState)("nam"),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)([]),[h,m]=(0,t.useState)(null),[A,g]=(0,t.useState)(null),[p,f]=(0,t.useState)(null),[x,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(i||null),w=e=>QN.map(((t,n)=>{const r="Ti\u1ec3u H\xe0n"===t.name||"\u0110\u1ea1i H\xe0n"===t.name,s=VN(t.longitude,r?e+1:e);return s?{...t,idx:n,date:new Date(s.year,s.month-1,s.day,s.hour,s.minute),day:s.day,month:s.month,year:s.year,hour:s.hour,minute:s.minute}:null})).filter(Boolean),N=e=>{const t=e.getFullYear(),n=w(t);n.sort(((e,t)=>e.date-t.date));for(let s=n.length-1;s>=0;s--)if(n[s].date<e)return n[s];const r=w(t-1);return r[r.length-1]},j=(e,t)=>{const n=e+t;return{can:["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"][(n+6)%10],chi:["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"][(n+8)%12]}},C=e=>{const t=[];for(let n=0;n<10;n++){const s=n,i=j(e.startYear,s),a=T(i.chi),o=a.map((e=>S(e.can,r)));t.push({year:e.startYear+n,can:i.can,chi:i.chi,tanCans:a,thapThans:o})}return t},T=e=>{const t={"T\xfd":[{can:"Qu\xfd",diem:100}],"Ng\u1ecd":[{can:"\u0110inh",diem:70},{can:"K\u1ef7",diem:30}],"M\xe3o":[{can:"\u1ea4t",diem:100}],"D\u1eadu":[{can:"T\xe2n",diem:100}],"D\u1ea7n":[{can:"Gi\xe1p",diem:60},{can:"B\xednh",diem:30},{can:"M\u1eadu",diem:10}],"Th\xe2n":[{can:"Canh",diem:60},{can:"Nh\xe2m",diem:30},{can:"M\u1eadu",diem:10}],"T\u1ef5":[{can:"B\xednh",diem:60},{can:"Canh",diem:60},{can:"M\u1eadu",diem:10}],"H\u1ee3i":[{can:"Nh\xe2m",diem:70},{can:"Gi\xe1p",diem:30}],"Th\xecn":[{can:"M\u1eadu",diem:60},{can:"Qu\xfd",diem:30},{can:"\u1ea4t",diem:10}],"Tu\u1ea5t":[{can:"M\u1eadu",diem:60},{can:"\u0110inh",diem:30},{can:"T\xe2n",diem:10}],"S\u1eedu":[{can:"K\u1ef7",diem:60},{can:"T\xe2n",diem:30},{can:"Qu\xfd",diem:10}],"M\xf9i":[{can:"K\u1ef7",diem:60},{can:"\u1ea4t",diem:30},{can:"\u0110inh",diem:10}]}[e];return t?t.sort(((e,t)=>t.diem-e.diem)):[]},S=(e,t)=>{const r=t.can[n.canChi[0].split(" ")[0]].nguHanh,s=t.can[n.canChi[0].split(" ")[0]].amDuong,i=t.can[e].nguHanh,a=t.can[e].amDuong;let o="";const l=M(r,i);return"same"===l?o=a===s?"T.Ki\xean":"K.T\xe0i":"sinh"===l?o=a===s?"T.Th\u1ea7n":"T.Quan":"received"===l?o=a===s?"T.\u1ea4n":"C.\u1ea4n":"khac"===l?o=a===s?"T.T\xe0i":"C.T\xe0i":"biKhac"===l&&(o=a===s?"T.S\xe1t":"C.Quan"),o},_=()=>{if(!n)return;const[e,t,s]=n.solarDate.split("/").map(Number),i=new Date(s,t-1,e,y?y.hour:0,y?y.minute:0),a=(e=>{const t=e.getFullYear(),n=w(t);n.sort(((e,t)=>e.date-t.date));for(let s=n.length-1;s>=0;s--)if(n[s].date<=e)return n[s];const r=w(t-1);return r[r.length-1]})(i),o=(e=>{const t=e.getFullYear(),n=w(t);n.sort(((e,t)=>e.date-t.date));for(let r=0;r<n.length;r++)if(n[r].date>e)return n[r];return w(t+1)[0]})(i),l=N(i),u=N(l.date);if(a&&o&&l&&u){const e=B();let t;t="thu\u1eadn"===e?Math.ceil((o.date-i)/864e5)-1:Math.ceil((i-a.date)/864e5)-1,c(t),g(o),f(u),v(a);const l=Math.floor(t/3),h=t%3>1?l+1:l,m=[];for(let n=0;n<8;n++){const e=h+10*n;m.push({startAge:e,startYear:s+e})}const[A]=n.canChi[0].split(" "),p=r.can[A].nguHanh,x=r.can[A].amDuong,y=m.map(((t,s)=>{const i=n.canChi[1].split(" "),a=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"].indexOf(i[0]),o=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"].indexOf(i[1]);let l,c;"thu\u1eadn"===e?(l=(a+s+1)%10,c=(o+s+1)%12):(l=(a-s-1+10)%10,c=(o-s-1+12)%12);const u=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"][l],d=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"][c],h=r.can[u].nguHanh,m=r.can[u].amDuong;let A="";const g=M(p,h);return"same"===g?A=m===x?"T.Ki\xean":"K.T\xe0i":"sinh"===g?A=m===x?"T.Th\u1ea7n":"T.Quan":"received"===g?A=m===x?"T.\u1ea4n":"C.\u1ea4n":"khac"===g?A=m===x?"T.T\xe0i":"C.T\xe0i":"biKhac"===g&&(A=m===x?"T.S\xe1t":"C.Quan"),{...t,can:u,chi:d,thapThan:A}}));d(y)}};(0,t.useEffect)((()=>{n&&_()}),[n,a,y]),(0,t.useEffect)((()=>{s&&"function"===typeof s&&s(u)}),[u,s]),(0,t.useEffect)((()=>{}),[u]),(0,t.useEffect)((()=>{i&&b(i)}),[i]);const E=e=>{var t;return"-"===(null===r||void 0===r||null===(t=r.can[e])||void 0===t?void 0:t.amDuong)},B=()=>{if(!n)return"thu\u1eadn";const e=n.canChi[2].split(" ")[0],t=E(e);return"nu"===a&&t||"nam"===a&&!t?"thu\u1eadn":"ngh\u1ecbch"},M=(e,t)=>e===t?"same":k[e]===t?"sinh":k[t]===e?"received":L[e]===t?"khac":L[t]===e?"biKhac":null,k={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"},L={"M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim",Kim:"M\u1ed9c"},I=e=>{o(e)},D=e=>({"T\xfd":"text-blue-600","S\u1eedu":"text-yellow-600","D\u1ea7n":"text-green-600","M\xe3o":"text-green-600","Th\xecn":"text-yellow-600","T\u1ef5":"text-red-600","Ng\u1ecd":"text-red-600","M\xf9i":"text-yellow-600","Th\xe2n":"text-gray-200","D\u1eadu":"text-gray-200","Tu\u1ea5t":"text-yellow-600","H\u1ee3i":"text-blue-600"}[e]||"text-red-600"),P=e=>({"Gi\xe1p":"text-green-600","\u1ea4t":"text-green-600","B\xednh":"text-red-600","\u0110inh":"text-red-600","M\u1eadu":"text-yellow-600","K\u1ef7":"text-yellow-600",Canh:"text-gray-200","T\xe2n":"text-gray-200","Nh\xe2m":"text-blue-600","Qu\xfd":"text-blue-600"}[e]||"text-red-600");return(0,At.jsxs)("div",{id:"dai-van-section",className:"p-3 md:p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsx)("h4",{className:"text-base md:text-lg font-bold text-gray-200 mb-3 text-center pb-2",children:"\u0110\u1ea1i V\u1eadn"}),(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsxs)("div",{className:"flex justify-center space-x-4 mb-4",children:[(0,At.jsxs)("select",{value:a,onChange:e=>I(e.target.value),className:"px-4 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 hidden",children:[(0,At.jsx)("option",{value:"nam",children:"Nam"}),(0,At.jsx)("option",{value:"nu",children:"N\u1eef"})]}),(0,At.jsxs)("div",{className:"flex justify-center space-x-2 mt-2",children:[(0,At.jsx)("button",{onClick:()=>I("nam"),className:"px-4 py-2 rounded "+("nam"===a?"bg-blue-500 text-white":"bg-gray-700 text-gray-300"),children:"Nam"}),(0,At.jsx)("button",{onClick:()=>I("nu"),className:"px-4 py-2 rounded "+("nu"===a?"bg-pink-500 text-white":"bg-gray-700 text-gray-300"),children:"N\u1eef"})]})]}),n&&null!==l&&(0,At.jsxs)("div",{className:"text-center text-xs md:text-sm text-gray-100 flex flex-col md:flex-row justify-center gap-1 md:gap-8 border-b border-gray-600 p-3 bg-gray-900 rounded-lg",children:[(0,At.jsxs)("p",{className:"mb-2",children:[(0,At.jsx)("span",{className:"text-gray-400",children:n.solarDate})," - ",x.name,x&&(0,At.jsxs)(At.Fragment,{children:[" (",x.day.toString().padStart(2,"0"),"/",x.month.toString().padStart(2,"0")," ",x.hour.toString().padStart(2,"0"),":",x.minute.toString().padStart(2,"0"),")"]})]}),(0,At.jsxs)("p",{className:"mb-2",children:[(0,At.jsx)("span",{className:"text-gray-400",children:"N\u0103m:"})," ",n.canChi[2].split(" ")[0],(0,At.jsxs)("span",{className:"ml-1 "+(E(n.canChi[2].split(" ")[0])?"text-red-500":"text-blue-500"),children:["(",E(n.canChi[2].split(" ")[0])?"\xc2m":"D\u01b0\u01a1ng",")"]})]}),(0,At.jsxs)("p",{className:"mb-2",children:[(0,At.jsx)("span",{className:"text-gray-400",children:"\u0110\u1ebfm "}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" ",B()," "]}),(0,At.jsxs)("span",{className:"text-red-500",children:[" ","thu\u1eadn"===B()?A.name:x.name]}),"thu\u1eadn"===B()&&A&&(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",A.day.toString().padStart(2,"0"),"/",A.month.toString().padStart(2,"0")," ",A.hour.toString().padStart(2,"0"),":",A.minute.toString().padStart(2,"0"),")"]}),"thu\u1eadn"!==B()&&x&&(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",x.day.toString().padStart(2,"0"),"/",x.month.toString().padStart(2,"0")," ",x.hour.toString().padStart(2,"0"),":",x.minute.toString().padStart(2,"0"),")"]}),(0,At.jsxs)("span",{className:"text-blue-500",children:[" (",l," ng\xe0y)"]})]})]})]}),u.length>0&&(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-4",children:u.map(((e,t)=>(0,At.jsxs)("div",{id:`van-${t}`,className:"border-b border-gray-600 p-3 bg-gray-900 rounded-lg hover:shadow-md transition-shadow",children:[(0,At.jsxs)("p",{className:"font-semibold text-center mb-1 md:mb-2 text-sm md:text-md border-b border-gray-800 pb-2 flex items-center gap-2 justify-center cursor-pointer hover:text-indigo-400 text-gray-200",onClick:e=>((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),m(h===e?null:e),setTimeout((()=>{const t=document.getElementById(`van-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}),100)})(t,e),children:["V\u1eadn ",t+1," l\xfac ",(0,At.jsxs)("span",{className:"text-gray-400 text-lg",children:["- ",e.startAge," Tu\u1ed5i"]}),h===t?(0,At.jsx)(GN,{className:"w-4 h-4"}):(0,At.jsx)(WN,{className:"w-4 h-4"})]}),(0,At.jsxs)("p",{className:"text-center flex gap-1 md:gap-2 justify-center items-center text-xs md:text-sm",children:[(0,At.jsx)("span",{className:"px-1 text-gray-400 font-bold",children:e.startYear}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" ",e.thapThan," "]}),(0,At.jsxs)("span",{children:[(0,At.jsx)("span",{className:P(e.can),children:e.can})," ",(0,At.jsx)("span",{className:D(e.chi),children:e.chi})]}),(0,At.jsx)("span",{className:"text-gray-500 text-xs",children:" (Can Chi c\u1ee7a V\u1eadn) "})]}),(0,At.jsx)("div",{className:"flex gap-8 justify-center mt-2",children:T(e.chi).map(((e,t)=>(0,At.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-700 p-2 rounded-md",children:[(0,At.jsx)("span",{className:P(e.can),children:e.can}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" - ",S(e.can,r)]})]},t)))}),h===t&&(0,At.jsxs)("div",{className:"mt-2 md:mt-4 pt-2 md:pt-4 border-t border-gray-600",style:{display:"block",visibility:"visible",opacity:1},children:[(0,At.jsx)("h5",{className:"text-xs md:text-sm text-gray-400 text-center mb-1 md:mb-2 hidden",children:"Chi ti\u1ebft 10 n\u0103m:"}),(0,At.jsx)("div",{className:"space-y-1 md:space-y-2",children:C(e).map(((e,t)=>(0,At.jsxs)("div",{className:"flex justify-start items-center gap-4 text-xs border-b border-gray-600 pb-2 mb-2",children:[(0,At.jsx)("span",{className:"text-gray-300 font-bold",children:e.year}),(0,At.jsxs)("span",{className:"w-[80px]",children:[(0,At.jsx)("span",{className:P(e.can),children:e.can})," ",(0,At.jsx)("span",{className:D(e.chi),children:e.chi})]}),(0,At.jsx)("div",{className:"flex gap-4 items-center flex-1",children:e.tanCans.map(((t,n)=>(0,At.jsxs)("div",{className:"text-gray-400 flex-1 bg-gray-700 p-1 rounded-md",children:[(0,At.jsx)("p",{className:P(t.can),children:t.can}),(0,At.jsx)("p",{children:e.thapThans[n]})]},n)))})]},t)))})]})]},t)))})})]})},XN=JSON.parse('{"M\u1ed9c":{"chung":"M\u1ed9c \u0111\u1ea1i di\u1ec7n cho Nh\xe2n \u2013 mang trong m\xecnh s\u1ef1 th\u1eb3ng th\u1eafn, \xf4n h\xf2a v\xe0 l\xf2ng nh\xe2n \xe1i.","Vuong":[{"VocDang":"Khi M\u1ed9c v\u01b0\u1ee3ng, v\xf3c d\xe1ng cao r\xe1o, tay ch\xe2n d\xe0i, phong th\xe1i t\u1ef1 tin, n\u1ee5 c\u01b0\u1eddi t\u01b0\u01a1i, l\xe0n da tr\u1eafng xanh to\xe1t l\xean s\u1ee9c s\u1ed1ng."},{"TinhCach":"T\u1ea5m l\xf2ng r\u1ed9ng m\u1edf, y\xeau th\u01b0\u01a1ng m\u1ecdi ng\u01b0\u1eddi, s\u1ed1ng thanh cao, ch\xednh tr\u1ef1c v\xe0 ch\xe2n th\xe0nh."}],"Suy":[{"VocDang":"M\u1ed9c suy khi\u1ebfn v\xf3c ng\u01b0\u1eddi g\u1ea7y gu\u1ed9c, t\xf3c th\u01b0a, thi\u1ebfu s\u1ee9c s\u1ed1ng."},{"TinhCach":"T\xednh c\xe1ch tr\u1edf n\xean h\u1eb9p h\xf2i, d\u1ec5 \u0111\u1ed1 k\u1ecb, thi\u1ebfu l\xf2ng nh\xe2n \xe1i."}]},"H\u1ecfa":{"chung":"H\u1ecfa ch\u1ee7 v\u1ec1 L\u1ec5 \u2013 nhi\u1ec7t huy\u1ebft, s\xf4i n\u1ed5i nh\u01b0ng lu\xf4n gi\u1eef tr\u1ecdn s\u1ef1 l\u1ec5 ph\xe9p, t\xecnh c\u1ea3m.","Vuong":[{"VocDang":"H\u1ecfa v\u01b0\u1ee3ng t\u1ea1o n\xean d\xe1ng ng\u01b0\u1eddi \u0111\u1ea7u nh\u1ecf ch\xe2n d\xe0i, th\xe2n tr\xean thon g\u1ecdn, l\xf4ng m\xe0y r\u1eadm, tai nh\u1ecf, kh\xed ch\u1ea5t n\u1ed5i b\u1eadt."},{"TinhCach":"Tinh th\u1ea7n lu\xf4n s\xf4i \u0111\u1ed9ng, c\u01b0 x\u1eed l\u1ec5 \u0111\u1ed9, nhi\u1ec7t t\xecnh v\u1edbi m\u1ecdi ng\u01b0\u1eddi, \u0111\xf4i khi n\xf3ng n\u1ea3y nh\u01b0ng ch\xe2n th\xe0nh."}],"Suy":[{"VocDang":"H\u1ecfa suy khi\u1ebfn th\xe2n h\xecnh g\xf3c c\u1ea1nh, g\u1ea7y v\xe0ng, l\u1eddi n\xf3i thi\u1ebfu s\u1ee9c s\u1ed1ng, d\u1ec5 gian d\u1ed1i, l\xe0m vi\u1ec7c thi\u1ebfu ki\xean tr\xec."},{"TinhCach":"T\xednh c\xe1ch th\u1ea5t th\u01b0\u1eddng, d\u1ec5 cay nghi\u1ec7t, thi\u1ebfu s\u1ef1 g\u1eafn b\xf3 t\xecnh c\u1ea3m."}]},"Th\u1ed5":{"chung":"Th\u1ed5 ch\u1ee7 v\u1ec1 T\xedn \u2013 \u0111\xf4n h\u1eadu, trung th\u1ef1c, l\xe0 n\u1ec1n t\u1ea3ng v\u1eefng ch\u1eafc cho m\u1ecdi m\u1ed1i quan h\u1ec7.","Vuong":[{"VocDang":"Th\u1ed5 v\u01b0\u1ee3ng mang \u0111\u1ebfn d\xe1ng ng\u01b0\u1eddi eo tr\xf2n, m\u0169i n\u1edf, l\xf4ng m\xe0y thanh t\xfa, \xe1nh m\u1eaft s\xe1ng, gi\u1ecdng n\xf3i vang v\xe0 l\u01b0u lo\xe1t."},{"TinhCach":"Lu\xf4n gi\u1eef ch\u1eef t\xedn, trung hi\u1ebfu, bao dung, h\xe0nh \u0111\u1ed9ng ch\u1eafc ch\u1eafn, k\u1ebft qu\u1ea3 b\u1ec1n v\u1eefng."}],"Suy":[{"VocDang":"Th\u1ed5 suy khi\u1ebfn s\u1eafc m\u1eb7t u \xe1m, khu\xf4n m\u1eb7t m\u1ecfng, m\u0169i ng\u1eafn, thi\u1ebfu s\u1ee9c s\u1ed1ng."},{"TinhCach":"T\xe2m \u0111\u1ecba d\u1ec5 \u0111\u1ed5i thay, thi\u1ebfu l\xf2ng tin, l\u1ea1nh l\xf9ng v\u1edbi ng\u01b0\u1eddi kh\xe1c."}],"ManhQua":"Th\u1ed5 qu\xe1 m\u1ea1nh khi\u1ebfn \u0111\u1ea7u \xf3c c\u1ee9ng nh\u1eafc, ti\u1ebfp thu ch\u1eadm, s\u1ed1ng n\u1ed9i t\xe2m, th\xedch s\u1ef1 y\xean t\u0129nh."},"Kim":{"chung":"Kim ch\u1ee7 v\u1ec1 Ngh\u0129a \u2013 c\u01b0\u01a1ng tr\u1ef1c, m\u1ea1nh m\u1ebd, lu\xf4n gi\u1eef v\u1eefng nguy\xean t\u1eafc v\xe0 ngh\u0129a kh\xed.","Vuong":[{"VocDang":"Kim v\u01b0\u1ee3ng t\u1ea1o n\xean th\xe2n h\xecnh c\xe2n \u0111\u1ed1i, da tr\u1eafng, l\xf4ng m\xe0y cao, m\u1eaft s\xe2u, s\u1ee9c kh\u1ecfe d\u1ed3i d\xe0o."},{"TinhCach":"Tinh th\u1ea7n minh m\u1eabn, quy\u1ebft \u0111o\xe1n, tr\u1ecdng ngh\u0129a, t\u1ef1 tr\u1ecdng, kh\xf4ng m\xe0ng l\u1ee3i \xedch nh\u1ecf nhoi."}],"Suy":[{"VocDang":"Kim suy khi\u1ebfn th\xe2n h\xecnh nh\u1ecf b\xe9, thi\u1ebfu s\u1ee9c s\u1ed1ng."},{"TinhCach":"D\u1ec5 tr\u1edf n\xean l\u1ea1nh l\xf9ng, \u0111\xf4i khi nham hi\u1ec3m, ham mu\u1ed1n v\u1eadt ch\u1ea5t, thi\u1ebfu s\u1ef1 v\u1ecb tha."}],"ManhQua":"Kim qu\xe1 m\u1ea1nh d\u1ec5 h\u1eefu d\u0169ng v\xf4 m\u01b0u, tham v\u1ecdng l\u1edbn, thi\u1ebfu l\xf2ng nh\xe2n t\u1eeb."},"Th\u1ee7y":{"chung":"Th\u1ee7y ch\u1ee7 v\u1ec1 Tr\xed \u2013 th\xf4ng minh, linh ho\u1ea1t, lu\xf4n bi\u1ebft th\xedch nghi v\xe0 s\xe1ng t\u1ea1o.","Vuong":[{"VocDang":"Th\u1ee7y v\u01b0\u1ee3ng th\u01b0\u1eddng c\xf3 s\u1eafc m\u1eb7t h\u01a1i \u0111en, l\u1eddi n\xf3i nh\u1eb9 nh\xe0ng, r\xf5 r\xe0ng, cu\u1ed1n h\xfat."},{"TinhCach":"Lu\xf4n quan t\xe2m \u0111\u1ebfn ng\u01b0\u1eddi kh\xe1c, tr\xed tu\u1ec7 s\u1eafc b\xe9n, h\u1ecdc h\u1ecfi nhanh nh\u1ea1y."}],"Suy":[{"VocDang":"Th\u1ee7y suy khi\u1ebfn v\xf3c ng\u01b0\u1eddi th\u1ea5p b\xe9, t\xednh t\xecnh d\u1ec5 thay \u0111\u1ed5i, thi\u1ebfu \u1ed5n \u0111\u1ecbnh."},{"TinhCach":"T\xe2m l\xfd th\u1ea5t th\u01b0\u1eddng, nh\xfat nh\xe1t, thi\u1ebfu m\u01b0u l\u01b0\u1ee3c, h\xe0nh \u0111\u1ed9ng thi\u1ebfu tr\u1eadt t\u1ef1."}],"ManhQua":"Th\u1ee7y qu\xe1 m\u1ea1nh d\u1ec5 sinh tranh c\xe3i, t\xednh kh\xed th\u1ea5t th\u01b0\u1eddng, kh\xf3 ki\u1ec3m so\xe1t c\u1ea3m x\xfac."}}'),YN=e=>{let{isOpen:n,onClose:r,title:s,className:i="items-center md:items-center",classNameBody:a="",width:o="max-w-md",children:l}=e;const[c,u]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{u(!!n)}),[n]),n?(0,At.jsx)("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex justify-center z-50 transition-opacity duration-300 ${i} ${c?"opacity-100":"opacity-0"}`,onClick:e=>{e.target===e.currentTarget&&"function"===typeof r&&r()},children:(0,At.jsx)("div",{className:`bg-black border border-gray-900 ${o} w-full mx-4 transition-transform duration-300 box-style ${c?"scale-100":"scale-95"} ${a} `,children:(0,At.jsxs)("div",{className:"w-full transition-transform duration-300 box-style-in",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-white text-center w-full",children:s}),(0,At.jsx)("button",{onClick:()=>"function"===typeof r&&r(),className:"text-white hover:text-gray-300",children:(0,At.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l]})})}):null},JN={"D\u1ea7n":"Xu\xe2n","M\xe3o":"Xu\xe2n","Th\xecn":"Chuy\u1ec3n giao","T\u1ef5":"H\u1ea1","Ng\u1ecd":"H\u1ea1","M\xf9i":"Chuy\u1ec3n giao","Th\xe2n":"Thu","D\u1eadu":"Thu","Tu\u1ea5t":"Chuy\u1ec3n giao","H\u1ee3i":"\u0110\xf4ng","T\xfd":"\u0110\xf4ng","S\u1eedu":"Chuy\u1ec3n giao"},ZN={"Xu\xe2n":"M\u1ed9c","H\u1ea1":"H\u1ecfa",Thu:"Kim","\u0110\xf4ng":"Th\u1ee7y","Chuy\u1ec3n giao":"Th\u1ed5"},ej={"M\u1ed9c":"text-green-600","H\u1ecfa":"text-red-500","Th\u1ed5":"text-yellow-700",Kim:"text-gray-500","Th\u1ee7y":"text-blue-600"};const tj=e=>{var n,r,s;let{canNgay:i,chiThang:a,nguHanhAmDuong:o,onResultChange:l}=e;const[c,u]=(0,t.useState)(!1),{nguHanhNgay:d,trangThai:h,status:m,mua:A,nguHanhMua:g,hyThan:p,kyThan:f,dungThan:x,keyTrangThai:v,moTaChung:y,moTaTrangThai:b}=(0,t.useMemo)((()=>{var e;if(!i||!a||!o)return{nguHanhNgay:"",trangThai:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",status:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",mua:"",nguHanhMua:"",hyThan:[],kyThan:[],dungThan:[],keyTrangThai:"",moTaChung:"",moTaTrangThai:""};const t=null===(e=o.can[i])||void 0===e?void 0:e.nguHanh,n=(r=t)?r.replace("H\u1ecfa","H\u1ecfa").replace("Th\u1ee7y","Th\u1ee7y"):"";var r;const{trangThai:s,status:l,mua:c,nguHanhMua:u}=function(e,t){const n={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"},r={"M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim",Kim:"M\u1ed9c"},s=JN[t],i=ZN[s],a=e.replace("H\u1ecfa","H\u1ecfa");return a&&i?a===i?{trangThai:"Th\xe2n v\u01b0\u1ee3ng",status:"V\u01b0\u1ee3ng",mua:s,nguHanhMua:i}:n[i]===a?{trangThai:"Th\xe2n v\u01b0\u1ee3ng",status:"T\u01b0\u1edbng",mua:s,nguHanhMua:i}:n[a]===i?{trangThai:"Th\xe2n nh\u01b0\u1ee3c",status:"H\u01b0u",mua:s,nguHanhMua:i}:r[a]===i||r[i]===a?{trangThai:"Th\xe2n nh\u01b0\u1ee3c",status:"T\xf9 - T\u1eed",mua:s,nguHanhMua:i}:{trangThai:"Th\xe2n nh\u01b0\u1ee3c",status:"Nh\u01b0\u1ee3c",mua:s,nguHanhMua:i}:{trangThai:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",status:"Kh\xf4ng x\xe1c \u0111\u1ecbnh",mua:s,nguHanhMua:i}}(n,a),{hyThan:d,kyThan:h}=function(e,t){const n={"M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim",Kim:"M\u1ed9c"},r={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"};let s=[],i=[];return"Th\xe2n v\u01b0\u1ee3ng"===e?(s=[n[t],r[t]],i=[t,r[t]]):"Th\xe2n nh\u01b0\u1ee3c"===e&&(s=[r[t],t],i=[n[t],r[t],{"M\u1ed9c":"Kim",Kim:"H\u1ecfa","H\u1ecfa":"Th\u1ee7y","Th\u1ee7y":"Th\u1ed5","Th\u1ed5":"M\u1ed9c"}[t]]),{hyThan:s,kyThan:i}}(s,n),{dungThan:m}=function(e,t){let n=[];return"Th\xe2n v\u01b0\u1ee3ng"===e?n=[{"M\u1ed9c":"Kim",Kim:"H\u1ecfa","H\u1ecfa":"Th\u1ee7y","Th\u1ee7y":"Th\u1ed5","Th\u1ed5":"M\u1ed9c"}[t]]:"Th\xe2n nh\u01b0\u1ee3c"===e&&(n=[t]),{dungThan:n}}(s,n);let A="";A="V\u01b0\u1ee3ng"===l||"T\u01b0\u1edbng"===l?"Vuong":"H\u01b0u"===l||"Nh\u01b0\u1ee3c"===l||"T\xf9 - T\u1eed"===l?"Suy":l;const g=XN[n]||{},p=g.chung||"";let f=g[A]||"";return f||"Tuyet"!==A||(f=g.Suy||""),{nguHanhNgay:n,trangThai:s,status:l,mua:c,nguHanhMua:u,hyThan:d,kyThan:h,dungThan:m,keyTrangThai:A,moTaChung:p,moTaTrangThai:f}}),[i,a,o]);return(0,t.useEffect)((()=>{l&&l({vuongSuy:"Th\xe2n v\u01b0\u1ee3ng"===h,dungThan:x.join(", ")})}),[h,l,x]),i&&a&&o?(0,At.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg mt-4",children:[(0,At.jsxs)("h4",{className:"text-base md:text-lg font-bold text-gray-200 mb-3 text-center pb-2 cursor-pointer",onClick:()=>u(!0),children:["Nh\u1eadt Ch\u1ee7",(0,At.jsxs)("span",{className:"Th\xe2n v\u01b0\u1ee3ng"===h?"text-green-600 uppercase":"text-red-600 uppercase",children:[" ",h," "]}),(0,At.jsxs)("span",{className:"V\u01b0\u1ee3ng"===m?"text-green-600":"T\u01b0\u1edbng"===m?"text-blue-600":"H\u01b0u"===m?"text-yellow-600":"T\xf9 - T\u1eed"===m?"text-red-600":"text-gray-400",children:["(",m,")"]})]}),(0,At.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg border-b border-gray-600 text-sm md:text-md",children:[(0,At.jsxs)("div",{className:"text-center flex flex-col md:flex-row gap-2 md:gap-16 justify-center items-center my-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-semibold text-gray-400",children:"M\xf9a sinh:"})," ",(0,At.jsxs)("b",{className:ej[g],children:[A," - (",a,") - ",g]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-semibold text-gray-400",children:"Nh\u1eadt Ch\u1ee7:"})," ",(0,At.jsxs)("b",{children:["  ",(0,At.jsxs)("span",{className:null===(n=o.can[i])||void 0===n?void 0:n.color,children:[i," - ",d]})," "]})]})]}),(0,At.jsxs)("div",{className:"text-center flex flex-col md:flex-row gap-2 md:gap-16 justify-center my-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-semibold text-gray-400",children:"D\u1ee5ng th\u1ea7n:"})," ",x.map(((e,t)=>(0,At.jsx)("span",{className:(ej[e]||"")+" font-bold mr-1",children:e},e+t)))]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-semibold text-gray-400",children:"H\u1ef7 th\u1ea7n:"})," ",p.map(((e,t)=>(0,At.jsx)("span",{className:(ej[e]||"")+" font-bold mr-1",children:e},e+t)))]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-semibold text-gray-400",children:"K\u1ef5 th\u1ea7n:"})," ",f.map(((e,t)=>(0,At.jsx)("span",{className:(ej[e]||"")+" font-bold mr-1",children:e},e+t)))]})]})]}),c&&(0,At.jsx)(YN,{isOpen:c,onClose:()=>u(!1),title:"",className:"items-center md:items-center",children:(0,At.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,At.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-lg p-6 max-w-lg w-full relative border border-gray-700",children:[(0,At.jsxs)("h3",{className:"text-lg font-bold mb-2 text-gray-200",children:["Nh\u1eadt Ch\u1ee7 ",(0,At.jsx)("span",{className:null===(r=o.can[i])||void 0===r?void 0:r.color,children:d})," (",m,")"]}),y||b&&(!Array.isArray(b)||0!==b.length)?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:`${null===(s=o.can[i])||void 0===s?void 0:s.color} font-bold`,children:y}),Array.isArray(b)&&b.length>0?b.map(((e,t)=>(0,At.jsxs)("div",{className:"mb-1 text-left text-gray-300 my-3",children:[e.VocDang&&(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{children:"V\xf3c d\xe1ng:"})," ",e.VocDang]}),e.TinhCach&&(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{children:"T\xednh c\xe1ch:"})," ",e.TinhCach]})]},t))):(0,At.jsx)("div",{className:"text-gray-200 font-medium whitespace-pre-line",children:"string"===typeof b&&b?b:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u cho tr\u1ea1ng th\xe1i n\xe0y."})]}):(0,At.jsxs)("div",{className:"text-red-600",children:['Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u cho ng\u0169 h\xe0nh "',d,'" tr\u1ea1ng th\xe1i "',v,'".',(0,At.jsx)("br",{}),"H\xe3y ki\u1ec3m tra l\u1ea1i d\u1eef li\u1ec7u JSON ho\u1eb7c gi\xe1 tr\u1ecb truy\u1ec1n v\xe0o."]})]})})})]}):null},nj=["tr\u01b0\u1eddng sinh","m\u1ed9c d\u1ee5c","quan \u0111\u1edbi","l\xe2m quan","\u0111\u1ebf v\u01b0\u1ee3ng"],rj=e=>{var n,r;let{canNgay:s,chiThang:i,canChiArray:a,nguHanhAmDuong:o,truongSinhMap:l,analyzeThapThan:c,onResultChange:u}=e;const{duocLenh:d,dacDia:h,dacDiaList:m,duocSinh:A,duocSinhList:g,duocTroGiup:p,duocTroGiupList:f,ketQua:x}=(0,t.useMemo)((()=>{var e,t;if(!s||!i||!a||!o||!l)return{duocLenh:!1,dacDia:!1,dacDiaList:[],duocSinh:!1,duocSinhList:[],duocTroGiup:!1,duocTroGiupList:[],ketQua:"Nh\u01b0\u1ee3c"};const n=a[2].split(" ")[0],r=null===(e=l[n])||void 0===e?void 0:e[i],u=r&&nj.includes((r.name||"").toLowerCase()),d=["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"];let h=[],m=!1;if("+"===(null===(t=o.can[s])||void 0===t?void 0:t.amDuong)){const e=[0,2,3].map((e=>{var t;const[n,r]=a[e].split(" "),i=null===(t=l[s])||void 0===t?void 0:t[r];return i&&"Tr\u01b0\u1eddng Sinh"===i.name?d[e]+" ("+r+" - "+i.name+" can Ng\xe0y)":null})).filter(Boolean);let t=[];if(c){const e=c(a).filter((e=>"Ng\xe0y"===e.tru));e.length>0&&e.shift();const n=e.find((e=>"T\u1ef7 Ki\xean"===e.thapThan||"Ki\u1ebfp T\xe0i"===e.thapThan));n&&(t=[" (T\xe0n Can - "+n.can+" - "+n.thapThan+")"])}const n=[1].map((e=>{const[t,n]=a[e].split(" ");return"Th\xecn"===n||"Tu\u1ea5t"===n||"S\u1eedu"===n||"M\xf9i"===n?d[e]+" ("+n+" - M\u1ed9 Kh\u1ed1)":null})).filter(Boolean);h=[...e,...t,...n],m=h.length>0}let A=[];if(c){A=c(a).filter((e=>("Gi\u1edd"===e.tru||"Th\xe1ng"===e.tru||"N\u0103m"===e.tru)&&("Thi\xean \u1ea4n"===e.thapThan||"Ch\xednh \u1ea4n"===e.thapThan))).map((e=>e.tru+" ("+e.can+" - "+e.thapThan+")"))}const g=A.length>0;let p=[];if(c){p=c(a).filter((e=>("Gi\u1edd"===e.tru||"Th\xe1ng"===e.tru||"N\u0103m"===e.tru)&&("T\u1ef7 Ki\xean"===e.thapThan||"Ki\u1ebfp T\xe0i"===e.thapThan))).map((e=>e.tru+" ("+e.can+" - "+e.thapThan+")"))}const f=p.length>0;let x="";const v=[m,g,f].filter(Boolean).length;return x=u?"V\u01b0\u1ee3ng (\u0111\u01b0\u1ee3c l\u1ec7nh th\xe1ng)":v>=2?"V\u01b0\u1ee3ng":"Nh\u01b0\u1ee3c",{duocLenh:u,dacDia:m,dacDiaList:h,duocSinh:g,duocSinhList:A,duocTroGiup:f,duocTroGiupList:p,ketQua:x}}),[s,i,a,o,l,c]);return(0,t.useEffect)((()=>{u&&u(x.includes("V\u01b0\u1ee3ng"))}),[x,u]),s&&i&&a&&o&&l?(0,At.jsxs)("div",{className:"p-4 rounded-lg mt-4 bg-gray-800",children:[(0,At.jsxs)("h4",{className:"text-base md:text-lg font-bold text-gray-200 mb-3 text-center pb-2",children:["Can Ng\xe0y",(0,At.jsxs)("span",{className:x.includes("V\u01b0\u1ee3ng")?"text-green-600 uppercase":"text-red-600 uppercase",children:[" ",x]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 my-4 text-sm",children:[(0,At.jsxs)("div",{className:"text-center border-b border-gray-600 rounded-lg p-2 bg-gray-900",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-400 mb-2",children:"\u0110\u01b0\u1ee3c l\u1ec7nh"}),(0,At.jsx)("div",{className:d?"text-green-600 text-xs":"text-gray-500 text-xs",children:d?i+" ("+((null===(n=l[a[2].split(" ")[0]])||void 0===n||null===(r=n[i])||void 0===r?void 0:r.name)||"")+")":(0,At.jsx)("div",{className:"text-xs",children:"Chi th\xe1ng kh\xf4ng r\u01a1i v\xe0o c\xe1c cung tr\u01b0\u1eddng sinh, m\u1ed9c d\u1ee5c, quan \u0111\u1edbi, l\xe2m quan, \u0111\u1ebf v\u01b0\u1ee3ng c\u1ee7a can ng\xe0y"})})]}),(0,At.jsxs)("div",{className:"text-center border-b border-gray-600 rounded-lg p-2 bg-gray-900",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-400 mb-2",children:"\u0110\u1eafc \u0111\u1ecba"}),(0,At.jsx)("div",{className:h?"text-green-600 text-xs":"text-gray-500 text-xs",children:m.length>0?m.map(((e,t)=>(0,At.jsx)("div",{children:e},t))):(0,At.jsx)("div",{className:"text-xs",children:"Chi Gi\u1edd, Th\xe1ng, N\u0103m kh\xf4ng c\xf3 tr\u01b0\u1eddng sinh, T\xe0n can nh\u1eadt ch\u1ee7 kh\xf4ng T\u1ef7 Ki\xean/Ki\u1ebfp T\xe0i. Kh\xf4ng chi M\u1ed9 kh\u1ed1 (Chi Th\u1ed5) cho Nh\u1eadt ch\u1ee7"})})]}),(0,At.jsxs)("div",{className:"text-center border-b border-gray-600 rounded-lg p-2 bg-gray-900",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-400 mb-2",children:"\u0110\u01b0\u1ee3c sinh"}),(0,At.jsx)("div",{className:A?"text-green-600 text-xs":"text-gray-500 text-xs",children:g.length>0?g.map(((e,t)=>(0,At.jsx)("div",{children:e},t))):(0,At.jsx)("div",{className:"text-xs",children:"Gi\u1edd, Th\xe1ng, N\u0103m kh\xf4ng c\xf3 Thi\xean \u1ea4n ho\u1eb7c Ch\xednh \u1ea4n "})})]}),(0,At.jsxs)("div",{className:"text-center border-b border-gray-600 rounded-lg p-2 bg-gray-900",children:[(0,At.jsx)("div",{className:"font-semibold text-gray-400 mb-2",children:"\u0110\u01b0\u1ee3c tr\u1ee3 gi\xfap"}),(0,At.jsx)("div",{className:p?"text-green-600 text-xs":"text-gray-500 text-xs",children:f.length>0?f.map(((e,t)=>(0,At.jsx)("div",{children:e},t))):(0,At.jsx)("div",{className:"text-xs",children:"Gi\u1edd, Th\xe1ng, N\u0103m kh\xf4ng c\xf3 T\u1ef7 Ki\xean ho\u1eb7c Ki\u1ebfp T\xe0i"})})]})]})]}):null},sj=JSON.parse('{"Kim":{"Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p":["T\xe0i ch\xednh (ng\xe2n h\xe0ng, k\u1ebf to\xe1n)","Ph\xe1p l\xfd (lu\u1eadt s\u01b0, th\u1ea9m ph\xe1n)","K\u1ef9 thu\u1eadt (c\u01a1 kh\xed, luy\u1ec7n kim)","Th\u1ee3 trang s\u1ee9c","Nh\xe0 \u0111\u1ecba ch\u1ea5t","V\u1eadn \u0111\u1ed9ng vi\xean th\u1ec3 thao m\u1ea1o hi\u1ec3m"],"M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p":{"Ch\u1ee7 \u0111\u1ea1o":["Tr\u1eafng s\u1ee9","B\u1ea1c kim lo\u1ea1i"],"B\u1ed5 tr\u1ee3":["V\xe0ng nh\u1ea1t (Th\u1ed5)"]},"Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa":{"H\u01b0\u1edbng nh\xe0":["T\xe2y","T\xe2y B\u1eafc"],"Khu v\u1ef1c ki\xeang k\u1ef5":["Kh\xf4ng \u0111\u1eb7t b\u1ebfp l\xf2 \u1edf h\u01b0\u1edbng Nam"]},"Quan H\u1ec7 H\u1ed7 Tr\u1ee3":{"B\u1ea1n h\u1ee3p m\u1ec7nh":["Th\u1ed5 (Tu\u1ed5i Th\xecn, S\u1eedu, M\xf9i)","Kim (Tu\u1ed5i Th\xe2n, D\u1eadu)"],"Quan h\u1ec7 xung kh\u1eafc":["H\u1ecfa (Tu\u1ed5i Ng\u1ecd, T\u1ef5)"]},"Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c":{"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i":[6,7,15,24],"Th\u1eddi \u0110i\u1ec3m V\xe0ng":"15h-19h, th\xe1ng 8-9 d\u01b0\u01a1ng l\u1ecbch","\u0110\xe1 Qu\xfd":["H\u1ed3ng ng\u1ecdc tr\u1eafng","Kim c\u01b0\u01a1ng","\u0110\xe1 m\u1eb7t tr\u0103ng"]},"Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian":{"Trang tr\xed":["D\xf9ng v\u1eadt li\u1ec7u kim lo\u1ea1i, tranh \u0111\xe1 qu\xfd, tranh s\u01a1n m\xe0i, b\u1ec3 c\xe1 nh\u1ecf, tr\xe1nh qu\xe1 nhi\u1ec1u c\xe2y xanh ho\u1eb7c v\u1eadt li\u1ec7u g\u1ed7"],"Kh\xf4ng gian":["Kh\xf4ng gian tho\xe1ng, nhi\u1ec1u \xe1nh s\xe1ng"],"Th\u1ef1c ph\u1ea9m":["\u0102n th\u1ef1c ph\u1ea9m gi\xe0u kho\xe1ng ch\u1ea5t (h\xe0u, s\xf2, h\u1ea1t b\xed, c\xe1c lo\u1ea1i \u0111\u1eadu)"]}},"M\u1ed9c":{"Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p":["Gi\xe1o d\u1ee5c","Y t\u1ebf (b\xe1c s\u0129 \u0110\xf4ng y)","N\xf4ng l\xe2m nghi\u1ec7p","Nh\xe0 v\u0103n","Nhi\u1ebfp \u1ea3nh gia thi\xean nhi\xean","Chuy\xean gia phong th\u1ee7y"],"M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p":{"Ch\u1ee7 \u0111\u1ea1o":["Xanh l\xe1 m\u1ea1","Xanh ng\u1ecdc b\xedch"],"B\u1ed5 tr\u1ee3":["Xanh d\u01b0\u01a1ng nh\u1ea1t (Th\u1ee7y)"]},"Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa":{"H\u01b0\u1edbng nh\xe0":["\u0110\xf4ng","\u0110\xf4ng Nam"],"Khu v\u1ef1c ki\xeang k\u1ef5":["Kh\xf4ng l\u1eafp \u0111i\u1ec1u h\xf2a \u1edf h\u01b0\u1edbng T\xe2y"]},"Quan H\u1ec7 H\u1ed7 Tr\u1ee3":{"B\u1ea1n h\u1ee3p m\u1ec7nh":["Th\u1ee7y (Tu\u1ed5i T\xfd, H\u1ee3i)","M\u1ed9c (Tu\u1ed5i M\xe3o, D\u1ea7n)"],"Quan h\u1ec7 xung kh\u1eafc":["Kim (Tu\u1ed5i Th\xe2n, D\u1eadu)"]},"Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c":{"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i":[3,4,12,21],"Th\u1eddi \u0110i\u1ec3m V\xe0ng":"5h-7h, th\xe1ng 2-3 d\u01b0\u01a1ng l\u1ecbch","\u0110\xe1 Qu\xfd":["C\u1ea9m th\u1ea1ch","Ng\u1ecdc l\u1ee5c b\u1ea3o","\u0110\xe1 peridot"]},"Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian":{"Trang tr\xed":["Tr\u1ed3ng nhi\u1ec1u c\xe2y, d\xf9ng n\u1ed9i th\u1ea5t g\u1ed7, tranh c\xe2y c\u1ed1i, hoa c\u1ecf; tr\xe1nh kim lo\u1ea1i"],"Kh\xf4ng gian":["Ph\xf2ng tho\xe1ng, \u0111\xf3n gi\xf3 t\u1ef1 nhi\xean"],"Th\u1ef1c ph\u1ea9m":["\u0102n nhi\u1ec1u rau xanh, c\u1ee7 qu\u1ea3, u\u1ed1ng tr\xe0 xanh, n\u01b0\u1edbc \xe9p hoa qu\u1ea3"]}},"Th\u1ee7y":{"Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p":["Du l\u1ecbch bi\u1ec3n","Logistics","T\xe2m l\xfd h\u1ecdc","Nh\xe0 ngo\u1ea1i giao","Phi\xean d\u1ecbch vi\xean","Nh\xe0 ph\xe1t minh"],"M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p":{"Ch\u1ee7 \u0111\u1ea1o":["\u0110en huy\u1ec1n","Xanh d\u01b0\u01a1ng \u0111\u1eadm"],"B\u1ed5 tr\u1ee3":["X\xe1m b\u1ea1c (Kim)"]},"Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa":{"H\u01b0\u1edbng nh\xe0":["B\u1eafc"],"Khu v\u1ef1c ki\xeang k\u1ef5":["Kh\xf4ng x\xe2y h\u1ed3 c\xe1 \u1edf h\u01b0\u1edbng \u0110\xf4ng Nam"]},"Quan H\u1ec7 H\u1ed7 Tr\u1ee3":{"B\u1ea1n h\u1ee3p m\u1ec7nh":["Kim (Tu\u1ed5i Th\xe2n, D\u1eadu)","Th\u1ee7y (Tu\u1ed5i T\xfd, H\u1ee3i)"],"Quan h\u1ec7 xung kh\u1eafc":["Th\u1ed5 (Tu\u1ed5i S\u1eedu, M\xf9i)"]},"Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c":{"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i":[1,9,10,19],"Th\u1eddi \u0110i\u1ec3m V\xe0ng":"21h-1h, th\xe1ng 11-12 d\u01b0\u01a1ng l\u1ecbch","\u0110\xe1 Qu\xfd":["Aquamarine","Opal \u0111en","\u0110\xe1 m\u1eb7t tr\u0103ng xanh"]},"Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian":{"Trang tr\xed":["Trang tr\xed b\u1ec3 c\xe1, g\u01b0\u01a1ng, h\xf2n non b\u1ed9, tr\xe1nh qu\xe1 nhi\u1ec1u m\xe0u \u0111\u1ecf ho\u1eb7c v\xe0ng "],"Kh\xf4ng gian":["Nh\xe0 g\u1ea7n s\xf4ng h\u1ed3; d\xf9ng v\u1eadt li\u1ec7u k\xednh"],"Th\u1ef1c ph\u1ea9m":["U\u1ed1ng nhi\u1ec1u n\u01b0\u1edbc, \u0103n h\u1ea3i s\u1ea3n, c\xe1, rau xanh"]}},"H\u1ecfa":{"Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p":["Truy\u1ec1n th\xf4ng","Gi\u1ea3i tr\xed","C\xf4ng ngh\u1ec7 th\xf4ng tin","\u0110\u1ea7u b\u1ebfp","Nh\xe0 thi\u1ebft k\u1ebf \xe1nh s\xe1ng","Hu\u1ea5n luy\u1ec7n vi\xean th\u1ec3 h\xecnh"],"M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p":{"Ch\u1ee7 \u0111\u1ea1o":["\u0110\u1ecf r\u01b0\u1ee3u vang","Cam ch\xe1y"],"B\u1ed5 tr\u1ee3":["Xanh l\xe1 (M\u1ed9c)"]},"Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa":{"H\u01b0\u1edbng nh\xe0":["Nam"],"Khu v\u1ef1c ki\xeang k\u1ef5":["Kh\xf4ng x\xe2y nh\xe0 v\u1ec7 sinh \u1edf h\u01b0\u1edbng B\u1eafc"]},"Quan H\u1ec7 H\u1ed7 Tr\u1ee3":{"B\u1ea1n h\u1ee3p m\u1ec7nh":["M\u1ed9c (Tu\u1ed5i M\xe3o, D\u1ea7n)","H\u1ecfa (Tu\u1ed5i Ng\u1ecd, T\u1ef5)"],"Quan h\u1ec7 xung kh\u1eafc":["Th\u1ee7y (Tu\u1ed5i T\xfd, H\u1ee3i)"]},"Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c":{"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i":[2,7,16,25],"Th\u1eddi \u0110i\u1ec3m V\xe0ng":"11h-13h, th\xe1ng 5-6 d\u01b0\u01a1ng l\u1ecbch","\u0110\xe1 Qu\xfd":["Th\u1ea1ch anh t\xedm","Ruby","\u0110\xe1 m\u1eb7t tr\u1eddi"]},"Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian":{"Trang tr\xed":["D\xf9ng \u0111\xe8n chi\u1ebfu s\xe1ng, n\u1ebfn, tranh m\u1eb7t tr\u1eddi, n\u1ed9i th\u1ea5t m\xe0u \u1ea5m; tr\xe1nh qu\xe1 nhi\u1ec1u n\u01b0\u1edbc ho\u1eb7c m\xe0u \u0111en"],"Kh\xf4ng gian":["Nhi\u1ec1u \xe1nh s\xe1ng t\u1ef1 nhi\xean"],"Th\u1ef1c ph\u1ea9m":["\u0102n th\u1ef1c ph\u1ea9m cay n\xf3ng (\u1edbt, g\u1eebng, th\u1ecbt b\xf2, c\xe0 chua)"]}},"Th\u1ed5":{"Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p":["B\u1ea5t \u0111\u1ed9ng s\u1ea3n","Ki\u1ebfn tr\xfac","N\xf4ng nghi\u1ec7p h\u1eefu c\u01a1","Nh\xe0 kh\u1ea3o c\u1ed5","Chuy\xean gia \u0111\u1ecba ch\u1ea5t","Qu\u1ea3n l\xfd nh\xe0 h\xe0ng"],"M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p":{"Ch\u1ee7 \u0111\u1ea1o":["V\xe0ng ngh\u1ec7","N\xe2u \u0111\u1ea5t"],"B\u1ed5 tr\u1ee3":["Cam \u0111\u1ea5t (H\u1ecfa)"]},"Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa":{"H\u01b0\u1edbng nh\xe0":["\u0110\xf4ng B\u1eafc","T\xe2y Nam"],"Khu v\u1ef1c ki\xeang k\u1ef5":["Kh\xf4ng tr\u1ed3ng c\xe2y l\u1edbn \u1edf trung t\xe2m nh\xe0"]},"Quan H\u1ec7 H\u1ed7 Tr\u1ee3":{"B\u1ea1n h\u1ee3p m\u1ec7nh":["H\u1ecfa (Tu\u1ed5i Ng\u1ecd, T\u1ef5)","Th\u1ed5 (Tu\u1ed5i S\u1eedu, M\xf9i)"],"Quan h\u1ec7 xung kh\u1eafc":["M\u1ed9c (Tu\u1ed5i M\xe3o, D\u1ea7n)"]},"Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c":{"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i":[5,8,14,23],"Th\u1eddi \u0110i\u1ec3m V\xe0ng":"7h-9h v\xe0 19h-21h, th\xe1ng 4 v\xe0 9 d\u01b0\u01a1ng l\u1ecbch","\u0110\xe1 Qu\xfd":["M\u1eaft h\u1ed5 v\xe0ng","\u0110\xe1 m\xe3 n\xe3o","Th\u1ea1ch anh t\xf3c v\xe0ng"]},"Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian":{"Trang tr\xed":["S\u1eed d\u1ee5ng \u0111\xe1, g\u1ed1m s\u1ee9, n\u1ed9i th\u1ea5t vu\xf4ng v\u1ee9c, tr\u1ed3ng c\xe2y m\u1ecdng n\u01b0\u1edbc"],"Kh\xf4ng gian":["Nh\xe0 g\u1ea7n \u0111\u1ea5t, v\u01b0\u1eddn, s\xe2n r\u1ed9ng; tr\xe1nh qu\xe1 nhi\u1ec1u c\xe2y l\u1edbn ho\u1eb7c v\u1eadt d\u1ee5ng kim lo\u1ea1i"],"Th\u1ef1c ph\u1ea9m":["\u0102n th\u1ef1c ph\u1ea9m t\u1eeb \u0111\u1ed9ng v\u1eadt, c\u1ee7 qu\u1ea3, b\xe1nh ng\u1ecdt, c\xe1c lo\u1ea1i m\u1ee9t"]}}}'),ij=e=>{var n,r,s;let{dayDetails:i,nguHanhAmDuong:a,tanCanMapping:o,analyzeThapThan:l,includeHourPillar:c=!0}=e;const[u,d]=(0,t.useState)(!1);if(!i)return null;if(!c&&!i.canChi)return null;if(c&&!i.currentCanChiHour)return null;const h=c?[i.currentCanChiHour,i.canChi[0],i.canChi[1],i.canChi[2]]:[i.canChi[0],i.canChi[1],i.canChi[2]],m=c?1:0,A=i.canChi[1].split(" ")[0],g=i.canChi[1].split(" ")[1],p=null===(n=a.can[A])||void 0===n?void 0:n.nguHanh,f=o[g]||[];if(0===f.length)return(0,At.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg shadow text-gray-200",children:"Kh\xf4ng c\xf3 t\xe0n can cho chi th\xe1ng n\xe0y."});const x=[...f].sort(((e,t)=>t.diem-e.diem));h.map((e=>e.split(" ")[0]));let v=null,y="";const b=x.filter((e=>{var t;return(null===(t=a.can[e.can])||void 0===t?void 0:t.nguHanh)===p}));b.length>0&&(v=b[0],y=`T\xe0n can ${v.can} (\u0111i\u1ec3m ${v.diem}) c\xf9ng ng\u0169 h\xe0nh v\u1edbi can th\xe1ng (${A}).`),v||(v=x[0],y=`Kh\xf4ng c\xf3 t\xe0n can n\xe0o c\xf9ng ng\u0169 h\xe0nh v\u1edbi can th\xe1ng, l\u1ea5y t\xe0n can \u0111i\u1ec3m cao nh\u1ea5t (${v.can}, \u0111i\u1ec3m ${v.diem}).`);const w=[...h];w[m]=v.can+" "+i.canChi[m].split(" ")[1];const N=l(w).find((e=>"Th\xe1ng"===e.tru&&e.can===v.can)),j=(N&&N.thapThan,null===(r=a.can[A])||void 0===r||r.amDuong,null===(s=a.can[v.can])||void 0===s||s.amDuong,f.map((e=>{const t=l([i.currentCanChiHour,i.canChi[0],i.canChi[1],i.canChi[2]]).find((t=>"Th\xe1ng"===t.tru&&"T\xe0n Can"===t.type&&t.can===e.can));return`${e.can} (${e.diem}${t?", "+t.thapThan:""})`}))),C=j.find((e=>e.startsWith(v.can))),T=C.split(", ").pop().replace(")","");return(0,At.jsx)("div",{className:"p-4 bg-gray-800 rounded-lg shadow mt-4",children:(0,At.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg shadow border-b border-gray-600",children:[(0,At.jsxs)("h3",{className:"text-base font-bold text-gray-200 cursor-pointer flex items-center gap-2 justify-center",onClick:()=>d((e=>!e)),children:["Ch\xednh C\xe1ch",(0,At.jsx)("span",{className:"text-green-500 ml-2",children:T}),u?(0,At.jsx)(uN,{className:"w-4 h-4"}):(0,At.jsx)(hN,{className:"w-4 h-4"})]}),u&&(0,At.jsxs)("div",{className:" gap-2 text-sm text-gray-400 pt-2",children:[(0,At.jsxs)("div",{className:"mb-2",children:["T\xe0n can th\xe1ng ",(0,At.jsxs)("b",{className:"text-gray-200",children:[g," - ",A]})," : ",j.join(", ")]}),(0,At.jsxs)("div",{className:"mb-2",children:["Ch\u1ecdn ",(0,At.jsx)("b",{className:"text-gray-200",children:C})," l\xe0m c\xe1ch c\u1ee5c"]}),(0,At.jsxs)("div",{className:"mb-2 text-green-500 col-span-2 text-center",children:["L\xfd do: ",y]})]})]})})},aj=JSON.parse('{"VongTruongSinh":{"TruongSinh":{"ChuYeu":"Ph\xfac th\u1ecd d\u1ed3i d\xe0o, b\xe1c \xe1i lan t\u1ecfa, m\u1ed7i ng\xe0y l\xe0 m\u1ed9t b\u01b0\u1edbc ti\u1ebfn t\u1edbi h\u1ea1nh ph\xfac vi\xean m\xe3n, tr\u01b0\u1eddng c\u1eedu v\xe0 th\u1ecbnh v\u01b0\u1ee3ng.","CotNam":"V\u1ec1 gi\xe0 s\u1ef1 nghi\u1ec7p th\u0103ng hoa, ph\xe1t \u0111\u1ea1t r\u1ef1c r\u1ee1.","CotThang":"Trung ni\xean, m\u1ecdi n\u1ed7 l\u1ef1c \u0111\u01a1m hoa k\u1ebft tr\xe1i, th\xe0nh c\xf4ng n\u1ed1i ti\u1ebfp th\xe0nh c\xf4ng.","CotNgay":"S\u1edbm th\xe0nh \u0111\u1ea1t, v\u1ee3 ch\u1ed3ng vi\xean m\xe3n, cha m\u1eb9 y\xeau th\u01b0\u01a1ng, anh em g\u1eafn b\xf3, s\u1ed1ng l\xe2u v\xe0 \u0111\u01b0\u1ee3c m\u1ecdi ng\u01b0\u1eddi k\xednh tr\u1ecdng.","CotGio":"Con c\xe1i hi\u1ec3n \u0111\u1ea1t, l\xe0m r\u1ea1ng danh d\xf2ng t\u1ed9c.","DacBiet":{"NgayXau":["M\u1eadu-D\u1ea7n","\u0110inh-D\u1eadu"],"HieuUng":"N\u1ebfu g\u1eb7p ng\xe0y x\u1ea5u, ph\xfac ph\u1eadn gi\u1ea3m, kh\xf3 h\u01b0\u1edfng tr\u1ecdn v\u1eb9n nh\u1eefng \u0111i\u1ec1u t\u1ed1t \u0111\u1eb9p."},"NuMenh":"C\u1ed9t ng\xe0y c\xf3 Tr\u01b0\u1eddng Sinh, kh\xf4ng b\u1ecb xung ph\xe1, c\u1ea3 \u0111\u1eddi an y\xean, con c\xe1i hi\u1ebfu thu\u1eadn, tu\u1ed5i gi\xe0 an l\u1ea1c.","NgayTot":["B\xednh-D\u1ea7n","Nh\xe2m-Th\xe2n"]},"MocDuc":{"ChuYeu":"V\u1ebb \u0111\u1eb9p cu\u1ed1n h\xfat nh\u01b0ng d\u1ec5 g\u1eb7p th\u1eed th\xe1ch, thay \u0111\u1ed5i n\u01a1i ch\u1ed1n, duy\xean ph\u1eadn n\u1eeda \u0111\u01b0\u1eddng dang d\u1edf, kh\xf3 quy\u1ebft \u0111o\xe1n.","CotNam":"Cha m\u1eb9 r\u1eddi xa qu\xea h\u01b0\u01a1ng, b\u1ea3n th\xe2n v\u1ec1 gi\xe0 ch\u1ecbu nhi\u1ec1u v\u1ea5t v\u1ea3, c\xf3 th\u1ec3 m\u1ea5t v\u1ee3 s\u1edbm ho\u1eb7c ly bi\u1ec7t.","CotThang":"N\u1eeda \u0111\u1eddi ng\u01b0\u1eddi nhi\u1ec1u thay \u0111\u1ed5i, h\xf4n nh\xe2n tr\u1eafc tr\u1edf, con \u0111\u1ea7u l\xf2ng d\u1ec5 y\u1ec3u.","CotNgay":"Tu\u1ed5i nh\u1ecf kh\u1ed5, kh\xf4ng \u0111\u01b0\u1ee3c h\u01b0\u1edfng ph\xfac t\u1ed5 ti\xean,c\xf3 th\u1ec3 m\u1eb9 m\u1ea5t s\u1edbm, ph\u1ea3i t\u1ef1 l\u1eadp ph\u01b0\u01a1ng xa.","CotGio":"V\u1ec1 gi\xe0 suy b\u1ea1i, n\u1ebfu g\u1eb7p xung ph\xe1 th\xec v\u1eadn m\u1ec7nh c\xe0ng l\u1eadn \u0111\u1eadn.","NgayDacBiet":"\u1ea4t-T\u1ef5 c\xf3 \u0111\u1ee9c v\u1ecdng, \u0111\u01b0\u1ee3c k\xednh tr\u1ecdng nh\u01b0ng ph\xfac ph\u1eadn m\u1ecfng manh.","NuMenh":"C\u1ea3 \u0111\u1eddi b\u1ea5t m\xe3n, d\u1ec5 g\u1eb7p \u0111i\u1ec1u kh\xf4ng may.","NgayXauNu":["Gi\xe1p-T\xfd","T\xe2n-H\u1ee3i"]},"QuanDai":{"ChuYeu":"\u0110\u1ecba v\u1ecb cao sang, ph\xe1t tri\u1ec3n r\u1ef1c r\u1ee1, th\xe0nh c\xf4ng v\xe0 \u0111\u01b0\u1ee3c t\xf4n k\xednh, \u0111\u1ee9c \u0111\u1ed9, h\u01b0\u1edbng th\u01b0\u1ee3ng, th\u1ecbnh v\u01b0\u1ee3ng, t\u1eeb bi v\xe0 uy nghi\xeam.","CotNam":"C\xe0ng v\u1ec1 gi\xe0 c\xe0ng h\u1ea1nh ph\xfac, h\u01b0\u1edfng ph\xfac \u0111\u1ee9c vi\xean m\xe3n.","CotThang":"Tu\u1ed5i nh\u1ecf v\u1ea5t v\u1ea3, sau 40 tu\u1ed5i t\u1ef1 nhi\xean ph\xfa qu\xfd.","CotNgay":"L\u1edbn l\xean ph\xe1t v\u1eadn nh\u01b0 r\u1ed3ng g\u1eb7p m\xe2y, con c\xe1i ng\xe0y c\xe0ng ph\xe1t \u0111\u1ea1t.","CotGio":"Con c\xe1i l\xe0m \u0103n c\xe0ng ng\xe0y c\xe0ng ph\xe1t \u0111\u1ea1t.","CanhBao":"N\u1ebfu b\u1ecb xung ph\xe1, d\u1ec5 l\xe0m vi\u1ec7c b\u1ea5t ch\xednh.","NuMenh":"Dung m\u1ea1o \u0111oan ch\xednh, l\u1ea5y \u0111\u01b0\u1ee3c ch\u1ed3ng t\u1ed1t.","NgayXauNu":["Nh\xe2m-Tu\u1ea5t","Qu\xed-S\u1eedu"]},"LamQuan":{"ChuYeu":"L\u01b0\u01a1ng thi\u1ec7n, cung k\xednh, khi\xeam nh\u01b0\u1eddng, cao th\u01b0\u1ee3ng, t\xe0i l\u1ed9c d\u1ed3i d\xe0o, s\u1ed1ng l\xe2u vinh hoa.","CotNam":"G\u1ea7n v\u1ec1 gi\xe0 hi\u1ec3n \u0111\u1ea1t.","CotThang":"N\u1eeda \u0111\u1eddi ng\u01b0\u1eddi s\u1ef1 nghi\u1ec7p h\u01b0ng v\u01b0\u1ee3ng, nh\u01b0ng kh\xf4ng \u1edf t\u1ea1i qu\xea qu\xe1n.","CotNgay":"Thay con tr\u01b0\u1edfng h\u01b0\u1edbng t\u1ed5 nghi\u1ec7p, ho\u1eb7c l\u1eadp nghi\u1ec7p n\u01a1i xa, ho\u1eb7c l\xe0m con nu\xf4i.","CotGio":"Con c\xe1i hi\u1ec3n \u0111\u1ea1t.","DacDiem":"Khi ph\xe1t \u0111\u1ea1t, c\xf3 th\u1ec3 g\xf3a v\u1ee3 s\u1edbm.","NuMenh":"L\xe0m v\u1ee3 ch\xednh th\u01b0\u1eddng ph\xe1 v\u1eadn t\u1ed1t c\u1ee7a ch\u1ed3ng, b\u1ecb v\u1ee3 l\u1ebd l\u1ea5n \xe1t."},"DeVuong":{"ChuYeu":"V\u01b0\u01a1ng th\u1ecbnh, l\xe0m ch\u1ee7, \u0111\u1ed9c l\u1eadp, quy\u1ec1n uy, danh v\u1ecdng, m\u01b0u tr\xed, t\xe0i h\u1ecdc, th\xedch \u0111i m\u1ed9t m\xecnh.","CotNam":"Con nh\xe0 gia th\u1ebf, gi\xe0u c\xf3, nhi\u1ec1u t\u1ef1 \xe1i.","CotThang":"Nghi\xeam trang, kh\xf4ng ch\u1ecbu khu\u1ea5t ph\u1ee5c ai.","CotNgay":"V\u1ecb tr\xed sao qu\xe1 v\u01b0\u1ee3ng, c\u1ea7n c\xf3 sao kh\xe1c ch\u1ebf ng\u1ef1.","CotGio":"Con c\xe1i c\xf3 danh v\u1ecdng.","CanhBao":"T\xednh c\u01b0\u01a1ng ng\u1ea1o, kh\xf4ng ph\u1ee5c ai, d\u1ec5 b\u1ecb ng\u01b0\u1eddi kh\xe1c h\xe3m h\u1ea1i.","NuMenh":"T\xednh kh\xed m\u1ea1nh m\u1ebd, kh\u1eafc ch\u1ed3ng ho\u1eb7c nhi\u1ec1u b\u1ec7nh t\u1eadt.","NgayXauNu":["B\xednh-Ng\u1ecd","\u0110inh-T\u1ef5","M\u1eadu-Ng\u1ecd","K\u1ef7-T\u1ef5","Nh\xe2m-T\xfd","Qu\xed-H\u1ee3i"]},"Suy":{"ChuYeu":"\xd4n h\xf2a, \u0111\u1ea1m b\u1ea1c, y\u1ebfu \u0111u\u1ed1i, tinh th\u1ea7n b\u1ea1c nh\u01b0\u1ee3c, d\u1ec5 m\u1ea5t m\xe1t t\xe0i s\u1ea3n, l\u1ee1 duy\xean, kh\xf4ng \u1ed5n \u0111\u1ecbnh.","CotNam":"Sinh trong gia \u0111\xecnh suy b\u1ea1i, xa l\xe1nh h\u1ecd h\xe0ng, v\u1ec1 gi\xe0 c\xe0ng l\xe0m \u0103n suy k\xe9m.","CotThang":"Trung ni\xean l\xe0m \u0103n kh\xf4ng kh\xe1, ti\u1ec1n b\u1ea1c hao t\xe1n.","CotNgay":"S\u1edbm xa cha m\u1eb9, v\u1ee3 ch\u1ed3ng xung kh\u1eafc, n\u1eeda \u0111\u1eddi b\xf4n ba, l\u1eadp nghi\u1ec7p n\u01a1i xa v\u1eabn v\u1ea5t v\u1ea3.","CotGio":"Con c\xe1i b\u1ea5t hi\u1ebfu, kh\u1ed5 v\xec con.","NuMenh":"Ngo\xe0i m\u1eb7t hi\u1ec1n l\xe0nh, trong l\xf2ng khinh ng\u01b0\u1eddi, kh\xf4ng h\xf2a thu\u1eadn v\u1edbi b\u1ed1 m\u1eb9 ch\u1ed3ng.","NgayXauNu":["Gi\xe1p-Th\xecn","Canh-Tu\u1ea5t","T\xe2n-M\xf9i"]},"Benh":{"ChuYeu":"H\u01b0 nh\u01b0\u1ee3c, xa l\xe1nh h\u1ecd h\xe0ng, lao kh\u1ed5, t\u1eadt b\u1ec7nh.","CotNam":"V\u1ec1 gi\xe0 gia \u0111\xecnh b\u1ea5t h\xf2a, \u1ed1m \u0111au li\xean mi\xean.","CotThang":"N\u1eeda \u0111\u1eddi l\xe0m \u0103n th\u1ea5t b\u1ea1i, lo bu\u1ed3n, b\u1ec7nh t\u1eadt.","CotNgay":"Tu\u1ed5i nh\u1ecf m\u1eafc b\u1ec7nh hi\u1ec3m ngh\xe8o, s\u1edbm xa cha m\u1eb9, duy\xean ph\u1eadn l\u1ea7n \u0111\u1ea7u kh\xf4ng th\xe0nh, l\u1ea7n th\u1ee9 hai m\u1edbi \u1ed5n.","CotGio":"Con \xedt, con hay \u0111au \u1ed1m.","NuMenh":"\xd4n h\xf2a nh\u01b0ng n\u1eeda \u0111\u1eddi v\u1ee3 ch\u1ed3ng ly bi\u1ec7t ho\u1eb7c ch\u1ed3ng th\u1ea5t b\u1ea1i, b\u1ecb ch\u1ed3ng ru\u1ed3ng b\u1ecf."},"Tu":{"ChuYeu":"Lao kh\u1ed5, thi\u1ebfu quy\u1ebft \u0111o\xe1n, b\u1ec7nh ho\u1ea1n, thi\u1ebfu kh\xed ph\xe1ch, kh\u1ed1n kh\u1ed5, v\u1ee3 ch\u1ed3ng chia l\xeca.","CotNam":"Xa c\xe1ch cha m\u1eb9.","CotThang":"Xa c\xe1ch anh em, ho\u1eb7c \xedt anh em.","CotNgay":"Tu\u1ed5i nh\u1ecf m\u1eafc b\u1ec7nh n\u1eb7ng, xa cha m\u1eb9, kh\xf3 c\xf3 con, v\u1ee3 \u1ed1m \u0111au, ho\u1eb7c v\u1ee3 ch\u1ed3ng chia l\xeca.","CotGio":"Con c\xe1i \xedt, kh\xf4ng gi\xfap \xedch cho cha m\u1eb9, n\xean c\xf3 con nu\xf4i.","NuMenh":"V\u1ee3 ch\u1ed3ng s\u1edbm ly bi\u1ec7t, hai ba \u0111\u1eddi ch\u1ed3ng.","NgayXauNu":["\u1ea4t-H\u1ee3i","Canh-T\xfd"]},"Mo":{"ChuYeu":"Xa gia \u0111\xecnh, suy b\u1ea1i, duy\xean ph\u1eadn b\u1ea1c b\u1ebdo, b\u1ea7n h\xe0n, lo bu\u1ed3n, lao kh\u1ed5.","CotNam":"Th\u01b0\u1eddng \u1edf qu\xea h\u01b0\u01a1ng gi\u1eef g\xecn t\u1ed5 ti\xean.","CotThang":"Cha m\u1eb9 anh em v\u1ee3 ch\u1ed3ng b\u1ea5t h\xf2a, hao t\xe0i t\u1ed1n c\u1ee7a.","CotNgay":"Xa gia \u0111\xecnh t\u1eeb nh\u1ecf, thay \u0111\u1ed5i n\u01a1i \u1edf, b\u1ea5t h\xf2a v\u1edbi ng\u01b0\u1eddi th\xe2n, ngh\xe8o kh\xf3.","CotGio":"L\xfac nh\u1ecf hay \u0111au \u1ed1m, g\u1ea7y y\u1ebfu, con c\xe1i \xedt, kh\u1ed5 v\xec con.","NuMenh":"V\u1ee3 ch\u1ed3ng b\u1ea5t h\xf2a.","NgayXauNu":["\u0110inh-S\u1eedu","Nh\xe2m-Th\xecn"]},"Tuyet":{"ChuYeu":"Th\u0103ng tr\u1ea7m, \u0111o\u1ea1n tuy\u1ec7t, hi\u1ebfu s\u1eafc, kh\xf4ng gi\u1eef l\u1eddi h\u1ee9a, xa c\xe1ch ng\u01b0\u1eddi th\xe2n, ph\xe1 s\u1ea3n, s\u1ed1ng c\xf4 \u0111\u1ed9c.","CotNam":"Ph\u1ea3i xa qu\xea h\u01b0\u01a1ng l\u1eadp nghi\u1ec7p.","CotThang":"S\u1ed1ng c\xf4 \u0111\u1ed9c, l\xe0m vi\u1ec7c hay th\u1ea5t b\u1ea1i.","CotNgay":"H\u1ecd h\xe0ng ly t\xe1n, tha h\u01b0\u01a1ng m\u01b0u sinh, v\xec m\xea s\u1eafc m\xe0 g\u1eb7p h\u1ecda, hay th\u1ea5t t\xedn.","CotGio":"\xcdt con.","NuMenh":"V\u1ee3 ch\u1ed3ng xung kh\u1eafc, kh\xf4ng th\u1ef1c l\xf2ng y\xeau ch\u1ed3ng.","NgayXauNu":["Gi\xe1p-Th\xe2n","T\xe2n-M\xe3o"]},"Thai":{"ChuYeu":"Kh\u1eafc v\u1ee3, c\xf4ng vi\u1ec7c b\u1ea5t \u1ed5n, thi\u1ebfu quy\u1ebft \u0111o\xe1n, d\u1ec5 b\u1ecb m\xea ho\u1eb7c.","CotNam":"V\u1ec1 gi\xe0 bu\u1ed3n phi\u1ec1n v\xec th\xe2n t\u1ed9c, h\u1ecd h\xe0ng tranh ch\u1ea5p.","CotThang":"Trung ni\xean thay \u0111\u1ed5i c\xf4ng vi\u1ec7c.","CotNgay":"Tu\u1ed5i nh\u1ecf \u1ed1m y\u1ebfu, v\u1ea5t v\u1ea3, thi\u1ebfu s\u1ee9c kh\u1ecfe \u0111\u1ec3 th\u0103ng ti\u1ebfn.","CotGio":"Con \u0103n ch\u01a1i, kh\xf4ng n\u1ed1i nghi\u1ec7p cha.","CanhBao":"Ba c\u1ed9t c\xf3 Thai, l\xe0m \u0103n l\u1eadn \u0111\u1eadn, tinh th\u1ea7n d\u1ec5 b\u1ecb m\xea ho\u1eb7c.","NuMenh":"Xung \u0111\u1ed9t v\u1edbi cha m\u1eb9 ch\u1ed3ng.","NgayXauNu":["B\xednh-T\xfd","K\u1ef7-H\u1ee3i"]},"Duong":{"ChuYeu":"Kh\u1eafc v\u1ee3 con, ham s\u1eafc d\u1ee5c, l\xe0m con nu\xf4i, xa gia \u0111\xecnh.","CotNam":"Cha ho\u1eb7c b\u1ea3n th\xe2n l\xe0 con tr\u01b0\u1edfng, ho\u1eb7c s\u1ed1ng xa cha m\u1eb9.","CotThang":"L\u1edbn l\xean v\xec m\xea s\u1eafc m\xe0 ph\xe1 s\u1ea3n.","CotNgay":"Kh\u1eafc cha m\u1eb9, kh\xf4ng s\u1ed1ng chung, hi\u1ebfu s\u1eafc, \xedt khi m\u1ed9t v\u1ee3 m\u1ed9t ch\u1ed3ng, hi\u1ebfm con kh\u1eafc v\u1ee3.","CotGio":"Gi\xe0 \u0111\u01b0\u1ee3c con c\xe1i nu\xf4i ho\u1eb7c nh\u1edd con nu\xf4i.","NuMenh":"C\xf3 Tr\u01b0\u1eddng Sinh \u1edf k\u1ebf, con c\xe1i t\u1ed1t.","NgayXauNu":["Canh-Th\xecn"]}}}'),oj=JSON.parse('{"nhatChuMoc":{"can":["Gi\xe1p","\u1ea4t"],"nguHanh":"M\u1ed9c","trangThai":{"vuongThinh":{"dieuKien":"Sinh trong m\xf9a xu\xe2n","dacDiem":"T\u1ecfa s\xe1ng nh\u01b0 m\u1ea7m non v\u01b0\u01a1n m\xecnh, ng\u01b0\u1eddi mang M\u1ed9c v\u01b0\u1ee3ng lu\xf4n nh\xe2n t\u1eeb, tr\xe0n \u0111\u1ea7y l\xf2ng tr\u1eafc \u1ea9n, h\xecnh th\xe1i thanh t\xfa, kh\u1ea3ng kh\xe1i v\xe0 s\u1eb5n s\xe0ng dang tay gi\xfap \u0111\u1ee1 nh\u1eefng ai g\u1eb7p kh\xf3 kh\u0103n."},"thaiQua":{"dieuKien":"\u0110\xe3 v\u01b0\u1ee3ng th\u1ecbnh m\xe0 c\xf2n th\xeam nhi\u1ec1u thi\xean \u1ea5n, ch\xednh \u1ea5n hay t\u1ef7 ki\xean, ki\u1ebfp t\xe0i","dacDiem":"N\u0103ng l\u01b0\u1ee3ng M\u1ed9c qu\xe1 m\u1ea1nh khi\u1ebfn t\xe2m l\xfd d\u1ec5 c\u1ed1 ch\u1ea5p, \u0111\u1ed1 k\u1ef5, nhi\u1ec1u m\u01b0u k\u1ebf nh\u01b0ng thi\u1ebfu \u0111\u1ecbnh h\u01b0\u1edbng, d\u1ec5 b\u1ecb cu\u1ed1n v\xe0o ti\u1ec3u ti\u1ebft m\xe0 qu\xean \u0111i m\u1ee5c ti\xeau l\u1edbn."},"batCap":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng T\u1eed, M\u1ed9, Tuy\u1ec7t","dacDiem":"M\u1ed9c b\u1ea5t c\u1eadp khi\u1ebfn con ng\u01b0\u1eddi tr\u1edf n\xean nhu nh\u01b0\u1ee3c, thi\u1ebfu \xfd ch\xed, h\xe0nh \u0111\u1ed9ng kh\xf4ng quy c\u1ee7, l\xf2ng thi\u1ebfu ch\xednh tr\u1ef1c, d\u1ec5 r\u01a1i v\xe0o tr\u1ea1ng th\xe1i ti\u1ebft ki\u1ec7m qu\xe1 m\u1ee9c v\xe0 h\xe0nh vi thi\u1ebfu tinh t\u1ebf."},"kimNhieu":{"dieuKien":"Nguy\xean c\u1ee5c kim nhi\u1ec1u","dacDiem":"B\u1ecb Kim kh\u1eafc ch\u1ebf, ng\u01b0\u1eddi M\u1ed9c d\u1ec5 suy nh\u01b0\u1ee3c, thi\u1ebfu s\u1ee9c s\u1ed1ng, t\xe2m l\xfd hay do d\u1ef1, h\xe0nh \u0111\u1ed9ng thi\u1ebfu quy\u1ebft \u0111o\xe1n, th\u01b0\u1eddng ti\u1ebfc nu\u1ed1i nh\u1eefng c\u01a1 h\u1ed9i \u0111\xe3 qua."},"mocNhieu":{"dieuKien":"Nguy\xean c\u1ee5c m\u1ed9c nhi\u1ec1u","dacDiem":"M\u1ed9c qu\xe1 nhi\u1ec1u d\u1eabn \u0111\u1ebfn t\xednh c\xe1ch \u0111\u1ed9c l\u1eadp qu\xe1 m\u1ee9c, th\xedch \u0111i m\u1ed9t m\xecnh, h\u1ecdc h\u1ecfi nhi\u1ec1u nh\u01b0ng thi\u1ebfu s\xe1ng t\u1ea1o, kh\xf3 t\xecm \u0111\u01b0\u1ee3c tri k\u1ef7."},"thuyNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ee7y nhi\u1ec1u","dacDiem":"Th\u1ee7y nhi\u1ec1u khi\u1ebfn M\u1ed9c phi\xeau l\xe3ng, t\xe2m tr\u1ea1ng b\u1ea5t \u0111\u1ecbnh, l\u1eddi n\xf3i v\xe0 h\xe0nh \u0111\u1ed9ng kh\xf4ng nh\u1ea5t qu\xe1n, d\u1ec5 thay \u0111\u1ed5i m\u1ee5c ti\xeau."},"hoaNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\u1ecfa nhi\u1ec1u","dacDiem":"H\u1ecfa ti\u1ebfp s\u1ee9c cho M\u1ed9c, gi\xfap \u0111\u1ea7u \xf3c s\xe1ng su\u1ed1t, ham h\u1ecdc h\u1ecfi nh\u01b0ng \u0111\xf4i khi thi\u1ebfu ki\xean nh\u1eabn, d\u1ec5 n\xf3i ra \u0111i\u1ec1u kh\xf4ng n\xean, kh\xf3 gi\u1eef b\xed m\u1eadt."},"thoNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ed5 nhi\u1ec1u","dacDiem":"Th\u1ed5 nhi\u1ec1u gi\xfap M\u1ed9c v\u1eefng v\xe0ng, t\u1ef1 tin, l\xe0m vi\u1ec7c c\xf3 tr\u1eadt t\u1ef1, bi\u1ebft suy x\xe9t tr\u01b0\u1edbc khi h\xe0nh \u0111\u1ed9ng, c\xe2n b\u1eb1ng gi\u1eefa m\u1ec1m m\u1ecfng v\xe0 c\u1ee9ng r\u1eafn."}}},"nhatChuHoa":{"can":["B\xednh","\u0110inh"],"nguHanh":"H\u1ecfa","trangThai":{"vuongThinh":{"dieuKien":"Sinh trong m\xf9a h\u1ea1","dacDiem":"H\u1ecfa v\u01b0\u1ee3ng nh\u01b0 m\u1eb7t tr\u1eddi r\u1ef1c r\u1ee1, t\xednh t\xecnh nhanh nh\u1eb9n, \u0111\xf4i m\u1eaft tinh anh, v\u0103n ch\u01b0\u01a1ng s\u1eafc s\u1ea3o, y\xeau c\xe1i \u0111\u1eb9p v\xe0 lu\xf4n tr\xe0n \u0111\u1ea7y nhi\u1ec7t huy\u1ebft."},"thaiQua":{"dieuKien":"Sinh trong th\xe1ng v\u01b0\u1ee3ng m\xe0 c\xf2n th\xeam thi\xean \u1ea5n, ch\xednh \u1ea5n hay t\u1ef7 ki\xean, ki\u1ebfp t\xe0i","dacDiem":"H\u1ecfa qu\xe1 m\u1ea1nh d\u1ec5 tr\u1edf n\xean n\xf3ng n\u1ea3y, b\u1ed1c \u0111\u1ed3ng, t\xe2m l\xfd th\u1ea5t th\u01b0\u1eddng, \u0111\xf4i khi h\xe0nh \u0111\u1ed9ng c\u1ef1c \u0111oan, d\u1ec5 t\u1ef1 \u0111\u1ea9y m\xecnh v\xe0o ngh\u1ecbch c\u1ea3nh."},"batCap":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng T\u1eed, M\u1ed9, Tuy\u1ec7t","dacDiem":"H\u1ecfa b\u1ea5t c\u1eadp khi\u1ebfn t\xednh c\xe1ch tr\u1edf n\xean gian x\u1ea3o, thi\u1ebfu quy\u1ebft \u0111o\xe1n khi \u0111\u1ed1i di\u1ec7n v\u1edbi vi\u1ec7c l\u1edbn, d\u1ec5 s\u1ee3 s\u1ec7t v\xe0 thi\u1ebfu t\u1ef1 tin."},"kimNhieu":{"dieuKien":"Nguy\xean c\u1ee5c kim nhi\u1ec1u","dacDiem":"Kim nhi\u1ec1u khi\u1ebfn H\u1ecfa hay tranh lu\u1eadn, n\xf3i n\u0103ng s\u1eafc b\xe9n nh\u01b0ng d\u1ec5 v\u01b0\u1edbng v\xe0o th\u1ecb phi, kh\xf3 gi\u1eef \u0111\u01b0\u1ee3c s\u1ef1 c\xe2n b\u1eb1ng trong c\xe1c m\u1ed1i quan h\u1ec7."},"mocNhieu":{"dieuKien":"Nguy\xean c\u1ee5c m\u1ed9c nhi\u1ec1u","dacDiem":"M\u1ed9c nhi\u1ec1u gi\xfap H\u1ecfa th\xeam s\xe1ng t\u1ea1o nh\u01b0ng c\u0169ng d\u1ec5 t\u1ef1 cao, ki\xeau ng\u1ea1o, th\xf4ng minh nh\u01b0ng thi\u1ebfu ch\xed l\u1edbn, th\xedch tranh lu\u1eadn h\u01a1n l\xe0 h\u1ee3p t\xe1c."},"thuyNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ee7y nhi\u1ec1u","dacDiem":"Th\u1ee7y nhi\u1ec1u l\xe0m H\u1ecfa m\u1ea5t c\xe2n b\u1eb1ng, d\u1ec5 tr\u1edf n\xean x\u1ea3o quy\u1ec7t, thi\u1ebfu l\u1ec5 \u0111\u1ed9, t\xe2m l\xfd b\u1ea5t \u1ed5n, m\u01b0u m\xf4 nh\u01b0ng kh\xf3 th\xe0nh c\xf4ng."},"hoaNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\u1ecfa nhi\u1ec1u","dacDiem":"H\u1ecfa qu\xe1 nhi\u1ec1u khi\u1ebfn b\u1ec1 ngo\xe0i t\u1ecfa s\xe1ng nh\u01b0ng b\xean trong d\u1ec5 m\u1ec7t m\u1ecfi, l\xe0m vi\u1ec7c nhanh nh\u01b0ng thi\u1ebfu k\u1ebft qu\u1ea3 b\u1ec1n v\u1eefng."},"thoNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ed5 nhi\u1ec1u","dacDiem":"Th\u1ed5 nhi\u1ec1u gi\xfap H\u1ecfa tr\u1ea7m t\u0129nh, nhi\u1ec1u m\u01b0u k\u1ebf nh\u01b0ng \u0111\xf4i khi d\xe1m l\xe0m \u0111i\u1ec1u b\u1ea5t ngh\u0129a, n\xf3i hay l\xe0m d\u1edf, b\u1ea3o th\u1ee7 kh\xf3 thay \u0111\u1ed5i."}}},"nhatChuTho":{"can":["M\u1eadu","K\u1ef7"],"nguHanh":"Th\u1ed5","trangThai":{"vuongThinh":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng Th\xecn, Tu\u1ea5t, S\u1eedu, M\xf9i","dacDiem":"Th\u1ed5 v\u01b0\u1ee3ng nh\u01b0 n\xfai v\u1eefng ch\xe3i, trung th\u1ef1c, gi\u1eef ch\u1eef t\xedn, hi\u1ebfu thu\u1eadn, trung h\u1eadu v\xe0 b\u1ec1n b\u1ec9, l\xe0 \u0111i\u1ec3m t\u1ef1a v\u1eefng v\xe0ng cho m\u1ecdi ng\u01b0\u1eddi."},"thaiQua":{"dieuKien":"Sinh trong th\xe1ng v\u01b0\u1ee3ng m\xe0 c\xf2n th\xeam thi\xean \u1ea5n, ch\xednh \u1ea5n hay nhi\u1ec1u t\u1ef7 ki\xean, ki\u1ebfp t\xe0i","dacDiem":"Th\u1ed5 qu\xe1 m\u1ea1nh d\u1ec5 c\u1ed1 ch\u1ea5p, b\u1ea3o th\u1ee7, thi\u1ebfu linh ho\u1ea1t, t\u01b0 duy b\u1ebf t\u1eafc, kh\xf3 ti\u1ebfp thu c\xe1i m\u1edbi."},"batCap":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng T\u1eed, M\u1ed9, Tuy\u1ec7t","dacDiem":"Th\u1ed5 b\u1ea5t c\u1eadp khi\u1ebfn kh\xf3 h\xf2a h\u1ee3p v\u1edbi ng\u01b0\u1eddi kh\xe1c, x\u1eed l\xfd thi\u1ebfu minh b\u1ea1ch, d\u1ec5 sa v\xe0o h\xe0nh \u0111\u1ed9ng ti\xeau c\u1ef1c."},"kimNhieu":{"dieuKien":"Nguy\xean c\u1ee5c kim nhi\u1ec1u","dacDiem":"Kim nhi\u1ec1u gi\xfap Th\u1ed5 th\xeam t\xedn ngh\u0129a nh\u01b0ng c\u0169ng khi\u1ebfn b\u1ea3n t\xednh c\u1ee9ng r\u1eafn, \u0111\xf4i khi thi\u1ebfu bao dung."},"mocNhieu":{"dieuKien":"Nguy\xean c\u1ee5c m\u1ed9c nhi\u1ec1u","dacDiem":"M\u1ed9c nhi\u1ec1u gi\xfap Th\u1ed5 c\xf3 ch\xed l\u1edbn nh\u01b0ng d\u1ec5 lao t\xe2m, thi\u1ebfu ki\xean tr\xec, l\xe0m vi\u1ec7c kh\xf4ng b\u1ec1n ch\xed."},"thuyNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ee7y nhi\u1ec1u","dacDiem":"Th\u1ee7y nhi\u1ec1u khi\u1ebfn Th\u1ed5 \u01b0a an nh\xe0n, d\u1ec5 tham lam, thi\u1ebfu ngh\u0129a kh\xed."},"hoaNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\u1ecfa nhi\u1ec1u","dacDiem":"H\u1ecfa nhi\u1ec1u gi\xfap Th\u1ed5 h\u01b0\u1edbng thi\u1ec7n, \u01b0a gi\xfap \u0111\u1ee1 ng\u01b0\u1eddi kh\xe1c, nh\u01b0ng \u0111\xf4i khi ch\u1ec9 n\xf3i m\xe0 kh\xf4ng l\xe0m."},"thoNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ed5 nhi\u1ec1u","dacDiem":"Th\u1ed5 qu\xe1 nhi\u1ec1u khi\u1ebfn ng\u01b0\u1eddi c\u1ea9n tr\u1ecdng, gi\u1eef ch\u1eef t\xedn, r\u1ed9ng l\u01b0\u1ee3ng, d\xf9 \u0111\xf4i l\xfac g\u1eb7p th\u1ecb phi v\u1eabn gi\u1eef \u0111\u01b0\u1ee3c ch\xednh \u0111\u1ea1o."}}},"nhatChuKim":{"can":["Canh","T\xe2n"],"nguHanh":"Kim","trangThai":{"vuongThinh":{"dieuKien":"Sinh th\xe1ng Th\xe2n, th\xe1ng D\u1eadu","dacDiem":"Kim v\u01b0\u1ee3ng nh\u01b0 thanh ki\u1ebfm s\xe1ng, tr\u1ecdng ngh\u0129a kh\xed, danh gi\xe1, th\xe2n th\u1ec3 kh\u1ecfe m\u1ea1nh, \xfd ch\xed ki\xean c\u01b0\u1eddng, quy\u1ebft \u0111o\xe1n v\xe0 kh\xf4ng ng\u1ea1i th\u1eed th\xe1ch."},"thaiQua":{"dieuKien":"\u0110\xe3 v\u01b0\u1ee3ng th\u1ecbnh m\xe0 c\xf2n th\xeam nhi\u1ec1u thi\xean \u1ea5n, ch\xednh \u1ea5n hay nhi\u1ec1u t\u1ef7 ki\xean, ki\u1ebfp t\xe0i","dacDiem":"Kim qu\xe1 m\u1ea1nh d\u1ec5 c\u1ed1 ch\u1ea5p, \u0111\u1ed1 k\u1ef5, t\xe2m l\xfd b\u1ea5t \u1ed5n, nhi\u1ec1u m\u01b0u k\u1ebf nh\u01b0ng thi\u1ebfu nh\u1ea5t qu\xe1n, d\u1ec5 sa v\xe0o ti\u1ec3u ti\u1ebft."},"batCap":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng T\u1eed, M\u1ed9, Tuy\u1ec7t","dacDiem":"Kim b\u1ea5t c\u1eadp khi\u1ebfn t\xednh c\xe1ch nhu nh\u01b0\u1ee3c, thi\u1ebfu nguy\xean t\u1eafc, h\xe0nh \u0111\u1ed9ng kh\xf4ng quy c\u1ee7, d\u1ec5 r\u01a1i v\xe0o tr\u1ea1ng th\xe1i ti\u1ebft ki\u1ec7m qu\xe1 m\u1ee9c."},"kimNhieu":{"dieuKien":"Nguy\xean c\u1ee5c kim nhi\u1ec1u","dacDiem":"Kim qu\xe1 nhi\u1ec1u khi\u1ebfn dung nhan k\xe9m t\u01b0\u01a1i, t\xe2m l\xfd do d\u1ef1, h\xe0nh \u0111\u1ed9ng thi\u1ebfu quy\u1ebft \u0111o\xe1n, d\u1ec5 ti\u1ebfc nu\u1ed1i nh\u1eefng g\xec \u0111\xe3 qua."},"mocNhieu":{"dieuKien":"Nguy\xean c\u1ee5c m\u1ed9c nhi\u1ec1u","dacDiem":"M\u1ed9c nhi\u1ec1u l\xe0m Kim tr\u1edf n\xean m\u1ec1m y\u1ebfu, th\xedch \u0111\u1ed9c l\u1eadp, h\u1ecdc nhi\u1ec1u m\xe0 thi\u1ebfu s\xe1ng t\u1ea1o, kh\xf3 t\xecm b\u1ea1n tri k\u1ef7."},"thuyNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\xe0nh th\u1ee7y nhi\u1ec1u","dacDiem":"Th\u1ee7y nhi\u1ec1u gi\xfap Kim \u0103n n\xf3i l\u01b0u lo\xe1t, b\u1ec1 ngo\xe0i l\u1ec5 \u0111\u1ed9 nh\u01b0ng b\xean trong \u0111\u1ea7y toan t\xednh, nhi\u1ec1u m\u01b0u m\u1eb9o."},"hoaNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\u1ecfa nhi\u1ec1u","dacDiem":"H\u1ecfa nhi\u1ec1u khi\u1ebfn Kim t\xednh to\xe1n nhi\u1ec1u, d\u1ec5 do d\u1ef1, mu\u1ed1n l\xe0m nh\u01b0ng l\u1ea1i kh\xf4ng d\xe1m quy\u1ebft, thi\u1ebfu s\u1ef1 k\u1ebft n\u1ed1i v\u1edbi ng\u01b0\u1eddi kh\xe1c."},"thoNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ed5 nhi\u1ec1u","dacDiem":"Th\u1ed5 nhi\u1ec1u gi\xfap Kim tr\u1ea7m l\u1eb7ng, hi\u1ec1n l\xe0nh, l\xe0m vi\u1ec7c th\u1ea7m l\u1eb7ng nh\u01b0ng d\u1ec5 b\u1ecb th\u1ecb phi, \u0111\xf4i khi th\xe0nh c\xf4ng \u0111\u1ebfn t\u1eeb s\u1ef1 v\xf4 t\xe2m."}}},"nhatChuThuy":{"can":["Nh\xe2m","Qu\xfd"],"nguHanh":"Th\u1ee7y","trangThai":{"vuongThinh":{"dieuKien":"Sinh trong m\xf9a \u0111\xf4ng","dacDiem":"Th\u1ee7y v\u01b0\u1ee3ng nh\u01b0 d\xf2ng s\xf4ng s\xe2u, tr\xed tu\u1ec7 s\u1eafc b\xe9n, nhi\u1ec1u m\u01b0u k\u1ebf, h\u1ecdc r\u1ed9ng bi\u1ebft nhi\u1ec1u, lu\xf4n th\xedch kh\xe1m ph\xe1 v\xe0 \u0111\u1ed5i m\u1edbi."},"thaiQua":{"dieuKien":"Sinh trong m\xf9a \u0111\xf4ng l\u1ea1i th\xeam nhi\u1ec1u t\u1ef7 ki\xean, ki\u1ebfp t\xe0i","dacDiem":"Th\u1ee7y qu\xe1 m\u1ea1nh d\u1ec5 tr\u1edf n\xean \u0111a nghi, th\xedch ho\u1ea1t \u0111\u1ed9ng nh\u01b0ng d\u1ec5 v\u01b0\u1edbng v\xe0o th\u1ecb phi, t\xe2m l\xfd ph\u1ee9c t\u1ea1p, \u0111\xf4i khi sa v\xe0o d\u1ee5c v\u1ecdng."},"batCap":{"dieuKien":"Sinh trong nh\u1eefng th\xe1ng T\u1eed, M\u1ed9, Tuy\u1ec7t","dacDiem":"Th\u1ee7y b\u1ea5t c\u1eadp khi\u1ebfn \xfd ch\xed b\u1ea5t \u0111\u1ecbnh, thi\u1ebfu m\u01b0u l\u01b0\u1ee3c, d\u1ec5 b\u1ecb dao \u0111\u1ed9ng, tr\xed tu\u1ec7 u m\xea, thi\u1ebfu can \u0111\u1ea3m."},"kimNhieu":{"dieuKien":"Nguy\xean c\u1ee5c kim nhi\u1ec1u","dacDiem":"Kim nhi\u1ec1u gi\xfap Th\u1ee7y th\xeam ngh\u0129a l\xfd, ch\xed l\u1edbn, tr\xed tu\u1ec7 nh\u01b0ng d\u1ec5 sa v\xe0o d\u1ee5c v\u1ecdng."},"mocNhieu":{"dieuKien":"Nguy\xean c\u1ee5c m\u1ed9c nhi\u1ec1u","dacDiem":"M\u1ed9c nhi\u1ec1u khi\u1ebfn Th\u1ee7y th\xedch di chuy\u1ec3n, t\xednh kh\xed m\u1ec1m d\u1ebbo, l\xe0m vi\u1ec7c thi\u1ebfu ki\xean tr\xec, d\u1ec5 ti\xeau x\xe0i hoang ph\xed."},"thuyNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ee7y nhi\u1ec1u","dacDiem":"Th\u1ee7y qu\xe1 nhi\u1ec1u gi\xfap linh c\u1ea3m m\u1ea1nh m\u1ebd, th\xf4ng minh nh\u01b0ng d\u1ec5 kho\xe1c l\xe1c, v\u1eadn s\u1ed1 l\xean xu\u1ed1ng th\u1ea5t th\u01b0\u1eddng."},"hoaNhieu":{"dieuKien":"Nguy\xean c\u1ee5c h\u1ecfa nhi\u1ec1u","dacDiem":"H\u1ecfa nhi\u1ec1u khi\u1ebfn Th\u1ee7y d\u1ec5 bu\u1ed3n b\u1ef1c, t\xe2m l\xfd b\u1ea5t \u1ed5n, l\xe0m vi\u1ec7c hay h\u1ed1i ti\u1ebfc, c\u1ea3 \u0111\u1eddi lao t\xe2m lao l\u1ef1c."},"thoNhieu":{"dieuKien":"Nguy\xean c\u1ee5c th\u1ed5 nhi\u1ec1u","dacDiem":"Th\u1ed5 nhi\u1ec1u khi\u1ebfn Th\u1ee7y tr\u1edf n\xean th\xe2m tr\u1ea7m, ngo\xe0i m\u1eb7t gi\u1ea3 ng\u1ed1c nh\u01b0ng b\xean trong th\xf4ng minh, d\u1ec5 m\u01b0u c\u1ea7u l\u1ee3i nh\u1ecf, thi\u1ebfu t\xedn ngh\u0129a."}}}}'),lj={"D\u1ea7n":"Xu\xe2n","M\xe3o":"Xu\xe2n","Th\xecn":"Chuy\u1ec3n giao","T\u1ef5":"H\u1ea1","Ng\u1ecd":"H\u1ea1","M\xf9i":"Chuy\u1ec3n giao","Th\xe2n":"Thu","D\u1eadu":"Thu","Tu\u1ea5t":"Chuy\u1ec3n giao","H\u1ee3i":"\u0110\xf4ng","T\xfd":"\u0110\xf4ng","S\u1eedu":"Chuy\u1ec3n giao"},cj=(e,t)=>{if(!e||!t)return!1;const n=lj[t];if(!n)return!1;switch(e){case"M\u1ed9c":return"Xu\xe2n"===n;case"H\u1ecfa":return"H\u1ea1"===n;case"Th\u1ed5":return["Th\xecn","Tu\u1ea5t","S\u1eedu","M\xf9i"].includes(t);case"Kim":return["Th\xe2n","D\u1eadu"].includes(t);case"Th\u1ee7y":return"\u0110\xf4ng"===n;default:return!1}},uj=e=>{var n,r,s,i;let{nhatChuResult:a,canNgayResult:o,dungThan:l,daiVanData:c,dayDetails:u,tinhTinhNhatChu:d,goiYDungThan:h,NGU_HANH_COLOR:m,nguHanhAmDuong:A,currentBirthYear:g,getTanCanChi:p,nguHanhStats:f,analyzeTruongSinh:x,includeHourPillar:v=!0,cachCucDacBiet:y,analyzeThapThan:b}=e;const[w,N]=(0,t.useState)("dungThan"),[j,C]=(0,t.useState)(""),[T,S]=(0,t.useState)(null),_=((0,t.useRef)(null),t.useMemo((()=>{if(y&&y.length>0){const e=[];if(y.forEach((t=>{var n,r,s;switch(t.name||t){case"Kh\xfac Tr\u1ef1c":e.push("M\u1ed9c");break;case"Vi\xeam Th\u01b0\u1ee3ng":e.push("H\u1ecfa");break;case"T\xf2ng C\xe1ch":e.push("Kim");break;case"Nhu\u1eadn H\u1ea1":e.push("Th\u1ee7y");break;case"Gia T\u01b0\u1eddng":e.push("Th\u1ed5");break;case"T\xf2ng T\xe0i":const i={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"}[null===(n=A.can[u.canChi[0].split(" ")[0]])||void 0===n?void 0:n.nguHanh];i&&e.push(i);break;case"T\xf2ng S\xe1t":const a={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"}[null===(r=A.can[u.canChi[0].split(" ")[0]])||void 0===r?void 0:r.nguHanh];a&&e.push(a);break;case"T\xf2ng Nhi":const o={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"}[null===(s=A.can[u.canChi[0].split(" ")[0]])||void 0===s?void 0:s.nguHanh];o&&e.push(o);break;case"H\xf3a Kh\xed":t.dungThan&&Array.isArray(t.dungThan)&&e.push(...t.dungThan)}})),e.length>0)return[...new Set(e)]}return l?l.split(",").map((e=>e.trim())).filter(Boolean):[]}),[l,y,A,u]));t.useEffect((()=>{!j&&_.length>0&&C(_[0])}),[_,j]);const E=j||(_.length>0?_[0]:""),B=E?[E]:[],M=e=>{const t=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"],n=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],r=["Th\xe1ng 1","Th\xe1ng 2","Th\xe1ng 3","Th\xe1ng 4","Th\xe1ng 5","Th\xe1ng 6","Th\xe1ng 7","Th\xe1ng 8","Th\xe1ng 9","Th\xe1ng 10","Th\xe1ng 11","Th\xe1ng 12"],s=[],i=(12*e+13)%60;for(let l=0;l<12;l++){var a,o;const e=t[(i+l)%10],c=n[(l+2)%12],u=null===(a=A.can[e])||void 0===a?void 0:a.nguHanh,d=null===(o=A.chi[c])||void 0===o?void 0:o.nguHanh;s.push({name:r[l],can:e,chi:c,canChi:`${e} ${c}`,nguHanhCan:u,nguHanhChi:d,hasCurrentDungThan:u===E||d===E})}return s},k=t.useMemo((()=>{if(!x||!u)return[];const e=v?[u.currentCanChiHour,u.canChi[0],u.canChi[1],u.canChi[2]]:[u.canChi[0],u.canChi[1],u.canChi[2]];return x(e.filter(Boolean)).map((e=>{const t={"Tr\u01b0\u1eddng Sinh":"TruongSinh","M\u1ed9c D\u1ee5c":"MocDuc","Quan \u0110\u1edbi":"QuanDai","L\xe2m Quan":"LamQuan","\u0110\u1ebf V\u01b0\u1ee3ng":"DeVuong",Suy:"Suy","B\u1ec7nh":"Benh","T\u1eed":"Tu","M\u1ed9":"Mo","Tuy\u1ec7t":"Tuyet",Thai:"Thai","D\u01b0\u1ee1ng":"Duong"}[e.name];if(!t||!aj.VongTruongSinh[t])return null;const n=aj.VongTruongSinh[t],r="Cot"+("N\u0103m"===e.tru?"Nam":"Th\xe1ng"===e.tru?"Thang":"Ng\xe0y"===e.tru?"Ngay":"Gio");return{tru:e.tru,canChi:`${e.can} ${e.chi}`,chi:e.chi,giaiDoan:t,giaiDoanTen:e.name,chuYeu:n.ChuYeu,moTa:n[r]||"Kh\xf4ng c\xf3 th\xf4ng tin c\u1ee5 th\u1ec3",isGood:["TruongSinh","QuanDai","LamQuan","DeVuong"].includes(t),isBad:["Suy","Benh","Tu","Mo","Tuyet"].includes(t)}})).filter(Boolean)}),[x,u,v,aj]);if(!u)return null;const L=u.canChi[0].split(" ")[0],I=u.canChi[1].split(" ")[1],D=null===(n=A.can[L])||void 0===n?void 0:n.nguHanh,P=(null===(r=A.can[L])||void 0===r?void 0:r.color)||"text-gray-800",F=cj(D,I),U=v?[u.currentCanChiHour,u.canChi[0],u.canChi[1],u.canChi[2]]:[u.canChi[0],u.canChi[1],u.canChi[2]],R=((e,t,n,r)=>{if(!n||!r)return!1;try{const t=r(e.filter(Boolean));if(!t||!Array.isArray(t))return!1;const n=["Thi\xean \u1ea4n","Ch\xednh \u1ea4n","T\u1ef7 Ki\xean","Ki\u1ebfp T\xe0i"];let s=0;const i=[];return t.forEach((e=>{n.includes(e.thapThan)&&(s++,i.push(`${e.thapThan} (${e.tru})`))})),s>=2}catch(s){return console.error("L\u1ed7i khi ki\u1ec3m tra th\xe1i qu\xe1:",s),!1}})(U,0,F,b),O=v?[u.currentCanChiHour,u.canChi[0],u.canChi[1],u.canChi[2]]:[u.canChi[0],u.canChi[1],u.canChi[2]],H=((e,t,n)=>{if(!t||!e)return!1;try{const r=t(e.filter(Boolean));if(!r||!Array.isArray(r))return!1;const s=n?1:0,i=r.find(((e,t)=>t===s));return!!i&&["T\u1eed","M\u1ed9","Tuy\u1ec7t"].includes(i.name)}catch(r){return console.error("L\u1ed7i khi ki\u1ec3m tra b\u1ea5t c\u1eadp:",r),!1}})(O,x,v);let Q="";Q=R?"thaiQua":F?"vuongThinh":H?"batCap":!0===a&&!0===o||!1===a&&!0===o?"Vuong":!1===a&&!1===o?"Suy":"TrungBinh";const z=d[D]||{},V=z.chung||"",K=z[Q]||[],G=(null===(s=K.find((e=>e.VocDang)))||void 0===s?void 0:s.VocDang)||"",q=(null===(i=K.find((e=>e.TinhCach)))||void 0===i?void 0:i.TinhCach)||"",W=v?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"],$=v?[u.currentCanChiHour,u.canChi[0],u.canChi[1],u.canChi[2]]:[u.canChi[0],u.canChi[1],u.canChi[2]];let X=[];$.forEach(((e,t)=>{var n,r;const[s,i]=e.split(" "),a=null===(n=A.can[s])||void 0===n?void 0:n.nguHanh;B.includes(a)&&X.push(`${W[t]} (Can: ${s})`);const o=null===(r=A.chi[i])||void 0===r?void 0:r.nguHanh;B.includes(o)&&X.push(`${W[t]} (Chi: ${i})`);("function"===typeof p?p(i):[]).forEach((e=>{var n;const r=null===(n=A.can[e])||void 0===n?void 0:n.nguHanh;B.includes(r)&&X.push(`${W[t]} (T\xe0n can: ${e})`)}))}));let Y=[];return Array.isArray(c)&&c.length>0&&c.forEach(((e,t)=>{for(let s=0;s<10;s++){var n,r;const i=e.startYear+s,a=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"][(i+6)%10],o=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"][(i+8)%12],l=null===(n=A.can[a])||void 0===n?void 0:n.nguHanh;B.includes(l)&&Y.push(`V\u1eadn ${t+1} - N\u0103m ${i} (Can: ${a})`);const c=null===(r=A.chi[o])||void 0===r?void 0:r.nguHanh;B.includes(c)&&Y.push(`V\u1eadn ${t+1} - N\u0103m ${i} (Chi: ${o})`)}})),(0,At.jsxs)("div",{className:"text-white",children:[(0,At.jsxs)("h3",{className:"text-lg font-bold mb-2 text-center",children:["Nh\u1eadt Ch\u1ee7 ",(0,At.jsxs)("span",{className:P,children:[L," - ",D," "]}),"(","thaiQua"===Q?"Th\xe1i Qu\xe1":"vuongThinh"===Q?"V\u01b0\u1ee3ng T\xecnh":"batCap"===Q?"B\u1ea5t C\u1eadp":"Vuong"===Q?"V\u01b0\u1ee3ng":"Suy"===Q?"Suy":"Trung b\xecnh",")",R&&(0,At.jsx)("span",{className:"text-orange-600 text-sm ml-2",children:"(Qu\xe1 th\u1ecbnh - c\u1ea7n c\xe2n b\u1eb1ng)"}),!R&&F&&(0,At.jsxs)("span",{className:"text-green-600 text-sm ml-2",children:["(V\u01b0\u1ee3ng t\xecnh theo m\xf9a ",lj[I],")"]}),!R&&!F&&H&&(0,At.jsx)("span",{className:"text-red-600 text-sm ml-2",children:"(B\u1ea5t c\u1eadp theo tr\u01b0\u1eddng sinh)"})]}),V&&(0,At.jsx)("div",{className:`${P} font-bold mb-2 text-center px-3`,children:V}),G&&(0,At.jsxs)("div",{className:"text-gray-400 mb-1 text-left my-3 text-sm",children:[(0,At.jsx)("b",{children:"V\xf3c d\xe1ng:"})," ",G]}),q&&(0,At.jsxs)("div",{className:"text-gray-400 text-left my-3 text-sm",children:[(0,At.jsx)("b",{children:"T\xednh c\xe1ch:"})," ",q]}),f&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"text-gray-200 text-left my-3 text-sm",children:(0,At.jsxs)("b",{children:["Ng\u0169 H\xe0nh trong ",v?"T\u1ee9":"Tam"," Tr\u1ee5 :"]})}),(0,At.jsx)("div",{className:"grid grid-cols-5 gap-2 md:gap-4 text-sm",children:Object.entries(f).map((e=>{let[t,n]=e;return(0,At.jsxs)("div",{className:"text-center font-semibold border rounded p-3 flex items-center justify-center transition-all duration-200 "+(n>3?"bg-yellow-100 border-yellow-400 shadow-md transform scale-105":"bg-white border-gray-200"),children:[(0,At.jsx)("div",{className:"mr-2 "+("M\u1ed9c"===t?"text-green-600":"H\u1ecfa"===t?"text-red-600":"Th\u1ed5"===t?"text-yellow-600":"Kim"===t?"text-gray-200":"text-blue-600"),children:t}),(0,At.jsx)("div",{className:" "+(n>3?"text-yellow-700":"text-gray-800"),children:n})]},t)}))}),((e,t)=>{const n=u.canChi[0].split(" ")[0],r=u.canChi[1].split(" ")[1],s=null===(e=A.can[n])||void 0===e?void 0:e.nguHanh,i=cj(s,r),a=lj[r];if(!i)return null;const o={"M\u1ed9c":"nhatChuMoc","H\u1ecfa":"nhatChuHoa","Th\u1ed5":"nhatChuTho",Kim:"nhatChuKim","Th\u1ee7y":"nhatChuThuy"}[s],l=o?oj[o]:null,c=null===l||void 0===l||null===(t=l.trangThai)||void 0===t?void 0:t.vuongThinh;return c?(0,At.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg text-left",children:[(0,At.jsxs)("div",{className:"flex items-center mb-3",children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:"\ud83c\udf1f"}),(0,At.jsx)("h4",{className:"font-bold text-green-800",children:"Nh\u1eadt Ch\u1ee7 V\u01b0\u1ee3ng T\xecnh theo M\xf9a Sinh"})]}),(0,At.jsxs)("div",{className:"mb-3 text-sm",children:[(0,At.jsx)("span",{className:"font-medium text-green-700",children:"\u0110i\u1ec1u ki\u1ec7n:"}),(0,At.jsx)("span",{className:"ml-2 text-gray-700",children:c.dieuKien}),(0,At.jsxs)("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:[s," sinh trong m\xf9a ",a," (",r,")"]})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border-l-4 border-green-400",children:[(0,At.jsx)("span",{className:"font-medium text-green-700",children:"\u0110\u1eb7c \u0111i\u1ec3m:"})," ",c.dacDiem]}),(0,At.jsx)("div",{className:"mt-2 text-xs text-green-600 italic",children:"\ud83d\udca1 \u0110\xe2y l\xe0 tr\u1ea1ng th\xe1i t\u1ed1t nh\u1ea5t c\u1ee7a nh\u1eadt ch\u1ee7 theo m\xf9a sinh, mang l\u1ea1i nhi\u1ec1u thu\u1eadn l\u1ee3i trong cu\u1ed9c s\u1ed1ng."})]}):null})(),((e,t)=>{if(!R)return null;const n=u.canChi[0].split(" ")[0],r={"M\u1ed9c":"nhatChuMoc","H\u1ecfa":"nhatChuHoa","Th\u1ed5":"nhatChuTho",Kim:"nhatChuKim","Th\u1ee7y":"nhatChuThuy"}[null===(e=A.can[n])||void 0===e?void 0:e.nguHanh],s=r?oj[r]:null,i=null===s||void 0===s||null===(t=s.trangThai)||void 0===t?void 0:t.thaiQua;if(!i)return null;let a="";if(b&&U)try{const e=b(U.filter(Boolean)),t=["Thi\xean \u1ea4n","Ch\xednh \u1ea4n","T\u1ef7 Ki\xean","Ki\u1ebfp T\xe0i"],n=e.filter((e=>t.includes(e.thapThan)));if(n.length>0){const e={};n.forEach((t=>{e[t.thapThan]=(e[t.thapThan]||0)+1})),a=Object.entries(e).map((e=>{let[t,n]=e;return`${t} (${n})`})).join(", ")}}catch(o){console.error("L\u1ed7i khi ph\xe2n t\xedch th\u1eadp th\u1ea7n:",o)}return(0,At.jsxs)("div",{className:"mt-4 p-4 bg-orange-50 border border-orange-300 rounded-lg text-left",children:[(0,At.jsxs)("div",{className:"flex items-center mb-3",children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:"\u26a0\ufe0f"}),(0,At.jsx)("h4",{className:"font-bold text-orange-800",children:"Nh\u1eadt Ch\u1ee7 Th\xe1i Qu\xe1 (Qu\xe1 Th\u1ecbnh)"})]}),(0,At.jsxs)("div",{className:"mb-3 text-sm",children:[(0,At.jsx)("span",{className:"font-medium text-orange-700",children:"\u0110i\u1ec1u ki\u1ec7n:"}),(0,At.jsx)("span",{className:"ml-2 text-gray-700",children:i.dieuKien}),a&&(0,At.jsx)("span",{className:"ml-2 text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:a})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border-l-4 border-orange-400",children:[(0,At.jsx)("span",{className:"font-medium text-orange-700",children:"\u0110\u1eb7c \u0111i\u1ec3m:"})," ",i.dacDiem]}),(0,At.jsx)("div",{className:"mt-2 text-xs text-orange-600 italic",children:"\u26a0\ufe0f Tr\u1ea1ng th\xe1i th\xe1i qu\xe1 c\u1ea7n \u0111\u01b0\u1ee3c c\xe2n b\u1eb1ng, tr\xe1nh qu\xe1 \u0111\u1ed9 trong m\u1ecdi vi\u1ec7c. N\xean t\xecm c\xe1ch \u0111i\u1ec1u ho\xe0 \u0111\u1ec3 \u0111\u1ea1t \u0111\u01b0\u1ee3c s\u1ef1 \u1ed5n \u0111\u1ecbnh."})]})})(),((e,t)=>{if(!H)return null;const n=u.canChi[0].split(" ")[0],r={"M\u1ed9c":"nhatChuMoc","H\u1ecfa":"nhatChuHoa","Th\u1ed5":"nhatChuTho",Kim:"nhatChuKim","Th\u1ee7y":"nhatChuThuy"}[null===(e=A.can[n])||void 0===e?void 0:e.nguHanh],s=r?oj[r]:null,i=null===s||void 0===s||null===(t=s.trangThai)||void 0===t?void 0:t.batCap;if(!i)return null;let a="";if(x&&O)try{const e=x(O.filter(Boolean)),t=v?1:0,n=e.find(((e,n)=>n===t));n&&(a=n.name)}catch(o){console.error("L\u1ed7i khi ph\xe2n t\xedch tr\u01b0\u1eddng sinh:",o)}return(0,At.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-300 rounded-lg text-left",children:[(0,At.jsxs)("div",{className:"flex items-center mb-3",children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:"\ud83d\udcc9"}),(0,At.jsx)("h4",{className:"font-bold text-red-800",children:"Nh\u1eadt Ch\u1ee7 B\u1ea5t C\u1eadp"})]}),(0,At.jsxs)("div",{className:"mb-3 text-sm",children:[(0,At.jsx)("span",{className:"font-medium text-red-700",children:"\u0110i\u1ec1u ki\u1ec7n:"}),(0,At.jsx)("span",{className:"ml-2 text-gray-700",children:i.dieuKien}),a&&(0,At.jsxs)("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:["Tr\u1ea1ng th\xe1i: ",a]})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border-l-4 border-red-400",children:[(0,At.jsx)("span",{className:"font-medium text-red-700",children:"\u0110\u1eb7c \u0111i\u1ec3m:"})," ",i.dacDiem]}),(0,At.jsx)("div",{className:"mt-2 text-xs text-red-600 italic",children:"\ud83d\udcc8 Tr\u1ea1ng th\xe1i b\u1ea5t c\u1eadp c\u1ea7n \u0111\u01b0\u1ee3c c\u1ee7ng c\u1ed1 v\xe0 h\u1ed7 tr\u1ee3. N\xean t\xecm c\xe1ch t\u0103ng c\u01b0\u1eddng n\u0103ng l\u01b0\u1ee3ng v\xe0 s\u1ee9c m\u1ea1nh n\u1ed9i t\u1ea1i."})]})})(),(e=>{const t=u.canChi[0].split(" ")[0],n=null===(e=A.can[t])||void 0===e?void 0:e.nguHanh,r={"M\u1ed9c":"mocNhieu","H\u1ecfa":"hoaNhieu","Th\u1ed5":"thoNhieu",Kim:"kimNhieu","Th\u1ee7y":"thuyNhieu"},s=Object.entries(f).filter((e=>{let[t,n]=e;return n>3})).map((e=>{let[t]=e;return t}));if(0===s.length)return null;const i={"M\u1ed9c":"nhatChuMoc","H\u1ecfa":"nhatChuHoa","Th\u1ed5":"nhatChuTho",Kim:"nhatChuKim","Th\u1ee7y":"nhatChuThuy"}[n],a=i?oj[i]:null;return a?(0,At.jsx)("div",{className:"mt-4 space-y-3",children:s.map(((e,t)=>{const n=r[e],s=a.trangThai[n];return s?(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center mb-2",children:[(0,At.jsxs)("span",{className:"font-bold mr-2 "+("M\u1ed9c"===e?"text-green-600":"H\u1ecfa"===e?"text-red-600":"Th\u1ed5"===e?"text-yellow-600":"Kim"===e?"text-gray-200":"text-blue-600"),children:[e," nhi\u1ec1u (",f[e],")"]}),(0,At.jsx)("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded",children:"Qu\xe1 m\u1ea1nh"})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,At.jsx)("span",{className:"font-medium",children:"\u0110\u1eb7c \u0111i\u1ec3m:"})," ",s.dacDiem]})]},t):null}))}):null})(),(0,At.jsx)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:(0,At.jsxs)("p",{className:"mb-2",children:["(",(0,At.jsx)("span",{className:"font-medium",children:"L\u01b0u \xfd:"})," Ng\u0169 h\xe0nh c\xf3 s\u1ed1 l\u01b0\u1ee3ng > 3 \u0111\u01b0\u1ee3c coi l\xe0 ",(0,At.jsx)("span",{className:"text-yellow-600 font-bold",children:"qu\xe1 m\u1ea1nh"}),", c\xf3 th\u1ec3 g\xe2y m\u1ea5t c\xe2n b\u1eb1ng trong b\xe1t t\u1ef1)"]})})]}),l&&(0,At.jsxs)("div",{className:"text-gray-200 text-left my-3 text-base pt-8",children:[(0,At.jsxs)("div",{className:"mb-2 text-center",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center forbt",children:[(0,At.jsx)("h3",{className:"text-lg font-bold text-center",children:"D\u1ee5ng th\u1ea7n: "}),(0,At.jsx)("select",{value:j,onChange:e=>C(e.target.value),className:"px-3 py-1 ml-2 h-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",children:["M\u1ed9c","H\u1ecfa","Th\u1ed5","Kim","Th\u1ee7y"].map((e=>(0,At.jsxs)("option",{value:e,children:[e," ",_.includes(e)?"*":""]},e)))})]}),_.length>0&&(0,At.jsx)("div",{className:"mb-4 mt-2 text-xs text-gray-300 font-normal",children:y&&y.length>0?(0,At.jsxs)(At.Fragment,{children:["D\u1ee5ng th\u1ea7n t\u1eeb C\xe1ch C\u1ee5c \u0110\u1eb7c Bi\u1ec7t",(0,At.jsxs)("span",{className:"font-bold px-1",children:["(",y.map((e=>e.name||e)).join(", "),")"]}),": ",_.map(((e,t)=>(0,At.jsx)("span",{className:`${m[e]||""} font-bold mr-1`,children:e},t)))]}):(0,At.jsxs)(At.Fragment,{children:["D\u1ee5ng th\u1ea7n g\u1ee3i \xfd t\u1eeb ph\xe2n t\xedch: ",_.map(((e,t)=>(0,At.jsx)("span",{className:`${m[e]||""} font-bold mr-1`,children:e},t)))]})})]}),X.length>0?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"my-3 text-sm",children:[(0,At.jsx)("b",{children:"V\u1ecb tr\xed xu\u1ea5t hi\u1ec7n trong t\u1ee9 tr\u1ee5:"}),(0,At.jsx)("ul",{className:"list-none p-0 grid grid-cols-2 gap-0 mt-2 text-left",children:X.map(((e,t)=>(0,At.jsx)("li",{className:"border border-slate-500/50 p-1",children:e},`vi-tri-${t}`)))})]}),B.length>0&&(0,At.jsx)("div",{className:"mt-1 text-sm mb-4",children:B.map(((e,t)=>{const n=h[e]||h[e.replace("H\u1ecfa","H\u1ecfa").replace("Th\u1ee7y","Th\u1ee7y")],r=m[e]||"";return n?(0,At.jsxs)("div",{className:"mb-4 border border-slate-500/50 rounded px-4 py-2 ",children:[(0,At.jsxs)("div",{className:"font-bold mb-1 text-slate-700 text-center hidden",children:["G\u1ee3i \xfd cho D\u1ee5ng th\u1ea7n ",(0,At.jsx)("span",{children:e})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-3 gap-2",children:[(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Ngh\u1ec1 nghi\u1ec7p ph\xf9 h\u1ee3p:"}),(0,At.jsx)("ul",{className:"list-disc pl-5 mt-1",children:n["Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p"].map(((e,t)=>(0,At.jsx)("li",{children:e},`nghe-${t}`)))})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"M\xe0u s\u1eafc t\u01b0\u01a1ng h\u1ee3p:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Ch\u1ee7 \u0111\u1ea1o:"})," ",n["M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p"]["Ch\u1ee7 \u0111\u1ea1o"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"B\u1ed5 tr\u1ee3:"})," ",n["M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p"]["B\u1ed5 tr\u1ee3"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Ph\u01b0\u01a1ng v\u1ecb c\u01b0 tr\xfa:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"H\u01b0\u1edbng nh\xe0:"})," ",n["Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa"]["H\u01b0\u1edbng nh\xe0"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Khu v\u1ef1c ki\xeang k\u1ef5:"})," ",n["Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa"]["Khu v\u1ef1c ki\xeang k\u1ef5"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Quan h\u1ec7 h\u1ed7 tr\u1ee3:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"B\u1ea1n h\u1ee3p m\u1ec7nh:"})," ",n["Quan H\u1ec7 H\u1ed7 Tr\u1ee3"]["B\u1ea1n h\u1ee3p m\u1ec7nh"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Quan h\u1ec7 xung kh\u1eafc:"})," ",n["Quan H\u1ec7 H\u1ed7 Tr\u1ee3"]["Quan h\u1ec7 xung kh\u1eafc"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Y\u1ebfu t\u1ed1 h\u1ed7 tr\u1ee3 kh\xe1c:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Th\u1eddi \u0111i\u1ec3m v\xe0ng:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["Th\u1eddi \u0110i\u1ec3m V\xe0ng"]]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"\u0110\xe1 qu\xfd:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["\u0110\xe1 Qu\xfd"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Kh\xf4ng gian v\xe0 \u0102n u\u1ed1ng"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Trang tr\xed:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Trang tr\xed"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Kh\xf4ng gian:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Kh\xf4ng gian"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Th\u1ef1c ph\u1ea9m:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Th\u1ef1c ph\u1ea9m"].join(", ")]})]})]})]})]},`dung-than-${e}-${t}`):null}))})]}):(0,At.jsx)(At.Fragment,{children:B.length>0&&(0,At.jsx)("div",{className:"mt-1 text-sm mb-4",children:B.map(((e,t)=>{const n=h[e]||h[e.replace("H\u1ecfa","H\u1ecfa").replace("Th\u1ee7y","Th\u1ee7y")],r=m[e]||"";return n?(0,At.jsxs)("div",{className:"mb-4 border rounded px-4 py-2 ",children:[(0,At.jsxs)("div",{className:"font-bold mb-1 text-slate-700 text-center hidden",children:["G\u1ee3i \xfd cho D\u1ee5ng th\u1ea7n ",(0,At.jsx)("span",{children:e})]}),(0,At.jsxs)("div",{className:"grid md:grid-cols-3 gap-2",children:[(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Ngh\u1ec1 nghi\u1ec7p ph\xf9 h\u1ee3p:"}),(0,At.jsx)("ul",{className:"list-disc pl-5 mt-1",children:n["Ngh\u1ec1 Nghi\u1ec7p Ph\xf9u H\u1ee3p"].map(((e,t)=>(0,At.jsx)("li",{children:e},`nghe-${t}`)))})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"M\xe0u s\u1eafc t\u01b0\u01a1ng h\u1ee3p:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Ch\u1ee7 \u0111\u1ea1o:"})," ",n["M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p"]["Ch\u1ee7 \u0111\u1ea1o"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"B\u1ed5 tr\u1ee3:"})," ",n["M\xe0u S\u1eafc T\u01b0\u01a1ng H\u1ee3p"]["B\u1ed5 tr\u1ee3"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Ph\u01b0\u01a1ng v\u1ecb c\u01b0 tr\xfa:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"H\u01b0\u1edbng nh\xe0:"})," ",n["Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa"]["H\u01b0\u1edbng nh\xe0"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Khu v\u1ef1c ki\xeang k\u1ef5:"})," ",n["Ph\u01b0\u01a1ng V\u1ecb C\u01b0 Tr\xfa"]["Khu v\u1ef1c ki\xeang k\u1ef5"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Quan h\u1ec7 h\u1ed7 tr\u1ee3:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"B\u1ea1n h\u1ee3p m\u1ec7nh:"})," ",n["Quan H\u1ec7 H\u1ed7 Tr\u1ee3"]["B\u1ea1n h\u1ee3p m\u1ec7nh"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Quan h\u1ec7 xung kh\u1eafc:"})," ",n["Quan H\u1ec7 H\u1ed7 Tr\u1ee3"]["Quan h\u1ec7 xung kh\u1eafc"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Y\u1ebfu t\u1ed1 h\u1ed7 tr\u1ee3 kh\xe1c:"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Th\u1eddi \u0111i\u1ec3m v\xe0ng:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["Th\u1eddi \u0110i\u1ec3m V\xe0ng"]]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"\u0110\xe1 qu\xfd:"})," ",n["Y\u1ebfu T\u1ed1 H\u1ed7 Tr\u1ee3 Kh\xe1c"]["\u0110\xe1 Qu\xfd"].join(", ")]})]})]}),(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("b",{className:`${r}`,children:"Kh\xf4ng gian v\xe0 \u0102n u\u1ed1ng"}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Trang tr\xed:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Trang tr\xed"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Kh\xf4ng gian:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Kh\xf4ng gian"].join(", ")]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{className:"text-slate-500",children:"Th\u1ef1c ph\u1ea9m:"})," ",n["Trang tr\xed, b\u1ed1 tr\xed kh\xf4ng gian"]["Th\u1ef1c ph\u1ea9m"].join(", ")]})]})]})]})]},`dung-than-${e}-${t}`):null}))})})]}),!V&&!G&&!q&&(0,At.jsx)("div",{className:"text-gray-200",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"}),(0,At.jsx)("div",{className:"mt-4 border-b",children:(0,At.jsxs)("div",{className:"flex space-x-4 justify-center",children:[(0,At.jsx)("button",{onClick:()=>N("dungThan"),className:"py-2 px-4 font-medium text-base "+("dungThan"===w?"border-b-2 border-green-500 text-green-600":"text-gray-400 hover:text-gray-100"),children:"N\u0103m D\u1ee5ng Th\u1ea7n"}),(0,At.jsx)("button",{onClick:()=>N("xungChi"),className:"py-2 px-4 font-medium text-base "+("xungChi"===w?"border-b-2 border-green-500 text-green-600":"text-gray-400 hover:text-gray-100"),children:"N\u0103m Xung Tu\u1ed5i"}),(0,At.jsx)("button",{onClick:()=>N("vongTruongSinh"),className:"py-2 px-4 font-medium text-base "+("vongTruongSinh"===w?"border-b-2 border-green-500 text-green-600":"text-gray-400 hover:text-gray-100"),children:"V\xf2ng Tr\u01b0\u1eddng Sinh"})]})}),(0,At.jsxs)("div",{className:"mt-4 pt-4",children:["dungThan"===w&&(0,At.jsxs)("div",{className:"mt-2 text-sm text-gray-200",children:[(0,At.jsxs)("h4",{className:"text-gray-200 font-bold mb-2 text-xl",children:["C\xe1c n\u0103m \u0111\u1ea1i v\u1eadn c\xf3 ng\u0169 h\xe0nh ",(0,At.jsx)("span",{className:`${m[E]||""} font-bold`,children:E})]}),(0,At.jsxs)("div",{className:"my-5 text-gray-300 text-left space-y-2",children:[(0,At.jsxs)("p",{children:["Trong n\u0103m c\xf3 ng\u0169 h\xe0nh ",(0,At.jsx)("span",{className:`${m[E]||""} font-bold`,children:E}),", m\u1ecdi vi\u1ec7c th\u01b0\u1eddng hanh th\xf4ng h\u01a1n, ",(0,At.jsx)("b",{children:"d\u1ec5 \u0111\u1ea1t th\xe0nh t\u1ef1u"})," l\u1edbn, g\u1eb7p ",(0,At.jsx)("b",{children:"qu\xfd nh\xe2n ph\xf9 tr\u1ee3"}),", ",(0,At.jsx)("b",{children:"s\u1ee9c kh\u1ecfe v\xe0 tinh th\u1ea7n \u0111\u1ec1u t\u1ed1t"})," h\u01a1n b\xecnh th\u01b0\u1eddng"]}),(0,At.jsxs)("p",{children:["\u0110\xe2y l\xe0 th\u1eddi \u0111i\u1ec3m thu\u1eadn l\u1ee3i \u0111\u1ec3 b\u1ea1n ",(0,At.jsx)("b",{children:"kh\u1edfi s\u1ef1 l\u1edbn"}),", ",(0,At.jsx)("b",{children:"\u0111\u1ea7u t\u01b0"}),", ",(0,At.jsx)("b",{children:"m\u1edf r\u1ed9ng kinh doanh"}),", ",(0,At.jsx)("b",{children:"thay \u0111\u1ed5i c\xf4ng vi\u1ec7c"}),", ",(0,At.jsx)("b",{children:"k\u1ebft h\xf4n"}),", ",(0,At.jsx)("b",{children:"sinh con"}),"\u2026 v\xec kh\u1ea3 n\u0103ng th\xe0nh c\xf4ng cao h\u01a1n"]})]}),(0,At.jsx)("ul",{className:"list-none p-0 grid grid-cols-1 gap-0 mt-2 text-left",children:Y.length>0?Y.map(((e,t)=>{const n=e.match(/V\u1eadn (\d+) - N\u0103m (\d+) \((Can|Chi): ([^,\)]+)\)/);if(n){const[i,a,o,l,c]=n,u=o&&g?o-g+1:"";let d="";var r;if("Can"===l)d=(null===(r=A.can[c])||void 0===r?void 0:r.nguHanh)||"";else if("Chi"===l){var s;d=(null===(s=A.chi[c])||void 0===s?void 0:s.nguHanh)||""}const h=m[d]||"",p=T===o,f=p?M(parseInt(o)):[];return(0,At.jsxs)("div",{children:[(0,At.jsx)("li",{className:"border border-slate-500/50 p-1 flex justify-between items-center cursor-pointer hover:bg-gray-50 transition-colors text-black",onClick:()=>S(p?null:o),children:(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:`mr-2 ${p?"rotate-90":""} transition-transform`,children:"\u25b6"}),u&&(0,At.jsxs)("span",{className:`ml-2 text-sm font-bold mr-2 ${h}`,children:[u," Tu\u1ed5i"]}),(()=>{const t=e.split("(Can: ");if(t.length>1){const[e,n]=t,[r,s]=n.split(")");return(0,At.jsxs)(At.Fragment,{children:[e," ",(0,At.jsxs)("span",{className:"text-green-700 pl-2",children:[" (Can : ",r,")"]}),s]})}const n=e.split("(Chi: ");if(n.length>1){const[e,t]=n,[r,s]=t.split(")");return(0,At.jsxs)(At.Fragment,{children:[e," ",(0,At.jsxs)("span",{className:"text-green-300 pl-2",children:[" (Chi: ",r,")"]}),s]})}return e})()]})}),p&&(0,At.jsxs)("div",{className:"ml-4 mt-2 mb-4 border-l-2 border-gray-200 pl-4",children:[(0,At.jsxs)("h4",{className:"text-sm font-bold text-gray-700 mb-2",children:["12 th\xe1ng Can Chi n\u0103m ",o,":"]}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:f.map(((e,t)=>(0,At.jsxs)("div",{className:"text-xs border rounded p-2 text-center "+(e.hasCurrentDungThan?"bg-green-100 border-green-400 font-bold":"bg-white border-gray-200"),children:[(0,At.jsx)("div",{className:"font-medium text-gray-200",children:e.name}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsx)("span",{className:`${m[e.nguHanhCan]||"text-gray-200"} font-medium`,children:e.can})," ",(0,At.jsx)("span",{className:`${m[e.nguHanhChi]||"text-gray-200"} font-medium`,children:e.chi})]}),e.hasCurrentDungThan&&(0,At.jsxs)("div",{className:"text-xs text-green-600 mt-1",children:["\u2713 C\xf3 ",E]})]},t)))}),(0,At.jsx)("div",{className:"mt-2 text-xs text-gray-300",children:(0,At.jsxs)("span",{className:"inline-flex items-center",children:[(0,At.jsx)("span",{className:"w-3 h-3 bg-green-100 border border-green-400 mr-1"}),"Th\xe1ng c\xf3 ng\u0169 h\xe0nh ",E]})})]})]},t)}return null})).filter(Boolean):(0,At.jsxs)("li",{className:"border border-slate-500/50 p-1 text-center text-gray-300 italic",children:["Kh\xf4ng c\xf3 n\u0103m n\xe0o trong \u0111\u1ea1i v\u1eadn c\xf3 ng\u0169 h\xe0nh ",(0,At.jsx)("span",{className:`${m[E]||""} font-bold`,children:E})]})})]}),"xungChi"===w&&(0,At.jsx)("div",{className:"mt-2 text-sm text-gray-200",children:(()=>{const e=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"],t=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"];return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("h4",{className:"text-gray-200 font-bold mb-2 text-xl",children:["C\xe1c n\u0103m xung v\u1edbi tu\u1ed5i",(0,At.jsxs)("span",{className:"text-gray-300 pl-1",children:["(",e[(g+6)%10]," ",t[(g+8)%12],")"]})]}),(0,At.jsxs)("div",{className:"my-5 text-gray-300 text-left space-y-2",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("b",{children:"Kh\u1eafc Can"})," \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn 70% v\u1eadn s\u1ed1, t\xe1c \u0111\u1ed9ng \u0111\u1ebfn n\u1ec1n t\u1ea3ng ",(0,At.jsx)("b",{children:"s\u1ee9c kh\u1ecfe, s\u1ef1 nghi\u1ec7p, v\xe0 c\xe1c m\u1ed1i quan h\u1ec7 x\xe3 h\u1ed9i"}),". \u0110\u1eb7c bi\u1ec7t, khi Thi\xean Can n\u0103m hi\u1ec7n t\u1ea1i kh\u1eafc Can n\u0103m sinh, ch\u1ee7 m\u1ec7nh d\u1ec5 g\u1eb7p bi\u1ebfn \u0111\u1ed9ng l\u1edbn, nh\u01b0 ",(0,At.jsx)("b",{children:"th\u1ea5t b\u1ea1i trong kinh doanh"})," ho\u1eb7c ",(0,At.jsx)("b",{children:"xung \u0111\u1ed9t gia \u0111\xecnh"})]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("b",{children:"Kh\u1eafc Chi"})," chi\u1ebfm 30% t\xe1c \u0111\u1ed9ng, t\u1eadp trung v\xe0o c\xe1c v\u1ea5n \u0111\u1ec1 th\u1ef1c t\u1ebf nh\u01b0 ",(0,At.jsx)("b",{children:"tai n\u1ea1n, th\u1ea5t tho\xe1t ti\u1ec1n b\u1ea1c, ho\u1eb7c b\u1ec7nh t\u1eadt"})," theo m\xf9a"]})]}),(0,At.jsx)("ul",{className:"list-none p-0 grid grid-cols-1 gap-0 mt-2 text-left",children:Array.from({length:100},((e,t)=>g+t)).map(((n,r)=>{const s=n-g+1,i=e[(n+6)%10],a=t[(n+8)%12],o=t[(g+8)%12],l=e[(g+6)%10],c=CN[o]===a||CN[a]===o,u=NN[l]===i||NN[i]===l;if(c||u){const e=T===n.toString(),t=e?M(n):[],d=e=>e.map((e=>{const t=NN[l]===e.can||NN[e.can]===l,n=CN[o]===e.chi||CN[e.chi]===o;return{...e,hasConflict:t||n,conflictType:t&&n?"C\u1ea3 Can & Chi":t?"Can":n?"Chi":""}})),h=e?d(t):[];return(0,At.jsxs)("div",{className:"text-black",children:[(0,At.jsx)("li",{className:"border border-slate-500/50 p-1 flex justify-between items-center cursor-pointer hover:bg-red-50 transition-colors",onClick:()=>S(e?null:n.toString()),children:(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:`mr-2 ${e?"rotate-90":""} transition-transform`,children:"\u25b6"}),(0,At.jsxs)("span",{className:"ml-2 text-sm font-bold mr-2 text-red-500",children:[s," Tu\u1ed5i"]}),`N\u0103m ${n} (${i} ${a})`,c&&(0,At.jsx)("span",{className:"ml-1 text-red-300",children:"(Chi)"}),u&&(0,At.jsx)("span",{className:"ml-1 text-red-700",children:"(Can)"})]})}),e&&(0,At.jsxs)("div",{className:"ml-4 mt-2 mb-4 border-l-2 border-red-200 pl-4",children:[(0,At.jsxs)("h4",{className:"text-sm font-bold text-gray-700 mb-2",children:["12 th\xe1ng Can Chi n\u0103m ",n," (n\u0103m xung tu\u1ed5i):"]}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:h.map(((e,t)=>(0,At.jsxs)("div",{className:"text-xs border rounded p-2 text-center "+(e.hasConflict?"bg-red-100 border-red-400 font-bold":"bg-white border-gray-500"),children:[(0,At.jsx)("div",{className:"font-medium text-gray-300",children:e.name}),(0,At.jsxs)("div",{className:"mt-1",children:[(0,At.jsx)("span",{className:`${m[e.nguHanhCan]||"text-gray-300"} font-medium`,children:e.can})," ",(0,At.jsx)("span",{className:`${m[e.nguHanhChi]||"text-gray-300"} font-medium`,children:e.chi})]}),e.hasConflict&&(0,At.jsxs)("div",{className:"text-xs text-red-600 mt-1",children:["\u26a0 Xung ",e.conflictType]})]},`month-${t}`)))}),(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-300",children:[(0,At.jsxs)("span",{className:"inline-flex items-center",children:[(0,At.jsx)("span",{className:"w-3 h-3 bg-red-100 border border-red-400 mr-1"}),"Th\xe1ng xung kh\u1eafc v\u1edbi tu\u1ed5i sinh"]}),(0,At.jsxs)("div",{className:"mt-1 text-xs text-red-600",children:["Tu\u1ed5i sinh: ",(0,At.jsxs)("span",{className:"font-bold",children:[l," ",o]})]})]})]})]},r)}return null})).filter(Boolean)})]})})()}),"vongTruongSinh"===w&&(0,At.jsxs)("div",{className:"mt-2 text-sm text-gray-300",children:[(0,At.jsxs)("h4",{className:"text-gray-200 font-bold mb-2 text-xl",children:["Ph\xe2n t\xedch V\xf2ng Tr\u01b0\u1eddng Sinh cho Nh\u1eadt Ch\u1ee7 ",(0,At.jsx)("span",{className:P,children:D})]}),(0,At.jsxs)("div",{className:"my-5 text-gray-300 text-left space-y-2",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("b",{children:"V\xf2ng Tr\u01b0\u1eddng Sinh"})," l\xe0 chu k\u1ef3 12 giai \u0111o\u1ea1n ph\xe1t tri\u1ec3n c\u1ee7a ng\u0169 h\xe0nh, t\u1eeb ",(0,At.jsx)("b",{children:"sinh tr\u01b0\u1edfng \u0111\u1ebfn ho\xe0n thi\u1ec7n"}),". M\u1ed7i giai \u0111o\u1ea1n c\xf3 \u1ea3nh h\u01b0\u1edfng kh\xe1c nhau \u0111\u1ebfn ",(0,At.jsx)("b",{children:"t\xednh c\xe1ch, v\u1eadn m\u1ec7nh v\xe0 c\xe1c m\u1ed1i quan h\u1ec7"})," trong cu\u1ed9c s\u1ed1ng."]}),(0,At.jsxs)("p",{children:["D\u1ef1a v\xe0o ",(0,At.jsx)("b",{children:"v\u1ecb tr\xed xu\u1ea5t hi\u1ec7n"})," c\u1ee7a c\xe1c giai \u0111o\u1ea1n trong t\u1ee9 tr\u1ee5, c\xf3 th\u1ec3 d\u1ef1 \u0111o\xe1n ",(0,At.jsx)("b",{children:"xu h\u01b0\u1edbng ph\xe1t tri\u1ec3n"})," \u1edf t\u1eebng giai \u0111o\u1ea1n c\u1ee7a \u0111\u1eddi ng\u01b0\u1eddi v\xe0 ",(0,At.jsx)("b",{children:"nh\u1eefng l\u01b0u \xfd c\u1ea7n thi\u1ebft"}),"."]})]}),k.length>0?(0,At.jsx)("div",{className:"grid md:grid-cols-2 gap-2",children:k.map(((e,t)=>(0,At.jsxs)("div",{className:"border border-slate-500/50 rounded p-4 text-left "+(e.isGood?"bg-green-50 border-green-300":e.isBad?"bg-red-50 border-red-300":"bg-gray-50 border-gray-300"),children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,At.jsxs)("div",{className:"font-bold text-base",children:[(0,At.jsxs)("span",{className:"text-gray-900",children:[e.tru,":"]}),(0,At.jsx)("span",{className:"ml-2 text-gray-800",children:e.canChi})]}),(0,At.jsx)("div",{className:"font-bold px-3 py-1 rounded text-sm "+(e.isGood?"bg-green-200 text-green-800":e.isBad?"bg-red-200 text-red-800":"bg-yellow-200 text-yellow-800"),children:e.giaiDoanTen})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-900 mb-2",children:[(0,At.jsx)("b",{children:"\xdd ngh\u0129a chung:"})," ",e.chuYeu]}),(0,At.jsxs)("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border-l-4 border-gray-400",children:[(0,At.jsx)("b",{children:"\u1ea2nh h\u01b0\u1edfng c\u1ee5 th\u1ec3:"})," ",e.moTa]})]},t)))}):(0,At.jsx)("div",{className:"text-center text-gray-300 italic py-8",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u v\xf2ng tr\u01b0\u1eddng sinh \u0111\u1ec3 ph\xe2n t\xedch"}),(0,At.jsx)("div",{className:"mt-4 text-xs text-gray-300",children:(0,At.jsxs)("div",{className:"flex flex-wrap gap-4 text-left",children:[(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"w-3 h-3 bg-green-200 border border-green-300 mr-1 rounded"}),"Giai \u0111o\u1ea1n t\u1ed1t (Tr\u01b0\u1eddng Sinh, Quan \u0110\u1edbi, L\xe2m Quan, \u0110\u1ebf V\u01b0\u1ee3ng)"]}),(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"w-3 h-3 bg-red-200 border border-red-300 mr-1 rounded"}),"Giai \u0111o\u1ea1n kh\xf3 kh\u0103n (Suy, B\u1ec7nh, T\u1eed, M\u1ed9, Tuy\u1ec7t)"]}),(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"w-3 h-3 bg-yellow-200 border border-yellow-300 mr-1 rounded"}),"Giai \u0111o\u1ea1n trung t\xednh (M\u1ed9c D\u1ee5c, Thai, D\u01b0\u1ee1ng)"]})]})}),(()=>{const e={},t={};k.forEach((n=>{const r=aj.VongTruongSinh[n.giaiDoan];r&&(r.NuMenh&&(e[n.giaiDoan]||(e[n.giaiDoan]={giaiDoan:n.giaiDoanTen,info:r.NuMenh,cots:[]}),e[n.giaiDoan].cots.push(n.tru)),r.NgayXauNu&&r.NgayXauNu.length>0&&(t[n.giaiDoan]||(t[n.giaiDoan]={giaiDoan:n.giaiDoanTen,ngayXau:r.NgayXauNu,cots:[]}),t[n.giaiDoan].cots.push(n.tru)))}));const n=Object.values(e),r=Object.values(t);return 0===n.length&&0===r.length?null:(0,At.jsxs)("div",{className:"mt-6 p-4 bg-pink-50 border border-pink-200 rounded",children:[(0,At.jsx)("h4",{className:"font-bold text-sm text-pink-800 mb-3",children:"\ud83d\udccb L\u01b0u \xfd \u0111\u1eb7c bi\u1ec7t cho N\u1eef m\u1ec7nh"}),n.length>0&&(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("h5",{className:"font-semibold text-xs text-pink-700 mb-2",children:"\u0110\u1eb7c \u0111i\u1ec3m N\u1eef m\u1ec7nh:"}),(0,At.jsx)("div",{className:"space-y-2",children:n.map(((e,t)=>(0,At.jsxs)("div",{className:"text-xs text-gray-700 bg-white p-2 rounded border-l-3 border-pink-400",children:[(0,At.jsxs)("span",{className:"font-medium text-pink-600",children:[e.giaiDoan," (",e.cots.join(", ")]})," ",e.info]},`nu-menh-${t}`)))})]}),r.length>0&&(0,At.jsxs)("div",{children:[(0,At.jsx)("h5",{className:"font-semibold text-xs text-pink-700 mb-2",children:"Ng\xe0y can chi x\u1ea5u c\u1ea7n l\u01b0u \xfd cho N\u1eef m\u1ec7nh:"}),(0,At.jsx)("div",{className:"space-y-2 ",children:r.map(((e,t)=>(0,At.jsxs)("div",{className:"text-xs text-gray-700 bg-white p-2 rounded border-l-3 border-red-400 flex justify-center items-center w-full",children:[(0,At.jsxs)("span",{className:"font-medium text-red-600 pr-1",children:[e.giaiDoan," (",e.cots.join(", "),"):"]}),(0,At.jsx)("div",{className:"mt-1 flex flex-wrap gap-1",children:e.ngayXau.map(((e,t)=>(0,At.jsx)("span",{className:"inline-block bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-medium",children:e},`ngay-${t}`)))})]},`ngay-xau-${t}`)))})]}),(0,At.jsx)("div",{className:"mt-3 text-xs text-pink-600 italic",children:"\ud83d\udca1 Nh\u1eefng th\xf4ng tin n\xe0y \u0111\u1eb7c bi\u1ec7t \xe1p d\u1ee5ng cho ph\u1ee5 n\u1eef v\xe0 c\xf3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn h\xf4n nh\xe2n, gia \u0111\xecnh v\xe0 s\u1ef1 nghi\u1ec7p."})]})})()]})]})]})},dj=()=>{const{currentUser:e}=Aw(),[n,r]=(0,t.useState)(null),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{if(!e||!Qb.db)return r(null),void i(!1);try{i(!0);const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"profiles",e.uid));if(t.exists()){const e=t.data();r(e)}else r(null);o(null)}catch(t){console.error("\u274c useUserProfile: L\u1ed7i khi t\u1ea3i profile:",t),o(t.message),r(null)}finally{i(!1)}})()}),[e]),{profile:n,loading:s,error:a}},hj=(e,t)=>`autoload_notification_shown_${e}_${t}`,mj=(e,t)=>{if(!e||!t)return!1;const n=hj(e,t);return"true"===localStorage.getItem(n)},Aj=(e,t)=>{if(!e||!t)return;const n=hj(e,t);localStorage.setItem(n,"true")},gj=e=>{if(!e)return;const t=Object.keys(localStorage),n=`autoload_notification_shown_${e}_`;t.forEach((e=>{e.startsWith(n)&&localStorage.removeItem(e)}))},pj="G-YE6JSLGRPM",fj={PAGE_VIEW:"page_view",BUTTON_CLICK:"button_click",FORM_SUBMIT:"form_submit",USER_LOGIN:"user_login",USER_SIGNUP:"user_signup",FEATURE_ACCESS:"feature_access",STAR_PURCHASE:"star_purchase",ARTICLE_READ:"article_read",CALENDAR_VIEW:"calendar_view",BAT_TU_CALCULATION:"bat_tu_calculation",LA_KINH_VIEW:"la_kinh_view",SOLAR_SYSTEM_VIEW:"solar_system_view"},xj={trackPageView:(e,t)=>{"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("config",pj,{page_title:e,page_location:t})},trackEvent:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("event",e,t)},trackUserEngagement:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("event",fj.FEATURE_ACCESS,{feature_name:e,action:t,value:n})},trackArticleRead:(e,t,n)=>{"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("event",fj.ARTICLE_READ,{article_title:e,article_category:t,read_time:n})},trackCalendarView:(e,t)=>{"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("event",fj.CALENDAR_VIEW,{calendar_type:e,date:t})},trackBatTuCalculation:(e,t)=>{"undefined"!==typeof window&&"undefined"!==typeof window.gtag&&window.gtag("event",fj.BAT_TU_CALCULATION,{calculation_type:e,has_result:!!t})}},vj=()=>{const e=Y();(0,t.useEffect)((()=>{const e=document.title,t=window.location.href;xj.trackPageView(e,t)}),[e]);return{trackEvent:(0,t.useCallback)((function(e){xj.trackEvent(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}),[]),trackButtonClick:(0,t.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;xj.trackEvent(fj.BUTTON_CLICK,{button_name:e,page:t||window.location.pathname})}),[]),trackFormSubmit:(0,t.useCallback)((function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];xj.trackEvent(fj.FORM_SUBMIT,{form_name:e,success:t})}),[]),trackUserLogin:(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"email";xj.trackEvent(fj.USER_LOGIN,{login_method:e})}),[]),trackUserSignup:(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"email";xj.trackEvent(fj.USER_SIGNUP,{signup_method:e})}),[]),trackFeatureAccess:(0,t.useCallback)((function(e,t){xj.trackUserEngagement(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}),[]),trackStarPurchase:(0,t.useCallback)(((e,t)=>{xj.trackEvent(fj.STAR_PURCHASE,{amount:e,package_type:t})}),[]),trackArticleRead:(0,t.useCallback)(((e,t,n)=>{xj.trackArticleRead(e,t,n)}),[]),trackCalendarView:(0,t.useCallback)(((e,t)=>{xj.trackCalendarView(e,t)}),[]),trackBatTuCalculation:(0,t.useCallback)(((e,t)=>{xj.trackBatTuCalculation(e,t)}),[])}},yj=e=>{var n;let{onAutoLoadNotification:r}=e;const{trackButtonClick:s,trackFeatureAccess:i}=vj(),{profile:a}=dj(),{currentUser:o}=Aw(),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(new Date),[h,m]=(0,t.useState)(null),[A,g]=(0,t.useState)(u.getMonth()+1),[p,f]=(0,t.useState)(u.getFullYear()),[x,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(null),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)(!1),[I,D]=(0,t.useState)([]),[P,F]=(0,t.useState)(!0),[U,R]=(0,t.useState)(null),[O,H]=(0,t.useState)([]),Q=Array.from({length:400},((e,t)=>1800+t)),z=Array.from({length:12},((e,t)=>t+1)),V=[{start:23,end:1,name:"T\xfd (23-1h)"},{start:1,end:3,name:"S\u1eedu (1-3h)"},{start:3,end:5,name:"D\u1ea7n (3-5h)"},{start:5,end:7,name:"M\xe3o (5-7h)"},{start:7,end:9,name:"Th\xecn (7-9h)"},{start:9,end:11,name:"T\u1ef5 (9-11h)"},{start:11,end:13,name:"Ng\u1ecd (11-13h)"},{start:13,end:15,name:"M\xf9i (13-15h)"},{start:15,end:17,name:"Th\xe2n (15-17h)"},{start:17,end:19,name:"D\u1eadu (17-19h)"},{start:19,end:21,name:"Tu\u1ea5t (19-21h)"},{start:21,end:23,name:"H\u1ee3i (21-23h)"}],K={"T\xfd":"text-blue-500","S\u1eedu":"text-yellow-500","D\u1ea7n":"text-green-500","M\xe3o":"text-green-500","Th\xecn":"text-yellow-500","T\u1ef5":"text-red-500","Ng\u1ecd":"text-red-500","M\xf9i":"text-yellow-500","Th\xe2n":"text-gray-400","D\u1eadu":"text-gray-400","Tu\u1ea5t":"text-yellow-500","H\u1ee3i":"text-blue-500"},G={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"},q={"M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim",Kim:"M\u1ed9c"},W=(e,t)=>e===t?"same":G[e]===t?"sinh":G[t]===e?"received":q[e]===t?"khac":q[t]===e?"biKhac":null;(0,t.useEffect)((()=>{const e=()=>{const e=(new Date).getHours();b({hour:e,minute:0}),w||N({hour:e,minute:0})};e();const t=setInterval(e,36e5);return()=>clearInterval(t)}),[]);const $=e=>{if(e>=23||e<1)return 0;for(let t=1;t<V.length;t++)if(e>=V[t].start&&e<V[t].end)return t;return 0},X=e=>(kN[e]||[]).map((e=>e.can)),Y=e=>{if(!e||!Array.isArray(e)||0===e.length)return[];const t=[],n=P?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"],r=e[P?2:1];if(!r)return[];const s=r.split(" ")[1];return s?(e.forEach(((e,r)=>{if(!e)return;const[i,a]=e.split(" ");if(!i||!a)return;const o=n[r];if(PN[i]&&PN[i][s]){const{name:e,score:n}=PN[i][s];t.push({can:i,chi:a,tru:o,name:e,score:n})}})),t):[]},J=e=>{const t=P?e:e.slice(1);if(!t||t.length<3)return[];const n=[],r=P?1:0,[s]=t[r].split(" "),i=FN.can[s].nguHanh,a=FN.can[s].amDuong;return t.forEach(((e,t)=>{const[s,o]=e.split(" "),l=FN.can[s].nguHanh,c=FN.can[s].amDuong;let u="";if(t===r)u="Nh\u1eadt Ch\u1ee7";else{switch(W(i,l)){case"same":u=c===a?"T\u1ef7 Ki\xean":"Ki\u1ebfp T\xe0i";break;case"sinh":u=c===a?"Th\u1ef1c Th\u1ea7n":"Th\u01b0\u01a1ng Quan";break;case"received":u=c===a?"Thi\xean \u1ea4n":"Ch\xednh \u1ea4n";break;case"khac":u=c===a?"Thi\xean T\xe0i":"Ch\xednh T\xe0i";break;case"biKhac":u=c===a?"Th\u1ea5t S\xe1t":"Ch\xednh Quan"}}const d=P?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"];n.push({tru:d[t],can:s,nguHanh:l,amDuong:c,thapThan:u,type:"Thi\xean Can"});(kN[o]||[]).forEach((e=>{const r=FN.can[e.can].nguHanh,s=FN.can[e.can].amDuong;let o="";switch(W(i,r)){case"same":o=s===a?"T\u1ef7 Ki\xean":"Ki\u1ebfp T\xe0i";break;case"sinh":o=s===a?"Th\u1ef1c Th\u1ea7n":"Th\u01b0\u01a1ng Quan";break;case"received":o=s===a?"Thi\xean \u1ea4n":"Ch\xednh \u1ea4n";break;case"khac":o=s===a?"Thi\xean T\xe0i":"Ch\xednh T\xe0i";break;case"biKhac":o=s===a?"Th\u1ea5t S\xe1t":"Ch\xednh Quan"}n.push({tru:d[t],can:e.can,nguHanh:r,amDuong:s,thapThan:o,type:"T\xe0n Can",diem:e.diem})}))})),n},Z=(0,t.useMemo)((()=>{if(j&&x&&x.canChi){const e=P?[x.currentCanChiHour,x.canChi[0],x.canChi[1],x.canChi[2]]:[x.canChi[0],x.canChi[1],x.canChi[2]];return Y(e.filter(Boolean))}return[]}),[j,x,P]),ee=(e,t)=>{m(t);const n=zw(e,A,p),r=Vw(n),s=qw(n.jd),i=Fw[Ww(n.jd+1,7)],a=Gw(n.jd),o=w?w.hour:y?y.hour:0;let l="";if(P&&null!==o){const e=Math.floor((o+1)/2)%12,t=(Iw.indexOf(a)+e)%10,n=e;l=`${Iw[t]} ${Dw[n]}`}let c="";if(y){const e=Math.floor((y.hour+1)/2)%12,t=(Iw.indexOf(a)+e)%10,n=e;c=`${Iw[t]} ${Dw[n]}`}v({solarDate:`${e}/${A}/${p}`,lunarDate:`${n.day}/${n.month}${n.leap,""}/${n.year}`,canChi:r,tietKhi:i,gioHoangDao:s,gioDauNgay:a,currentCanChiHour:l,currentHourCanChi:c,fullCanChi:P?`${l} - ${r[0]} - ${r[1]} - ${r[2]}`:`${r[0]} - ${r[1]} - ${r[2]}`,fullLunarInfo:`${n.day}/${n.month}${n.leap,""}/${n.year} (\xc2m l\u1ecbch)`,blMonth:`${A}/${p}`,includeHourPillar:P})},te=e=>{if(!h)return;const t=h.getDate(),n=zw(t,A,p),r=(Vw(n),qw(n.jd),Ww(n.jd+1,7),Gw(n.jd));let s="";if(P&&null!==e){const t=Math.floor((e+1)/2)%12,n=(Iw.indexOf(r)+t)%10,i=t;s=`${Iw[n]} ${Dw[i]}`}let i="";if(y){const e=Math.floor((y.hour+1)/2)%12,t=(Iw.indexOf(r)+e)%10,n=e;i=`${Iw[t]} ${Dw[n]}`}},ne=Number(null===x||void 0===x||null===(n=x.solarDate)||void 0===n?void 0:n.split("/")[2]);return(0,t.useEffect)((()=>{if(a&&a.birthDate&&a.birthTime&&!l&&o){const t=mj(o.uid,"battu");try{const e=new Date(a.birthDate),n=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),[l]=a.birthTime.split(":").map(Number);f(n),g(s),m(new Date(n,s-1,i));const u=$(l),d=V[u];N({hour:d.start,minute:0}),F(!0),c(!0),!t&&r&&(Aj(o.uid,"battu"),r(!0),setTimeout((()=>{r(!1)}),5e3))}catch(e){}}}),[a,l,o,r]),(0,t.useEffect)((()=>{const e=localStorage.getItem("birthDay"),t=localStorage.getItem("birthMonth"),n=localStorage.getItem("birthYear");e&&t&&n&&(m(new Date(Number(n),Number(t)-1,Number(e))),g(Number(t)),f(Number(n)))}),[]),(0,t.useEffect)((()=>{h&&localStorage.setItem("birthDay",h.getDate()),localStorage.setItem("birthMonth",A),localStorage.setItem("birthYear",p)}),[h,A,p]),(0,At.jsxs)("div",{className:"space-y-4 relative z-30",children:[(0,At.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center mb-4 space-y-2 md:space-y-0",children:[(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 w-full md:w-auto",children:[(0,At.jsxs)("select",{value:P?w?$(w.hour):y?$(y.hour):0:-1,onChange:e=>{const t=parseInt(e.target.value);if(-1===t)F(!1),N(null);else{const e=V[t].start;N({hour:e,minute:0}),F(!0)}te(-1===t?null:V[t].start),v(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:[V.map(((e,t)=>(0,At.jsx)("option",{value:t,children:e.name},t))),(0,At.jsx)("option",{value:-1,children:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"})]}),(0,At.jsx)("select",{value:h?h.getDate():u.getDate(),onChange:e=>{const t=parseInt(e.target.value),n=new Date(p,A-1,t);ee(t,n),v(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:Array.from({length:((e,t)=>new Date(t,e,0).getDate())(A,p)},((e,t)=>t+1)).map((e=>(0,At.jsxs)("option",{value:e,children:["Ng\xe0y ",e]},e)))}),(0,At.jsx)("select",{value:A,onChange:e=>{g(parseInt(e.target.value)),v(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:z.map((e=>(0,At.jsxs)("option",{value:e,children:["Th\xe1ng ",e]},e)))}),(0,At.jsx)("select",{value:p,onChange:e=>{f(parseInt(e.target.value)),v(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:Q.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]}),(0,At.jsxs)("div",{className:"flex gap-2 w-full md:w-auto md:ml-2",children:[(0,At.jsx)("button",{onClick:()=>{s("xem_bat_tu","/battu"),i("bat_tu_calculator","calculate","success");const e=h?h.getDate():u.getDate(),t=new Date(p,A-1,e);ee(e,t),C(!0)},className:"px-4 py-2 text-sm font-semibold md:ml-2 w-full md:w-auto button-style",children:"Xem"}),j&&x&&(0,At.jsx)("button",{onClick:()=>{s("in_pdf_bat_tu","/battu"),i("bat_tu_calculator","print_pdf","success");const e=document.getElementById("print-content"),t={margin:10,filename:`bat-tu-${null===x||void 0===x?void 0:x.solarDate.replace(/\//g,"-")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};Ew()().set(t).from(e).save()},className:"px-4 py-2 text-sm font-semibold md:ml-2 w-full md:w-auto button-style",children:"In PDF"})]})]}),x&&(0,At.jsxs)("div",{className:"flex md:flex-row gap-8 justify-center items-center my-4",children:[(0,At.jsxs)("h3",{className:"text-lg my-2 border-b text-gray-50",children:["D\u01b0\u01a1ng ",(0,At.jsx)("b",{children:x.solarDate})]}),(0,At.jsxs)("h3",{className:"text-lg my-2 border-b text-gray-50",children:["\xc2m ",(0,At.jsx)("b",{children:x.lunarDate})]})]}),(0,At.jsx)("div",{id:"print-content",className:"space-y-4 relative z-30",children:j&&x&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(lN,{dayDetails:x,nguHanhColors:K}),(0,At.jsxs)("div",{className:"p-3 md:p-4 bg-gray-800 rounded-lg",children:[(0,At.jsxs)("div",{className:"grid gap-3 md:gap-4 "+(P?"grid-cols-2 md:grid-cols-4":"grid-cols-1 md:grid-cols-3"),children:[P&&(0,At.jsx)(AN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y}),(0,At.jsx)(gN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y}),(0,At.jsx)(pN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y}),(0,At.jsx)(fN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3 md:gap-4 mt-4",children:[(0,At.jsx)(xN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y}),(0,At.jsx)(vN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,truongSinhMap:PN,analyzeThapThan:J,analyzeTruongSinh:Y})]})]}),(0,At.jsxs)("div",{className:"relative z-30",children:[(0,At.jsx)(RN,{dayDetails:x,nguHanhAmDuong:FN,SINH:G,KHAC:q,analyzeNguHanhTuongSinh:e=>{const t={"M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim",Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c"},n=[],r=[],s=P?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"];(P?e:e.slice(1)).forEach(((e,t)=>{const[n]=e.split(" ");r.push({tru:s[t],can:n,nguHanh:FN.can[n].nguHanh})}));const i=new Set;return r.forEach((e=>{i.add(e.nguHanh)})),r.forEach(((e,s)=>{var a;const o=t[e.nguHanh],l=null===(a=Object.entries(t).find((t=>{let[n,r]=t;return r===e.nguHanh})))||void 0===a?void 0:a[0],c=r.filter((e=>e.nguHanh===o)).map((e=>`${e.tru} (${e.can})`)),u=r.filter((e=>e.nguHanh===l)).map((e=>`${e.tru} (${e.can})`));n.push({tru:e.tru,can:e.can,hanh:e.nguHanh,sinhRa:o,duocSinh:l,sinhRaList:c,duocSinhList:u,isSinhRaExists:i.has(o),isDuocSinhExists:i.has(l)})})),n},analyzeNguHanhTuongKhac:e=>{const t={"M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim",Kim:"M\u1ed9c"},n=[],r=[],s=P?["Gi\u1edd","Ng\xe0y","Th\xe1ng","N\u0103m"]:["Ng\xe0y","Th\xe1ng","N\u0103m"];(P?e:e.slice(1)).forEach(((e,t)=>{const[n]=e.split(" ");r.push({tru:s[t],can:n,nguHanh:FN.can[n].nguHanh})}));const i=new Set;return r.forEach((e=>{i.add(e.nguHanh)})),r.forEach(((e,s)=>{var a;const o=t[e.nguHanh],l=null===(a=Object.entries(t).find((t=>{let[n,r]=t;return r===e.nguHanh})))||void 0===a?void 0:a[0],c=r.filter((e=>e.nguHanh===o)).map((e=>`${e.tru} (${e.can})`)),u=r.filter((e=>e.nguHanh===l)).map((e=>`${e.tru} (${e.can})`));n.push({tru:e.tru,can:e.can,hanh:e.nguHanh,khac:o,biKhac:l,khacList:c,biKhacList:u,isKhacExists:i.has(o),isBiKhacExists:i.has(l)})})),n},includeHourPillar:P}),(0,At.jsx)(nN,{dayDetails:x,thienCanQuyNhan:IN,thienCanThienLoc:LN,includeHourPillar:P}),(0,At.jsx)(ON,{truongSinhResults:Z,countTruongSinhStates:e=>{if(!e||!Array.isArray(e))return{"Tr\u01b0\u1eddng Sinh":{count:0,totalScore:0},"M\u1ed9c D\u1ee5c":{count:0,totalScore:0},"Quan \u0110\u1edbi":{count:0,totalScore:0},"L\xe2m Quan":{count:0,totalScore:0},"\u0110\u1ebf V\u01b0\u1ee3ng":{count:0,totalScore:0},Suy:{count:0,totalScore:0},"B\u1ec7nh":{count:0,totalScore:0},"T\u1eed":{count:0,totalScore:0},"M\u1ed9":{count:0,totalScore:0},"Tuy\u1ec7t":{count:0,totalScore:0},Thai:{count:0,totalScore:0},"D\u01b0\u1ee1ng":{count:0,totalScore:0}};const t={"Tr\u01b0\u1eddng Sinh":{count:0,totalScore:0},"M\u1ed9c D\u1ee5c":{count:0,totalScore:0},"Quan \u0110\u1edbi":{count:0,totalScore:0},"L\xe2m Quan":{count:0,totalScore:0},"\u0110\u1ebf V\u01b0\u1ee3ng":{count:0,totalScore:0},Suy:{count:0,totalScore:0},"B\u1ec7nh":{count:0,totalScore:0},"T\u1eed":{count:0,totalScore:0},"M\u1ed9":{count:0,totalScore:0},"Tuy\u1ec7t":{count:0,totalScore:0},Thai:{count:0,totalScore:0},"D\u01b0\u1ee1ng":{count:0,totalScore:0}};return e.forEach((e=>{e&&e.name&&t.hasOwnProperty(e.name)&&(t[e.name].count++,t[e.name].totalScore+=e.score||0)})),t},nguHanhColors:K,truPosition:0}),(0,At.jsx)(rN,{dayDetails:x,countNguHanh:e=>{const t={"M\u1ed9c":0,"H\u1ecfa":0,"Th\u1ed5":0,Kim:0,"Th\u1ee7y":0};return(P?e:e.slice(1)).forEach((e=>{const[n,r]=e.split(" ");t[DN[n]]++;X(r).forEach((e=>{t[DN[e]]++}))})),t},getTanCanChi:X,canNguHanh:DN,includeHourPillar:P,onNguHanhStats:R}),(0,At.jsx)(tN,{dayDetails:x,analyzeThapThan:J,truongSinhMap:PN,getTanCanChi:X,includeHourPillar:P}),(0,At.jsx)($N,{dayDetails:x,nguHanhAmDuong:FN,onDaiVanData:D,birthHour:w}),(0,At.jsx)(mN,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,analyzeThapThan:J,nhatChuResult:T,includeHourPillar:P,onCachCucChange:H}),(0,At.jsx)(ij,{dayDetails:x,nguHanhAmDuong:FN,tanCanMapping:kN,analyzeThapThan:J,includeHourPillar:P}),(0,At.jsx)(tj,{canNgay:x.canChi[0].split(" ")[0],chiThang:x.canChi[1].split(" ")[1],nguHanhAmDuong:FN,onResultChange:e=>{"object"===typeof e&&null!==e?(S(e.vuongSuy),E(Array.isArray(e.dungThan)?e.dungThan.join(", "):e.dungThan||"")):S(e)}}),(0,At.jsx)(rj,{className:"bang-yeu-to-vuong-can-ngay",canNgay:x.canChi[0].split(" ")[0],chiThang:x.canChi[1].split(" ")[1],canChiArray:P?[x.currentCanChiHour,x.canChi[0],x.canChi[1],x.canChi[2]]:[x.canChi[0],x.canChi[1],x.canChi[2]],nguHanhAmDuong:FN,truongSinhMap:PN,analyzeThapThan:J,onResultChange:e=>{M(e)}}),null!==T&&null!==B&&(0,At.jsxs)("div",{className:"mt-8 p-4 bg-gray-800 rounded-lg shadow",children:[(0,At.jsx)("h3",{className:"text-xl font-bold text-gray-200 mb-4",children:"K\u1ebft Qu\u1ea3 Ph\xe2n T\xedch"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"p-4 border-b border-gray-600 rounded-lg bg-gray-900",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-400 mb-2",children:"Nh\u1eadt Ch\u1ee7"}),(0,At.jsx)("p",{className:T?"text-green-600":"text-red-600",children:T?"V\u01b0\u1ee3ng":"Suy"})]}),(0,At.jsxs)("div",{className:"p-4 border-b border-gray-600 rounded-lg bg-gray-900",children:[(0,At.jsx)("h4",{className:"font-semibold text-gray-400 mb-2",children:"Can Ng\xe0y"}),(0,At.jsx)("p",{className:B?"text-green-600":"text-red-600",children:B?"V\u01b0\u1ee3ng":"Suy"})]}),(0,At.jsx)("div",{className:"p-4 border-b border-gray-600 rounded-lg bg-gray-900 flex justify-center items-center",children:k?(0,At.jsx)("h4",{className:"font-semibold text-gray-400 cursor-pointer p-4",onClick:()=>L(!1),children:"\u0110\xf3ng"}):(0,At.jsx)("h4",{className:"font-semibold text-gray-400 cursor-pointer p-4",onClick:()=>L(!0),children:"Xem k\u1ebft qu\u1ea3"})})]})]}),k&&(0,At.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6 mt-4",children:[(0,At.jsx)(uj,{nhatChuResult:T,canNgayResult:B,dungThan:_,daiVanData:I,dayDetails:x,tinhTinhNhatChu:XN,goiYDungThan:sj,NGU_HANH_COLOR:yN,nguHanhAmDuong:FN,currentBirthYear:ne,getTanCanChi:X,nguHanhStats:U,includeHourPillar:P,analyzeTruongSinh:Y,cachCucDacBiet:O,analyzeThapThan:J}),(0,At.jsx)("div",{className:"text-center text-gray-500 text-sm cursor-pointer py-2 mt-4",onClick:()=>L(!1),children:"\u0110\xf3ng"})]})]})]})})]})},bj=()=>{Gb("battu");const{userStars:e,currentUser:n,isEmailVerified:r}=Aw(),s=n&&r,{pageConfig:i,countdownInfo:a,cancelCountdown:o,skipCountdownAndDeductNow:l}=pw("battu"),[c,u]=(0,t.useState)(!1);if((0,t.useEffect)((()=>()=>{a.isCountingDown&&o()}),[a.isCountingDown,o]),(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a.isCountingDown&&l()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[a.isCountingDown,l]),s&&e<=0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||t!==rw)return(0,At.jsx)(Sw,{pageName:"B\xe1t T\u1ef1"})}return(0,At.jsxs)("div",{className:"container mx-auto px-4 py-4 relative z-40",children:[c&&(0,At.jsxs)("div",{className:"fixed z-50 w-full md:w-auto top-20 left-1/2 transform -translate-x-1/2 bg-green-600/90 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-3",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("span",{className:"text-sm font-medium",children:"\u0110\xe3 t\u1ef1 \u0111\u1ed9ng thi\u1ebft l\u1eadp ng\xe0y sinh t\u1eeb th\xf4ng tin c\xe1 nh\xe2n"})}),(0,At.jsx)("button",{onClick:()=>u(!1),className:"text-white hover:text-gray-200",children:(0,At.jsx)(ww,{className:"h-4 w-4"})})]}),(0,At.jsx)("h4",{className:"text-2xl font-bold text-gray-100 mb-8",children:"Xem L\xe1 S\u1ed1 B\xe1t T\u1ef1"}),(0,At.jsx)(yj,{onAutoLoadNotification:e=>{u(e)}})]})};function wj(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M10.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L12.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z",clipRule:"evenodd"}),t.createElement("path",{fillRule:"evenodd",d:"M4.72 11.47a.75.75 0 0 0 0 1.06l7.5 7.5a.75.75 0 1 0 1.06-1.06L6.31 12l6.97-6.97a.75.75 0 0 0-1.06-1.06l-7.5 7.5Z",clipRule:"evenodd"}))}const Nj=t.forwardRef(wj);function jj(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const Cj=t.forwardRef(jj);function Tj(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const Sj=t.forwardRef(Tj);function _j(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M13.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L11.69 12 4.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}),t.createElement("path",{fillRule:"evenodd",d:"M19.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06L17.69 12l-6.97-6.97a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const Ej=t.forwardRef(_j);function Bj(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const Mj=t.forwardRef(Bj),kj="w-full relative min-h-screen bg-cover bg-top bg-no-repeat",Lj="max-w-[480px] mx-auto pb-10 text-white relative",Ij="md:relative absolute top-[55%] left-4 right-4 md:w-[100%] w-auto p-2 bg-red-900/90 rounded-lg border border-red-500 text-white shadow-lg z-10",Dj="flex items-center gap-2 text-xs py-1",Pj="text-yellow-400 font-bold",Fj="flex flex-col items-center gap-4",Uj="text-base font-semibold text-center w-full relative",Rj="text-green-400",Oj="text-white",Hj="mx-1 text-xs text-gray-500",Qj="relative cursor-move z-1 w-full max-w-[100%] aspect-square touch-none select-none",zj="flex gap-2 relative z-10 w-full justify-between",Vj="flex gap-2 relative z-10 grid grid-cols-4 grid-rows-2 w-full",Kj={PRIMARY:"px-3 py-1 bg-green-600 text-white rounded md:hover:bg-green-700 transition-colors button-style",SECONDARY:"p-1 px-2 bg-gray-600 text-white rounded md:hover:bg-gray-700 transition-colors flex items-center justify-center gap-1 flex-1",ZOOM:"p-1 px-1 text-white rounded-full md:hover:bg-gray-700 transition-colors flex items-center justify-center gap-1"},Gj="px-3 h-10 rounded border border-gray-300 w-20 text-black flex-1",qj="flex gap-2 text-black md:mx-4 flex-1 w-full",Wj="w-6 h-6 ",$j={CONTAINER:"max-w-4xl mx-auto md:p-4 p-2 relative z-20",HEADER:{WRAPPER:"flex justify-center items-center",CONTROLS:"flex items-center gap-2",SELECT_GROUP:"flex items-center gap-3 my-2 text-black flex-1",SELECT:"px-2 py-1 border rounded flex-1",MONTH_TITLE:"text-xl text-white font-bold mb-4 border-b border-green-600 pb-2 bl-month flex justify-between items-center gap-2 w-full"},BUTTON:{NAV:"!px-3 py-1 text-white rounded button-style-blue",ICON:"h-5 w-5"},CALENDAR:{GRID:"grid grid-cols-7 gap-0 mb-4 w-full",WEEKDAY:"text-center font-bold p-2 text-gray-500",DAY:{BASE:"border border-gray-700 md:p-2 py-1 md:min-h-[100px] cursor-pointer relative bg-transparent text-white",TODAY:"border-2 border-white",SELECTED:"bg-green-50 border-2 border-green-500",HOVER:"hover:bg-white/10",EMPTY:"border border-gray-700 p-2 md:min-h-[100px] bg-transparent"},DATE:{SOLAR:"font-bold md:text-lg text-sm",LUNAR:{MOBILE:"md:hidden block text-xs text-purple-300",DESKTOP:"hidden md:block",DAY:"text-xs text-purple-300",MONTH:"text-xs text-gray-500",YEAR:"text-xs text-gray-500"}}},DETAILS:{WRAPPER:"rounded-lg p-4 box-style",TITLE:"text-xl font-bold mb-4 pb-2",GRID:"grid grid-cols-1 md:grid-cols-2 gap-4 p-6",LABEL:"font-bold bg-blue-50 text-blue-500 px-2 py-1 rounded bg-gradient-to-r-2",LABEL2:"font-bold text-gray-400",SELECT:"w-full md:w-auto px-3 py-4 md:py-2 border rounded text-sm mr-4 text-black"}},Xj=e=>{var n,r,s,i;let{month:a,year:o,currentDate:l,selectedDate:c,setSelectedDate:u,selectedBirthCanChi:d,selectedBirthDay:h,selectedBirthMonth:m,selectedBirthYear:A,setSelectedBirthDay:g,setSelectedBirthMonth:p,setSelectedBirthYear:f,getLunarDate:x,getCanChi:v,getDaysInMonth:y,getFirstDayOfMonth:b,canNguHanh:w,thienCanThienLoc:N,thienCanQuyNhan:j,CALENDAR_APP:C,calculateMoonPhase:T,getMoonPhaseEmoji:S}=e;const[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(""),[k,L]=(0,t.useState)(!0),[I,D]=(0,t.useState)(!1),P={"Quy\u1ec1n l\u1ef1c":["T.S\xe1t","C.Quan"],"H\u1ed7 tr\u1ee3":["T.\u1ea4n","C.\u1ea4n"],"Th\xe2n H\u1eefu":["T.Ki\xean","K.T\xe0i"],"T\xe0i L\u1ed9c":["T.T\xe0i","C.T\xe0i"],"T\xe0i n\u0103ng":["T.Th\u1ea7n","T.Quan"],"Sinh con":["T.S\xe1t","C.Quan"]},F=e=>{var t;return!!_&&(null===(t=P[_])||void 0===t?void 0:t.includes(e))},U=e=>{if(!e)return"";return["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"].indexOf(e)%2===0?"d\u01b0\u01a1ng":"\xe2m"},R=(e,t)=>{var n,r,s,i;if(!e||!t)return"";const a=w[e],o=w[t],l=U(e),c=U(t);if(e===t)return"T.Ki\xean";if(a===o)return l===c?"T.Ki\xean":"K.T\xe0i";if(null!==(n={Kim:["Th\u1ee7y"],"M\u1ed9c":["H\u1ecfa"],"Th\u1ee7y":["M\u1ed9c"],"H\u1ecfa":["Th\u1ed5"],"Th\u1ed5":["Kim"]}[o])&&void 0!==n&&n.includes(a))return l===c?"T.\u1ea4n":"C.\u1ea4n";if(null!==(r={Kim:["Th\u1ee7y"],"M\u1ed9c":["H\u1ecfa"],"Th\u1ee7y":["M\u1ed9c"],"H\u1ecfa":["Th\u1ed5"],"Th\u1ed5":["Kim"]}[a])&&void 0!==r&&r.includes(o))return l===c?"T.Th\u1ea7n":"T.Quan";if(null!==(s={Kim:["M\u1ed9c"],"M\u1ed9c":["Th\u1ed5"],"Th\u1ee7y":["H\u1ecfa"],"H\u1ecfa":["Kim"],"Th\u1ed5":["Th\u1ee7y"]}[a])&&void 0!==s&&s.includes(o))return l===c?"T.T\xe0i":"C.T\xe0i";return null!==(i={Kim:["H\u1ecfa"],"M\u1ed9c":["Kim"],"Th\u1ee7y":["Th\u1ed5"],"H\u1ecfa":["Th\u1ee7y"],"Th\u1ed5":["M\u1ed9c"]}[a])&&void 0!==i&&i.includes(o)?l===c?"T.S\xe1t":"C.Quan":""},O=()=>{if(!_)return[];const e=y(a,o),t=[];for(let r=1;r<=e;r++){var n;new Date(o,a-1,r);const e=x(r,a,o),s=v(e)[0].split(" ")[0],i=R(null===(n=d[0])||void 0===n?void 0:n.split(" ")[0],s);F(i)&&t.push({day:r,thapThan:i,solarDate:`${r}/${a}/${o}`,lunarDate:`${e.day}/${e.month}${e.leap,""}/${e.year}`})}return t},H={"Quy\u1ec1n l\u1ef1c":{"T.S\xe1t":"Ng\xe0y Th\u1ea5t S\xe1t \u0111\u1ea1i di\u1ec7n cho quy\u1ec1n l\u1ef1c, \u0111\u1ecba v\u1ecb, th\u0103ng ch\u1ee9c nam.","C.Quan":"Ng\xe0y Ch\xednh Quan \u0111\u1ea1i di\u1ec7n cho quy\u1ec1n l\u1ef1c, \u0111\u1ecba v\u1ecb, th\u0103ng ch\u1ee9c n\u1eef."},"H\u1ed7 tr\u1ee3":{"T.\u1ea4n":"Ng\xe0y Thi\xean \u1ea4n \u0111\u1ea1i di\u1ec7n cho s\u1ef1 h\u1ed7 tr\u1ee3, gi\xfap \u0111\u1ee1 t\u1eeb ng\u01b0\u1eddi l\u1edbn tu\u1ed5i, c\u1ea5p tr\xean nam.","C.\u1ea4n":"Ng\xe0y Ch\xednh \u1ea4n \u0111\u1ea1i di\u1ec7n cho s\u1ef1 h\u1ed7 tr\u1ee3, gi\xfap \u0111\u1ee1 t\u1eeb ng\u01b0\u1eddi l\u1edbn tu\u1ed5i, c\u1ea5p tr\xean n\u1eef."},"Th\xe2n H\u1eefu":{"T.Ki\xean":"Ng\xe0y T\u1ef7 Ki\xean \u0111\u1ea1i di\u1ec7n cho quan h\u1ec7 b\u1ea1n b\xe8 th\xe2n thi\u1ebft, ng\u01b0\u1eddi th\xe2n ru\u1ed9t th\u1ecbt trong nh\xe0.","K.T\xe0i":"Ng\xe0y Ki\u1ebfp T\xe0i \u0111\u1ea1i di\u1ec7n cho quan h\u1ec7 b\u1ea1n b\xe8 x\xe3 giao, x\xe3 h\u1ed9i, \u0110\xe2y ng\xe0y c\u01b0\u1edbp ti\u1ec1n n\xean c\u1ea9n tr\u1ecdng."},"T\xe0i L\u1ed9c":{"T.T\xe0i":"Ng\xe0y Thi\xean T\xe0i \u0111\u1ea1i di\u1ec7n cho kho\u1ea3n ti\u1ec1n b\u1ea5t ng\u1edd, kh\xf4ng c\u1ed1 \u0111\u1ecbnh nh\u01b0 ti\u1ec1n th\u01b0\u1edfng, ti\u1ec1n \u0111\u1ea7u t\u01b0. Ch\u1ecdn ng\xe0y ki\u1ebfm ng\u01b0\u1eddi y\xeau.","C.T\xe0i":"Ng\xe0y Ch\xednh T\xe0i \u0111\u1ea1i di\u1ec7n cho nh\u1eefng kho\u1ea3n ti\u1ec1n mang t\xednh c\u1ed1 \u0111\u1ecbnh, \u0111\u1ec1u \u0111\u1eb7ng. Ch\u1ecdn ng\xe0y l\u1ea5y v\u1ee3."},"T\xe0i n\u0103ng":{"T.Th\u1ea7n":"Ng\xe0y Th\u1ef1c Th\u1ea7n \u0111\u1ea1i di\u1ec7n cho nh\u1eefng vi\u1ec7c mang t\xednh ch\u1ea5t t\u1ec9 m\u1ec9, vi m\xf4, ho\xe0n h\u1ea3o, c\u1ea7u to\xe0n.","T.Quan":"Ng\xe0y Th\u01b0\u01a1ng Quan \u0111\u1ea1i di\u1ec7n cho nh\u1eefng chuy\u1ec7n l\u1edbn, v\u0129 m\xf4, \u0111\u1ea1i s\u1ef1."},"Sinh con":{"T.S\xe1t":"Ng\xe0y quan h\u1ec7 sinh con trai (D\xe0nh cho Nam).","C.Quan":"Ng\xe0y quan h\u1ec7 sinh con g\xe1i (D\xe0nh cho Nam)."}},Q=(e,t)=>{var n;return!(!e||!t)&&(null===(n=j[e])||void 0===n?void 0:n.includes(t))},z=(e,t)=>{var n;return!(!e||!t)&&(null===(n=N[e])||void 0===n?void 0:n.includes(t))},V=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;const n=y(a,o),r=null===(e=d[0])||void 0===e?void 0:e.split(" ")[0],s=[];for(let i=1;i<=n;i++){const e=x(i,a,o),n=v(e)[0].split(" ")[1];"Qu\xfd Nh\xe2n"===t&&Q(r,n)&&s.push({solar:`${i}/${a}/${o}`,lunar:`${e.day}/${e.month}${e.leap,""}/${e.year}`,chi:n}),"Thi\u1ec7n L\u1ed9c"===t&&z(r,n)&&s.push({solar:`${i}/${a}/${o}`,lunar:`${e.day}/${e.month}${e.leap,""}/${e.year}`,chi:n})}return s};return(0,At.jsx)("div",{className:"grid grid-cols-1 md:gap-2 text-sm md:p-4 p-0",id:"tuTru",children:(0,At.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,At.jsxs)("div",{className:"text-white md:text-base text-sm font-semibold flex md:flex-row flex-col items-center gap-4",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:["Th\u1eadp Th\u1ea7n theo ng\xe0y sinh",(0,At.jsxs)("span",{className:"text-purple-300 pl-1",children:[null===(n=d[0])||void 0===n?void 0:n.split(" ")[0]," ",null===(r=d[0])||void 0===r?void 0:r.split(" ")[1]]})]}),(0,At.jsxs)("select",{value:_,onChange:e=>E(e.target.value),className:"bg-gray-800 text-white rounded px-2 py-1 outline-none md:ml-2 ml-0 font-normal text-sm w-full md:w-auto",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn v\u1ea5n \u0111\u1ec1"}),(0,At.jsx)("option",{value:"Quy\u1ec1n l\u1ef1c",children:"Quy\u1ec1n l\u1ef1c"}),(0,At.jsx)("option",{value:"H\u1ed7 tr\u1ee3",children:"H\u1ed7 tr\u1ee3"}),(0,At.jsx)("option",{value:"Th\xe2n H\u1eefu",children:"Th\xe2n H\u1eefu"}),(0,At.jsx)("option",{value:"T\xe0i L\u1ed9c",children:"T\xe0i L\u1ed9c"}),(0,At.jsx)("option",{value:"T\xe0i n\u0103ng",children:"T\xe0i n\u0103ng"}),(0,At.jsx)("option",{value:"Sinh con",children:"Sinh con"})]})]}),(0,At.jsxs)("div",{className:C.CALENDAR.GRID+" "+(k?"":"hidden"),children:[(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"CN"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T2"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T3"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T4"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T5"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T6"}),(0,At.jsx)("div",{className:C.CALENDAR.WEEKDAY,children:"T7"}),(()=>{var e;const t=y(a,o),n=b(a,o),r=[],s=null===(e=d[0])||void 0===e?void 0:e.split(" ")[0];for(let i=0;i<n;i++)r.push((0,At.jsx)("div",{className:C.CALENDAR.DAY.EMPTY},`empty-${i}`));for(let i=1;i<=t;i++){const e=new Date(o,a-1,i),t=x(i,a,o),n=i===l.getDate()&&a===l.getMonth()+1&&o===l.getFullYear(),d=c&&i===c.getDate()&&a===c.getMonth()+1&&o===c.getFullYear(),h=v(t),m=h[0].split(" ")[0],A=h[0].split(" ")[1],g=R(s,m),p=F(g),f=Q(s,A),y=z(s,A);let b="";"Q.Nh\xe2n"===B&&f&&(b="!bg-sky-400/20"),"T.L\u1ed9c"===B&&y&&(b="!bg-yellow-400/20"),!B&&f&&(b="!bg-sky-400/20"),!B&&y&&(b="!bg-yellow-400/20");const w=`${C.CALENDAR.DAY.BASE} \n                ${n?C.CALENDAR.DAY.TODAY:""} \n                ${d?C.CALENDAR.DAY.SELECTED:C.CALENDAR.DAY.HOVER}\n                ${p?"!bg-green-400/20":""}\n                ${b}`;r.push((0,At.jsxs)("div",{className:w,onClick:()=>u(e),children:[(0,At.jsx)("div",{className:C.CALENDAR.DATE.SOLAR,children:i}),(0,At.jsxs)("div",{className:C.CALENDAR.DATE.LUNAR.DAY+" hidden md:block",children:[t.day," ",(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",h[0],")"]})]}),(0,At.jsx)("div",{className:"text-xs mt-1 "+(p?"text-green-300":"text-gray-400"),children:g||"-"}),f&&(0,At.jsx)("div",{className:"text-sky-400 text-[10px]",children:"Q.Nh\xe2n"}),y&&(0,At.jsx)("div",{className:"text-yellow-400 text-[10px]",children:"T.L\u1ed9c"})]},i))}return r})()]}),(0,At.jsxs)("div",{className:"text-center text-sm text-gray-400 underline cursor-pointer",onClick:()=>D(!I),children:[" ",I?"Xem chi ti\u1ebft":"\u1ea8n chi ti\u1ebft"]}),!I&&(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"text-white md:text-base text-sm px-2 md:px-0 w-full",id:"thongThapThan",children:[(!B||"Qu\xfd Nh\xe2n"===B)&&(0,At.jsx)("div",{className:"w-full text-left text-xs mb-4 bg-gray-900 border-b border-gray-700 rounded-lg p-4",children:V("Qu\xfd Nh\xe2n").length>0&&(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"font-semibold mb-3 text-base text-blue-400",children:["Ng\xe0y Qu\xfd Nh\xe2n - th\xe1ng ",a,"/",o,":"]}),(0,At.jsx)("div",{className:"text-blue-200 my-3",children:"Ng\xe0y g\u1eb7p \u0111\u01b0\u1ee3c ng\u01b0\u1eddi gi\xfap \u0111\u1ee1, qu\xfd nh\xe2n ph\xf9 tr\u1ee3."}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mt-4 text-sm justify-center",children:V("Qu\xfd Nh\xe2n").map(((e,t)=>(0,At.jsxs)("div",{className:"rounded px-2 py-1 border border-blue-400 text-blue-200 bg-white/10",children:[(0,At.jsxs)("span",{className:"capitalize",children:[" ",e.solar.split("/")[0]]}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",e.chi,")"]})]},t)))})]})}),(!B||"Thi\u1ec7n L\u1ed9c"===B)&&(0,At.jsx)("div",{className:"w-full text-left text-xs mb-4 bg-gray-900 border-b border-gray-700 rounded-lg p-4",children:V("Thi\u1ec7n L\u1ed9c").length>0&&(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:"font-semibold mb-3 text-base text-yellow-400",children:["Ng\xe0y Thi\u1ec7n L\u1ed9c - th\xe1ng ",a,"/",o,":"]}),(0,At.jsx)("div",{className:"text-yellow-200 my-3",children:"Ng\xe0y g\u1eb7p thu\u1eadn l\u1ee3i v\u1ec1 t\xe0i l\u1ed9c, ti\u1ec1n b\u1ea1c, may m\u1eafn."}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mt-4 text-sm justify-center",children:V("Thi\u1ec7n L\u1ed9c").map(((e,t)=>(0,At.jsxs)("div",{className:"rounded px-2 py-1 border border-yellow-400 text-yellow-200 bg-white/10",children:[(0,At.jsxs)("span",{className:"capitalize",children:[" ",e.solar.split("/")[0]]}),(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",e.chi,")"]})]},t)))})]})}),_?(0,At.jsxs)("div",{className:"flex flex-col gap-2 w-full px-2 md:px-0",children:[(0,At.jsxs)("div",{className:"font-semibold text-green-300 mb-2",children:["Ng\xe0y ",_," - Th\xe1ng ",a,"/",o]}),(0,At.jsx)("div",{className:"grid grid-cols-2 gap-2 text-sm w-full",children:O().map(((e,t)=>(0,At.jsxs)("div",{className:"text-white items-center justify-center px-4 py-2 bg-green-900/30 rounded-lg",children:[(0,At.jsxs)("span",{className:"text-green-400",children:[e.thapThan," - "]}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",e.solarDate.split("/")[0]]})]},t)))}),(0,At.jsxs)("div",{id:"noteThapThan",className:"mt-4 text-sm",children:[_&&O().length>0&&(0,At.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-2 text-left",children:(0,At.jsx)("div",{className:"text-gray-300 space-y-2",children:(0,At.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,At.jsx)("div",{className:"text-white bg-green-700/30 rounded-lg p-3",children:H[_][null===(s=O()[1])||void 0===s?void 0:s.thapThan]}),(0,At.jsx)("div",{className:"text-white bg-green-700/20 rounded-lg p-3",children:H[_][null===(i=O()[0])||void 0===i?void 0:i.thapThan]})]})})}),(0,At.jsxs)("div",{className:"text-gray-300 text-sm text-left bg-red-600/20 rounded-lg p-5 mt-4",id:"noteMore",children:[(0,At.jsx)("div",{className:"mb-1",children:(0,At.jsx)("b",{children:"N\u1ebfu b\u1eaft bu\u1ed9c d\xf9ng Ng\xe0y X\u1ea5u:"})}),(0,At.jsxs)("ul",{className:"list-disc pl-5",children:[(0,At.jsx)("li",{children:"Ch\u1ecdn gi\u1edd l\xe0 d\u1ee5ng th\u1ea7n."}),(0,At.jsx)("li",{children:"N\u1ebfu ng\xe0y \u0111\xf3 ho\xe0n to\xe0n x\u1ea5u, h\xe3y \u0111\u1ec3 cho ng\u01b0\u1eddi kia b\u1eaft \u0111\u1ea7u li\xean l\u1ea1c tr\u01b0\u1edbc."})]}),(0,At.jsx)("div",{className:"mt-2 mb-1",children:(0,At.jsx)("b",{children:"L\u01b0u \xfd:"})}),(0,At.jsxs)("ul",{className:"list-disc pl-5",children:[(0,At.jsx)("li",{children:"Tr\xe1nh \u0111\xe0m ph\xe1n v\u1edbi ng\u01b0\u1eddi m\xe0 nh\xe0 h\u1ecd \u0111ang c\xf3 Th\xe1i Tu\u1ebf chi\u1ebfu \u0111\u1ebfn t\u1ecda. N\u1ebfu d\xf9ng cho b\u1ea3n th\xe2n, c\u1ed1 g\u1eafng d\xf9ng Th\xe1i Tu\u1ebf Th\xe1ng chi\u1ebfu \u0111\u1ebfn t\u1ecda."}),(0,At.jsx)("li",{children:"N\u1ebfu \u0111\u1ed1i t\xe1c kh\xf3 ch\u1ecbu, g\xe2y r\u1eafc r\u1ed1i, h\xe3y s\u1eafp x\u1ebfp h\u1ecd nh\xecn v\u1ec1 h\u01b0\u1edbng Di\xean Ni\xean theo tu\u1ed5i c\u1ee7a h\u1ecd."})]})]})]})]}):(0,At.jsx)("div",{className:"text-gray-400 text-sm pt-4"})]})})]})})};function Yj(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143Z",clipRule:"evenodd"}))}const Jj=t.forwardRef(Yj),Zj=()=>(0,At.jsxs)("div",{className:"text-white text-sm md:text-base max-w-xl mx-auto p-2 h-[80vh] overflow-y-auto",children:[(0,At.jsx)("h2",{className:"text-yellow-400 font-bold text-lg mb-2",children:"1. Nh\u1ea5t Qu\xe1i Thu\u1ea7n Thanh"}),(0,At.jsxs)("div",{className:"mb-2",children:["C\xf9ng qu\xe1i l\xe0 s\u1ed1 h\xe0nh kh\xf4ng c\u1ea7n xem x\xe9t m\u1ed1i quan h\u1ec7 ng\u0169 h\xe0nh c\xe1c tr\u1ee5. Tr\u1ea1ng th\xe1i C\xf9ng qu\xe1i xu\u1ea5t hi\u1ec7n khi 4 s\u1ed1 qu\xe1i h\xe0nh c\u1ee7a t\u1ee9 tr\u1ee5 \u0111\u1ec1u ",(0,At.jsx)("b",{children:"c\xf9ng 1 gi\xe1 tr\u1ecb"}),(0,At.jsx)("br",{}),"H\u1ee3p cho c\xe1c s\u1ef1 ki\u1ec7n ng\u1eafn h\u1ea1n nh\u01b0 Trung b\xe0y, \u0110\u1ea5u gi\xe1, ..."]}),(0,At.jsxs)("table",{className:"mb-2 border border-gray-500 w-full text-center",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-700",children:[(0,At.jsx)("th",{children:"Ng\xe0y"}),(0,At.jsx)("th",{children:"Gi\u1edd"}),(0,At.jsx)("th",{children:"Th\xe1ng"}),(0,At.jsx)("th",{children:"N\u0103m"}),(0,At.jsx)("th",{children:".."})]})}),(0,At.jsxs)("tbody",{children:[(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"H\xe0nh"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Canh"}),(0,At.jsx)("td",{children:"Nh\xe2m"}),(0,At.jsx)("td",{children:"\u1ea4t"}),(0,At.jsx)("td",{children:"\u1ea4t"}),(0,At.jsx)("td",{children:"Can"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"D\u1ea7n"}),(0,At.jsx)("td",{children:"D\u1eadu"}),(0,At.jsx)("td",{children:"D\u1eadu"}),(0,At.jsx)("td",{children:"Chi"})]})]})]}),(0,At.jsx)("h2",{className:"text-yellow-400 font-bold text-lg mb-2",children:"2. H\xe0 \u0110\u1ed3"}),(0,At.jsxs)("div",{className:"mb-2",children:["Trong H\xe0 \u0110\u1ed3 lu\xf4n c\xf3 1 s\u1ed1 \xc2m (n\u1eef) v\xe0 1 s\u1ed1 D\u01b0\u01a1ng (nam) n\xean r\u1ea5t t\u1ed1t cho ng\xe0y c\xf3 c\xe1c m\u1ed1c n\xe0y \u0111\u01b0\u1ee3c cho l\xe0 t\u1ed1t h\u01a1n khi t\u1ee9 tr\u1ee5 c\u1ee7a ng\xe0y \u0111\xf3 c\xe2n b\u1eb1ng c\xf3 \xc2m - D\u01b0\u01a1ng",(0,At.jsx)("br",{}),"H\u1ee3p cho ",(0,At.jsx)("b",{children:"C\u1ea7u t\u1ef1, Khai tr\u01b0\u01a1ng, K\xedch ho\u1ea1t Th\u1ee7y ph\xe1p phong th\u1ee7y, chuy\u1ec3n gi\u01b0\u1eddng - b\u1ebfp"})]}),(0,At.jsxs)("div",{className:"mb-2",children:["C\xe1c c\u1eb7p s\u1ed1 h\xe0 \u0110\u1ed3:",(0,At.jsx)("br",{}),(0,At.jsx)("span",{className:"text-blue-400",children:"1 - 6 - Th\u1ee7y (\xc2m)"})," \xa0 ",(0,At.jsx)("span",{className:"text-red-400",children:"2 - 7 - H\u1ecfa (\xc2m)"}),(0,At.jsx)("br",{}),(0,At.jsx)("span",{className:"text-green-400",children:"3 - 8 - M\u1ed9c (D\u01b0\u01a1ng)"})," \xa0 ",(0,At.jsx)("span",{className:"text-yellow-400",children:"4 - 9 - Kim (D\u01b0\u01a1ng)"})]}),(0,At.jsxs)("table",{className:"mb-2 border border-gray-500 w-full text-center",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-700",children:[(0,At.jsx)("th",{children:"Ng\xe0y"}),(0,At.jsx)("th",{children:"Gi\u1edd"}),(0,At.jsx)("th",{children:"Th\xe1ng"}),(0,At.jsx)("th",{children:"N\u0103m"}),(0,At.jsx)("th",{children:".."})]})}),(0,At.jsxs)("tbody",{children:[(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"1"}),(0,At.jsx)("td",{children:"1"}),(0,At.jsx)("td",{children:"6"}),(0,At.jsx)("td",{children:"6"}),(0,At.jsx)("td",{children:"H\xe0nh"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"T\xe2n"}),(0,At.jsx)("td",{children:"Nh\xe2m"}),(0,At.jsx)("td",{children:"Nh\xe2m"}),(0,At.jsx)("td",{children:"B\xednh"}),(0,At.jsx)("td",{children:"Can"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"S\u1eedu"}),(0,At.jsx)("td",{children:"Th\xecn"}),(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"Chi"})]})]})]}),(0,At.jsx)("h2",{className:"text-yellow-400 font-bold text-lg mb-2",children:"3. H\u1ee3p Th\u1eadp"}),(0,At.jsxs)("div",{className:"mb-2",children:["Khi 4 s\u1ed1 qu\xe1i h\xe0nh c\u1ee7a t\u1ee9 tr\u1ee5 k\u1ebft h\u1ee3p th\xe0nh c\u1eb7p s\u1ed1 t\u1ed5ng 10. v\xed d\u1ee5 4949, 4449, ... kh\xf4ng \u0111\u01b0\u1ee3c 6473, 3791, ... (Tr\xe1nh 7 v\xe0 3)",(0,At.jsx)("br",{}),"H\u1ee3p cho ",(0,At.jsx)("b",{children:"Ch\u1eefa b\u1ec7nh, ph\u1eabu thu\u1eadt, nh\u1eadp tr\u1ea1ch, chuy\u1ec3n gi\u01b0\u1eddng, chuy\u1ec3n b\u1ebfp, d\u1eddi c\u1eeda"})]}),(0,At.jsxs)("table",{className:"mb-2 border border-gray-500 w-full text-center",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-700",children:[(0,At.jsx)("th",{children:"Ng\xe0y"}),(0,At.jsx)("th",{children:"Gi\u1edd"}),(0,At.jsx)("th",{children:"Th\xe1ng"}),(0,At.jsx)("th",{children:"N\u0103m"}),(0,At.jsx)("th",{children:".."})]})}),(0,At.jsxs)("tbody",{children:[(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"7"}),(0,At.jsx)("td",{children:"7"}),(0,At.jsx)("td",{children:"3"}),(0,At.jsx)("td",{children:"3"}),(0,At.jsx)("td",{children:"H\xe0nh"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Gi\xe1p"}),(0,At.jsx)("td",{children:"Gi\xe1p"}),(0,At.jsx)("td",{children:"Gi\xe1p"}),(0,At.jsx)("td",{children:"Gi\xe1p"}),(0,At.jsx)("td",{children:"Can"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"Th\xe2n"}),(0,At.jsx)("td",{children:"Th\xe2n"}),(0,At.jsx)("td",{children:"Chi"})]})]})]}),(0,At.jsx)("h2",{className:"text-yellow-400 font-bold text-lg mb-2",children:"4. Ng\u0169 H\xe0nh Sinh Kh\u1eafc"}),(0,At.jsxs)("div",{className:"mb-2",children:["Sinh Nh\u1eadp - Kh\u1eafc Nh\u1eadp l\xe0 t\u1ed1t (Sinh cho Ng\xe0y v\xe0 Kh\u1eafc v\xe0o ng\xe0y)",(0,At.jsx)("br",{}),"Sinh Xu\u1ea5t - Kh\u1eafc Xu\u1ea5t l\xe0 X\u1ea5u (Ng\xe0y sinh cho v\xe0 Ng\xe0y kh\u1eafc cho)"]}),(0,At.jsxs)("table",{className:"mb-2 border border-gray-500 w-full text-center",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-700",children:[(0,At.jsx)("th",{children:"Ng\xe0y"}),(0,At.jsx)("th",{children:"Gi\u1edd"}),(0,At.jsx)("th",{children:"Th\xe1ng"}),(0,At.jsx)("th",{children:"N\u0103m"}),(0,At.jsx)("th",{children:".."})]})}),(0,At.jsxs)("tbody",{children:[(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"6"}),(0,At.jsx)("td",{children:"1"}),(0,At.jsx)("td",{children:"4"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"H\xe0nh"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Th\u1ee7y"}),(0,At.jsx)("td",{children:"Th\u1ee7y"}),(0,At.jsx)("td",{children:"Kim"}),(0,At.jsx)("td",{children:"Kim"}),(0,At.jsx)("td",{children:"Note"})]})]})]}),(0,At.jsx)("h2",{className:"text-yellow-400 font-bold text-lg mb-2",children:"5. K\u1ebft h\u1ee3p qu\xe1i v\u1eadn"}),(0,At.jsxs)("div",{className:"mb-2",children:["Kh\xf4ng b\u1eaft bu\u1ed9c xem x\xe9t, nh\u01b0ng th\u1ecfa c\xe1c \u0111i\u1ec1u ki\u1ec7n nh\u01b0 C\xf9ng qu\xe1i, H\u1ee3p Th\u1eadp, Di\xean \u0111\u1ea3o ai tinh th\xec \u0111\u01b0\u1ee3c xem l\xe0 t\u1ed1t l\xe0nh",(0,At.jsx)("br",{}),"Di\xean \u0111\u1ea3o ai tinh (",(0,At.jsx)("span",{className:"text-green-400",children:"V\u1eadn 1 \u0111i v\u1edbi 3, 2-4, 6-8, 7-9"}),")"]}),(0,At.jsxs)("table",{className:"mb-2 border border-gray-500 w-full text-center",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-700",children:[(0,At.jsx)("th",{children:"Ng\xe0y"}),(0,At.jsx)("th",{children:"Gi\u1edd"}),(0,At.jsx)("th",{children:"Th\xe1ng"}),(0,At.jsx)("th",{children:"N\u0103m"}),(0,At.jsx)("th",{children:".."})]})}),(0,At.jsxs)("tbody",{children:[(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"3"}),(0,At.jsx)("td",{children:"1"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"9"}),(0,At.jsx)("td",{children:"H\xe0nh"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"B\xednh"}),(0,At.jsx)("td",{children:"Gi\xe1p"}),(0,At.jsx)("td",{children:"Canh"}),(0,At.jsx)("td",{children:"Nh\xe2m"}),(0,At.jsx)("td",{children:"Can"})]}),(0,At.jsxs)("tr",{children:[(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"Tu\u1ea5t"}),(0,At.jsx)("td",{children:"T\xed"}),(0,At.jsx)("td",{children:"Th\xe2n"}),(0,At.jsx)("td",{children:"Chi"})]})]})]})]}),eC=JSON.parse('{"h4":[{"name":"T\xfd","direct":"B\u1eafc","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":352.5,"end":7.5}]},{"huong":"B2"},{"hauThien":1},{"aiTinh":[{"son":9,"thuy":4,"hado":4}]}]},{"name":"Qu\xfd","direct":"B\u1eafc","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":7.5,"end":22.5}]},{"huong":"B3"},{"hauThien":1},{"aiTinh":[{"son":6,"thuy":8,"hado":1}]}]},{"name":"S\u1eedu","direct":"\u0110\xf4ng B\u1eafc","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":22.5,"end":37.5}]},{"huong":"\u0110B1"},{"hauThien":8},{"aiTinh":[{"son":6,"thuy":3,"hado":1}]}]},{"name":"C\u1ea5n","direct":"\u0110\xf4ng B\u1eafc","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":37.5,"end":52.5}]},{"huong":"\u0110B2"},{"hauThien":8},{"aiTinh":[{"son":2,"thuy":7,"hado":7}]}]},{"name":"D\u1ea7n","direct":"\u0110\xf4ng B\u1eafc","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":52.5,"end":67.5}]},{"huong":"\u0110B3"},{"hauThien":8},{"aiTinh":[{"son":8,"thuy":1,"hado":3}]}]},{"name":"Gi\xe1p","direct":"\u0110\xf4ng","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":67.5,"end":82.5}]},{"huong":"\u01101"},{"hauThien":3},{"aiTinh":[{"son":1,"thuy":8,"hado":6}]}]},{"name":"M\xe3o","direct":"\u0110\xf4ng","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":82.5,"end":97.5}]},{"huong":"\u01102"},{"hauThien":3},{"aiTinh":[{"son":7,"thuy":2,"hado":2}]}]},{"name":"\u1ea4t","direct":"\u0110\xf4ng","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":97.5,"end":112.5}]},{"huong":"\u01103"},{"hauThien":3},{"aiTinh":[{"son":3,"thuy":6,"hado":8}]}]},{"name":"Th\xecn","direct":"\u0110\xf4ng Nam","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":112.5,"end":127.5}]},{"huong":"\u0110N1"},{"hauThien":4},{"aiTinh":[{"son":9,"thuy":7,"hado":4}]}]},{"name":"T\u1ed1n","direct":"\u0110\xf4ng Nam","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":127.5,"end":142.5}]},{"huong":"\u0110N2"},{"hauThien":4},{"aiTinh":[{"son":6,"thuy":1,"hado":1}]}]},{"name":"T\u1ef5","direct":"\u0110\xf4ng Nam","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":142.5,"end":157.5}]},{"huong":"\u0110N3"},{"hauThien":4},{"aiTinh":[{"son":2,"thuy":4,"hado":7}]}]},{"name":"B\xednh","direct":"Nam","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":157.5,"end":172.5}]},{"huong":"N1"},{"hauThien":9},{"aiTinh":[{"son":4,"thuy":2,"hado":9}]}]},{"name":"Ng\u1ecd","direct":"Nam","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":172.5,"end":187.5}]},{"huong":"N2"},{"hauThien":9},{"aiTinh":[{"son":1,"thuy":6,"hado":6}]}]},{"name":"\u0110inh","direct":"Nam","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":187.5,"end":202.5}]},{"huong":"N3"},{"hauThien":9},{"aiTinh":[{"son":7,"thuy":9,"hado":2}]}]},{"name":"M\xf9i","direct":"T\xe2y","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":202.5,"end":217.5}]},{"huong":"TN1"},{"hauThien":2},{"aiTinh":[{"son":2,"thuy":9,"hado":7}]}]},{"name":"Kh\xf4n","direct":"T\xe2y","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":217.5,"end":232.5}]},{"huong":"TN2"},{"hauThien":2},{"aiTinh":[{"son":8,"thuy":3,"hado":3}]}]},{"name":"Th\xe2n","direct":"T\xe2y","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":232.5,"end":247.5}]},{"huong":"TN3"},{"hauThien":2},{"aiTinh":[{"son":4,"thuy":7,"hado":9}]}]},{"name":"Canh","direct":"T\xe2y","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":247.5,"end":262.5}]},{"huong":"T1"},{"hauThien":7},{"aiTinh":[{"son":7,"thuy":4,"hado":2}]}]},{"name":"D\u1eadu","direct":"T\xe2y","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":262.5,"end":277.5}]},{"huong":"T2"},{"hauThien":7},{"aiTinh":[{"son":3,"thuy":8,"hado":8}]}]},{"name":"T\xe2n","direct":"T\xe2y","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":277.5,"end":292.5}]},{"huong":"T3"},{"hauThien":7},{"aiTinh":[{"son":9,"thuy":2,"hado":4}]}]},{"name":"Tu\u1ea5t","direct":"T\xe2y B\u1eafc","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"\xc2m"},{"toaDo":[{"start":292.5,"end":307.5}]},{"huong":"TB1"},{"hauThien":6},{"aiTinh":[{"son":8,"thuy":6,"hado":3}]}]},{"name":"C\xe0n","direct":"T\xe2y B\u1eafc","infos":[{"nguyenLong":"Thi\xean"},{"nguyenLongColor":"#00EC08"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":307.5,"end":322.5}]},{"huong":"TB2"},{"hauThien":6},{"aiTinh":[{"son":4,"thuy":9,"hado":9}]}]},{"name":"H\u1ee3i","direct":"T\xe2y B\u1eafc","infos":[{"nguyenLong":"Nh\xe2n"},{"nguyenLongColor":"#FFFFFF"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":322.5,"end":337.5}]},{"huong":"TB3"},{"hauThien":6},{"aiTinh":[{"son":1,"thuy":3,"hado":6}]}]},{"name":"Nh\xe2m","direct":"B\u1eafc","infos":[{"nguyenLong":"\u0110\u1ecba"},{"nguyenLongColor":"#FFD48F"},{"thaiCuc":"D\u01b0\u01a1ng"},{"toaDo":[{"start":337.5,"end":352.5}]},{"huong":"B1"},{"hauThien":1},{"aiTinh":[{"son":3,"thuy":1,"hado":8}]}]}],"dS":[{"name":"H\u1ee3i - Nh\xe2m","ranges":[{"start":4.5,"end":7.5},{"start":352.5,"end":355.5}]},{"name":"Nh\xe2m - T\xfd","ranges":[{"start":7.5,"end":10.5},{"start":19.5,"end":22.5}]},{"name":"T\xfd - Qu\xfd","ranges":[{"start":22.5,"end":25.5},{"start":34.5,"end":37.5}]},{"name":"D\u1ea7n - Gi\xe1p","ranges":[{"start":37.5,"end":40.5},{"start":49.5,"end":52.5}]},{"name":"Gi\xe1p - M\xe3o","ranges":[{"start":52.5,"end":55.5},{"start":64.5,"end":67.5}]},{"name":"M\xe3o - \u1ea4t","ranges":[{"start":67.5,"end":70.5},{"start":79.5,"end":82.5}]},{"name":"D\u1ea7n - Gi\xe1p","ranges":[{"start":82.5,"end":85.5},{"start":94.5,"end":97.5}]},{"name":"Gi\xe1p - M\xe3o","ranges":[{"start":97.5,"end":100.5},{"start":110.5,"end":112.5}]},{"name":"M\xe3o - \u1ea4t","ranges":[{"start":112.5,"end":115.5},{"start":124.5,"end":127.5}]},{"name":"T\u1ef5 - B\xednh","ranges":[{"start":127.5,"end":130.5},{"start":139.5,"end":142.5}]},{"name":"B\xednh - Ng\u1ecd","ranges":[{"start":142.5,"end":145.5},{"start":154.5,"end":157.5}]},{"name":"Ng\u1ecd - \u0110inh","ranges":[{"start":157.5,"end":160.5},{"start":169.5,"end":172.5}]},{"name":"T\u1ef5 - B\xednh","ranges":[{"start":172.5,"end":175.5},{"start":184.5,"end":187.5}]},{"name":"B\xednh - Ng\u1ecd","ranges":[{"start":187.5,"end":190.5},{"start":200.5,"end":202.5}]},{"name":"Ng\u1ecd - \u0110inh","ranges":[{"start":202.5,"end":205.5},{"start":214.5,"end":217.5}]},{"name":"Th\xe2n - Canh","ranges":[{"start":217.5,"end":220.5},{"start":230.5,"end":232.5}]},{"name":"Canh - D\u1eadu","ranges":[{"start":232.5,"end":235.5},{"start":244.5,"end":247.5}]},{"name":"D\u1eadu - T\xe2n","ranges":[{"start":247.5,"end":250.5},{"start":260.5,"end":262.5}]},{"name":"Th\xe2n - Canh","ranges":[{"start":262.5,"end":265.5},{"start":274.5,"end":277.5}]},{"name":"Canh - D\u1eadu","ranges":[{"start":277.5,"end":280.5},{"start":290.5,"end":292.5}]},{"name":"D\u1eadu - T\xe2n","ranges":[{"start":292.5,"end":295.5},{"start":304.5,"end":307.5}]},{"name":"H\u1ee3i - Nh\xe2m","ranges":[{"start":307.5,"end":310.5},{"start":320.5,"end":322.5}]},{"name":"Nh\xe2m - T\xfd","ranges":[{"start":322.5,"end":325.5},{"start":334.5,"end":337.5}]},{"name":"T\xfd - Qu\xfd","ranges":[{"start":337.5,"end":340.5},{"start":349.5,"end":352.5}]}],"hh":[{"yearChi":["Th\xe2n","T\xfd","Th\xecn"],"toa":"Nam"},{"yearChi":["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t"],"toa":"B\u1eafc"},{"yearChi":["H\u1ee3i","M\xe3o","M\xf9i"],"toa":"T\xe2y"},{"yearChi":["T\u1ef5","D\u1eadu","S\u1eedu"],"toa":"\u0110\xf4ng"}],"Rx":[{"name":"B\u1eafc","ranges":[{"start":316,"end":45}]},{"name":"Nam","ranges":[{"start":134,"end":224}]},{"name":"\u0110\xf4ng","ranges":[{"start":44,"end":134}]},{"name":"T\xe2y","ranges":[{"start":255,"end":315}]}],"Gc":[{"name":"Trung Cung","ranges":[{"start":null,"end":null}],"hauthien":5},{"name":"T\xe2y B\u1eafc","ranges":[{"start":292.5,"end":337.5}],"hauthien":6},{"name":"T\xe2y","ranges":[{"start":247.5,"end":292.5}],"hauthien":7},{"name":"\u0110\xf4ng B\u1eafc","ranges":[{"start":22.5,"end":67.5}],"hauthien":8},{"name":"Nam","ranges":[{"start":157.5,"end":202.5}],"hauthien":9},{"name":"B\u1eafc ","ranges":[{"start":337.5,"end":22.5}],"hauthien":1},{"name":"T\xe2y Nam","ranges":[{"start":112.5,"end":157.5}],"hauthien":2},{"name":"\u0110\xf4ng","ranges":[{"start":67.5,"end":112.5}],"hauthien":3},{"name":"\u0110\xf4ng Nam","ranges":[{"start":127.5,"end":172.5}],"hauthien":4}],"VT":{"T\xfd":{"thaiTue":["Nh\xe2m","T\xfd"],"tuePha":["B\xednh","Ng\u1ecd"]},"S\u1eedu":{"thaiTue":["Qu\xfd","S\u1eedu"],"tuePha":["\u0110inh","M\xf9i"]},"D\u1ea7n":{"thaiTue":["C\u1ea5n","D\u1ea7n"],"tuePha":["Kh\xf4n","Th\xe2n"]},"M\xe3o":{"thaiTue":["Gi\xe1p","M\xe3o"],"tuePha":["Canh","D\u1eadu"]},"Th\xecn":{"thaiTue":["\u1ea4t","Th\xecn"],"tuePha":["T\xe2n","Tu\u1ea5t"]},"T\u1ef5":{"thaiTue":["T\u1ed1n","T\u1ef5"],"tuePha":["C\xe0n","H\u1ee3i"]},"Ng\u1ecd":{"thaiTue":["B\xednh","Ng\u1ecd"],"tuePha":["Nh\xe2m","T\xfd"]},"M\xf9i":{"thaiTue":["\u0110inh","M\xf9i"],"tuePha":["Qu\xfd","S\u1eedu"]},"Th\xe2n":{"thaiTue":["Kh\xf4n","Th\xe2n"],"tuePha":["C\u1ea5n","D\u1ea7n"]},"D\u1eadu":{"thaiTue":["Canh","D\u1eadu"],"tuePha":["Gi\xe1p","M\xe3o"]},"Tu\u1ea5t":{"thaiTue":["T\xe2n","Tu\u1ea5t"],"tuePha":["\u1ea4t","Th\xecn"]},"H\u1ee3i":{"thaiTue":["C\xe0n","H\u1ee3i"],"tuePha":["T\u1ed1n","T\u1ef5"]}},"J4":[{"name":"Ph\u1ee5c","fullName":"\u0110\u1ecba L\xf4i Ph\u1ee5c","toaDo":{"start":0,"end":5.625},"quai":{"khi":1,"van":8},"canChi":"Gi\xe1p T\xfd"},{"name":"Di","fullName":"S\u01a1n L\xf4i Di","toaDo":{"start":5.625,"end":11.25},"quai":{"khi":6,"van":6},"canChi":"B\xednh T\xfd"},{"name":"Tru\xe2n","fullName":"Th\u1ee7y L\xf4i Tru\xe2n","toaDo":{"start":11.25,"end":16.875},"quai":{"khi":7,"van":4},"canChi":"M\u1eadu T\xfd"},{"name":"\xcdch","fullName":"Phong L\xf4i \xcdch","toaDo":{"start":16.875,"end":22.5},"quai":{"khi":2,"van":9},"canChi":"Canh T\xfd"},{"name":"CH\u1ea4N","fullName":"Thu\u1ea7n Ch\u1ea5n","toaDo":{"start":22.5,"end":28.125},"quai":{"khi":8,"van":1},"canChi":"Nh\xe2m T\xfd"},{"name":"Ph\u1ec7 H\u1ea1p","fullName":"H\u1ecfa L\xf4i Ph\u1ec7 H\u1ea1p","toaDo":{"start":28.125,"end":33.75},"quai":{"khi":3,"van":6},"canChi":"\u1ea4t S\u1eedu"},{"name":"T\xf9y","fullName":"Tr\u1ea1ch L\xf4i T\xf9y","toaDo":{"start":33.75,"end":39.375},"quai":{"khi":4,"van":7},"canChi":"\u0110inh S\u1eedu"},{"name":"V\xf4 V\u1ecdng","fullName":"Thi\xean L\xf4i V\xf4 V\u1ecdng","toaDo":{"start":39.375,"end":45},"quai":{"khi":9,"van":2},"canChi":"K\u1ef7 S\u1eedu"},{"name":"Minh Di","fullName":"\u0110\u1ecba H\u1ecfa Minh Di","toaDo":{"start":45,"end":50.625},"quai":{"khi":1,"van":3},"canChi":"T\xe2n S\u1eedu"},{"name":"B\xed","fullName":"S\u01a1n H\u1ecfa B\xed","toaDo":{"start":50.625,"end":56.25},"quai":{"khi":6,"van":8},"canChi":"Qu\xfd S\u1eedu"},{"name":"K\xfd T\u1ebf","fullName":"Th\u1ee7y H\u1ecfa K\xfd T\u1ebf","toaDo":{"start":56.25,"end":61.875},"quai":{"khi":7,"van":9},"canChi":"Gi\xe1p D\u1ea7n"},{"name":"Gia Nh\xe2n","fullName":"Phong H\u1ecfa Gia Nh\xe2n","toaDo":{"start":61.875,"end":67.5},"quai":{"khi":2,"van":4},"canChi":"B\xednh D\u1ea7n"},{"name":"Phong","fullName":"L\xf4i H\u1ecfa Phong","toaDo":{"start":67.5,"end":73.125},"quai":{"khi":8,"van":6},"canChi":"M\u1eadu D\u1ea7n"},{"name":"LY","fullName":"Thu\u1ea7n Ly","toaDo":{"start":73.125,"end":78.75},"quai":{"khi":3,"van":1},"canChi":"Canh D\u1ea7n"},{"name":"C\xe1ch","fullName":"Tr\u1ea1ch H\u1ecfa C\xe1ch","toaDo":{"start":78.75,"end":84.375},"quai":{"khi":4,"van":2},"canChi":"Canh D\u1ea7n"},{"name":"\u0110\u1ed3ng Nh\xe2n","fullName":"Thi\xean H\u1ecfa \u0110\u1ed3ng Nh\xe2n","toaDo":{"start":84.375,"end":90},"quai":{"khi":9,"van":7},"canChi":"Nh\xe2m D\u1ea7n"},{"name":"L\xe2m","fullName":"\u0110\u1ecba Tr\u1ea1ch L\xe2m","toaDo":{"start":90,"end":95.625},"quai":{"khi":1,"van":4},"canChi":"\u1ea4t M\xe3o"},{"name":"T\u1ed5n","fullName":"S\u01a1n Tr\u1ea1ch T\u1ed5n","toaDo":{"start":95.625,"end":101.25},"quai":{"khi":6,"van":9},"canChi":"\u0110inh M\xe3o"},{"name":"Ti\u1ebft","fullName":"Th\u1ee7y Tr\u1ea1ch Ti\u1ebft","toaDo":{"start":101.25,"end":106.875},"quai":{"khi":7,"van":8},"canChi":"K\u1ef7 M\xe3o"},{"name":"Trung Phu","fullName":"Phong Tr\u1ea1ch Trung Phu","toaDo":{"start":106.875,"end":112.5},"quai":{"khi":2,"van":3},"canChi":"T\xe2n M\xe3o"},{"name":"Quy Mu\u1ed9i","fullName":"L\xf4i Tr\u1ea1ch Quy Mu\u1ed9i","toaDo":{"start":112.5,"end":118.125},"quai":{"khi":8,"van":7},"canChi":"Qu\xfd M\xe3o"},{"name":"Khu\xea","fullName":"H\u1ecfa Tr\u1ea1ch Khu\xea","toaDo":{"start":118.125,"end":123.75},"quai":{"khi":3,"van":2},"canChi":"Gi\xe1p Th\xecn"},{"name":"\u0110O\xc0I","fullName":"Thu\u1ea7n \u0110o\xe0i","toaDo":{"start":123.75,"end":129.375},"quai":{"khi":4,"van":1},"canChi":"B\xednh Th\xecn"},{"name":"L\xfd","fullName":"Thi\xean Tr\u1ea1ch L\xfd","toaDo":{"start":129.375,"end":135},"quai":{"khi":9,"van":6},"canChi":"M\u1eadu Th\xecn"},{"name":"Th\xe1i","fullName":"\u0110\u1ecba Thi\xean Th\xe1i","toaDo":{"start":135,"end":140.625},"quai":{"khi":1,"van":9},"canChi":"Canh Th\xecn"},{"name":"\u0110\u1ea1i S\xfac","fullName":"S\u01a1n Thi\xean \u0110\u1ea1i S\xfac","toaDo":{"start":140.625,"end":146.25},"quai":{"khi":6,"van":4},"canChi":"Nh\xe2m Th\xecn"},{"name":"Nhu","fullName":"Th\u1ee7y Thi\xean Nhu","toaDo":{"start":146.25,"end":151.875},"quai":{"khi":7,"van":3},"canChi":"\u1ea4t T\u1ef5"},{"name":"Ti\u1ec3u S\xfac","fullName":"Phong Thi\xean Ti\u1ec3u S\xfac","toaDo":{"start":151.875,"end":157.5},"quai":{"khi":2,"van":8},"canChi":"\u0110inh T\u1ef5"},{"name":"\u0110\u1ea1i Tr\xe1ng","fullName":"L\xf4i Thi\xean \u0110\u1ea1i Tr\xe1ng","toaDo":{"start":157.5,"end":163.125},"quai":{"khi":8,"van":2},"canChi":"K\u1ef7 T\u1ef5"},{"name":"\u0110\u1ea1i H\u1eefu","fullName":"H\u1ecfa Thi\xean \u0110\u1ea1i H\u1eefu","toaDo":{"start":163.125,"end":168.75},"quai":{"khi":3,"van":7},"canChi":"T\xe2n T\u1ef5"},{"name":"Qu\xe1i","fullName":"Tr\u1ea1ch Thi\xean Qu\xe1i","toaDo":{"start":168.75,"end":174.375},"quai":{"khi":4,"van":6},"canChi":"Qu\xfd T\u1ef5"},{"name":"C\xc0N","fullName":"Thu\u1ea7n C\xe0n","toaDo":{"start":174.375,"end":180},"quai":{"khi":9,"van":1},"canChi":"Gi\xe1p Ng\u1ecd"},{"name":"C\u1ea5u","fullName":"Thi\xean Phong C\u1ea5u","toaDo":{"start":180,"end":185.625},"quai":{"khi":9,"van":8},"canChi":"Gi\xe1p Ng\u1ecd"},{"name":"\u0110\u1ea1i Qu\xe1","fullName":"Tr\u1ea1ch Phong \u0110\u1ea1i Qu\xe1","toaDo":{"start":185.625,"end":191.25},"quai":{"khi":4,"van":3},"canChi":"B\xednh Ng\u1ecd"},{"name":"\u0110\u1ec9nh","fullName":"H\u1ecfa Phong \u0110\u1ec9nh","toaDo":{"start":191.25,"end":196.875},"quai":{"khi":3,"van":4},"canChi":"M\u1eadu Ng\u1ecd"},{"name":"H\u1eb1ng","fullName":"L\xf4i Phong H\u1eb1ng","toaDo":{"start":196.875,"end":202.5},"quai":{"khi":8,"van":9},"canChi":"Canh Ng\u1ecd"},{"name":"T\u1ed0N","fullName":"Thu\u1ea7n T\u1ed1n","toaDo":{"start":202.5,"end":208.125},"quai":{"khi":2,"van":1},"canChi":"Nh\xe2m Ng\u1ecd"},{"name":"T\u0129nh","fullName":"Th\u1ee7y Phong T\u0129nh","toaDo":{"start":208.125,"end":213.75},"quai":{"khi":7,"van":6},"canChi":"\u1ea4t M\xf9i"},{"name":"C\u1ed5","fullName":"S\u01a1n Phong C\u1ed5","toaDo":{"start":213.75,"end":219.375},"quai":{"khi":6,"van":7},"canChi":"\u0110inh M\xf9i"},{"name":"Th\u0103ng","fullName":"\u0110\u1ecba Phong Th\u0103ng","toaDo":{"start":219.375,"end":225},"quai":{"khi":1,"van":2},"canChi":"K\u1ef7 M\xf9i"},{"name":"T\u1ee5ng","fullName":"Thi\xean Th\u1ee7y T\u1ee5ng","toaDo":{"start":225,"end":230.625},"quai":{"khi":9,"van":3},"canChi":"T\xe2n M\xf9i"},{"name":"Kh\u1ed1n","fullName":"Tr\u1ea1ch Th\u1ee7y Kh\u1ed1n","toaDo":{"start":230.625,"end":236.25},"quai":{"khi":4,"van":8},"canChi":"Qu\xfd M\xf9i"},{"name":"V\u1ecb t\u1ebf","fullName":"H\u1ecfa Th\u1ee7y V\u1ecb t\u1ebf","toaDo":{"start":236.25,"end":241.875},"quai":{"khi":3,"van":9},"canChi":"Gi\xe1p Th\xe2n"},{"name":"Gi\u1ea3i","fullName":"L\xf4i Th\u1ee7y Gi\u1ea3i","toaDo":{"start":241.875,"end":247.5},"quai":{"khi":8,"van":4},"canChi":"B\xednh Th\xe2n"},{"name":"Ho\xe1n","fullName":"Phong Th\u1ee7y Ho\xe1n","toaDo":{"start":247.5,"end":253.125},"quai":{"khi":2,"van":6},"canChi":"M\u1eadu Th\xe2n"},{"name":"KH\u1ea2M","fullName":"Thu\u1ea7n Kh\u1ea3m","toaDo":{"start":253.125,"end":258.75},"quai":{"khi":7,"van":1},"canChi":"Canh Th\xe2n"},{"name":"M\xf4ng","fullName":"S\u01a1n Th\u1ee7y M\xf4ng","toaDo":{"start":258.75,"end":264.375},"quai":{"khi":6,"van":2},"canChi":"Canh Th\xe2n"},{"name":"S\u01b0","fullName":"\u0110\u1ecba Th\u1ee7y S\u01b0","toaDo":{"start":264.375,"end":270},"quai":{"khi":1,"van":7},"canChi":"Nh\xe2m Th\xe2n"},{"name":"\u0110\u1ed9n","fullName":"Thi\xean S\u01a1n \u0110\u1ed9n","toaDo":{"start":270,"end":275.625},"quai":{"khi":9,"van":4},"canChi":"\u1ea4t D\u1eadu"},{"name":"H\xe0m","fullName":"Tr\u1ea1ch S\u01a1n H\xe0m","toaDo":{"start":275.625,"end":281.25},"quai":{"khi":4,"van":9},"canChi":"\u0110inh D\u1eadu"},{"name":"L\u1eef","fullName":"H\u1ecfa S\u01a1n L\u1eef","toaDo":{"start":281.25,"end":286.875},"quai":{"khi":3,"van":8},"canChi":"K\u1ef7 D\u1eadu"},{"name":"Ti\u1ec3u Qu\xe1","fullName":"L\xf4i S\u01a1n Ti\u1ec3u Qu\xe1","toaDo":{"start":286.875,"end":292.5},"quai":{"khi":8,"van":3},"canChi":"T\xe2n D\u1eadu"},{"name":"Ti\u1ec7m","fullName":"Phong S\u01a1n Ti\u1ec7m","toaDo":{"start":292.5,"end":298.125},"quai":{"khi":2,"van":7},"canChi":"Qu\xfd D\u1eadu"},{"name":"Ki\u1ec3n","fullName":"Th\u1ee7y S\u01a1n Ki\u1ec3n","toaDo":{"start":298.125,"end":303.75},"quai":{"khi":7,"van":2},"canChi":"Gi\xe1p Tu\u1ea5t"},{"name":"C\u1ea4N","fullName":"Thu\u1ea7n C\u1ea5n","toaDo":{"start":303.75,"end":309.375},"quai":{"khi":6,"van":1},"canChi":"B\xednh Tu\u1ea5t"},{"name":"Khi\xeam","fullName":"\u0110\u1ecba S\u01a1n Khi\xeam","toaDo":{"start":309.375,"end":315},"quai":{"khi":1,"van":6},"canChi":"M\u1eadu Tu\u1ea5t"},{"name":"B\u0129","fullName":"Thi\xean \u0110\u1ecba B\u0129","toaDo":{"start":315,"end":320.625},"quai":{"khi":9,"van":9},"canChi":"Canh Tu\u1ea5t"},{"name":"T\u1ee5y","fullName":"Tr\u1ea1ch \u0110\u1ecba T\u1ee5y","toaDo":{"start":320.625,"end":326.25},"quai":{"khi":4,"van":4},"canChi":"Nh\xe2m Tu\u1ea5t"},{"name":"T\u1ea5n","fullName":"H\u1ecfa \u0110\u1ecba T\u1ea5n","toaDo":{"start":326.25,"end":331.875},"quai":{"khi":3,"van":3},"canChi":"\u1ea4t H\u1ee3i"},{"name":"D\u1ef1","fullName":"L\xf4i \u0110\u1ecba D\u1ef1","toaDo":{"start":331.875,"end":337.5},"quai":{"khi":8,"van":8},"canChi":"\u0110inh H\u1ee3i"},{"name":"Qu\xe1n","fullName":"Phong \u0110\u1ecba Qu\xe1n","toaDo":{"start":337.5,"end":343.125},"quai":{"khi":2,"van":2},"canChi":"K\u1ef7 H\u1ee3i"},{"name":"T\u1ef7","fullName":"Th\u1ee7y \u0110\u1ecba T\u1ef7","toaDo":{"start":343.125,"end":348.75},"quai":{"khi":7,"van":7},"canChi":"T\xe2n H\u1ee3i"},{"name":"B\xe1c","fullName":"S\u01a1n \u0110\u1ecba B\xe1c","toaDo":{"start":348.75,"end":354.375},"quai":{"khi":6,"van":6},"canChi":"Qu\xfd H\u1ee3i"},{"name":"KH\xd4N","fullName":"Thu\u1ea7n Kh\xf4n","toaDo":{"start":354.375,"end":360},"quai":{"khi":1,"van":1},"canChi":"Gi\xe1p T\xfd"}]}'),{h4:tC,dS:nC,Rx:rC,Gc:sC,VT:iC,hh:aC,J4:oC}=eC,lC=["D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i","T\xfd","S\u1eedu"],cC={MOC:["Gi\xe1p","\u1ea4t"],HOA:["B\xednh","\u0110inh"],THO:["M\u1eadu","K\u1ef7"],KIM:["Canh","T\xe2n"],THUY:["Nh\xe2m","Qu\xfd"]},uC={MOC:["D\u1ea7n","M\xe3o"],HOA:["T\u1ef5","Ng\u1ecd"],THO:["Th\xecn","Tu\u1ea5t","S\u1eedu","M\xf9i"],KIM:["Th\xe2n","D\u1eadu"],THUY:["H\u1ee3i","T\xfd"]},dC=e=>{for(const[t,n]of Object.entries(cC))if(n.includes(e))return t;return null},hC=e=>{for(const[t,n]of Object.entries(uC))if(n.includes(e))return t;return null},mC=(e,t)=>({MOC:"HOA",HOA:"THO",THO:"KIM",KIM:"THUY",THUY:"MOC"}[e]===t),AC=(e,t)=>e===t,gC=[{start:23,end:1,name:"T\xfd (23-1h)"},{start:1,end:3,name:"S\u1eedu (1-3h)"},{start:3,end:5,name:"D\u1ea7n (3-5h)"},{start:5,end:7,name:"M\xe3o (5-7h)"},{start:7,end:9,name:"Th\xecn (7-9h)"},{start:9,end:11,name:"T\u1ef5 (9-11h)"},{start:11,end:13,name:"Ng\u1ecd (11-13h)"},{start:13,end:15,name:"M\xf9i (13-15h)"},{start:15,end:17,name:"Th\xe2n (15-17h)"},{start:17,end:19,name:"D\u1eadu (17-19h)"},{start:19,end:21,name:"Tu\u1ea5t (19-21h)"},{start:21,end:23,name:"H\u1ee3i (21-23h)"}],pC=e=>{var n,r;let{CALENDAR_APP:s,getLunarDate:i,getCanChi:a,huyenKhongQuai:o,month:l,year:c,setMonth:u,setYear:d,currentDate:h,selectedBirthYear:m,selectedBirthMonth:A,selectedBirthDay:g,selectedBirthCanChi:p}=e;const[f,x]=(0,t.useState)(h.getDate()),[v,y]=(0,t.useState)(0),b=Array.from({length:400},((e,t)=>1800+t)),w=Array.from({length:12},((e,t)=>t+1)),N=Array.from({length:new Date(c,l,0).getDate()},((e,t)=>t+1)),[j,C]=(0,t.useState)(0),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)("T\xfd"),[I,D]=(0,t.useState)(!1),[P,F]=(0,t.useState)(!1),U=i(f,l,c),R=a(U),O=R[2],H=R[1],Q=R[0],z=["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"],V=z.indexOf(Q.split(" ")[0]),K=gC[v].name.split(" ")[0],G=`${z[(2*V+v)%10]} ${K}`,q=db(O,o),W=db(H,o),$=db(Q,o),X=db(G,o),Y=sb(m),J=db(Y,o),Z=e=>{const t=e.target.value;C(t);const n=parseFloat(t);if(isNaN(n))return S(null),E(""),void M(null);const r=o.find((e=>n>=e.toaDo.start&&n<e.toaDo.end));S(r||null);let s=n+180;s>=360&&(s-=360),E(s);const i=o.find((e=>s>=e.toaDo.start&&s<e.toaDo.end));M(i||null)};function ee(e){return e>=45&&e<135?"\u0110\xf4ng":e>=135&&e<225?"Nam":e>=225&&e<315?"T\xe2y":"B\u1eafc"}const te=e=>{const t=e%360;for(const r of tC){var n;const e=null===(n=r.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(e)if(e.start<e.end){if(t>=e.start&&t<e.end)return r.name}else if(t>=e.start||t<e.end)return r.name}return"T\xfd"};(0,t.useEffect)((()=>{L(te(j))}),[j]),(0,t.useEffect)((()=>{L(te(_))}),[_]);const ne=sb(c).split(" ")[1],re=CN[ne];let se=[];Array.isArray(re)?se=se.concat(re):"string"===typeof re&&se.push(re);const ie=lC.map(((e,t)=>se.includes(e)?{chi:e,idx:t}:null)).filter(Boolean);(0,t.useEffect)((()=>{Z({target:{value:""===j||null==j?0:j}})}),[]);const ae=e=>{const t=tC.findIndex((t=>t.name===e));if(-1===t)return{doiXung:"",canhCai:""};const n=(t+12)%24;return{doiXung:tC[n].name,canhCai:tC[(n-1+24)%24].name}},{doiXung:oe,canhCai:le}=ae(ne),ce=H.split(" ")[1],{doiXung:ue,canhCai:de}=ae(ce),he=(a(i(1,l,c))[1].split(" ")[1],(null===(n=db(a(i(1,l,c))[1],o))||void 0===n?void 0:n.split(" - "))||[]),me=Number(he[0]),Ae=(null===q||void 0===q?void 0:q.split(" - "))||[],ge=Number(Ae[0]),pe=[[1,3],[2,4],[6,8],[7,9]];let fe=!1,xe=!1;for(const[t,Ne]of pe)if(ge===t&&me===Ne||ge===Ne&&me===t){fe=!0;break}fe||isNaN(ge)||isNaN(me)||ge+me!==10||3===ge&&7===me||7===ge&&3===me||(xe=!0);const ve=te(_),ye=EN.find((e=>e.includes(ve))),be=ye?ye.slice(0,3):[],we=lC.map(((e,t)=>be.includes(e)?`${e}`:null)).filter(Boolean);return(0,At.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm md:p-4 p-0",children:[(0,At.jsx)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 mb-4",children:(0,At.jsx)("div",{className:"flex md:flex-row flex-col items-center gap-2",children:(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("label",{htmlFor:"huongNhaSon",className:"text-white",children:"To\u1ea1 \u0111\u1ed9"}),(0,At.jsx)("input",{type:"number",min:"0",max:"359",step:"1",value:""===j||null==j?"":j,onChange:e=>{const t=e.target.value;if(""===t)return void C("");let n=parseFloat(t);isNaN(n)&&(n=0),n<0&&(n=0),n>=360&&(n=359.99),C(n);let r=n+180;r>=360&&(r-=360),E(r),L(te(n)),Z({target:{value:n}})},className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white w-20 mr-2",style:{width:"70px"}}),(0,At.jsx)("label",{htmlFor:"huongNhaSon",className:"text-white hidden md:block",children:"H\u01b0\u1edbng nh\xe0"}),(0,At.jsxs)("select",{id:"huongNhaSon",value:te(j),onChange:e=>{const t=tC.find((t=>t.name===e.target.value));if(t&&t.infos){var n;const e=null===(n=t.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(e){const n=(e.start+e.end)/2;C(n);let r=n+180;r>=360&&(r-=360),E(r),L(t.name),Z({target:{value:n}})}}},className:"hidden md:block bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white w-24",children:[(0,At.jsx)("optgroup",{label:"B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&(n.start>=337.5&&n.start<360||n.start>=0&&n.start<22.5)})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=22.5&&n.start<67.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=67.5&&n.start<112.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=112.5&&n.start<157.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=157.5&&n.start<202.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=202.5&&n.start<247.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=247.5&&n.start<292.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=292.5&&n.start<337.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))})]}),(0,At.jsx)("label",{htmlFor:"toaNhaSon",className:"text-white",children:"T\u1ecda"}),(0,At.jsxs)("select",{id:"toaNhaSon",value:te(_),onChange:e=>{const t=tC.find((t=>t.name===e.target.value));if(t&&t.infos){var n;const e=null===(n=t.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(e){const n=(e.start+e.end)/2;E(n);let r=n+180;r>=360&&(r-=360),C(r),L(t.name),Z({target:{value:r}})}}},className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white w-24",children:[(0,At.jsx)("optgroup",{label:"B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&(n.start>=337.5&&n.start<360||n.start>=0&&n.start<22.5)})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=22.5&&n.start<67.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=67.5&&n.start<112.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"\u0110\xf4ng Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=112.5&&n.start<157.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=157.5&&n.start<202.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y Nam",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=202.5&&n.start<247.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=247.5&&n.start<292.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))}),(0,At.jsx)("optgroup",{label:"T\xe2y B\u1eafc",children:tC.filter((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n&&n.start>=292.5&&n.start<337.5})).map(((e,t)=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))})]})]})})}),(0,At.jsxs)("div",{className:s.CALENDAR.GRID,children:[(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"CN"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T2"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T3"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T4"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T5"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T6"}),(0,At.jsx)("div",{className:s.CALENDAR.WEEKDAY,children:"T7"}),(()=>{const e=((e,t)=>new Date(t,e,0).getDate())(l,c),t=((e,t)=>new Date(t,e-1,1).getDay())(l,c),n=[],r=te(_),u=r&&CN[r];let d=[];Array.isArray(u)?d=d.concat(u):"string"===typeof u&&d.push(u);const m=ee(Number(_)),A=aC.find((e=>{const t=e=>e?e.normalize("NFC").replace(/\s+/g,"").toLowerCase():"";return t(e.toa)===t(m)}));A&&(d=d.concat(A.yearChi)),d=Array.from(new Set(d));const g=r&&CN[r];let p=[];Array.isArray(g)?p=p.concat(g):"string"===typeof g&&p.push(g);const v=ee(Number(_)),y=aC.find((e=>{const t=e=>e?e.normalize("NFC").replace(/\s+/g,"").toLowerCase():"";return t(e.toa)===t(v)}));y&&(p=p.concat(y.yearChi)),p=Array.from(new Set(p));const b=CN[ne];let w=[];Array.isArray(b)?w=w.concat(b):"string"===typeof b&&w.push(b);["D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i","T\xfd","S\u1eedu"].map(((e,t)=>w.includes(e)?{chi:e,idx:t}:null)).filter(Boolean);for(let i=0;i<t;i++)n.push((0,At.jsx)("div",{className:s.CALENDAR.DAY.EMPTY},`empty-${i}`));for(let T=1;T<=e;T++){var N,j,C;new Date(c,l-1,T);const e=i(T,l,c),t=a(e),r=T===h.getDate()&&l===h.getMonth()+1&&c===h.getFullYear(),u=T===f;let m=s.CALENDAR.DAY.BASE;u&&(m+=" border-2 border-green-400"),r&&(m+=" border-2 border-white");const A=t[0].split(" ")[1];d.includes(A)&&(m+=" !bg-red-500/20");const g=t[1].split(" ")[1];(p.includes(g)||w.includes(g))&&(m+=" opacity-20");const v=H.split(" ")[1],y=O.split(" ")[1];let b=[];const S=CN[v],E=CN[y];Array.isArray(S)?b=b.concat(S):"string"===typeof S&&b.push(S),Array.isArray(E)?b=b.concat(E):"string"===typeof E&&b.push(E),b=Array.from(new Set(b)),b.includes(A)&&(m+=" !bg-orange-500/20");const B=Y.split(" ")[1],M=CN[B];(Array.isArray(M)&&M.includes(A)||"string"===typeof M&&M===A)&&(m+=" border-b-4 border-b-yellow-500");const k=t[0].split(" ")[0],L=dC(k),I=hC(A),D={"B\u1eafc":"THUY","\u0110\xf4ng":"MOC",Nam:"HOA","T\xe2y":"KIM"}[ee(Number(_))],P=L&&(AC(L,D)||mC(L,D)),F=te(_),U=hC(F),R=I&&(AC(I,U)||mC(I,U)||(null===(N=EN.find((e=>e.includes(F))))||void 0===N?void 0:N.includes(A)));P&&R&&(m+=" !bg-green-500/20"),n.push((0,At.jsxs)("div",{className:m,onClick:()=>x(T),children:[(0,At.jsx)("div",{className:s.CALENDAR.DATE.SOLAR,children:T}),(0,At.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,At.jsxs)("div",{className:s.CALENDAR.DATE.LUNAR.DAY+" flex-row",children:[(0,At.jsx)("span",{className:"hidden md:block absolute top-1 left-2",children:e.day}),(0,At.jsxs)("span",{className:"md:text-xs text-[9px] md:absolute top-1 right-2",children:[" ",t[0].split(" ")[1]]})]}),(0,At.jsx)("div",{className:s.CALENDAR.DATE.LUNAR.MONTH+" ",children:(0,At.jsxs)("span",{className:"text-gray-300 md:text-xs text-[9px]",children:["Th.",t[1].split(" ")[1]]})}),(0,At.jsxs)("div",{className:"md:text-sm text-xs pt-2",children:[(0,At.jsx)("span",{className:"text-yellow-300",children:null===(j=db(t[0],o))||void 0===j?void 0:j.split(" - ")[0]}),(0,At.jsxs)("span",{className:"text-green-400",children:[" - ",null===(C=db(t[0],o))||void 0===C?void 0:C.split(" - ")[1]]})]})]})]},T))}return n})()]}),(0,At.jsxs)("div",{className:"flex flex-wrap gap-4 mb-2 text-xs md:text-sm justify-center items-center",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"inline-block w-4 h-4 bg-red-500/20 rounded"}),(0,At.jsx)("span",{children:"Ng\xe0y xung ho\u1eb7c tam s\xe1t v\u1edbi t\u1ecda"})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"inline-block w-4 h-4 bg-orange-500/20 rounded"}),(0,At.jsx)("span",{children:"Ng\xe0y xung th\xe1ng ho\u1eb7c xung n\u0103m"})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"inline-block w-4 h-4 border-b-2 border-yellow-500"}),(0,At.jsx)("span",{children:"Ng\xe0y xung v\u1edbi tu\u1ed5i"})]}),(0,At.jsxs)("div",{className:"flex items-start gap-2",children:[(0,At.jsx)("span",{className:"inline-block w-4 h-4 !bg-green-500/20 rounded"}),(0,At.jsx)("span",{children:"Ng\xe0y h\u1ee3p v\u1edbi t\u1ecda (Can t\u1ef1 h\u1ee3p - sinh h\u1ee3p & Chi c\xf9ng h\xe0nh hay sinh h\xe0nh)"})]})]}),(0,At.jsxs)("div",{className:"text-center text-sm text-gray-400 underline cursor-pointer",onClick:()=>F(!P),children:[" ",P?"Xem chi ti\u1ebft":"\u1ea8n chi ti\u1ebft"]}),!P&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"flex flex-col md:flex-row items-center flex-wrap md:gap-4 gap-2 my-8 justify-center",id:"ngay-theo-dai-quai",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2 w-full justify-center",children:[(0,At.jsx)("select",{value:v,onChange:e=>y(Number(e.target.value)),className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white",children:gC.map(((e,t)=>(0,At.jsx)("option",{value:t,children:e.name},e.name)))}),(0,At.jsx)("select",{value:f,onChange:e=>x(Number(e.target.value)),className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white",children:N.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))}),(0,At.jsx)("select",{value:l,onChange:e=>{u(Number(e.target.value)),x(1)},className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white",children:w.map((e=>(0,At.jsxs)("option",{value:e,children:[" ",e]},e)))}),(0,At.jsx)("select",{id:"yearSS",value:c,onChange:e=>{d(Number(e.target.value)),x(1)},className:"bg-gray-800 text-white rounded px-1 py-1 outline-none h-10 border border-white",children:b.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))}),(0,At.jsx)("button",{className:"bg-green-400/50 text-white rounded px-1 py-1 outline-none w-10 h-10 border border-green-400 flex items-center justify-center",onClick:()=>D(!0),children:(0,At.jsx)(Jj,{className:"w-4 h-4"})}),(0,At.jsx)(YN,{isOpen:I,onClose:()=>D(!1),children:(0,At.jsx)(Zj,{})})]}),(0,At.jsxs)("div",{className:"flex items-center md:gap-2 gap-1",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-blue-400/20 rounded-lg p-3",children:[(0,At.jsx)("span",{className:"text-white font-semibold",children:"N\u0103m sinh"}),(0,At.jsx)("span",{className:"text-purple-300",children:Y}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===J||void 0===J?void 0:J.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===J||void 0===J?void 0:J.split(" - ")[1]})]}),(0,At.jsx)("div",{className:"flex flex-col items-center gap-1 bg-green-200/20 rounded-lg p-3",children:T?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("span",{className:"text-white font-semibold",children:["H\u01b0\u1edbng ",""===j||null==j?0:j,"\xb0"]}),(0,At.jsx)("span",{className:"text-purple-300",children:T.canChi}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:T.quai.khi}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:T.quai.van})]}):(0,At.jsx)("span",{className:"text-white",children:"H\u01b0\u1edbng 0\xb0 (B\u1eafc)"})}),B&&(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-green-200/20 rounded-lg p-3",children:[(0,At.jsxs)("span",{className:"text-white font-semibold",children:["T\u1ecda ",_,"\xb0"]}),(0,At.jsx)("span",{className:"text-purple-300",children:B.canChi}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:B.quai.khi}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:B.quai.van})]})]}),(0,At.jsxs)("div",{className:"flex items-center md:gap-2 gap-1",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-gray-800/60 rounded-lg md:p-3 p-2",children:[(0,At.jsx)("span",{className:"text-white font-semibold",children:"Gi\u1edd"}),(0,At.jsx)("span",{className:"text-purple-300",children:G}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===X||void 0===X?void 0:X.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===X||void 0===X?void 0:X.split(" - ")[1]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-gray-800/60 rounded-lg md:p-3 p-2",children:[(0,At.jsxs)("span",{className:"text-white font-semibold",children:["Ng\xe0y ",h.getDate()]}),(0,At.jsx)("span",{className:"text-purple-300",children:Q}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===$||void 0===$?void 0:$.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===$||void 0===$?void 0:$.split(" - ")[1]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-gray-800/60 rounded-lg md:p-3 p-2",children:[(0,At.jsxs)("span",{className:"text-white font-semibold",children:["Th\xe1ng ",l]}),(0,At.jsx)("span",{className:"text-purple-300",children:H}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===W||void 0===W?void 0:W.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===W||void 0===W?void 0:W.split(" - ")[1]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center gap-1 bg-gray-800/60 rounded-lg md:p-3 p-2",children:[(0,At.jsxs)("span",{className:"text-white font-semibold",children:["N\u0103m ",c]}),(0,At.jsx)("span",{className:"text-purple-300",children:O}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===q||void 0===q?void 0:q.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===q||void 0===q?void 0:q.split(" - ")[1]})]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1 bg-gray-800 rounded-lg p-3",children:[(()=>{const e=sb(c),t=e.split(" ")[1],n=aC.find((e=>e.yearChi.includes(t)));return n?(0,At.jsxs)("div",{className:"text-gray-500 mt-1",children:[(0,At.jsxs)("b",{children:[c," ",e]})," ph\u1ea1m tam s\xe1t \u1edf ",(0,At.jsxs)("b",{children:["To\u1ea1 ",n.toa]})]}):null})(),B&&(0,At.jsxs)("div",{className:"w-full",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center gap-2 text-lg",children:["Nh\xe0 ",(0,At.jsx)("b",{children:"T\u1ecda"}),(0,At.jsxs)("span",{className:"text-purple-300 hidden",children:[" ",null===(r=B.canChi)||void 0===r?void 0:r.split(" ")[1]," "]}),(0,At.jsxs)("span",{className:"text-blue-400 font-bold",children:[" \u1edf ",ee(Number(_))," (",te(_),")"]})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1 mt-2",children:[(e=>{const t=null===(e=B.canChi)||void 0===e?void 0:e.split(" ")[1],n=t&&CN[t];let r=null;return Array.isArray(n)?r=n.join(", "):"string"===typeof n&&(r=n),r?(0,At.jsxs)("div",{children:[(0,At.jsx)("b",{children:"Xung"})," N\u0103m/Th\xe1ng/Ng\xe0y ",(0,At.jsxs)("span",{className:"text-red-400 font-bold",children:[" ",r]})]}):null})(),(()=>{const e=ee(Number(_)),t=aC.find((t=>{const n=e=>e?e.normalize("NFC").replace(/\s+/g,"").toLowerCase():"";return n(t.toa)===n(e)}));return t?(0,At.jsx)("div",{className:"text-center",children:(0,At.jsxs)("span",{className:"text-white",children:[(0,At.jsx)("b",{children:"Tam S\xe1t"})," N\u0103m/Th\xe1ng/Ng\xe0y/Gi\u1edd ",(0,At.jsx)("b",{className:"text-red-400",children:t.yearChi.join(", ")})]})}):null})(),(0,At.jsxs)("div",{className:" mb-2 md:col-span-3 text-center",children:["Th\xe1ng xung n\u0103m: ",(0,At.jsx)("b",{className:"text-red-400",children:ie.map((e=>`Th\xe1ng ${e.chi}`)).join(", ")})]})]})]}),(()=>{const e=(e=>{const t=sC[(5-(5-(e-2022))%9+9+0)%9];return t&&t.ranges?{name:t.name,ranges:t.ranges.filter((e=>null!=e.start&&null!=e.end))}:{name:"?",ranges:[]}})(c),t=e=>{const t=tC.find((t=>{var n;const r=null===(n=t.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(!r)return!1;const s=(r.start+r.end)/2;return Math.abs(s-e)<7.5}));return t?t.name:null},n=t(Number(j)),r=t(Number(_));let s=tC.filter((t=>{var n;const r=null===(n=t.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(!r)return!1;const s=(r.start+r.end)/2;for(const i of e.ranges)if(i.start<=i.end){if(s>=i.start&&s<=i.end)return!0}else if(s>=i.start||s<=i.end)return!0;return!1})).map((e=>e.name));s=Array.from(new Set(s));const u=r&&s.includes(r),d=n&&s.includes(n),h=sb(c),A=h.split(" ")[1],g=iC[A],p=g?`${g.tuePha[0]} - ${g.tuePha[1]}`:null,f=a(i(1,l,c))[1],x=f.split(" ")[1],v=iC[x];v&&(v.tuePha[0],v.tuePha[1]),B&&p&&(B.canChi.split(" ")[0]===g.tuePha[0]||(B.canChi.split(" ")[1],g.tuePha[1])),B&&v&&(v.tuePha[0]===B.canChi.split(" ")[0]||(v.tuePha[1],B.canChi.split(" ")[1]));return(0,At.jsxs)("div",{className:"text-white grid md:grid-cols-3 grid-cols-1 gap-2 mt-3 w-full",id:"all-bang",children:[(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"Ng\u0169 Ho\xe0ng"}),u||d?(0,At.jsxs)("div",{className:"text-red-400",children:[u&&(0,At.jsxs)("div",{children:["T\u1ecda ph\u1ea1m ",(0,At.jsxs)("b",{children:[" ",c]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["t\u1ea1i ",(0,At.jsxs)("b",{children:[e.name," - ",r]})]})]}),d&&(0,At.jsxs)("div",{children:["H\u01b0\u1edbng ph\u1ea1m",(0,At.jsxs)("b",{children:["  ",c]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["t\u1ea1i ",(0,At.jsxs)("b",{children:[e.name," - ",n]})]})]})]}):(0,At.jsx)("div",{className:"text-green-500",children:(0,At.jsxs)("div",{children:["T\u1ecda v\xe0 H\u01b0\u1edbng kh\xf4ng ph\u1ea1m n\u0103m",(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["Ng\u0169 Ho\xe0ng  ",(0,At.jsxs)("b",{children:[" ",c]}),"  t\u1ea1i ",(0,At.jsxs)("b",{children:[e.name," (",s.join(", "),")"]})]})]})})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"Tu\u1ebf Ph\xe1"}),(0,At.jsxs)("div",{className:"text-yellow-400",children:[[oe,le].includes(te(_))?(0,At.jsxs)("div",{className:"text-red-400",children:["T\u1ecda ph\u1ea1m n\u0103m ",(0,At.jsx)("b",{children:h.split(" ")[1]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["Tu\u1ebf Ph\xe1 ",(0,At.jsxs)("b",{children:["To\u1ea1 ",oe," - ",le]})]})]}):(0,At.jsxs)("div",{className:"text-green-500",children:["Kh\xf4ng ph\u1ea1m n\u0103m",(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,At.jsxs)("b",{children:["N\u0103m ",h.split(" ")[1]]})," b\u1ecb Tu\u1ebf Ph\xe1 ",(0,At.jsxs)("b",{children:["To\u1ea1 ",oe," - ",le]})]})]}),[ue,de].includes(te(_))?(0,At.jsxs)("div",{className:"text-red-400",children:["T\u1ecda ph\u1ea1m th\xe1ng ",(0,At.jsx)("b",{children:f.split(" ")[1]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["Tu\u1ebf Ph\xe1 ",(0,At.jsxs)("b",{children:["To\u1ea1 ",ue," - ",de]})]})]}):(0,At.jsxs)("div",{className:"text-green-500",children:["Kh\xf4ng ph\u1ea1m th\xe1ng",(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,At.jsxs)("b",{children:["Th\xe1ng ",f.split(" ")[1]]})," b\u1ecb Tu\u1ebf Ph\xe1 ",(0,At.jsxs)("b",{children:["To\u1ea1 ",ue," - ",de]})]})]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"B\xe1t S\xe1t"}),(()=>{const e=h.split(" ")[0],t=h.split(" ")[1],n=f.split(" ")[0],r=f.split(" ")[1],s=hb(B,e,t),i=hb(B,n,r);return(0,At.jsxs)("div",{className:"text-yellow-400",children:[s&&(s.pham?(0,At.jsxs)("div",{className:"text-red-400",children:["T\u1ecda ph\u1ea1m n\u0103m ",(0,At.jsx)("b",{children:h.split(" ")[1]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["B\xe1t s\xe1t ",s.reason]})]}):(0,At.jsxs)("div",{className:"text-green-500",children:["T\u1ecda kh\xf4ng ph\u1ea1m n\u0103m",(0,At.jsx)("div",{className:"text-sm text-gray-500",children:s.reason})]})),i&&(i.pham?(0,At.jsxs)("div",{className:"text-red-400",children:["T\u1ecda ph\u1ea1m th\xe1ng ",(0,At.jsxs)("b",{children:[" ",f.split(" ")[1]]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["B\xe1t s\xe1t ",i.reason]})]}):(0,At.jsxs)("div",{className:"text-green-500",children:["T\u1ecda kh\xf4ng ph\u1ea1m th\xe1ng",(0,At.jsx)("div",{className:"text-sm text-gray-500",children:i.reason})]}))]})})()]}),(()=>{const e=e=>"B\u1eafc"===e?{season:"\u0110\xf4ng",months:["H\u1ee3i","T\xfd","S\u1eedu"]}:"\u0110\xf4ng"===e?{season:"Xu\xe2n",months:["D\u1ea7n","M\xe3o","Th\xecn"]}:"Nam"===e?{season:"H\u1ea1",months:["T\u1ef5","Ng\u1ecd","M\xf9i"]}:"T\xe2y"===e?{season:"Thu",months:["Th\xe2n","D\u1eadu","Tu\u1ea5t"]}:null,t=e=>({"B\u1eafc":"T\xe2y","\u0110\xf4ng":"B\u1eafc",Nam:"\u0110\xf4ng","T\xe2y":"Nam"}[e]),n=e=>{const t=EN.find((t=>t.includes(e)));return t?t.slice(0,3):null},r=ee(Number(_)),s=e(r);if(!s)return null;const u=t(r),d=e(u),A=a(i(1,l,c))[1].split(" ")[1],g=n(A),p=(()=>{const e=new Set,t=sb(c).split(" ")[1],n=aC.find((e=>e.yearChi.includes(t)));if(n){const t=ee(Number(_)),r=e=>e?e.normalize("NFC").replace(/\s+/g,"").toLowerCase():"";r(n.toa)===r(t)&&n.yearChi.forEach((t=>e.add(t)))}const r=iC[t];r&&r.tuePha.forEach((t=>e.add(t)));const s=sb(m).split(" ")[1],o=CN[s];o&&(Array.isArray(o)?o.forEach((t=>e.add(t))):e.add(o));const l=te(_),u=CN[l];u&&(Array.isArray(u)?u.forEach((t=>e.add(t))):e.add(u));return["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"].forEach(((t,n)=>{const r=a(i(1,n+1,c))[1].split(" ")[1],s=aC.find((e=>e.yearChi.includes(r)));if(s){const n=ee(Number(_)),r=e=>e?e.normalize("NFC").replace(/\s+/g,"").toLowerCase():"";r(s.toa)===r(n)&&e.add(t)}})),Array.from(e)})(),f=(()=>{const e=new Set;return s.months.forEach((t=>e.add(t))),d.months.forEach((t=>e.add(t))),g&&g.forEach((t=>e.add(t))),Array.from(e)})(),x=f.filter((e=>!p.includes(e)));return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"T\u1ef1 H\u1ee3p"}),(0,At.jsxs)("div",{className:"text-yellow-400",children:[(0,At.jsxs)("div",{className:"text-green-400 mb-2",children:["Th\xe1ng: ",(0,At.jsx)("b",{children:s.months.join(" - ")})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["To\u1ea1 M\xf9a ",(0,At.jsx)("b",{children:s.season})," T\u1ef1 H\u1ee3p"]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"Sinh H\u1ee3p"}),(0,At.jsxs)("div",{className:"text-yellow-400",children:[(0,At.jsxs)("div",{className:"text-green-400 mb-2",children:["Th\xe1ng: ",(0,At.jsx)("b",{children:d.months.join(" - ")})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["M\xf9a ",(0,At.jsx)("b",{children:d.season})," Sinh ",(0,At.jsx)("b",{children:s.season})]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-2 bg-gray-900 border-b border-gray-700 rounded-lg p-3 flex-1",children:[(0,At.jsx)("h4",{className:"text-white font-semibold",children:"Tam H\u1ee3p"}),(0,At.jsxs)("div",{className:"text-yellow-400",children:[(0,At.jsxs)("div",{className:"text-green-400 mb-2",children:["Th\xe1ng: ",(0,At.jsx)("b",{children:we.join(", ")})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["T\u1ecda Tam H\u1ee3p: ",(0,At.jsx)("b",{children:be.join(" - ")})]})]})]}),(0,At.jsxs)("h4",{className:"text-white font-semibold text-center my-3 md:col-span-3 text-lg hidden",children:["N\u0103m ",c]}),(0,At.jsx)("div",{className:"flex flex-col md:col-span-3 gap-2 bg-gray-800/60 rounded-lg p-3 flex-1 hidden",children:(0,At.jsx)("div",{className:"text-yellow-400",children:(0,At.jsxs)("div",{className:"text-green-400 mb-2",children:[(0,At.jsx)("h4",{className:"font-semibold my-3",children:"C\xe1c th\xe1ng t\u1ed1t"}),(0,At.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-1 mt-1",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center gap-2 bg-green-700/20 rounded-lg p-3 justify-center group relative",children:[(0,At.jsxs)("span",{className:"text-white",children:["N\u0103m ",c]}),(0,At.jsx)("span",{className:"text-purple-300",children:h}),(0,At.jsxs)("div",{className:"flex flex-col gap-1 font-bold",children:[(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===q||void 0===q?void 0:q.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400 font-bold",children:null===q||void 0===q?void 0:q.split(" - ")[1]})]})]}),x.filter((e=>!se.includes(e))).map((r=>{const s=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"].indexOf(r)+1,l=a(i(1,s,c))[1],u=db(l,o);let d="";const h=ee(Number(_)),m=e(h);m&&m.months.includes(r)&&(d+=`T\u1ef1 H\u1ee3p v\u1edbi m\xf9a ${m.season}\n`);const A=t(h),g=e(A);g&&g.months.includes(r)&&(d+=`M\xf9a ${g.season} Sinh H\u1ee3p \n`);const p=n(r);p&&p.includes(r)&&(d+=`Tam H\u1ee3p v\u1edbi ${p.filter((e=>e!==r)).join(", ")}\n`);const f=(null===q||void 0===q?void 0:q.split(" - "))||[],x=Number(f[0]),v=(null===u||void 0===u?void 0:u.split(" - "))||[],y=Number(v[0]),b=[[1,3],[2,4],[6,8],[7,9]];let w=!1,N=!1;for(const[e,t]of b)if(x===e&&y===t||x===t&&y===e){w=!0;break}return w||isNaN(x)||isNaN(y)||x+y!==10||3===x&&7===y||7===x&&3===y||(N=!0),{monthNumber:s,monthCanChi:l,quaiVan:u,reason:d.trim(),isBest:w,isBestSum10:N}})).sort(((e,t)=>e.monthNumber-t.monthNumber)).map((e=>{let{monthNumber:t,monthCanChi:n,quaiVan:r,reason:s,isBest:i,isBestSum10:a}=e;return(0,At.jsxs)("div",{className:"flex flex-col items-center gap-2 rounded-lg p-3 justify-center group relative "+(i?"bg-green-500/20 text-white border-2 border-green-700/70":a?"bg-white/10 text-black border-2 border-white/20":"bg-gray-700/20"),title:s,children:[(0,At.jsxs)("span",{className:"text-white",children:["Th\xe1ng ",t]}),(0,At.jsx)("span",{className:"text-purple-300",children:n}),(0,At.jsxs)("div",{className:"flex flex-col gap-1 font-bold",children:[(0,At.jsx)("span",{className:"text-yellow-400",children:null===r||void 0===r?void 0:r.split(" - ")[0]}),(0,At.jsx)("span",{className:"text-green-400",children:null===r||void 0===r?void 0:r.split(" - ")[1]})]})]},t)}))]})]})})})]})})()]})})()]})]})]})},{J4:fC}=eC,xC=e=>{let{month:n,year:r,setMonth:s,setYear:i}=e;const{profile:a}=dj(),{currentUser:o}=Aw(),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(new Date),[h,m]=(0,t.useState)(null),[A,g]=(0,t.useState)({solarDate:"",lunarDate:"",canChi:[],tietKhi:"",gioHoangDao:[],gioDauNgay:"",fullCanChi:"",fullLunarInfo:"",blMonth:"",badDayInfo:{isTuLy:!1,isTuTuyet:!1,isLastLunarDay:!1,isFriday13:!1},dayCanChi:"",dayChi:"",khongVongHours:[]}),[p,f]=(0,t.useState)(new Set),[x,v]=(0,t.useState)("ngayThuong"),[y,b]=(0,t.useState)(""),[w,N]=(0,t.useState)(""),[j,C]=(0,t.useState)({tuLy:[],tuTuyet:[],lastLunarDay:[],friday13:[],soc:[],vong:[],cohon:[],kimthanthatsat:[],birthYearChiConflict:[]}),[T,S]=(0,t.useState)([]),[_,E]=(0,t.useState)([]),[B,M]=(0,t.useState)(!0),[k,L]=(0,t.useState)((new Date).getFullYear()),[I,D]=(0,t.useState)((new Date).getMonth()+1),[P,F]=(0,t.useState)((new Date).getDate()),[U,R]=(0,t.useState)(""),[O,H]=(0,t.useState)(!1),[Q,z]=(0,t.useState)(!1),[V,K]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(a&&a.birthDate&&!l&&o){const t=mj(o.uid,"timngaytot");try{const e=new Date(a.birthDate),n=e.getFullYear(),r=e.getMonth()+1,s=e.getDate();L(n),D(r),F(s),c(!0),t||(K(!0),Aj(o.uid,"timngaytot"),setTimeout((()=>{K(!1)}),5e3))}catch(e){}}}),[a,l,o]);const G=e=>{if(!e)return"";return Gy.indexOf(e)%2===0?"d\u01b0\u01a1ng":"\xe2m"},q=(e,t)=>new Date(t,e,0).getDate(),W=(e,t)=>new Date(t,e-1,1).getDay(),$=Array.from({length:400},((e,t)=>1800+t)),X=Array.from({length:12},((e,t)=>t+1)),Y=Array.from({length:q(I,k)},((e,t)=>t+1)),J=e=>e?HN(e).toLowerCase():"",Z={"Gi\xe1p":["Ng\u1ecd","M\xf9i"],"K\u1ef7":["Ng\u1ecd","M\xf9i"],"\u1ea4t":["Th\xecn","T\u1ef5"],Canh:["Th\xecn","T\u1ef5"],"B\xednh":["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o"],"T\xe2n":["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o"],"\u0110inh":["Tu\u1ea5t","H\u1ee3i"],"Nh\xe2m":["Tu\u1ea5t","H\u1ee3i"],"M\u1eadu":["Th\xe2n","D\u1eadu"],"Qu\xfd":["Th\xe2n","D\u1eadu"]},ee=e=>{const t=["Xu\xe2n ph\xe2n","Thu ph\xe2n","H\u1ea1 ch\xed","\u0110\xf4ng ch\xed"],n=e.getFullYear(),r=[n-1,n,n+1],s=[];for(const a of r)for(const e of t){const t=QN.find((t=>t.name===e));if(t){const n=VN(t.longitude,a);n&&s.push({name:e,date:new Date(n.year,n.month-1,n.day,n.hour,n.minute)})}}const i=new Date(e);i.setDate(i.getDate()+1);for(const a of s)if(a.date.getDate()===i.getDate()&&a.date.getMonth()===i.getMonth()&&a.date.getFullYear()===i.getFullYear())return!0;return!1},te=e=>{const t=["L\u1eadp xu\xe2n","L\u1eadp h\u1ea1","L\u1eadp thu","L\u1eadp \u0111\xf4ng"],n=e.getFullYear(),r=[n-1,n,n+1],s=[];for(const a of r)for(const e of t){const t=QN.find((t=>t.name===e));if(t){const n=VN(t.longitude,a);n&&s.push({name:e,date:new Date(n.year,n.month-1,n.day,n.hour,n.minute)})}}const i=new Date(e);i.setDate(i.getDate()+1);for(const a of s)if(a.date.getDate()===i.getDate()&&a.date.getMonth()===i.getMonth()&&a.date.getFullYear()===i.getFullYear())return!0;return!1},ne=e=>{nb(e.getDate(),e.getMonth()+1,e.getFullYear());const t=new Date(e);t.setDate(t.getDate()+1);return 1===nb(t.getDate(),t.getMonth()+1,t.getFullYear()).day},re=e=>5===e.getDay()&&13===e.getDate();function se(e,t){const n=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],r=(10-["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"].indexOf(e))%10,s=(n.indexOf(t)+r)%12;return[n[(s+0)%12],n[(s+1)%12]]}const ie={"T\xfd":"23:00 - 01:00","S\u1eedu":"01:00 - 03:00","D\u1ea7n":"03:00 - 05:00","M\xe3o":"05:00 - 07:00","Th\xecn":"07:00 - 09:00","T\u1ef5":"09:00 - 11:00","Ng\u1ecd":"11:00 - 13:00","M\xf9i":"13:00 - 15:00","Th\xe2n":"15:00 - 17:00","D\u1eadu":"17:00 - 19:00","Tu\u1ea5t":"19:00 - 21:00","H\u1ee3i":"21:00 - 23:00"};(0,t.useEffect)((()=>{const e=new Set,t=q(n,r),s={tuLy:[],tuTuyet:[],lastLunarDay:[],friday13:[],soc:[],vong:[],cohon:[],kimthanthatsat:[],birthYearChiConflict:[]},{tuLy:i,tuTuyet:a}=((e,t)=>{const n=["Xu\xe2n ph\xe2n","Thu ph\xe2n","H\u1ea1 ch\xed","\u0110\xf4ng ch\xed"],r=["L\u1eadp xu\xe2n","L\u1eadp h\u1ea1","L\u1eadp thu","L\u1eadp \u0111\xf4ng"],s=[],i=[];for(const a of n){const n=QN.find((e=>J(e.name)===J(a)));if(n){const r=VN(n.longitude,t);if(r&&r.month===e){const n=new Date(r.year,r.month-1,r.day);n.setDate(n.getDate()-1),n.getMonth()+1===e&&n.getFullYear()===t&&s.push({day:n.getDate(),label:`${n.getDate().toString().padStart(2,"0")}/${e.toString().padStart(2,"0")} (tr\u01b0\u1edbc ${a})`})}}}for(const a of r){const n=QN.find((e=>J(e.name)===J(a)));if(n){const r=VN(n.longitude,t);if(r&&r.month===e){const n=new Date(r.year,r.month-1,r.day);n.setDate(n.getDate()-1),n.getMonth()+1===e&&n.getFullYear()===t&&i.push({day:n.getDate(),label:`${n.getDate().toString().padStart(2,"0")}/${e.toString().padStart(2,"0")} (tr\u01b0\u1edbc ${a})`})}}}return{tuLy:s,tuTuyet:i}})(n,r);s.tuLy=i.map((e=>e.day)),s.tuTuyet=a.map((e=>e.day)),i.forEach((t=>e.add(t.day))),a.forEach((t=>e.add(t.day)));sb(r)[0];const o=sb(k).split(" ")[1];for(let l=1;l<=t;l++){const t=new Date(r,n-1,l),i=nb(l,n,r);1===i.day&&(e.add(l),s.soc.push(l)),15===i.day&&(e.add(l),s.vong.push(l)),2!==i.day&&16!==i.day||(e.add(l),s.cohon.push(l)),ne(t)&&(e.add(l),s.lastLunarDay.push(l)),re(t)&&(e.add(l),s.friday13.push(l));const a=rb(i),c=a[0].split(" ")[1],u=a[2].split(" ")[0];Z[u]&&Z[u].includes(c)&&(e.add(l),s.kimthanthatsat.push(l)),CN[o]&&CN[o].includes(c)&&(e.add(l),s.birthYearChiConflict.push(l))}f(e),C(s),S(i),E(a)}),[n,r,k]),(0,t.useEffect)((()=>{const e=nb(P,I,k),t=rb(e);R(t)}),[P,I,k]),(0,t.useEffect)((()=>{const e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),s=nb(t,n,r),i=rb(s),a=ab(s.jd),o=$y[ob(s.jd+1,7)],l=ib(s.jd),c=ee(e),u=te(e),d=ne(e),h=re(e),m=i[0].split(" ")[0],A=i[0].split(" ")[1],p=se(m,A);g({solarDate:`${t}/${n}/${r}`,lunarDate:`${s.day}/${s.month}${s.leap,""}/${s.year}`,canChi:i,tietKhi:o,gioHoangDao:a,gioDauNgay:l,fullCanChi:`${i[0]} - ${i[1]} - ${i[2]}`,fullLunarInfo:`${s.day}/${s.month}${s.leap,""}/${s.year} (\xc2m l\u1ecbch)`,blMonth:`${n}/${r}`,badDayInfo:{isTuLy:c,isTuTuyet:u,isLastLunarDay:d,isFriday13:h},dayCanChi:`${m} ${A}`,dayChi:A,khongVongHours:p})}),[]);const ae=e=>{const t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),s=nb(t,n,r),i=rb(s),a=ab(s.jd),o=$y[ob(s.jd+1,7)],l=ib(s.jd),c=ee(e),u=te(e),d=ne(e),h=re(e),m=i[0].split(" ")[0],A=i[0].split(" ")[1],p=se(m,A);g({solarDate:`${t}/${n}/${r}`,lunarDate:`${s.day}/${s.month}${s.leap,""}/${s.year}`,canChi:i,tietKhi:o,gioHoangDao:a,gioDauNgay:l,fullCanChi:`${i[0]} - ${i[1]} - ${i[2]}`,fullLunarInfo:`${s.day}/${s.month}${s.leap,""}/${s.year} (\xc2m l\u1ecbch)`,blMonth:`${n}/${r}`,badDayInfo:{isTuLy:c,isTuTuyet:u,isLastLunarDay:d,isFriday13:h},dayCanChi:`${m} ${A}`,dayChi:A,khongVongHours:p})},oe=(e,t)=>{m(t),ae(t)},le=(e,t)=>{var n,r,s,i;if(!e||!t)return"";const a=DN[e],o=DN[t],l=G(e),c=G(t);if(e===t)return"T.Ki\xean";if(a===o)return l===c?"T.Ki\xean":"K.T\xe0i";if(null!==(n={Kim:["Th\u1ee7y"],"M\u1ed9c":["H\u1ecfa"],"Th\u1ee7y":["M\u1ed9c"],"H\u1ecfa":["Th\u1ed5"],"Th\u1ed5":["Kim"]}[o])&&void 0!==n&&n.includes(a))return l===c?"T.\u1ea4n":"C.\u1ea4n";if(null!==(r={Kim:["Th\u1ee7y"],"M\u1ed9c":["H\u1ecfa"],"Th\u1ee7y":["M\u1ed9c"],"H\u1ecfa":["Th\u1ed5"],"Th\u1ed5":["Kim"]}[a])&&void 0!==r&&r.includes(o))return l===c?"T.Th\u1ea7n":"T.Quan";if(null!==(s={Kim:["M\u1ed9c"],"M\u1ed9c":["Th\u1ed5"],"Th\u1ee7y":["H\u1ecfa"],"H\u1ecfa":["Kim"],"Th\u1ed5":["Th\u1ee7y"]}[a])&&void 0!==s&&s.includes(o))return l===c?"T.T\xe0i":"C.T\xe0i";return null!==(i={Kim:["H\u1ecfa"],"M\u1ed9c":["Kim"],"Th\u1ee7y":["Th\u1ed5"],"H\u1ecfa":["Th\u1ee7y"],"Th\u1ed5":["M\u1ed9c"]}[a])&&void 0!==i&&i.includes(o)?l===c?"T.S\xe1t":"C.Quan":""},ce=T.length>0||_.length>0||j.lastLunarDay.length>0||j.friday13.length>0||j.soc.length>0||j.vong.length>0||j.cohon.length>0||j.kimthanthatsat.length>0||j.birthYearChiConflict.length>0,ue=sb(k);return(0,t.useEffect)((()=>{if(a&&a.birthDate&&!l)try{const e=new Date(a.birthDate),t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();L(t),D(n),F(r),c(!0)}catch(e){}}),[a,l]),(0,t.useEffect)((()=>{if(!a||!a.birthDate){const e=localStorage.getItem("birthDay"),t=localStorage.getItem("birthMonth"),n=localStorage.getItem("birthYear");e&&t&&n&&(F(Number(e)),D(Number(t)),L(Number(n)))}}),[a]),(0,t.useEffect)((()=>{localStorage.setItem("birthDay",P),localStorage.setItem("birthMonth",I),localStorage.setItem("birthYear",k)}),[P,I,k]),(0,At.jsxs)("div",{className:$j.CONTAINER,children:[(0,At.jsxs)("div",{className:"box-style-white-1",children:[(0,At.jsx)("div",{className:$j.HEADER.WRAPPER+" hidden",children:(0,At.jsx)("div",{className:$j.HEADER.CONTROLS,children:(0,At.jsxs)("div",{className:$j.HEADER.SELECT_GROUP,children:[(0,At.jsx)("select",{value:n,onChange:e=>{const t=parseInt(e.target.value);s(t);const n=h?h.getDate():u.getDate(),i=new Date(r,t-1,n);m(i),ae(i)},className:$j.HEADER.SELECT,children:X.map((e=>(0,At.jsxs)("option",{value:e,children:["Th\xe1ng ",e]},e)))}),(0,At.jsx)("select",{value:r,onChange:e=>{const t=parseInt(e.target.value);i(t);const r=h?h.getDate():u.getDate(),s=new Date(t,n-1,r);m(s),ae(s)},className:$j.HEADER.SELECT,children:$.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]})})}),(0,At.jsxs)("h2",{className:$j.HEADER.MONTH_TITLE+" border-none !mb-2",children:[(0,At.jsxs)("div",{className:$j.HEADER.CONTROLS,children:[(0,At.jsx)("button",{onClick:()=>{const e=r-1;i(e);const t=h?h.getDate():u.getDate(),s=new Date(e,n-1,t);m(s),ae(s)},className:$j.BUTTON.NAV,children:(0,At.jsx)(Nj,{className:$j.BUTTON.ICON})}),(0,At.jsx)("button",{onClick:()=>{let e,t;1===n?(e=12,t=r-1):(e=n-1,t=r),s(e),i(t);const a=h?h.getDate():u.getDate(),o=new Date(t,e-1,a);m(o),ae(o)},className:$j.BUTTON.NAV,children:(0,At.jsx)(Cj,{className:$j.BUTTON.ICON})})]}),(0,At.jsxs)("div",{className:"text-white md:text-lg text-sm md:block flex flex-col items-center justify-center",children:["Th\xe1ng ",n," / ",r,(0,At.jsxs)("span",{className:"text-purple-300 ml-2",children:["(",rb(nb(1,n,r))[1]," / ",rb(nb(1,n,r))[2],")"]})]}),(0,At.jsxs)("div",{className:$j.HEADER.CONTROLS,children:[(0,At.jsx)("button",{onClick:()=>{let e,t;12===n?(e=1,t=r+1):(e=n+1,t=r),s(e),i(t);const a=h?h.getDate():u.getDate(),o=new Date(t,e-1,a);m(o),ae(o)},className:$j.BUTTON.NAV,children:(0,At.jsx)(Sj,{className:$j.BUTTON.ICON})}),(0,At.jsx)("button",{onClick:()=>{const e=r+1;i(e);const t=h?h.getDate():u.getDate(),s=new Date(e,n-1,t);m(s),ae(s)},className:$j.BUTTON.NAV,children:(0,At.jsx)(Ej,{className:$j.BUTTON.ICON})})]})]})]}),V&&(0,At.jsxs)("div",{className:"fixed z-50 w-full md:w-auto top-20 left-1/2 transform -translate-x-1/2 bg-green-600/90 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-3",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("span",{className:"text-sm font-medium",children:"\u0110\xe3 t\u1ef1 \u0111\u1ed9ng thi\u1ebft l\u1eadp ng\xe0y sinh t\u1eeb th\xf4ng tin c\xe1 nh\xe2n"})}),(0,At.jsx)("button",{onClick:()=>K(!1),className:"text-white hover:text-gray-200",children:(0,At.jsx)(ww,{className:"h-4 w-4"})})]}),(0,At.jsx)("div",{className:$j.DETAILS.WRAPPER+" mb-3",children:(0,At.jsxs)("div",{className:"box-style-in bg-gray-800",children:[(0,At.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 mb-4 text-sm",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("label",{htmlFor:"birthDay",className:"text-gray-500 md:inline-block",children:"Ng\xe0y Sinh:"}),(0,At.jsx)("select",{id:"birthDay",value:P,onChange:e=>F(Number(e.target.value)),className:"bg-gray-800 text-white rounded px-2 py-1 outline-none",children:Y.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]}),(0,At.jsx)("div",{className:"flex items-center gap-2",children:(0,At.jsx)("select",{id:"birthMonth",value:I,onChange:e=>{const t=Number(e.target.value);D(t);const n=q(t,k);P>n&&F(n)},className:"bg-gray-800 text-white rounded px-2 py-1 outline-none",children:X.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})}),(0,At.jsx)("div",{className:"flex items-center gap-2",children:(0,At.jsx)("select",{id:"birthYear",value:k,onChange:e=>{const t=Number(e.target.value);if(L(t),2===I){const e=q(2,t);P>e&&F(e)}},className:"bg-gray-800 text-white rounded px-2 py-1 outline-none",children:$.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})})]}),(0,At.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,At.jsxs)("span",{className:"text-purple-300",children:["(",U[0]," - ",U[1]," - ",U[2],")"]}),(0,At.jsx)("button",{className:"button-style !h-auto p-2 py-1 rounded "+(O?"bg-red-900/30 text-red-400":""),onClick:()=>H(!O),children:O?"\u1ea8n H\u1ea1n n\u0103m":"Xem H\u1ea1n n\u0103m"})]})]}),O&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"flex md:flex-row flex-col items-start md:items-center justify-center gap-2 mb-4 text-xs",children:[(0,At.jsx)("span",{className:"bg-red-900/30 text-red-400 md:w-auto w-full text-center rounded-lg px-2 py-1",children:"N\u0103m Tam Tai:"}),(0,At.jsx)("span",{className:"text-gray-300 md:p-0 p-2 md:border-none border border-gray-700 rounded-lg md:w-auto w-full",children:(()=>{const e=(new Date).getFullYear(),t=ue.split(" ")[1],n=UN[t].flatMap((t=>{const{prevYear:n,nextYear:r}=(t=>{let n=e,r=e;for(;sb(n).split(" ")[1]!==t;)n--;for(;sb(r).split(" ")[1]!==t;)r++;return{prevYear:n,nextYear:r}})(t);return[{year:n,chi:t},{year:r,chi:t}]}));n.sort(((e,t)=>e.year-t.year));const r=n.map((e=>{let{year:t,chi:n}=e;return`${t} - <span class="text-red-400">${n}</span>`})).join(", ");return(0,At.jsx)("span",{dangerouslySetInnerHTML:{__html:r}})})()})]}),(0,At.jsxs)("div",{className:"flex md:flex-row flex-col items-start md:items-center justify-center gap-2 mb-4 text-xs",children:[(0,At.jsx)("span",{className:"bg-red-900/30 text-red-400 md:w-auto w-full text-center rounded-lg px-2 py-1",children:"N\u0103m Kim L\xe2u:"}),(0,At.jsx)("span",{className:"text-gray-300 md:p-0 p-2 md:border-none border border-gray-700 rounded-lg md:w-auto w-full",children:(()=>{const e=(new Date).getFullYear(),t=k,n=[];for(let r=e-5;r<=e+5;r++){const e=r-t+1,s=String(e).split("").reduce(((e,t)=>e+parseInt(t)),0);([1,3,6,8].includes(s)||s%10===1||s%10===3)&&n.push(`${r} - <span class="text-red-400">${e} tu\u1ed5i m\u1ee5</span>`)}return(0,At.jsx)("span",{dangerouslySetInnerHTML:{__html:n.join(", ")}})})()})]}),(0,At.jsxs)("div",{className:"flex md:flex-row flex-col items-start md:items-center md:justify-center justify-start gap-2 mb-4 text-xs",children:[(0,At.jsx)("span",{className:"bg-red-900/30 text-red-400 md:w-auto w-full text-center rounded-lg px-2 py-1",children:"N\u0103m Xung Tu\u1ed5i:"}),(0,At.jsx)("span",{className:"text-gray-300 md:p-0 p-2 md:border-none border border-gray-700 rounded-lg md:w-auto w-full",children:(()=>{const e=(new Date).getFullYear(),t=ue.split(" ")[1],n=CN[t],{prevYear:r,nextYear:s}=(t=>{let n=e,r=e;for(;sb(n).split(" ")[1]!==t;)n--;for(;sb(r).split(" ")[1]!==t;)r++;return{prevYear:n,nextYear:r}})(n),i=[{year:r,chi:n},{year:s,chi:n}];i.sort(((e,t)=>e.year-t.year));const a=i.map((e=>{let{year:t,chi:n}=e;return`${t} - <span class="text-orange-400">${n}</span>`})).join(", ");return(0,At.jsx)("span",{dangerouslySetInnerHTML:{__html:a}})})()})]})]}),(0,At.jsx)("div",{className:"grid  grid-cols-3 md:gap-4 gap-1 md:p-3 py-1 items-center hidden",children:A&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"items-center justify-center px-2 py-1 bg-white/30 text-white rounded-lg",children:[(0,At.jsx)("span",{className:"md:inline-block hidden mr-2",children:"D\u01b0\u01a1ng l\u1ecbch: "}),A.solarDate]}),(0,At.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,At.jsx)(Mj,{className:"w-8 h-8 cursor-pointer hover:text-green-300 "+(B?"text-green-300":"text-gray-400"),onClick:()=>M(!B)})}),(0,At.jsxs)("div",{className:"items-center justify-center px-2 py-1 bg-purple-300/30  rounded-lg text-purple-300",children:[(0,At.jsx)("span",{className:"md:inline-block hidden mr-2",children:"\xc2m l\u1ecbch: "}),A.lunarDate]})]})}),(0,At.jsxs)("div",{className:"mt-4 md:mt-0 -mx-4",children:[(0,At.jsxs)("div",{className:"flex border-b border-t p-1 border-gray-700 justify-center mb-4 bg-slate-800",children:[(0,At.jsx)("button",{className:"md:px-4 px-3 py-2 text-sm font-medium "+("ngayThuong"===x?"text-white border-b-2 border-white button-style":"text-gray-400 hover:text-white"),onClick:()=>v("ngayThuong"),children:"D\xe2n gian"}),(0,At.jsx)("button",{className:"md:px-4 px-3 py-2 text-sm font-medium "+("tuTru"===x?"text-white border-b-2 border-white button-style":"text-gray-400 hover:text-white"),onClick:()=>v("tuTru"),children:"T\u1ee9 tr\u1ee5"}),(0,At.jsx)("button",{className:"md:px-4 px-3 py-2 text-sm font-medium "+("daiQuai"===x?"text-white border-b-2 border-white button-style":"text-gray-400 hover:text-white"),onClick:()=>v("daiQuai"),children:"\u0110\u1ea1i Qu\xe1i"})]}),"ngayThuong"===x&&(0,At.jsx)("div",{className:"grid grid-cols-1 gap-2 text-sm md:p-4 p-0",children:A&&A.badDayInfo&&(0,At.jsxs)(At.Fragment,{children:[A&&(0,At.jsxs)("div",{className:"flex md:flex-row flex-col items-center justify-center gap-2 w-full text-xs",children:[(0,At.jsx)("div",{className:"flex gap-2 items-center",children:(0,At.jsx)("div",{className:" text-white ml-2 md:text-base text-sm font-semibold md:mr-2",children:"Gi\u1edd Kh\xf4ng Vong"})}),(0,At.jsx)("div",{className:"flex gap-2 items-center",children:(0,At.jsx)("div",{className:"flex md:flex-wrap no-wrap justify-center gap-3",children:A.khongVongHours&&A.khongVongHours.map(((e,t)=>(0,At.jsxs)("div",{className:"inline-flex items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"mr-2 font-medium",children:e}),(0,At.jsxs)("span",{className:" text-gray-300",children:["(",ie[e],")"]})]},t)))})})]}),(0,At.jsxs)("div",{className:$j.CALENDAR.GRID+" "+(B?"":"hidden"),children:[(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"CN"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T2"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T3"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T4"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T5"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T6"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T7"}),(()=>{const e=q(n,r),t=W(n,r),s=[];for(let n=0;n<t;n++)s.push((0,At.jsx)("div",{className:$j.CALENDAR.DAY.EMPTY},`empty-${n}`));for(let a=1;a<=e;a++){var i;const e=new Date(r,n-1,a),t=nb(a,n,r),o=a===u.getDate()&&n===u.getMonth()+1&&r===u.getFullYear(),l=h&&a===h.getDate()&&n===h.getMonth()+1&&r===h.getFullYear(),c=p.has(a),d=rb(t),m=d[0].split(" ")[0],A=(d[0].split(" ")[1],le(null===(i=U[0])||void 0===i?void 0:i.split(" ")[0],m)),g=j.birthYearChiConflict.includes(a),f=`${$j.CALENDAR.DAY.BASE} \n                ${o?$j.CALENDAR.DAY.TODAY:""} \n                ${l?$j.CALENDAR.DAY.SELECTED:$j.CALENDAR.DAY.HOVER}\n                ${c?g?"opacity-100 !bg-orange-900/70 cursor-not-allowed":"opacity-100 !bg-red-900/30 cursor-not-allowed":""}`;Hy(Oy(e));s.push((0,At.jsxs)("div",{className:f,onClick:()=>!c&&oe(0,e),children:[(0,At.jsx)("div",{className:$j.CALENDAR.DATE.SOLAR,children:a}),(0,At.jsx)("div",{className:$j.CALENDAR.DATE.LUNAR.MOBILE,children:t.day}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.DESKTOP,children:[(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.DAY,children:[t.day,(0,At.jsxs)("span",{className:"text-gray-400",children:[" (",d[0],")"]})]}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.MONTH+" hidden",children:[t.month," (",d[1],")"]}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.YEAR+" hidden",children:[t.year," (",d[2],")"]}),"tuTru"===x&&A&&(0,At.jsx)("div",{className:"text-xs text-purple-300 mt-1",children:A})]})]},a))}return s})()]}),(0,At.jsxs)("div",{className:"text-center text-sm text-gray-400 underline cursor-pointer",onClick:()=>z(!Q),children:[" ",Q?"Xem chi ti\u1ebft":"\u1ea8n chi ti\u1ebft"]}),!Q&&(0,At.jsx)(At.Fragment,{children:ce?(0,At.jsxs)("div",{className:"mt-2",children:[(0,At.jsxs)("h4",{className:"font-semibold mb-2 md:text-base text-sm",children:["Ng\xe0y x\u1ea5u th\xe1ng ",n,"/",r,":"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center text-sm",children:[T.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y T\u1ee9 ly:"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",T.map((e=>e.label)).join(", ")]})]}),_.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y T\u1ee9 tuy\u1ec7t:"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",_.map((e=>e.label)).join(", ")]})]}),j.lastLunarDay.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y cu\u1ed1i th\xe1ng \xe2m:"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.lastLunarDay.join(", ")]})]}),j.friday13.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Th\u1ee9 6 ng\xe0y 13:"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.friday13.join(", ")]})]}),j.soc.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y S\xf3c (M\xf9ng 1 \xe2m):"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.soc.join(", ")]})]}),j.vong.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y V\u1ecdng (Ng\xe0y 15 \xe2m):"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.vong.join(", ")]})]}),j.cohon.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsx)("span",{className:"text-red-400",children:"Ng\xe0y C\xf4 H\u1ed3n (Ng\xe0y 2, 16 \xe2m):"}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.cohon.join(", ")]})]}),j.kimthanthatsat.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-red-900/30 text-red-400 rounded-lg",children:[(0,At.jsxs)("span",{className:"text-red-400",children:["Kim Th\u1ea7n Th\u1ea5t S\xe1t - ",ue.split(" ")[0],": "]}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.kimthanthatsat.join(", ")]}),(0,At.jsxs)("span",{children:[" (",Z[ue.split(" ")[0]].join(", "),") "]})]}),j.birthYearChiConflict.length>0&&(0,At.jsxs)("div",{className:"items-center justify-center px-4 py-2 bg-orange-900/30 text-orange-400 rounded-lg",children:[(0,At.jsxs)("span",{className:"text-orange-400",children:["Ng\xe0y xung tu\u1ed5i (",ue.split(" ")[1],"):"]}),(0,At.jsxs)("span",{className:"capitalize",children:[" ",j.birthYearChiConflict.join(", ")]}),(0,At.jsxs)("span",{children:[" (",CN[ue.split(" ")[1]],") "]})]})]})]}):(0,At.jsxs)("div",{className:"text-gray-400 text-center mt-4",children:["Th\xe1ng ",n,"/",r," kh\xf4ng c\xf3 ng\xe0y x\u1ea5u"]})})]})}),"tuTru"===x&&(0,At.jsx)(Xj,{month:n,year:r,currentDate:u,selectedDate:h,setSelectedDate:m,selectedBirthCanChi:U,selectedBirthDay:P,selectedBirthMonth:I,selectedBirthYear:k,setSelectedBirthDay:F,setSelectedBirthMonth:D,setSelectedBirthYear:L,getLunarDate:nb,getCanChi:rb,getDaysInMonth:q,getFirstDayOfMonth:W,canNguHanh:DN,thienCanThienLoc:LN,thienCanQuyNhan:IN,CALENDAR_APP:$j,calculateMoonPhase:Oy,getMoonPhaseEmoji:Hy}),"daiQuai"===x&&(0,At.jsx)(pC,{CALENDAR_APP:$j,getLunarDate:nb,getCanChi:rb,huyenKhongQuai:fC,month:n,year:r,setMonth:s,setYear:i,currentDate:u,selectedBirthYear:k,selectedBirthMonth:I,selectedBirthDay:P,selectedBirthCanChi:U}),"kinhDich"===x&&(0,At.jsx)("div",{className:"grid grid-cols-1 gap-2 text-sm p-4",children:(0,At.jsx)("div",{className:"text-gray-600",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u"})})]})]})}),(0,At.jsx)("div",{className:"mb-2 text-sm text-blue-300",children:(()=>{const e=((e,t)=>{const n=QN.map((n=>{const r=VN(n.longitude,t);return r&&r.month===e?{name:n.name,date:new Date(r.year,r.month-1,r.day,r.hour,r.minute)}:null})).filter(Boolean);return n.sort(((e,t)=>e.date-t.date)),n})(n,r);return 0===e.length?"Kh\xf4ng c\xf3 ti\u1ebft kh\xed trong th\xe1ng n\xe0y":(0,At.jsx)(At.Fragment,{children:e.map((e=>`${e.name} (${e.date.getDate().toString().padStart(2,"0")}/${(e.date.getMonth()+1).toString().padStart(2,"0")})`)).join(", ")})})()})]})},vC=()=>{const[e,n]=(0,t.useState)(new Date),[r,s]=(0,t.useState)(e.getMonth()+1),[i,a]=(0,t.useState)(e.getFullYear()),{userStars:o,currentUser:l,isEmailVerified:c}=Aw(),u=l&&c;Gb("calendar");const{countdownInfo:d,cancelCountdown:h,skipCountdownAndDeductNow:m}=pw("calendar");if((0,t.useEffect)((()=>{var e;return null===(e=document.getElementById("topPage"))||void 0===e||e.scrollIntoView({behavior:"smooth"}),()=>{d.isCountingDown&&h()}}),[d.isCountingDown,h]),(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&d.isCountingDown&&m()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[d.isCountingDown,m]),u&&o<=0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||t!==rw)return(0,At.jsx)(Sw,{pageName:"Xem Ng\xe0y"})}return(0,At.jsxs)("div",{className:"min-h-screen p-0 z-40 relative",children:[(0,At.jsxs)("div",{className:"text-center mb-4",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Xem Ng\xe0y"}),(0,At.jsx)("p",{className:"text-gray-400",children:"T\xecm ng\xe0y t\u1ed1t cho c\xe1c ho\u1ea1t \u0111\u1ed9ng c\u1ee7a b\u1ea1n"})]}),(0,At.jsx)("div",{className:"max-w-4xl mx-auto md:p-4 p-2 relative z-20",children:(0,At.jsx)("div",{className:"box-style mt-4",id:"xemNgay",children:(0,At.jsx)(xC,{month:r,year:i,setMonth:s,setYear:a})})})]})},yC=()=>{const[e,n]=(0,t.useState)((new Date).getFullYear()),[r,s]=(0,t.useState)([]);(0,t.useEffect)((()=>{(()=>{const t=QN.map((t=>{const n="Ti\u1ec3u H\xe0n"===t.name||"\u0110\u1ea1i H\xe0n"===t.name,r=VN(t.longitude,n?e+1:e);if(r){const e=r.hour.toString().padStart(2,"0"),n=r.minute.toString().padStart(2,"0");return{...t,date:`${r.day.toString().padStart(2,"0")}/${r.month.toString().padStart(2,"0")}`,time:`${e}:${n}`}}return{...t,date:"Kh\xf4ng t\xecm th\u1ea5y",time:"--:--"}}));s(t)})()}),[e]);const i=Array.from({length:400},((e,t)=>1800+t)),a=e=>"function"===typeof sb?sb(e):"",o=(()=>{const t=new Date,n=t.getFullYear();return e===n?t.getMonth()+1:null})(),l={};return r.forEach((e=>{l[e.month]=(l[e.month]||0)+1})),(0,At.jsxs)("div",{className:"p-4",children:[(0,At.jsxs)("div",{className:"text-center font-bold text-white py-2 text-lg mb-4",children:["L\u1ecbch Ti\u1ebft Kh\xed N\u0103m ",e]}),(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)("select",{value:e,onChange:e=>n(parseInt(e.target.value)),className:"mb-2 px-4 py-1 bg-indigo-100 text-black rounded-lg w-full",children:i.map((e=>(0,At.jsxs)("option",{value:e,children:[e," (",a(e),")"]},e)))})}),(0,At.jsx)("div",{className:"overflow-x-auto text-xs",children:(0,At.jsxs)("table",{className:"w-full border-collapse",children:[(0,At.jsx)("thead",{children:(0,At.jsxs)("tr",{className:"bg-gray-800",children:[(0,At.jsx)("th",{className:"border border-gray-600 p-2 text-indigo-100 w-16",children:"Th\xe1ng"}),(0,At.jsx)("th",{className:"border border-gray-600 p-2 text-indigo-100",children:"Ti\u1ebft/Kh\xed"}),(0,At.jsxs)("th",{className:"border border-gray-600 p-2 text-indigo-100 w-24 md:w-48",children:["Ng\xe0y ",(0,At.jsx)("span",{className:"md:inline hidden",children:"B\u1eaft \u0110\u1ea7u"})]}),(0,At.jsxs)("th",{className:"border border-gray-600 p-2 text-indigo-100 w-24 md:w-48",children:["Gi\u1edd ",(0,At.jsx)("span",{className:"md:inline hidden",children:"B\u1eaft \u0110\u1ea7u"})]})]})}),(0,At.jsx)("tbody",{children:Array.from({length:12}).map(((e,n)=>{const s=r[2*n],i=r[2*n+1],a=o===n+1;return(0,At.jsxs)(t.Fragment,{children:[(0,At.jsxs)("tr",{className:(a?"bg-green-500/20 text-white font-bold":"bg-gray-900 text-white")+" transition-colors duration-200",children:[(0,At.jsxs)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 text-center ${a?"text-black":"text-white"}`,rowSpan:2,children:[(0,At.jsx)("span",{className:"font-bold text-white",children:n+1}),(0,At.jsx)("br",{}),(0,At.jsx)("span",{className:""+(a?"text-white":"text-gray-400"),children:zN[n]})]}),(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===s||void 0===s?void 0:s.name}),(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===s||void 0===s?void 0:s.date}),(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===s||void 0===s?void 0:s.time})]}),(0,At.jsxs)("tr",{className:(a?"bg-green-500/20 text-white font-bold":"bg-gray-900 text-white")+" transition-colors duration-200",children:[(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===i||void 0===i?void 0:i.name}),(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===i||void 0===i?void 0:i.date}),(0,At.jsx)("td",{className:`border ${a?"border-green-400/50":"border-gray-600"} p-2 ${a?"text-white font-semibold":""}`,children:null===i||void 0===i?void 0:i.time})]})]},n)}))})]})})]})},bC=()=>{const[e,n]=(0,t.useState)(new Date),[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(e.getMonth()+1),[o,l]=(0,t.useState)(e.getFullYear()),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[m,A]=(0,t.useState)(null),[g,p]=(0,t.useState)(""),[f,x]=(0,t.useState)("lich-am");Gb("lich-viet");const v=Array.from({length:400},((e,t)=>1800+t)),y=Array.from({length:12},((e,t)=>t+1)),b=[{start:23,end:1,name:"T\xfd (23-1h)"},{start:1,end:3,name:"S\u1eedu (1-3h)"},{start:3,end:5,name:"D\u1ea7n (3-5h)"},{start:5,end:7,name:"M\xe3o (5-7h)"},{start:7,end:9,name:"Th\xecn (7-9h)"},{start:9,end:11,name:"T\u1ef5 (9-11h)"},{start:11,end:13,name:"Ng\u1ecd (11-13h)"},{start:13,end:15,name:"M\xf9i (13-15h)"},{start:15,end:17,name:"Th\xe2n (15-17h)"},{start:17,end:19,name:"D\u1eadu (17-19h)"},{start:19,end:21,name:"Tu\u1ea5t (19-21h)"},{start:21,end:23,name:"H\u1ee3i (21-23h)"}];(0,t.useEffect)((()=>{const e=()=>{const e=new Date,t=e.getHours(),n=e.getMinutes();h({hour:t,minute:n}),m||A({hour:t,minute:n})};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[]);(0,t.useEffect)((()=>{if(m&&void 0!==m.hour){const e=(e=>{const t=new Date,n=Math.floor(t.getTime()/864e5+2440588),r=ib(n),s=Math.floor((e+1)/2)%12,i=(Gy.indexOf(r)+s)%10,a=s;return`${Gy[i]} ${qy[a]}`})(m.hour);p(e)}}),[m]);const w=e=>{if(e>=23||e<1)return 0;for(let t=1;t<b.length;t++)if(e>=b[t].start&&e<b[t].end)return t;return 0},N=(e,t)=>{s(t);const n=nb(e,i,o),r=rb(n),a=ab(n.jd),l=$y[ob(n.jd+1,7)],c=ib(n.jd),h=m?m.hour:d?d.hour:0,A=Math.floor((h+1)/2)%12,g=(Gy.indexOf(c)+A)%10,p=A,f=`${Gy[g]} ${qy[p]}`;let x="";if(d){const e=Math.floor((d.hour+1)/2)%12,t=(Gy.indexOf(c)+e)%10,n=e;x=`${Gy[t]} ${qy[n]}`}u({solarDate:`${e}/${i}/${o}`,lunarDate:`${n.day}/${n.month}${n.leap,""}/${n.year}`,canChi:r,tietKhi:l,gioHoangDao:a,gioDauNgay:c,currentCanChiHour:f,currentHourCanChi:x,fullCanChi:`${f} - ${r[0]} - ${r[1]} - ${r[2]}`,fullLunarInfo:`${n.day}/${n.month}${n.leap,""}/${n.year} (\xc2m l\u1ecbch)`,blMonth:`${i}/${o}`})},j=e=>{if(!r)return;const t=r.getDate(),n=nb(t,i,o),s=rb(n),a=ab(n.jd),l=$y[ob(n.jd+1,7)],c=ib(n.jd),d=Math.floor((e+1)/2)%12,h=(Gy.indexOf(c)+d)%10,m=d,A=`${Gy[h]} ${qy[m]}`;u((e=>({...e,canChi:s,tietKhi:l,gioHoangDao:a,gioDauNgay:c,currentCanChiHour:A})))};return(0,t.useEffect)((()=>{var e;null===(e=document.getElementById("topPage"))||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]),(0,At.jsxs)("div",{className:$j.CONTAINER,children:[(0,At.jsxs)("div",{className:"text-center mb-8",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"L\u1ecbch Vi\u1ec7t"}),(0,At.jsx)("p",{className:"text-gray-400",children:"L\u1ecbch \xe2m v\xe0 ti\u1ebft kh\xed truy\u1ec1n th\u1ed1ng Vi\u1ec7t Nam"})]}),(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsxs)("div",{className:"flex space-x-1 bg-slate-800 p-1 rounded-lg",children:[(0,At.jsx)("button",{onClick:()=>x("lich-am"),className:"flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors "+("lich-am"===f?"button-style":"text-gray-400 hover:text-gray-300 hover:bg-slate-700"),children:"L\u1ecbch \xc2m"}),(0,At.jsx)("button",{onClick:()=>x("tiet-khi"),className:"flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors "+("tiet-khi"===f?"button-style":"text-gray-400 hover:text-gray-300 hover:bg-slate-700"),children:"L\u1ecbch Ti\u1ebft Kh\xed"})]})}),"lich-am"===f&&(0,At.jsxs)("div",{className:"box-style mt-4",id:"lichAm",children:[(0,At.jsx)("div",{className:$j.HEADER.WRAPPER+" w-full",children:(0,At.jsx)("div",{className:$j.HEADER.CONTROLS+" w-full px-4",children:(0,At.jsxs)("div",{className:$j.HEADER.SELECT_GROUP+" flex-1 pt-2",children:[(0,At.jsx)("select",{value:i,onChange:e=>{a(parseInt(e.target.value)),s(null),u(null)},className:$j.HEADER.SELECT+" flex-1",children:y.map((e=>(0,At.jsxs)("option",{value:e,children:["Th\xe1ng ",e]},e)))}),(0,At.jsx)("select",{value:o,onChange:e=>{l(parseInt(e.target.value)),s(null),u(null)},className:$j.HEADER.SELECT+" flex-1",children:v.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]})})}),(0,At.jsxs)("div",{className:"p-4",children:[(0,At.jsxs)("h2",{className:$j.HEADER.MONTH_TITLE,children:[(0,At.jsxs)("div",{className:$j.HEADER.CONTROLS,children:[(0,At.jsx)("button",{onClick:()=>{l(o-1),s(null),u(null)},className:$j.BUTTON.NAV+" button-style-blue",children:(0,At.jsx)(Nj,{className:$j.BUTTON.ICON})}),(0,At.jsx)("button",{onClick:()=>{1===i?(a(12),l(o-1)):a(i-1),s(null),u(null)},className:$j.BUTTON.NAV+" button-style-blue",children:(0,At.jsx)(Cj,{className:$j.BUTTON.ICON})})]}),(0,At.jsx)("div",{className:"text-white md:text-lg text-sm md:block flex flex-col items-center justify-center",children:(0,At.jsxs)("span",{className:"text-purple-300 ml-2",children:["(",rb(nb(1,i,o))[1]," / ",rb(nb(1,i,o))[2],")"]})}),(0,At.jsxs)("div",{className:$j.HEADER.CONTROLS,children:[(0,At.jsx)("button",{onClick:()=>{12===i?(a(1),l(o+1)):a(i+1),s(null),u(null)},className:$j.BUTTON.NAV+" button-style-blue",children:(0,At.jsx)(Sj,{className:$j.BUTTON.ICON})}),(0,At.jsx)("button",{onClick:()=>{l(o+1),s(null),u(null)},className:$j.BUTTON.NAV+" button-style-blue",children:(0,At.jsx)(Ej,{className:$j.BUTTON.ICON})})]})]}),(0,At.jsxs)("div",{className:$j.CALENDAR.GRID,children:[(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"CN"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T2"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T3"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T4"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T5"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T6"}),(0,At.jsx)("div",{className:$j.CALENDAR.WEEKDAY,children:"T7"}),(()=>{const t=((e,t)=>new Date(t,e,0).getDate())(i,o),n=((e,t)=>new Date(t,e-1,1).getDay())(i,o),s=[];for(let e=0;e<n;e++)s.push((0,At.jsx)("div",{className:$j.CALENDAR.DAY.EMPTY},`empty-${e}`));const a=[{name:"Tr\u0103ng m\u1edbi",target:0},{name:"B\xe1n nguy\u1ec7t \u0111\u1ea7u",target:.25},{name:"Tr\u0103ng tr\xf2n",target:.5},{name:"B\xe1n nguy\u1ec7t cu\u1ed1i",target:.75}],l=[];for(const{name:e,target:r}of a){let n=1,s=null,a=null;for(let e=1;e<=t;e++)for(let t=0;t<24;t++){const l=Oy(new Date(o,i-1,e,t)),c=Math.abs(l-r);c<n&&(n=c,s=e,a=t)}l.push({day:s,name:e,hour:a})}for(let c=1;c<=t;c++){const t=new Date(o,i-1,c),n=nb(c,i,o),a=c===e.getDate()&&i===e.getMonth()+1&&o===e.getFullYear(),u=r&&c===r.getDate()&&i===r.getMonth()+1&&o===r.getFullYear(),d=rb(n),h=`${$j.CALENDAR.DAY.BASE} \n                ${a?$j.CALENDAR.DAY.TODAY:""} \n                ${u?$j.CALENDAR.DAY.SELECTED:$j.CALENDAR.DAY.HOVER}`,m=Hy(Oy(t)),A=l.find((e=>e.day===c));s.push((0,At.jsxs)("div",{className:`${h} ${A?"bg-yellow-200/10 shadow-lg":""}`,onClick:()=>N(c,t),children:[(0,At.jsx)("div",{className:$j.CALENDAR.DATE.SOLAR,children:c}),(0,At.jsx)("div",{className:$j.CALENDAR.DATE.LUNAR.MOBILE,children:n.day}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.DESKTOP,children:[(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.DAY,children:[n.day," (",d[0],")"]}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.MONTH,children:[n.month," (",d[1],")"]}),(0,At.jsxs)("div",{className:$j.CALENDAR.DATE.LUNAR.YEAR,children:[n.year," (",d[2],")"]})]}),(0,At.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,At.jsx)("div",{className:"text-xl mt-1",children:m}),A&&(0,At.jsx)("div",{className:"text-[9px] text-yellow-500 mt-1 hidden md:block",children:A.name})]})]},c))}return s})()]})]}),c&&(0,At.jsx)("div",{className:$j.DETAILS.WRAPPER+" mb-3",children:(0,At.jsxs)("div",{className:"box-style-in",children:[(0,At.jsxs)("h3",{className:$j.DETAILS.TITLE,children:["Th\xf4ng tin ng\xe0y ",c.solarDate]}),(0,At.jsx)("div",{className:"line-style-2"}),(0,At.jsxs)("div",{className:$j.DETAILS.GRID,children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:$j.DETAILS.LABEL,children:"\xc2m l\u1ecbch:"})," ",(0,At.jsx)("span",{className:"text-purple-300 ml-2",children:c.lunarDate})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:$j.DETAILS.LABEL2,children:"Can Chi:"})," ",(0,At.jsxs)("span",{className:"text-purple-300 ml-2",children:[c.canChi[0]," / ",c.canChi[1]," / ",c.canChi[2]]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:$j.DETAILS.LABEL2,children:"Ti\u1ebft kh\xed:"})," ",(()=>{let e=c.tietKhi;const t=e=>e?HN(e).toLowerCase().replace(/\s|-/g,""):"",n=t(e);let r=QN.find((e=>t(e.name)===n));if(!r&&"undefined"!==typeof $y){const e=$y.findIndex((e=>t(e)===n));-1!==e&&QN[e]&&(r=QN[e])}if(r){const e="Ti\u1ec3u H\xe0n"===r.name||"\u0110\u1ea1i H\xe0n"===r.name?o+1:o,t=VN(r.longitude,e);if(t){const e=t.hour.toString().padStart(2,"0"),n=t.minute.toString().padStart(2,"0");return`${r.name} (${t.day.toString().padStart(2,"0")}/${t.month.toString().padStart(2,"0")} ${e}:${n})`}}return e})()]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:$j.DETAILS.LABEL2,children:"Gi\u1edd ho\xe0ng \u0111\u1ea1o:"})," ",c.gioHoangDao]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:$j.DETAILS.LABEL2,children:"Gi\u1edd \u0111\u1ea7u ng\xe0y:"})," ",c.gioDauNgay]}),(0,At.jsx)("div",{children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-center",children:[(0,At.jsx)("select",{value:m?w(m.hour):d?w(d.hour):0,onChange:e=>{const t=b[parseInt(e.target.value)];A({hour:t.start,minute:0}),j(t.start)},className:$j.DETAILS.SELECT,children:b.map(((e,t)=>(0,At.jsx)("option",{value:t,children:e.name},t)))}),c.currentCanChiHour&&`(${c.currentCanChiHour})`]})})]})]})})]}),"tiet-khi"===f&&(0,At.jsx)("div",{className:"box-style mt-4",id:"lichTietKhi",children:(0,At.jsx)(yC,{})})]})},wC=JSON.parse('[{"so":1,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"Thu\u1ea7n C\xe0n","han":"\u4e7e","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"\u0110\u1ea1i c\xe1t, m\u1ea1nh m\u1ebd, s\xe1ng t\u1ea1o","lines":[1,1,1,1,1,1],"thuongQue":"C\xe0n","haQue":"C\xe0n","haoThe":6},{"so":2,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"Thu\u1ea7n Kh\xf4n","han":"\u5764","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Thu\u1eadn h\xf2a, nhu thu\u1eadn","lines":[0,0,0,0,0,0],"thuongQue":"Kh\xf4n","haQue":"Kh\xf4n","haoThe":6},{"so":3,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"Th\u1ee7y L\xf4i Tru\xe2n","han":"\u5c6f","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Giai \u0111o\u1ea1n \u0111\u1ea7u kh\xf3 kh\u0103n, c\u1ea7n ki\xean nh\u1eabn","lines":[1,0,0,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"Ch\u1ea5n","haoThe":2},{"so":4,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"S\u01a1n Th\u1ee7y M\xf4ng","han":"\u8499","phan_loai":"Trung","thongTinQue":"Nh\xe0 c\xf3 vong, vong n\u1eef (B\u1ecb b\xf3ng \u0111\xe8, c\u01a1m d\u1ec5 b\u1ecb thiu)","ghi_chu":"H\u1ecdc h\u1ecfi, u m\xea c\u1ea7n khai s\xe1ng","lines":[0,1,0,0,0,1],"thuongQue":"C\u1ea5n","haQue":"Kh\u1ea3m","haoThe":4},{"so":5,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"Th\u1ee7y Thi\xean Nhu","han":"\u9700","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ch\u1edd th\u1eddi, \u0111\u1eebng n\xf3ng v\u1ed9i","lines":[1,1,1,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"C\xe0n","haoThe":4},{"so":6,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"Thi\xean Th\u1ee7y T\u1ee5ng","han":"\u8a1f","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Tranh ch\u1ea5p, ki\u1ec7n t\u1ee5ng","lines":[0,1,0,1,1,1],"thuongQue":"C\xe0n","haQue":"Kh\u1ea3m","haoThe":4},{"so":7,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"\u0110\u1ecba Th\u1ee7y S\u01b0","han":"\u5e2b","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"T\u1ed5 ch\u1ee9c, d\xf9ng ng\u01b0\u1eddi t\xe0i","lines":[0,1,0,0,0,0],"thuongQue":"Kh\xf4n","haQue":"Kh\u1ea3m","haoThe":3},{"so":8,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"Th\u1ee7y \u0110\u1ecba T\u1ef7","han":"\u6bd4","phan_loai":"C\xe1t","thongTinQue":"Ng\u01b0\u1eddi con c\u1ea3 hay ng\u01b0\u1eddi c\xf3 tr\xe1ch nhi\u1ec7m cao c\xf3 ti\u1ebfng n\xf3i trong nh\xe0 l\xe0 ng\u01b0\u1eddi gieo qu\u1ebb","ghi_chu":"G\u1eafn b\xf3, h\xf2a h\u1ee3p","lines":[0,0,0,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"Kh\xf4n","haoThe":3},{"so":9,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"Phong Thi\xean Ti\u1ec3u S\xfac","han":"\u5c0f\u755c","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ki\u1ec1m ch\u1ebf nh\u1ecf, t\xedch l\u0169y","lines":[1,1,1,0,1,1],"thuongQue":"T\u1ed1n","haQue":"C\xe0n","haoThe":1},{"so":10,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"Thi\xean Tr\u1ea1ch L\xfd","han":"\u5c65","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"C\u1ea9n tr\u1ecdng, h\xe0nh x\u1eed \u0111\xfang m\u1ef1c","lines":[1,1,0,1,1,1],"thuongQue":"C\xe0n","haQue":"\u0110o\xe0i","haoThe":5},{"so":11,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"\u0110\u1ecba Thi\xean Th\xe1i","han":"\u6cf0","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Th\u1ecbnh v\u01b0\u1ee3ng, hanh th\xf4ng","lines":[1,1,1,0,0,0],"thuongQue":"Kh\xf4n","haQue":"C\xe0n","haoThe":3},{"so":12,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"Thi\xean \u0110\u1ecba B\u0129","han":"\u5426","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"B\u1ebf t\u1eafc, kh\xf4ng thu\u1eadn l\u1ee3i","lines":[0,0,0,1,1,1],"thuongQue":"C\xe0n","haQue":"Kh\xf4n","haoThe":3},{"so":13,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"Thi\xean H\u1ecfa \u0110\u1ed3ng Nh\xe2n","han":"\u540c\u4eba","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"H\u1ee3p t\xe1c, \u0111\u1ed3ng l\xf2ng","lines":[1,0,1,1,1,1],"thuongQue":"C\xe0n","haQue":"Ly","haoThe":3},{"so":14,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"H\u1ecfa Thi\xean \u0110\u1ea1i H\u1eefu","han":"\u5927\u6709","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"C\xf3 nhi\u1ec1u c\u1ee7a c\u1ea3i, ph\xfac l\u1edbn","lines":[1,1,1,1,0,1],"thuongQue":"Ly","haQue":"C\xe0n","haoThe":3},{"so":15,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"\u0110\u1ecba S\u01a1n Khi\xeam","han":"\u8b19","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Khi\xeam t\u1ed1n l\xe0 n\u1ec1n t\u1ea3ng th\xe0nh c\xf4ng","lines":[0,0,1,0,0,0],"thuongQue":"Kh\xf4n","haQue":"C\u1ea5n","haoThe":5},{"so":16,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"L\xf4i \u0110\u1ecba D\u1ef1","han":"\u8c6b","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Vui v\u1ebb, chu\u1ea9n b\u1ecb k\u1ef9 c\xe0ng","lines":[0,0,0,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"Kh\xf4n","haoThe":1},{"so":17,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"Tr\u1ea1ch L\xf4i T\xf9y","han":"\u96a8","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"T\xf9y th\u1eddi m\xe0 h\xe0nh \u0111\u1ed9ng","lines":[1,0,0,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"Ch\u1ea5n","haoThe":3},{"so":18,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"S\u01a1n Phong C\u1ed5","han":"\u8831","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"S\u1eeda sai, di\u1ec7t tr\u1eeb h\u01b0 h\u1ea1i","lines":[0,1,1,0,0,1],"thuongQue":"C\u1ea5n","haQue":"T\u1ed1n","haoThe":3},{"so":19,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"\u0110\u1ecba Tr\u1ea1ch L\xe2m","han":"\u81e8","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ti\u1ebfn l\xean, g\u1ea7n g\u0169i","lines":[1,1,0,0,0,0],"thuongQue":"Kh\xf4n","haQue":"\u0110o\xe0i","haoThe":2},{"so":20,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"Phong \u0110\u1ecba Qu\xe1n","han":"\u89c0","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Quan s\xe1t, \u0111\xe1nh gi\xe1 k\u1ef9 l\u01b0\u1ee1ng","lines":[0,0,0,0,1,1],"thuongQue":"T\u1ed1n","haQue":"Kh\xf4n","haoThe":4},{"so":21,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"H\u1ecfa L\xf4i Ph\u1ec7 H\u1ea1p","han":"\u566c\u55d1","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"X\u1eed l\xfd sai tr\xe1i, h\xecnh ph\u1ea1t","lines":[1,0,0,1,0,1],"thuongQue":"Ly","haQue":"Ch\u1ea5n","haoThe":5},{"so":22,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"S\u01a1n H\u1ecfa B\xed","han":"\u8cc1","phan_loai":"Trung","thongTinQue":"Ki\u1ec3m tra \u0111\xe8n nh\xe0, \u0111\xe8n b\xe0n th\u1edd s\u1ebd hay ch\xe1y - Ki\u1ec3m tra di \u1ea3nh b\xe0n th\u1edd hay c\xf3 v\u1ea5n \u0111\u1ec1","ghi_chu":"Trang tr\xed, h\xecnh th\u1ee9c \u0111\u1eb9p","lines":[1,0,1,0,0,1],"thuongQue":"C\u1ea5n","haQue":"Ly","haoThe":1},{"so":23,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"S\u01a1n \u0110\u1ecba B\xe1c","han":"\u525d","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Suy t\xe0n, m\u1ea5t m\xe1t","lines":[0,0,0,0,0,1],"thuongQue":"C\u1ea5n","haQue":"Kh\xf4n","haoThe":5},{"so":24,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"\u0110\u1ecba L\xf4i Ph\u1ee5c","han":"\u5fa9","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Tr\u1edf l\u1ea1i, h\u1ed3i ph\u1ee5c","lines":[1,0,0,0,0,0],"thuongQue":"Kh\xf4n","haQue":"Ch\u1ea5n","haoThe":1},{"so":25,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"Thi\xean L\xf4i V\xf4 V\u1ecdng","han":"\u7121\u5984","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ch\xe2n th\xe0nh, kh\xf4ng v\u1ecdng t\u01b0\u1edfng","lines":[1,0,0,1,1,1],"thuongQue":"C\xe0n","haQue":"Ch\u1ea5n","haoThe":4},{"so":26,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"S\u01a1n Thi\xean \u0110\u1ea1i S\xfac","han":"\u5927\u755c","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"T\xedch l\u0169y l\u1edbn, nu\xf4i d\u01b0\u1ee1ng","lines":[1,1,1,0,0,1],"thuongQue":"C\u1ea5n","haQue":"C\xe0n","haoThe":2},{"so":27,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"S\u01a1n L\xf4i Di","han":"\u9824","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"D\u01b0\u1ee1ng sinh, nu\xf4i d\u01b0\u1ee1ng \u0111i\u1ec1u \u0111\xfang","lines":[1,0,0,0,0,1],"thuongQue":"C\u1ea5n","haQue":"Ch\u1ea5n","haoThe":4},{"so":28,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"Tr\u1ea1ch Phong \u0110\u1ea1i Qu\xe1","han":"\u5927\u904e","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Qu\xe1 m\u1ee9c, g\xe1nh n\u1eb7ng l\u1edbn","lines":[0,1,1,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"T\u1ed1n","haoThe":4},{"so":29,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"Thu\u1ea7n Kh\u1ea3m","han":"\u574e","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Nguy hi\u1ec3m, v\u01b0\u1ee3t kh\xf3 kh\u0103n","lines":[0,1,0,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"Kh\u1ea3m","haoThe":6},{"so":30,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"Thu\u1ea7n Ly","han":"\u96e2","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"S\xe1ng su\u1ed1t, v\u0103n minh","lines":[1,0,1,1,0,1],"thuongQue":"Ly","haQue":"Ly","haoThe":6},{"so":31,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"Tr\u1ea1ch S\u01a1n H\xe0m","han":"\u54b8","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"C\u1ea3m \u1ee9ng, h\xf2a h\u1ee3p","lines":[0,0,1,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"C\u1ea5n","haoThe":3},{"so":32,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"L\xf4i Phong H\u1eb1ng","han":"\u6046","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"B\u1ec1n v\u1eefng, ki\xean \u0111\u1ecbnh","lines":[0,1,1,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"T\u1ed1n","haoThe":3},{"so":33,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"Thi\xean S\u01a1n \u0110\u1ed9n","han":"\u906f","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"R\xfat lui, tr\xe1nh hi\u1ec3m h\u1ecda","lines":[0,0,1,1,1,1],"thuongQue":"C\xe0n","haQue":"C\u1ea5n","haoThe":2},{"so":34,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"L\xf4i Thi\xean \u0110\u1ea1i Tr\xe1ng","han":"\u5927\u58ef","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"C\u01b0\u1eddng tr\xe1ng, ph\xe1t tri\u1ec3n l\u1edbn","lines":[1,1,1,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"C\xe0n","haoThe":4},{"so":35,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"H\u1ecfa \u0110\u1ecba T\u1ea5n","han":"\u6649","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Th\u0103ng ti\u1ebfn, s\xe1ng su\u1ed1t","lines":[0,0,0,1,0,1],"thuongQue":"Ly","haQue":"Kh\xf4n","haoThe":4},{"so":36,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"\u0110\u1ecba H\u1ecfa Minh Di","han":"\u660e\u5937","phan_loai":"Hung","thongTinQue":"Nh\xe0 c\xf3 vong, vong \u1edf n\u01a1i t\u1ed1i t\u0103m","ghi_chu":"T\u1ed5n th\u01b0\u01a1ng, che gi\u1ea5u \xe1nh s\xe1ng","lines":[1,0,1,0,0,0],"thuongQue":"Kh\xf4n","haQue":"Ly","haoThe":4},{"so":37,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"Phong H\u1ecfa Gia Nh\xe2n","han":"\u5bb6\u4eba","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Gia \u0111\u1ea1o, tr\u1eadt t\u1ef1 trong nh\xe0","lines":[1,0,1,0,1,1],"thuongQue":"T\u1ed1n","haQue":"Ly","haoThe":2},{"so":38,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"H\u1ecfa Tr\u1ea1ch Khu\xea","han":"\u777d","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ly t\xe1n, b\u1ea5t \u0111\u1ed3ng","lines":[1,1,0,1,0,1],"thuongQue":"Ly","haQue":"\u0110o\xe0i","haoThe":4},{"so":39,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"Th\u1ee7y S\u01a1n Ki\u1ec3n","han":"\u8e47","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Tr\u1edf ng\u1ea1i, c\u1ea7n gi\xfap \u0111\u1ee1","lines":[0,0,1,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"C\u1ea5n","haoThe":4},{"so":40,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"L\xf4i Th\u1ee7y Gi\u1ea3i","han":"\u89e3","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Gi\u1ea3i t\u1ecfa, tho\xe1t hi\u1ec3m","lines":[0,1,0,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"Kh\u1ea3m","haoThe":2},{"so":41,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"S\u01a1n Tr\u1ea1ch T\u1ed5n","han":"\u640d","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Gi\u1ea3m \u0111\u1ec3 \u0111\u01b0\u1ee3c, ti\u1ebft ch\u1ebf","lines":[1,1,0,0,0,1],"thuongQue":"C\u1ea5n","haQue":"\u0110o\xe0i","haoThe":6},{"so":42,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"Phong L\xf4i \xcdch","han":"\u76ca","phan_loai":"C\xe1t","thongTinQue":"Nh\xe0 c\xf3 vong - Vong trong nh\xe0 thi\u1ebfu \u0103n","ghi_chu":"L\u1ee3i \xedch, t\u0103ng th\xeam","lines":[1,0,0,0,1,1],"thuongQue":"T\u1ed1n","haQue":"Ch\u1ea5n","haoThe":3},{"so":43,"nguHanh":"Th\u1ed5","giaDinh":"Kh\xf4n","ten":"Tr\u1ea1ch Thi\xean Qu\u1ea3i","han":"\u592c","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb - Nh\xe0 ","ghi_chu":"Quy\u1ebft \u0111o\xe1n, lo\u1ea1i tr\u1eeb c\xe1i x\u1ea5u","lines":[1,1,1,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"C\xe0n","haoThe":5},{"so":44,"nguHanh":"Kim","giaDinh":"C\xe0n","ten":"Thi\xean Phong C\u1ea5u","han":"\u59e4","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"G\u1eb7p g\u1ee1 nguy hi\u1ec3m, n\u1eef m\u1ea1nh","lines":[0,1,1,1,1,1],"thuongQue":"C\xe0n","haQue":"T\u1ed1n","haoThe":1},{"so":45,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"Tr\u1ea1ch \u0110\u1ecba T\u1ee5y","han":"\u8403","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"T\u1eadp h\u1ee3p, t\u1ee5 h\u1ed9i","lines":[0,0,0,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"Kh\xf4n","haoThe":2},{"so":46,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"\u0110\u1ecba Phong Th\u0103ng","han":"\u5347","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Th\u0103ng ti\u1ebfn, \u0111i l\xean","lines":[0,1,1,0,0,0],"thuongQue":"Kh\xf4n","haQue":"T\u1ed1n","haoThe":4},{"so":47,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"Tr\u1ea1ch Th\u1ee7y Kh\u1ed1n","han":"\u56f0","phan_loai":"Hung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Kh\xf3 kh\u0103n, b\u1ecb d\u1ed3n \xe9p","lines":[0,1,0,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"Kh\u1ea3m","haoThe":1},{"so":48,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"Th\u1ee7y Phong T\u1ec9nh","han":"\u4e95","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ngu\u1ed3n g\u1ed1c, t\xe0i nguy\xean","lines":[0,1,1,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"T\u1ed1n","haoThe":5},{"so":49,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"Tr\u1ea1ch H\u1ecfa C\xe1ch","han":"\u9769","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"C\u1ea3i c\xe1ch, thay \u0111\u1ed5i l\u1edbn","lines":[1,0,1,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"Ly","haoThe":4},{"so":50,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"H\u1ecfa Phong \u0110\u1ec9nh","han":"\u9f0e","phan_loai":"C\xe1t","thongTinQue":"Nh\xe0 b\u1ebfp c\xf3 v\u1ea5n \u0111\u1ec1 hay sai phong thu\u1ef7, c\xf3 vong","ghi_chu":"Th\xe0nh t\u1ef1u, vinh hi\u1ec3n","lines":[0,1,1,1,0,1],"thuongQue":"Ly","haQue":"T\u1ed1n","haoThe":2},{"so":51,"nguHanh":"M\u1ed9c","giaDinh":"Ch\u1ea5n","ten":"Thu\u1ea7n Ch\u1ea5n","han":"\u9707","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"\u0110\u1ed9ng, bi\u1ebfn \u0111\u1ed5i b\u1ea5t ng\u1edd","lines":[1,0,0,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"Ch\u1ea5n","haoThe":6},{"so":52,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"Thu\u1ea7n C\u1ea5n","han":"\u826e","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"D\u1eebng l\u1ea1i \u0111\xfang l\xfac","lines":[0,0,1,0,0,1],"thuongQue":"C\u1ea5n","haQue":"C\u1ea5n","haoThe":6},{"so":53,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"Phong S\u01a1n Ti\u1ec7m","han":"\u6f38","phan_loai":"C\xe1t","thongTinQue":"Nh\xe0 hay C\u1ea7u Thang, tolet c\xf3 v\u1ea5n \u0111\u1ec1, \u0110\u1ed3 \u0111\u1ea1c l\u1ed9n x\u1ed9n - Li\xean quan Ti\u1ec1n c\u1ee7a v\xe0 t\xe0i v\u1eadn","ghi_chu":"Ti\u1ebfn d\u1ea7n, t\u1eeb t\u1ed1n","lines":[0,0,1,0,1,1],"thuongQue":"T\u1ed1n","haQue":"C\u1ea5n","haoThe":3},{"so":54,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"L\xf4i Tr\u1ea1ch Quy Mu\u1ed9i","han":"\u6b78\u59b9","phan_loai":"Hung","thongTinQue":"Nh\xe0 c\xf3 vong - Trong nh\xe0 c\xf3 chuy\u1ec7n r\u1ed1i ren, m\u1edd \xe1m, l\xe0m chuy\u1ec7n kh\xf4ng t\u1ed1t - Trong nh\xe0 c\xf3 c\xe1i g\xec ch\u1ea5t \u0111\u1ed1ng l\u1ed9n x\u1ed9n","ghi_chu":"H\xf4n nh\xe2n b\u1ea5t ch\xednh","lines":[1,1,0,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"\u0110o\xe0i","haoThe":3},{"so":55,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"L\xf4i H\u1ecfa Phong","han":"\u8c50","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ph\u1ed3n vinh, s\xe1ng s\u1ee7a","lines":[1,0,1,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"Ly","haoThe":5},{"so":56,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"H\u1ecfa S\u01a1n L\u1eef","han":"\u65c5","phan_loai":"Trung","thongTinQue":"Ki\u1ec3m tra ph\xf2ng kh\xe1ch, nh\xe0 kho, nh\xe0 b\u1ebfp, ch\u1ed7 t\u1ea1m b\u1ee3 phong thu\u1ef7 b\u1ecb sai","ghi_chu":"Du h\xe0nh, kh\xf4ng \u1ed5n \u0111\u1ecbnh","lines":[0,0,1,1,0,1],"thuongQue":"Ly","haQue":"C\u1ea5n","haoThe":1},{"so":57,"nguHanh":"M\u1ed9c","giaDinh":"T\u1ed1n","ten":"Thu\u1ea7n T\u1ed1n","han":"\u5dfd","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Th\xe2m nh\u1eadp, nhu thu\u1eadn","lines":[0,1,1,0,1,1],"thuongQue":"T\u1ed1n","haQue":"T\u1ed1n","haoThe":6},{"so":58,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"Thu\u1ea7n \u0110o\xe0i","han":"\u514c","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Vui v\u1ebb, thu\u1eadn l\u1ee3i","lines":[1,1,0,1,1,0],"thuongQue":"\u0110o\xe0i","haQue":"\u0110o\xe0i","haoThe":6},{"so":59,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"Phong Th\u1ee7y Ho\xe1n","han":"\u6e19","phan_loai":"C\xe1t","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ph\xe2n t\xe1n, khai th\xf4ng","lines":[0,1,0,0,1,1],"thuongQue":"T\u1ed1n","haQue":"Kh\u1ea3m","haoThe":5},{"so":60,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"Th\u1ee7y Tr\u1ea1ch Ti\u1ebft","han":"\u7bc0","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"Ti\u1ebft \u0111\u1ed9, gi\u1edbi h\u1ea1n","lines":[1,1,0,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"\u0110o\xe0i","haoThe":1},{"so":61,"nguHanh":"Th\u1ed5","giaDinh":"C\u1ea5n","ten":"Phong Tr\u1ea1ch Trung Phu","han":"\u4e2d\u5b5a","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"L\xf2ng tin, ch\xe2n th\xe0nh","lines":[1,1,0,0,1,1],"thuongQue":"T\u1ed1n","haQue":"\u0110o\xe0i","haoThe":4},{"so":62,"nguHanh":"Kim","giaDinh":"\u0110o\xe0i","ten":"L\xf4i S\u01a1n Ti\u1ec3u Qu\xe1","han":"\u5c0f\u904e","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"V\u01b0\u1ee3t qu\xe1 nh\u1ecf, linh ho\u1ea1t","lines":[0,0,1,1,0,0],"thuongQue":"Ch\u1ea5n","haQue":"C\u1ea5n","haoThe":4},{"so":63,"nguHanh":"Th\u1ee7y","giaDinh":"Kh\u1ea3m","ten":"Th\u1ee7y H\u1ecfa K\xfd T\u1ebf","han":"\u65e2\u6fdf","phan_loai":"Trung","thongTinQue":"Th\xf4ng tin qu\u1ebb","ghi_chu":"\u0110\xe3 ho\xe0n th\xe0nh, duy tr\xec","lines":[1,0,1,0,1,0],"thuongQue":"Kh\u1ea3m","haQue":"Ly","haoThe":3},{"so":64,"nguHanh":"H\u1ecfa","giaDinh":"Ly","ten":"H\u1ecfa Th\u1ee7y V\u1ecb T\u1ebf","han":"\u672a\u6fdf","phan_loai":"Trung","thongTinQue":"Nh\xe0 b\u1ebfp c\xf3 v\u1ea5n \u0111\u1ec1 (Nh\xecn tolet hay n\u01a1i c\xf3 n\u01b0\u1edbc) - B\u1ebfp ko ch\xe2n - Nh\xe0 d\u1ec5 c\xf3 ng\u01b0\u1eddi ngo\u1ea1i t\xecnh - D\u1ec5 b\u1ec7nh v\u1ec1 H\u1ecfa nh\u01b0 b\u1ec7nh tim, m\xe1u huy\u1ebft, m\u1eaft -  D\u1ec5 b\u1ec7nh v\u1ec1 Th\u1ee7y nh\u01b0 Th\u1eadn y\u1ebfu, sinh l\xfd, ti\u1ec3u \u0111\xeam","ghi_chu":"Ch\u01b0a ho\xe0n th\xe0nh, c\xf2n dang d\u1edf","lines":[0,1,0,1,0,1],"thuongQue":"Ly","haQue":"Kh\u1ea3m","haoThe":3}]'),NC={thapThan:{"Ph\u1ee5 M\u1eabu":{ten:"Ph\u1ee5 M\u1eabu",hanTu:"\u7236\u6bcd",tomTat:"Th\u1ea7n gian kh\u1ed5, ch\u1ee7 b\xf4n ba, kh\xf3 c\xf3 th\u1eeba t\u1ef1. T\xe0i \u0111\u1ed9ng quan v\u01b0\u1ee3ng sinh \u2192 l\u1ee3i v\u0103n. T\xe0i kh\u1eafc Th\u1ebf \u2192 kh\xf4ng v\u1ee3 hi\u1ec1n, kh\xf4ng th\u1ecd l\xe2u.",daiDienCho:"Cha m\u1eb9, \xf4ng b\xe0, c\xe1c b\u1eadc tr\u01b0\u1edfng b\u1ed1i, th\u1ea7y c\xf4, ng\u01b0\u1eddi nu\xf4i d\u01b0\u1ee1ng, b\u1ea3o v\u1ec7, che ch\u1edf cho m\xecnh.",moRong:"Nh\xe0 c\u1eeda, \u0111\u1ea5t \u0111ai, xe c\u1ed9, gi\u1ea5y t\u1edd, h\u1ee3p \u0111\u1ed3ng, s\xe1ch v\u1edf, v\u0103n ki\u1ec7n, tin t\u1ee9c, th\xf4ng tin, b\xe1o c\xe1o, c\xe1c v\u1eadt d\u1ee5ng b\u1ea3o h\u1ed9, ki\u1ebfn tr\xfac, b\u1ec7nh vi\u1ec7n, tr\u01b0\u1eddng h\u1ecdc.",tinhChat:"B\u1ea3o h\u1ed9, sinh d\u01b0\u1ee1ng, r\xe0ng bu\u1ed9c, che ch\u1edf, l\xe0 ngu\u1ed3n g\u1ed1c, n\u1ec1n t\u1ea3ng c\u1ee7a b\u1ea3n th\xe2n.",trongDuDoan:"D\xf9ng khi h\u1ecfi v\u1ec1 cha m\u1eb9, nh\xe0 c\u1eeda, h\u1ecdc h\xe0nh, gi\u1ea5y t\u1edd, xe c\u1ed9, c\xe1c v\u1ea5n \u0111\u1ec1 li\xean quan \u0111\u1ebfn s\u1ef1 b\u1ea3o v\u1ec7, che ch\u1edf."},"T\u1eed T\xf4n":{ten:"T\u1eed T\xf4n",hanTu:"\u5b50\u5b6b",tomTat:"Ph\xfac th\u1ea7n v\xf4 lo v\xf4 ngh\u0129, tai h\u1ecda nh\u1eb9 nh\xe0ng, \u0111\u01b0\u1ee3c ph\xfac \u0111\u1ed9 b\u1ea3o v\u1ec7. Nh\u01b0ng kh\u1eafc Quan Qu\u1ef7 \u2192 b\u1ea5t l\u1ee3i c\u1ea7u danh, c\u1ea7u quan.",daiDienCho:"Con c\xe1i, ch\xe1u ch\u1eaft, th\u1ebf h\u1ec7 sau, h\u1ecdc tr\xf2, \u0111\u1ec7 t\u1eed, ng\u01b0\u1eddi \u0111\u01b0\u1ee3c m\xecnh nu\xf4i d\u01b0\u1ee1ng, b\u1ea3o v\u1ec7.",moRong:"Ngu\u1ed3n v\u1ed1n, ph\xfac th\u1ea7n, v\u1eadt nu\xf4i, \u0111\u1ed9ng v\u1eadt, c\xe1c y\u1ebfu t\u1ed1 mang l\u1ea1i ni\u1ec1m vui, gi\u1ea3i tr\xed, ph\xfac \u0111\u1ee9c, di\u1ec7t tr\u1eeb t\xe0 ma, gi\u1ea3i tr\u1eeb \u01b0u phi\u1ec1n.",tinhChat:"\u0110\u01b0\u1ee3c ta sinh ra, b\u1ea3o h\u1ed9, mang l\u1ea1i ph\xfac l\u1ed9c, vui v\u1ebb, gi\u1ea3i tr\u1eeb tai h\u1ecda, l\xe0 k\u1ebft qu\u1ea3, th\xe0nh qu\u1ea3 c\u1ee7a b\u1ea3n th\xe2n.",trongDuDoan:"D\xf9ng khi h\u1ecfi v\u1ec1 con c\xe1i, ph\xfac l\u1ed9c, v\u1ed1n li\u1ebfng, gi\u1ea3i tr\u1eeb b\u1ec7nh t\u1eadt, c\xe1c v\u1ea5n \u0111\u1ec1 li\xean quan \u0111\u1ebfn s\u1ef1 ph\xe1t tri\u1ec3n, vui v\u1ebb, h\u1eadu v\u1eadn"},"Quan Qu\u1ef7":{ten:"Quan Qu\u1ef7",hanTu:"\u5b98\u9b3c",tomTat:"Th\u1ea7n lo ngh\u0129, th\xe2n kh\xf3 y\xean, kh\xf4ng b\u1ec7nh c\u0169ng g\u1eb7p quan, t\xe0i v\u1eadt hay m\u1ea5t. L\u1ee3i nh\u1ea5t cho c\u1ea7u danh, c\u1ea7u quan. Nh\u1eadp m\u1ed9 kh\xf3, g\u1eb7p xung hi\u1ec3m.",daiDienCho:"Ch\u1ed3ng, b\u1ea1n trai (nam), c\u1ea5p tr\xean, s\u1ebfp, quan ch\u1ee9c, l\xe3nh \u0111\u1ea1o, ng\u01b0\u1eddi ki\u1ec3m so\xe1t, qu\u1ea3n l\xfd.",moRong:"C\xf4ng vi\u1ec7c, ki\u1ec7n t\u1ee5ng, ph\xe1p lu\u1eadt, tai h\u1ecda, b\u1ec7nh t\u1eadt, kh\xed \xe2m, t\xe0 ma, k\u1ebb x\u1ea5u, c\xe1c y\u1ebfu t\u1ed1 g\xe2y \xe1p l\u1ef1c, ki\u1ec3m so\xe1t, tr\xf3i bu\u1ed9c.",tinhChat:"Kh\u1eafc ch\u1ebf, ki\u1ec3m so\xe1t, r\xe0ng bu\u1ed9c, g\xe2y kh\xf3 kh\u0103n, l\xe0 l\u1ef1c l\u01b0\u1ee3ng \u0111\u1ed1i l\u1eadp ho\u1eb7c th\u1eed th\xe1ch v\u1edbi b\u1ea3n th\xe2n.",trongDuDoan:"D\xf9ng khi h\u1ecfi v\u1ec1 c\xf4ng vi\u1ec7c, ki\u1ec7n t\u1ee5ng, b\u1ec7nh t\u1eadt, ch\u1ed3ng (n\u1eef h\u1ecfi), c\xe1c v\u1ea5n \u0111\u1ec1 li\xean quan \u0111\u1ebfn quy\u1ec1n l\u1ef1c, \xe1p l\u1ef1c, ki\u1ec3m so\xe1t"},"Th\xea T\xe0i":{ten:"Th\xea T\xe0i",hanTu:"\u59bb\u8ca1",tomTat:"Ch\u1ee7 t\xe0i vinh, g\u1eb7p T\u1eed T\xf4n sinh \u2192 th\xe2n c\u01b0\u1eddng t\xe0i v\u01b0\u1ee3ng, l\u1ee3i c\u1ea7u quan, ki\u1ec7n tung. B\u1ea5t l\u1ee3i v\u0103n h\u1ecdc, kh\u1eafc cha m\u1eb9. Th\u1ebf \u0111\u1ed9ng bi\u1ebfn huynh \u2192 v\u1ea1n s\u1ef1 hung.",daiDienCho:"V\u1ee3, ng\u01b0\u1eddi y\xeau (n\u1eef), ph\u1ee5 n\u1eef, ng\u01b0\u1eddi d\u01b0\u1edbi quy\u1ec1n, n\xf4 b\u1ed9c, nh\xe2n vi\xean, ng\u01b0\u1eddi gi\xfap vi\u1ec7c.",moRong:"Ti\u1ec1n b\u1ea1c, t\xe0i s\u1ea3n, kinh t\u1ebf, h\xe0ng h\xf3a, v\u1eadt ch\u1ea5t, kho t\xe0ng, l\u01b0\u01a1ng th\u1ef1c, b\u1ebfp, th\u1ef1c v\u1eadt, c\xe1c lo\u1ea1i c\u1ee7a c\u1ea3i, v\u1eadt ch\u1ea5t thi\u1ebft y\u1ebfu.",tinhChat:"B\u1ecb ta kh\u1eafc, \u0111i\u1ec1u khi\u1ec3n, s\u1edf h\u1eefu, l\xe0 ngu\u1ed3n t\xe0i l\u1ed9c, v\u1eadt ch\u1ea5t ph\u1ee5c v\u1ee5 cho b\u1ea3n th\xe2n.",trongDuDoan:"D\xf9ng khi h\u1ecfi v\u1ec1 t\xe0i l\u1ed9c, kinh doanh, ti\u1ec1n b\u1ea1c, v\u1ee3, c\xe1c v\u1ea5n \u0111\u1ec1 li\xean quan \u0111\u1ebfn c\u1ee7a c\u1ea3i, v\u1eadt ch\u1ea5t"},"Huynh \u0110\u1ec7":{ten:"Huynh \u0110\u1ec7",hanTu:"\u5144\u5f1f",tomTat:"Th\u1ea7n c\u01b0\u1edbp t\xe0i, ph\xe1 t\xe0i, th\u01b0\u01a1ng t\u1ed5n v\u1ee3. Kh\xf4ng n\xean c\u1ea7u t\xe0i, \u0111\u1ec1 ph\xf2ng kh\u1eafc v\u1ee3. Quan h\u01b0ng/v\u01b0\u1ee3ng ho\u1eb7c huynh h\xf3a quan \u2192 c\xe0ng hung tai.",daiDienCho:"Anh ch\u1ecb em ru\u1ed9t, anh ch\u1ecb em h\u1ecd, b\u1ea1n b\xe8, \u0111\u1ed3ng nghi\u1ec7p, ng\u01b0\u1eddi ngang h\xe0ng, c\xf9ng vai v\u1ebf.",moRong:"C\u1eeda ng\xf5, nh\xe0 v\u1ec7 sinh, v\xe1ch t\u01b0\u1eddng, c\xe1c y\u1ebfu t\u1ed1 phong th\u1ee7y li\xean quan \u0111\u1ebfn s\u1ef1 chia s\u1ebb, giao ti\u1ebfp.",tinhChat:"C\u1ea1nh tranh, h\u1ed7 tr\u1ee3, c\u1ea3n tr\u1edf, tranh gi\xe0nh, ph\xe1 t\xe0i, \u0111\u1ed1i t\xe1c, giao l\u01b0u, m\u1edf r\u1ed9ng quan h\u1ec7.",trongDuDoan:"D\xf9ng khi h\u1ecfi v\u1ec1 anh em, b\u1ea1n b\xe8, \u0111\u1ed3ng nghi\u1ec7p, c\xe1c m\u1ed1i quan h\u1ec7 ngang h\xe0ng, ho\u1eb7c c\xe1c v\u1ea5n \u0111\u1ec1 li\xean quan \u0111\u1ebfn s\u1ef1 c\u1ea1nh tranh, chia s\u1ebb"}},lucThu:{"Thanh Long":{ten:"Thanh Long",nguHanh:"M\u1ed9c",tomTat:"H\u1ef7 th\u1ea7n may m\u1eafn hanh th\xf4ng. L\xe2m d\u1ee5ng th\u1ea7n \u2192 ti\u1ebfn t\xe0i ti\u1ebfn l\u1ed9c. L\xe2m k\u1ef5 th\u1eadn \u2192 t\u1eedu s\u1eafc tai h\u1ecda, trong vui c\xf3 bi."},"Chu T\u01b0\u1edbc":{ten:"Chu T\u01b0\u1edbc",nguHanh:"H\u1ecfa",tomTat:"X\xedch c\u1ea7m, gi\u1ea5y t\u1edd h\xe0nh ch\xednh, n\xf3ng l\xf2ng vi\u1ec7c kh\u1ea9n. \u0110\u1ed9ng \u2192 ki\u1ec7n t\u1ee5ng/ch\u1edd \u0111\u1ee3i. L\xe2m d\u1ee5ng th\u1ea7n \u2192 tin m\u1eebng v\u0103n th\u01b0. L\xe2m k\u1ef5 th\u1ea7n \u2192 mi\u1ec7ng l\u01b0\u1ee1i th\u1ecb phi."},"C\xe2u Tr\u1ea7n":{ten:"C\xe2u Tr\u1ea7n",nguHanh:"Th\u1ed5 (+)",tomTat:"\u0110\u1ecba ng\u1ee5c, \u0111i\u1ec1n th\u1ed5, c\xe3i v\xe3 th\u1ecb phi. \u0110\u1ed9ng \u2192 x\u1ea5u c\xf3 th\u1ec3 th\u1ea5y tr\u01b0\u1edbc. Tu\u1ea7n tri\u1ec7t kh\xf4ng \u2192 hung chuy\u1ec3n c\xe1t. L\xe2m d\u1ee5ng th\u1ea7n \u2192 thu nh\u1eadp t\xe0i s\u1ea3n c\u1ed1 \u0111\u1ecbnh. L\xe2m k\u1ef5 th\u1ea7n \u2192 tranh ch\u1ea5p gia s\u1ea3n."},"\u0110\u1eb1ng X\xe0":{ten:"\u0110\u1eb1ng X\xe0",nguHanh:"Th\u1ed5 (-)",tomTat:"R\u1eafn bay hi\u1ec3m \u0111\u1ed9c, th\u1ea5t v\u1eadt m\u1ea5t \u0111\u1ed3, vi\u1ec7c kinh d\u1ecb qu\xe1i l\u1ea1. X\u1ea5u kh\xf4ng bi\u1ebft tr\u01b0\u1edbc. L\xe2m d\u1ee5ng th\u1ea7n \u2192 kh\xf4ng nguy hi\u1ec3m. L\xe2m k\u1ef5 th\u1ea7n \u2192 lo s\u1ee3 phi\u1ec1n nhi\u1ec5u kh\xf3 tho\xe1t."},"B\u1ea1ch H\u1ed5":{ten:"B\u1ea1ch H\u1ed5",nguHanh:"Kim",tomTat:"Hung c\u1eafn, tai \u01b0\u01a1ng tang t\xf3c, th\u01b0\u01a1ng hung thi\u1ebfu ph\u1ee5c. Tu\u1ea7n tri\u1ec7t kh\xf4ng \u2192 chuy\u1ec3n t\u1ed1t. L\xe2m d\u1ee5ng th\u1ea7n \u2192 ph\xe1t nh\u01b0 m\xe3nh h\u1ed5. L\xe2m k\u1ef5 th\u1ea7n \u2192 hung th\u01b0\u01a1ng \u0111\u1ed5 m\xe1u."},"Huy\u1ec1n V\u0169":{ten:"Huy\u1ec1n V\u0169",nguHanh:"Th\u1ee7y",tomTat:"\xc1m mu\u1ed9i ch\u1eadm ch\u1ea1p, tr\u1ed9m c\u1eafp r\xecnh r\u1eadp, m\u1edd \u1ea3o ch\u01b0a r\xf5. C\xf3 th\u1ec3 t\u1ed1t/x\u1ea5u, \u1edf th\u1ebf gi\u1edbi v\xf4 h\xecnh. L\xe2m d\u1ee5ng th\u1ea7n \u2192 ng\u01b0\u1eddi ng\u1ea7m gi\xfap ph\xe1t \u0111\u1ea1t. L\xe2m k\u1ef5 th\u1ea7n \u2192 \u0111\u1ea1o t\u1eb7c, tai h\u1ecda nam n\u1eef."}},haoTheUng:{The:{ten:"Th\u1ebf",tomTat:"H\xe0o Th\u1ebf l\xe0 b\u1ea3n th\xe2n, gi\u1ed1ng nh\u01b0 c\u01a1 th\u1ec3 c\u1ee7a con ng\u01b0\u1eddi, h\u01b0ng v\u01b0\u1ee3ng l\xe0 t\u1ed1t nh\u1ea5t, l\xe0m vi\u1ec7c hanh th\xf4ng, m\u01b0u c\u1ea7u nh\u01b0 \xfd.",vuong:"H\xe0o Th\u1ebf h\u01b0ng v\u01b0\u1ee3ng, l\u1ea1i \u0111\u01b0\u1ee3c ng\xe0y, th\xe1ng, h\xe0o \u0111\u1ed9ng, d\u1ee5ng th\u1ea7n sinh h\u1ee3p, ho\u1eb7c \u0111\u01b0\u1ee3c sinh h\u1ee3p c\u1ee7a m\u1ed9t trong nh\u1eefng y\u1ebfu t\u1ed1 tr\xean, nh\u01b0 l\xe0 g\u1ea5m th\xeau hoa.",khong:"H\xe0o Th\u1ebf n\u1ebfu g\u1eb7p Tu\u1ea7n kh\xf4ng Nguy\u1ec7t ph\xe1, h\u01b0u t\xf9 v\xf4 kh\xed l\xe0 kh\xf4ng t\u1ed1t; l\u1ea1i g\u1eb7p h\xecnh xung kh\u1eafc h\u1ea1i, l\xe0 hung th\xeam hung.",tuongSinh:"Th\u1ebf - \u1ee8ng t\u01b0\u01a1ng sinh l\xe0 t\u1ed1t, t\u01b0\u01a1ng kh\u1eafc t\u1ea5t hung.",hoaHop:"Th\u1ebf - \u1ee8ng h\xf2a h\u1ee3p l\xe0 c\u1ea7u s\u1ef1 \u0111\u1ec1u \u0111\u01b0\u1ee3c.",theDong:"Th\u1ebf \u0111\u1ed9ng Th\u1ebf Kh\xf4ng l\xe0 t\xe2m ta kh\xf4ng th\u1eadt.",biKhac:"H\xe0o Th\u1ebf b\u1ecb kh\u1eafc l\xe0 b\u1ea5t l\u1ee3i cho b\u1ea3n th\xe2n; h\xe0o \u1ee8ng b\u1ecb kh\u1eafc l\xe0 b\u1ea5t l\u1ee3i cho \u0111\u1ed1i ph\u01b0\u01a1ng."},Ung:{ten:"\u1ee8ng",tomTat:"H\xe0o \u1ee8ng l\xe0 \u0111\u1ed1i ph\u01b0\u01a1ng.",ungDong:"\u1ee8ng \u0111\u1ed9ng \u1ee8ng Kh\xf4ng l\xe0 ng\u01b0\u1eddi kh\xf4ng th\u1eadt.",hoaHop:"Th\u1ebf - \u1ee8ng h\xf2a h\u1ee3p l\xe0 c\u1ea7u s\u1ef1 \u0111\u1ec1u \u0111\u01b0\u1ee3c."}}};function jC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"}))}const CC=t.forwardRef(jC);function TC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M11.097 1.515a.75.75 0 0 1 .589.882L10.666 7.5h4.47l1.079-5.397a.75.75 0 1 1 1.47.294L16.665 7.5h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.2 6h3.585a.75.75 0 0 1 0 1.5h-3.885l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103h-4.47l-1.08 5.397a.75.75 0 1 1-1.47-.294l1.02-5.103H3.75a.75.75 0 0 1 0-1.5h3.885l1.2-6H5.25a.75.75 0 0 1 0-1.5h3.885l1.08-5.397a.75.75 0 0 1 .882-.588ZM10.365 9l-1.2 6h4.47l1.2-6h-4.47Z",clipRule:"evenodd"}))}const SC=t.forwardRef(TC);function _C(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z",clipRule:"evenodd"}))}const EC=t.forwardRef(_C);function BC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 0 1-1.313-1.313V9.564Z",clipRule:"evenodd"}))}const MC=t.forwardRef(BC);function kC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),t.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))}const LC=t.forwardRef(kC);function IC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"}),t.createElement("path",{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"}),t.createElement("path",{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"}))}const DC=t.forwardRef(IC);function PC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),t.createElement("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"}))}const FC=t.forwardRef(PC);function UC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const RC=t.forwardRef(UC);function OC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const HC=t.forwardRef(OC),QC=(e,t)=>{const n=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],r=(10-["Gi\xe1p","\u1ea4t","B\xednh","\u0110inh","M\u1eadu","K\u1ef7","Canh","T\xe2n","Nh\xe2m","Qu\xfd"].indexOf(e))%10,s=(n.indexOf(t)+r)%12;return[n[(s+0)%12],n[(s+1)%12]]},zC=(e,t)=>{const n={"H\u1ee3i":"Th\xecn","T\xfd":"Th\xecn","D\u1ea7n":"M\xf9i","M\xe3o":"M\xf9i","T\u1ef5":"Tu\u1ea5t","Ng\u1ecd":"Tu\u1ea5t","Th\xe2n":"S\u1eedu","D\u1eadu":"S\u1eedu"},r=n[e]?[n[e]]:[];return"undefined"===typeof t?r:r.includes(t)},VC=(e,t)=>{const n={"H\u1ee3i":"T\u1ef5","T\xfd":"T\u1ef5","D\u1ea7n":"Th\xe2n","M\xe3o":"Th\xe2n","T\u1ef5":"H\u1ee3i","Ng\u1ecd":"H\u1ee3i","Th\xe2n":"D\u1ea7n","D\u1eadu":"D\u1ea7n"},r=n[e]?[n[e]]:[];return"undefined"===typeof t?r:r.includes(t)},KC=()=>{var e,n,r,s,i,a,o,l,c,u,d,h,m,A,g,p,f,x,v,y,b,w,N,j,C,T,S,_,E,B,M,k,L,I,D,P,F,U,R,O,H,Q,z,V,K;Gb("luchao");const{countdownInfo:G,cancelCountdown:q,skipCountdownAndDeductNow:W}=pw("luchao"),{userStars:$,currentUser:X,isEmailVerified:Y}=Aw(),J=X&&Y,[Z,ee]=(0,t.useState)(new Date),[te,ne]=(0,t.useState)(null),[re,se]=(0,t.useState)(Z.getMonth()+1),[ie,ae]=(0,t.useState)(Z.getFullYear()),[oe,le]=(0,t.useState)(null),[ce,ue]=(0,t.useState)(null),[de,he]=(0,t.useState)(null),[me,Ae]=(0,t.useState)(!1),[ge,pe]=(0,t.useState)("datetime"),[fe,xe]=(0,t.useState)(""),[ve,ye]=(0,t.useState)(""),[be,we]=(0,t.useState)(null),[Ne,je]=(0,t.useState)(null),[Ce,Te]=(0,t.useState)("all"),[Se,_e]=(0,t.useState)("asc"),[Ee,Be]=(0,t.useState)(null),[Me,ke]=(0,t.useState)(null),[Le,Ie]=(0,t.useState)(!1),[De,Pe]=(0,t.useState)(null),[Fe,Ue]=(0,t.useState)(Array(6).fill(null)),[Re,Oe]=(0,t.useState)(null),[He,Qe]=(0,t.useState)(null),[ze,Ve]=(0,t.useState)(null),[Ke,Ge]=(0,t.useState)(!1),[qe,We]=(0,t.useState)(!0),[$e,Xe]=(0,t.useState)(!1),[Ye,Je]=(0,t.useState)(!1),[Ze,et]=(0,t.useState)(!1),[tt,nt]=(0,t.useState)(!1),[rt,st]=(0,t.useState)(!1),[it,at]=(0,t.useState)(!1),[ot,lt]=(0,t.useState)(!1),[ct,ut]=(0,t.useState)(null),[dt,ht]=(0,t.useState)(null),[mt,gt]=(0,t.useState)(null),[pt,ft]=(0,t.useState)(null),[xt,vt]=(0,t.useState)(null),[yt,bt]=(0,t.useState)(null),[wt,Nt]=(0,t.useState)(null),[jt,Ct]=(0,t.useState)(null),[Tt,St]=(0,t.useState)(null),[_t,Et]=(0,t.useState)(null),[Bt,Mt]=(0,t.useState)(null),[kt,Lt]=(0,t.useState)(null),[It,Dt]=(0,t.useState)(null),[Pt,Ft]=(0,t.useState)(null),[Ut,Rt]=(0,t.useState)(null),[Ot,Ht]=(0,t.useState)(null),[Qt,zt]=(0,t.useState)(null),[Vt,Kt]=(0,t.useState)(null),[Gt,qt]=(0,t.useState)(null),[Wt,$t]=(0,t.useState)(null),[Xt,Yt]=(0,t.useState)(null),[Jt,Zt]=(0,t.useState)(null),[en,tn]=(0,t.useState)(!1),[nn,rn]=(0,t.useState)(!1),[sn,an]=(0,t.useState)(!1),[on,ln]=(0,t.useState)(!1),[cn,un]=(0,t.useState)(!1),[dn,hn]=(0,t.useState)(!1),[mn,An]=(0,t.useState)(!1),gn=(e,t)=>new Date(t,e,0).getDate(),pn=Array.from({length:400},((e,t)=>1800+t)),fn=Array.from({length:12},((e,t)=>t+1)),xn=(Array.from({length:gn(re,ie)},((e,t)=>t+1)),[{start:23,end:1,name:"T\xfd (23-1h)"},{start:1,end:3,name:"S\u1eedu (1-3h)"},{start:3,end:5,name:"D\u1ea7n (3-5h)"},{start:5,end:7,name:"M\xe3o (5-7h)"},{start:7,end:9,name:"Th\xecn (7-9h)"},{start:9,end:11,name:"T\u1ef5 (9-11h)"},{start:11,end:13,name:"Ng\u1ecd (11-13h)"},{start:13,end:15,name:"M\xf9i (13-15h)"},{start:15,end:17,name:"Th\xe2n (15-17h)"},{start:17,end:19,name:"D\u1eadu (17-19h)"},{start:19,end:21,name:"Tu\u1ea5t (19-21h)"},{start:21,end:23,name:"H\u1ee3i (21-23h)"}]);(0,t.useEffect)((()=>{const e=()=>{const e=(new Date).getHours();ue({hour:e,minute:0}),de||he({hour:e,minute:0})};e();const t=setInterval(e,36e5);return()=>clearInterval(t)}),[]),(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&G.isCountingDown&&W()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[G.isCountingDown,W]);const vn=e=>{const t=xn[parseInt(e.target.value)].start;he({hour:t,minute:0}),Ae(!1),le(null),we(null)},yn=e=>{if(e>=23||e<1)return 0;for(let t=1;t<xn.length;t++)if(e>=xn[t].start&&e<xn[t].end)return t;return 0},bn=e=>({"T\xfd":{ten:"T\xfd",so:1,amduong:"D\u01b0\u01a1ng"},"S\u1eedu":{ten:"S\u1eedu",so:2,amduong:"\xc2m"},"D\u1ea7n":{ten:"D\u1ea7n",so:3,amduong:"D\u01b0\u01a1ng"},"M\xe3o":{ten:"M\xe3o",so:4,amduong:"\xc2m"},"Th\xecn":{ten:"Th\xecn",so:5,amduong:"D\u01b0\u01a1ng"},"T\u1ef5":{ten:"T\u1ef5",so:6,amduong:"\xc2m"},"Ng\u1ecd":{ten:"Ng\u1ecd",so:7,amduong:"D\u01b0\u01a1ng"},"M\xf9i":{ten:"M\xf9i",so:8,amduong:"\xc2m"},"Th\xe2n":{ten:"Th\xe2n",so:9,amduong:"D\u01b0\u01a1ng"},"D\u1eadu":{ten:"D\u1eadu",so:10,amduong:"\xc2m"},"Tu\u1ea5t":{ten:"Tu\u1ea5t",so:11,amduong:"D\u01b0\u01a1ng"},"H\u1ee3i":{ten:"H\u1ee3i",so:12,amduong:"\xc2m"}}[e]||{ten:"",so:0,amduong:""}),wn=e=>({1:{ten:"C\xe0n",amduong:"D\u01b0\u01a1ng"},2:{ten:"\u0110o\xe0i",amduong:"\xc2m"},3:{ten:"Ly",amduong:"\xc2m"},4:{ten:"Ch\u1ea5n",amduong:"D\u01b0\u01a1ng"},5:{ten:"T\u1ed1n",amduong:"\xc2m"},6:{ten:"Kh\u1ea3m",amduong:"D\u01b0\u01a1ng"},7:{ten:"C\u1ea5n",amduong:"D\u01b0\u01a1ng"},8:{ten:"Kh\xf4n",amduong:"\xc2m"}}[e]||{ten:"",amduong:""}),Nn=(e,t)=>wC.find((n=>n.thuongQue===e&&n.haQue===t)),jn=["T\xfd","D\u1ea7n","Th\xecn","Ng\u1ecd","Th\xe2n","Tu\u1ea5t"],Cn=["H\u1ee3i","D\u1eadu","M\xf9i","T\u1ef5","M\xe3o","S\u1eedu"];function Tn(e,t){let n,r,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"C\xe0n"===e?(n=jn,r=s?3:0):"Kh\xf4n"===e?(n=Cn,r=s?5:2):"Ch\u1ea5n"===e?(n=jn,r=s?3:0):"T\u1ed1n"===e?(n=Cn,r=s?2:5):"Kh\u1ea3m"===e?(n=jn,r=s?4:1):"Ly"===e?(n=Cn,r=s?1:4):"C\u1ea5n"===e?(n=jn,r=s?5:2):"\u0110o\xe0i"===e?(n=Cn,r=s?0:3):(n=jn,r=0),n[(r+(t-1))%6]}const Sn=(e,t)=>{var n;return(null===(n={Kim:{Kim:"Huynh \u0110\u1ec7","Th\u1ee7y":"T\u1eed T\xf4n","M\u1ed9c":"Th\xea T\xe0i","H\u1ecfa":"Quan Qu\u1ef7","Th\u1ed5":"Ph\u1ee5 M\u1eabu"},"M\u1ed9c":{"M\u1ed9c":"Huynh \u0110\u1ec7","H\u1ecfa":"T\u1eed T\xf4n","Th\u1ed5":"Th\xea T\xe0i",Kim:"Quan Qu\u1ef7","Th\u1ee7y":"Ph\u1ee5 M\u1eabu"},"Th\u1ee7y":{"Th\u1ee7y":"Huynh \u0110\u1ec7","M\u1ed9c":"T\u1eed T\xf4n","H\u1ecfa":"Th\xea T\xe0i","Th\u1ed5":"Quan Qu\u1ef7",Kim:"Ph\u1ee5 M\u1eabu"},"H\u1ecfa":{"H\u1ecfa":"Huynh \u0110\u1ec7","Th\u1ed5":"T\u1eed T\xf4n",Kim:"Th\xea T\xe0i","Th\u1ee7y":"Quan Qu\u1ef7","M\u1ed9c":"Ph\u1ee5 M\u1eabu"},"Th\u1ed5":{"Th\u1ed5":"Huynh \u0110\u1ec7",Kim:"T\u1eed T\xf4n","Th\u1ee7y":"Th\xea T\xe0i","M\u1ed9c":"Quan Qu\u1ef7","H\u1ecfa":"Ph\u1ee5 M\u1eabu"}}[e])||void 0===n?void 0:n[t])||""};function _n(e){if(!e)return[];const t=e.thuongQue,n=e.haQue,r=[];for(let s=0;s<6;s++){let i=s>=3,a=Tn(i?t:n,i?s-2:s+1,i),o=Fn(a),l=Sn(e.nguHanh,o);r.push({index:s+1,type:1===e.lines[s]?"yang":"yin",chi:a,nguHanh:o,thapThan:l})}return r}const En=(e,t,n,r,s)=>{let i=(t+n+r+s)%6;0===i&&(i=6);const a=[...e],o=i-1;a[o]=1===a[o]?0:1;const l=e=>({111:"C\xe0n",110:"\u0110o\xe0i",101:"Ly",100:"Ch\u1ea5n","011":"T\u1ed1n","010":"Kh\u1ea3m","001":"C\u1ea5n","000":"Kh\xf4n"}[e.join("")]||""),c=[a[3],a[4],a[5]],u=[a[0],a[1],a[2]],d=l(c),h=l(u);return{lines:a,queBien:wC.find((e=>e.thuongQue===d&&e.haQue===h)),soDu:i}},Bn=e=>{pe(e.target.value),Ae(!1),le(null)};function Mn(e){if(e>=23||e<1)return 0;for(let t=1;t<xn.length;t++)if(e>=xn[t].start&&e<xn[t].end)return t;return 0}const kn=e=>{let{type:t,active:n,isDungThan:r,isHaoThe:s,isHaoUng:i}=e;return(0,At.jsx)("div",{className:"my-1 flex justify-center ",children:"yang"===t?(0,At.jsx)("div",{className:`!h-1.5 !md:h-2 !w-16 !md:w-24 !rounded !px-0 ${n?"bg-orange-500 button-style":"bg-gray-200"} ${r?"border-2 border-purple-500":""} ${s?"haothe":""} ${i?"haoung":""}`}):(0,At.jsxs)("div",{className:"!h-1.5 !md:h-2 !w-16 !md:w-24 flex justify-between items-center",children:[(0,At.jsx)("div",{className:`!h-1.5 !md:h-2 !w-10 !md:w-12 !rounded !px-0 ${n?"bg-orange-500 button-style":"bg-gray-200"} ${r?"border-2 border-purple-500":""} ${s?"haothe":""} ${i?"haoung":""}`}),(0,At.jsx)("div",{className:"w-4"}),(0,At.jsx)("div",{className:`!h-1.5 !md:h-2 !w-10 !md:w-12 !rounded !px-0 ${n?"bg-orange-500 button-style":"bg-gray-200"} ${r?"border-2 border-purple-500":""} ${s?"haothe":""} ${i?"haoung":""}`})]})})},Ln=["T.Long","C.T\u01b0\u1edbc","C.Tr\u1ea7n","\u0110.X\xe0","B.H\u1ed5","H.V\u0169"],In=e=>{var t,n,r,s;let{lines:i,activeIndex:a,haoInfo:o,que:l,fullThapThan:c,hideTheUng:u,lucThuArr:d,activeIndex2:h}=e,m=null,A=null;null!==l&&void 0!==l&&l.haoThe&&(m=l.haoThe-1,A=(m+3)%6);const g=null===oe||void 0===oe||null===(t=oe.canChi)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.split(" ")[0],p=null===oe||void 0===oe||null===(r=oe.canChi)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.split(" ")[1],f=!d&&g&&p?QC(g,p):[],x=c&&l?Rn(l):o;return(0,At.jsx)("div",{className:"flex flex-col-reverse relative md:ml-0 -ml-[100px]",children:i.map(((e,t)=>{var n;return(0,At.jsxs)("div",{className:`flex items-center md:gap-2 gap-3 ${0===t||3===t?"bg-yellow-10":""} \n                            ${Ee&&l===(null===be||void 0===be?void 0:be.que)&&(Ee.index===t||null!==x&&void 0!==x&&null!==(n=x[t])&&void 0!==n&&n.thapThanFromThuan&&x[t].thapThanFromThuan.split(" ")[0]===Ee.thapThan)?"bg-purple-10 rounded":""}`,children:[d&&(0,At.jsx)("div",{className:"flex flex-col items-end w-[100px] mr-1 text-xs",children:(0,At.jsx)("span",{className:""+(a===t?"text-style":"text-gray-600"),children:d[t]})}),!d&&(0,At.jsxs)("div",{className:"flex flex-col items-end w-[100px] mr-1 text-[11px] font-bold",children:[!u&&m===t&&(0,At.jsx)("span",{className:"text-sky-600",children:"Th\u1ebf"}),!u&&A===t&&(0,At.jsx)("span",{className:"text-lime-600",children:"\u1ee8ng"})]}),(0,At.jsx)("div",{children:(0,At.jsx)(kn,{type:1===e?"yang":"yin",active:a===t||h===t,isDungThan:Ee&&l===(null===be||void 0===be?void 0:be.que)&&Ee.index===t,isHaoThe:!u&&m===t,isHaoUng:!u&&A===t})}),(null===x||void 0===x?void 0:x[t])&&(0,At.jsxs)("div",{className:"text-xs text-gray-700 flex gap-2 text-left items-center relative",children:[(0,At.jsxs)("span",{className:`font-normal w-[60px] ${a===t||h===t?"text-style font-semibold":""} ${Ee&&l===(null===be||void 0===be?void 0:be.que)&&Ee.index===t?"text-purple-600 font-semibold":""} ${u||m!==t?"":"text-sky-600 font-semibold"} ${u||A!==t?"":"text-lime-600 font-semibold"}`,children:[" ",x[t].thapThan,x[t].fromThuan&&(0,At.jsx)("span",{className:"ml-1 text-[10px] text-blue-500",children:"(t\u1eeb qu\u1ebb thu\u1ea7n)"}),x[t].thapThanFromThuan&&l&&((e,n)=>{const r=Un(l.giaDinh||l.ho||l.hoGiaDinh||l.thuongQue),s=r?_n(r):[],i=(null===(e=s[t])||void 0===e?void 0:e.chi)||"",a=(null===(n=s[t])||void 0===n?void 0:n.nguHanh)||"";return(0,At.jsxs)("div",{className:"absolute top-0 left-[140px] w-[120px] flex gap-1 items-center",children:[(0,At.jsxs)("span",{children:[x[t].thapThanFromThuan.split(" ")[0].slice(0,1),".",x[t].thapThanFromThuan.split(" ")[1]]}),(0,At.jsx)("span",{className:Pn(a),children:i})]})})()]}),(0,At.jsx)("span",{className:`w-[30px] ${a===t||h===t?"text-style":""} ${Ee&&l===(null===be||void 0===be?void 0:be.que)&&Ee.index===t?"text-purple-600":"text-gray-600"} ${u||m!==t?"":"text-blue-600 font-semibold"} ${u||A!==t?"":"text-green-600 font-semibold"}`,children:x[t].chi}),(0,At.jsxs)("span",{className:`${Pn(x[t].nguHanh)} font-semibold ${u||m!==t?"":"text-blue-600"} ${u||A!==t?"":"text-green-600"}`,children:[" ",x[t].nguHanh]}),f.includes(x[t].chi)&&(0,At.jsx)("span",{className:"bg-gray-500 text-white font-semibold ml-1 px-1 rounded text-[10px] md:translate-x-[60px] translate-x-[-166px] cursor-help",title:`Kh\xf4ng Vong t\u1eeb can ng\xe0y ${g}: ${f.join(", ")}`,children:"KV"})]})]},t)}))})},Dn=e=>e?e.includes("C\xe1t")?"text-green-600 font-bold":e.includes("Hung")?"text-red-600 font-bold":e.includes("Trung")?"text-yellow-600 font-bold":"":"",Pn=e=>{switch(e){case"Kim":return"text-yellow-500 ";case"M\u1ed9c":return"text-green-600 ";case"Th\u1ee7y":return"text-blue-600 ";case"H\u1ecfa":return"text-red-500 ";case"Th\u1ed5":return"text-amber-700 ";default:return""}},Fn=e=>["T\xfd","H\u1ee3i"].includes(e)?"Th\u1ee7y":["D\u1ea7n","M\xe3o"].includes(e)?"M\u1ed9c":["Th\xecn","Tu\u1ea5t","S\u1eedu","M\xf9i"].includes(e)?"Th\u1ed5":["T\u1ef5","Ng\u1ecd"].includes(e)?"H\u1ecfa":["Th\xe2n","D\u1eadu"].includes(e)?"Kim":"",Un=e=>{const t={"C\xe0n":1,"Kh\xf4n":2,"Kh\u1ea3m":29,Ly:30,"Ch\u1ea5n":51,"T\u1ed1n":57,"C\u1ea5n":52,"\u0110o\xe0i":58}[e];return wC.find((e=>e.so===t))};function Rn(e){if(!e)return[];const t=_n(e),n=t.map((e=>e.thapThan)),r=["Ph\u1ee5 M\u1eabu","Huynh \u0110\u1ec7","T\u1eed T\xf4n","Th\xea T\xe0i","Quan Qu\u1ef7"].filter((e=>!n.includes(e))),s=Un(e.giaDinh||e.ho||e.hoGiaDinh||e.thuongQue),i=s?_n(s):[];let a=t.map(((e,t)=>({...e})));return r.forEach((e=>{const t=i.findIndex((t=>t.thapThan===e));-1!==t&&(a[t].thapThan!==e?a[t].thapThanFromThuan=e:a[t]={...a[t],thapThan:e,fromThuan:!0})})),a}const On=e=>{let{show:t,onClose:n,que:r,onSave:s}=e;if(!t)return null;const i=e=>({"C\xe0n":1,"\u0110o\xe0i":2,Ly:3,"Ch\u1ea5n":4,"T\u1ed1n":5,"Kh\u1ea3m":6,"C\u1ea5n":7,"Kh\xf4n":8}[e]||1);return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 w-[400px] text-gray-200",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-4 border-b pb-3 -mx-6",children:"Ch\u1ec9nh s\u1eeda qu\u1ebb"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Th\u01b0\u1ee3ng qu\xe1i"}),(0,At.jsx)("select",{className:"w-full border rounded px-2 py-1 text-gray-600",value:i(r.thuongQue.ten),onChange:e=>{const t={...r},n=parseInt(e.target.value);t.thuongQue=wn(n),Pe(t)},children:[1,2,3,4,5,6,7,8].map((e=>{const t=wn(e);return(0,At.jsx)("option",{value:e,children:t.ten},e)}))})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium mb-1",children:"H\u1ea1 qu\xe1i"}),(0,At.jsx)("select",{className:"w-full border rounded px-2 py-1 text-gray-600",value:i(r.haQue.ten),onChange:e=>{const t={...r},n=parseInt(e.target.value);t.haQue=wn(n),Pe(t)},children:[1,2,3,4,5,6,7,8].map((e=>{const t=wn(e);return(0,At.jsx)("option",{value:e,children:t.ten},e)}))})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium mb-1",children:"H\xe0o \u0111\u1ed9ng"}),(0,At.jsxs)("select",{className:"w-full border rounded px-2 py-1 text-gray-600",value:r.haoDong,onChange:e=>{const t={...r};t.haoDong=parseInt(e.target.value),Pe(t)},children:[(0,At.jsx)("option",{value:"0",children:"Kh\xf4ng c\xf3"}),[1,2,3,4,5,6].map((e=>(0,At.jsxs)("option",{value:e,children:["H\xe0o ",e]},e)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium mb-1",children:"H\xe0o \u0111\u1ed9ng th\u1ee9 2"}),(0,At.jsxs)("select",{className:"w-full border rounded px-2 py-1 text-gray-600",value:r.haoDong2||0,onChange:e=>{const t={...r};t.haoDong2=parseInt(e.target.value),Pe(t)},children:[(0,At.jsx)("option",{value:"0",children:"Kh\xf4ng c\xf3"}),[1,2,3,4,5,6].map((e=>(0,At.jsxs)("option",{value:e,children:["H\xe0o ",e]},e)))]})]})]}),(0,At.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,At.jsx)("button",{className:"px-4 py-2 border rounded text-gray-200",onClick:n,children:"H\u1ee7y"}),(0,At.jsx)("button",{className:"px-4 py-2 !text-white rounded  button-style",onClick:()=>s(De),children:"L\u01b0u"})]})]})})},Hn=()=>{Ge(!0),We(!1);let e=0;const t=setInterval((()=>{const n=Array(6).fill(null).map((()=>Math.random()<.5?"yin":"yang"));if(Ue(n),e++,e>=30){clearInterval(t),Ge(!1);const e=new Date,r=Mn(de?de.hour:e.getHours()),s=r+1;Ve({chi:Dw[r],number:s});let i=(s+(Math.floor(12*Math.random())+1))%6;0===i&&(i=6),Oe(i);const a=n.map((e=>"yang"===e?1:0)),o=[a[3],a[4],a[5]],l=[a[0],a[1],a[2]],c=e=>({111:"C\xe0n",110:"\u0110o\xe0i",101:"Ly",100:"Ch\u1ea5n","011":"T\u1ed1n","010":"Kh\u1ea3m","001":"C\u1ea5n","000":"Kh\xf4n"}[e.join("")]||""),u=c(o),d=c(l),h=Nn(u,d),m=[...a],A=i-1;m[A]=1===m[A]?0:1;const g=[m[3],m[4],m[5]],p=[m[0],m[1],m[2]],f=c(g),x=c(p),v=Nn(f,x),y=zw(e.getDate(),e.getMonth()+1,e.getFullYear()),b=Vw(y),w=Gw(y.jd),N=(Iw.indexOf(w)+r)%10,j=`${Iw[N]} ${Dw[r]}`;le({method:"yin-yang",solarDate:`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`,lunarDate:`${y.day}/${y.month}${y.leap,""}/${y.year}`,canChi:b,currentCanChiHour:j,fullCanChi:`${j} - ${b[0]} - ${b[1]} - ${b[2]}`}),je({hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}),we({thuongQue:wn(Object.keys(c).indexOf(o.join(""))+1),haQue:wn(Object.keys(c).indexOf(l.join(""))+1),numbers:{thuongQue:Object.keys(c).indexOf(o.join(""))+1,haQue:Object.keys(c).indexOf(l.join(""))+1},que:h,queBien:{lines:m,queBien:v,soDu:i}}),Ae(!0)}}),100)};(0,t.useEffect)((()=>{We(!0)}),[ge]);const Qn=e=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2?arguments[2]:void 0;if(!(arguments.length>3?arguments[3]:void 0)||(arguments.length>4?arguments[4]:void 0))return;const r=e.accelerationIncludingGravity;if(r){const{x:e,y:s,z:i}=r;Math.sqrt(e*e+s*s+i*i)>t&&n()}}(e,30,Hn,$e,Ke)};(0,t.useEffect)((()=>{"granted"===localStorage.getItem("shakePermission")?Xe(!0):(localStorage.removeItem("shakePermission"),Xe(!1))}),[]),(0,t.useEffect)((()=>($e&&window.addEventListener("devicemotion",Qn),()=>{window.removeEventListener("devicemotion",Qn)})),[$e,Ke]),(0,t.useEffect)((()=>()=>{G.isCountingDown&&q()}),[G.isCountingDown,q]);const zn=(e,t)=>CN[e]===t||CN[t]===e,Vn=(e,t)=>BN.some((n=>n.includes(e)&&n.includes(t))),Kn=(e,t)=>jN[e]===t||jN[t]===e,Gn=(e,t)=>e&&t?e===t?{type:"thai_tue",message:"Th\xe1i Tu\u1ebf",color:"text-green-600",highlight:"bg-green-900/20"}:zn(e,t)?{type:"tue_pha",message:"Tu\u1ebf Ph\xe1",color:"text-red-600",highlight:"bg-red-900/20"}:{type:"normal",message:"B\xecnh th\u01b0\u1eddng",color:"text-gray-600",highlight:"bg-gray-900/20"}:null,qn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Th\xe1ng/Ng\xe0y";if(!e||!t)return null;const r=[],s="Th\xe1ng"===n,i=Fn(e),a=Fn(t);let o=null;e===t?(r.push({type:s?"nguyet_kien":"nhat_kien",message:s?"Nguy\u1ec7t Ki\u1ebfn":"Nh\u1eadt Ki\u1ebfn",color:"text-green-600",highlight:"bg-green-900/20"}),r.push({type:s?"nguyet_kien_note":"nhat_kien_note",message:`${n} tr\xf9ng v\u1edbi D\u1ee5ng th\u1ea7n (${e})`,color:"text-gray-500",highlight:""}),o=s?"V\u01b0\u1ee3ng Th\xe1ng":"V\u01b0\u1ee3ng Ng\xe0y"):r.push({type:s?"nguyet_kien":"nhat_kien",message:s?"Kh\xf4ng Nguy\u1ec7t Ki\u1ebfn":"Kh\xf4ng Nh\u1eadt Ki\u1ebfn",color:"text-gray-400",highlight:""}),zn(t,e)&&r.push({type:s?"nguyet_pha":"nhat_pha",message:s?"Nguy\u1ec7t Ph\xe1":"Nh\u1eadt Ph\xe1",color:"text-red-600",highlight:"bg-red-900/20"}),Vn(e,t)?(r.push({type:"tam_hop",message:"Tam H\u1ee3p",color:"text-green-600",highlight:"bg-green-900/20"}),r.push({type:"tam_hop_note",message:`C\u1eb7p Tam H\u1ee3p: ${e}, ${t}`,color:"text-gray-500",highlight:""})):r.push({type:"tam_hop",message:"Kh\xf4ng Tam H\u1ee3p",color:"text-gray-400",highlight:""}),Kn(e,t)?(r.push({type:"nhi_hop",message:"Nh\u1ecb H\u1ee3p",color:"text-green-600",highlight:"bg-green-900/20"}),r.push({type:"nhi_hop_note",message:`C\u1eb7p Nh\u1ecb H\u1ee3p: ${e}, ${t}`,color:"text-gray-500",highlight:""})):r.push({type:"nhi_hop",message:"Kh\xf4ng Nh\u1ecb H\u1ee3p",color:"text-gray-400",highlight:""}),zn(e,t)?(r.push({type:"xung",message:"Nh\u1ecb Xung",color:"text-red-600",highlight:"bg-red-900/20"}),r.push({type:"xung_note",message:`C\u1eb7p Nh\u1ecb Xung: ${e}, ${t}`,color:"text-gray-500",highlight:""})):r.push({type:"xung",message:"Kh\xf4ng Nh\u1ecb Xung",color:"text-gray-400",highlight:""});const l="Th\u1ed5"===Fn(e),c=["Th\xecn","Tu\u1ea5t","S\u1eedu","M\xf9i"].includes(e);if(l&&c){const s=_N[e]===t;_N[e]?(r.push({type:"nhap_mo",message:s?"Nh\u1eadp m\u1ed9":"Kh\xf4ng Nh\u1eadp m\u1ed9",color:s?"text-orange-100":"text-gray-400",highlight:s?"bg-orange-900/20":""}),s||r.push({type:"nhap_mo_note",message:`${e} nh\u1eadp m\u1ed9 v\xe0o ${n.toLowerCase()} ${_N[e]}`,color:"text-gray-500",highlight:""})):r.push({type:"nhap_mo",message:"Kh\xf4ng Nh\u1eadp m\u1ed9",color:"text-gray-400",highlight:""})}else r.push({type:"nhap_mo",message:"Kh\xf4ng Nh\u1eadp m\u1ed9",color:"text-gray-400",highlight:""});if(i&&a&&(i===a?r.push({type:"cung_ngu_hanh",message:`C\xf9ng ng\u0169 h\xe0nh ${n.toLowerCase()} (${a})`,color:"text-green-600",highlight:"bg-green-900/20"}):r.push({type:"khong_cung_ngu_hanh",message:`Kh\xf4ng c\xf9ng ng\u0169 h\xe0nh ${n.toLowerCase()} (${i} \u2260 ${a})`,color:"text-gray-400",highlight:""}),r.push({type:"sinh1",message:Wn(i,a)?`H\xe0o Sinh ${n} (${a})`:`Kh\xf4ng Sinh ${n} (${a})`,color:Wn(i,a)?"text-orange-100":"text-gray-400",highlight:Wn(i,a)?"bg-orange-900/20":""}),r.push({type:"sinh2",message:Wn(a,i)?`${n} (${a}) Sinh H\xe0o`:`${n} Kh\xf4ng Sinh (${a})`,color:Wn(a,i)?"text-green-600":"text-gray-400",highlight:Wn(a,i)?"bg-green-900/20":""}),r.push({type:"khac1",message:$n(i,a)?`H\xe0o Kh\u1eafc ${n} (${a})`:`Kh\xf4ng Kh\u1eafc ${n} (${a})`,color:$n(i,a)?"text-gray-600":"text-gray-400",highlight:$n(i,a)?"bg-gray-900/80":""}),r.push({type:"khac2",message:$n(a,i)?`${n} (${a}) Kh\u1eafc H\xe0o `:`Kh\xf4ng B\u1ecb Kh\u1eafc ${n} (${a})`,color:$n(a,i)?"text-red-600":"text-gray-400",highlight:$n(a,i)?"bg-red-900/20":""})),!o){let n=!1,r=!1,l=!1;(Vn(e,t)||Kn(e,t)||i===a||Wn(a,i))&&(n=!0),$n(i,a)&&(zn(e,t)?l=!0:r=!0),Wn(i,a)&&(l=!0),o=n?s?"V\u01b0\u1ee3ng Th\xe1ng":"V\u01b0\u1ee3ng Ng\xe0y":l?s?"Suy Th\xe1ng":"Suy Ng\xe0y":r?"Trung T\xednh":s?"Suy Th\xe1ng":"Suy Ng\xe0y"}return r.push({type:"vuong_suy",message:o,color:o.includes("V\u01b0\u1ee3ng")?"text-green-700 font-bold hidden":o.includes("Trung T\xednh")?"text-yellow-700 font-bold hidden":"text-red-700 font-bold hidden",highlight:o.includes("V\u01b0\u1ee3ng")?"bg-green-900/20":o.includes("Trung T\xednh")?"bg-yellow-900/20":"bg-red-900/20"}),r},Wn=(e,t)=>({Kim:"Th\u1ee7y","Th\u1ee7y":"M\u1ed9c","M\u1ed9c":"H\u1ecfa","H\u1ecfa":"Th\u1ed5","Th\u1ed5":"Kim"}[e]===t),$n=(e,t)=>({Kim:"M\u1ed9c","M\u1ed9c":"Th\u1ed5","Th\u1ed5":"Th\u1ee7y","Th\u1ee7y":"H\u1ecfa","H\u1ecfa":"Kim"}[e]===t),Xn=(e,t)=>{if(e.type.endsWith("_note"))return!1;if("nhap_mo_note"===e.type)return!1;if("vuong_suy"===e.type)return!0;if("cung_ngu_hanh"===e.type)return!0;const n=e.message.toLowerCase();return t||!(n.includes("kh\xf4ng kh\u1eafc")||n.includes("kh\xf4ng b\u1ecb kh\u1eafc")||n.includes("kh\xf4ng sinh")||n.includes("kh\xf4ng c\xf9ng ng\u0169 h\xe0nh")||n.includes("kh\xf4ng nh\u1eadt ki\u1ebfn")||n.includes("kh\xf4ng nguy\u1ec7t ki\u1ebfn")||n.includes("kh\xf4ng tam h\u1ee3p")||n.includes("kh\xf4ng nh\u1ecb h\u1ee3p")||n.includes("kh\xf4ng nh\u1ecb xung")||n.includes("kh\xf4ng nh\u1eadp m\u1ed9"))},Yn=(e,t)=>{if(!e||!t)return null;const n=e.find((e=>"vuong_suy"===e.type)),r=t.find((e=>"vuong_suy"===e.type));if(!n||!r)return null;const s=n.message,i=r.message;let a="",o="",l="";return s.includes("V\u01b0\u1ee3ng")&&i.includes("V\u01b0\u1ee3ng")||s.includes("V\u01b0\u1ee3ng")&&i.includes("C\xf2n V\u01b0\u1ee3ng")||i.includes("V\u01b0\u1ee3ng")&&s.includes("C\xf2n V\u01b0\u1ee3ng")?(a="V\u01b0\u1ee3ng",o="text-green-800",l="bg-green-300"):s.includes("Suy")&&i.includes("Suy")||s.includes("Suy")&&i.includes("Trung T\xednh")||i.includes("Suy")&&s.includes("Trung T\xednh")?(a="Suy",o="text-red-800",l="bg-red-300"):(a="C\xf2n L\u1ef1c",o="text-yellow-800",l="bg-yellow-300"),{type:"vuong_suy_tong_hop",message:a,color:o,highlight:l,details:`${s} + ${i} \u2192 ${a}`}};(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.que&&Ee&&null!==oe&&void 0!==oe&&oe.canChi){const e=_n(be.que),t=e[Ee.index],n=e[be.que.haoThe-1];if(t&&n){ut(((e,t)=>{if(!e||!t)return null;const n=Fn(e.chi),r=Fn(t.chi);return n===r?{type:"tuong_tot",message:"T\u01b0\u1ee3ng T\u1ed1t (C\xf9ng ng\u0169 h\xe0nh)",color:"text-green-600 font-bold text-xs",highlight:"bg-green-900/20"}:Wn(n,r)?{type:"tuong_tot",message:"T\u01b0\u1ee3ng T\u1ed1t (D\u1ee5ng Th\u1ea7n sinh H\xe0o Th\u1ebf)",color:"text-green-600 font-bold text-xs",highlight:"bg-green-900/20"}:Wn(r,n)?{type:"tuong_tot",message:"T\u01b0\u1ee3ng T\u1ed1t (H\xe0o Th\u1ebf sinh D\u1ee5ng Th\u1ea7n)",color:"text-green-600 font-bold text-xs",highlight:"bg-green-900/20"}:$n(r,n)?{type:"tuong_xau",message:"T\u01b0\u1ee3ng X\u1ea5u (H\xe0o Th\u1ebf kh\u1eafc D\u1ee5ng Th\u1ea7n)",color:"text-red-600 font-bold text-xs",highlight:"bg-red-900/20"}:{type:"tuong_xau",message:"T\u01b0\u1ee3ng X\u1ea5u (D\u1ee5ng Th\u1ea7n kh\u1eafc H\xe0o Th\u1ebf )",color:"text-red-600 font-bold text-xs",highlight:"bg-red-900/20"}})(t,n));const e=oe.canChi[2].split(" ")[1];ht(Gn(t.chi,e));const r=oe.canChi[1].split(" ")[1],s=qn(t.chi,r,"Th\xe1ng");gt(s);const i=oe.canChi[0].split(" ")[1],a=qn(t.chi,i,"Ng\xe0y");ft(a);const o=Yn(s,a);qt(o)}}else ut(null),ht(null),gt(null),ft(null),qt(null)}),[be,Ee,oe]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.que&&null!==oe&&void 0!==oe&&oe.canChi){const e=_n(be.que)[be.que.haoThe-1];if(e){const t=oe.canChi[2].split(" ")[1];bt(Gn(e.chi,t));const n=oe.canChi[1].split(" ")[1],r=qn(e.chi,n,"Th\xe1ng");Nt(r);const s=oe.canChi[0].split(" ")[1],i=qn(e.chi,s,"Ng\xe0y");Ct(i);const a=Yn(r,i);$t(a)}}else bt(null),Nt(null),Ct(null),$t(null)}),[be,oe]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.que&&null!==oe&&void 0!==oe&&oe.canChi){const e=_n(be.que)[(be.que.haoThe-1+3)%6];if(e){const t=oe.canChi[2].split(" ")[1];St(Gn(e.chi,t));const n=oe.canChi[1].split(" ")[1],r=qn(e.chi,n,"Th\xe1ng");Et(r);const s=oe.canChi[0].split(" ")[1],i=qn(e.chi,s,"Ng\xe0y");Mt(i);const a=Yn(r,i);Yt(a)}}else St(null),Et(null),Mt(null),Yt(null)}),[be,oe]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.queBien&&null!==oe&&void 0!==oe&&oe.canChi){const e=_n(be.que)[be.queBien.soDu-1];if(e){const t=oe.canChi[2].split(" ")[1];Dt(Gn(e.chi,t));const n=oe.canChi[1].split(" ")[1],r=qn(e.chi,n,"Th\xe1ng");Ft(r);const s=oe.canChi[0].split(" ")[1],i=qn(e.chi,s,"Ng\xe0y");Rt(i);const a=Yn(r,i);Zt(a)}}else Dt(null),Ft(null),Rt(null),Zt(null)}),[be,oe]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.queBien&&null!==be&&void 0!==be&&be.que){const e=_n(be.que),t=_n(be.queBien.queBien),n=e[be.queBien.soDu-1],r=t[be.queBien.soDu-1];if(n&&r){const e=er(n,r);Ht(e)}}else Ht(null)}),[null===be||void 0===be?void 0:be.que,null===be||void 0===be?void 0:be.queBien]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.queBien&&null!==be&&void 0!==be&&be.que){const e=_n(be.que),t=e[be.queBien.soDu-1],n=e[be.que.haoThe-1];if(t&&n){const e=Jn(t,n);zt(e)}}else zt(null)}),[null===be||void 0===be?void 0:be.que,null===be||void 0===be?void 0:be.queBien]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.queBien&&null!==be&&void 0!==be&&be.que&&Ee){const e=_n(be.que),t=e[be.queBien.soDu-1],n=e[Ee.index];if(t&&n){const e=Zn(t,n);Kt(e)}}else Kt(null)}),[null===be||void 0===be?void 0:be.que,null===be||void 0===be?void 0:be.queBien,Ee]),(0,t.useEffect)((()=>{if(null!==be&&void 0!==be&&be.que&&He&&He>0){var e;const t=[];null!==(e=be.queBien)&&void 0!==e&&e.soDu&&t.push(be.queBien.soDu),t.push(He);const n=((e,t)=>{if(!t||0===t.length)return null;const n=[...e];t.forEach((e=>{if(e&&e>0&&e<=6){const t=e-1;n[t]=1===n[t]?0:1}}));const r=e=>({111:"C\xe0n",110:"\u0110o\xe0i",101:"Ly",100:"Ch\u1ea5n","011":"T\u1ed1n","010":"Kh\u1ea3m","001":"C\u1ea5n","000":"Kh\xf4n"}[e.join("")]||""),s=[n[3],n[4],n[5]],i=[n[0],n[1],n[2]],a=r(s),o=r(i),l=wC.find((e=>e.thuongQue===a&&e.haQue===o));return{lines:n,queBien:l,soDu:t[0]}})(be.que.lines,t);n&&we((e=>({...e,queBien:{...n,haoDongList:t}})))}else if(null!==be&&void 0!==be&&be.que&&(!He||0===He)){const e=be.queBien;if(null!==e&&void 0!==e&&e.soDu){const t=En(be.que.lines,0,0,0,e.soDu);we((e=>({...e,queBien:t})))}}}),[null===be||void 0===be?void 0:be.que,He]);const Jn=(e,t)=>{if(!e||!t)return null;const n=[];Kn(e.chi,t.chi)?n.push({type:"dong_the_nhi_hop",message:"Nh\u1ecb H\u1ee3p",color:"text-green-600",highlight:"bg-green-900/20"}):n.push({type:"dong_the_no_nhi_hop",message:`Kh\xf4ng Nh\u1ecb H\u1ee3p (${e.chi} - ${t.chi})`,color:"text-gray-500",highlight:""});zn(e.chi,t.chi)?n.push({type:"dong_the_xung",message:"Nh\u1ecb Xung",color:"text-red-600",highlight:"bg-red-900/20"}):n.push({type:"dong_the_no_xung",message:`Kh\xf4ng Nh\u1ecb Xung (${e.chi} - ${t.chi})`,color:"text-gray-500",highlight:""});const r=Fn(e.chi),s=Fn(t.chi);return r===s?n.push({type:"dong_the_cung_ngu_hanh",message:`C\xf9ng Ng\u0169 H\xe0nh (${r})`,color:"text-blue-600",highlight:"bg-blue-900/20"}):n.push({type:"dong_the_khac_ngu_hanh",message:`Kh\xe1c Ng\u0169 H\xe0nh (${r} - ${s})`,color:"text-gray-500",highlight:""}),Wn(r,s)?n.push({type:"dong_sinh_the",message:`T\u01b0\u01a1ng Sinh (${r} \u2192 ${s})`,color:"text-green-600",highlight:"bg-green-900/20"}):n.push({type:"dong_no_sinh_the",message:`Kh\xf4ng T\u01b0\u01a1ng Sinh (${r} \u219b ${s})`,color:"text-gray-500",highlight:""}),$n(r,s)?n.push({type:"dong_khac_the",message:`T\u01b0\u01a1ng Kh\u1eafc (${r} \u2192 ${s})`,color:"text-red-600",highlight:"bg-red-900/20"}):n.push({type:"dong_no_khac_the",message:`Kh\xf4ng T\u01b0\u01a1ng Kh\u1eafc (${r} \u219b ${s})`,color:"text-gray-500",highlight:""}),n},Zn=(e,t)=>{if(!e||!t)return null;const n=[];Kn(e.chi,t.chi)?n.push({type:"dong_dungthan_nhi_hop",message:"Nh\u1ecb H\u1ee3p",color:"text-green-600",highlight:"bg-green-900/20"}):n.push({type:"dong_dungthan_no_nhi_hop",message:`Kh\xf4ng Nh\u1ecb H\u1ee3p (${e.chi} - ${t.chi})`,color:"text-gray-500",highlight:""});zn(e.chi,t.chi)?n.push({type:"dong_dungthan_xung",message:"Nh\u1ecb Xung",color:"text-red-600",highlight:"bg-red-900/20"}):n.push({type:"dong_dungthan_no_xung",message:`Kh\xf4ng Nh\u1ecb Xung (${e.chi} - ${t.chi})`,color:"text-gray-500",highlight:""});const r=Fn(e.chi),s=Fn(t.chi);return r===s?n.push({type:"dong_dungthan_cung_ngu_hanh",message:`C\xf9ng Ng\u0169 H\xe0nh (${r})`,color:"text-blue-600",highlight:"bg-blue-900/20"}):n.push({type:"dong_dungthan_khac_ngu_hanh",message:`Kh\xe1c Ng\u0169 H\xe0nh (${r} - ${s})`,color:"text-gray-500",highlight:""}),Wn(r,s)?n.push({type:"dong_sinh_dungthan",message:`T\u01b0\u01a1ng Sinh (${r} \u2192 ${s})`,color:"text-green-600",highlight:"bg-green-900/20"}):n.push({type:"dong_no_sinh_dungthan",message:`Kh\xf4ng T\u01b0\u01a1ng Sinh (${r} \u219b ${s})`,color:"text-gray-500",highlight:""}),$n(r,s)?n.push({type:"dong_khac_dungthan",message:`T\u01b0\u01a1ng Kh\u1eafc (${r} \u2192 ${s})`,color:"text-red-600",highlight:"bg-red-900/20"}):n.push({type:"dong_no_khac_dungthan",message:`Kh\xf4ng T\u01b0\u01a1ng Kh\u1eafc (${r} \u219b ${s})`,color:"text-gray-500",highlight:""}),n},er=(e,t)=>{if(!e||!t)return null;const n=[];let r=!1;const s=Kn(e.chi,t.chi);s&&(n.push({type:"nhi_hop",message:"Nh\u1ecb h\u1ee3p",color:"text-green-600",highlight:"bg-green-900/20"}),r=!0);const i=["T\xfd","S\u1eedu","D\u1ea7n","M\xe3o","Th\xecn","T\u1ef5","Ng\u1ecd","M\xf9i","Th\xe2n","D\u1eadu","Tu\u1ea5t","H\u1ee3i"],a=i.indexOf(e.chi),o=i.indexOf(t.chi),l=Fn(e.chi),c=Fn(t.chi);let u=!1,d=!1;if(l===c){const s=(a+11)%12;o===(a+1)%12?(n.push({type:"hoa_tien",message:"H\xf3a Ti\u1ebfn Th\u1ea7n",color:"text-green-600",highlight:"bg-green-900/20"}),u=!0,r=!0):n.push({type:"no_hoa_tien",message:`Kh\xf4ng H\xf3a Ti\u1ebfn Th\u1ea7n (${t.chi} kh\xf4ng sau ${e.chi})`,color:"text-gray-500",highlight:""}),o===s?(n.push({type:"hoa_thoai",message:"H\xf3a Tho\xe1i Th\u1ea7n",color:"text-red-600",highlight:"bg-red-900/20"}),d=!0,r=!0):n.push({type:"no_hoa_thoai",message:`Kh\xf4ng H\xf3a Tho\xe1i Th\u1ea7n (${t.chi} kh\xf4ng tr\u01b0\u1edbc ${e.chi})`,color:"text-gray-500",highlight:""})}else n.push({type:"no_hoa_tien",message:"Kh\xf4ng H\xf3a Ti\u1ebfn Th\u1ea7n (Kh\xf4ng c\xf9ng ng\u0169 h\xe0nh)",color:"text-gray-500",highlight:""}),n.push({type:"no_hoa_thoai",message:"Kh\xf4ng H\xf3a Tho\xe1i Th\u1ea7n (Kh\xf4ng c\xf9ng ng\u0169 h\xe0nh)",color:"text-gray-500",highlight:""});Wn(c,l)?(n.push({type:"hoa_hoi_sinh",message:`H\xf3a H\u1ed3i \u0110\u1ea7u Sinh (${e.chi})`,color:"text-green-700",highlight:"bg-green-900/20"}),r=!0):n.push({type:"no_hoa_hoi_sinh",message:`Kh\xf4ng H\xf3a H\u1ed3i \u0110\u1ea7u Sinh (${e.chi})`,color:"text-gray-500",highlight:""}),$n(c,l)?(n.push({type:"hoa_hoi_khac",message:`H\xf3a H\u1ed3i \u0110\u1ea7u Kh\u1eafc (${e.chi})`,color:"text-red-700",highlight:"bg-red-900/20"}),r=!0):n.push({type:"no_hoa_hoi_khac",message:`Kh\xf4ng H\xf3a H\u1ed3i \u0110\u1ea7u Kh\u1eafc (${e.chi})`,color:"text-gray-500",highlight:""}),zn(t.chi,e.chi)?(n.push({type:"bien_xung_dong",message:"Xung H\xe0o \u0110\u1ed9ng",color:"text-red-600",highlight:"bg-red-900/20"}),r=!0):n.push({type:"no_bien_xung_dong",message:`Kh\xf4ng Xung (${e.chi})`,color:"text-gray-500",highlight:""});let h=[];if(oe&&oe.canChi){const t=oe.canChi[0].split(" ")[0];h=QC(t,e.chi)}h.length>0&&h.includes(t.chi)?(n.push({type:"bien_hoa_khong_vong",message:`H\xf3a Kh\xf4ng Vong (${e.chi}) [${h.join(", ")}]`,color:"text-blue-700",highlight:"bg-blue-900/20"}),r=!0):h.length>0&&n.push({type:"no_bien_hoa_khong_vong",message:`Kh\xf4ng h\xf3a Kh\xf4ng Vong (${e.chi}) [${h.join(", ")}]`,color:"text-gray-500",highlight:""}),s||n.push({type:"no_nhi_hop",message:`Kh\xf4ng Nh\u1ecb h\u1ee3p (${e.chi} - ${t.chi})`,color:"text-gray-500",highlight:""});{const s=zC(e.chi);zC(e.chi,t.chi)?(n.push({type:"bien_la_mo",message:`M\u1ed9 c\u1ee7a (${e.chi})`,color:"text-purple-700",highlight:"bg-purple-900/20"}),r=!0):n.push({type:"no_bien_la_mo",message:`Kh\xf4ng ph\u1ea3i M\u1ed9 c\u1ee7a (${e.chi})${s.length>0?` (M\u1ed9 l\xe0 ${s.join(", ")})`:""}`,color:"text-gray-500",highlight:""})}{const s=VC(e.chi);VC(e.chi,t.chi)?(n.push({type:"bien_la_tuyet",message:`Tuy\u1ec7t c\u1ee7a (${e.chi})`,color:"text-pink-700",highlight:"bg-pink-900/20"}),r=!0):n.push({type:"no_bien_la_tuyet",message:`Kh\xf4ng ph\u1ea3i Tuy\u1ec7t c\u1ee7a (${e.chi})${s.length>0?` (Tuy\u1ec7t l\xe0 ${s.join(", ")})`:""}`,color:"text-gray-500",highlight:""})}return n};if(J&&$<=0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||t!==rw)return(0,At.jsx)(Sw,{pageName:"L\u1ee5c H\xe0o"})}return(0,At.jsxs)("div",{className:"lg:w-[full] xl:w-[1280px] w-full mx-auto px-4 py-4",children:[(0,At.jsxs)("h4",{className:"text-2xl font-bold text-gray-100 mb-4 flex items-center gap-2 justify-center",children:["Xem Qu\u1ebb L\u1ee5c H\xe0o",(0,At.jsx)(CC,{className:"w-6 h-6 text-gray-300 cursor-help animate-bounce",onClick:()=>Je(!Ye)})]}),(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-4 text-gray-500 max-w-[674px] mx-auto",children:[(0,At.jsxs)("button",{onClick:()=>Bn({target:{value:"datetime"}}),className:"flex flex-col items-center justify-center p-3 rounded-lg border transition-all\n                            "+("datetime"===ge?"button-style !h-auto":"border-gray-500"),children:[(0,At.jsx)(Mj,{className:"w-8 h-8 mb-1"}),(0,At.jsx)("span",{className:"text-xs font-medium",children:"Ng\xe0y"})]}),(0,At.jsxs)("button",{onClick:()=>Bn({target:{value:"serial"}}),className:"flex flex-col items-center justify-center p-3 rounded-lg border transition-all\n                            "+("serial"===ge?"button-style !h-auto":"border-gray-500"),children:[(0,At.jsx)(SC,{className:"w-8 h-8 mb-1"}),(0,At.jsx)("span",{className:"text-xs font-medium",children:"S\u1ed1 Seri"})]}),(0,At.jsxs)("button",{onClick:()=>Bn({target:{value:"hour-object"}}),className:"flex flex-col items-center justify-center p-3 rounded-lg border transition-all\n                            "+("hour-object"===ge?"button-style !h-auto":"border-gray-500"),children:[(0,At.jsx)(EC,{className:"w-8 h-8 mb-1"}),(0,At.jsx)("span",{className:"text-xs font-medium",children:"Gi\u1edd & Vi\u1ec7c"})]}),(0,At.jsxs)("button",{onClick:()=>Bn({target:{value:"yin-yang"}}),className:"flex flex-col items-center justify-center p-3 rounded-lg border transition-all\n                            "+("yin-yang"===ge?"button-style !h-auto":"border-gray-500"),children:[(0,At.jsx)(MC,{className:"w-8 h-8 mb-1"}),(0,At.jsx)("span",{className:"text-xs font-medium",children:"Gieo Xu"})]})]}),"datetime"===ge&&(0,At.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center mb-4 space-y-2 md:space-y-0",children:[(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 w-full md:w-auto",children:[(0,At.jsx)("select",{value:de?yn(de.hour):ce?yn(ce.hour):0,onChange:vn,className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:xn.map(((e,t)=>(0,At.jsx)("option",{value:t,children:e.name},t)))}),(0,At.jsx)("select",{value:te?te.getDate():Z.getDate(),onChange:e=>{const t=parseInt(e.target.value);((e,t)=>{ne(t);const n=zw(e,re,ie),r=Vw(n),s=Gw(n.jd),i=de?de.hour:ce?ce.hour:0,a=Math.floor((i+1)/2)%12,o=(Iw.indexOf(s)+a)%10,l=a,c=`${Iw[o]} ${Dw[l]}`;le({solarDate:`${e}/${re}/${ie}`,lunarDate:`${n.day}/${n.month}${n.leap,""}/${n.year}`,canChi:r,currentCanChiHour:c,fullCanChi:`${c} - ${r[0]} - ${r[1]} - ${r[2]}`})})(t,new Date(ie,re-1,t)),le(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:Array.from({length:gn(re,ie)},((e,t)=>t+1)).map((e=>(0,At.jsxs)("option",{value:e,children:["Ng\xe0y ",e]},e)))}),(0,At.jsx)("select",{value:re,onChange:e=>{se(parseInt(e.target.value)),le(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:fn.map((e=>(0,At.jsxs)("option",{value:e,children:["Th\xe1ng ",e]},e)))}),(0,At.jsx)("select",{value:ie,onChange:e=>{ae(parseInt(e.target.value)),le(null)},className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:pn.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]}),(0,At.jsx)("div",{className:"flex gap-2 w-full md:w-auto md:ml-2",children:(0,At.jsx)("button",{onClick:()=>{const e=new Date;je({hour:e.getHours(),minute:e.getMinutes()});const t=te?te.getDate():Z.getDate(),n=(new Date(ie,re-1,t),zw(t,re,ie)),r=Vw(n),s=Gw(n.jd),i=de?de.hour:ce?ce.hour:0,a=Math.floor((i+1)/2)%12,o=(Iw.indexOf(s)+a)%10,l=a,c=`${Iw[o]} ${Dw[l]}`,u=bn(r[2].split(" ")[1]).so,d=bn(r[1].split(" ")[1]).so,h=bn(r[0].split(" ")[1]).so,m=(u+d+h)%8||8,A=wn(m)||{ten:"",amduong:""},g=bn(c.split(" ")[1]).so,p=(u+d+h+g)%8||8,f=wn(p)||{ten:"",amduong:""},x=Nn((null===A||void 0===A?void 0:A.ten)||"",(null===f||void 0===f?void 0:f.ten)||"");let v=null;x&&(v=En(x.lines,u,d,h,g)),le({solarDate:`${t}/${re}/${ie}`,lunarDate:`${n.day}/${n.month}${n.leap,""}/${n.year}`,canChi:r,currentCanChiHour:c,fullCanChi:`${c} - ${r[0]} - ${r[1]} - ${r[2]}`}),we({thuongQue:A,haQue:f,numbers:{thuongQue:m,haQue:p},que:x,queBien:v}),Ae(!0)},className:"px-4 py-2 text-sm font-semibold md:ml-2 w-full md:w-auto button-style",children:"Xem"})})]}),"serial"===ge&&(0,At.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center mb-4 space-y-2 md:space-y-0 gap-2",children:[(0,At.jsx)("input",{type:"text",value:fe,onChange:e=>{const t=e.target.value.replace(/\D/g,"");xe(t)},placeholder:"Nh\u1eadp s\u1ed1 seri",className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm"}),(0,At.jsx)("button",{onClick:()=>{if(!fe||fe.length<5)return void alert("Vui l\xf2ng nh\u1eadp \xedt nh\u1ea5t 5 ch\u1eef s\u1ed1!");const e=fe.slice(-5).split("").map(Number);let t=(e[0]+e[1])%8;0===t&&(t=8);let n=(e[2]+e[3]+e[4])%8;0===n&&(n=8);let r=(e[0]+e[1]+e[2]+e[3]+e[4])%6;0===r&&(r=6);const s=wn(t),i=wn(n),a=Nn((null===s||void 0===s?void 0:s.ten)||"",(null===i||void 0===i?void 0:i.ten)||"");let o=null;a&&(o=En(a.lines,0,0,0,r));const l=new Date,c=de?de.hour:l.getHours(),u=`${l.getDate()}/${l.getMonth()+1}/${l.getFullYear()}`,d=zw(l.getDate(),l.getMonth()+1,l.getFullYear()),h=Vw(d),m=Gw(d.jd),A=Mn(c),g=(Iw.indexOf(m)+A)%10,p=`${Iw[g]} ${Dw[A]}`;le({serial:fe,method:"serial",solarDate:u,lunarDate:`${d.day}/${d.month}${d.leap,""}/${d.year}`,canChi:h,currentCanChiHour:p,fullCanChi:`${p} - ${h[0]} - ${h[1]} - ${h[2]}`}),je({hour:l.getHours(),minute:l.getMinutes(),second:l.getSeconds()}),we({thuongQue:s,haQue:i,numbers:{thuongQue:t,haQue:n},que:a,queBien:o}),Ae(!0)},className:"px-4 py-2 text-sm font-semibold md:ml-2 w-full md:w-auto button-style",children:"Xem"})]}),"hour-object"===ge&&(0,At.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center mb-4 space-y-2 md:space-y-0 gap-2",children:[(0,At.jsx)("select",{value:de?yn(de.hour):ce?yn(ce.hour):0,onChange:vn,className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm",children:xn.map(((e,t)=>(0,At.jsx)("option",{value:t,children:e.name},t)))}),(0,At.jsx)("input",{type:"text",value:ve,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>2&&(t=t.slice(0,2)),ye(t)},placeholder:"Nh\u1eadp s\u1ed1",className:"w-full h-[40px] md:w-auto px-3 py-1 md:py-2 border rounded text-sm"}),(0,At.jsx)("button",{onClick:()=>{if(!ve||0===ve.length)return void alert("Vui l\xf2ng nh\u1eadp s\u1ed1 (t\u1ed1i \u0111a 2 ch\u1eef s\u1ed1)!");const e=parseInt(ve,10);if(isNaN(e))return void alert("Vui l\xf2ng nh\u1eadp s\u1ed1 h\u1ee3p l\u1ec7!");const t=new Date,n=de?de.hour:t.getHours(),r=function(e){if(e>=23||e<1)return 1;for(let t=1;t<xn.length;t++)if(e>=xn[t].start&&e<xn[t].end)return t+1;return 1}(n),s=Mn(n);let i=e%8;0===i&&(i=8);let a=(e+r)%8;0===a&&(a=8);let o=(e+r)%6;0===o&&(o=6);const l=wn(i),c=wn(a),u=Nn((null===l||void 0===l?void 0:l.ten)||"",(null===c||void 0===c?void 0:c.ten)||"");let d=null;u&&(d=En(u.lines,0,0,0,o));const h=`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`,m=zw(t.getDate(),t.getMonth()+1,t.getFullYear()),A=Vw(m),g=Gw(m.jd),p=(Iw.indexOf(g)+s)%10,f=`${Iw[p]} ${Dw[s]}`;le({objectNumber:ve,method:"hour-object",solarDate:h,lunarDate:`${m.day}/${m.month}${m.leap,""}/${m.year}`,canChi:A,currentCanChiHour:f,fullCanChi:`${f} - ${A[0]} - ${A[1]} - ${A[2]}`}),je({hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}),we({thuongQue:l,haQue:c,numbers:{thuongQue:i,haQue:a},que:u,queBien:d}),Ae(!0)},className:"px-4 py-2 text-sm font-semibold md:ml-2 w-full md:w-auto button-style",children:"Xem"})]}),"yin-yang"===ge&&(0,At.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,At.jsx)("div",{className:"grid grid-cols-6 gap-2 mb-4",onClick:async()=>{await(async()=>{try{if("DeviceMotionEvent"in window){if("function"!==typeof DeviceMotionEvent.requestPermission)return localStorage.setItem("shakePermission","granted"),!0;if("granted"===await DeviceMotionEvent.requestPermission())return localStorage.setItem("shakePermission","granted"),!0}return!1}catch(e){return console.error("L\u1ed7i khi y\xeau c\u1ea7u quy\u1ec1n l\u1eafc:",e),!1}})()&&Xe(!0)},children:Fe.map(((e,t)=>(0,At.jsx)("div",{className:`!w-12 !h-12 border-2 !rounded-full flex items-center justify-center text-2xl font-bold transition-all duration-[100ms]\n                                        ${"yang"===e?"bg-white text-black":"yin"===e?"bg-black text-white":"bg-gray-100 text-gray-400"}\n                                        ${Re===t+1?"border-orange-500 !bg-orange-500 button-style":""}\n                                        ${Ke?"animate-pulse":""}`,children:"yang"===e?(0,At.jsx)("div",{className:"w-[24px] h-[4px] rounded-full bg-black"}):"yin"===e?(0,At.jsxs)("div",{className:"flex gap-1",children:[(0,At.jsx)("div",{className:"w-[12px] h-[4px] rounded-full bg-white"}),(0,At.jsx)("div",{className:"w-[12px] h-[4px] rounded-full bg-white"})]}):"?"},t)))}),(0,At.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:Re&&ze?`Gi\u1edd: ${ze.chi} (${ze.number}) - \u0110\u1ed9ng h\xe0o: ${Re}`:""}),(0,At.jsx)("div",{className:"flex gap-2",children:qe&&(0,At.jsx)("button",{onClick:Hn,className:"hidden md:block px-4 py-2 text-sm font-semibold button-style",children:"Gieo qu\u1ebb nhanh"})})]}),(0,At.jsx)("div",{id:"lichAmduong",children:(0,At.jsx)("div",{className:"flex flex-col md:flex-row justify-center items-center mb-2 space-y-2 md:space-y-0",children:oe&&(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 w-full text-sm",children:[(0,At.jsxs)("div",{className:"p-4 rounded-lg shadow border-b border-gray-600 bg-gray-700 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-1",children:"L\u1ecbch D\u01b0\u01a1ng"}),(0,At.jsxs)("p",{className:"flex items-center justify-center",children:[oe.solarDate,Ne&&(0,At.jsxs)("span",{className:"text-blue-500 text-xs ml-2",children:["Gi\u1edd: ",Ne.hour.toString().padStart(2,"0"),":",Ne.minute.toString().padStart(2,"0")]})]})]}),(0,At.jsxs)("div",{className:"p-4 rounded-lg shadow border-b border-gray-600 bg-gray-700 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-1",children:"L\u1ecbch \xc2m"}),(0,At.jsxs)("p",{className:"flex items-center justify-center",children:[oe.lunarDate,de&&(0,At.jsxs)("span",{className:"text-blue-500 text-xs ml-2",children:["Gi\u1edd",oe.currentCanChiHour&&(0,At.jsxs)(At.Fragment,{children:[" ",oe.currentCanChiHour," "]})]})]})]}),(0,At.jsxs)("div",{className:"p-4 rounded-lg shadow border-b border-gray-600 bg-gray-700 text-gray-200 col-span-2 md:col-span-1",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-1",children:"Ti\u1ebft Kh\xed"}),(0,At.jsx)("p",{className:"",children:(()=>{const e=((e,t)=>{const n=QN.map((n=>{const r=VN(n.longitude,t);return r&&r.month===e?{name:n.name,date:new Date(r.year,r.month-1,r.day,r.hour,r.minute)}:null})).filter(Boolean);return n.sort(((e,t)=>e.date-t.date)),n})(re,ie);return 0===e.length?"Kh\xf4ng c\xf3 ti\u1ebft kh\xed trong th\xe1ng n\xe0y":e.map((e=>`${e.name} (${e.date.getDate().toString().padStart(2,"0")}/${(e.date.getMonth()+1).toString().padStart(2,"0")})`)).join(", ")})()})]})]})})})]}),me&&oe&&be&&be.numbers&&(0,At.jsxs)("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg shadow relative z-40",children:[(0,At.jsx)("div",{id:"chonDungThan",className:"mb-4 flex justify-center",children:(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("label",{className:"text-sm font-semibold text-purple-500",children:"Ch\u1ecdn D\u1ee5ng th\u1ea7n:"}),(0,At.jsxs)("select",{className:"!border rounded px-2 py-1 text-sm !border-purple-500 !text-purple-500",onChange:e=>{if(""===e.target.value)Be(null);else{const[t,n]=e.target.value.split("-");Be({thapThan:t,index:parseInt(n)})}},children:[(0,At.jsx)("option",{value:"",children:"-- Ch\u1ecdn --"}),(()=>{const e={},t=be.que&&Rn(be.que);return t&&t.slice().reverse().map(((n,r)=>{const s=t.length-1-r,i=(e[n.thapThan]||0)+1;e[n.thapThan]=i;let a=i>1?`${n.thapThan} (${i})`:n.thapThan;return n.thapThanFromThuan&&(a+=` [${n.thapThanFromThuan}]`),(0,At.jsx)("option",{value:`${n.thapThan}-${s}`,children:a},`${n.thapThan}-${s}`)}))})()]}),(0,At.jsx)(CC,{className:"w-6 h-6 text-violet-500 cursor-pointer",onClick:()=>et(!Ze)})]})}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 text-sm",children:(null===oe||void 0===oe?void 0:oe.canChi)&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"p-4 rounded-lg relative border-b border-gray-600 bg-gray-900 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-2",children:"Gi\u1edd"}),(0,At.jsxs)("p",{className:"",children:[oe.currentCanChiHour,(0,At.jsxs)("span",{className:Pn(Fn(null===oe||void 0===oe||null===(e=oe.currentCanChiHour)||void 0===e?void 0:e.split(" ")[1]))+" font-semibold hidden",children:[" ",Fn(null===oe||void 0===oe||null===(n=oe.currentCanChiHour)||void 0===n?void 0:n.split(" ")[1])]})]}),(0,At.jsx)("p",{className:"absolute top-2 right-2 text-xs text-gray-500",children:(null===(r=bn(null===oe||void 0===oe||null===(s=oe.currentCanChiHour)||void 0===s?void 0:s.split(" ")[1]))||void 0===r?void 0:r.so)||""})]}),(0,At.jsxs)("div",{className:Pn(Fn(null===oe||void 0===oe||null===(i=oe.canChi)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.split(" ")[1]))+" p-4 rounded-lg relative border-b border-gray-600 bg-gray-900 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-2",children:"Ng\xe0y (Nh\u1eadt)"}),(0,At.jsxs)("p",{className:"",children:[null===oe||void 0===oe||null===(o=oe.canChi)||void 0===o?void 0:o[0]," -",(0,At.jsxs)("span",{className:Pn(Fn(null===oe||void 0===oe||null===(l=oe.canChi)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.split(" ")[1]))+" font-semibold",children:[" ",Fn(null===oe||void 0===oe||null===(u=oe.canChi)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.split(" ")[1])]})]}),(0,At.jsx)("p",{className:"absolute top-2 right-2 text-xs text-gray-500",children:(null===(h=bn(null===oe||void 0===oe||null===(m=oe.canChi)||void 0===m||null===(A=m[0])||void 0===A?void 0:A.split(" ")[1]))||void 0===h?void 0:h.so)||""})]}),(0,At.jsxs)("div",{className:Pn(Fn(null===oe||void 0===oe||null===(g=oe.canChi)||void 0===g||null===(p=g[1])||void 0===p?void 0:p.split(" ")[1]))+" p-4 rounded-lg relative border-b border-gray-600 bg-gray-900 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-2",children:"Th\xe1ng (Nguy\u1ec7t)"}),(0,At.jsxs)("p",{className:"",children:[null===oe||void 0===oe||null===(f=oe.canChi)||void 0===f?void 0:f[1]," -",(0,At.jsxs)("span",{className:Pn(Fn(null===oe||void 0===oe||null===(x=oe.canChi)||void 0===x||null===(v=x[1])||void 0===v?void 0:v.split(" ")[1]))+" font-semibold",children:[" ",Fn(null===oe||void 0===oe||null===(y=oe.canChi)||void 0===y||null===(b=y[1])||void 0===b?void 0:b.split(" ")[1])]})]}),(0,At.jsx)("p",{className:"absolute top-2 right-2 text-xs text-gray-500",children:(null===(w=bn(null===oe||void 0===oe||null===(N=oe.canChi)||void 0===N||null===(j=N[1])||void 0===j?void 0:j.split(" ")[1]))||void 0===w?void 0:w.so)||""})]}),(0,At.jsxs)("div",{className:"p-4 rounded-lg relative border-b border-gray-600 bg-gray-900 text-gray-200",children:[(0,At.jsx)("h4",{className:"text-gray-500 font-semibold mb-2",children:"N\u0103m"}),(0,At.jsxs)("p",{className:"",children:[null===oe||void 0===oe||null===(C=oe.canChi)||void 0===C?void 0:C[2],(0,At.jsxs)("span",{className:Pn(Fn(null===oe||void 0===oe||null===(T=oe.canChi)||void 0===T||null===(S=T[2])||void 0===S?void 0:S.split(" ")[1]))+" font-semibold hidden",children:[" ",Fn(null===oe||void 0===oe||null===(_=oe.canChi)||void 0===_||null===(E=_[2])||void 0===E?void 0:E.split(" ")[1])]})]}),(0,At.jsx)("p",{className:"absolute top-2 right-2 text-xs text-gray-500",children:(null===(B=bn(null===oe||void 0===oe||null===(M=oe.canChi)||void 0===M||null===(k=M[2])||void 0===k?void 0:k.split(" ")[1]))||void 0===B?void 0:B.so)||""})]})]})}),(0,At.jsxs)("div",{className:"mt-4 p-4 rounded-lg text-sm",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 gap-12 mb-8 mt-4",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center",children:[(0,At.jsxs)("p",{className:"font-semibold text-lg flex items-center text-gray-200",children:[null===(L=be.que)||void 0===L?void 0:L.ten,(0,At.jsxs)("span",{className:"text-sm ml-1 "+Dn(null===(I=be.que)||void 0===I?void 0:I.phan_loai),children:[" (",null===(D=be.que)||void 0===D?void 0:D.phan_loai,") "]}),"yin-yang"===ge?"":(0,At.jsx)("button",{onClick:()=>{var e;Pe({thuongQue:be.thuongQue,haQue:be.haQue,haoDong:(null===(e=be.queBien)||void 0===e?void 0:e.soDu)||0,haoDong2:0}),Ie(!0)},className:"ml-2",children:(0,At.jsx)(LC,{className:"w-5 h-5 text-blue-500"})}),(0,At.jsx)(CC,{className:"w-5 h-5 text-gray-300 ml-2",onClick:()=>nt(!tt)})]}),(null===(P=be.que)||void 0===P?void 0:P.giaDinh)&&(0,At.jsxs)("p",{className:"text-xs font-semibold mb-1 "+Pn(null===(F=be.que)||void 0===F?void 0:F.nguHanh),children:["Gia \u0111\xecnh ",be.que.giaDinh]}),"yin-yang"===ge?"":(0,At.jsxs)("div",{className:"mb-1 flex gap-1 text-xs text-gray-300",children:[(0,At.jsx)("p",{children:"Qu\u1ebb Ch\xednh"}),(0,At.jsxs)("p",{children:[(null===(U=be.thuongQue)||void 0===U?void 0:U.ten)||""," (",null===(R=be.numbers)||void 0===R?void 0:R.thuongQue,")"]}),(0,At.jsxs)("p",{children:[(null===(O=be.haQue)||void 0===O?void 0:O.ten)||""," (",null===(H=be.numbers)||void 0===H?void 0:H.haQue,")"]})]}),be.que&&(0,At.jsx)("div",{className:"flex flex-col items-center",children:(0,At.jsx)("div",{className:"my-4",children:(0,At.jsx)(In,{lines:be.que.lines,activeIndex:be.queBien?be.queBien.soDu-1:void 0,activeIndex2:He>0?He-1:void 0,haoInfo:_n(be.que),que:be.que,fullThapThan:!0})})}),(0,At.jsx)("p",{className:"text-gray-500 text-xs",children:(null===(Q=be.que)||void 0===Q?void 0:Q.ghi_chu)||""})]}),(0,At.jsx)("div",{className:"flex flex-col items-center",children:be.queBien&&be.queBien.queBien&&((e,t,n,r)=>{const s=null===oe||void 0===oe||null===(e=oe.canChi)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.split(" ")[0],i=["Gi\xe1p","\u1ea4t"].includes(a=s)?0:["B\xednh","\u0110inh"].includes(a)?1:["M\u1eadu"].includes(a)?2:["K\u1ef7"].includes(a)?3:["Canh","T\xe2n"].includes(a)?4:["Nh\xe2m","Qu\xfd"].includes(a)?5:0;var a;const o=Array.from({length:6},((e,t)=>Ln[(i+t)%6]));return(0,At.jsxs)("div",{className:"flex flex-col items-center",children:[(0,At.jsxs)("div",{className:"font-semibold text-lg text-gray-200",children:[be.queBien.queBien.ten,(0,At.jsxs)("span",{className:"text-sm "+Dn(be.queBien.queBien.phan_loai),children:[" (",be.queBien.queBien.phan_loai,")"]})]}),be.queBien.queBien.giaDinh&&(0,At.jsxs)("p",{className:"text-xs font-semibold mb-1 "+Pn(be.queBien.queBien.nguHanh),children:["Gia \u0111\xecnh ",be.queBien.queBien.giaDinh]}),"yin-yang"===ge?"":(0,At.jsxs)("div",{className:"mb-1 text-xs flex gap-1 text-gray-300",children:[(0,At.jsx)("p",{children:"Qu\u1ebb Bi\u1ebfn"}),(0,At.jsxs)("p",{children:["(H\xe0o \u0111\u1ed9ng: ",be.queBien.haoDongList?be.queBien.haoDongList.join(", "):be.queBien.soDu,")"]})]}),(0,At.jsx)("div",{className:"my-4",children:(0,At.jsx)(In,{lines:be.queBien.lines,activeIndex:be.queBien.haoDongList?be.queBien.haoDongList[0]-1:be.queBien.soDu-1,activeIndex2:be.queBien.haoDongList&&be.queBien.haoDongList.length>1?be.queBien.haoDongList[1]-1:void 0,haoInfo:_n(null===(n=be.queBien)||void 0===n?void 0:n.queBien),que:be.queBien.queBien,hideTheUng:!0,lucThuArr:o})}),(0,At.jsx)("p",{className:"text-gray-500 text-xs",children:(null===(r=be.queBien.queBien)||void 0===r?void 0:r.ghi_chu)||""})]})})()})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-0",children:[(ct||dt||mt||pt)&&Ee&&(null===be||void 0===be?void 0:be.que)&&((e,t,n,r,s,i,a)=>{const o=_n(be.que)[Ee.index];return(0,At.jsxs)("div",{className:`mt-4 px-3 py-4 border-b border-gray-600 ${Pn(null===o||void 0===o?void 0:o.nguHanh)} rounded-lg bg-gray-900`,children:[(0,At.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,At.jsxs)("div",{className:"text-sm w-full flex items-center justify-center",children:[(0,At.jsx)("span",{className:"bg-purple-600 text-white px-2 py-1 rounded-md inline-flex items-center mr-1 cursor-help",onClick:()=>Je(!Ye),children:"H\xe0o D\u1ee5ng Th\u1ea7n"}),Gt&&(0,At.jsx)("div",{className:`${Gt.highlight} p-1 px-2 rounded`,children:(0,At.jsx)("div",{className:`${Gt.color} text-center`,children:Gt.message})})]}),(0,At.jsx)("button",{onClick:()=>tn(!en),className:"mr-1 text-gray-300",title:en?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:en?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]}),dt&&(0,At.jsxs)("div",{className:`mb-2 ${dt.highlight} p-2 rounded text-gray-200`,children:[(0,At.jsxs)("span",{className:"font-medium",children:["N\u0103m ",null===oe||void 0===oe||null===(e=oe.canChi)||void 0===e?void 0:e[2]," - "]}),(0,At.jsx)("span",{className:dt.color,children:dt.message})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700"}),mt&&mt.length>0&&(0,At.jsxs)("div",{className:"mb-2 py-2 md:px-2 px-4 text-gray-200",children:[(0,At.jsxs)("div",{className:"font-medium",children:["So th\xe1ng ",null===oe||void 0===oe||null===(t=oe.canChi)||void 0===t?void 0:t[1].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(n=oe.canChi)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.split(" ")[1]),") "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:mt.filter((e=>Xn(e,en))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),en&&mt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),(0,At.jsxs)("h4",{className:"font-semibold mt-2 flex items-center justify-center gap-2",children:[(0,At.jsx)(RC,{className:"w-4 h-4 text-white"}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("span",{className:"text-purple-600 uppercase",children:"Th\u1ea7n - "}),(0,At.jsxs)("span",{className:"text-purple-600 mx-1",children:[null===o||void 0===o?void 0:o.thapThan," - "]}),(0,At.jsxs)("span",{className:Pn(null===o||void 0===o?void 0:o.nguHanh),children:[" ",null===o||void 0===o?void 0:o.chi," - ",null===o||void 0===o?void 0:o.nguHanh]})]}),(0,At.jsx)(HC,{className:"w-4 h-4 text-white"})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),pt&&pt.length>0&&(0,At.jsxs)("div",{className:"mb-2 py-2 md:px-2 px-4 text-gray-200",children:[(0,At.jsxs)("div",{className:"font-medium",children:["So Ng\xe0y ",null===oe||void 0===oe||null===(s=oe.canChi)||void 0===s?void 0:s[0].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(i=oe.canChi)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:pt.filter((e=>Xn(e,en))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),en&&pt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),ct&&(0,At.jsx)("div",{className:`mb-2 ${ct.highlight} p-2 rounded`,children:(0,At.jsx)("span",{className:ct.color,children:ct.message})})]})})(),(ct||dt||mt||pt)&&(null===be||void 0===be?void 0:be.que)&&((e,t,n,r,s,i,a)=>{const o=_n(be.que)[be.que.haoThe-1];return(0,At.jsxs)("div",{className:`mt-4 px-3 py-4 border-b border-gray-600 ${Pn(null===o||void 0===o?void 0:o.nguHanh)} rounded-lg bg-gray-900`,children:[(0,At.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,At.jsxs)("div",{className:"text-sm w-full flex items-center justify-center",children:[(0,At.jsx)("span",{className:"bg-sky-600 text-white px-2 py-1 rounded-md inline-flex items-center mr-1 cursor-help",onClick:()=>st(!rt),children:"H\xe0o Th\u1ebf"}),Wt&&(0,At.jsx)("div",{className:`${Wt.highlight} p-1 px-2 rounded`,children:(0,At.jsx)("div",{className:`${Wt.color} text-center`,children:Wt.message})})]}),(0,At.jsx)("button",{onClick:()=>rn(!nn),className:"mr-1 text-gray-300",title:nn?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:nn?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]}),yt&&(0,At.jsxs)("div",{className:`mb-2 ${yt.highlight} p-2 rounded text-gray-200`,children:[(0,At.jsxs)("span",{className:"font-medium",children:["N\u0103m ",null===oe||void 0===oe||null===(e=oe.canChi)||void 0===e?void 0:e[2]," - "]}),(0,At.jsx)("span",{className:yt.color,children:yt.message})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),wt&&wt.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Th\xe1ng ",null===oe||void 0===oe||null===(t=oe.canChi)||void 0===t?void 0:t[1].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(n=oe.canChi)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:wt.filter((e=>Xn(e,nn))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),nn&&wt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),(0,At.jsxs)("h4",{className:"font-semibold mt-2 flex items-center justify-center gap-2",children:[(0,At.jsx)(RC,{className:"w-4 h-4 text-white"}),(0,At.jsxs)("div",{className:"flex items-center justify-center ",children:[(0,At.jsx)("span",{className:"text-sky-600 uppercase",children:"Th\u1ebf - "}),(0,At.jsxs)("span",{className:"text-sky-600 mx-1",children:[" ",null===o||void 0===o?void 0:o.thapThan," - "]}),(0,At.jsxs)("span",{children:[" ",null===o||void 0===o?void 0:o.chi," - ",null===o||void 0===o?void 0:o.nguHanh]})]}),(0,At.jsx)(HC,{className:"w-4 h-4 text-white"})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),jt&&jt.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Ng\xe0y ",null===oe||void 0===oe||null===(s=oe.canChi)||void 0===s?void 0:s[0].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(i=oe.canChi)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:jt.filter((e=>Xn(e,nn))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),nn&&jt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),(()=>{const e=(t=null===o||void 0===o?void 0:o.thapThan,NC.thapThan[t]||null);var t;return e?(0,At.jsx)("div",{className:"mt-3 p-3 bg-blue-900/20 border border-blue-900 rounded-lg",children:(0,At.jsxs)("div",{className:"text-xs text-blue-200 leading-relaxed",children:[e.ten," l\xe0 ",e.tomTat]})}):null})()]})})(),(Tt||_t||Bt)&&Ee&&(null===be||void 0===be?void 0:be.que)&&((e,t,n,r,s,i,a)=>{const o=_n(be.que)[(be.que.haoThe-1+3)%6];return(0,At.jsxs)("div",{className:`mt-4 px-3 py-4 border-b border-gray-600 ${Pn(null===o||void 0===o?void 0:o.nguHanh)} rounded-lg bg-gray-900`,children:[(0,At.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,At.jsxs)("div",{className:"text-sm w-full flex items-center justify-center",children:[(0,At.jsx)("span",{className:"bg-lime-600 text-white px-2 py-1 rounded-md inline-flex items-center mr-1 cursor-help",onClick:()=>at(!it),children:"H\xe0o \u1ee8ng"}),Xt&&(0,At.jsx)("div",{className:`${Xt.highlight} p-1 px-2 rounded`,children:(0,At.jsx)("div",{className:`${Xt.color} text-center`,children:Xt.message})})]}),(0,At.jsx)("button",{onClick:()=>an(!sn),className:"mr-1 text-gray-300",title:sn?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:sn?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]}),Tt&&(0,At.jsxs)("div",{className:`mb-2 ${Tt.highlight} p-2 rounded text-gray-200`,children:[(0,At.jsxs)("span",{className:"font-medium",children:["N\u0103m ",null===oe||void 0===oe||null===(e=oe.canChi)||void 0===e?void 0:e[2]," - "]}),(0,At.jsx)("span",{className:Tt.color,children:Tt.message})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),_t&&_t.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Th\xe1ng ",null===oe||void 0===oe||null===(t=oe.canChi)||void 0===t?void 0:t[1].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(n=oe.canChi)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:_t.filter((e=>Xn(e,sn))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),sn&&_t.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),(0,At.jsxs)("h4",{className:"font-semibold mt-2 flex items-center justify-center gap-2",children:[(0,At.jsx)(RC,{className:"w-4 h-4 text-white"}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("span",{className:"text-lime-600 uppercase",children:"\u1ee8ng - "}),(0,At.jsxs)("span",{className:"text-lime-600 mx-1",children:[" ",null===o||void 0===o?void 0:o.thapThan," - "]}),(0,At.jsxs)("span",{children:[" ",null===o||void 0===o?void 0:o.chi," - ",null===o||void 0===o?void 0:o.nguHanh]})]}),(0,At.jsx)(HC,{className:"w-4 h-4 text-white"})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),Bt&&Bt.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Ng\xe0y ",null===oe||void 0===oe||null===(s=oe.canChi)||void 0===s?void 0:s[0].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(i=oe.canChi)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:Bt.filter((e=>Xn(e,sn))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),sn&&Bt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]})]})})(),(It||Pt||Ut)&&Ee&&(null===be||void 0===be?void 0:be.que)&&((e,t,n,r,s,i,a)=>{const o=_n(be.que)[be.queBien.soDu-1];return(0,At.jsxs)("div",{className:Pn(null===o||void 0===o?void 0:o.nguHanh)+" mt-4 px-3 py-4 border-b border-gray-600 rounded-lg bg-gray-900",children:[(0,At.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,At.jsxs)("div",{className:"text-sm w-full flex items-center justify-center",children:[(0,At.jsx)("span",{className:"bg-orange-600 text-white !px-2 !py-1 rounded-md inline-flex items-center mr-1 button-style !h-auto !cursor-help",onClick:()=>lt(!ot),children:"H\xe0o \u0110\u1ed9ng"}),Jt&&(0,At.jsx)("div",{className:`${Jt.highlight} p-1 px-2 rounded`,children:(0,At.jsx)("div",{className:`${Jt.color} text-center`,children:Jt.message})})]}),(0,At.jsx)("button",{onClick:()=>ln(!on),className:"mr-1 text-gray-300",title:on?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:on?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]}),It&&(0,At.jsxs)("div",{className:`mb-2 ${It.highlight} p-2 rounded text-gray-200`,children:[(0,At.jsxs)("span",{className:"font-medium",children:["N\u0103m ",null===oe||void 0===oe||null===(e=oe.canChi)||void 0===e?void 0:e[2]," - "]}),(0,At.jsx)("span",{className:It.color,children:It.message})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),Pt&&Pt.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Th\xe1ng ",null===oe||void 0===oe||null===(t=oe.canChi)||void 0===t?void 0:t[1].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(n=oe.canChi)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:Pt.filter((e=>Xn(e,on))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),on&&Pt.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),(0,At.jsxs)("h4",{className:" font-semibold flex items-center justify-center gap-2",children:[(0,At.jsx)(RC,{className:"w-4 h-4 text-white"}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("span",{className:"text-style uppercase",children:"\u0110\u1ed9ng - "}),(0,At.jsxs)("span",{className:"text-style mx-1",children:[" ",null===o||void 0===o?void 0:o.thapThan," - "]}),(0,At.jsxs)("span",{className:Pn(null===o||void 0===o?void 0:o.nguHanh),children:[" ",null===o||void 0===o?void 0:o.chi," - ",null===o||void 0===o?void 0:o.nguHanh]})]}),(0,At.jsx)(HC,{className:"w-4 h-4 text-white"})]}),(0,At.jsx)("hr",{className:"my-2 border-gray-700 "}),Ut&&Ut.length>0&&(0,At.jsxs)("div",{className:"mb-2 p-2 text-gray-200",children:[(0,At.jsxs)("span",{className:"font-medium",children:["So Ng\xe0y ",null===oe||void 0===oe||null===(s=oe.canChi)||void 0===s?void 0:s[0].split(" ")[1]," (",Fn(null===oe||void 0===oe||null===(i=oe.canChi)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.split(" ")[1]),"): "]}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-1 justify-center",children:Ut.filter((e=>Xn(e,on))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}),on&&Ut.filter((e=>"nhap_mo_note"===e.type||e.type.endsWith("_note"))).map(((e,t)=>(0,At.jsx)("div",{className:"text-xs text-gray-700 mt-2 italic bg-gray-100 p-2 rounded border border-gray-300",children:e.message},t)))]})]})})(),Qt&&Ee&&(0,At.jsxs)("div",{className:"p-4 rounded-lg md:col-span-2 bg-gray-900 border-b border-gray-600",children:[(0,At.jsx)("div",{className:"flex justify-between items-center mb-2",children:(null===be||void 0===be?void 0:be.queBien)&&(()=>{const e=_n(be.que),t=e[be.queBien.soDu-1],n=e[be.que.haoThe-1];return(0,At.jsxs)("div",{className:"text-sm flex items-center justify-center w-full relative",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h4",{className:"font-semibold",children:[(0,At.jsx)("span",{className:"text-style uppercase",children:"H\xe0o \u0110\u1ed9ng"}),(0,At.jsx)("span",{className:"text-white mx-1",children:"so"}),(0,At.jsx)("span",{className:"text-sky-600 uppercase",children:"H\xe0o Th\u1ebf"})]}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[(0,At.jsxs)("span",{className:Pn(null===t||void 0===t?void 0:t.nguHanh),children:[null===t||void 0===t?void 0:t.chi," (",null===t||void 0===t?void 0:t.nguHanh,")"]}),(0,At.jsx)("span",{className:"mx-2",children:"vs"}),(0,At.jsxs)("span",{className:Pn(null===n||void 0===n?void 0:n.nguHanh),children:[null===n||void 0===n?void 0:n.chi," (",null===n||void 0===n?void 0:n.nguHanh,")"]})]})]}),(0,At.jsx)("button",{onClick:()=>hn(!dn),className:"ml-2 text-gray-500 hover:text-gray-700 absolute right-0 top-0",title:dn?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:dn?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]})})()}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-2 justify-center",children:Qt.filter((e=>!(!dn&&"text-gray-500"===e.color))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))})]}),Vt&&Ee&&(0,At.jsxs)("div",{className:"p-4 rounded-lg md:col-span-2 bg-gray-900 border-b border-gray-600",children:[(0,At.jsx)("div",{className:"flex justify-between items-center mb-2",children:(null===be||void 0===be?void 0:be.queBien)&&(()=>{const e=_n(be.que),t=e[be.queBien.soDu-1],n=e[Ee.index];return(0,At.jsxs)("div",{className:"text-sm flex items-center justify-center w-full relative",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h4",{className:"font-semibold",children:[(0,At.jsx)("span",{className:"text-style uppercase",children:"H\xe0o \u0110\u1ed9ng"}),(0,At.jsx)("span",{className:"text-white mx-1",children:"so"}),(0,At.jsx)("span",{className:"text-purple-600 uppercase",children:"D\u1ee5ng Th\u1ea7n"})]}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[(0,At.jsxs)("span",{className:Pn(null===t||void 0===t?void 0:t.nguHanh),children:[null===t||void 0===t?void 0:t.chi," (",null===t||void 0===t?void 0:t.nguHanh,")"]}),(0,At.jsx)("span",{className:"mx-2",children:"vs"}),(0,At.jsxs)("span",{className:Pn(null===n||void 0===n?void 0:n.nguHanh),children:[null===n||void 0===n?void 0:n.chi," (",null===n||void 0===n?void 0:n.nguHanh,")"]})]})]}),(0,At.jsx)("button",{onClick:()=>An(!mn),className:"ml-2 text-gray-500 hover:text-gray-700 absolute right-0 top-0",title:mn?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:mn?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]})})()}),(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-2 justify-center",children:Vt.filter((e=>!(!mn&&"text-gray-500"===e.color))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))})]}),Ot&&Ee&&(0,At.jsxs)("div",{className:"p-4 border-gray-300 rounded-lg bg-gray-900 md:col-span-4 border-b border-gray-600",children:[(0,At.jsx)("div",{className:"flex justify-between items-center mb-2",children:(null===be||void 0===be?void 0:be.queBien)&&(()=>{const e=_n(be.que),t=_n(be.queBien.queBien),n=e[be.queBien.soDu-1],r=t[be.queBien.soDu-1];return(0,At.jsxs)("div",{className:"text-sm flex items-center justify-center w-full relative",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h4",{className:"font-semibold",children:[(0,At.jsx)("span",{className:"text-white uppercase",children:"H\xe0o Bi\u1ebfn"}),(0,At.jsx)("span",{className:"text-white mx-1",children:"so"}),(0,At.jsx)("span",{className:"text-style uppercase",children:"H\xe0o \u0110\u1ed9ng"})]}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[(0,At.jsxs)("span",{className:Pn(null===r||void 0===r?void 0:r.nguHanh),children:[null===r||void 0===r?void 0:r.chi," (",null===r||void 0===r?void 0:r.nguHanh,")"]}),(0,At.jsx)("span",{className:"mx-2",children:"\u2192"}),(0,At.jsxs)("span",{className:Pn(null===n||void 0===n?void 0:n.nguHanh),children:[null===n||void 0===n?void 0:n.chi," (",null===n||void 0===n?void 0:n.nguHanh,")"]})]})]}),(0,At.jsx)("button",{onClick:()=>un(!cn),className:"ml-2 text-gray-500 hover:text-gray-700 absolute right-0 top-0",title:cn?"\u1ea8n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng":"Hi\u1ec7n c\xe1c tr\u01b0\u1eddng h\u1ee3p kh\xf4ng",children:cn?(0,At.jsx)(DC,{className:"w-5 h-5"}):(0,At.jsx)(FC,{className:"w-5 h-5"})})]})})()}),Ot.length>0?(0,At.jsx)("div",{className:"flex flex-wrap gap-1 mt-2 justify-center",children:Ot.filter((e=>!(!cn&&"text-gray-500"===e.color)&&!(!cn&&"text-gray-400"===e.color))).map(((e,t)=>(0,At.jsx)("div",{className:`${e.highlight} ${e.color} px-2 py-1 rounded text-xs md:w-auto w-full`,children:e.message},t)))}):(0,At.jsx)("div",{className:"text-center text-gray-500 mt-2 italic",children:"Kh\xf4ng c\xf3 m\u1ed1i quan h\u1ec7 \u0111\u1eb7c bi\u1ec7t gi\u1eefa H\xe0o \u0110\u1ed9ng v\xe0 H\xe0o Bi\u1ebfn"})]})]})]})]}),(0,At.jsxs)("div",{className:"mt-12 relative z-40 hidden",children:[(0,At.jsx)("h2",{className:"text-xl font-bold mb-4 text-center text-white",children:"64 Qu\u1ebb Kinh D\u1ecbch"}),(0,At.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-center items-center mb-4",children:[(0,At.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:Ce,onChange:e=>Te(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 gia \u0111\xecnh"}),["all","C\xe0n","Kh\xf4n","Kh\u1ea3m","Ly","Ch\u1ea5n","T\u1ed1n","C\u1ea5n","\u0110o\xe0i"].slice(1).map((e=>(0,At.jsx)("option",{value:e,children:e},e)))]}),(0,At.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:Se,onChange:e=>_e(e.target.value),children:[(0,At.jsx)("option",{value:"asc",children:"Th\u1ee9 t\u1ef1 t\u0103ng d\u1ea7n"}),(0,At.jsx)("option",{value:"desc",children:"Th\u1ee9 t\u1ef1 gi\u1ea3m d\u1ea7n"})]})]}),(0,At.jsx)("div",{className:"flex flex-col gap-4",children:(()=>{let e=wC;"all"!==Ce&&(e=e.filter((e=>e.giaDinh===Ce))),e=[...e].sort(((e,t)=>"asc"===Se?e.so-t.so:t.so-e.so));return Array.from({length:Math.ceil(e.length/8)}).map(((t,n)=>(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 justify-center",children:e.slice(8*n,8*n+8).map((e=>(0,At.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col items-center bg-gray-900 shadow min-w-[90px]",children:[(0,At.jsxs)("div",{className:"my-1 text-center",children:[(0,At.jsxs)("div",{className:"font-bold text-xs",children:["Qu\u1ebb ",e.so]}),(0,At.jsx)("div",{className:"font-semibold text-xs",children:e.ten}),(0,At.jsx)("div",{className:"text-gray-500 text-xs",children:e.han}),(0,At.jsx)("div",{className:Dn(e.phan_loai)+" text-xs mt-1",children:e.phan_loai})]}),(0,At.jsx)(In,{lines:e.lines,activeIndex:e.activeIndex,activeIndex2:void 0,haoInfo:_n(e),que:e,fullThapThan:!0})]},e.so)))},n)))})()})]}),(0,At.jsx)(On,{show:Le,onClose:()=>Ie(!1),que:De,onSave:e=>{const t=Nn(e.thuongQue.ten,e.haQue.ten);if(t){let n=null;e.haoDong>0&&(n=En(t.lines,0,0,0,e.haoDong)),Qe(e.haoDong2||0),we({...be,thuongQue:e.thuongQue,haQue:e.haQue,que:t,queBien:n})}Ie(!1)}}),Ye&&(0,At.jsx)(YN,{isOpen:Ye,title:"Ch\u1ecdn D\u1ee5ng th\u1ea7n",onClose:()=>Je(!1),width:"max-w-lg",children:(0,At.jsx)("div",{className:"px-2 text-left overflow-y-auto max-h-[60vh]",children:Object.entries(NC.thapThan).map((e=>{let[t,n]=e;return(0,At.jsxs)("div",{className:"py-2 border border-gray-300",children:[(0,At.jsxs)("h4",{className:"font-semibold text-lg mb-2 pb-2 border-b border-gray-300 uppercase text-center text-style",children:[n.ten," (",n.hanTu,")"]}),(0,At.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 px-4",children:[(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-gray-100",children:"\u0110\u1ea1i di\u1ec7n cho: "}),n.daiDienCho]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-gray-100",children:"M\u1edf r\u1ed9ng: "}),n.moRong]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-gray-100",children:"T\xednh ch\u1ea5t: "}),n.tinhChat]}),(0,At.jsxs)("li",{className:"text-green-500",children:[(0,At.jsx)("b",{className:"text-gray-100",children:"Trong d\u1ef1 \u0111o\xe1n: "}),n.trongDuDoan]})]})]},t)}))})}),rt&&(0,At.jsx)(YN,{isOpen:rt,title:"H\xe0o Th\u1ebf",onClose:()=>st(!1),width:"max-w-lg",children:(0,At.jsx)("div",{className:"px-2 text-left overflow-y-auto max-h-[60vh]",children:(0,At.jsx)("div",{className:"py-2 border border-gray-300",children:(0,At.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 px-4",children:[(0,At.jsx)("li",{children:NC.haoTheUng.The.tomTat}),(0,At.jsx)("li",{children:NC.haoTheUng.The.vuong}),(0,At.jsx)("li",{children:NC.haoTheUng.The.khong}),(0,At.jsx)("li",{children:NC.haoTheUng.The.tuongSinh}),(0,At.jsx)("li",{children:NC.haoTheUng.The.hoaHop}),(0,At.jsx)("li",{children:NC.haoTheUng.The.theDong}),(0,At.jsx)("li",{children:NC.haoTheUng.The.biKhac})]})})})}),it&&(0,At.jsx)(YN,{isOpen:it,title:"H\xe0o \u1ee8ng",onClose:()=>at(!1),width:"max-w-lg",children:(0,At.jsx)("div",{className:"px-2 text-left overflow-y-auto max-h-[60vh]",children:(0,At.jsx)("div",{className:"py-2 border border-gray-300",children:(0,At.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 px-4",children:[(0,At.jsx)("li",{children:NC.haoTheUng.Ung.tomTat}),(0,At.jsx)("li",{children:NC.haoTheUng.Ung.ungDong}),(0,At.jsx)("li",{children:NC.haoTheUng.Ung.hoaHop})]})})})}),ot&&(0,At.jsx)(YN,{isOpen:ot,title:"H\xe0o \u0110\u1ed9ng",onClose:()=>lt(!1),width:"max-w-lg",children:(0,At.jsx)("div",{className:"px-2 text-left overflow-y-auto max-h-[80vh]",children:(0,At.jsx)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 px-4",children:(0,At.jsx)("li",{children:"H\xe0o \u0111\u1ed9ng th\u01b0\u1eddng b\xe1o tr\u01b0\u1edbc xu th\u1ebf v\xe0 qu\xe1 tr\xecnh ph\xe1t tri\u1ec3n ph\u1ee9c t\u1ea1p c\u1ee7a s\u1ef1 v\u1eadt, l\xe0 \u0111i\u1ec3m tr\u1ecdng t\xe2m trong vi\u1ec7c t\xecm D\u1ee5ng th\u1ea7n"})})})}),Ze&&(0,At.jsx)(YN,{isOpen:Ze,title:"Nhi\u1ec1u D\u1ee5ng th\u1ea7n",onClose:()=>et(!1),width:"max-w-lg",children:(0,At.jsx)("div",{className:"px-2 text-left overflow-y-auto max-h-[80vh]",children:(0,At.jsxs)("div",{className:"py-2 border border-gray-300",children:[(0,At.jsx)("h4",{className:"font-semibold text-lg mb-2 pb-2 border-b border-gray-300 uppercase text-center",children:"Quy t\u1eafc x\xe9t"}),(0,At.jsxs)("ul",{className:"list-disc list-inside text-gray-300 space-y-2 px-4",children:[(0,At.jsxs)("li",{children:["N\u1ebfu c\xf3 m\u1ed9t ",(0,At.jsx)("b",{className:"text-green-500",children:"h\xe0o ph\xe1t \u0111\u1ed9ng"})," (ch\u1ec9 h\xe0o \u0111\u1ed9ng c\xf3 bi\u1ebfn) th\xec l\u1ea5y h\xe0o ph\xe1t \u0111\u1ed9ng t\xe2m D\u1ee5ng th\u1ea7n. B\u1edfi h\xe0o \u0111\u1ed9ng l\xe0 m\u1edf \u0111\u1ea7u bi\u1ebfn h\xf3a c\u1ee7a s\u1ef1 vi\u1ec7c, h\xe0o \u0111\u1ed9ng mang tin t\u1ee9c tr\u1ed9i h\u01a1n h\xe0o t\u0129nh. "]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 c\u1ea3 hai h\xe0o \u0111\u1ec1u ph\xe1t \u0111\u1ed9ng ho\u1eb7c \u0111\u1ec1u kh\xf4ng ph\xe1t \u0111\u1ed9ng, th\xec l\u1ea5y ",(0,At.jsx)("b",{className:"text-green-500",children:"h\xe0o l\xe2m tu\u1ea7n kh\xf4ng"})," ho\u1eb7c ",(0,At.jsx)("b",{className:"text-green-500",children:"Nguy\u1ec7t ph\xe1"})," l\xe0m D\u1ee5ng th\u1ea7n"]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 \u0111\u1ec1u kh\xf4ng l\xe2m kh\xf4ng, kh\xf4ng b\u1ecb Nguy\u1ec7t ph\xe1, th\xec l\u1ea5y h\xe0o g\u1eb7p ",(0,At.jsx)("b",{className:"text-green-500",children:"xung N\u0103m"})," ho\u1eb7c g\u1eb7p ",(0,At.jsx)("b",{className:"text-green-500",children:"h\u1ee3p N\u0103m"})," l\xe0m D\u1ee5ng th\u1ea7n."]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 c\u0169ng kh\xf4ng g\u1eb7p xung, kh\xf4ng g\u1eb7p h\u1ee3p, th\xec l\u1ea5y ",(0,At.jsx)("b",{className:"text-green-500",children:"h\xe0o th\u1ebf ho\u1eb7c \u1ee9ng"})," l\xe0m D\u1ee5ng th\u1ea7n."]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 kh\xf4ng l\xe0m th\u1ebf \u1ee9ng, th\xec l\u1ea5y ",(0,At.jsx)("b",{className:"text-green-500",children:"h\xe0o xa h\xe0o th\u1ebf ho\u1eb7c g\u1ea7n h\xe0o \u1ee9ng"})," l\xe0m D\u1ee5ng th\u1ea7n."]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 hai h\xe0o c\xf3 \u0111\u1ecba chi ho\xe0n to\xe0n gi\u1ed1ng nhau, l\u1ea1i ph\u1ea3i c\u0103n c\u1ee9 ",(0,At.jsx)("b",{className:"text-green-500",children:"h\xe0o v\u1ecb ho\u1eb7c ch\u1ed7 l\xe2m l\u1ee5c th\u1ea7n"})," m\xe0 l\u1ea5y D\u1ee5ng th\u1ea7n. "]}),(0,At.jsxs)("li",{children:["N\u1ebfu nh\u01b0 trong qu\u1ebb c\xf3 hai h\xe0o ",(0,At.jsx)("b",{className:"text-green-500",children:"m\u1ed9t l\xe2m kh\xf4ng m\u1ed9t ph\xe1 n\u0103m"}),", ho\u1eb7c ",(0,At.jsx)("b",{className:"text-green-500",children:"m\u1ed9t \u0111\u1ed9ng m\u1ed9t l\xe2m kh\xf4ng"}),", hai h\xe0o \u0111\u1ec1u c\xf3 th\u1ec3 l\xe0m D\u1ee5ng th\u1ea7n."]})]})]})})}),tt&&(0,At.jsx)(YN,{isOpen:tt,title:"",onClose:()=>nt(!1),width:"max-w-lg",children:(0,At.jsxs)("div",{className:"px-2 text-left overflow-y-auto max-h-[80vh]",children:[(0,At.jsxs)("h4",{className:"font-semibold text-lg mb-2 pb-2 border-b border-gray-500 uppercase text-center",children:["Qu\u1ebb ",null===be||void 0===be||null===(z=be.que)||void 0===z?void 0:z.ten]}),(null===be||void 0===be||null===(V=be.que)||void 0===V?void 0:V.thongTinQue)&&(0,At.jsx)("div",{className:"py-2",children:(0,At.jsx)("ul",{className:"text-gray-400 text-sm text-left list-disc list-inside",children:be.que.thongTinQue.split("-").map(((e,t)=>(0,At.jsx)("li",{children:e.trim()},t)))})}),!(null!==be&&void 0!==be&&null!==(K=be.que)&&void 0!==K&&K.thongTinQue)&&(0,At.jsx)("div",{className:"py-2 text-center text-gray-600 italic",children:"Kh\xf4ng c\xf3 th\xf4ng tin qu\u1ebb"})]})})]})},GC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAm+SURBVHgB7dxda1zXFYDhNZoZqbUT0eALRcG0pnVpsVsco9KiBoxpIW2K4x/S/9Df0/s2CQh8Y3pl6IdvUkqpa2pcJ7biSB5ZiaT5yjpWAoqimXXO2XuvfY78PiAkyxN7GM+avfeZNxIBAAAAAAAAACCN6XTa0U8dQTYLglwW7t+//139+J4wBNkwAJlcunSp1+l0rusqcOPixYuLgiwYgEyePn3aHw6HN0ej0dru7m5XkAUDkMnq6mpfP63rKvD28vIyA5AJe888Opubm1e3trZuFwfhpaWldy9cuHBbvz8RuGIFyED3//3BYHBNX/17C0qH4Mra2hqrQAYMQAZf7v/f1S+Lw+/iwcHBDf01B+EMGIAMzp07tzSZTK7qK/+Cfu7qInD51q1brwrcMQD+uhsbG1f6/f6SDsCLb+gQvLqzs3NZ+PdwxwPuTA+7/b29vZv6Ze+r7+kK0Nch+J2+H9AXuGIAnOkVn76+8l/TL48+2bvFlujMmTM9gSsug/rqPHjwYHV/f/9DfcJ/5+hv6Cow0BXgx3pl6COBG1YAX93xePxzObz6c1zv3r17v7l+/TqrgCMGwNH58+df5A+6BTpxAHRVePPhw4e8H+CIAXC0qIr9v25zTnqSL+oAvNPtdnk/wBFnAD+d7e3t7z958uTvOgTLJ96g09nRg/DPdKX4t8AFK4CTtbW1nr4DXLz6z7zUWaQRukX6rd6Wy6FOGAAnjx496usB+IZ8/fLn1+jKUAzA1cePH3MQdsIAOFlZWVnUAVgvnuSzblO8Iaa///bZs2cZACecAXwczZ9fMW67Sx7thxXAwdH82botebQvBsDBsfzZQh7tiAFwcDR/tm5LHu2LAUjvG/mzhTzaDw9wYiflzxbyaD8MQGIz8mcLebQTLoOmNTN/tpBH+2AFSGte/mwhj3bAACRk5M8W8mgHDEBCRv5s/ufk0elxBkjHzJ/NP4A8OjlWgETK5M8W8uj0GIBEyuTPFvLo9BiARMrkzxby6PQ4A6RRJX+2kEcnxAqQQJX82UIenRYDkEDF/NlCHp0QA5BAlfzZQh6dFgMQX+X82UIenQ4PaGR18mcLeXQ6DEBkNfNnC3l0IlwGjat2/mwhj06DFSCukPzZQh6dAAMQUWD+bCGPToABiCgwfzb/ePLo+DgDxBOcP5t/AXl0dKwAkcTIny3k0fExAJHEyJ8t5NHxMQCRxMifLeTR8XEGiCNm/mwhj46IFSCCmPmzhTw6LgYggsj5s4U8OiIGIIKY+bOFPDouBiBc9PzZQh4dDw9goBT5s4U8Oh4GIFCi/NlCHh0Jl0HDJMufLeTRcbAChEmZP1vIoyNgAAIkzp8t5NERMAABEufP5l9PHh2OM0B9yfNn8w6QRwdjBajJI3+2kEeHYwBq8sifLeTR4RiAmjzyZwt5dDjOAPV45s8W8ugArAA1eObPFvLoMAxADc75s4U8OgADUINn/mwhjw7DAFTnnj9byKPr4wGrKEf+bCGPro8BqChT/mwhj66Jy6DVZMufLeTR9bACVJMzf7aQR9fAAFSQOX+2kEfXwABUkDl/tpBH18AZoLzs+bOFPLo6VoCSmpA/W8ijq2MASmpC/mwhj66OASipCfmzhTy6Os4A5TQpf7aQR1fAClBCk/JnC3l0NQxACQ3Lny3k0RUwACU0KX+2kEdXwwDYGpc/W8ijy+MBMjQxf7aQR5fHABgamj9byKNL4jLofI3Nny3k0eWwAszX5PzZQh5dAg/OHOvr6/3hZHJTj76L007LFsuFheLftsij/6ifR4ITMQBzbE4m/elnn13r9nrd8aRlb6qOx4vj0eid7e3tP+iv9gUnYgDmOHfnjrz+1luTV6bT1p2V9A5PdzudBRkMBLMxAHP8X2S4MBh8oAel30u7rgIVRrp1+8u32P7MxSF4jhV98ugr6T+knU+iod739x7qZ8FMXAY16KvoG/rxL32gWpUW6H3e1vt8ST+4DDoHK4Dhisiz5yJ/lXalxdMdkf9eFtkRzMUAGD7VJ74+SHf1y7G0R7H9uX3A9sfEABh0D33QFXlfvzyQltDtz1Cn9b3/MAAmBsA21ifTh9Ki7YTe0f1rh4d3/o8wAwNQwi/1OfX8cAja8IQqtmp3P+HNr1IYgBJGh3vqYhvUhi3FUN+w+NNrXP8vhQEoQa+mjHVffXfagidVsf8v3gD7J/t/xPQLkeVnIo+mxY/fae7HZKBvYL8p0qp0OydWgJKKLEKvBm1Is1eBsR5S7jxu0RWr3BiAkpb1ybXQ/CxiuCTy5x8xAEhhT+SHus0YNHULpK/+23offyAkLqWxAlTwa5GPd5rb1hT5wyc/EdmUF2dhlMEAVPA/3f7oA/aBNPMKy0jPKLf3uPpTCQNQwcrh/r/ogpp4Diguf75P/oykijx60sBzgN6nLf28KqiEFaCihubR5M81MQAVNTSPJn+uiQGoqIl5NPlzfQxAdY3Lo8mf62MAamhYHk3+HIABqKFheTT5cwAGoIYm5dHkz8iiIXk0+XMgVoCaGpJHkz8HYgBqakgeTf6MfHLn0eTP4VgBAmTOo8mfI2AAAmTOo8mfI2AAAmTOo8mfkV+uPJr8OQ5WgECZ8mjy50gYgECZ8mjyZzRG93O9IKTbkeeO25/nWyK/El7AgvEAhnPPo8mf42EAInDOo8mfI2IAInDOo8mfI2IAIvDMo4v8uUf+jKZxyqPJnyNjBYjEKY8mf46MAYjEKY8mf0Zzpc6jyZ/jYwWIKHEeTf6cAAMQUeI8mvw5AQYgosR5NPkzmi9VHk3+nAYrQGSJ8mjy50QYgMgS5dHkz2iN6Hk0+TNaRbdAr+sT96NYA/BM5OlPRV4TRMcrSgKR82jy54QYgAQi59HkzwkxAAnEzKOn/PRntFGkPJr8OTFWgEQi5dHkz4kxAIlEyqPJn9FeoXk0+XN6rAAJBebR5M8OGICEAvNo8mcHDEBCgXk0+TPar24eTf7sgxUgsZp5NPmzEwYgsZp5NPkzTo3KeTT5M06Vqnk0+bMfXmEcVMyjyZ8dMQAOKubR5M+OGAAHVfLoKT/9GadRyTya/NkZK4CTknk0+bMzBsBJyTya/Bmnl5VHkz/7YwVwZOTR5M8ZMACOjDya/DkDBsCRkUeTP+P0m5VHkz/nwQrgbEYeTf6cCQPgbEYeTf6Ml8Y38mjyZ7xUjufR5M/58IqTwbE8mvw5IwYgg2N5NPlzRj2Bu2N59IT8GS+dr/LogX6QP+fDCpCJvvSPdBu0oYeAZfLnfBiATJ4dboP+VlwOfUO3P3V/gCjCkN3mU7wfcL744tsiD4QCFC+hjvAiBAAAAF9fAKMQP6otXeLmAAAAAElFTkSuQmCC";function qC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const WC=t.forwardRef(qC);function $C(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const XC=t.forwardRef($C);function YC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM13.5 10.5h-6"}))}const JC=t.forwardRef(YC);function ZC(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607ZM10.5 7.5v6m3-3h-6"}))}const eT=t.forwardRef(ZC);function tT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const nT=t.forwardRef(tT);function rT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"}))}const sT=t.forwardRef(rT);function iT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))}const aT=t.forwardRef(iT);function oT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0 1 18 16.5h-2.25m-7.5 0h7.5m-7.5 0-1 3m8.5-3 1 3m0 0 .5 1.5m-.5-1.5h-9.5m0 0-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6"}))}const lT=t.forwardRef(oT);function cT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const uT=t.forwardRef(cT);function dT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"}))}const hT=t.forwardRef(dT);function mT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const AT=t.forwardRef(mT);function gT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const pT=t.forwardRef(gT);function fT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 0 1-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 0 0-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409"}))}const xT=t.forwardRef(fT);function vT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const yT=t.forwardRef(vT),bT=[{chi:["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t"],toa:"B\u1eafc"},{chi:["Th\xe2n","T\xfd","Th\xecn"],toa:"Nam"},{chi:["T\u1ef5","D\u1eadu","S\u1ee7u"],toa:"\u0110\xf4ng"},{chi:["H\u1ee3i","M\xe3o","M\xf9i"],toa:"T\xe2y"}],wT=e=>{let{onDateChange:n}=e;const[r,s]=(0,t.useState)(new Date),[i,a]=(0,t.useState)(r.getMonth()+1),[o,l]=(0,t.useState)(r.getFullYear()),[c,u]=(0,t.useState)(r.getDate()),[d,h]=(0,t.useState)(null),[m,A]=(0,t.useState)([]),g=Array.from({length:400},((e,t)=>1800+t)),p=Array.from({length:12},((e,t)=>t+1)),f=Array.from({length:((e,t)=>new Date(t,e,0).getDate())(i,o)},((e,t)=>t+1)),x=e=>{const t=[],n=e[2].split(" ")[1],r=e[1].split(" ")[1],s=bT.find((e=>e.chi.includes(n)));s&&t.push(`T\u1ecda ${s.toa} <span class="text-yellow-400"> - N\u0103m ${e[2]}</span>`);const i=bT.find((e=>e.chi.includes(r)));return i&&t.push(`T\u1ecda ${i.toa} <span class="text-yellow-400"> - Th\xe1ng ${e[1]}</span>`),t},v=(e,t,r)=>{new Date(r,t-1,e);const s=nb(e,t,r),i=rb(s),a={solarDate:`${e}/${t}/${r}`,lunarDate:`${s.day}/${s.month}${s.leap?"n":""}/${s.year}`,canChi:i,tamSat:x(i),year:r};h(a),A(a.tamSat),n&&n(a)};return(0,t.useEffect)((()=>{v(c,i,o)}),[]),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:$j.HEADER.SELECT_GROUP,children:[(0,At.jsx)("select",{value:c,onChange:e=>{const t=parseInt(e.target.value);u(t),v(t,i,o)},className:$j.HEADER.SELECT,children:f.map((e=>(0,At.jsxs)("option",{value:e,children:["Ng\xe0y ",e]},e)))}),(0,At.jsx)("select",{value:i,onChange:e=>{const t=parseInt(e.target.value);a(t),v(c,t,o)},className:$j.HEADER.SELECT,children:p.map((e=>(0,At.jsxs)("option",{value:e,children:["Th\xe1ng ",e]},e)))}),(0,At.jsx)("select",{value:o,onChange:e=>{const t=parseInt(e.target.value);l(t),v(c,i,t)},className:$j.HEADER.SELECT,children:g.map((e=>(0,At.jsx)("option",{value:e,children:e},e)))})]}),d&&(0,At.jsxs)("div",{className:"text-center mt-4",children:[(0,At.jsxs)("div",{className:"text-green-400 hidden",children:["D\u01b0\u01a1ng l\u1ecbch: ",d.solarDate]}),(0,At.jsxs)("div",{className:"text-white",children:["\xc2m l\u1ecbch: ",d.lunarDate]}),(0,At.jsxs)("div",{className:"text-green-400 text-sm py-2",children:["Ng\xe0y ",d.canChi[0]," - Th\xe1ng ",d.canChi[1]," - N\u0103m ",d.canChi[2]]}),m.length>0&&m.map(((e,t)=>(0,At.jsxs)("div",{className:"text-xs py-1 hidden",children:[(0,At.jsx)("span",{className:"text-white font-bold",children:"Ph\u1ea1m Tam s\xe1t"}),(0,At.jsx)("span",{className:"",dangerouslySetInnerHTML:{__html:e}})]},t)))]})]})};function NT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const jT=t.forwardRef(NT);function CT(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const TT=t.forwardRef(CT),ST=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{const s=new Date(Date.now()+864e5*n).toUTCString(),{path:i="/",domain:a="",secure:o=!1,sameSite:l="Lax"}=r;let c=`${e}=${encodeURIComponent(t)}; expires=${s}; path=${i}; SameSite=${l}`;a&&(c+=`; domain=${a}`),o&&(c+="; secure"),document.cookie=c}catch(s){console.error("Error setting cookie:",s)}},_T=e=>{try{var t;const n=null===(t=document.cookie.split("; ").find((t=>t.startsWith(`${e}=`))))||void 0===t?void 0:t.split("=")[1];return n?decodeURIComponent(n):null}catch(n){return console.error("Error getting cookie:",n),null}},ET=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";try{document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=${t}`}catch(n){console.error("Error deleting cookie:",n)}},BT=e=>null!==_T(e),MT=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365;try{const r=JSON.stringify(t);ST(e,r,n)}catch(r){console.error("Error setting JSON cookie:",r)}},kT=e=>{try{const t=_T(e);return t?JSON.parse(t):null}catch(t){return console.error("Error parsing JSON cookie:",t),null}},LT="lunar_cookie_consent",IT=()=>"accepted"===_T(LT),DT=()=>BT(LT),PT={THEME:"lunar_theme",LANGUAGE:"lunar_language",FONT_SIZE:"lunar_font_size",USER_PREFERENCES:"lunar_user_prefs",VISIT_COUNT:"lunar_visit_count",FIRST_VISIT:"lunar_first_visit",LAST_FEATURE:"lunar_last_feature",BIRTH_DATA_SAVED:"lunar_birth_saved",FAVORITE_FEATURES:"lunar_favorites",DISPLAY_MODE:"lunar_display_mode",ANALYTICS_ID:"lunar_analytics_id",CAMERA_PERMISSION:"lunar_camera_permission",GPS_PERMISSION:"lunar_gps_permission",COMPASS_PERMISSION:"lunar_compass_permission"},FT=()=>{if(DT()){if(BT(PT.THEME)||ST(PT.THEME,"dark"),BT(PT.LANGUAGE)||ST(PT.LANGUAGE,"vi"),BT(PT.FONT_SIZE)||ST(PT.FONT_SIZE,"medium"),BT(PT.VISIT_COUNT)){const e=parseInt(_T(PT.VISIT_COUNT)||"0");ST(PT.VISIT_COUNT,(e+1).toString())}else ST(PT.VISIT_COUNT,"1"),ST(PT.FIRST_VISIT,(new Date).toISOString());BT(PT.ANALYTICS_ID)||ST(PT.ANALYTICS_ID,"user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9))}},UT=(e,t)=>{if(!DT())return;const n={granted:t,timestamp:Date.now(),userAgent:navigator.userAgent};MT(PT[`${e.toUpperCase()}_PERMISSION`],n,365)},RT=e=>{const t=kT(PT[`${e.toUpperCase()}_PERMISSION`]);if(!t)return null;const n=Date.now()-2592e6;return t.timestamp<n?(HT(e),null):t.granted},OT=e=>!0===RT(e),HT=e=>{ET(PT[`${e.toUpperCase()}_PERMISSION`])},QT=()=>{const[e,n]=(0,t.useState)({camera:null,gps:null,compass:null}),[r,s]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(()=>{const e=RT("camera"),t=RT("gps"),r=RT("compass");n({camera:e,gps:t,compass:r}),s(!1)})()}),[]);const i=(0,t.useCallback)((async()=>{try{if(OT("camera"))return n((e=>({...e,camera:!0}))),{granted:!0,source:"cookie"};return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach((e=>e.stop())),UT("camera",!0),n((e=>({...e,camera:!0}))),{granted:!0,source:"browser"}}catch(e){return console.error("\u274c Camera permission denied:",e),n((e=>({...e,camera:!1}))),{granted:!1,source:"browser",error:e.message}}}),[]),a=(0,t.useCallback)((async()=>{try{if(OT("gps"))return n((e=>({...e,gps:!0}))),{granted:!0,source:"cookie"};const e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}));return UT("gps",!0),n((e=>({...e,gps:!0}))),{granted:!0,source:"browser",position:e}}catch(e){return console.error("\u274c GPS permission denied:",e),n((e=>({...e,gps:!1}))),{granted:!1,source:"browser",error:e.message}}}),[]),o=(0,t.useCallback)((async()=>{try{if(OT("compass")){n((e=>({...e,compass:!0})));if(!await l())throw HT("compass"),n((e=>({...e,compass:null}))),new Error("Cookie permission invalid, browser denies access");return{granted:!0,source:"cookie"}}if(!window.DeviceOrientationEvent)throw new Error("Device orientation not supported on this device");if("function"===typeof DeviceOrientationEvent.requestPermission)try{const e=await DeviceOrientationEvent.requestPermission();if("granted"===e){if(!await l())throw new Error("iOS permission granted but no orientation data received");return UT("compass",!0),n((e=>({...e,compass:!0}))),{granted:!0,source:"ios-permission"}}throw new Error(`iOS DeviceOrientation permission ${e}`)}catch(e){throw console.error("\u274c iOS DeviceOrientation permission error:",e),new Error(`iOS permission error: ${e.message}`)}try{if("denied"===(await navigator.permissions.query({name:"gyroscope"})).state)throw new Error("Gyroscope/Device orientation permission denied by browser")}catch(t){}if(await l())return UT("compass",!0),n((e=>({...e,compass:!0}))),{granted:!0,source:"direct-access"};throw new Error("Kh\xf4ng th\u1ec3 truy c\u1eadp c\u1ea3m bi\u1ebfn la b\xe0n. Thi\u1ebft b\u1ecb c\xf3 th\u1ec3 kh\xf4ng h\u1ed7 tr\u1ee3 ho\u1eb7c quy\u1ec1n b\u1ecb t\u1eeb ch\u1ed1i.")}catch(r){return console.error("\u274c Compass permission denied:",r),n((e=>({...e,compass:!1}))),{granted:!1,source:"browser",error:r.message}}}),[]),l=(0,t.useCallback)((()=>new Promise((e=>{let t,n=!1;const r=s=>{n||null===s.alpha&&null===s.beta&&null===s.gamma&&void 0===s.webkitCompassHeading||(n=!0,clearTimeout(t),window.removeEventListener("deviceorientation",r),e(!0))};window.addEventListener("deviceorientation",r),t=setTimeout((()=>{n||(window.removeEventListener("deviceorientation",r),e(!1))}),5e3)}))),[]),c=(0,t.useCallback)((e=>{HT(e),n((t=>({...t,[e]:null})))}),[]),u=(0,t.useCallback)((()=>{HT("camera"),HT("gps"),HT("compass"),n({camera:null,gps:null,compass:null})}),[]),d=(0,t.useCallback)((e=>{HT(e),n((t=>({...t,[e]:null})))}),[]),h=(0,t.useCallback)((t=>!0===e[t]),[e]),m=(0,t.useCallback)((t=>e[t]),[e]),A=(0,t.useCallback)((t=>!1===e[t]),[e]);return{permissions:e,loading:r,requestCameraPermission:i,requestGPSPermission:a,requestCompassPermission:o,checkActualCompassPermission:l,clearPermission:c,clearAllPermissions:u,resetPermission:d,hasPermission:h,getPermissionStatus:m,isPermissionDenied:A}},zT=e=>{let{onDirectionChange:n,onHeadingChange:r,onLockChange:s}=e;const[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(0),[c,u]=(0,t.useState)("B"),[d,h]=(0,t.useState)(!0),[m,A]=(0,t.useState)("prompt"),[g,p]=(0,t.useState)(!1),[f,x]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(!1),N=(0,t.useRef)(0),j=(0,t.useRef)(null),C=(0,t.useRef)(null),{hasPermission:T,requestCompassPermission:S,resetPermission:_,checkActualCompassPermission:E}=QT(),B={0:"B",45:"\u0110B",90:"\u0110",135:"\u0110N",180:"N",225:"TN",270:"T",315:"TB",360:"B"},M=e=>((e%=360)<0&&(e+=360),e),k=e=>{const t=M(e),n=45*Math.round(t/45);return B[360===n?0:n]},L=e=>{if(i||f)return;let t;if(e.webkitCompassHeading)t=e.webkitCompassHeading;else{if(null===e.alpha)return;t=360-e.alpha}t=M(t);const s=((e,t,n)=>{e=M(e);let r=(t=M(t))-e;return r>180?r-=360:r<-180&&(r+=360),M(e+r*n)})(N.current,t,.2);N.current=s,l(Math.round(s));const a=k(s);if(u(a),n&&n(a),r&&r(Math.round(s)),Math.abs(M(t-N.current))>20){const e=document.querySelector(".compass-needle");e&&(e.classList.add("wobble"),setTimeout((()=>{e.classList.remove("wobble")}),1e3))}},I=()=>{C.current&&(window.removeEventListener("deviceorientation",C.current),C.current=null),_("compass"),A("prompt"),h(!0),p(!1),l(0),u("B"),D()},D=async()=>{try{w(!0),p(!1);if(!(await S()).granted)return h(!1),p(!0),A("denied"),void w(!1);if(!await E())return h(!1),p(!0),A("denied"),void w(!1);A("granted"),h(!0),p(!1),C.current=L,window.addEventListener("deviceorientation",C.current),w(!1)}catch(e){console.error("Error requesting permission:",e),h(!1),p(!0),A("denied"),w(!1)}};return(0,t.useEffect)((()=>((()=>{if(j.current)for(let e=0;e<360;e+=30){const t=document.createElement("div");t.className="degree-mark",t.style.transform=`rotate(${e}deg) translateY(-50%)`,j.current.appendChild(t)}})(),T("compass")?(console.log("\ud83e\udded Compass permission found in cookie, verifying with browser..."),A("granted"),h(!0),p(!1),E().then((e=>{e?(C.current=L,window.addEventListener("deviceorientation",C.current)):(A("prompt"),D())}))):D(),()=>{C.current&&window.removeEventListener("deviceorientation",C.current)})),[]),d?(0,At.jsxs)("div",{className:"text-center flex flex-col justify-center items-center gap-1",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-1",children:[(0,At.jsxs)("div",{className:"text-gray-400 text-sm mr-1 flex items-center gap-1",children:[T("compass")&&(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),"La b\xe0n"]}),(0,At.jsx)("button",{onClick:()=>{f||y(o),x(!f),s&&s(!f)},className:"focus:outline-none",children:f?(0,At.jsx)(jT,{className:"h-5 w-5 text-red-500"}):(0,At.jsx)(TT,{className:"h-5 w-5 text-yellow-500"})})]}),(0,At.jsxs)("div",{className:"text-center flex items-center justify-center",children:[(0,At.jsxs)("div",{className:"relative w-10 h-10 mr-2",children:[(0,At.jsx)("div",{ref:j,className:"absolute inset-0 pointer-events-none"}),(0,At.jsx)("div",{className:"pointer-events-none w-full h-full compass-needle",style:{transformOrigin:"center center",transform:`rotate(${f?-v:-o}deg)`},children:(0,At.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAozSURBVHgB7drLb1TXHcDx39gz9gwGIWqZ1pFVS0WtSqmUVG0WVRN1mso0PMKipSuEhFC2rLOd/6PrrtgmfXhRIZVF1SoKagsIISQHhNViYmMcY894Hv1dGyRQ7Xvu47zG/n6kKxyFhXW5vznn3PmKAAAAHDgVQSiV1sv7r3/2BThImiLVFZHZ5GqJjAiC4MYHMiYyPhA51xP5xcL2fyIEBiCQo7oC6M3/if54bkGkLgiiKgihoje+rhv/uVHd/0/raiDAQdHSD56vRX6pA7Ci26CvVkXeFVbjILjpAdwWqenD/3ZlZ++ffPr/7KesAkEwAAHUdrY/H8rLAejqOWCUcwAOiIpue2b0eqTXILm+Eln8tci0APtdc2f/f3qws/8fvLyWdQjmmryU8I4tkGdbIg29fiVvbnkaep0Z4xzgHQPg2ezOp/w78uanfXIWeL/CAGCfS/b/39YD8H9f2/68uv4z2J4P+MQK4FFTP+HXRD6o7P7Gp76s3wecIovwigHwSPf+Nf2Uf1t2f8jH9R/jw8O8DvWKAfDo1M4e/7Tsvtcf163R+9/gHIB9Ktn/f18f8qVd9v/bl/6/J5si3xM+mLzhRnvyW93aJO//0970JGeDnsh7Z7a/LIYPDIAnD/Wh7or8SNIPueMbIue2OAd4wwD4UfnOzpddH0j6AIzpP8iPpxgA7Cct/dIref3ZezN/2Ot6Sh7tDzfZg9s7rz/fGcm2tyeP9ogB8OC1/DnLQ10nj/aH+tC9yu9FJvTPk5Ltfid/59RxBgD7QXP3/Nl0kUd7whbIsT3yZxPyaE8YAMf2yJ9NyKOxL6Tlz6aLPNoDVgCHmun5swl5tAcMgEOG/NmEPNoDBsAhQ/5sQh6NoWbMn00XebR73FhHsuTPJuTR7jEAjmTMn03Iox1jANzImj+bkEdj+LTy5c/k0QFxUx3ImT+bkEc7xAA4kDN/NiGPdoja0L68+bMJebRDrACWNUVG10V+oD8eFkv0y7D670R+2OQDyzoGwLKC+bMJebQjDIBlBfNnE/JoDIUy+TN5dACsABY1y+XPJuTRDjAAFpXMn03Iox1gACwqmT+bkEcjaqXzZ/Jo/7iRltjIn03Io+1jACyxlD+bkEdbxgDYYSt/NiGPRnxadvNn8miPuIkWWM6fTcijLWIALLCcP5uQR1tEXVie7fzZhDzaIlaAkpoO8mcT8mh7GICSHOXPJuTRljAAJc26yZ9NyKMRBZf5M3m0B6wAJTTd5s8m5NEWMAAlOM6fTcijLWAASnCcP5uQRyMo5/kzebR73LiCfOTPJuTR5TEABXnKn03Io0tiAIrxlT+bkEfDv5bf/Jk82iFuWgGe82cT8ugSGIACPOfPJuTRJVAT5uc7fzYhjy6BFSCnZoD82YQ8ujgGIKdA+bMJeXRBDEBOs2HyZxPyaHgRMn8mj3aAFSCHZtj82YQ8ugAGIIfA+bMJeXQBDEAOgfNnE/JoOBU8fyaPto8blVEM+bMJeXR+DEBGkeTPJuTROTEA2cSSP5uQR8O+Vlz5M3m0RdykDCLLn03Io3NgADKILH82IY/OgXrQLLb82YQ8OgdWAINmhPmzCXl0dgyAQaT5swl5dEYMgMFsnPmzCXk0rIg5fzbm0Rvk0UasACmacefPJvU2ebQRA5AiyZ978ecPexnX3/0MeXQ63hKkeOvw4Xq/0TjdHwzGBzJcKpVKkke/11haYgVIwQCk2Pzoo8HTTz4ZWa3VZKvXk2GhWzYZHR2VbqfTW/v4Y5HPPxfsjgFI0R0Z6VSOHr3ZGwxm+73e8LxRqVRktFrdHDt0aP7IkSObgj0xACke3rq12ahWP2u3278Z6feH6pWibtm2RsfGbjUaydcY2EtFkKaysrIyu7y8/Ldut/tNGSK6BXpy4sSJd/Us8Ei25wG74S1QusHFixfX9OF/VK1W+zIk9OHv9nq9f58/f17f4vLwp2EADPRBauvDf1N/bMuQ0E/9LR2CL7a2tjqCVAyA2ebExMSnMkQD0O/323r4/XOn0xma3zkUBsDgxo0b3cuXL9/Vg/DGyEj8t0s//Qf6e359/Pjxu/q7D8+720AYgAw2lD5Yt/XqSuT0d9RdW++O7v/Xhf2/EQOQwfT0dLIN+oP+GP07dR2AjXq9/qepqakNgREDkMH169fbhw4duqkPV/SHSt3/93QL9M+FhYXoV6sYMADZ9K9evfpQD5VrMZ8D9G3VQAfg+bVr1/7F/j8bBiCjFy9ebOoD9g8dgGhXgcFg0NHf7y+Li4vJVo39fwYMQEYzMzPt8fHxP0rc54BOo9H44uTJk7z/z4gUIruRpaWl766urv5V37JMSYT0y6+nx44d+/nk5ORdYQXIhBUgu/6lS5dWut3uSrLXlsjowz/Q323pypUrT4SHPzMGIIf19fXky7CbetCMbouhb6g2a7Xa/NraGvlzDgxADs+ePWvrHvuz5GGTyOgBeEsHgPw5J84A+USbR5M/F8MKkE+UeTT5c3EMQE4x5tHkz8UxAPlFl0eTPxfHAOQUWx5N/lwOA1BATHk0+XM5DEABMeXR5M/lMAAFxJRHkz+XwwAUE0UeTf5cHgNQUAx5NPlzeQxAQZHk0eTPJZFCFBc8jyZ/Lo8VoLigeTT5sx0MQAkh82jyZzsYgBJC5tHkz3ZwBignWB5N/mwHK0A5QfJo8md7GICSQuTR5M/2MADlec+jyZ/tYQBK8p1Hkz/bxQBY4DOPJn+2iwGwwGceTf5sFwNggc88mvzZLgbADi95NPmzfQyAJT7yaPJn+xgASzzl0eTPlpFC2OM8jyZ/to8VwB6neTT5sxsMgEUu82jyZzcYAItc5tHkz25wBrDLWR5N/uwGK4BdTvJo8md3GADLXOTR5M/uMAD2Wc+jyZ/dYQAss51Hkz+7xQA4YDOPJn92iwFwwGYeTf7sFgPggM08mvzZLQbADSt5NPmzewyAIzbyaPJn9xgARyzl0eTPjpFCuFM6jyZ/do8VwJ1SeTT5sx8MgENl8mjyZz8YAIfK5NHkz35wBnCrcB5N/uwHK4BbhfJo8md/GADHiuTR5M/+MADu5c6jyZ/9YQAcy5tHkz/7xQB4kCePJn/2iwHwIE8eTf7sFwPgQZ48mvzZLwbAj0x5NPmzfwyAJ1nyaPJn/xgATzLm0eTPnpFC+GPMo8mf/WMF8Cc1jyZ/DoMB8CgtjyZ/DoMB8CgtjyZ/DoMzgF975tHkz2GwAvi1ax5N/hwOA+DZbnk0+XM4DIB//5dHkz/jQJmbm3vrzp07i/fv3x/cu3ev/+DBg0d6CJ4RzmTesQIE8Hoera9FyZ8DYgACeJVH6wAkW55N8udwGIAAXuXRsnMO6JI/48A5e/bst/QM8KXu/7+8cOFC8p0A+/8AqoIgnj9/3taD79/1x7XHjx+TPwfCAASSnANqtdqneg6YmJycZPsTCAMQTkdXgBt6AK7Mz88TwOHg0QEYabVavIgAAAAAAAAAALjyP8EFqAYKcc1rAAAAAElFTkSuQmCC",alt:"Compass",className:"w-full h-full object-contain"})})]}),(0,At.jsxs)("div",{className:"text-yellow-400 text-xl flex items-center justify-center gap-2 w-[100px]",children:[(0,At.jsxs)("span",{className:"font-bold",children:[f?v:o,"\xb0"]}),(0,At.jsx)("span",{children:f?k(v):c})]})]}),(0,At.jsx)("button",{className:"px-2 py-1 bg-blue-500 text-white rounded-md text-xs hidden",onClick:()=>{if(f)return;a(!0);let e=0;const t=setInterval((()=>{e=M(e+5);const n=document.querySelector(".compass-needle");n&&(n.style.transform=`rotate(${-e}deg)`),e>=359&&(clearInterval(t),a(!1))}),20)},disabled:i||f,children:i?"\u0110ang hi\u1ec7u ch\u1ec9nh...":"Hi\u1ec7u ch\u1ec9nh"})]}):(0,At.jsx)("div",{className:"text-xs text-center",children:g?(0,At.jsxs)("div",{className:"text-red-500",children:[(0,At.jsx)("p",{className:"mb-2",children:"Thi\u1ebft b\u1ecb c\u1ee7a b\u1ea1n kh\xf4ng h\u1ed7 tr\u1ee3 la b\xe0n ho\u1eb7c quy\u1ec1n truy c\u1eadp b\u1ecb t\u1eeb ch\u1ed1i."}),(0,At.jsx)("button",{className:"px-2 py-1 bg-red-500 text-white rounded-md",onClick:I,disabled:b,children:b?"\u0110ang ki\u1ec3m tra...":"Th\u1eed l\u1ea1i"})]}):(0,At.jsxs)("div",{className:"text-yellow-500",children:[(0,At.jsx)("p",{className:"mb-2",children:"Thi\u1ebft b\u1ecb c\u1ee7a b\u1ea1n kh\xf4ng h\u1ed7 tr\u1ee3 la b\xe0n."}),(0,At.jsx)("button",{className:"px-2 py-1 bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition-colors",onClick:D,disabled:b,children:b?"\u0110ang ki\u1ec3m tra...":"Th\u1eed l\u1ea1i"})]})})},{h4:VT,J4:KT}=eC,GT="#BAFF17",qT="#17B2FF",WT="#0029CE",$T="#FF17A2",XT="#00EC08",YT="#FFAE00",JT=e=>{var n,r,s,i,a,o,l;let{rotation:c}=e;const[u,d]=(0,t.useState)(!1),h=e=>{const t=((e+180)%360%360+7.5)%360,n=Math.floor(t/15);return VT[(n%24+24)%24]},m=e=>{const t=VT.find((t=>t.name===e.name));if(t&&t.infos){const e=t.infos.find((e=>void 0!==e.hauThien));return null===e||void 0===e?void 0:e.hauThien}return null},A=(e,t)=>({1:"6",6:"1",2:"7",7:"2",3:"8",8:"3",4:"9",9:"4"}[e]===t),g=(e,t)=>{const n=["1","6"],r=["2","7"],s=["3","8"],i=["4","9"],a=n.includes(e),o=r.includes(e),l=s.includes(e),c=i.includes(e);return!(!a||!r.includes(t))||(!(!o||!n.includes(t))||(!(!l||!i.includes(t))||!(!c||!s.includes(t))))},p=(()=>{var e,t,n,r,s,i,a,o,l;const u=h(c);if(!u)return null;const d=m(u);if(!d)return null;const A=VT.findIndex((e=>e.name===u.name)),g=d%2===0,p=null===(e=u.infos.find((e=>e.nguyenLong)))||void 0===e?void 0:e.nguyenLong,f="Thi\xean"===p;let x,v;x=f?(A+12)%24:g?(A-9+24)%24:(A+9)%24,v=f?A:g?(A+9)%24:(A-9+24)%24;const y=VT[x],b=null===y||void 0===y||null===(t=y.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0],w=null===y||void 0===y||null===(n=y.infos.find((e=>e.aiTinh)))||void 0===n?void 0:n.aiTinh[0],N=null===y||void 0===y||null===(r=y.infos.find((e=>e.nguyenLongColor)))||void 0===r?void 0:r.nguyenLongColor,j=KT.filter((e=>{const t=e.toaDo.start,n=b.start,r=b.end;if(n<=r){return t>=n&&t<=r}return t>=n||t<=r})).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),C=VT[v],T=null===C||void 0===C||null===(s=C.infos.find((e=>e.toaDo)))||void 0===s?void 0:s.toaDo[0],S=null===C||void 0===C||null===(i=C.infos.find((e=>e.aiTinh)))||void 0===i?void 0:i.aiTinh[0],_=null===C||void 0===C||null===(a=C.infos.find((e=>e.nguyenLongColor)))||void 0===a?void 0:a.nguyenLongColor,E=KT.filter((e=>{const t=e.toaDo.start,n=T.start,r=T.end;return n<=r?t>=n&&t<=r:t>=n||t<=r})).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),B=null===u||void 0===u||null===(o=u.infos.find((e=>e.aiTinh)))||void 0===o?void 0:o.aiTinh[0],M=B.son,k=VT.filter((e=>{var t,n;const r=(null===(t=e.infos.find((e=>e.aiTinh)))||void 0===t?void 0:t.aiTinh[0]).thuy,s=null===(n=e.infos.find((e=>e.nguyenLong)))||void 0===n?void 0:n.nguyenLong;return r===M&&s===p})),L=k.map((e=>{var t;return null===(t=e.infos.find((e=>e.nguyenLongColor)))||void 0===t?void 0:t.nguyenLongColor})),I=k.flatMap((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return KT.filter((e=>{const t=e.toaDo.start,r=n.start,s=n.end;return r<=s?t>=r&&t<=s:t>=r||t<=s}))})).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),D=VT.filter((e=>{var t,n;const r=(null===(t=e.infos.find((e=>e.aiTinh)))||void 0===t?void 0:t.aiTinh[0]).son,s=null===(n=e.infos.find((e=>e.nguyenLong)))||void 0===n?void 0:n.nguyenLong;return(1===M&&6===r||6===M&&1===r||2===M&&7===r||7===M&&2===r||3===M&&8===r||8===M&&3===r||4===M&&9===r||9===M&&4===r)&&s===p})),P=D.map((e=>{var t;return null===(t=e.infos.find((e=>e.nguyenLongColor)))||void 0===t?void 0:t.nguyenLongColor})),F=D.flatMap((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return KT.filter((e=>{const t=e.toaDo.start,r=n.start,s=n.end;return r<=s?t>=r&&t<=s:t>=r||t<=s}))})).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),U=D.map((e=>{const t=VT.findIndex((t=>t.name===e.name));return VT[(t+12)%24]})),R=U.map((e=>{var t;return null===(t=e.infos.find((e=>e.nguyenLongColor)))||void 0===t?void 0:t.nguyenLongColor})),O=U.flatMap((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return KT.filter((e=>{const t=e.toaDo.start,r=n.start,s=n.end;return r<=s?t>=r&&t<=s:t>=r||t<=s}))})).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),H=k.map((e=>{var t,n,r;const s=VT.findIndex((t=>t.name===e.name)),i=m(e);let a;a=f?(s+12)%24:i%2===0?(s-9+24)%24:(s+9)%24;const o=VT[a],l=null===o||void 0===o||null===(t=o.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0],c=null===o||void 0===o||null===(n=o.infos.find((e=>e.aiTinh)))||void 0===n?void 0:n.aiTinh[0],u=null===o||void 0===o||null===(r=o.infos.find((e=>e.nguyenLongColor)))||void 0===r?void 0:r.nguyenLongColor;return{name:o.name,toaDo:l?`${l.start}\xb0 - ${l.end}\xb0`:"",aiTinh:c?`${c.son} - ${c.thuy}`:"",start:null===l||void 0===l?void 0:l.start,end:null===l||void 0===l?void 0:l.end,color:u}})),Q=H.flatMap((e=>KT.filter((t=>{const n=t.toaDo.start,r=e.start,s=e.end;return r<=s?n>=r&&n<=s:n>=r||n<=s})))).map((e=>({name:e.name,start:e.toaDo.start,end:e.toaDo.end,khi:e.quai.khi,van:e.quai.van}))),z=null===u||void 0===u||null===(l=u.infos.find((e=>e.toaDo)))||void 0===l?void 0:l.toaDo[0],V=(c+180)%360,K=(c+0)%360,G=KT.filter((e=>{const t=e.toaDo.start,n=e.toaDo.end;return t<=n?V>=t&&V<=n:V>=t||V<=n})).map((e=>({name:e.name,khiVan:`${e.quai.van}`,toaDo:`${e.toaDo.start}\xb0 - ${e.toaDo.end}\xb0`})));return{huongAngle:K,toa:u.name,aiTinhToa:B?`${B.son} - ${B.thuy}`:"",toaDoToa:z?`${z.start}\xb0 - ${z.end}\xb0`:"",toaAngle:V,sonThuong:y.name,aiTinhSonThuong:w?`${w.son} - ${w.thuy}`:"",toaDoSonThuong:b?`${b.start}\xb0 - ${b.end}\xb0`:"",sonThuongColor:N,quaiTrongSonThuong:j.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),thuyLy:C.name,aiTinhThuyLy:S?`${S.son} - ${S.thuy}`:"",toaDoThuyLy:T?`${T.start}\xb0 - ${T.end}\xb0`:"",thuyLyColor:_,quaiTrongThuyLy:E.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),bonHuongThuy:k.map((e=>e.name)),aiTinhBonHuongThuy:k.map((e=>{var t,n,r;return null!==(t=e.infos.find((e=>e.aiTinh)))&&void 0!==t&&t.aiTinh[0]?`${null===(n=e.infos.find((e=>e.aiTinh)))||void 0===n?void 0:n.aiTinh[0].son} - ${null===(r=e.infos.find((e=>e.aiTinh)))||void 0===r?void 0:r.aiTinh[0].thuy}`:""})),toaDobonHuongThuy:k.map((e=>{var t,n,r,s;return(null===(t=e.infos.find((e=>e.toaDo)))||void 0===t||null===(n=t.toaDo[0])||void 0===n?void 0:n.start)+"\xb0 - "+(null===(r=e.infos.find((e=>e.toaDo)))||void 0===r||null===(s=r.toaDo[0])||void 0===s?void 0:s.end)+"\xb0"})).join(", "),bonHuongThuyColors:L,quaiTrongBonHuongThuy:I.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),xuatThuyKhau:H.map((e=>e.name)).join(", "),aiTinhXuatThuyKhau:H.map((e=>e.aiTinh)).join(", "),toaDoXuatThuyKhau:H.map((e=>e.toaDo)).join(", "),xuatThuyKhauColors:H.map((e=>e.color)),quaiTrongXuatThuyKhau:Q.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),thanhMonSon:D.map((e=>e.name)).join(", "),aiTinhThanhMonSon:D.map((e=>{var t,n,r;return null!==(t=e.infos.find((e=>e.aiTinh)))&&void 0!==t&&t.aiTinh[0]?`${null===(n=e.infos.find((e=>e.aiTinh)))||void 0===n?void 0:n.aiTinh[0].son} - ${null===(r=e.infos.find((e=>e.aiTinh)))||void 0===r?void 0:r.aiTinh[0].thuy}`:""})).join(", "),toaDoThanhMonSon:D.map((e=>{var t,n,r,s;return(null===(t=e.infos.find((e=>e.toaDo)))||void 0===t||null===(n=t.toaDo[0])||void 0===n?void 0:n.start)+"\xb0 - "+(null===(r=e.infos.find((e=>e.toaDo)))||void 0===r||null===(s=r.toaDo[0])||void 0===s?void 0:s.end)+"\xb0"})).join(", "),thanhMonSonColors:P,quaiTrongThanhMonSon:F.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),thanhMonThuy:U.map((e=>e.name)).join(", "),aiTinhThanhMonThuy:U.map((e=>{var t,n,r;return null!==(t=e.infos.find((e=>e.aiTinh)))&&void 0!==t&&t.aiTinh[0]?`${null===(n=e.infos.find((e=>e.aiTinh)))||void 0===n?void 0:n.aiTinh[0].son} - ${null===(r=e.infos.find((e=>e.aiTinh)))||void 0===r?void 0:r.aiTinh[0].thuy}`:""})).join(", "),toaDoThanhMonThuy:U.map((e=>{var t,n,r,s;return(null===(t=e.infos.find((e=>e.toaDo)))||void 0===t||null===(n=t.toaDo[0])||void 0===n?void 0:n.start)+"\xb0 - "+(null===(r=e.infos.find((e=>e.toaDo)))||void 0===r||null===(s=r.toaDo[0])||void 0===s?void 0:s.end)+"\xb0"})).join(", "),thanhMonThuyColors:R,quaiTrongThanhMonThuy:O.map((e=>({name:e.name,khiVan:`${e.van}`,toaDo:`${e.start}\xb0 - ${e.end}\xb0`}))),quaiTrongToa:G}})();return p?(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"overflow-y-auto overflow-x-hidden h-[600px] -mx-3",children:[(0,At.jsx)("div",{className:"text-xs text-center text-gray-500",children:(()=>{const e=[1,2,3,4],t=[6,7,8,9],n=(new Date).getFullYear()%10,r=e.includes(n),s=r?e:t,i=r?t:e;return(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,At.jsxs)("p",{className:"border border-gray-800 rounded-md p-1 flex-1",children:[(0,At.jsx)("b",{children:"Ngo\xe0i"})," ",(0,At.jsx)("br",{})," Thu\u1ef7 ",i.join(", ")," ",(0,At.jsx)("br",{})," S\u01a1n ",s.join(", ")]}),(0,At.jsxs)("p",{className:"border border-gray-800 rounded-md p-1 flex-1",children:[(0,At.jsx)("b",{children:"Trong"})," ",(0,At.jsx)("br",{})," Thu\u1ef7 ",s.join(", ")," ",(0,At.jsx)("br",{})," S\u01a1n ",i.join(", ")]})]})})})()}),(0,At.jsx)("div",{className:"line-style-2"}),(0,At.jsxs)("div",{className:"text-white text-lg font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-white",children:["N\u0103m ",(new Date).getFullYear()," \u1edf"]}),(0,At.jsxs)("span",{className:"text-purple-400",children:["V\u1eadn ",(()=>{const e={1:18,2:24,3:24,4:24,6:21,7:21,8:21,9:27};let t=(new Date).getFullYear()-1864,n=1;for(let r=1;r<=9;r++)if(5!==r){if(t<=0)break;t-=e[r],n=r}return n})()]})]}),(0,At.jsxs)("div",{className:"text-base my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"H\u01b0\u1edbng: "}),(0,At.jsxs)("span",{className:"text-green-400",children:[Math.round(p.huongAngle),"\xb0"]})]}),(0,At.jsxs)("div",{className:"text-base my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsx)("span",{className:"text-white",children:"T\u1ecda: "}),(0,At.jsxs)("span",{className:"text-white",children:[Math.round(p.toaAngle),"\xb0"]})]}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-4 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsxs)("div",{className:"text-center col-span-2",children:["T\u1ecda ",null===(n=h(c))||void 0===n?void 0:n.name]})]}),p.quaiTrongToa.map(((e,t)=>(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)))]}),(0,At.jsxs)("div",{className:"relative z-30",id:"zoomap",onClick:()=>d(!u),style:{cursor:"pointer"},children:[(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"sonthuong",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDoSonThuong.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"194",viewBox:"0 0 193 194",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 171.478C103.202 173.273 88.1459 173.109 73.303 170.99L97.5492 1.09815L118.088 171.478Z",stroke:"#BAFF17",strokeWidth:"2",style:{stroke:GT}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"thuyly",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDoThuyLy.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"194",viewBox:"0 0 193 194",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 171.478C103.202 173.273 88.1459 173.109 73.303 170.99L97.5492 1.09815L118.088 171.478Z",stroke:"#17B2FF",strokeWidth:"2",style:{stroke:qT}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"bonhuongthuy",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDobonHuongThuy.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"300",viewBox:"0 0 193 300",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 277.478C103.202 279.273 88.1459 279.109 73.303 276.99L97.5492 1.09815L118.088 277.478Z",stroke:"#0029CE",strokeWidth:"4",style:{stroke:WT}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"xuatthuykhau",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDoXuatThuyKhau.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"300",viewBox:"0 0 193 300",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 277.478C103.202 279.273 88.1459 279.109 73.303 276.99L97.5492 1.09815L118.088 277.478Z",stroke:"#FF17A2",strokeWidth:"6",style:{stroke:$T}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"thanhmonson",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDoThanhMonSon.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"194",viewBox:"0 0 193 194",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 171.478C103.202 173.273 88.1459 173.109 73.303 170.99L97.5492 1.09815L118.088 171.478Z",stroke:"#FFAE00",strokeWidth:"2",style:{stroke:YT}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-end justify-center",id:"thanhmonthuy",style:{transform:`rotate(${(()=>{const[e,t]=p.toaDoThanhMonThuy.split("\xb0 - ").map((e=>parseFloat(e)));let n;return n=e>t?(e+t+360)/2%360:(e+t)/2,(n-p.toaAngle+360)%360})()}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"193",height:"300",viewBox:"0 0 193 300",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-auto h-1/2",children:(0,At.jsx)("path",{opacity:"0.5",d:"M118.088 277.478C103.202 279.273 88.1459 279.109 73.303 276.99L97.5492 1.09815L118.088 277.478Z",stroke:"#00EC08",strokeWidth:"2",style:{stroke:XT}})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-full z-10 transform-origin-center flex items-center justify-center",id:"cungcan",style:{transform:`rotate(${135-p.huongAngle}deg) scale(${u?2:1})`},children:(0,At.jsx)("svg",{width:"250",height:"249",viewBox:"0 0 250 249",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,At.jsx)("path",{opacity:"0.2",d:"M81.4915 233.269C109.676 244.926 141.337 244.91 169.509 233.223L125.444 127L81.4915 233.269Z",fill:"#F9FF44"})})}),(0,At.jsx)("div",{className:"w-full h-full",children:(0,At.jsx)("img",{src:"https://stc-support-manage-brand.zdn.vn/medias/drive/2020/thiendianhan/HuyenKhongDaiQuai.png",alt:"HuyenKhongPhiTinh",className:"w-full h-auto",style:{transform:`rotate(${180-p.huongAngle}deg) scale(${u?2:1})`}})})]}),(0,At.jsx)("div",{className:"my-2 border-t border-white/10"}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(r=h(c))||void 0===r?void 0:r.name]}),(0,At.jsx)("span",{style:{color:GT},children:"S\u01a1n th\u01b0\u1ee3ng"}),(0,At.jsx)("span",{className:"text-white",children:p.sonThuong}),(0,At.jsx)("span",{style:{color:p.sonThuongColor},children:p.aiTinhSonThuong}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDoSonThuong,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"S\u01a1n Th\u01b0\u1ee3ng Th\xf4ng c\u0103n l\xe0 Th\u1ee7y \u0111\u1ebfn - H\u1ee3p c\u1eeda trong nh\xe0 (C\u1eeda ph\xf2ng), c\u1ea7u thang"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongSonThuong.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(s=h(c))||void 0===s?void 0:s.name]}),(0,At.jsx)("span",{style:{color:qT},children:"Th\u1ee7y l\xfd"}),(0,At.jsx)("span",{className:"text-white",children:p.thuyLy}),(0,At.jsx)("span",{style:{color:p.thuyLyColor},children:p.aiTinhThuyLy}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDoThuyLy,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"Th\u1ee7y l\xfd l\xe0 th\u1ee7y \u0111i \u0111\u1ebfn - H\u1ee3p c\u1ed5ng, c\u1eeda ngo\xe0i"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongThuyLy.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(i=h(c))||void 0===i?void 0:i.name]}),(0,At.jsx)("span",{style:{color:WT},children:"4 H\u01b0\u1edbng Th\u1ee7y"}),(0,At.jsx)("span",{className:"text-white",children:p.bonHuongThuy.join(", ")}),(0,At.jsx)("span",{style:{color:p.bonHuongThuyColors[0]},children:p.aiTinhBonHuongThuy}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDobonHuongThuy,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"L\xe0 Th\u1ee7y trong nh\xe0 - H\u1ee3p c\u1eeda ph\xf2ng, hay b\u1eadt cu\u1ed1i c\u1ea7u thang (ok nh\u1ea5t) , B\u1ec3 c\xe1 v\xe0  phong th\u1ee7y lu\xe2n \u1edf trong nh\xe0"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongBonHuongThuy.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(a=h(c))||void 0===a?void 0:a.name]}),(0,At.jsx)("span",{style:{color:$T},children:"Xu\u1ea5t Th\u1ee7y Kh\u1ea9u"}),(0,At.jsx)("span",{className:"text-white",children:p.xuatThuyKhau}),(0,At.jsx)("span",{style:{color:p.xuatThuyKhauColors[0]},children:p.aiTinhXuatThuyKhau}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDoXuatThuyKhau,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"Xu\u1ea5t Th\u1ee7y Kh\u1ea9u l\xe0 th\u1ee7y \u0111i \u0111\u1ebfn - H\u1ee3p c\u1ed5ng, c\u1eeda ngo\xe0i, ng\xe3 ba, ng\xe3 t\u01b0"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongXuatThuyKhau.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(o=h(c))||void 0===o?void 0:o.name]}),(0,At.jsx)("span",{style:{color:YT},children:"Th\xe0nh M\xf4n S\u01a1n"}),(0,At.jsx)("span",{className:"text-white",children:p.thanhMonSon}),(0,At.jsx)("span",{style:{color:p.thanhMonSonColors[0]},children:p.aiTinhThanhMonSon}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDoThanhMonSon,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"Th\xe0nh M\xf4n S\u01a1n l\xe0 n\u01a1i k\xedch s\u01a1n - H\u1ee3p \u0110\u1ec3 \u0111\xe1, \u0110\u1ec3 b\u1ebfp \u0111\u01b0\u1ee3c v\xe0 kh\xf4ng tr\xf9ng 4 h\u01b0\u1edbng th\u1ee7y"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongThanhMonSon.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]}),(0,At.jsxs)("div",{className:"text-white text-sm my-2 font-bold p-2relative z-20 flex items-center justify-center gap-2 mb-2",children:[(0,At.jsxs)("span",{className:"text-gray-400 hidden",children:["T\u1ecda: ",null===(l=h(c))||void 0===l?void 0:l.name]}),(0,At.jsx)("span",{style:{color:XT},children:"Th\xe0nh M\xf4n Th\u1ee7y"}),(0,At.jsx)("span",{className:"text-white",children:p.thanhMonThuy}),(0,At.jsx)("span",{style:{color:p.thanhMonThuyColors[0]},children:p.aiTinhThanhMonThuy}),(0,At.jsxs)("span",{className:"text-gray-400",children:["(",p.toaDoThanhMonThuy,")"]})]}),(0,At.jsx)("div",{className:"text-gray-400 text-xs my-2 p-2 relative z-20 flex items-center justify-center gap-2 bg-black/50 rounded-md",children:"Th\xe0nh M\xf4n Th\u1ee7y l\xe0 n\u01a1i k\xedch thu\u1ef7 - H\u1ee3p c\u1ed5ng, c\u1eeda ngo\xe0i, ng\xe3 ba, ng\xe3 t\u01b0"}),(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 relative z-20 flex flex-col items-center justify-center gap-2 mb-6 bg-white/10 rounded-md",children:[(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("div",{className:"text-center",children:"T\xean Qu\xe1i"}),(0,At.jsx)("div",{className:"text-center",children:"V\u1eadn"}),(0,At.jsx)("div",{className:"text-center col-span-2",children:"T\u1ecda \u0110\u1ed9"})]}),p.quaiTrongThanhMonThuy.map(((e,t)=>{var n;const r=null===(n=p.quaiTrongToa[0])||void 0===n?void 0:n.khiVan,s=e.khiVan,i=A(r,s),a=g(r,s);return(0,At.jsxs)("div",{className:"grid grid-cols-4 gap-4 w-full",children:[(0,At.jsx)("span",{className:"text-gray-400 text-center",children:e.name}),(0,At.jsx)("span",{className:"text-center "+(i?"text-green-500":a?"text-red-500":"text-gray-400"),children:e.khiVan}),(0,At.jsx)("span",{className:"text-gray-400 text-center col-span-2",children:e.toaDo})]},t)}))]})]})}):null},ZT={CUNG_NAMES:["\u0110\xf4ng Nam","Nam","T\xe2y Nam","\u0110\xf4ng","Trung Cung","T\xe2y","\u0110\xf4ng B\u1eafc","B\u1eafc","T\xe2y B\u1eafc"],BAY_SAO_THUAN:[4,8,5,6,1,7,2,3,0],BAY_SAO_NGHICH:[4,0,3,2,7,1,6,5,8],GOC_QUAY:{"\u0110\xf4ng Nam":45,Nam:0,"T\xe2y Nam":-45,"\u0110\xf4ng":90,"Trung Cung":0,"T\xe2y":-90,"\u0110\xf4ng B\u1eafc":135,"B\u1eafc":180,"T\xe2y B\u1eafc":225}},eS={"\u0110\xf4ng Nam":["\u0110N1","\u0110N2","\u0110N3"],Nam:["N1","N2","N3"],"T\xe2y Nam":["TN1","TN2","TN3"],"\u0110\xf4ng":["\u01101","\u01102","\u01103"],"Trung Cung":[],"T\xe2y":["T1","T2","T3"],"\u0110\xf4ng B\u1eafc":["\u0110B1","\u0110B2","\u0110B3"],"B\u1eafc":["B1","B2","B3"],"T\xe2y B\u1eafc":["TB1","TB2","TB3"]},tS=t.memo((e=>{let{value:t,onChange:n,options:r,className:s}=e;return(0,At.jsx)("select",{className:`bg-black text-white border border-gray-500 rounded-md p-2 ${s}`,value:t,onChange:n,children:r})})),nS=t.memo((e=>{let{saoSon:t,startStar:n,saoHuong:r}=e;return(0,At.jsxs)("div",{className:"flex flex-row items-center justify-center w-full h-full relative",children:[(0,At.jsx)("span",{className:"text-green-400 text-sm font-bold ml-2 absolute top-1 left-1",children:t}),(0,At.jsx)("span",{className:"text-white text-3xl font-bold mx-2",children:n}),(0,At.jsx)("span",{className:"text-sky-400 text-sm font-bold mr-2 absolute top-1 right-1",children:r})]})})),rS=t.memo((e=>{let{sao:t}=e;return(0,At.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold"},children:(0,At.jsx)("span",{className:"text-white text-3xl font-bold mx-2",children:t})})})),sS=t.memo((e=>{let{dataSaoSon:t,dataSaoHuong:n,cungName:r}=e;return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("span",{className:"text-green-400 text-sm font-bold ml-2 absolute top-1 left-1",children:t}),(0,At.jsx)("span",{className:"text-sky-400 text-sm font-bold mr-2 absolute top-1 right-1",children:n}),(0,At.jsx)("div",{className:"text-xs text-gray-400 absolute bottom-1 left-1 text-center w-full",children:r})]})})),iS=t.memo((e=>{let{sao:t,saoSon:n,saoHuong:r,startStar:s,dataSaoSon:i,dataSaoHuong:a,cungName:o,isCenter:l,rotationDeg:c,idx:u,scale:d=1}=e;const h=(e=>({0:{top:0,left:0},1:{top:0,left:"50%",transform:"translateX(-50%)"},2:{top:0,right:0},3:{top:"50%",left:0,transform:"translateY(-50%)"},4:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},5:{top:"50%",right:0,transform:"translateY(-50%)"},6:{bottom:0,left:0},7:{bottom:0,left:"50%",transform:"translateX(-50%)"},8:{bottom:0,right:0}}[e]||{}))(u);let m=`${h.transform||""} scale(${d}) rotate(${-c}deg)`;return(0,At.jsx)("div",{className:" absolute",style:{...h,transform:m,zIndex:l?2:1},children:(0,At.jsxs)("div",{className:`block-${u+1} border border-gray-700 bg-black flex flex-col items-center justify-center w-[100px] h-[100px]`,children:[l?(0,At.jsx)(nS,{saoSon:n,startStar:s,saoHuong:r}):(0,At.jsx)(rS,{sao:t}),(0,At.jsx)(sS,{dataSaoSon:i,dataSaoHuong:a,cungName:o})]})})}));function aS(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const oS=t.forwardRef(aS);function lS(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const cS=t.forwardRef(lS),{h4:uS}=eC,dS={huongIdx:1,startStar:8,selectedSon:uS[0]};function hS(e,t){switch(t.type){case"SET_HUONG":return{...e,huongIdx:t.payload};case"SET_START_STAR":return{...e,startStar:t.payload};case"SET_SON":return{...e,selectedSon:t.payload};default:return e}}function mS(e){let{rotation:n}=e;const[r,s]=(0,t.useReducer)(hS,dS),{huongIdx:i,startStar:a,selectedSon:o}=r,{data1:l,saoHuong:c,saoSon:u}=((e,n)=>{const r=(0,t.useMemo)((()=>{const t=Array(9).fill(null),n=ZT.BAY_SAO_THUAN;for(let r=0;r<9;r++){let s=(e+r-1)%9+1;t[n[r]]=s}return t}),[e]),s=8-n;return{data1:r,saoHuong:r[n],saoSon:r[s]}})(a,i),{dataSaoSon:d,dataSaoHuong:h}=((e,n,r)=>{const s=(0,t.useMemo)((()=>{var t,n;if(null===r||void 0===r||null===(t=r.infos)||void 0===t||null===(n=t[0])||void 0===n||!n.nguyenLong)return Array(9).fill(null);let s;const i=r.infos[0].nguyenLong,a=e=>e%2===0;s="\u0110\u1ecba"===i?a(e)?ZT.BAY_SAO_NGHICH:ZT.BAY_SAO_THUAN:"Thi\xean"===i||"Nh\xe2n"===i?a(e)?ZT.BAY_SAO_THUAN:ZT.BAY_SAO_NGHICH:a(e)?ZT.BAY_SAO_NGHICH:ZT.BAY_SAO_THUAN;const o=Array(9).fill(null);for(let r=0;r<9;r++){let t=(e+r-1)%9+1;o[s[r]]=t}return o}),[e,r]),i=(0,t.useMemo)((()=>{var e,t;if(null===r||void 0===r||null===(e=r.infos)||void 0===e||null===(t=e[0])||void 0===t||!t.nguyenLong)return Array(9).fill(null);let s;const i=r.infos[0].nguyenLong,a=e=>e%2===0;s="\u0110\u1ecba"===i?a(n)?ZT.BAY_SAO_NGHICH:ZT.BAY_SAO_THUAN:"Thi\xean"===i||"Nh\xe2n"===i?a(n)?ZT.BAY_SAO_THUAN:ZT.BAY_SAO_NGHICH:a(n)?ZT.BAY_SAO_NGHICH:ZT.BAY_SAO_THUAN;const o=Array(9).fill(null);for(let r=0;r<9;r++){let e=(n+r-1)%9+1;o[s[r]]=e}return o}),[n,r]);return{dataSaoSon:s,dataSaoHuong:i}})(u,c,o);(0,t.useEffect)((()=>{if(null!==n&&void 0!==n){const e=(e=>{const t=(e%360+7.5)%360;return(Math.floor(t/15)%24+24)%24})(n),t=uS[e];if(t){s({type:"SET_SON",payload:t});const e=ZT.CUNG_NAMES.findIndex((e=>{var n,r;return null===(n=eS[e])||void 0===n?void 0:n.includes(null===(r=t.infos[4])||void 0===r?void 0:r.huong)}));-1!==e&&s({type:"SET_HUONG",payload:e})}}}),[n]);const m=t.useMemo((()=>uS),[]),A=((0,t.useCallback)((e=>{const t=Number(e.target.value);s({type:"SET_HUONG",payload:t})}),[]),(0,t.useCallback)((e=>{s({type:"SET_START_STAR",payload:Number(e.target.value)})}),[])),g=(0,t.useCallback)((e=>{const t=uS.find((t=>t.name===e.target.value));if(t){s({type:"SET_SON",payload:t});const e=ZT.CUNG_NAMES.findIndex((e=>{var n,r;return null===(n=eS[e])||void 0===n?void 0:n.includes(null===(r=t.infos[4])||void 0===r?void 0:r.huong)}));-1!==e&&s({type:"SET_HUONG",payload:e})}}),[]),p=(0,t.useCallback)((()=>{const e=(m.findIndex((e=>e.name===o.name))-1+m.length)%m.length,t=m[e];s({type:"SET_SON",payload:t});const n=ZT.CUNG_NAMES.findIndex((e=>{var n,r;return null===(n=eS[e])||void 0===n?void 0:n.includes(null===(r=t.infos[4])||void 0===r?void 0:r.huong)}));-1!==n&&s({type:"SET_HUONG",payload:n})}),[m,o]),f=(0,t.useCallback)((()=>{const e=(m.findIndex((e=>e.name===o.name))+1)%m.length,t=m[e];s({type:"SET_SON",payload:t});const n=ZT.CUNG_NAMES.findIndex((e=>{var n,r;return null===(n=eS[e])||void 0===n?void 0:n.includes(null===(r=t.infos[4])||void 0===r?void 0:r.huong)}));-1!==n&&s({type:"SET_HUONG",payload:n})}),[m,o]);(0,t.useEffect)((()=>{o||s({type:"SET_SON",payload:uS[0]})}),[o]),(0,t.useEffect)((()=>{var e,t;null!==o&&void 0!==o&&null!==(e=o.infos)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&t.nguyenLong}),[c,u,o,i]);const x=ZT.GOC_QUAY[ZT.CUNG_NAMES[i]],v=ZT.CUNG_NAMES[i],y=(["\u0110\xf4ng Nam","T\xe2y Nam","\u0110\xf4ng B\u1eafc","T\xe2y B\u1eafc"].includes(v),1);return(0,At.jsx)("div",{className:"bg-black p-4 rounded-lg text-white",children:(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("div",{className:"flex items-center justify-between gap-2 mb-2",children:(0,At.jsx)(tS,{value:a,onChange:A,options:[...Array(9)].map(((e,t)=>(0,At.jsxs)("option",{value:t+1,children:["V\u1eadn ",t+1]},t))),className:"flex-1"})}),(0,At.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,At.jsx)("button",{onClick:p,className:$j.BUTTON.NAV,children:(0,At.jsx)(oS,{className:$j.BUTTON.ICON})}),(0,At.jsx)(tS,{value:(null===o||void 0===o?void 0:o.name)||"",onChange:g,options:m.map((e=>{var t,n;return(0,At.jsxs)("option",{value:e.name,children:[null===(t=e.infos[4])||void 0===t?void 0:t.huong," - ",e.name," - ",null===(n=e.infos[0])||void 0===n?void 0:n.nguyenLong," NL"]},e.name)})),className:"w-full"}),(0,At.jsx)("button",{onClick:f,className:$j.BUTTON.NAV,children:(0,At.jsx)(cS,{className:$j.BUTTON.ICON})})]})]}),(0,At.jsx)("div",{className:`bg-black text-white relative w-[310px] h-[310px] mx-auto mt-16 ${o.infos[4].huong?o.infos[4].huong:""}`,id:"banDoPhiTinh",style:{transform:`rotate(${x}deg)`},children:l.map(((e,t)=>(0,At.jsx)(iS,{idx:t,sao:e,saoSon:u,saoHuong:c,startStar:a,dataSaoSon:d[t],dataSaoHuong:h[t],cungName:ZT.CUNG_NAMES[t],isCenter:4===t,rotationDeg:x,scale:y},t)))})]})})}const AS=[{id:1,name:"\u0110\xf4ng B\u1eafc",code:"DB",description:"H\u01b0\u1edbng \u0110\xf4ng B\u1eafc",subDirections:[{id:1,name:"S\u1eedu",code:"SUU",description:"H\u01b0\u1edbng S\u1eedu thu\u1ed9c \u0110\xf4ng B\u1eafc",degree:30,degreeRanges:[{start:22.5,end:37.5}],element:"Th\u1ed5",animal:"Tr\xe2u",characteristics:"Ki\xean tr\xec, ch\u0103m ch\u1ec9, b\u1ec1n b\u1ec9"},{id:2,name:"C\u1ea5n",code:"CAN",description:"H\u01b0\u1edbng C\u1ea5n thu\u1ed9c \u0110\xf4ng B\u1eafc",degree:45,degreeRanges:[{start:37.5,end:52.5}],element:"Th\u1ed5",characteristics:"V\u1eefng ch\xe3i, \u1ed5n \u0111\u1ecbnh, b\u1ea3o th\u1ee7"},{id:3,name:"D\u1ea7n",code:"DAN",description:"H\u01b0\u1edbng D\u1ea7n thu\u1ed9c \u0110\xf4ng B\u1eafc",degree:60,degreeRanges:[{start:52.5,end:67.5}],element:"M\u1ed9c",animal:"H\u1ed5",characteristics:"M\u1ea1nh m\u1ebd, quy\u1ebft \u0111o\xe1n, l\xe3nh \u0111\u1ea1o"}]}],gS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"environment";const[n,r]=(0,t.useState)(e),[s,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)({alpha:0,beta:0,gamma:0}),l=(0,t.useRef)(null),c=(0,t.useRef)(null),{hasPermission:u,requestCameraPermission:d}=QT(),h=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,m=async()=>{i(!0);try{const e=await d();if(!e.granted)throw new Error(`Camera permission denied: ${e.error||"User denied access"}`);const t={audio:!1,video:{facingMode:n,width:{ideal:window.innerWidth},height:{ideal:window.innerHeight},advanced:[{zoom:1}]}};let r;r=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?await navigator.mediaDevices.getUserMedia(t):await new Promise(((e,n)=>{h.call(navigator,t,e,n)})),c.current&&c.current.getTracks().forEach((e=>e.stop())),c.current=r,l.current&&(l.current.srcObject=r,await new Promise((e=>{l.current.onloadedmetadata=()=>{e()}})),await l.current.play())}catch(e){console.error("L\u1ed7i truy c\u1eadp camera:",e),alert(`Kh\xf4ng th\u1ec3 truy c\u1eadp camera: ${e.message}`),i(!1)}};return(0,t.useEffect)((()=>{s&&m()}),[n]),(0,t.useEffect)((()=>{const e=e=>{o({alpha:e.alpha,beta:e.beta,gamma:e.gamma})};return window.addEventListener("deviceorientation",e),()=>{window.removeEventListener("deviceorientation",e)}}),[]),(0,t.useEffect)((()=>()=>{c.current&&c.current.getTracks().forEach((e=>e.stop()))}),[]),{videoRef:l,isCameraActive:s,facingMode:n,startCamera:m,stopCamera:()=>{c.current&&(c.current.getTracks().forEach((e=>e.stop())),c.current=null),l.current&&(l.current.srcObject=null),i(!1)},toggleCamera:()=>{r((e=>"environment"===e?"user":"environment"))},orientation:a,hasCameraPermission:u("camera")}};var pS,fS,xS=n(119);function vS(e){return vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vS(e)}function yS(e){var t=function(e,t){if("object"!=vS(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vS(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vS(t)?t:t+""}function bS(e,t,n){return(t=yS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NS=(fS||(fS=1,pS=function(e,t,n,r,s,i,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,s,i,a,o],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}),pS),jS=wS(NS),CS=(0,t.createContext)(null);function TS(e,t,n,r){var s,i,a={};return s=e,i=(e,s)=>{var i=n[s];i!==t[s]&&(a[s]=i,e(r,i))},Object.keys(s).forEach((e=>i(s[e],e))),a}function SS(e,t,n){var r,s,i,a=(r=n,s=function(n,r,s){return"function"===typeof e[s]&&n.push(google.maps.event.addListener(t,r,e[s])),n},i=[],Object.keys(r).reduce((function(e,t){return s(e,r[t],t)}),i));return a}function _S(e){google.maps.event.removeListener(e)}function ES(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(_S)}function BS(e){var{updaterMap:t,eventMap:n,prevProps:r,nextProps:s,instance:i}=e,a=SS(s,i,n);return TS(t,r,s,i),a}var MS={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},kS={extraMapTypes(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center(e,t){e.setCenter(t)},clickableIcons(e,t){e.setClickableIcons(t)},heading(e,t){e.setHeading(t)},mapTypeId(e,t){e.setMapTypeId(t)},options(e,t){e.setOptions(t)},streetView(e,t){e.setStreetView(t)},tilt(e,t){e.setTilt(t)},zoom(e,t){e.setZoom(t)}};(0,t.memo)((function(e){var{children:n,options:r,id:s,mapContainerStyle:i,mapContainerClassName:a,center:o,onClick:l,onDblClick:c,onDrag:u,onDragEnd:d,onDragStart:h,onMouseMove:m,onMouseOut:A,onMouseOver:g,onMouseDown:p,onMouseUp:f,onRightClick:x,onCenterChanged:v,onLoad:y,onUnmount:b}=e,[w,N]=(0,t.useState)(null),j=(0,t.useRef)(null),[C,T]=(0,t.useState)(null),[S,_]=(0,t.useState)(null),[E,B]=(0,t.useState)(null),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[H,Q]=(0,t.useState)(null),[z,V]=(0,t.useState)(null),[K,G]=(0,t.useState)(null),[q,W]=(0,t.useState)(null);return(0,t.useEffect)((()=>{r&&null!==w&&w.setOptions(r)}),[w,r]),(0,t.useEffect)((()=>{null!==w&&"undefined"!==typeof o&&w.setCenter(o)}),[w,o]),(0,t.useEffect)((()=>{w&&c&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(w,"dblclick",c)))}),[c]),(0,t.useEffect)((()=>{w&&d&&(null!==E&&google.maps.event.removeListener(E),B(google.maps.event.addListener(w,"dragend",d)))}),[d]),(0,t.useEffect)((()=>{w&&h&&(null!==M&&google.maps.event.removeListener(M),k(google.maps.event.addListener(w,"dragstart",h)))}),[h]),(0,t.useEffect)((()=>{w&&p&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(w,"mousedown",p)))}),[p]),(0,t.useEffect)((()=>{w&&m&&(null!==D&&google.maps.event.removeListener(D),P(google.maps.event.addListener(w,"mousemove",m)))}),[m]),(0,t.useEffect)((()=>{w&&A&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(w,"mouseout",A)))}),[A]),(0,t.useEffect)((()=>{w&&g&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(w,"mouseover",g)))}),[g]),(0,t.useEffect)((()=>{w&&f&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(w,"mouseup",f)))}),[f]),(0,t.useEffect)((()=>{w&&x&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(w,"rightclick",x)))}),[x]),(0,t.useEffect)((()=>{w&&l&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(w,"click",l)))}),[l]),(0,t.useEffect)((()=>{w&&u&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(w,"drag",u)))}),[u]),(0,t.useEffect)((()=>{w&&v&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(w,"center_changed",v)))}),[l]),(0,t.useEffect)((()=>{var e=null===j.current?null:new google.maps.Map(j.current,r);return N(e),null!==e&&y&&y(e),()=>{null!==e&&b&&b(e)}}),[]),(0,At.jsx)("div",{id:s,ref:j,style:i,className:a,children:(0,At.jsx)(CS.Provider,{value:w,children:null!==w?n:null})})}));class LS extends t.PureComponent{constructor(){super(...arguments),bS(this,"state",{map:null}),bS(this,"registeredEvents",[]),bS(this,"mapRef",null),bS(this,"getInstance",(()=>null===this.mapRef?null:new google.maps.Map(this.mapRef,this.props.options))),bS(this,"panTo",(e=>{var t=this.getInstance();t&&t.panTo(e)})),bS(this,"setMapCallback",(()=>{null!==this.state.map&&this.props.onLoad&&this.props.onLoad(this.state.map)})),bS(this,"getRef",(e=>{this.mapRef=e}))}componentDidMount(){var e=this.getInstance();this.registeredEvents=BS({updaterMap:kS,eventMap:MS,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)}componentDidUpdate(e){null!==this.state.map&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:kS,eventMap:MS,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ES(this.registeredEvents))}render(){return(0,At.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,At.jsx)(CS.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})}}function IS(e,t,n,r,s,i,a){try{var o=e[i](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,s)}function DS(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){IS(i,r,s,a,o,"next",e)}function o(e){IS(i,r,s,a,o,"throw",e)}a(void 0)}))}}function PS(e){var{googleMapsApiKey:t,googleMapsClientId:n,version:r="weekly",language:s,region:i,libraries:a,channel:o,mapIds:l,authReferrerPolicy:c}=e,u=[];return jS(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?u.push("key=".concat(t)):n&&u.push("client=".concat(n)),r&&u.push("v=".concat(r)),s&&u.push("language=".concat(s)),i&&u.push("region=".concat(i)),a&&a.length&&u.push("libraries=".concat(a.sort().join(","))),o&&u.push("channel=".concat(o)),l&&l.length&&u.push("map_ids=".concat(l.join(","))),c&&u.push("auth_referrer_policy=".concat(c)),u.push("loading=async"),u.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(u.join("&"))}var FS="undefined"!==typeof document;function US(e){var{url:t,id:n,nonce:r}=e;return FS?new Promise((function(e,s){var i=document.getElementById(n),a=window;if(i){var o=i.getAttribute("data-state");if(i.src===t&&"error"!==o){if("ready"===o)return e(n);var l=a.initMap,c=i.onerror;return a.initMap=function(){l&&l(),e(n)},void(i.onerror=function(e){c&&c(e),s(e)})}i.remove()}var u=document.createElement("script");u.type="text/javascript",u.src=t,u.id=n,u.async=!0,u.nonce=r||"",u.onerror=function(e){u.setAttribute("data-state","error"),s(e)},a.initMap=function(){u.setAttribute("data-state","ready"),e(n)},document.head.appendChild(u)})).catch((e=>{throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function RS(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function OS(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(n,r){return RS(n)||Reflect.apply(t,e,[n,r]),n};var n=e.appendChild.bind(e);e.appendChild=function(t){return RS(t)||Reflect.apply(n,e,[t]),t}}}var HS=!1;function QS(){return(0,At.jsx)("div",{children:"Loading..."})}var zS,VS={id:"script-loader",version:"weekly"};class KS extends t.PureComponent{constructor(){super(...arguments),bS(this,"check",null),bS(this,"state",{loaded:!1}),bS(this,"cleanupCallback",(()=>{delete window.google.maps,this.injectScript()})),bS(this,"isCleaningUp",DS((function*(){return new Promise((function(e){if(HS){if(FS)var t=window.setInterval((function(){HS||(window.clearInterval(t),e())}),1)}else e()}))}))),bS(this,"cleanup",(()=>{HS=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))})),bS(this,"injectScript",(()=>{this.props.preventGoogleFontsLoading&&OS(),jS(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),US({id:this.props.id,nonce:this.props.nonce,url:PS(this.props)}).then((()=>{this.props.onLoad&&this.props.onLoad(),this.setState((function(){return{loaded:!0}}))})).catch((e=>{this.props.onError&&this.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))})),bS(this,"getRef",(e=>{this.check=e}))}componentDidMount(){if(FS){if(window.google&&window.google.maps&&!HS)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),FS&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))}componentWillUnmount(){if(FS){this.cleanup();window.setTimeout((()=>{this.check||(delete window.google,HS=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}}render(){return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||(0,At.jsx)(QS,{})]})}}function GS(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}bS(KS,"defaultProps",VS);var qS=["loadingElement","onLoad","onError","onUnmount","children"],WS=(0,At.jsx)(QS,{});(0,t.memo)((function(e){var{loadingElement:n,onLoad:r,onError:s,onUnmount:i,children:a}=e,o=GS(e,qS),{isLoaded:l,loadError:c}=function(e){var{id:n=VS.id,version:r=VS.version,nonce:s,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:l,libraries:c,preventGoogleFontsLoading:u,channel:d,mapIds:h,authReferrerPolicy:m}=e,A=(0,t.useRef)(!1),[g,p]=(0,t.useState)(!1),[f,x]=(0,t.useState)(void 0);(0,t.useEffect)((function(){return A.current=!0,()=>{A.current=!1}}),[]),(0,t.useEffect)((function(){FS&&u&&OS()}),[u]),(0,t.useEffect)((function(){g&&jS(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[g]);var v=PS({version:r,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:l,libraries:c,channel:d,mapIds:h,authReferrerPolicy:m});(0,t.useEffect)((function(){function e(){A.current&&(p(!0),zS=v)}FS&&(window.google&&window.google.maps&&zS===v?e():US({id:n,url:v,nonce:s}).then(e).catch((function(e){A.current&&x(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(i||"-",") or Client ID (").concat(a||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[n,v,s]);var y=(0,t.useRef)(void 0);return(0,t.useEffect)((function(){y.current&&c!==y.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),y.current=c}),[c]),{isLoaded:g,loadError:f,url:v}}(o);return(0,t.useEffect)((function(){l&&"function"===typeof r&&r()}),[l,r]),(0,t.useEffect)((function(){c&&"function"===typeof s&&s(c)}),[c,s]),(0,t.useEffect)((function(){return()=>{i&&i()}}),[i]),l?a:n||WS}));function $S(e,t,n,r){return new(n||(n=Promise))((function(t,s){function i(e){try{o(r.next(e))}catch(DP){s(DP)}}function a(e){try{o(r.throw(e))}catch(DP){s(DP)}}function o(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(e,[])).next())}))}function XS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"===typeof SuppressedError&&SuppressedError;var YS,JS=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!==s--;){var a=i[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},ZS=XS(JS),e_="__googleMapsScriptId";!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(YS||(YS={}));class t_{constructor(e){var{apiKey:t,authReferrerPolicy:n,channel:r,client:s,id:i=e_,language:a,libraries:o=[],mapIds:l,nonce:c,region:u,retries:d=3,url:h="https://maps.googleapis.com/maps/api/js",version:m}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=n,this.channel=r,this.client=s,this.id=i||e_,this.language=a,this.libraries=o,this.mapIds=l,this.nonce=c,this.region=u,this.retries=d,this.url=h,this.version=m,t_.instance){if(!ZS(this.options,t_.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(t_.instance.options)));return t_.instance}t_.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?YS.FAILURE:this.done?YS.SUCCESS:this.loading?YS.LOADING:YS.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))this.callback();else{var n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach((e=>!n[e]&&delete n[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{var t,n,r,s="The Google Maps JavaScript API",i="google",a="importLibrary",o="__ib__",l=document,c=window,u=(c=c[i]||(c[i]={})).maps||(c.maps={}),d=new Set,h=new URLSearchParams,m=()=>t||(t=new Promise(((a,c)=>$S(this,0,void 0,(function*(){var m;for(r in yield n=l.createElement("script"),n.id=this.id,h.set("libraries",[...d]+""),e)h.set(r.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[r]);h.set("callback",i+".maps."+o),n.src=this.url+"?"+h,u[o]=a,n.onerror=()=>t=c(Error(s+" could not load.")),n.nonce=this.nonce||(null===(m=l.querySelector("script[nonce]"))||void 0===m?void 0:m.nonce)||"",l.head.append(n)})))));u[a]?console.warn(s+" only loads once. Ignoring:",e):u[a]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.add(e)&&m().then((()=>u[a](e,...n)))}})(n);var r=this.libraries.map((e=>this.importLibrary(e)));r.length||r.push(this.importLibrary("core")),Promise.all(r).then((()=>this.callback()),(e=>{var t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var t=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(t," ms.")),setTimeout((()=>{this.deleteScript(),this.setScript()}),t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading=!0,this.setScript()}}}var n_=["maps"];function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i_={},a_={options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:n,onLoad:r,onUnmount:s}=e,i=(0,t.useContext)(CS),[a,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==a&&a.setMap(i)}),[i]),(0,t.useEffect)((()=>{n&&null!==a&&a.setOptions(n)}),[a,n]),(0,t.useEffect)((()=>{var e=new google.maps.TrafficLayer(s_(s_({},n),{},{map:i}));return o(e),r&&r(e),()=>{null!==a&&(s&&s(a),a.setMap(null))}}),[]),null}));class o_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"state",{trafficLayer:null}),bS(this,"setTrafficLayerCallback",(()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)})),bS(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(s_(s_({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:a_,eventMap:i_,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:a_,eventMap:i_,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ES(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}bS(o_,"contextType",CS);(0,t.memo)((function(e){var{onLoad:n,onUnmount:r}=e,s=(0,t.useContext)(CS),[i,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==i&&i.setMap(s)}),[s]),(0,t.useEffect)((()=>{var e=new google.maps.BicyclingLayer;return a(e),e.setMap(s),n&&n(e),()=>{null!==e&&(r&&r(e),e.setMap(null))}}),[]),null}));class l_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"state",{bicyclingLayer:null}),bS(this,"setBicyclingLayerCallback",(()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))}))}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState((()=>({bicyclingLayer:e})),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}bS(l_,"contextType",CS);(0,t.memo)((function(e){var{onLoad:n,onUnmount:r}=e,s=(0,t.useContext)(CS),[i,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==i&&i.setMap(s)}),[s]),(0,t.useEffect)((()=>{var e=new google.maps.TransitLayer;return a(e),e.setMap(s),n&&n(e),()=>{null!==i&&(r&&r(i),i.setMap(null))}}),[]),null}));class c_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"state",{transitLayer:null}),bS(this,"setTransitLayerCallback",(()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))}))}componentDidMount(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function u_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u_(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(c_,"contextType",CS);var h_={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},m_={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{options:n,drawingMode:r,onCircleComplete:s,onMarkerComplete:i,onOverlayComplete:a,onPolygonComplete:o,onPolylineComplete:l,onRectangleComplete:c,onLoad:u,onUnmount:d}=e,h=(0,t.useContext)(CS),[m,A]=(0,t.useState)(null),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==m&&m.setMap(h)}),[h]),(0,t.useEffect)((()=>{n&&null!==m&&m.setOptions(n)}),[m,n]),(0,t.useEffect)((()=>{null!==m&&m.setDrawingMode(null!==r&&void 0!==r?r:null)}),[m,r]),(0,t.useEffect)((()=>{m&&s&&(null!==g&&google.maps.event.removeListener(g),p(google.maps.event.addListener(m,"circlecomplete",s)))}),[m,s]),(0,t.useEffect)((()=>{m&&i&&(null!==f&&google.maps.event.removeListener(f),x(google.maps.event.addListener(m,"markercomplete",i)))}),[m,i]),(0,t.useEffect)((()=>{m&&a&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(m,"overlaycomplete",a)))}),[m,a]),(0,t.useEffect)((()=>{m&&o&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(m,"polygoncomplete",o)))}),[m,o]),(0,t.useEffect)((()=>{m&&l&&(null!==N&&google.maps.event.removeListener(N),j(google.maps.event.addListener(m,"polylinecomplete",l)))}),[m,l]),(0,t.useEffect)((()=>{m&&c&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(m,"rectanglecomplete",c)))}),[m,c]),(0,t.useEffect)((()=>{jS(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(d_(d_({},n),{},{map:h}));return r&&e.setDrawingMode(r),s&&p(google.maps.event.addListener(e,"circlecomplete",s)),i&&x(google.maps.event.addListener(e,"markercomplete",i)),a&&y(google.maps.event.addListener(e,"overlaycomplete",a)),o&&w(google.maps.event.addListener(e,"polygoncomplete",o)),l&&j(google.maps.event.addListener(e,"polylinecomplete",l)),c&&T(google.maps.event.addListener(e,"rectanglecomplete",c)),A(e),u&&u(e),()=>{null!==m&&(g&&google.maps.event.removeListener(g),f&&google.maps.event.removeListener(f),v&&google.maps.event.removeListener(v),b&&google.maps.event.removeListener(b),N&&google.maps.event.removeListener(N),C&&google.maps.event.removeListener(C),d&&d(m),m.setMap(null))}}),[]),null}));class A_ extends t.PureComponent{constructor(e){super(e),bS(this,"registeredEvents",[]),bS(this,"state",{drawingManager:null}),bS(this,"setDrawingManagerCallback",(()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)})),jS(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(d_(d_({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:m_,eventMap:h_,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:m_,eventMap:h_,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ES(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function g_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g_(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(A_,"contextType",CS);var f_={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},x_={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},v_={};(0,t.memo)((function(e){var{position:n,options:r,clusterer:s,noClustererRedraw:i,children:a,draggable:o,visible:l,animation:c,clickable:u,cursor:d,icon:h,label:m,opacity:A,shape:g,title:p,zIndex:f,onClick:x,onDblClick:v,onDrag:y,onDragEnd:b,onDragStart:w,onMouseOut:N,onMouseOver:j,onMouseUp:C,onMouseDown:T,onRightClick:S,onClickableChanged:_,onCursorChanged:E,onAnimationChanged:B,onDraggableChanged:M,onFlatChanged:k,onIconChanged:L,onPositionChanged:I,onShapeChanged:D,onTitleChanged:P,onVisibleChanged:F,onZindexChanged:U,onLoad:R,onUnmount:O}=e,H=(0,t.useContext)(CS),[Q,z]=(0,t.useState)(null),[V,K]=(0,t.useState)(null),[G,q]=(0,t.useState)(null),[W,$]=(0,t.useState)(null),[X,Y]=(0,t.useState)(null),[J,Z]=(0,t.useState)(null),[ee,te]=(0,t.useState)(null),[ne,re]=(0,t.useState)(null),[se,ie]=(0,t.useState)(null),[ae,oe]=(0,t.useState)(null),[le,ce]=(0,t.useState)(null),[ue,de]=(0,t.useState)(null),[he,me]=(0,t.useState)(null),[Ae,ge]=(0,t.useState)(null),[pe,fe]=(0,t.useState)(null),[xe,ve]=(0,t.useState)(null),[ye,be]=(0,t.useState)(null),[we,Ne]=(0,t.useState)(null),[je,Ce]=(0,t.useState)(null),[Te,Se]=(0,t.useState)(null),[_e,Ee]=(0,t.useState)(null),[Be,Me]=(0,t.useState)(null);(0,t.useEffect)((()=>{null!==Q&&Q.setMap(H)}),[H]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==Q&&Q.setOptions(r)}),[Q,r]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==Q&&Q.setDraggable(o)}),[Q,o]),(0,t.useEffect)((()=>{n&&null!==Q&&Q.setPosition(n)}),[Q,n]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==Q&&Q.setVisible(l)}),[Q,l]),(0,t.useEffect)((()=>{null===Q||void 0===Q||Q.setAnimation(c)}),[Q,c]),(0,t.useEffect)((()=>{Q&&void 0!==u&&Q.setClickable(u)}),[Q,u]),(0,t.useEffect)((()=>{Q&&void 0!==d&&Q.setCursor(d)}),[Q,d]),(0,t.useEffect)((()=>{Q&&void 0!==h&&Q.setIcon(h)}),[Q,h]),(0,t.useEffect)((()=>{Q&&void 0!==m&&Q.setLabel(m)}),[Q,m]),(0,t.useEffect)((()=>{Q&&void 0!==A&&Q.setOpacity(A)}),[Q,A]),(0,t.useEffect)((()=>{Q&&void 0!==g&&Q.setShape(g)}),[Q,g]),(0,t.useEffect)((()=>{Q&&void 0!==p&&Q.setTitle(p)}),[Q,p]),(0,t.useEffect)((()=>{Q&&void 0!==f&&Q.setZIndex(f)}),[Q,f]),(0,t.useEffect)((()=>{Q&&v&&(null!==V&&google.maps.event.removeListener(V),K(google.maps.event.addListener(Q,"dblclick",v)))}),[v]),(0,t.useEffect)((()=>{Q&&b&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(Q,"dragend",b)))}),[b]),(0,t.useEffect)((()=>{Q&&w&&(null!==W&&google.maps.event.removeListener(W),$(google.maps.event.addListener(Q,"dragstart",w)))}),[w]),(0,t.useEffect)((()=>{Q&&T&&(null!==X&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(Q,"mousedown",T)))}),[T]),(0,t.useEffect)((()=>{Q&&N&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(Q,"mouseout",N)))}),[N]),(0,t.useEffect)((()=>{Q&&j&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(Q,"mouseover",j)))}),[j]),(0,t.useEffect)((()=>{Q&&C&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(Q,"mouseup",C)))}),[C]),(0,t.useEffect)((()=>{Q&&S&&(null!==se&&google.maps.event.removeListener(se),ie(google.maps.event.addListener(Q,"rightclick",S)))}),[S]),(0,t.useEffect)((()=>{Q&&x&&(null!==ae&&google.maps.event.removeListener(ae),oe(google.maps.event.addListener(Q,"click",x)))}),[x]),(0,t.useEffect)((()=>{Q&&y&&(null!==le&&google.maps.event.removeListener(le),ce(google.maps.event.addListener(Q,"drag",y)))}),[y]),(0,t.useEffect)((()=>{Q&&_&&(null!==ue&&google.maps.event.removeListener(ue),de(google.maps.event.addListener(Q,"clickable_changed",_)))}),[_]),(0,t.useEffect)((()=>{Q&&E&&(null!==he&&google.maps.event.removeListener(he),me(google.maps.event.addListener(Q,"cursor_changed",E)))}),[E]),(0,t.useEffect)((()=>{Q&&B&&(null!==Ae&&google.maps.event.removeListener(Ae),ge(google.maps.event.addListener(Q,"animation_changed",B)))}),[B]),(0,t.useEffect)((()=>{Q&&M&&(null!==pe&&google.maps.event.removeListener(pe),fe(google.maps.event.addListener(Q,"draggable_changed",M)))}),[M]),(0,t.useEffect)((()=>{Q&&k&&(null!==xe&&google.maps.event.removeListener(xe),ve(google.maps.event.addListener(Q,"flat_changed",k)))}),[k]),(0,t.useEffect)((()=>{Q&&L&&(null!==ye&&google.maps.event.removeListener(ye),be(google.maps.event.addListener(Q,"icon_changed",L)))}),[L]),(0,t.useEffect)((()=>{Q&&I&&(null!==we&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(Q,"position_changed",I)))}),[I]),(0,t.useEffect)((()=>{Q&&D&&(null!==je&&google.maps.event.removeListener(je),Ce(google.maps.event.addListener(Q,"shape_changed",D)))}),[D]),(0,t.useEffect)((()=>{Q&&P&&(null!==Te&&google.maps.event.removeListener(Te),Se(google.maps.event.addListener(Q,"title_changed",P)))}),[P]),(0,t.useEffect)((()=>{Q&&F&&(null!==_e&&google.maps.event.removeListener(_e),Ee(google.maps.event.addListener(Q,"visible_changed",F)))}),[F]),(0,t.useEffect)((()=>{Q&&U&&(null!==Be&&google.maps.event.removeListener(Be),Me(google.maps.event.addListener(Q,"zindex_changed",U)))}),[U]),(0,t.useEffect)((()=>{var e=p_(p_(p_({},r||v_),s?v_:{map:H}),{},{position:n}),t=new google.maps.Marker(e);return s?s.addMarker(t,!!i):t.setMap(H),n&&t.setPosition(n),"undefined"!==typeof l&&t.setVisible(l),"undefined"!==typeof o&&t.setDraggable(o),"undefined"!==typeof u&&t.setClickable(u),"string"===typeof d&&t.setCursor(d),h&&t.setIcon(h),"undefined"!==typeof m&&t.setLabel(m),"undefined"!==typeof A&&t.setOpacity(A),g&&t.setShape(g),"string"===typeof p&&t.setTitle(p),"number"===typeof f&&t.setZIndex(f),v&&K(google.maps.event.addListener(t,"dblclick",v)),b&&q(google.maps.event.addListener(t,"dragend",b)),w&&$(google.maps.event.addListener(t,"dragstart",w)),T&&Y(google.maps.event.addListener(t,"mousedown",T)),N&&Z(google.maps.event.addListener(t,"mouseout",N)),j&&te(google.maps.event.addListener(t,"mouseover",j)),C&&re(google.maps.event.addListener(t,"mouseup",C)),S&&ie(google.maps.event.addListener(t,"rightclick",S)),x&&oe(google.maps.event.addListener(t,"click",x)),y&&ce(google.maps.event.addListener(t,"drag",y)),_&&de(google.maps.event.addListener(t,"clickable_changed",_)),E&&me(google.maps.event.addListener(t,"cursor_changed",E)),B&&ge(google.maps.event.addListener(t,"animation_changed",B)),M&&fe(google.maps.event.addListener(t,"draggable_changed",M)),k&&ve(google.maps.event.addListener(t,"flat_changed",k)),L&&be(google.maps.event.addListener(t,"icon_changed",L)),I&&Ne(google.maps.event.addListener(t,"position_changed",I)),D&&Ce(google.maps.event.addListener(t,"shape_changed",D)),P&&Se(google.maps.event.addListener(t,"title_changed",P)),F&&Ee(google.maps.event.addListener(t,"visible_changed",F)),U&&Me(google.maps.event.addListener(t,"zindex_changed",U)),z(t),R&&R(t),()=>{null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),null!==W&&google.maps.event.removeListener(W),null!==X&&google.maps.event.removeListener(X),null!==J&&google.maps.event.removeListener(J),null!==ee&&google.maps.event.removeListener(ee),null!==ne&&google.maps.event.removeListener(ne),null!==se&&google.maps.event.removeListener(se),null!==ae&&google.maps.event.removeListener(ae),null!==ue&&google.maps.event.removeListener(ue),null!==he&&google.maps.event.removeListener(he),null!==Ae&&google.maps.event.removeListener(Ae),null!==pe&&google.maps.event.removeListener(pe),null!==xe&&google.maps.event.removeListener(xe),null!==ye&&google.maps.event.removeListener(ye),null!==we&&google.maps.event.removeListener(we),null!==Te&&google.maps.event.removeListener(Te),null!==_e&&google.maps.event.removeListener(_e),null!==Be&&google.maps.event.removeListener(Be),O&&O(t),s?s.removeMarker(t,!!i):t&&t.setMap(null)}}),[]);var ke=(0,t.useMemo)((()=>a?t.Children.map(a,(e=>{if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:Q})})):null),[a,Q]);return(0,At.jsx)(At.Fragment,{children:ke})||null}));class y_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[])}componentDidMount(){var e=this;return DS((function*(){var t=p_(p_(p_({},e.props.options||v_),e.props.clusterer?v_:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=BS({updaterMap:x_,eventMap:f_,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)}))()}componentDidUpdate(e){this.marker&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:x_,eventMap:f_,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ES(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){return(this.props.children?t.Children.map(this.props.children,(e=>{if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:this.marker})})):null)||null}}bS(y_,"contextType",CS);var b_=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),s=t.getMap();null!==s&&"fitBounds"in s&&s.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var s=e.getZoom()||0;null!==n&&s>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r,s,i;if(this.div&&this.center){var a=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,o=this.backgroundPosition.split(" "),l=parseInt((null===(e=o[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),c=parseInt((null===(t=o[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==u?"".concat(u.y,"px"):"0","; left: ").concat(null!==u?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var d=document.createElement("img");d.alt=a,d.src=this.url,d.width=this.width,d.height=this.height,d.setAttribute("style","position: absolute; top: ".concat(c,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(d.style.clip="rect(-".concat(c,"px, -").concat(l+this.width,"px, -").concat(c+this.height,", -").concat(l,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(n=this.sums)||void 0===n?void 0:n.text)&&(h.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(s=this.sums)||void 0===s?void 0:s.html)&&(h.innerHTML="".concat(null===(i=this.sums)||void 0===i?void 0:i.html)),this.div.innerHTML="",this.div.appendChild(d),this.div.appendChild(h),this.div.title=a,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),w_=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new b_(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,n=this.getMarkers();t<n.length;t++){var r=n[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var s=this.markers.length,i=this.markerClusterer.getMaxZoom(),a=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==i&&"undefined"!==typeof a&&a>i)e.getMap()!==this.map&&e.setMap(this.map);else if(s<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(s===this.minClusterSize)for(var o=0,l=this.markers;o<l.length;o++){l[o].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function N_(e,t){var n=e.length,r=n.toString().length,s=Math.min(r,t);return{text:n.toString(),index:s,title:""}}var j_=[53,56,66,78,90],C_=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||j_,this.calculator=r.calculator||N_,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var n=t[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var r=0,s=this.clusters;r<s.length;r++){s[r].remove()}this.clusters=[];for(var i=0,a=this.listeners;i<a.length;i++){var o=a[i];google.maps.event.removeListener(o)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0,r=e;n<r.length;n++){var s=r[n].getPosition();s&&t.extend(s)}var i=this.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0,s=e;r<s.length;r++){var i=s[r];n=n||this.removeMarker_(i)}return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,n=e;t<n.length;t++){n[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var s=t.fromDivPixelToLatLng(n);null!==s&&e.extend(s)}if(null!==r){var i=t.fromDivPixelToLatLng(r);null!==i&&e.extend(i)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,n=this.clusters;t<n.length;t++){n[t].remove()}this.clusters=[];for(var r=0,s=this.markers;r<s.length;r++){var i=s[r];i.isAdded=!1,e&&i.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,s=0,i=this.clusters;s<i.length;s++){var a=(t=i[s]).getCenter(),o=e.getPosition();if(a&&o){var l=this.distanceBetweenPoints(a,o);l<n&&(n=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new w_(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),s=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),i=this.getExtendedBounds(s),a=Math.min(e+this.batchSize,this.markers.length),o=e;o<a;o++){var l=this.markers[o];l&&!l.isAdded&&this.isMarkerInBounds(l,i)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(a<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(a)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var c=0,u=this.clusters;c<u.length;c++){u[c].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var n=t;this.prototype[n]=e.prototype[n]}return this}.apply(e,[t])},e}();function T_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S_={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},__={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},E_={};(0,t.memo)((function(e){var{children:n,options:r,averageCenter:s,batchSizeIE:i,calculator:a,clusterClass:o,enableRetinaIcons:l,gridSize:c,ignoreHidden:u,imageExtension:d,imagePath:h,imageSizes:m,maxZoom:A,minimumClusterSize:g,styles:p,title:f,zoomOnClick:x,onClick:v,onClusteringBegin:y,onClusteringEnd:b,onMouseOver:w,onMouseOut:N,onLoad:j,onUnmount:C}=e,[T,S]=(0,t.useState)(null),_=(0,t.useContext)(CS),[E,B]=(0,t.useState)(null),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(null);return(0,t.useEffect)((()=>{T&&N&&(null!==D&&google.maps.event.removeListener(D),P(google.maps.event.addListener(T,S_.onMouseOut,N)))}),[N]),(0,t.useEffect)((()=>{T&&w&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(T,S_.onMouseOver,w)))}),[w]),(0,t.useEffect)((()=>{T&&v&&(null!==E&&google.maps.event.removeListener(E),B(google.maps.event.addListener(T,S_.onClick,v)))}),[v]),(0,t.useEffect)((()=>{T&&y&&(null!==M&&google.maps.event.removeListener(M),k(google.maps.event.addListener(T,S_.onClusteringBegin,y)))}),[y]),(0,t.useEffect)((()=>{T&&b&&(null!==L&&google.maps.event.removeListener(L),k(google.maps.event.addListener(T,S_.onClusteringEnd,b)))}),[b]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==T&&__.averageCenter(T,s)}),[T,s]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==T&&__.batchSizeIE(T,i)}),[T,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==T&&__.calculator(T,a)}),[T,a]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==T&&__.clusterClass(T,o)}),[T,o]),(0,t.useEffect)((()=>{"undefined"!==typeof l&&null!==T&&__.enableRetinaIcons(T,l)}),[T,l]),(0,t.useEffect)((()=>{"undefined"!==typeof c&&null!==T&&__.gridSize(T,c)}),[T,c]),(0,t.useEffect)((()=>{"undefined"!==typeof u&&null!==T&&__.ignoreHidden(T,u)}),[T,u]),(0,t.useEffect)((()=>{"undefined"!==typeof d&&null!==T&&__.imageExtension(T,d)}),[T,d]),(0,t.useEffect)((()=>{"undefined"!==typeof h&&null!==T&&__.imagePath(T,h)}),[T,h]),(0,t.useEffect)((()=>{"undefined"!==typeof m&&null!==T&&__.imageSizes(T,m)}),[T,m]),(0,t.useEffect)((()=>{"undefined"!==typeof A&&null!==T&&__.maxZoom(T,A)}),[T,A]),(0,t.useEffect)((()=>{"undefined"!==typeof g&&null!==T&&__.minimumClusterSize(T,g)}),[T,g]),(0,t.useEffect)((()=>{"undefined"!==typeof p&&null!==T&&__.styles(T,p)}),[T,p]),(0,t.useEffect)((()=>{"undefined"!==typeof f&&null!==T&&__.title(T,f)}),[T,f]),(0,t.useEffect)((()=>{"undefined"!==typeof x&&null!==T&&__.zoomOnClick(T,x)}),[T,x]),(0,t.useEffect)((()=>{if(_){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T_(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r||E_),t=new C_(_,[],e);return s&&__.averageCenter(t,s),i&&__.batchSizeIE(t,i),a&&__.calculator(t,a),o&&__.clusterClass(t,o),l&&__.enableRetinaIcons(t,l),c&&__.gridSize(t,c),u&&__.ignoreHidden(t,u),d&&__.imageExtension(t,d),h&&__.imagePath(t,h),m&&__.imageSizes(t,m),A&&__.maxZoom(t,A),g&&__.minimumClusterSize(t,g),p&&__.styles(t,p),f&&__.title(t,f),x&&__.zoomOnClick(t,x),N&&P(google.maps.event.addListener(t,S_.onMouseOut,N)),w&&U(google.maps.event.addListener(t,S_.onMouseOver,w)),v&&B(google.maps.event.addListener(t,S_.onClick,v)),y&&k(google.maps.event.addListener(t,S_.onClusteringBegin,y)),b&&I(google.maps.event.addListener(t,S_.onClusteringEnd,b)),S(t),j&&j(t),()=>{null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==E&&google.maps.event.removeListener(E),null!==M&&google.maps.event.removeListener(M),null!==L&&google.maps.event.removeListener(L),C&&C(t)}}}),[]),null!==T&&n(T)||null}));class B_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{markerClusterer:null}),bS(this,"setClustererCallback",(()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)}))}componentDidMount(){if(this.context){var e=new C_(this.context,[],this.props.options);this.registeredEvents=BS({updaterMap:__,eventMap:S_,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({markerClusterer:e})),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:__,eventMap:S_,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ES(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function M_(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}bS(B_,"contextType",CS);var k_=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,s=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<s.length;r++){var i=s[r];this.eventListeners.push(google.maps.event.addListener(this.div,i,M_))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||M_(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,s=t.getBounds();s&&!s.contains(this.position)&&t.setCenter(this.position);var i=t.getDiv(),a=i.offsetWidth,o=i.offsetHeight,l=this.pixelOffset.width,c=this.pixelOffset.height,u=this.div.offsetWidth,d=this.div.offsetHeight,h=this.infoBoxClearance.width,m=this.infoBoxClearance.height,A=this.getProjection().fromLatLngToContainerPixel(this.position);null!==A&&(A.x<-l+h?n=A.x+l-h:A.x+u+l+h>a&&(n=A.x+u+l+h-a),this.alignBottom?A.y<-c+m+d?r=A.y+c-m-d:A.y+c+m>o&&(r=A.y+c+m-o):A.y<-c+m?r=A.y+c-m:A.y+d+c+m>o&&(r=A.y+d+c+m-o)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var n=t[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),L_=["position"],I_=["position"];function D_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D_(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F_={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},U_={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},R_={};var O_,H_;(0,t.memo)((function(e){var{children:n,anchor:r,options:s,position:i,zIndex:a,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:h,onUnmount:m}=e,A=(0,t.useContext)(CS),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),S=(0,t.useRef)(null);return(0,t.useEffect)((()=>{A&&null!==g&&(g.close(),r?g.open(A,r):g.getPosition()&&g.open(A))}),[A,g,r]),(0,t.useEffect)((()=>{s&&null!==g&&g.setOptions(s)}),[g,s]),(0,t.useEffect)((()=>{if(i&&null!==g){var e=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);g.setPosition(e)}}),[i]),(0,t.useEffect)((()=>{"number"===typeof a&&null!==g&&g.setZIndex(a)}),[a]),(0,t.useEffect)((()=>{g&&o&&(null!==f&&google.maps.event.removeListener(f),x(google.maps.event.addListener(g,"closeclick",o)))}),[o]),(0,t.useEffect)((()=>{g&&l&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(g,"domready",l)))}),[l]),(0,t.useEffect)((()=>{g&&c&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(g,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{g&&u&&(null!==N&&google.maps.event.removeListener(N),j(google.maps.event.addListener(g,"position_changed",u)))}),[u]),(0,t.useEffect)((()=>{g&&d&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(g,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{if(A){var e,t=s||R_,{position:n}=t,i=GS(t,L_);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var a=new k_(P_(P_({},i),e?{position:e}:{}));S.current=document.createElement("div"),p(a),o&&x(google.maps.event.addListener(a,"closeclick",o)),l&&y(google.maps.event.addListener(a,"domready",l)),c&&w(google.maps.event.addListener(a,"content_changed",c)),u&&j(google.maps.event.addListener(a,"position_changed",u)),d&&T(google.maps.event.addListener(a,"zindex_changed",d)),a.setContent(S.current),r?a.open(A,r):a.getPosition()?a.open(A):jS(!1,"You must provide either an anchor or a position prop for <InfoBox>."),h&&h(a)}return()=>{null!==g&&(f&&google.maps.event.removeListener(f),b&&google.maps.event.removeListener(b),v&&google.maps.event.removeListener(v),N&&google.maps.event.removeListener(N),C&&google.maps.event.removeListener(C),m&&m(g),g.close())}}),[]),S.current?(0,xS.createPortal)(t.Children.only(n),S.current):null}));class Q_ extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"containerElement",null),bS(this,"state",{infoBox:null}),bS(this,"open",((e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):jS(!1,"You must provide either an anchor or a position prop for <InfoBox>.")})),bS(this,"setInfoBoxCallback",(()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))}))}componentDidMount(){var e,t=this.props.options||{},{position:n}=t,r=GS(t,I_);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var s=new k_(P_(P_({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=BS({updaterMap:U_,eventMap:F_,prevProps:{},nextProps:this.props,instance:s}),this.setState({infoBox:s},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:U_,eventMap:F_,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),ES(this.registeredEvents),t.close())}render(){return this.containerElement?(0,xS.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}bS(Q_,"contextType",CS);var z_=(H_||(H_=1,O_=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;0!==s--;){var a=i[s];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),O_),V_=wS(z_),K_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class G_{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");var r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));var s=K_[15&n];if(!s)throw new Error("Unrecognized array type.");var[i]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new G_(a,i,s,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var s=K_.indexOf(this.ArrayType),i=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-a%8)%8;if(s<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+o,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+i+a+o),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+o,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+s]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return q_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:i,nodeSize:a}=this,o=[0,s.length-1,0],l=[];o.length;){var c=o.pop()||0,u=o.pop()||0,d=o.pop()||0;if(u-d<=a)for(var h=d;h<=u;h++){var m=i[2*h],A=i[2*h+1];m>=e&&m<=n&&A>=t&&A<=r&&l.push(s[h])}else{var g=d+u>>1,p=i[2*g],f=i[2*g+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(s[g]),(0===c?e<=p:t<=f)&&(o.push(d),o.push(g-1),o.push(1-c)),(0===c?n>=p:r>=f)&&(o.push(g+1),o.push(u),o.push(1-c))}}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:s,nodeSize:i}=this,a=[0,r.length-1,0],o=[],l=n*n;a.length;){var c=a.pop()||0,u=a.pop()||0,d=a.pop()||0;if(u-d<=i)for(var h=d;h<=u;h++)Y_(s[2*h],s[2*h+1],e,t)<=l&&o.push(r[h]);else{var m=d+u>>1,A=s[2*m],g=s[2*m+1];Y_(A,g,e,t)<=l&&o.push(r[m]),(0===c?e-n<=A:t-n<=g)&&(a.push(d),a.push(m-1),a.push(1-c)),(0===c?e+n>=A:t+n>=g)&&(a.push(m+1),a.push(u),a.push(1-c))}}return o}}function q_(e,t,n,r,s,i){if(!(s-r<=n)){var a=r+s>>1;W_(e,t,a,r,s,i),q_(e,t,n,r,a-1,1-i),q_(e,t,n,a+1,s,1-i)}}function W_(e,t,n,r,s,i){for(;s>r;){if(s-r>600){var a=s-r+1,o=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(o-a/2<0?-1:1);W_(e,t,n,Math.max(r,Math.floor(n-o*c/a+u)),Math.min(s,Math.floor(n+(a-o)*c/a+u)),i)}var d=t[2*n+i],h=r,m=s;for($_(e,t,r,n),t[2*s+i]>d&&$_(e,t,r,s);h<m;){for($_(e,t,h,m),h++,m--;t[2*h+i]<d;)h++;for(;t[2*m+i]>d;)m--}t[2*r+i]===d?$_(e,t,r,m):$_(e,t,++m,s),m<=n&&(r=m+1),n<=m&&(s=m-1)}}function $_(e,t,n,r){X_(e,n,r),X_(t,2*n,2*r),X_(t,2*n+1,2*r+1)}function X_(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Y_(e,t,n,r){var s=e-n,i=t-r;return s*s+i*i}var J_={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Z_=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));class eE{constructor(e){this.options=Object.assign(Object.create(J_),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");var s="prepare ".concat(e.length," points");t&&console.time(s),this.points=e;for(var i=[],a=0;a<e.length;a++){var o=e[a];if(o.geometry){var[l,c]=o.geometry.coordinates,u=Z_(rE(l)),d=Z_(sE(c));i.push(u,d,1/0,a,-1,1),this.options.reduce&&i.push(0)}}var h=this.trees[r+1]=this._createTree(i);t&&console.timeEnd(s);for(var m=r;m>=n;m--){var A=+Date.now();h=this.trees[m]=this._createTree(this._cluster(h,m)),t&&console.log("z%d: %d clusters in %dms",m,h.numItems,+Date.now()-A)}return t&&console.timeEnd("total time"),this}getClusters(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),s=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,s=180;else if(n>s){var a=this.getClusters([n,r,180,i],t),o=this.getClusters([-180,r,s,i],t);return a.concat(o)}var l=this.trees[this._limitZoom(t)],c=l.range(rE(n),sE(i),rE(s),sE(r)),u=l.data,d=[];for(var h of c){var m=this.stride*h;d.push(u[m+5]>1?tE(u,m,this.clusterProps):this.points[u[m+3]])}return d}getChildren(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",s=this.trees[n];if(!s)throw new Error(r);var i=s.data;if(t*this.stride>=i.length)throw new Error(r);var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),o=i[t*this.stride],l=i[t*this.stride+1],c=s.within(o,l,a),u=[];for(var d of c){var h=d*this.stride;i[h+4]===e&&u.push(i[h+5]>1?tE(i,h,this.clusterProps):this.points[i[h+3]])}if(0===u.length)throw new Error(r);return u}getLeaves(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){var r=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:i,radius:a}=this.options,o=a/i,l=(n-o)/s,c=(n+1+o)/s,u={features:[]};return this._addTileFeatures(r.range((t-o)/s,l,(t+1+o)/s,c),r.data,t,n,s,u),0===t&&this._addTileFeatures(r.range(1-o/s,l,1,c),r.data,s,n,s,u),t===s-1&&this._addTileFeatures(r.range(0,l,o/s,c),r.data,-1,n,s,u),u.features.length?u:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,s){var i=this.getChildren(t);for(var a of i){var o=a.properties;if(o&&o.cluster?s+o.point_count<=r?s+=o.point_count:s=this._appendLeaves(e,o.cluster_id,n,r,s):s<r?s++:e.push(a),e.length===n)break}return s}_createTree(e){for(var t=new G_(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,s,i){for(var a of e){var o=a*this.stride,l=t[o+5]>1,c=void 0,u=void 0,d=void 0;if(l)c=nE(t,o,this.clusterProps),u=t[o],d=t[o+1];else{var h=this.points[t[o+3]];c=h.properties;var[m,A]=h.geometry.coordinates;u=rE(m),d=sE(A)}var g={type:1,geometry:[[Math.round(this.options.extent*(u*s-n)),Math.round(this.options.extent*(d*s-r))]],tags:c},p=void 0;void 0!==(p=l||this.options.generateId?t[o+3]:this.points[t[o+3]].id)&&(g.id=p),i.features.push(g)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:n,extent:r,reduce:s,minPoints:i}=this.options,a=n/(r*Math.pow(2,t)),o=e.data,l=[],c=this.stride,u=0;u<o.length;u+=c)if(!(o[u+2]<=t)){o[u+2]=t;var d=o[u],h=o[u+1],m=e.within(o[u],o[u+1],a),A=o[u+5],g=A;for(var p of m){var f=p*c;o[f+2]>t&&(g+=o[f+5])}if(g>A&&g>=i){var x=d*A,v=h*A,y=void 0,b=-1,w=(u/c<<5)+(t+1)+this.points.length;for(var N of m){var j=N*c;if(!(o[j+2]<=t)){o[j+2]=t;var C=o[j+5];x+=o[j]*C,v+=o[j+1]*C,o[j+4]=w,s&&(y||(y=this._map(o,u,!0),b=this.clusterProps.length,this.clusterProps.push(y)),s(y,this._map(o,j)))}}o[u+4]=w,l.push(x/g,v/g,1/0,w,-1,g),s&&l.push(b)}else{for(var T=0;T<c;T++)l.push(o[u+T]);if(g>1)for(var S of m){var _=S*c;if(!(o[_+2]<=t)){o[_+2]=t;for(var E=0;E<c;E++)l.push(o[_+E])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){var r=this.clusterProps[e[t+6]];return n?Object.assign({},r):r}var s=this.points[e[t+3]].properties,i=this.options.map(s);return n&&i===s?Object.assign({},i):i}}function tE(e,t,n){return{type:"Feature",id:e[t+3],properties:nE(e,t,n),geometry:{type:"Point",coordinates:[iE(e[t]),aE(e[t+1])]}}}function nE(e,t,n){var r=e[t+5],s=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,i=e[t+6],a=-1===i?{}:Object.assign({},n[i]);return Object.assign(a,{cluster:!0,cluster_id:e[t+3],point_count:r,point_count_abbreviated:s})}function rE(e){return e/360+.5}function sE(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function iE(e){return 360*(e-.5)}function aE(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function oE(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}class lE{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class cE{constructor(e){var{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(lE.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>lE.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(lE.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class uE{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return hE(t)}}var dE,hE=e=>e.map((e=>new cE({position:lE.getPosition(e),markers:[e]})));class mE extends uE{constructor(e){var{maxZoom:t,radius:n=60}=e,r=oE(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new eE(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){var t=!1,n={zoom:e.map.getZoom()};if(!V_(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var r=this.markers.map((e=>{var t=lE.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(r)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!V_(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){var{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new cE({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});var s=r.marker;return new cE({markers:[s],position:lE.getPosition(s)})}}class AE{constructor(e,t){this.markers={sum:e.length};var n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class gE{render(e,t,n){var{count:r,position:s}=e,i=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",a='<svg fill="'.concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),o="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(lE.isAdvancedMarkerAvailable(n)){var c=(new DOMParser).parseFromString(a,"image/svg+xml").documentElement;c.setAttribute("transform","translate(0 25)");var u={map:n,position:s,zIndex:l,title:o,content:c};return new google.maps.marker.AdvancedMarkerElement(u)}var d={position:s,zIndex:l,title:o,icon:{url:"data:image/svg+xml;base64,".concat(btoa(a)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(d)}}class pE{constructor(){!function(e,t){for(var n in t.prototype)e.prototype[n]=t.prototype[n]}(pE,google.maps.OverlayView)}}!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(dE||(dE={}));var fE=(e,t,n)=>{n.fitBounds(t.bounds)};class xE extends pE{constructor(e){var{map:t,markers:n=[],algorithmOptions:r={},algorithm:s=new mE(r),renderer:i=new gE,onClusterClick:a=fE}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=s,this.renderer=i,this.onClusterClick=a,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){var n=this.markers.indexOf(e);return-1!==n&&(lE.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){var n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,dE.CLUSTERING_BEGIN,this);var{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){var r=new Set;for(var s of t)1==s.markers.length&&r.add(s.markers[0]);var i=[];for(var a of this.clusters)null!=a.marker&&(1==a.markers.length?r.has(a.marker)||lE.setMap(a.marker,null):i.push(a.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>i.forEach((e=>lE.setMap(e,null)))))}google.maps.event.trigger(this,dE.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>lE.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){var e=new AE(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>lE.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,dE.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),lE.setMap(n.marker,t)}))}}function vE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bE(e){var n=function(){jS(!!t.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,t.useContext)(CS);return jS(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),[r,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{if(n&&null===r){var t=new xE(yE(yE({},e),{},{map:n}));s(t)}}),[n]),r}(0,t.memo)((function(e){var{children:t,options:n}=e,r=bE(n);return null!==r?t(r):null}));var wE={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},NE={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};(0,t.memo)((function(e){var{children:n,anchor:r,options:s,position:i,zIndex:a,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:h,onUnmount:m}=e,A=(0,t.useContext)(CS),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),S=(0,t.useRef)(null);return(0,t.useEffect)((()=>{null!==g&&(g.close(),r?g.open(A,r):g.getPosition()&&g.open(A))}),[A,g,r]),(0,t.useEffect)((()=>{s&&null!==g&&g.setOptions(s)}),[g,s]),(0,t.useEffect)((()=>{i&&null!==g&&g.setPosition(i)}),[i]),(0,t.useEffect)((()=>{"number"===typeof a&&null!==g&&g.setZIndex(a)}),[a]),(0,t.useEffect)((()=>{g&&o&&(null!==f&&google.maps.event.removeListener(f),x(google.maps.event.addListener(g,"closeclick",o)))}),[o]),(0,t.useEffect)((()=>{g&&l&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(g,"domready",l)))}),[l]),(0,t.useEffect)((()=>{g&&c&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(g,"content_changed",c)))}),[c]),(0,t.useEffect)((()=>{g&&u&&(null!==N&&google.maps.event.removeListener(N),j(google.maps.event.addListener(g,"position_changed",u)))}),[u]),(0,t.useEffect)((()=>{g&&d&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(g,"zindex_changed",d)))}),[d]),(0,t.useEffect)((()=>{var e=new google.maps.InfoWindow(s);return p(e),S.current=document.createElement("div"),o&&x(google.maps.event.addListener(e,"closeclick",o)),l&&y(google.maps.event.addListener(e,"domready",l)),c&&w(google.maps.event.addListener(e,"content_changed",c)),u&&j(google.maps.event.addListener(e,"position_changed",u)),d&&T(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(S.current),i&&e.setPosition(i),a&&e.setZIndex(a),r?e.open(A,r):e.getPosition()?e.open(A):jS(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),h&&h(e),()=>{f&&google.maps.event.removeListener(f),b&&google.maps.event.removeListener(b),v&&google.maps.event.removeListener(v),N&&google.maps.event.removeListener(N),C&&google.maps.event.removeListener(C),m&&m(e),e.close()}}),[]),S.current?(0,xS.createPortal)(t.Children.only(n),S.current):null}));class jE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"containerElement",null),bS(this,"state",{infoWindow:null}),bS(this,"open",((e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):jS(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")})),bS(this,"setInfoWindowCallback",(()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))}))}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=BS({updaterMap:NE,eventMap:wE,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({infoWindow:e})),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:NE,eventMap:wE,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(ES(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?(0,xS.createPortal)(t.Children.only(this.props.children),this.containerElement):null}}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(jE,"contextType",CS);var SE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},_E={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},EE={};(0,t.memo)((function(e){var{options:n,draggable:r,editable:s,visible:i,path:a,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:m,onMouseUp:A,onRightClick:g,onClick:p,onDrag:f,onLoad:x,onUnmount:v}=e,y=(0,t.useContext)(CS),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),[S,_]=(0,t.useState)(null),[E,B]=(0,t.useState)(null),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[H,Q]=(0,t.useState)(null),[z,V]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==b&&b.setMap(y)}),[y]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==b&&b.setOptions(n)}),[b,n]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==b&&b.setDraggable(r)}),[b,r]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==b&&b.setEditable(s)}),[b,s]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==b&&b.setVisible(i)}),[b,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==b&&b.setPath(a)}),[b,a]),(0,t.useEffect)((()=>{b&&o&&(null!==N&&google.maps.event.removeListener(N),j(google.maps.event.addListener(b,"dblclick",o)))}),[o]),(0,t.useEffect)((()=>{b&&l&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(b,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{b&&c&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(b,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{b&&u&&(null!==E&&google.maps.event.removeListener(E),B(google.maps.event.addListener(b,"mousedown",u)))}),[u]),(0,t.useEffect)((()=>{b&&d&&(null!==M&&google.maps.event.removeListener(M),k(google.maps.event.addListener(b,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{b&&h&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(b,"mouseout",h)))}),[h]),(0,t.useEffect)((()=>{b&&m&&(null!==D&&google.maps.event.removeListener(D),P(google.maps.event.addListener(b,"mouseover",m)))}),[m]),(0,t.useEffect)((()=>{b&&A&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(b,"mouseup",A)))}),[A]),(0,t.useEffect)((()=>{b&&g&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(b,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{b&&p&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(b,"click",p)))}),[p]),(0,t.useEffect)((()=>{b&&f&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(b,"drag",f)))}),[f]),(0,t.useEffect)((()=>{var e=new google.maps.Polyline(TE(TE({},n||EE),{},{map:y}));return a&&e.setPath(a),"undefined"!==typeof i&&e.setVisible(i),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof r&&e.setDraggable(r),o&&j(google.maps.event.addListener(e,"dblclick",o)),l&&T(google.maps.event.addListener(e,"dragend",l)),c&&_(google.maps.event.addListener(e,"dragstart",c)),u&&B(google.maps.event.addListener(e,"mousedown",u)),d&&k(google.maps.event.addListener(e,"mousemove",d)),h&&I(google.maps.event.addListener(e,"mouseout",h)),m&&P(google.maps.event.addListener(e,"mouseover",m)),A&&U(google.maps.event.addListener(e,"mouseup",A)),g&&O(google.maps.event.addListener(e,"rightclick",g)),p&&Q(google.maps.event.addListener(e,"click",p)),f&&V(google.maps.event.addListener(e,"drag",f)),w(e),x&&x(e),()=>{null!==N&&google.maps.event.removeListener(N),null!==C&&google.maps.event.removeListener(C),null!==S&&google.maps.event.removeListener(S),null!==E&&google.maps.event.removeListener(E),null!==M&&google.maps.event.removeListener(M),null!==L&&google.maps.event.removeListener(L),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==R&&google.maps.event.removeListener(R),null!==H&&google.maps.event.removeListener(H),v&&v(e),e.setMap(null)}}),[]),null}));class BE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{polyline:null}),bS(this,"setPolylineCallback",(()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)}))}componentDidMount(){var e=new google.maps.Polyline(TE(TE({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:_E,eventMap:SE,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:_E,eventMap:SE,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ES(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ME(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(BE,"contextType",CS);var LE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},IE={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:n,draggable:r,editable:s,visible:i,path:a,paths:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:h,onMouseOut:m,onMouseOver:A,onMouseUp:g,onRightClick:p,onClick:f,onDrag:x,onLoad:v,onUnmount:y,onEdit:b}=e,w=(0,t.useContext)(CS),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),[S,_]=(0,t.useState)(null),[E,B]=(0,t.useState)(null),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[H,Q]=(0,t.useState)(null),[z,V]=(0,t.useState)(null),[K,G]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==N&&N.setMap(w)}),[w]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==N&&N.setOptions(n)}),[N,n]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==N&&N.setDraggable(r)}),[N,r]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==N&&N.setEditable(s)}),[N,s]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==N&&N.setVisible(i)}),[N,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==N&&N.setPath(a)}),[N,a]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==N&&N.setPaths(o)}),[N,o]),(0,t.useEffect)((()=>{N&&"function"===typeof l&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(N,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{N&&(google.maps.event.addListener(N.getPath(),"insert_at",(()=>{null===b||void 0===b||b(N)})),google.maps.event.addListener(N.getPath(),"set_at",(()=>{null===b||void 0===b||b(N)})),google.maps.event.addListener(N.getPath(),"remove_at",(()=>{null===b||void 0===b||b(N)})))}),[N,b]),(0,t.useEffect)((()=>{N&&"function"===typeof c&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(N,"dragend",c)))}),[c]),(0,t.useEffect)((()=>{N&&"function"===typeof u&&(null!==E&&google.maps.event.removeListener(E),B(google.maps.event.addListener(N,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{N&&"function"===typeof d&&(null!==M&&google.maps.event.removeListener(M),k(google.maps.event.addListener(N,"mousedown",d)))}),[d]),(0,t.useEffect)((()=>{N&&"function"===typeof h&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(N,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{N&&"function"===typeof m&&(null!==D&&google.maps.event.removeListener(D),P(google.maps.event.addListener(N,"mouseout",m)))}),[m]),(0,t.useEffect)((()=>{N&&"function"===typeof A&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(N,"mouseover",A)))}),[A]),(0,t.useEffect)((()=>{N&&"function"===typeof g&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(N,"mouseup",g)))}),[g]),(0,t.useEffect)((()=>{N&&"function"===typeof p&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(N,"rightclick",p)))}),[p]),(0,t.useEffect)((()=>{N&&"function"===typeof f&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(N,"click",f)))}),[f]),(0,t.useEffect)((()=>{N&&"function"===typeof x&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(N,"drag",x)))}),[x]),(0,t.useEffect)((()=>{var e=new google.maps.Polygon(kE(kE({},n),{},{map:w}));return a&&e.setPath(a),o&&e.setPaths(o),"undefined"!==typeof i&&e.setVisible(i),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof r&&e.setDraggable(r),l&&T(google.maps.event.addListener(e,"dblclick",l)),c&&_(google.maps.event.addListener(e,"dragend",c)),u&&B(google.maps.event.addListener(e,"dragstart",u)),d&&k(google.maps.event.addListener(e,"mousedown",d)),h&&I(google.maps.event.addListener(e,"mousemove",h)),m&&P(google.maps.event.addListener(e,"mouseout",m)),A&&U(google.maps.event.addListener(e,"mouseover",A)),g&&O(google.maps.event.addListener(e,"mouseup",g)),p&&Q(google.maps.event.addListener(e,"rightclick",p)),f&&V(google.maps.event.addListener(e,"click",f)),x&&G(google.maps.event.addListener(e,"drag",x)),j(e),v&&v(e),()=>{null!==C&&google.maps.event.removeListener(C),null!==S&&google.maps.event.removeListener(S),null!==E&&google.maps.event.removeListener(E),null!==M&&google.maps.event.removeListener(M),null!==L&&google.maps.event.removeListener(L),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==R&&google.maps.event.removeListener(R),null!==H&&google.maps.event.removeListener(H),null!==z&&google.maps.event.removeListener(z),y&&y(e),e.setMap(null)}}),[]),null}));class DE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=BS({updaterMap:IE,eventMap:LE,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:IE,eventMap:LE,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ES(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function PE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(DE,"contextType",CS);var UE={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},RE={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var{options:n,bounds:r,draggable:s,editable:i,visible:a,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:h,onMouseOver:m,onMouseUp:A,onRightClick:g,onClick:p,onDrag:f,onBoundsChanged:x,onLoad:v,onUnmount:y}=e,b=(0,t.useContext)(CS),[w,N]=(0,t.useState)(null),[j,C]=(0,t.useState)(null),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(null),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)(null),[I,D]=(0,t.useState)(null),[P,F]=(0,t.useState)(null),[U,R]=(0,t.useState)(null),[O,H]=(0,t.useState)(null),[Q,z]=(0,t.useState)(null),[V,K]=(0,t.useState)(null),[G,q]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==w&&w.setMap(b)}),[b]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==w&&w.setOptions(n)}),[w,n]),(0,t.useEffect)((()=>{"undefined"!==typeof s&&null!==w&&w.setDraggable(s)}),[w,s]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==w&&w.setEditable(i)}),[w,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==w&&w.setVisible(a)}),[w,a]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==w&&w.setBounds(r)}),[w,r]),(0,t.useEffect)((()=>{w&&o&&(null!==j&&google.maps.event.removeListener(j),C(google.maps.event.addListener(w,"dblclick",o)))}),[o]),(0,t.useEffect)((()=>{w&&l&&(null!==T&&google.maps.event.removeListener(T),S(google.maps.event.addListener(w,"dragend",l)))}),[l]),(0,t.useEffect)((()=>{w&&c&&(null!==_&&google.maps.event.removeListener(_),E(google.maps.event.addListener(w,"dragstart",c)))}),[c]),(0,t.useEffect)((()=>{w&&u&&(null!==B&&google.maps.event.removeListener(B),M(google.maps.event.addListener(w,"mousedown",u)))}),[u]),(0,t.useEffect)((()=>{w&&d&&(null!==k&&google.maps.event.removeListener(k),L(google.maps.event.addListener(w,"mousemove",d)))}),[d]),(0,t.useEffect)((()=>{w&&h&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(w,"mouseout",h)))}),[h]),(0,t.useEffect)((()=>{w&&m&&(null!==P&&google.maps.event.removeListener(P),F(google.maps.event.addListener(w,"mouseover",m)))}),[m]),(0,t.useEffect)((()=>{w&&A&&(null!==U&&google.maps.event.removeListener(U),R(google.maps.event.addListener(w,"mouseup",A)))}),[A]),(0,t.useEffect)((()=>{w&&g&&(null!==O&&google.maps.event.removeListener(O),H(google.maps.event.addListener(w,"rightclick",g)))}),[g]),(0,t.useEffect)((()=>{w&&p&&(null!==Q&&google.maps.event.removeListener(Q),z(google.maps.event.addListener(w,"click",p)))}),[p]),(0,t.useEffect)((()=>{w&&f&&(null!==V&&google.maps.event.removeListener(V),K(google.maps.event.addListener(w,"drag",f)))}),[f]),(0,t.useEffect)((()=>{w&&x&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(w,"bounds_changed",x)))}),[x]),(0,t.useEffect)((()=>{var e=new google.maps.Rectangle(FE(FE({},n),{},{map:b}));return"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof s&&e.setDraggable(s),"undefined"!==typeof r&&e.setBounds(r),o&&C(google.maps.event.addListener(e,"dblclick",o)),l&&S(google.maps.event.addListener(e,"dragend",l)),c&&E(google.maps.event.addListener(e,"dragstart",c)),u&&M(google.maps.event.addListener(e,"mousedown",u)),d&&L(google.maps.event.addListener(e,"mousemove",d)),h&&D(google.maps.event.addListener(e,"mouseout",h)),m&&F(google.maps.event.addListener(e,"mouseover",m)),A&&R(google.maps.event.addListener(e,"mouseup",A)),g&&H(google.maps.event.addListener(e,"rightclick",g)),p&&z(google.maps.event.addListener(e,"click",p)),f&&K(google.maps.event.addListener(e,"drag",f)),x&&q(google.maps.event.addListener(e,"bounds_changed",x)),N(e),v&&v(e),()=>{null!==j&&google.maps.event.removeListener(j),null!==T&&google.maps.event.removeListener(T),null!==_&&google.maps.event.removeListener(_),null!==B&&google.maps.event.removeListener(B),null!==k&&google.maps.event.removeListener(k),null!==I&&google.maps.event.removeListener(I),null!==P&&google.maps.event.removeListener(P),null!==U&&google.maps.event.removeListener(U),null!==O&&google.maps.event.removeListener(O),null!==Q&&google.maps.event.removeListener(Q),null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),y&&y(e),e.setMap(null)}}),[]),null}));class OE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{rectangle:null}),bS(this,"setRectangleCallback",(()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)}))}componentDidMount(){var e=new google.maps.Rectangle(FE(FE({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:RE,eventMap:UE,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:RE,eventMap:UE,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ES(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(OE,"contextType",CS);var zE={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},VE={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},KE={};(0,t.memo)((function(e){var{options:n,center:r,radius:s,draggable:i,editable:a,visible:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:h,onMouseOut:m,onMouseOver:A,onMouseUp:g,onRightClick:p,onClick:f,onDrag:x,onCenterChanged:v,onRadiusChanged:y,onLoad:b,onUnmount:w}=e,N=(0,t.useContext)(CS),[j,C]=(0,t.useState)(null),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(null),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)(null),[I,D]=(0,t.useState)(null),[P,F]=(0,t.useState)(null),[U,R]=(0,t.useState)(null),[O,H]=(0,t.useState)(null),[Q,z]=(0,t.useState)(null),[V,K]=(0,t.useState)(null),[G,q]=(0,t.useState)(null),[W,$]=(0,t.useState)(null),[X,Y]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==j&&j.setMap(N)}),[N]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==j&&j.setOptions(n)}),[j,n]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==j&&j.setDraggable(i)}),[j,i]),(0,t.useEffect)((()=>{"undefined"!==typeof a&&null!==j&&j.setEditable(a)}),[j,a]),(0,t.useEffect)((()=>{"undefined"!==typeof o&&null!==j&&j.setVisible(o)}),[j,o]),(0,t.useEffect)((()=>{"number"===typeof s&&null!==j&&j.setRadius(s)}),[j,s]),(0,t.useEffect)((()=>{"undefined"!==typeof r&&null!==j&&j.setCenter(r)}),[j,r]),(0,t.useEffect)((()=>{j&&l&&(null!==T&&google.maps.event.removeListener(T),S(google.maps.event.addListener(j,"dblclick",l)))}),[l]),(0,t.useEffect)((()=>{j&&c&&(null!==_&&google.maps.event.removeListener(_),E(google.maps.event.addListener(j,"dragend",c)))}),[c]),(0,t.useEffect)((()=>{j&&u&&(null!==B&&google.maps.event.removeListener(B),M(google.maps.event.addListener(j,"dragstart",u)))}),[u]),(0,t.useEffect)((()=>{j&&d&&(null!==k&&google.maps.event.removeListener(k),L(google.maps.event.addListener(j,"mousedown",d)))}),[d]),(0,t.useEffect)((()=>{j&&h&&(null!==I&&google.maps.event.removeListener(I),D(google.maps.event.addListener(j,"mousemove",h)))}),[h]),(0,t.useEffect)((()=>{j&&m&&(null!==P&&google.maps.event.removeListener(P),F(google.maps.event.addListener(j,"mouseout",m)))}),[m]),(0,t.useEffect)((()=>{j&&A&&(null!==U&&google.maps.event.removeListener(U),R(google.maps.event.addListener(j,"mouseover",A)))}),[A]),(0,t.useEffect)((()=>{j&&g&&(null!==O&&google.maps.event.removeListener(O),H(google.maps.event.addListener(j,"mouseup",g)))}),[g]),(0,t.useEffect)((()=>{j&&p&&(null!==Q&&google.maps.event.removeListener(Q),z(google.maps.event.addListener(j,"rightclick",p)))}),[p]),(0,t.useEffect)((()=>{j&&f&&(null!==V&&google.maps.event.removeListener(V),K(google.maps.event.addListener(j,"click",f)))}),[f]),(0,t.useEffect)((()=>{j&&x&&(null!==G&&google.maps.event.removeListener(G),q(google.maps.event.addListener(j,"drag",x)))}),[x]),(0,t.useEffect)((()=>{j&&v&&(null!==W&&google.maps.event.removeListener(W),$(google.maps.event.addListener(j,"center_changed",v)))}),[f]),(0,t.useEffect)((()=>{j&&y&&(null!==X&&google.maps.event.removeListener(X),Y(google.maps.event.addListener(j,"radius_changed",y)))}),[y]),(0,t.useEffect)((()=>{var e=new google.maps.Circle(QE(QE({},n||KE),{},{map:N}));return"number"===typeof s&&e.setRadius(s),"undefined"!==typeof r&&e.setCenter(r),"number"===typeof s&&e.setRadius(s),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof a&&e.setEditable(a),"undefined"!==typeof i&&e.setDraggable(i),l&&S(google.maps.event.addListener(e,"dblclick",l)),c&&E(google.maps.event.addListener(e,"dragend",c)),u&&M(google.maps.event.addListener(e,"dragstart",u)),d&&L(google.maps.event.addListener(e,"mousedown",d)),h&&D(google.maps.event.addListener(e,"mousemove",h)),m&&F(google.maps.event.addListener(e,"mouseout",m)),A&&R(google.maps.event.addListener(e,"mouseover",A)),g&&H(google.maps.event.addListener(e,"mouseup",g)),p&&z(google.maps.event.addListener(e,"rightclick",p)),f&&K(google.maps.event.addListener(e,"click",f)),x&&q(google.maps.event.addListener(e,"drag",x)),v&&$(google.maps.event.addListener(e,"center_changed",v)),y&&Y(google.maps.event.addListener(e,"radius_changed",y)),C(e),b&&b(e),()=>{null!==T&&google.maps.event.removeListener(T),null!==_&&google.maps.event.removeListener(_),null!==B&&google.maps.event.removeListener(B),null!==k&&google.maps.event.removeListener(k),null!==I&&google.maps.event.removeListener(I),null!==P&&google.maps.event.removeListener(P),null!==U&&google.maps.event.removeListener(U),null!==O&&google.maps.event.removeListener(O),null!==Q&&google.maps.event.removeListener(Q),null!==V&&google.maps.event.removeListener(V),null!==W&&google.maps.event.removeListener(W),null!==X&&google.maps.event.removeListener(X),w&&w(e),e.setMap(null)}}),[]),null}));class GE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{circle:null}),bS(this,"setCircleCallback",(()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)}))}componentDidMount(){var e=new google.maps.Circle(QE(QE({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:VE,eventMap:zE,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:VE,eventMap:zE,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ES(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))}render(){return null}}function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(GE,"contextType",CS);var $E={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},XE={add(e,t){e.add(t)},addgeojson(e,t,n){e.addGeoJson(t,n)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle(e,t,n){e.overrideStyle(t,n)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};(0,t.memo)((function(e){var{options:n,onClick:r,onDblClick:s,onMouseDown:i,onMouseMove:a,onMouseOut:o,onMouseOver:l,onMouseUp:c,onRightClick:u,onAddFeature:d,onRemoveFeature:h,onRemoveProperty:m,onSetGeometry:A,onSetProperty:g,onLoad:p,onUnmount:f}=e,x=(0,t.useContext)(CS),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[N,j]=(0,t.useState)(null),[C,T]=(0,t.useState)(null),[S,_]=(0,t.useState)(null),[E,B]=(0,t.useState)(null),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(null),[R,O]=(0,t.useState)(null),[H,Q]=(0,t.useState)(null),[z,V]=(0,t.useState)(null),[K,G]=(0,t.useState)(null);return(0,t.useEffect)((()=>{null!==v&&v.setMap(x)}),[x]),(0,t.useEffect)((()=>{v&&s&&(null!==b&&google.maps.event.removeListener(b),w(google.maps.event.addListener(v,"dblclick",s)))}),[s]),(0,t.useEffect)((()=>{v&&i&&(null!==N&&google.maps.event.removeListener(N),j(google.maps.event.addListener(v,"mousedown",i)))}),[i]),(0,t.useEffect)((()=>{v&&a&&(null!==C&&google.maps.event.removeListener(C),T(google.maps.event.addListener(v,"mousemove",a)))}),[a]),(0,t.useEffect)((()=>{v&&o&&(null!==S&&google.maps.event.removeListener(S),_(google.maps.event.addListener(v,"mouseout",o)))}),[o]),(0,t.useEffect)((()=>{v&&l&&(null!==E&&google.maps.event.removeListener(E),B(google.maps.event.addListener(v,"mouseover",l)))}),[l]),(0,t.useEffect)((()=>{v&&c&&(null!==M&&google.maps.event.removeListener(M),k(google.maps.event.addListener(v,"mouseup",c)))}),[c]),(0,t.useEffect)((()=>{v&&u&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(v,"rightclick",u)))}),[u]),(0,t.useEffect)((()=>{v&&r&&(null!==D&&google.maps.event.removeListener(D),P(google.maps.event.addListener(v,"click",r)))}),[r]),(0,t.useEffect)((()=>{v&&d&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(v,"addfeature",d)))}),[d]),(0,t.useEffect)((()=>{v&&h&&(null!==R&&google.maps.event.removeListener(R),O(google.maps.event.addListener(v,"removefeature",h)))}),[h]),(0,t.useEffect)((()=>{v&&m&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(v,"removeproperty",m)))}),[m]),(0,t.useEffect)((()=>{v&&A&&(null!==z&&google.maps.event.removeListener(z),V(google.maps.event.addListener(v,"setgeometry",A)))}),[A]),(0,t.useEffect)((()=>{v&&g&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(v,"setproperty",g)))}),[g]),(0,t.useEffect)((()=>{if(null!==x){var e=new google.maps.Data(WE(WE({},n),{},{map:x}));s&&w(google.maps.event.addListener(e,"dblclick",s)),i&&j(google.maps.event.addListener(e,"mousedown",i)),a&&T(google.maps.event.addListener(e,"mousemove",a)),o&&_(google.maps.event.addListener(e,"mouseout",o)),l&&B(google.maps.event.addListener(e,"mouseover",l)),c&&k(google.maps.event.addListener(e,"mouseup",c)),u&&I(google.maps.event.addListener(e,"rightclick",u)),r&&P(google.maps.event.addListener(e,"click",r)),d&&U(google.maps.event.addListener(e,"addfeature",d)),h&&O(google.maps.event.addListener(e,"removefeature",h)),m&&Q(google.maps.event.addListener(e,"removeproperty",m)),A&&V(google.maps.event.addListener(e,"setgeometry",A)),g&&G(google.maps.event.addListener(e,"setproperty",g)),y(e),p&&p(e)}return()=>{v&&(null!==b&&google.maps.event.removeListener(b),null!==N&&google.maps.event.removeListener(N),null!==C&&google.maps.event.removeListener(C),null!==S&&google.maps.event.removeListener(S),null!==E&&google.maps.event.removeListener(E),null!==M&&google.maps.event.removeListener(M),null!==L&&google.maps.event.removeListener(L),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==R&&google.maps.event.removeListener(R),null!==H&&google.maps.event.removeListener(H),null!==z&&google.maps.event.removeListener(z),null!==K&&google.maps.event.removeListener(K),f&&f(v),v.setMap(null))}}),[]),null}));class YE extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{data:null}),bS(this,"setDataCallback",(()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)}))}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(WE(WE({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:XE,eventMap:$E,prevProps:{},nextProps:this.props,instance:e}),this.setState((()=>({data:e})),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:XE,eventMap:$E,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ES(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JE(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(YE,"contextType",CS);var eB={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},tB={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class nB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{kmlLayer:null}),bS(this,"setKmlLayerCallback",(()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)}))}componentDidMount(){var e=new google.maps.KmlLayer(ZE(ZE({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:tB,eventMap:eB,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:tB,eventMap:eB,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ES(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function rB(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function sB(e,t){return new t(e.lat,e.lng)}function iB(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function aB(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),s=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&s?{left:"".concat(s.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-s.x-t.x,"px"),height:"".concat(s.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(s=n,i=google.maps.LatLngBounds,a=iB,s instanceof i?s:a(s,i))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var{x:s,y:i}=r;return{left:"".concat(s+t.x,"px"),top:"".concat(i+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,sB));var s,i,a}function oB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lB(e,t,n,r,s){class i extends google.maps.OverlayView{constructor(e,t,n,r){super(),this.container=e,this.pane=t,this.position=n,this.bounds=r}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)}draw(){var e=this.getProjection(),t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oB(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.container?rB(this.container,s):{x:0,y:0}),n=aB(e,t,this.bounds,this.position);for(var[r,i]of Object.entries(n))this.container.style[r]=i}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new i(e,t,n,r)}function cB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uB(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function dB(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}bS(nB,"contextType",CS);(0,t.memo)((function(e){var{position:n,bounds:r,mapPaneName:s,zIndex:i,onLoad:a,onUnmount:o,getPixelPositionOffset:l,children:c}=e,u=(0,t.useContext)(CS),d=(0,t.useMemo)((()=>{var e=document.createElement("div");return e.style.position="absolute",e}),[]),h=(0,t.useMemo)((()=>lB(d,s,n,r,l)),[d,s,n,r]);return(0,t.useEffect)((()=>(null===a||void 0===a||a(h),null===h||void 0===h||h.setMap(u),()=>{null===o||void 0===o||o(h),null===h||void 0===h||h.setMap(null)})),[u,h]),(0,t.useEffect)((()=>{d.style.zIndex="".concat(i)}),[i,d]),xS.createPortal(c,d)}));class hB extends t.PureComponent{constructor(e){super(e),bS(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),bS(this,"updatePane",(()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();jS(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})})),bS(this,"onAdd",(()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)})),bS(this,"onPositionElement",(()=>{var e,t,n,r,s,i,a=this.overlayView.getProjection(),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cB(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:0,y:0},this.containerRef.current?rB(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=aB(a,o,this.props.bounds,this.props.position);(s=l,i={left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height},s.left!==i.left||s.top!==i.top||s.width!==i.height||s.height!==i.height)&&this.setState({containerStyle:{top:null!==(e=l.top)&&void 0!==e?e:0,left:null!==(t=l.left)&&void 0!==t?t:0,width:null!==(n=l.width)&&void 0!==n?n:0,height:null!==(r=l.height)&&void 0!==r?r:0,position:"absolute"}})})),bS(this,"draw",(()=>{this.onPositionElement()})),bS(this,"onRemove",(()=>{var e,t;this.setState((()=>({paneEl:null}))),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)})),this.containerRef=(0,t.createRef)();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=uB(e.position),n=uB(this.props.position),r=dB(e.bounds),s=dB(this.props.bounds);t===n&&r===s||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?xS.createPortal((0,At.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:t.Children.only(this.props.children)}),e):null}}function mB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mB(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(hB,"FLOAT_PANE","floatPane"),bS(hB,"MAP_PANE","mapPane"),bS(hB,"MARKER_LAYER","markerLayer"),bS(hB,"OVERLAY_LAYER","overlayLayer"),bS(hB,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),bS(hB,"contextType",CS);var gB={onDblClick:"dblclick",onClick:"click"},pB={opacity(e,t){e.setOpacity(t)}};(0,t.memo)((function(e){var{url:n,bounds:r,options:s,visible:i}=e,a=(0,t.useContext)(CS),o=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),l=(0,t.useMemo)((()=>new google.maps.GroundOverlay(n,o,s)),[]);return(0,t.useEffect)((()=>{null!==l&&l.setMap(a)}),[a]),(0,t.useEffect)((()=>{"undefined"!==typeof n&&null!==l&&(l.set("url",n),l.setMap(a))}),[l,n]),(0,t.useEffect)((()=>{"undefined"!==typeof i&&null!==l&&l.setOpacity(i?1:0)}),[l,i]),(0,t.useEffect)((()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));"undefined"!==typeof r&&null!==l&&(l.set("bounds",e),l.setMap(a))}),[l,r]),null}));class fB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{groundOverlay:null}),bS(this,"setGroundOverlayCallback",(()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)}))}componentDidMount(){jS(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,AB(AB({},this.props.options),{},{map:this.context}));this.registeredEvents=BS({updaterMap:pB,eventMap:gB,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:pB,eventMap:gB,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xB(Object(n),!0).forEach((function(t){bS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bS(fB,"defaultProps",{onLoad:function(){}}),bS(fB,"contextType",CS);var yB={},bB={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var{data:n,onLoad:r,onUnmount:s,options:i}=e,a=(0,t.useContext)(CS),[o,l]=(0,t.useState)(null);return(0,t.useEffect)((()=>{google.maps.visualization||jS(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,t.useEffect)((()=>{jS(!!n,"data property is required in HeatmapLayer %s",n)}),[n]),(0,t.useEffect)((()=>{null!==o&&o.setMap(a)}),[a]),(0,t.useEffect)((()=>{i&&null!==o&&o.setOptions(i)}),[o,i]),(0,t.useEffect)((()=>{var e=new google.maps.visualization.HeatmapLayer(vB(vB({},i),{},{data:n,map:a}));return l(e),r&&r(e),()=>{null!==o&&(s&&s(o),o.setMap(null))}}),[]),null}));class wB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{heatmapLayer:null}),bS(this,"setHeatmapLayerCallback",(()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)}))}componentDidMount(){jS(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),jS(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(vB(vB({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=BS({updaterMap:bB,eventMap:yB,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)}componentDidUpdate(e){ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:bB,eventMap:yB,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ES(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}bS(wB,"contextType",CS);var NB={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},jB={register(e,t,n){e.registerPanoProvider(t,n)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class CB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{streetViewPanorama:null}),bS(this,"setStreetViewPanoramaCallback",(()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)}))}componentDidMount(){var e,t,n=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=BS({updaterMap:jB,eventMap:NB,prevProps:{},nextProps:this.props,instance:n}),this.setState((()=>({streetViewPanorama:n})),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:jB,eventMap:NB,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ES(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}bS(CB,"contextType",CS);class TB extends t.PureComponent{constructor(){super(...arguments),bS(this,"state",{streetViewService:null}),bS(this,"setStreetViewServiceCallback",(()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)}))}componentDidMount(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}bS(TB,"contextType",CS);t.PureComponent;var SB={onDirectionsChanged:"directions_changed"},_B={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class EB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"state",{directionsRenderer:null}),bS(this,"setDirectionsRendererCallback",(()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))}))}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=BS({updaterMap:_B,eventMap:SB,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:_B,eventMap:SB,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ES(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}bS(EB,"contextType",CS);t.PureComponent;var BB={onPlacesChanged:"places_changed"},MB={bounds(e,t){e.setBounds(t)}};class kB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"containerElement",(0,t.createRef)()),bS(this,"state",{searchBox:null}),bS(this,"setSearchBoxCallback",(()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)}))}componentDidMount(){if(jS(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=BS({updaterMap:MB,eventMap:BB,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:MB,eventMap:BB,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ES(this.registeredEvents))}render(){return(0,At.jsx)("div",{ref:this.containerElement,children:t.Children.only(this.props.children)})}}bS(kB,"contextType",CS);var LB={onPlaceChanged:"place_changed"},IB={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class DB extends t.PureComponent{constructor(){super(...arguments),bS(this,"registeredEvents",[]),bS(this,"containerElement",(0,t.createRef)()),bS(this,"state",{autocomplete:null}),bS(this,"setAutocompleteCallback",(()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)}))}componentDidMount(){var e;jS(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var n=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=BS({updaterMap:IB,eventMap:LB,prevProps:{},nextProps:this.props,instance:n}),this.setState((()=>({autocomplete:n})),this.setAutocompleteCallback)}}componentDidUpdate(e){ES(this.registeredEvents),this.registeredEvents=BS({updaterMap:IB,eventMap:LB,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&ES(this.registeredEvents)}render(){return(0,At.jsx)("div",{ref:this.containerElement,className:this.props.className,children:t.Children.only(this.props.children)})}}function PB(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498 4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 0 0-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0Z"}))}bS(DB,"defaultProps",{className:""}),bS(DB,"contextType",CS);const FB=t.forwardRef(PB),UB={width:"100%",height:"90vh"},RB={lat:10.7769942,lng:106.6927272};function OB(e){return["B\u1eafc","\u0110\xf4ng B\u1eafc","\u0110\xf4ng","\u0110\xf4ng Nam","Nam","T\xe2y Nam","T\xe2y","T\xe2y B\u1eafc","B\u1eafc"][Math.round(e/45)%8]}function HB(e){return["T\xfd","Qu\xfd","S\u1eedu","C\u1ea5n","D\u1ea7n","Gi\xe1p","M\xe3o","\u1ea4t","Th\xecn","T\u1ed1n","T\u1ef5","B\xednh","Ng\u1ecd","\u0110inh","M\xf9i","Kh\xf4n","Th\xe2n","Canh","D\u1eadu","T\xe2n","Tu\u1ea5t","C\xe0n","H\u1ee3i","Nh\xe2m"][Math.floor((e+7.5)%360/15)]}function QB(e){return["T\xfd","Qu\xfd","S\u1eedu","C\u1ea5n","D\u1ea7n","Gi\xe1p","M\xe3o","\u1ea4t","Th\xecn","T\u1ed1n","T\u1ef5","B\xednh","Ng\u1ecd","\u0110inh","M\xf9i","Kh\xf4n","Th\xe2n","Canh","D\u1eadu","T\xe2n","Tu\u1ea5t","C\xe0n","H\u1ee3i","Nh\xe2m"][(Math.floor((e+7.5)%360/15)+12)%24]}function zB(e){let{heading:t=0}=e;return(0,At.jsx)(At.Fragment,{children:(0,At.jsx)("div",{className:"w-1 h-[100vh] bg-white select-none fixed top-[0%] left-[50%] -translate-x-1/2 z-30 transform-origin-center",style:{transform:`rotate(${t}deg)`,transition:"transform 0.2s"},children:(0,At.jsx)("div",{class:"arrow-up absolute z-40 top-[30%] left-[50%] -translate-x-1/2 transform-origin-center"})})})}const VB=function(e){let{onHeadingChange:n}=e;const[r,s]=(0,t.useState)(RB),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(0),[c,u]=(0,t.useState)(21),[d,h]=(0,t.useState)(""),[m,A]=(0,t.useState)(""),[g,p]=(0,t.useState)(""),[f,x]=(0,t.useState)("satellite"),{hasPermission:v,requestGPSPermission:y}=QT(),{isLoaded:b}=function(e){var{id:n=VS.id,version:r=VS.version,nonce:s,googleMapsApiKey:i,language:a,region:o,libraries:l=n_,preventGoogleFontsLoading:c,mapIds:u,authReferrerPolicy:d}=e,h=(0,t.useRef)(!1),[m,A]=(0,t.useState)(!1),[g,p]=(0,t.useState)(void 0);(0,t.useEffect)((function(){return h.current=!0,()=>{h.current=!1}}),[]);var f=(0,t.useMemo)((()=>new t_({id:n,apiKey:i,version:r,libraries:l,language:a||"en",region:o||"US",mapIds:u||[],nonce:s||"",authReferrerPolicy:d||"origin"})),[n,i,r,l,a,o,u,s,d]);(0,t.useEffect)((function(){m||f.load().then((()=>{h.current&&A(!0)})).catch((e=>{p(e)}))}),[]),(0,t.useEffect)((()=>{FS&&c&&OS()}),[c]);var x=(0,t.useRef)();return(0,t.useEffect)((()=>{x.current&&l!==x.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),x.current=l}),[l]),{isLoaded:m,loadError:g}}({googleMapsApiKey:"AIzaSyA-uJmZEiHv70QVCi4Ha-58SiTZopHbQQ8"});return(0,t.useEffect)((()=>{i&&"function"===typeof i.setHeading&&(0===i.getTilt()&&i.setTilt(45),i.setHeading(o))}),[o,i]),(0,t.useEffect)((()=>{"function"===typeof n&&n(o)}),[o,n]),b?(0,At.jsxs)("div",{className:"w-full h-full flex flex-col items-center -mt-4 relative",children:[v("gps")&&(0,At.jsx)("div",{className:"absolute top-[20px] left-1/2 transform -translate-x-1/2 z-50 bg-green-500/90 text-white px-3 py-1 rounded-lg text-sm",children:"\u2713 Quy\u1ec1n GPS \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u"}),(0,At.jsx)("button",{className:"text-white absolute top-[72px] left-4 z-40 bg-black bg-opacity-60 rounded-full p-2",onClick:async()=>{try{const e=await y();if(!e.granted)return void alert(`Kh\xf4ng th\u1ec3 l\u1ea5y v\u1ecb tr\xed: ${e.error||"Quy\u1ec1n truy c\u1eadp GPS b\u1ecb t\u1eeb ch\u1ed1i"}`);navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{const t={lat:e.coords.latitude,lng:e.coords.longitude};s(t),i&&(i.panTo(t),i.setZoom(21),u(21))}),(e=>{console.error("GPS error:",e),alert(`Kh\xf4ng th\u1ec3 l\u1ea5y v\u1ecb tr\xed: ${e.message}`)}))}catch(e){console.error("Error requesting GPS permission:",e),alert("L\u1ed7i khi y\xeau c\u1ea7u quy\u1ec1n truy c\u1eadp GPS")}},children:(0,At.jsx)(AT,{className:"w-7 h-7"})}),(0,At.jsx)("button",{className:"text-white absolute top-[72px] left-20 z-40 bg-black bg-opacity-60 rounded-full p-2",onClick:()=>{const e="satellite"===f?"roadmap":"satellite";x(e),i&&(i.setMapTypeId(e),"satellite"===e?i.setTilt(45):i.setTilt(0))},title:"satellite"===f?"Chuy\u1ec3n sang b\u1ea3n \u0111\u1ed3 2D":"Chuy\u1ec3n sang v\u1ec7 tinh",children:(0,At.jsx)(FB,{className:"w-7 h-7"})}),(0,At.jsxs)("div",{className:"absolute top-[72px] right-1 z-40 p-2 bg-black rounded-lg flex items-center justify-center flex-col w-12 h-12",children:[(0,At.jsx)("span",{className:"text-[10px] font-bold text-red-500",children:"B\u1eafc"}),(0,At.jsx)("img",{src:GC,alt:"Compass",className:"w-5 h-5 transform rotate-180"})]}),(0,At.jsx)(zB,{heading:o}),(0,At.jsx)("div",{className:"absolute top-[72px] left-[80px] z-40 flex flex-col items-center gap-2 hidden",children:(0,At.jsxs)("div",{className:"bg-white bg-opacity-80 rounded px-3 py-1 text-xs text-gray-800 shadow",children:[(0,At.jsx)("b",{children:"T\u1ecda \u0111\u1ed9:"})," ",r.lat.toFixed(6),", ",r.lng.toFixed(6)]})}),(0,At.jsxs)("div",{className:"gap-2 mt-2 absolute z-40 bottom-[-10px] left-0 w-full bg-black bg-opacity-80 py-4 px-8",children:[(0,At.jsxs)("div",{className:"w-full px-0 py-2 rounded-lg text-sm md:text-lg text-white mb-4",children:["H\u01b0\u1edbng: ",(0,At.jsxs)("span",{className:"text-red-500 font-bold",children:[OB(o)," - ",HB(o)," (",o,"\xb0) "]}),(0,At.jsxs)("span",{className:"ml-2",children:["T\u1ecda: ",(0,At.jsx)("b",{children:QB(o)})]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("input",{className:"w-full",id:"headingSlider",type:"range",min:"0",max:"360",value:o,onChange:e=>l(Number(e.target.value))}),(0,At.jsx)("input",{className:"ml-2 px-2 py-1 rounded text-xs w-16 hidden",type:"number",step:"any",placeholder:"H\u01b0\u1edbng",value:g,onChange:e=>p(e.target.value),onKeyDown:e=>{if("Enter"===e.key){let e=parseFloat(d),t=parseFloat(m),n=parseFloat(g);isNaN(e)||isNaN(t)||(s({lat:e,lng:t}),i&&i.panTo({lat:e,lng:t})),isNaN(n)||l(n%360)}}}),(0,At.jsx)("button",{className:"ml-2 px-2 py-1 bg-gray-200 rounded text-xs",onClick:()=>l((e=>(e-1+360)%360)),children:"-1\xb0"}),(0,At.jsx)("button",{className:"ml-2 px-2 py-1 bg-gray-200 rounded text-xs",onClick:()=>l((e=>(e+1)%360)),children:"+1\xb0"}),(0,At.jsx)("button",{className:"ml-2 px-2 py-1 bg-gray-200 rounded text-xs",onClick:()=>l(0),children:"Reset"})]})]}),(0,At.jsx)(LS,{mapContainerStyle:UB,center:r,zoom:c,onLoad:e=>{a(e),e.setMapTypeId(f),e.setZoom(18),"satellite"===f?e.setTilt(45):e.setTilt(0)},mapTypeId:f,children:(0,At.jsx)(y_,{position:r})})]}):(0,At.jsx)("div",{children:"\u0110ang t\u1ea3i b\u1ea3n \u0111\u1ed3..."})},{h4:KB}=eC,GB=[{huongs:["Th\xe2n","T\xfd","Th\xecn"],daoHoa:"M\xe3o",daoHoaSat:"D\u1eadu",dichMa:"Th\xe2n"},{huongs:["T\u1ef5","D\u1eadu","S\u1eedu"],daoHoa:"T\xfd",daoHoaSat:"Ng\u1ecd",dichMa:"T\u1ef5"},{huongs:["D\u1ea7n","Ng\u1ecd","Tu\u1ea5t"],daoHoa:"D\u1eadu",daoHoaSat:"M\xe3o",dichMa:"D\u1ea7n"},{huongs:["H\u1ee3i","M\xe3o","M\xf9i"],daoHoa:"Ng\u1ecd",daoHoaSat:"T\xfd",dichMa:"H\u1ee3i"}],qB=[{huongs:["Gi\xe1p","M\xe3o"],nghenhLoc:"D\u1ea7n"},{huongs:["\xc2t","Th\xecn"],nghenhLoc:"M\xe3o"},{huongs:["T\u1ed1n","T\u1ef5","B\xednh","Ng\u1ecd"],nghenhLoc:"T\u1ef5"},{huongs:["\u0110inh","M\xf9i"],nghenhLoc:"Ng\u1ecd"},{huongs:["Kh\xf4n","Th\xe2n","Canh","D\u1eadu"],nghenhLoc:"Th\xe2n"},{huongs:["T\xe2n","Tu\u1ea5t"],nghenhLoc:"D\u1eadu"},{huongs:["C\xe0n","H\u1ee3i","Nh\xe2m","T\xfd"],nghenhLoc:"H\u1ee3i"},{huongs:["Qu\xfd","S\u1eedu","C\u1ea5n","D\u1ea7n"],nghenhLoc:"T\u1ef5"}],WB=e=>{let{initialHeading:n,rotation:r}=e;const{videoRef:s,isCameraActive:i,startCamera:a,stopCamera:o,toggleCamera:l}=gS(),{hasPermission:c}=QT(),[u,d]=(0,t.useState)(""),[h,m]=(0,t.useState)(n||""),[A,g]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[x,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(""),[w,N]=(0,t.useState)(null),[j,C]=(0,t.useState)({name:"",type:""}),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(null),[k,L]=(0,t.useState)(!1),[I,D]=(0,t.useState)(!1),[P,F]=(0,t.useState)(!0);(0,t.useEffect)((()=>((async()=>{try{console.log("\ud83c\udfac CameraCheck: Auto-starting camera..."),F(!0),await a(),console.log("\u2705 CameraCheck: Camera auto-started successfully")}catch(e){console.error("\u274c CameraCheck: Auto-start camera failed:",e)}finally{F(!1)}})(),()=>{i&&o()})),[]),(0,t.useEffect)((()=>{if(void 0!==r&&null!==r){const e=KB.find((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];if(!n)return!1;const{start:s,end:i}=n;return s>i?r>=s||r<i:r>=s&&r<i}));if(e){b(e.name);const t=GB.find((t=>t.huongs.includes(e.name)));if(t){const e=KB.find((e=>e.name===t.daoHoa)),n=KB.find((e=>e.name===t.daoHoaSat)),r=KB.find((e=>e.name===t.dichMa)),s=e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?{...n}:null};N({daoHoa:t.daoHoa,daoHoaToaDo:s(e),daoHoaSat:t.daoHoaSat,daoHoaSatToaDo:s(n),dichMa:t.dichMa,dichMaToaDo:s(r)})}const n=qB.find((t=>t.huongs.includes(e.name)));if(n){const e=KB.find((e=>e.name===n.nghenhLoc)),t=e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?{...n}:null};M({nghenhLoc:n.nghenhLoc,nghenhLocToaDo:t(e)})}}}}),[r]);return(0,t.useEffect)((()=>{g(h>=315||h<45)}),[h]),(0,t.useEffect)((()=>{if(!p)return void v(null);const e=GB.find((e=>e.huongs.includes(p)));if(!e)return void v(null);const t=KB.find((t=>t.name===e.daoHoa)),n=KB.find((t=>t.name===e.daoHoaSat)),r=KB.find((t=>t.name===e.dichMa)),s=e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?`${n.start}\xb0 - ${n.end}\xb0`:"?"};v({daoHoa:e.daoHoa,daoHoaToaDo:s(t),daoHoaSat:e.daoHoaSat,daoHoaSatToaDo:s(n),dichMa:e.dichMa,dichMaToaDo:s(r)})}),[p]),(0,t.useEffect)((()=>{if(!p)return void S(null);const e=qB.find((e=>e.huongs.includes(p)));if(!e)return void S(null);const t=KB.find((t=>t.name===e.nghenhLoc));S({nghenhLoc:e.nghenhLoc,nghenhLocToaDo:(e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?`${n.start}\xb0 - ${n.end}\xb0`:"?"})(t)})}),[p]),(0,t.useEffect)((()=>{if(!w||!h)return void C({name:"",type:""});const e=e=>{if(!e)return!1;const{start:t,end:n}=e;return t>n?h>=t||h<n:h>=t&&h<n};e(w.daoHoaToaDo)?C({name:w.daoHoa,type:"daoHoa"}):e(w.daoHoaSatToaDo)?C({name:w.daoHoaSat,type:"daoHoaSat"}):e(w.dichMaToaDo)?C({name:w.dichMa,type:"dichMa"}):C({name:"",type:""})}),[h,w]),(0,t.useEffect)((()=>{let e=null;if(y&&B?e=B:!y&&T&&(e=T),!e||!e.nghenhLocToaDo||!h)return void E("");const t=e.nghenhLocToaDo;if(!t)return void E("");const{start:n,end:r}=t;let s=!1;s=n>r?h>=n||h<r:h>=n&&h<r,E(s?e.nghenhLoc:"")}),[h,y,B,T]),(0,t.useEffect)((()=>{if(!h)return void L(!1);const e=KB.filter((e=>["Tu\u1ea5t","C\xe0n","H\u1ee3i"].includes(e.name)));if(!e.length)return void L(!1);const t=e.some((e=>{var t;const n=null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];if(!n)return!1;const{start:r,end:s}=n;return r>s?h>=r||h<s:h>=r&&h<s}));L(t)}),[h]),(0,At.jsxs)("div",{className:"relative w-full h-screen overflow-hidden max-w-[420px] md:max-w-[600px] mx-auto",children:[(0,At.jsxs)("div",{className:"fixed top-[60px] right-0 z-50 flex items-center justify-between gap-3 w-full bg-black/50 p-3",children:[(0,At.jsxs)("div",{className:"flex justify-center items-end gap-2",children:[i?(0,At.jsx)("button",{onClick:o,className:"bg-red-500 text-white px-2 py-1 rounded-lg shadow-lg font-medium z-50",children:(0,At.jsx)(xT,{className:"w-6 h-6"})}):(0,At.jsxs)("div",{className:"flex items-center gap-1 relative",children:[(0,At.jsx)("button",{onClick:a,disabled:P,className:(P?"bg-yellow-500":"bg-green-500")+" text-white px-2 py-1 rounded-lg shadow-lg font-medium z-50 disabled:opacity-70",children:P?(0,At.jsx)("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"}):(0,At.jsx)(pT,{className:"w-6 h-6"})}),c("camera")&&!P&&(0,At.jsx)("div",{className:"text-xs text-green-400 absolute top-0 right-0 p-1 bg-black/50 rounded-lg",children:"\u2713"})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center gap-2 justify-center",id:"selectMountain",children:[(0,At.jsx)("span",{className:"text-sm text-gray-400",children:"H\u01b0\u1edbng nh\xe0"}),(0,At.jsxs)("select",{className:"text-center text-sm border border-yellow-500 rounded-lg px-2 py-1 h-[32px]",value:y,onChange:e=>{const t=e.target.value;b(t);const n=GB.find((e=>e.huongs.includes(t)));if(n){const e=KB.find((e=>e.name===n.daoHoa)),t=KB.find((e=>e.name===n.daoHoaSat)),r=KB.find((e=>e.name===n.dichMa)),s=e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?{...n}:null};N({daoHoa:n.daoHoa,daoHoaToaDo:s(e),daoHoaSat:n.daoHoaSat,daoHoaSatToaDo:s(t),dichMa:n.dichMa,dichMaToaDo:s(r)})}else N(null);const r=qB.find((e=>e.huongs.includes(t)));if(r){const e=KB.find((e=>e.name===r.nghenhLoc)),t=e=>{var t;const n=null===e||void 0===e||null===(t=e.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0];return n?{...n}:null};M({nghenhLoc:r.nghenhLoc,nghenhLocToaDo:t(e)})}else M(null)},children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn H\u01b0\u1edbng"}),KB.map((e=>(0,At.jsxs)("option",{value:e.name,children:[e.name," - ",e.direct]},e.name+e.direct)))]})]})]}),(0,At.jsxs)("div",{className:"flex items-end justify-end gap-1",children:[(0,At.jsx)(zT,{onDirectionChange:e=>{d(e)},onHeadingChange:e=>{m(e);const t=KB.find((t=>{var n;const r=null===(n=t.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(!r)return!1;const{start:s,end:i}=r;return s>i?e>=s||e<i:e>=s&&e<i}));f(t?t.name:"")},onLockChange:e=>{D(e)}}),(0,At.jsxs)("div",{className:"text-center text-sm bg-yellow-500 rounded-lg px-2 py-1 mt-1 hidden",children:["H\u01b0\u1edbng: ",u," - ",h]}),p&&(0,At.jsx)("div",{className:"text-center text-sm border border-yellow-500 bg-yellow-500 text-black rounded-lg px-2 py-1 w-[60px] mt-2 -ml-1",children:p})]})]}),y?(0,At.jsxs)(At.Fragment,{children:[w&&(0,At.jsxs)("div",{className:"hidden fixed w-full bottom-[100px] left-[50%] -translate-x-1/2 z-50 flex items-center justify-between gap-4 text-white text-lg font-bold fade-in",children:[(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center pl-3",children:["\u0110\xe0o Hoa:",(0,At.jsx)("div",{className:"text-pink-500 text-base",children:w.daoHoa})]}),(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center",children:["\u0110\xe0o Hoa S\xe1t:",(0,At.jsx)("div",{className:"text-indigo-500 text-base",children:w.daoHoaSat})]}),(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center pr-3",children:["D\u1ecbch M\xe3:",(0,At.jsx)("div",{className:"text-green-500 text-base",children:w.dichMa})]})]}),B&&(0,At.jsx)("div",{className:"hidden fixed bottom-[200px] left-[50%] -translate-x-1/2 z-50 flex items-center justify-center gap-4 text-white text-lg font-bold fade-in",children:(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center",children:["Ngh\xeanh L\u1ed9c:",(0,At.jsx)("div",{className:"text-green-500 text-base",children:B.nghenhLoc})]})})]}):(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"fixed bottom-[60px] left-0 z-50 flex flex-col items-center justify-center gap-4 text-gray-400 text-lg fade-in w-full bg-black/70 p-3",children:[T&&(0,At.jsx)("div",{className:"w-full flex items-center justify-center gap-4 text-gray-400 text-lg fade-in",children:(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center justify-center flex gap-2 items-center",children:["Ngh\xeanh L\u1ed9c:",(0,At.jsx)("div",{className:"text-green-500 text-base font-bold",children:T.nghenhLoc})]})}),x&&(0,At.jsxs)("div",{className:"w-full z-50 flex items-center justify-between gap-4 text-gray-400 text-lg fade-in",children:[(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center justify-start pl-3",children:["\u0110\xe0o Hoa:",(0,At.jsx)("div",{className:"text-pink-500 text-base font-bold",children:x.daoHoa})]}),(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center",children:["\u0110\xe0o Hoa S\xe1t:",(0,At.jsx)("div",{className:"text-indigo-500 text-base font-bold",children:x.daoHoaSat})]}),(0,At.jsxs)("div",{className:"pt-2 text-xs flex-1 text-center flex gap-2 items-center justify-end pr-3",children:["D\u1ecbch M\xe3:",(0,At.jsx)("div",{className:"text-green-500 text-base font-bold",children:x.dichMa})]})]})]})}),j.name&&(0,At.jsxs)("div",{className:"fixed top-[40%] left-[5%] z-50 flex flex-col items-center w-[90%] fade-in",children:[(0,At.jsx)("div",{className:"daoHoa"===j.type?"text-pink-400 text-xl":"daoHoaSat"===j.type?"text-indigo-400 text-xl":"text-green-400 text-xl",children:"daoHoa"===j.type?(0,At.jsxs)("div",{className:"text-white text-sm bg-black/70 rounded-lg p-4 space-y-2 border border-pink-500 glow-pink",children:[(0,At.jsx)("h4",{className:"text-white text-lg font-bold text-center",children:"\u0110\xe0o Hoa Cung"}),(0,At.jsx)("p",{className:"text-orange-500",children:"L\xe0m \u0111\u1ed9ng kh\xed, b\u1ec3 c\xe1 6 con c\xe1 m\xe0u \u0111en"}),(0,At.jsx)("p",{className:"text-orange-500",children:"L\u1ecd hoa H\u1ed3ng T\u01b0\u01a1i, n\u01b0\u1edbc s\u1ea1ch"}),(0,At.jsx)("p",{className:"text-green-500",children:"M\u1edf c\u1eeda \u0111i l\u1ea1i - Ch\u1ed7 ng\u1ee7"})]}):"daoHoaSat"===j.type?(0,At.jsxs)("div",{className:"text-white text-sm bg-black/70 rounded-lg p-4 space-y-2 border border-indigo-500 glow-indigo translate-y-[-180px]",children:[(0,At.jsx)("h4",{className:"text-white text-lg font-bold text-center",children:"\u0110\xe0o Hoa S\xe1t"}),(0,At.jsx)("p",{className:"text-orange-500",children:"\u0110\u1ec3 Dao hay treo k\xe9o"}),(0,At.jsx)("p",{className:"text-green-500",children:"Treo ki\u1ebfm g\u1ed7 \u0111\xe0o"})]}):(0,At.jsxs)("div",{className:"text-white text-sm bg-black/70 rounded-lg p-4 space-y-2 border border-green-500 glow-green translate-y-[180px]",children:[(0,At.jsx)("h4",{className:"text-white text-lg font-bold text-center",children:"D\u1ecbch M\xe3"}),(0,At.jsx)("p",{className:"text-orange-500",children:"\u0110\u1ec3 con ng\u1ef1a"}),(0,At.jsx)("p",{className:"text-orange-500",children:"L\xe0m \u0111\u1ed9ng kh\xed nh\u01b0 \u0111\u1ec3 qu\u1ea1t, b\u1ec3 c\xe1, m\xe1y l\u1ea1nh"}),(0,At.jsx)("p",{className:"text-green-500",children:"M\u1edf c\u1eeda \u0111i l\u1ea1i - Ch\u1ed7 ng\u1ee7"})]})}),(0,At.jsx)("div",{style:{perspective:20,transformStyle:"preserve-3d"},children:(0,At.jsx)("div",{className:"w-[1px] h-[150px] mt-2 "+("daoHoa"===j.type?"bg-pink-400 glow-pink":"daoHoaSat"===j.type?"bg-indigo-400 glow-indigo":"bg-green-400 glow-green"),style:{transform:"rotateX(50deg) translateZ(-50px)",borderRadius:"8px"}})})]}),_&&(0,At.jsxs)("div",{className:"fixed top-[40%] left-[5%] z-30 flex flex-col items-center w-[90%] fade-in",children:[(0,At.jsxs)("div",{className:"text-white text-sm bg-black/90 rounded-lg p-4 space-y-2 border border-green-500 glow-green",children:[(0,At.jsx)("h4",{className:"text-white text-lg font-bold text-center",children:"Cung Ngh\xeanh L\u1ed9c"}),(0,At.jsx)("p",{className:"text-orange-500",children:"\u0110\u1ec3 k\xe9t s\u1eaft, V\u1eadt ph\u1ea9m phong th\u1ee7y t\xe0i l\u1ed9c (T\u1ef3 h\u01b0u, c\xf3c 3 ch\xe2n, ....)"}),(0,At.jsx)("p",{className:"text-green-500",children:"\u0110\u1eb7t b\xe0n th\u1edd Th\u1ea7n t\xe0i - Th\u1ed5 \u0111\u1ecba, hay B\xe0n th\u1edd T\u1ed5 Ngh\u1ec1 "}),(0,At.jsx)("p",{className:"text-green-500",children:"M\u1edf c\u1eeda \u0111i l\u1ea1i t\u1ea1i"})]}),(0,At.jsx)("div",{style:{perspective:20,transformStyle:"preserve-3d"},children:(0,At.jsx)("div",{className:"w-[1px] h-[150px] mt-2 bg-green-400",style:{boxShadow:"0 0 20px 5px #4ade80, 0 0 40px 10px #22d3ee",animation:"glowGreen 1.5s infinite alternate",transform:"rotateX(50deg) translateZ(-50px)",borderRadius:"8px"}})})]}),k&&(0,At.jsxs)("div",{className:"fixed top-[40%] left-[5%] z-30 flex flex-col items-center w-[90%] fade-in",children:[(0,At.jsxs)("div",{className:"text-white text-sm bg-black/50 rounded-lg p-4 space-y-2 border border-blue-500 glow-blue",children:[(0,At.jsx)("h4",{className:"text-white text-lg font-bold text-center",children:"Cung C\xe0n"}),(0,At.jsx)("p",{className:"text-orange-500",children:"C\u1ea7n Th\xf4ng Tho\xe1ng, y\xean t\u0129nh, s\u1ea1ch s\u1ebd"}),(0,At.jsx)("p",{className:"text-green-500",children:"Ph\xf9 h\u1ee3p \u0111\u1ec3 Gi\u1ebfng tr\u1eddi - B\xe0n l\xe0m vi\u1ec7c - Ch\u1ed7 ng\u1ee7"}),(0,At.jsx)("p",{className:"text-red-500",children:"Tr\xe1nh B\u1ebfp - Tolet - B\u1ec3 Ph\u1ed1t - B\xe0n th\u1edd - C\u1ea7u thang - N\u01a1i \u0111\u1ed9ng kh\xed (vd: C\u1eeda ra v\xe0o) "})]}),(0,At.jsx)("div",{style:{perspective:20,transformStyle:"preserve-3d"},children:(0,At.jsx)("div",{className:"w-[1px] h-[150px] mt-2 bg-blue-400",style:{boxShadow:"0 0 20px 5px #60a5fa, 0 0 40px 10px #22d3ee",animation:"glowBlue 1.5s infinite alternate",transform:"rotateX(50deg) translateZ(-50px)",borderRadius:"8px"}})})]}),(0,At.jsxs)("div",{className:"relative w-full h-full",children:[P&&(0,At.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-60",children:(0,At.jsxs)("div",{className:"text-center text-white",children:[(0,At.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-white border-t-transparent rounded-full mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-lg",children:"\u0110ang kh\u1edfi \u0111\u1ed9ng camera..."}),(0,At.jsx)("p",{className:"text-sm text-gray-300 mt-2",children:"Vui l\xf2ng c\u1ea5p quy\u1ec1n camera n\u1ebfu \u0111\u01b0\u1ee3c h\u1ecfi"})]})}),c("camera")&&!P&&(0,At.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-50 bg-green-500/90 text-white px-3 py-1 rounded-lg text-sm",children:"\u2713 Quy\u1ec1n Camera \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u"}),i&&(0,At.jsx)("video",{ref:s,playsInline:!0,autoPlay:!0,muted:!0,onClick:l,className:"w-full h-full object-cover cursor-pointer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:20}})]})]})},$B=(0,t.createContext)();function XB(){const e=(0,t.useContext)($B);if(!e)throw new Error("useFeatureFlags must be used within a FeatureFlagsProvider");return e}function YB(e){let{children:n}=e;const{currentUser:r,membershipTier:s}=Aw(),[i,a]=(0,t.useState)({}),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1);(0,t.useEffect)((()=>{void 0!==s&&null!==s&&u(!0)}),[s]);const d={lakinh_camera_activation:{name:"K\xedch Ho\u1ea1t Cung (La Kinh)",description:"T\xednh n\u0103ng t\xecm cung trong La Kinh",enabled:!1,requiredTier:"master",category:"lakinh",starCost:5,starDuration:24},lakinh_advanced_compass:{name:"La B\xe0n N\xe2ng Cao",description:"T\xednh n\u0103ng la b\xe0n n\xe2ng cao v\u1edbi nhi\u1ec1u ch\u1ebf \u0111\u1ed9",enabled:!1,requiredTier:"master",category:"lakinh",starCost:3,starDuration:24},lakinh_gps_integration:{name:"T\xedch H\u1ee3p GPS",description:"T\u1ef1 \u0111\u1ed9ng x\xe1c \u0111\u1ecbnh h\u01b0\u1edbng b\u1eb1ng GPS",enabled:!1,requiredTier:"master",category:"lakinh",starCost:4,starDuration:24},battu_advanced_analysis:{name:"Ph\xe2n T\xedch B\xe1t T\u1ef1 N\xe2ng Cao",description:"Ph\xe2n t\xedch chi ti\u1ebft v\u1eadn m\u1ec7nh v\xe0 t\u01b0\u01a1ng quan",enabled:!1,requiredTier:"master",category:"battu",starCost:8,starDuration:48},battu_yearly_forecast:{name:"D\u1ef1 B\xe1o V\u1eadn M\u1ec7nh Theo N\u0103m",description:"D\u1ef1 b\xe1o chi ti\u1ebft v\u1eadn m\u1ec7nh cho t\u1eebng n\u0103m",enabled:!1,requiredTier:"master",category:"battu",starCost:10,starDuration:72},luchao_divination_mode:{name:"Ch\u1ebf \u0110\u1ed9 B\xf3i To\xe1n",description:"Ch\u1ebf \u0111\u1ed9 b\xf3i to\xe1n n\xe2ng cao v\u1edbi AI",enabled:!1,requiredTier:"master",category:"luchao",starCost:6,starDuration:36},luchao_historical_data:{name:"D\u1eef Li\u1ec7u L\u1ecbch S\u1eed",description:"Truy c\u1eadp d\u1eef li\u1ec7u l\u1ecbch s\u1eed c\xe1c l\u1ea7n b\xf3i",enabled:!1,requiredTier:"master",category:"luchao",starCost:4,starDuration:24},export_data:{name:"Xu\u1ea5t D\u1eef Li\u1ec7u",description:"Xu\u1ea5t d\u1eef li\u1ec7u c\xe1 nh\xe2n ra file PDF/Excel",enabled:!1,requiredTier:"master",category:"general",starCost:7,starDuration:168},priority_support:{name:"H\u1ed7 Tr\u1ee3 \u01afu Ti\xean",description:"\u0110\u01b0\u1ee3c \u01b0u ti\xean h\u1ed7 tr\u1ee3 t\u1eeb admin",enabled:!1,requiredTier:"master",category:"general",starCost:2,starDuration:24},beta_features:{name:"T\xednh N\u0103ng Beta",description:"Truy c\u1eadp s\u1edbm c\xe1c t\xednh n\u0103ng m\u1edbi",enabled:!1,requiredTier:"master",category:"general",starCost:5,starDuration:72}};(0,t.useEffect)((()=>{const e=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"admin","featureFlags"),(e=>{if(e.exists()){const t=e.data().flags||{},n={...d};Object.keys(t).forEach((e=>{n[e]&&(n[e]={...n[e],...t[e]})})),a(n)}}),(e=>{console.error("Error listening to feature flags:",e)}));return()=>e()}),[]),(0,t.useEffect)((()=>{(async()=>{try{l(!0);const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","featureFlags"));if(e.exists()){const t=e.data().flags||{},n={...d};Object.keys(t).forEach((e=>{n[e]&&(n[e]={...n[e],...t[e]})})),a(n)}else await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","featureFlags"),{flags:d,updatedAt:new Date,updatedBy:"system"}),a(d)}catch(e){console.error("Error loading feature flags:",e),a(d)}finally{l(!1)}})()}),[]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o)return!1;if(!c)return!1;const n=i[e];if(!n)return!1;if(!n.enabled)return!1;if(!r){return m()}if(m())return!0;const a=t[e];return!!(a&&a.expiresAt>Date.now())||("master"===n.requiredTier||"diamond"===n.requiredTier?"master"===s||"sponsor"===s:"premium"===n.requiredTier?["premium","master","sponsor"].includes(s):"standard"!==n.requiredTier||["standard","premium","master","sponsor"].includes(s))},m=()=>window.location.pathname.startsWith("/admin")||"admin"===s,A={featureFlags:i,loading:o,hasFeatureAccess:h,isFeatureEnabled:e=>{const t=i[e];return!!t&&t.enabled},checkFeatureAccess:e=>{const t=i[e];if(!t)return{hasAccess:!1,reason:"feature_not_found",message:"T\xednh n\u0103ng kh\xf4ng t\u1ed3n t\u1ea1i"};if(!t.enabled)return{hasAccess:!1,reason:"feature_disabled",message:"T\xednh n\u0103ng hi\u1ec7n \u0111ang t\u1ea1m kh\xf3a"};return m()?{hasAccess:!0,reason:"admin_access",message:"Truy c\u1eadp v\u1edbi quy\u1ec1n admin"}:r?"master"!==t.requiredTier&&"diamond"!==t.requiredTier||"master"===s||"sponsor"===s?{hasAccess:!0,reason:"tier_access",message:"Truy c\u1eadp v\u1edbi g\xf3i th\xe0nh vi\xean"}:{hasAccess:!1,reason:"insufficient_tier",message:"T\xednh n\u0103ng n\xe0y y\xeau c\u1ea7u g\xf3i MASTER",currentTier:s,requiredTier:"master",featureName:t.name,featureDescription:t.description,starCost:t.starCost||5,starDuration:t.starDuration||24}:{hasAccess:!1,reason:"not_logged_in",message:"C\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y"}},updateFeatureFlag:async(e,t)=>{try{if(!m())throw new Error("Ch\u1ec9 admin m\u1edbi c\xf3 th\u1ec3 c\u1eadp nh\u1eadt feature flags");const n={...i,[e]:{...i[e],...t}};return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","featureFlags"),{flags:n,updatedAt:new Date,updatedBy:(null===r||void 0===r?void 0:r.email)||"admin"}),!0}catch(n){throw console.error("Error updating feature flag:",n),n}},updateMultipleFlags:async e=>{try{if(!m())throw new Error("Ch\u1ec9 admin m\u1edbi c\xf3 th\u1ec3 c\u1eadp nh\u1eadt feature flags");const t={...i};return Object.entries(e).forEach((e=>{let[n,r]=e;t[n]&&(t[n]={...t[n],...r})})),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","featureFlags"),{flags:t,updatedAt:new Date,updatedBy:(null===r||void 0===r?void 0:r.email)||"admin"}),!0}catch(t){throw console.error("Error updating multiple feature flags:",t),t}},getFeaturesByCategory:e=>Object.entries(i).filter((t=>{let[n,r]=t;return r.category===e})).reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{}),getUserAccessibleFeatures:()=>{const e=m();return r||e?Object.entries(i).filter((t=>{let[n,r]=t;return e||h(n)})).reduce(((e,t)=>{let[n,r]=t;return e[n]=r,e}),{}):{}},defaultFeatureFlags:d};return(0,At.jsx)($B.Provider,{value:A,children:n})}const JB=()=>{const{user:e,currentUser:n,userStars:r,subtractUserStars:s}=Aw(),[i,a]=(0,t.useState)({}),[o,l]=(0,t.useState)(!1),c=e||n;(0,t.useEffect)((()=>{null!==c&&void 0!==c&&c.uid&&u()}),[null===c||void 0===c?void 0:c.uid]);const u=async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"tempAccess",c.uid));if(e.exists()){const t=e.data(),n=Date.now(),r={};Object.entries(t).forEach((e=>{let[t,s]=e;s.expiresAt>n&&(r[t]=s)})),a(r),Object.keys(r).length!==Object.keys(t).length&&await(0,Hb.BN)((0,Hb.doc)(Qb.db,"tempAccess",c.uid),r)}else a({})}catch(e){console.error("Error loading temp access:",e)}};return{tempAccess:i,loading:o,purchaseStarAccess:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;if(null===c||void 0===c||!c.uid)throw new Error("User not authenticated");const o="true"===localStorage.getItem("adminFirebaseAuth"),d=localStorage.getItem("adminEmail");if(o&&d===rw){const t=Date.now()+60*n*60*1e3,r={...i,[e]:{purchasedAt:Date.now(),expiresAt:t,starCost:0,duration:n}};return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"tempAccess",c.uid),r),a(r),{success:!0,expiresAt:t}}if(r<t)throw new Error("Insufficient stars");l(!0);try{const r=Date.now()+60*n*60*1e3,o={...i,[e]:{purchasedAt:Date.now(),expiresAt:r,starCost:t,duration:n}};if(!await s(t,`Temporary access to ${e}`))throw new Error("Kh\xf4ng th\u1ec3 tr\u1eeb sao. Vui l\xf2ng ki\u1ec3m tra l\u1ea1i s\u1ed1 sao hi\u1ec7n t\u1ea1i.");return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"tempAccess",c.uid),o),a(o),await u(),{success:!0,expiresAt:r}}catch(h){throw console.error("Error purchasing star access:",h),h}finally{l(!1)}},hasStarAccess:e=>{const t=i[e];return t&&t.expiresAt>Date.now()},getAccessTimeRemaining:e=>{const t=i[e];return!t||t.expiresAt<=Date.now()?0:t.expiresAt-Date.now()},formatTimeRemaining:e=>`${Math.floor(e/36e5)}h ${Math.floor(e%36e5/6e4)}m`,loadTempAccess:u}};function ZB(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const eM=t.forwardRef(ZB);function tM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nM=t.forwardRef(tM);function rM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const sM=t.forwardRef(rM),iM={DURATION:{FAST:1500,NORMAL:3e3,SLOW:5e3,VERY_SLOW:8e3,MANUAL:0},ANIMATION:{FADE_OUT:300,SLIDE_IN:200},POSITION:{TOP_RIGHT:"top-4 right-4",TOP_LEFT:"top-4 left-4",TOP_CENTER:"top-4 left-1/2 transform -translate-x-1/2",BOTTOM_RIGHT:"bottom-4 right-4",BOTTOM_LEFT:"bottom-4 left-4",BOTTOM_CENTER:"bottom-4 left-1/2 transform -translate-x-1/2"},TYPE_DEFAULTS:{success:{duration:2e3,autoClose:!0},error:{duration:5e3,autoClose:!0},warning:{duration:4e3,autoClose:!0},info:{duration:3e3,autoClose:!0}},MAX_TOASTS:5,TOAST_SPACING:"mb-2"},aM=(e,t)=>{var n;return void 0!==t?t:(null===(n=iM.TYPE_DEFAULTS[e])||void 0===n?void 0:n.duration)||iM.DURATION.NORMAL},oM=(iM.DURATION.FAST,iM.POSITION.TOP_RIGHT,iM.DURATION.NORMAL,iM.POSITION.BOTTOM_CENTER,iM.DURATION.SLOW,iM.POSITION.TOP_CENTER,iM.DURATION.VERY_SLOW,iM.POSITION.TOP_CENTER,iM.DURATION.MANUAL,iM.POSITION.BOTTOM_CENTER,e=>{let{message:n,type:r="info",duration:s,onClose:i,id:a}=e;const[o,l]=(0,t.useState)(!0),c=aM(r,s),u=(e=>{var t;return!1!==(null===(t=iM.TYPE_DEFAULTS[e])||void 0===t?void 0:t.autoClose)})(r)&&c>0,d=a&&a.startsWith&&a.startsWith("countdown_");(0,t.useEffect)((()=>{if(!u)return;const e=setTimeout((()=>{l(!1),setTimeout(i,iM.ANIMATION.FADE_OUT)}),c);return()=>clearTimeout(e)}),[c,u,i]);const h=()=>{switch(r){case"success":return"text-green-800";case"warning":return"text-yellow-800";case"error":return"text-red-800";default:return"text-blue-800"}};return(0,At.jsx)("div",{className:"fixed bottom-10 left-[50%] translate-x-[-50%] z-50 transition-all duration-300 transform md:w-auto w-[95%]  "+(o?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:(0,At.jsx)("div",{className:`max-w-sm w-full border rounded-lg shadow-lg ${(()=>{switch(r){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}})()} ${d?"cursor-pointer hover:opacity-80 transition-opacity":""}`,onClick:d?()=>{d&&"undefined"!==typeof window&&window.skipCountdown&&window.skipCountdown()}:void 0,children:(0,At.jsx)("div",{className:"p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(r){case"success":return(0,At.jsx)(nM,{className:"h-5 w-5 text-green-400"});case"warning":return(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-400"});case"error":return(0,At.jsx)(jw,{className:"h-5 w-5 text-red-400"});default:return(0,At.jsx)(sM,{className:"h-5 w-5 text-blue-400"})}})()}),(0,At.jsxs)("div",{className:"ml-3 flex-1",children:[(0,At.jsx)("p",{className:`text-sm font-medium ${h()}`,children:n}),d&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Nh\u1ea5p v\xe0o \u0111\u1ec3 t\u1eaft \u0111\u1ebfm ng\u01b0\u1ee3c v\xe0 ",(0,At.jsx)("b",{className:"text-red-500",children:"tr\u1eeb \u0111i\u1ec3m ngay"})]}),(0,At.jsxs)("p",{className:"text-xs text-gray-500 mt-1 text-red-500",children:["(T\xednh n\u0103ng c\xf3 ",(0,At.jsx)("b",{children:"h\u1ea1n s\u1eed d\u1ee5ng 1 gi\u1edd"})," t\u1eeb khi tr\u1eeb sao)"]})]})]}),(0,At.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),l(!1),setTimeout(i,iM.ANIMATION.FADE_OUT)},className:`inline-flex ${h()} hover:opacity-75`,children:(0,At.jsx)(ky,{className:"h-5 w-5"})})})]})})})})});let lM=0;const cM=e=>{let{toasts:t,removeToast:n}=e;return(0,At.jsx)(At.Fragment,{children:t.map((e=>(0,At.jsx)(oM,{id:e.id,message:e.message,type:e.type,duration:e.duration,onClose:()=>n(e.id)},e.id)))})},uM=()=>{const[e,n]=(0,t.useState)([]);return{toasts:e,showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const r=(arguments.length>3?arguments[3]:void 0)||++lM,s=aM(t,arguments.length>2?arguments[2]:void 0),i={id:r,message:e,type:t,duration:s};return n((e=>{const t=[...e.filter((e=>e.id!==r)),i];return t.length>iM.MAX_TOASTS?t.slice(-iM.MAX_TOASTS):t})),r},updateToast:(e,t,r,s)=>{n((n=>n.map((n=>n.id===e?{...n,message:t,type:r||n.type,duration:s||n.duration}:n))))},removeToast:e=>{n("all"===e?[]:t=>t.filter((t=>t.id!==e)))}}},dM=e=>{let{isOpen:n,onClose:r,featureKey:s,featureName:i,starCost:a,starDuration:o=24,onPurchaseSuccess:l}=e;const{userStars:c}=Aw(),{purchaseStarAccess:u,loading:d}=JB(),{showToast:h}=uM(),[m,A]=(0,t.useState)(!1),g="true"===localStorage.getItem("adminFirebaseAuth"),p=localStorage.getItem("adminEmail"),f=g&&p===rw;if(!n)return null;const x=f||c>=a;return(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",children:(0,At.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg max-w-md w-full p-6 relative",children:[(0,At.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,At.jsx)(ky,{className:"h-6 w-6"})}),(0,At.jsxs)("div",{className:"text-center mb-6",children:[(0,At.jsx)("div",{className:"mx-auto w-16 h-16  rounded-full flex items-center justify-center mb-4",children:(0,At.jsx)(eM,{className:"h-8 w-8 text-green-400"})}),(0,At.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"M\u1edf Kh\xf3a T\xednh N\u0103ng"}),(0,At.jsxs)("p",{className:"text-gray-300",children:["S\u1eed d\u1ee5ng sao \u0111\u1ec3 truy c\u1eadp ",(0,At.jsx)("strong",{className:"text-white",children:i})," trong ",o," gi\u1edd"]})]}),(0,At.jsxs)("div",{className:"bg-green-500/20 border border-green-500 rounded-lg p-4 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-400"}),(0,At.jsx)("span",{className:"font-medium text-gray-200",children:"Chi ph\xed:"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:f?0:a}),(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-400 fill-current"})]})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(Iy,{className:"h-5 w-5 text-blue-400"}),(0,At.jsx)("span",{className:"font-medium text-gray-200",children:"Th\u1eddi h\u1ea1n:"})]}),(0,At.jsxs)("span",{className:"text-blue-400 font-medium",children:[o," gi\u1edd"]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"S\u1ed1 sao hi\u1ec7n t\u1ea1i:"}),(0,At.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,At.jsx)("span",{className:"text-lg font-bold "+(x?"text-green-400":"text-red-400"),children:c}),(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-400 fill-current"})]})]}),!x&&!f&&(0,At.jsx)("div",{className:"mt-3 p-3 bg-red-900/50 border border-red-700 rounded-lg",children:(0,At.jsxs)("p",{className:"text-red-300 text-sm",children:["\u26a0\ufe0f B\u1ea1n c\u1ea7n th\xeam ",(0,At.jsx)("strong",{className:"text-red-200",children:a-c})," sao \u0111\u1ec3 mua t\xednh n\u0103ng n\xe0y"]})}),f&&(0,At.jsx)("div",{className:"mt-3 p-3 bg-purple-900/50 border border-purple-700 rounded-lg",children:(0,At.jsx)("p",{className:"text-purple-300 text-sm",children:"\ud83d\udc51 Admin - Kh\xf4ng c\u1ea7n tr\u1ea3 sao \u0111\u1ec3 mua t\xednh n\u0103ng n\xe0y"})})]}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition-colors",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:async()=>{if(!f&&c<a)h("B\u1ea1n kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 mua t\xednh n\u0103ng n\xe0y","error");else{A(!0);try{const e=await u(s,a,o);e.success&&(h(`\u0110\xe3 mua th\xe0nh c\xf4ng! T\xednh n\u0103ng s\u1ebd ho\u1ea1t \u0111\u1ed9ng trong ${o}h`,"success"),l&&l(s,e),r())}catch(e){console.error("Purchase error:",e),h(e.message||"C\xf3 l\u1ed7i x\u1ea3y ra khi mua t\xednh n\u0103ng","error")}finally{A(!1)}}},disabled:!x||m||d,className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+(!x||m||d?"bg-gray-600 text-gray-400 cursor-not-allowed":"button-style"),children:m||d?(0,At.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,At.jsx)("span",{children:"\u0110ang x\u1eed l\xfd..."})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Tw,{className:"h-4 w-4 inline mr-1"}),f?"M\u1edf kh\xf3a mi\u1ec5n ph\xed":`\u0110\u1ed5i ${a} sao`]})})]}),(0,At.jsxs)("p",{className:"text-xs text-gray-400 text-center mt-4",children:["\ud83d\udca1 T\xednh n\u0103ng s\u1ebd t\u1ef1 \u0111\u1ed9ng h\u1ebft h\u1ea1n sau ",o," gi\u1edd. B\u1ea1n c\xf3 th\u1ec3 mua l\u1ea1i b\u1ea5t c\u1ee9 l\xfac n\xe0o."]})]})})},hM=e=>{let{isOpen:n,onClose:r,featureName:s="t\xednh n\u0103ng n\xe0y",requiredTier:i="Master",description:a="T\xednh n\u0103ng n\xe0y ch\u1ec9 d\xe0nh cho th\xe0nh vi\xean Master.",featureKey:o=null,starCost:l=0,starDuration:c=24,onPurchaseSuccess:u=null}=e;const{membershipTier:d,membershipTiers:h,userStars:m}=Aw(),[A,g]=(0,t.useState)(!1);if(!n)return null;const p=h[d]||h.basic,f=h[i.toLowerCase()]||h.master,x=o&&l>0,v=(()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return!(!e||t!==rw)||m>=l})();return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(dM,{isOpen:A,onClose:()=>g(!1),featureKey:o,featureName:s,starCost:l,starDuration:c,onPurchaseSuccess:(e,t)=>{g(!1),r(),u&&u(e,t)}}),(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,At.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 border border-gray-600",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-2xl",children:f.icon}),(0,At.jsxs)("h3",{className:"text-xl font-bold text-white",children:["N\xe2ng C\u1ea5p ",i]})]}),(0,At.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:(0,At.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-6xl mb-2",children:"\ud83d\udd12"}),(0,At.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"T\xednh N\u0103ng Cao C\u1ea5p"}),(0,At.jsx)("p",{className:"text-gray-300 text-sm",children:a})]}),(0,At.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 space-y-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-gray-400 text-sm",children:"G\xf3i hi\u1ec7n t\u1ea1i:"}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-lg",children:p.icon}),(0,At.jsx)("span",{className:"text-gray-400 font-semibold",children:p.label})]})]}),(0,At.jsx)("div",{className:"flex items-center justify-center",children:(0,At.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-gray-400 text-sm",children:"C\u1ea7n n\xe2ng c\u1ea5p:"}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-lg",children:f.icon}),(0,At.jsx)("span",{className:"text-yellow-400 font-semibold",children:f.label})]})]})]}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("h5",{className:"text-white font-semibold text-sm",children:["L\u1ee3i \xedch g\xf3i ",i,":"]}),(0,At.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1",children:[(0,At.jsxs)("li",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),"Truy c\u1eadp t\u1ea5t c\u1ea3 t\xednh n\u0103ng cao c\u1ea5p"]}),(0,At.jsxs)("li",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),f.maxStars," sao m\u1ed7i ","daily"===f.resetPeriod?"ng\xe0y":"th\xe1ng"]}),(0,At.jsxs)("li",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),"H\u1ed7 tr\u1ee3 \u01b0u ti\xean t\u1eeb admin"]}),(0,At.jsxs)("li",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),"Truy c\u1eadp s\u1edbm t\xednh n\u0103ng m\u1edbi"]})]})]})]}),(0,At.jsxs)("div",{className:"space-y-3 mt-6",children:[x&&(0,At.jsxs)("button",{onClick:()=>g(!0),disabled:!v,className:"w-full px-4 py-2 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 "+(v?"button-style":"bg-gray-600 text-gray-400 cursor-not-allowed"),children:[(0,At.jsx)(Tw,{className:"h-5 w-5"}),v?`\u0110\u1ed5i ${l} sao (${c}h)`:`C\u1ea7n ${l} sao`]}),(0,At.jsxs)("div",{className:"flex gap-3",children:[(0,At.jsx)("button",{onClick:r,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors",children:"\u0110\u1ec3 sau"}),(0,At.jsx)("button",{onClick:()=>{r(),window.open("mailto:admin@huyenhoc.com?subject=N\xe2ng c\u1ea5p g\xf3i Master","_blank")},className:"flex-1 px-4 py-2 bg-yellow-400 text-black rounded font-semibold",children:"N\xe2ng C\u1ea5p"})]})]})]})})]})},mM=e=>{let{featureKey:n,className:r=""}=e;const{hasStarAccess:s,getAccessTimeRemaining:i,formatTimeRemaining:a}=JB(),[o,l]=(0,t.useState)(0);return(0,t.useEffect)((()=>{if(!s(n))return;const e=()=>{const e=i(n);l(e)};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[n,s,i]),!s(n)||o<=0?null:(0,At.jsxs)("div",{className:`flex items-center space-x-1 bg-orange-100 px-2 py-1 rounded-full text-xs ${r}`,children:[(0,At.jsx)(Tw,{className:"h-3 w-3 text-yellow-500 fill-current"}),(0,At.jsx)(Iy,{className:"h-3 w-3 text-orange-600"}),(0,At.jsx)("span",{className:"text-orange-800 font-medium",children:a(o)})]})},AM=n.p+"static/media/HuyenKhongDaiQuai.aae981c2575ef965a46d.png",gM=n.p+"static/media/HuyenKhongDaiQuai2.b731b6c75865036d57d7.png",pM=n.p+"static/media/24SonHuongMini.e3ad8826eb3622573031.png",{h4:fM,dS:xM,Rx:vM,Gc:yM,VT:bM,hh:wM,J4:NM}=eC;NM||console.error("huyenKhongQuai data is missing or undefined");const jM=()=>{var e,n,r,s;Gb("lakinh");const{countdownInfo:i,cancelCountdown:a,skipCountdownAndDeductNow:o}=pw("lakinh"),{userStars:l,currentUser:c,isEmailVerified:u,membershipTier:d}=Aw(),h=c&&u,{hasFeatureAccess:m,checkFeatureAccess:A,loadTempAccess:g}=(()=>{const{hasFeatureAccess:e,checkFeatureAccess:t,...n}=XB(),{tempAccess:r,hasStarAccess:s,loadTempAccess:i,...a}=JB();return{...n,...a,tempAccess:r,hasFeatureAccess:t=>e(t,r),checkFeatureAccess:e=>{const n=t(e);return s(e)?{...n,hasAccess:!0,reason:"star_access",message:"Truy c\u1eadp b\u1eb1ng sao"}:n},loadTempAccess:i}})(),{profile:p}=dj(),{videoRef:f,isCameraActive:x,startCamera:v,stopCamera:y,toggleCamera:b}=gS(),{hasPermission:w}=QT(),[N,j]=(0,t.useState)(180),[C,T]=(0,t.useState)(!1),[S,_]=(0,t.useState)(""),[E,B]=(0,t.useState)(""),[M,k]=(0,t.useState)(null),[L,I]=(0,t.useState)([]),[D,P]=(0,t.useState)(!1),[F,U]=(0,t.useState)(!1),[R,O]=(0,t.useState)(!1),[H,Q]=(0,t.useState)(!1),[z,V]=(0,t.useState)(!1),[K,G]=(0,t.useState)(!1),[q,W]=(0,t.useState)(!1),[$,X]=(0,t.useState)(10),Y=(0,t.useRef)(null),J=(0,t.useRef)(0),Z=(0,t.useRef)(0),[ee,te]=(0,t.useState)(2),[ne,re]=(0,t.useState)(!0),se=(0,t.useRef)(null),ie=(0,t.useRef)(null),[ae,oe]=(0,t.useState)(null),[le,ce]=(0,t.useState)(!1),[ue,de]=(0,t.useState)(AM),[he,me]=(0,t.useState)(!1),[Ae,ge]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(!1),[xe,ve]=(0,t.useState)(!1),[ye,be]=(0,t.useState)(!1),[we,Ne]=(0,t.useState)({}),[je,Ce]=(0,t.useState)(!1),Te={north:0,northeast:45,east:90,southeast:135,south:180,southwest:225,west:270,northwest:315};(0,t.useEffect)((()=>{if(p&&p.homeDirection&&!he&&c){const e=mj(c.uid,"lakinh"),t=Te[p.homeDirection];if(void 0!==t){j(t),B(Me(t).name);const n=Be(ke(t));I(n?[`T\u1ecda ${n} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[]),me(!0),e||(ge(!0),Aj(c.uid,"lakinh"),setTimeout((()=>{ge(!1)}),5e3))}}}),[p,he,c]),(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&i.isCountingDown&&o()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[i.isCountingDown,o]),(0,t.useEffect)((()=>{pe&&!m("lakinh_gps_integration")&&(fe(!1),Ce(!0),setTimeout((()=>Ce(!1)),3e3))}),[pe,m]);const Se=e=>yM[(5-(5-(e-2022))%9+9+0)%9],_e=e=>{let t=e%360;return t<0&&(t+=360),t},Ee=e=>{const t=_e(e);for(const n of xM)for(const e of n.ranges)if(t>=e.start&&t<=e.end)return n.name;return null},Be=e=>{const t=_e(e),n=(new Date).getFullYear(),r=sb(n).split(" ")[1];let s=null;for(const a of vM){for(const e of a.ranges)if(t>=e.start&&t<=e.end){s=a.name;break}if(s)break}if(!s)return null;const i=wM.find((e=>e.yearChi.includes(r)));return i&&s===i.toa?i.toa:null},Me=e=>{var t,n,r,s;const i=_e(e),a=_e(i+7.5),o=Math.floor(a/15),l=fM[(o%24+24)%24];if(!l)return{name:"?",nguyenLong:"?",thaiCuc:"?",toaDo:"?",huong:"?"};const c=null===(t=l.infos.find((e=>e.toaDo)))||void 0===t?void 0:t.toaDo[0],u=null===(n=l.infos.find((e=>e.nguyenLong)))||void 0===n?void 0:n.nguyenLong,d=null===(r=l.infos.find((e=>e.thaiCuc)))||void 0===r?void 0:r.thaiCuc,h=null===(s=l.infos.find((e=>e.huong)))||void 0===s?void 0:s.huong;return{name:l.name,nguyenLong:u||"?",thaiCuc:d||"?",toaDo:c?`${c.start}\xb0 - ${c.end}\xb0`:"?",huong:h||"?"}},ke=e=>e+180,Le=_e(N),Ie=Me(N),De=ke(N),Pe=_e(De),Fe=Me(De),Ue=e=>{const t=_e(e),n=(new Date).getFullYear(),r=Se(n);if("Trung Cung"===r.name)return!0;for(const s of r.ranges)if(null!==s.start&&null!==s.end)if(s.start>s.end){if(t>=s.start||t<=s.end)return!0}else if(t>=s.start&&t<=s.end)return!0;return!1},Re=e=>{const t=(e=>{const t=Se(e);return t&&t.ranges?t.ranges.map((e=>null===e.start||null===e.end?null:{start:e.start,end:e.end,name:t.name})).filter(Boolean):[]})(e),n=e===(new Date).getFullYear();return{name:Se(e).name,ranges:t,isCurrentYear:n}},Oe=(e,t)=>{const n=sb(e).split(" ")[1],r=bM[n];if(!r)return null;const{thaiTue:s,tuePha:i}=r;return t&&s.includes(t)?{tuePha:`${i[0]} - ${i[1]}`}:null};(0,t.useEffect)((()=>{const e=Ee(N),t=L.length>0&&L.some((e=>{const t=Be(De);return t&&e.includes(t)})),n=Ue(De)||Ue(N),r=(new Date).getFullYear(),s=Ie.name,i=Oe(r,s);K&&(e||t||n||i)?(W(!0),P(!0),X(10),se.current&&clearTimeout(se.current),ie.current&&clearInterval(ie.current),ie.current=setInterval((()=>{X((e=>e<=1?(clearInterval(ie.current),0):e-1))}),2e3),se.current=setTimeout((()=>{W(!1),setTimeout((()=>P(!1)),300)}),2e4)):(W(!1),setTimeout((()=>P(!1)),300),ie.current&&clearInterval(ie.current))}),[N,L,De,K,Ie.name]),(0,t.useEffect)((()=>{const e=(e=>{if(void 0===e||null===e)return null;const t=_e(e);if(!NM||!Array.isArray(NM))return console.error("huyenKhongQuai is not properly initialized"),null;for(const a of NM){if(!a||"object"!==typeof a){console.error("Invalid quai data:",a);continue}const{toaDo:e}=a;var n,r;if(e&&"object"===typeof e){if(void 0!==e.start&&void 0!==e.end)if(e.start>e.end){if(t>=e.start||t<=e.end)return{name:a.name,khi:null===(n=a.quai)||void 0===n?void 0:n.khi,van:null===(r=a.quai)||void 0===r?void 0:r.van,canChi:a.canChi,fullName:a.fullName}}else if(t>=e.start&&t<=e.end){var s,i;return{name:a.name,khi:null===(s=a.quai)||void 0===s?void 0:s.khi,van:null===(i=a.quai)||void 0===i?void 0:i.van,canChi:a.canChi,fullName:a.fullName}}}else console.error("Invalid toaDo data:",e)}return null})(N);oe(e)}),[N]),(0,t.useEffect)((()=>()=>{se.current&&clearTimeout(se.current),ie.current&&clearInterval(ie.current)}),[]);const He=e=>{T(!0);const t="touchstart"===e.type?e.touches[0].clientX:e.clientX,n="touchstart"===e.type?e.touches[0].clientY:e.clientY,r=Y.current.getBoundingClientRect(),s=r.left+r.width/2,i=r.top+r.height/2;Z.current=Math.atan2(n-i,t-s)*(180/Math.PI),J.current=N},Qe=e=>{if(!C)return;const t="touchmove"===e.type?e.touches[0].clientX:e.clientX,n="touchmove"===e.type?e.touches[0].clientY:e.clientY,r=Y.current.getBoundingClientRect(),s=r.left+r.width/2,i=r.top+r.height/2;let a=Math.atan2(n-i,t-s)*(180/Math.PI)-Z.current;a>180?a-=360:a<-180&&(a+=360);let o=J.current+.25*a*-1;o=(o%360+360)%360,j(o)},ze=()=>{if(C){T(!1);const e=Be(De);I(e?[`T\u1ecda ${e} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[])}};(0,t.useEffect)((()=>(C&&(window.addEventListener("mousemove",Qe),window.addEventListener("mouseup",ze),window.addEventListener("touchmove",Qe,{passive:!1}),window.addEventListener("touchend",ze),window.addEventListener("touchcancel",ze)),()=>{window.removeEventListener("mousemove",Qe),window.removeEventListener("mouseup",ze),window.removeEventListener("touchmove",Qe),window.removeEventListener("touchend",ze),window.removeEventListener("touchcancel",ze)})),[C]);const Ve=e=>{if(null===e)return null;for(const t of AS)for(const n of t.subDirections)for(const r of n.degreeRanges)if(e>=r.start&&e<=r.end)return{mainDirection:t,subDirection:n};return null};(0,t.useEffect)((()=>{const e=Me(N);e&&e.name&&B(e.name)}),[N]);const Ke=e=>{de(e),ce(!1)},Ge=(e,t)=>{const n=A(e);n.hasAccess?t():"insufficient_tier"===n.reason?(Ne({featureName:n.featureName,requiredTier:n.requiredTier,description:n.featureDescription,currentTier:n.currentTier,featureKey:e,starCost:n.starCost,starDuration:n.starDuration,callback:t}),be(!0)):alert(n.message)};if((0,t.useEffect)((()=>{var e;return null===(e=document.getElementById("topPage"))||void 0===e||e.scrollIntoView({behavior:"smooth"}),()=>{i.isCountingDown&&a()}}),[i.isCountingDown,a]),h&&l<=0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||t!==rw)return(0,At.jsx)(Sw,{pageName:"La Kinh"})}return(0,At.jsxs)("div",{className:"relative w-full h-full",children:[(0,At.jsx)("div",{className:"fixed z-50 right-0 top-0 h-full w-full overflow-auto bg-slate-950/90 text-white shadow-lg transform transition-transform duration-300 ease-in-out "+(le?"translate-x-0":"translate-x-full"),children:(0,At.jsx)("div",{className:"p-4",children:(0,At.jsxs)("div",{className:"space-y-4 px-10 max-w-[400px] mx-auto",children:[(0,At.jsx)("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Ke(pM),children:(0,At.jsx)("img",{src:pM,alt:"HaiBonSonHuongMini",className:"w-full h-auto"})}),(0,At.jsx)("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Ke(AM),children:(0,At.jsx)("img",{src:AM,alt:"HuyenKhongDaiQuai",className:"w-full h-auto"})}),(0,At.jsx)("div",{className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>Ke(gM),children:(0,At.jsx)("img",{src:gM,alt:"HuyenKhongDaiQuaiFull",className:"w-full h-auto"})})]})})}),Ae&&(0,At.jsxs)("div",{className:"fixed w-full md:w-auto top-[70px] left-1/2 transform -translate-x-1/2 z-50 bg-green-600/90 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-3",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("span",{className:"text-sm font-medium",children:"\u0110\xe3 t\u1ef1 \u0111\u1ed9ng thi\u1ebft l\u1eadp h\u01b0\u1edbng nh\xe0 t\u1eeb th\xf4ng tin c\xe1 nh\xe2n"})}),(0,At.jsx)("button",{onClick:()=>ge(!1),className:"text-white hover:text-gray-200",children:(0,At.jsx)(ky,{className:"h-4 w-4"})})]}),je&&(0,At.jsxs)("div",{className:"fixed w-full md:w-auto top-[70px] left-1/2 transform -translate-x-1/2 z-50 bg-orange-600/90 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-3",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("span",{className:"text-sm font-medium",children:"\u23f0 Th\u1eddi gian s\u1eed d\u1ee5ng GPS \u0111\xe3 h\u1ebft h\u1ea1n"})}),(0,At.jsx)("button",{onClick:()=>Ce(!1),className:"text-white hover:text-gray-200",children:(0,At.jsx)(ky,{className:"h-4 w-4"})})]}),(0,At.jsxs)("div",{className:"relative w-full h-full z-20",children:[pe&&(0,At.jsxs)("div",{className:"fixed inset-0 z-40 bg-black/50 flex items-center justify-center h-full",children:[(0,At.jsx)("div",{className:"absolute top-[72px] left-[50%] translate-x-[-50%] bg-red-600/80 z-50 p-2 rounded-md",children:(0,At.jsx)("button",{onClick:()=>fe(!1),className:"text-white font-bold",children:"\u0110\xf3ng GPS"})}),(0,At.jsx)(VB,{onHeadingChange:j})]}),xe&&(0,At.jsxs)("div",{className:"fixed inset-0 z-50 bg-black flex items-center justify-center",children:[(0,At.jsx)("div",{className:"absolute top-[164px] left-2 bg-red-600/80 z-50 px-3 py-1 rounded-md",children:(0,At.jsx)("button",{onClick:()=>ve(!1),className:"text-white font-bold",children:"T\u1eaft"})}),(0,At.jsx)(WB,{initialHeading:(null===ue||void 0===ue||null===(e=ue.toaDo)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.start)||null,rotation:N})]}),x&&(0,At.jsx)("video",{ref:f,playsInline:!0,autoPlay:!0,muted:!0,onClick:b,className:"w-full h-full object-cover cursor-pointer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",zIndex:20}}),(0,At.jsx)("div",{className:kj+" relative z-30",style:{},children:(0,At.jsx)("div",{className:Lj+" relative z-30",children:(0,At.jsxs)("div",{className:Fj,children:[(0,At.jsxs)("div",{className:Uj,children:[(0,At.jsxs)("div",{className:"flex flex-col gap-4 fixed z-30 top-[180px] md:top-[80px] left-2 md:left-[30px] "+(x?"opacity-0":"opacity-100"),children:[(0,At.jsx)("button",{onClick:()=>O(!0),className:`${Kj.ZOOM} relative`,children:(0,At.jsx)(XC,{className:Wj})}),(0,At.jsx)("button",{onClick:()=>{re((e=>!e)),te((e=>1===e?2:1))},className:`${Kj.ZOOM}`,children:ne?(0,At.jsx)(JC,{className:Wj}):(0,At.jsx)(eT,{className:Wj})}),(0,At.jsx)("button",{onClick:()=>U(!0),className:`${Kj.ZOOM}`,children:(0,At.jsx)(nT,{className:Wj})})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-4 fixed z-30 top-[180px] md:top-[80px] right-2 md:right-[30px] "+(x?"opacity-0":"opacity-100"),children:[(0,At.jsx)("button",{onClick:()=>G((e=>!e)),className:`${Kj.ZOOM}`,children:K?(0,At.jsx)(sT,{className:Wj}):(0,At.jsx)(aT,{className:Wj})}),(0,At.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,At.jsx)(mM,{featureKey:"lakinh_advanced_compass",className:"self-start"}),(0,At.jsxs)("button",{onClick:()=>Ge("lakinh_advanced_compass",(()=>Q(!0))),className:`${m("lakinh_advanced_compass")?Kj.ZOOM:"bg-gray-500/80"} text-white p-2 rounded-md flex items-center gap-2 transition-colors`,children:[(0,At.jsx)(lT,{className:Wj}),!m("lakinh_advanced_compass")&&(0,At.jsx)("span",{className:"text-sm text-yellow-500 rounded",children:(0,At.jsx)(WC,{className:"h-4 w-4"})})]}),(0,At.jsxs)("button",{onClick:()=>Ge("lakinh_advanced_compass",(()=>V(!0))),className:`${m("lakinh_advanced_compass")?Kj.ZOOM:"bg-gray-500/80"} text-white p-2 rounded-md flex items-center gap-2 transition-colors`,children:[(0,At.jsx)(uT,{className:Wj}),!m("lakinh_advanced_compass")&&(0,At.jsx)("span",{className:"text-sm text-yellow-500 rounded",children:(0,At.jsx)(WC,{className:"h-4 w-4"})})]})]}),(0,At.jsx)("button",{onClick:()=>ce(!le),className:`${Kj.ZOOM}`,children:le?(0,At.jsx)(ky,{className:Wj}):(0,At.jsx)(hT,{className:Wj})})]}),(0,At.jsxs)("div",{className:"flex flex-col gap-4 fixed z-30 bottom-[24px] md:bottom-[10px] left-[200px] "+(x?"opacity-0":"opacity-100"),children:[(0,At.jsx)(mM,{featureKey:"lakinh_gps_integration",className:"self-start"}),(0,At.jsxs)("button",{onClick:()=>Ge("lakinh_gps_integration",(()=>fe(!pe))),className:(m("lakinh_gps_integration")?"button-style":"bg-gray-500/80")+" text-white p-2 rounded-md flex items-center gap-2 transition-colors",children:[(0,At.jsx)(AT,{className:"h-4 w-4"}),"M\u1edf GPS",!m("lakinh_gps_integration")&&(0,At.jsx)("span",{className:"text-sm text-yellow-500 rounded",children:(0,At.jsx)(WC,{className:"h-4 w-4"})})]})]}),(0,At.jsxs)("div",{className:"flex flex-col items-center gap-4 fixed z-30 bottom-[24px] md:bottom-[10px] left-2 "+(x?"opacity-0":"opacity-100"),children:[(0,At.jsx)(mM,{featureKey:"lakinh_camera_activation",className:"self-start"}),(0,At.jsxs)("button",{onClick:()=>Ge("lakinh_camera_activation",(()=>ve(!xe))),className:(m("lakinh_camera_activation")?"button-style":"bg-gray-500/80")+" text-white p-2 rounded-md flex items-center gap-2 transition-colors",children:[(0,At.jsx)(pT,{className:"h-4 w-4"}),"K\xedch Ho\u1ea1t Cung",!m("lakinh_camera_activation")&&(0,At.jsx)("span",{className:"text-sm text-yellow-500 rounded",children:(0,At.jsx)(WC,{className:"h-4 w-4"})})]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-5 justify-between pb-2 ",children:[(0,At.jsxs)("div",{className:"flex flex-col items-center gap-2 justify-center flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("div",{className:"pointer-events-none w-8 mr-2 hidden",style:{transformOrigin:"center center",transform:`rotate(${180-N}deg)`},children:(0,At.jsx)("img",{src:GC,alt:"Compass",className:"w-full h-full object-contain"})}),(0,At.jsxs)("div",{className:"text-gray-400 text-sm flex items-center gap-1",children:[w("camera")&&(0,At.jsx)("span",{className:"text-green-400",children:"\u2713"}),"Camera"]}),(0,At.jsx)("div",{className:"flex items-center gap-2",children:x?(0,At.jsx)(xT,{className:Wj,onClick:y}):(0,At.jsx)("div",{className:"flex flex-col items-center gap-1",children:(0,At.jsx)(pT,{className:Wj,onClick:v})})})]}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsxs)("div",{className:"text-xl text-green-400 w-[105px]",children:[Math.round(Le),"\xb0 ",(0,At.jsx)("span",{className:"text-xl",children:Ie.huong})]}),(0,At.jsxs)("div",{className:"text-xl text-white w-[105px]",children:[Math.round(Pe),"\xb0 ",(0,At.jsx)("span",{className:"text-xl",children:Fe.huong})]})]})]}),(0,At.jsx)("div",{className:"flex items-center flex-1 justify-center",children:(0,At.jsx)(zT,{})})]}),(0,At.jsx)("div",{className:""+(x?"line-style-camera":"line-style")}),(0,At.jsx)("div",{className:"h-2"}),(0,At.jsxs)("div",{className:"relative z-20",children:[(0,At.jsxs)("div",{className:"text-gray-600 text-xs text-center mb-2",children:["N\u0103m ",(null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()," Ng\u0169 Ho\xe0ng t\u1ea1i ",Se((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()).name]}),ue===gM||ue===AM&&ae&&(0,At.jsxs)("div",{className:"text-xs flex gap-2 items-center font-bold justify-center my-1",children:[(0,At.jsx)("span",{className:"text-xs text-gray-500 hidden",children:"Qu\u1ebb:"}),(0,At.jsx)("span",{className:"text-purple-400",children:ae.fullName}),(0,At.jsxs)("span",{className:"text-white",children:[ae.khi," - ",ae.van]}),(0,At.jsx)("span",{className:"text-purple-100",children:ae.canChi})]}),(0,At.jsxs)("div",{className:Rj,children:[(0,At.jsx)("span",{className:"text-xs text-gray-500",children:"H\u01b0\u1edbng:"})," ",Ie.name,(0,At.jsxs)("span",{className:Hj,children:["(",Ie.toaDo,")"]}),(0,At.jsxs)("span",{className:"text-yellow-500 hidden",children:[" ",Ie.huong]}),(0,At.jsxs)("span",{className:"hidden",children:[" ",Ie.nguyenLong," (",Ie.thaiCuc,")"]})]}),(0,At.jsxs)("div",{className:Oj,children:[(0,At.jsx)("span",{className:"text-xs text-gray-500",children:"T\u1ecda:"})," ",Fe.name,(0,At.jsxs)("span",{className:Hj,children:["(",Fe.toaDo,")"]}),(0,At.jsxs)("span",{className:"text-yellow-500 hidden",children:[" ",Fe.huong]}),(0,At.jsxs)("span",{className:"hidden",children:[" ",Fe.nguyenLong," (",Fe.thaiCuc,")"]})]})]})]}),(0,At.jsx)("div",{className:(x?"translate-y-[160px]":"translate-y-[0px]")+" transition-all duration-300",children:(0,At.jsxs)("div",{className:Qj+" relative z-30",ref:Y,onMouseDown:He,onTouchStart:He,children:[(0,At.jsx)("div",{style:{transform:`scale(${ee}) ${ne?"translateY(27%)":""}`},children:(0,At.jsx)("img",{src:ue,alt:"Huy\u1ec1n Kh\xf4ng \u0110\u1ea1i Qu\xe1i",className:"object-contain select-none rounded-full shadow-lakinh",style:{transform:`rotate(${180-N}deg)`,transition:C?"none":"transform 0.3s ease"},draggable:"false"})}),(0,At.jsx)("div",{className:"absolute w-1 h-4 bg-green-500 pointer-events-none",style:{top:"20px",left:"50%",transform:"translateX(-50%)",transformOrigin:"bottom center"}}),(0,At.jsx)("div",{className:"absolute w-2 h-2 bg-white pointer-events-none rounded-full",style:{bottom:""+(ne?"-100px":"155px"),left:"50%",transform:"translateX(-50%)",transformOrigin:"bottom center"}})]})}),D&&K&&(0,At.jsxs)("div",{className:`${Ij} transition-opacity duration-300 ${q?"opacity-100":"opacity-0"}`,children:[(0,At.jsx)("div",{className:"absolute top-2 right-2",children:(0,At.jsx)("button",{onClick:()=>P(!1),className:"text-white md:hover:text-yellow-500",children:(0,At.jsx)(ky,{className:"h-5 w-5"})})}),(0,At.jsx)("div",{className:"absolute top-0 left-0 w-full h-0.5 bg-red-900/90",children:(0,At.jsx)("div",{className:"h-full bg-yellow-500 transition-all duration-1000",style:{width:$/10*100+"%"}})}),(0,At.jsxs)("div",{className:"text-white text-sm text-center hidden",children:[$,"s"]}),L.length>0&&L.map(((e,t)=>{const n=Be(De);return n&&e.includes(n)?(0,At.jsxs)("div",{className:Dj,children:[(0,At.jsx)("span",{className:"text-white font-bold",children:"Tam S\xe1t"}),(0,At.jsx)("span",{className:"text-red-400 font-bold",dangerouslySetInnerHTML:{__html:e}})]},t):null})),(Ue(De)||Ue(N))&&(0,At.jsxs)("div",{className:Dj,children:[(0,At.jsx)("span",{className:"text-white font-bold",children:"Ng\u0169 Ho\xe0ng"}),(0,At.jsxs)("span",{className:"text-red-400 font-bold",children:[Ue(N)?"H\u01b0\u1edbng "+Re((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()).name:"",Ue(De)?" T\u1ecda "+Re((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()).name:""]}),(0,At.jsxs)("span",{className:"text-yellow-400 font-bold",children:["N\u0103m ",(null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()," - ",sb((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear())]})]}),(null===(r=Oe((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear(),Ie.name))||void 0===r?void 0:r.tuePha)&&(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,At.jsx)("span",{className:"font-bold text-white",children:"Tu\u1ebf Ph\xe1"}),(0,At.jsx)("span",{className:"text-red-400 font-bold",children:"T\u1ecda"}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:null===(s=Oe((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear(),Ie.name))||void 0===s?void 0:s.tuePha}),(0,At.jsxs)("span",{className:"text-white font-bold",children:["N\u0103m ",(null===M||void 0===M?void 0:M.year)||(new Date).getFullYear()," - ",sb((null===M||void 0===M?void 0:M.year)||(new Date).getFullYear())]})]})}),(null===M||void 0===M?void 0:M.year)&&F&&M.year!==(new Date).getFullYear()&&(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"flex gap-2 text-xs",children:[(0,At.jsx)("span",{className:"text-white font-bold",children:"Tu\u1ebf Ph\xe1:"}),(0,At.jsx)("span",{className:"text-red-400 font-bold",children:"T\u1ecda"}),(0,At.jsx)("span",{className:"text-yellow-400 font-bold",children:(()=>{const e=M.year,t=sb(e).split(" ")[1],n=bM[t];return n?`${n.tuePha[0]} - ${n.tuePha[1]}`:"-"})()}),(0,At.jsxs)("span",{className:"text-white font-bold",children:["N\u0103m ",M.year," - ",sb(M.year)]})]})}),Ee(N)&&(0,At.jsxs)("div",{className:Dj,children:[(0,At.jsx)("span",{className:"text-white font-bold",children:"Kh\xf4ng v\u1ecb"}),(0,At.jsx)("span",{className:"text-red-400 font-bold",children:"H\u01b0\u1edbng"}),(0,At.jsx)("span",{className:Pj,children:Ee(N)})]})]}),(0,At.jsx)(YN,{isOpen:R,onClose:()=>O(!1),title:"",children:(0,At.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 items-center",children:[(0,At.jsx)("div",{className:"text-white text-sm flex gap-2",children:(0,At.jsxs)("select",{value:E,onChange:e=>{const t=e.target.value;if(B(t),t){var n;const e=fM.find((e=>e.name===t)),r=null===e||void 0===e||null===(n=e.infos.find((e=>e.toaDo)))||void 0===n?void 0:n.toaDo[0];if(r){j(r.start);const e=Be(ke(r.start));I(e?[`T\u1ecda ${e} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[])}}},className:"px-2 py-1 border rounded flex-1 text-gray-700 h-10",children:[(0,At.jsx)("option",{value:"",children:"-- Ch\u1ecdn h\u01b0\u1edbng --"}),fM.map((e=>(0,At.jsx)("option",{value:e.name,children:e.name},e.name)))]})}),(0,At.jsxs)("div",{className:qj,children:[(0,At.jsx)("input",{type:"number",value:S,onChange:e=>{_(e.target.value)},placeholder:"",className:Gj}),(0,At.jsx)("button",{onClick:()=>{const e=parseFloat(S);if(!isNaN(e)){j(e),B(Me(e).name);const t=Be(ke(e));I(t?[`T\u1ecda ${t} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[])}},className:Kj.PRIMARY,children:"Ok"})]})]}),(0,At.jsx)("div",{className:zj,children:[-15,-5,5,15].map((e=>{const t=e<0?mt:yT;return(0,At.jsxs)("button",{onClick:()=>(e=>{const t=N+e;j(t),B(Me(t).name);const n=Be(ke(t));I(n?[`T\u1ecda ${n} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[])})(e),className:Kj.SECONDARY,children:[e<0&&(0,At.jsx)(t,{className:Wj}),Math.abs(e),"\xb0",e>0&&(0,At.jsx)(t,{className:Wj})]},e)}))}),(0,At.jsx)("div",{className:Vj,children:[{label:"\u0110",angle:90,name:"\u0110\xf4ng"},{label:"T",angle:270,name:"T\xe2y"},{label:"N",angle:180,name:"Nam"},{label:"B",angle:0,name:"B\u1eafc"},{label:"\u0110B",angle:45,name:"\u0110\xf4ng B\u1eafc"},{label:"TN",angle:225,name:"T\xe2y Nam"},{label:"TB",angle:315,name:"T\xe2y B\u1eafc"},{label:"\u0110N",angle:135,name:"\u0110\xf4ng Nam"}].map((e=>{let{label:t,angle:n,name:r}=e;return(0,At.jsx)("button",{className:Kj.PRIMARY,onClick:()=>{j(n),B(r);const e=Be(ke(n));I(e?[`T\u1ecda ${e} <span class="text-yellow-400"> - N\u0103m ${sb((new Date).getFullYear())}</span>`]:[])},children:t},r)}))})]})}),(0,At.jsx)(YN,{isOpen:F,onClose:()=>U(!1),title:"",children:(0,At.jsx)(wT,{onDateChange:e=>{k(e),I(e.tamSat||[]);const t=e.year||(new Date).getFullYear();Oe(t,Ie.name)&&(P(!0),W(!0),X(10),se.current&&clearTimeout(se.current),ie.current&&clearInterval(ie.current),ie.current=setInterval((()=>{X((e=>e<=1?(clearInterval(ie.current),0):e-1))}),1e3),se.current=setTimeout((()=>{W(!1),setTimeout((()=>P(!1)),300)}),1e4))}})}),(0,At.jsx)(YN,{isOpen:H,onClose:()=>Q(!1),title:"",children:(0,At.jsx)(JT,{rotation:N})}),(0,At.jsx)(YN,{isOpen:z,onClose:()=>V(!1),title:"",children:(0,At.jsx)(mS,{rotation:N})}),Ve(N)&&(0,At.jsxs)("div",{className:"text-white text-xs mt-2 p-2 bg-gray-800 rounded md:fixed md:top-2 md:right-2 hidden",children:[(0,At.jsx)("div",{className:"font-bold",children:Ve(N).mainDirection.name}),(0,At.jsx)("div",{className:"text-yellow-400",children:Ve(N).subDirection.name}),(0,At.jsxs)("div",{className:"text-gray-400 text-[10px]",children:["Ng\u0169 h\xe0nh: ",Ve(N).subDirection.element,Ve(N).subDirection.animal&&` - Con gi\xe1p: ${Ve(N).subDirection.animal}`]}),(0,At.jsx)("div",{className:"text-gray-400 text-[10px] italic",children:Ve(N).subDirection.characteristics})]})]})})})]}),(0,At.jsx)(hM,{isOpen:ye,onClose:()=>be(!1),featureName:we.featureName,requiredTier:we.requiredTier,description:we.description,featureKey:we.featureKey,starCost:we.starCost,starDuration:we.starDuration,onPurchaseSuccess:async(e,t)=>{await g(),setTimeout((async()=>{await g();try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"tempAccess",c.uid));e.exists()&&e.data()}catch(t){console.error("\u274c Error reading tempAccess:",t)}if(we.callback){if(A(e).hasAccess)we.callback();else{try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"tempAccess",c.uid)),n=(t.exists()?t.data():{})[e];if(n&&n.expiresAt>Date.now())return void we.callback()}catch(t){console.error("\u274c Error checking tempAccess directly:",t)}setTimeout((async()=>{await g();if(A(e).hasAccess)we.callback();else{console.error("\u274c Feature still not accessible after retry");try{var n;const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"tempAccess",c.uid)),r=t.exists()?t.data():{};console.error("\ud83d\udd0d Final tempAccess debug:",{featureKey:e,tempAccessData:r,hasFeature:!!r[e],featureData:r[e],now:Date.now(),expiresAt:null===(n=r[e])||void 0===n?void 0:n.expiresAt})}catch(t){console.error("\u274c Final debug error:",t)}try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"tempAccess",c.uid)),n=(t.exists()?t.data():{})[e];n&&n.expiresAt>Date.now()?we.callback():(console.error("\ud83d\udca5 All methods failed. Feature purchased but not accessible."),console.error("\ud83d\udca1 Try refreshing the page or contact support."))}catch(r){console.error("\u274c Last resort error:",r)}}}),2e3)}}}),1e3)}})]})},CM=()=>{Gb("kymon");const{userStars:e,currentUser:n,isEmailVerified:r}=Aw(),s=n&&r,{pageConfig:i,countdownInfo:a,cancelCountdown:o,skipCountdownAndDeductNow:l}=pw("kymon"),[c,u]=(0,t.useState)(!1);if((0,t.useEffect)((()=>(u(!0),setTimeout((()=>{u(!1)}),5e3),()=>{a.isCountingDown&&o()})),[a.isCountingDown,o]),(0,t.useEffect)((()=>{const e=e=>{"Escape"===e.key&&a.isCountingDown&&l()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[a.isCountingDown,l]),s&&e<=0){const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||t!==rw)return(0,At.jsx)(Sw,{pageName:"K\u1ef3 M\xf4n"})}return(0,At.jsx)("div",{className:"container mx-auto px-4 py-8 relative z-40",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-100 mb-6 text-center",children:"\ud83c\udffa K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p"}),(0,At.jsx)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 shadow-lg",children:(0,At.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-blue-400 mb-4",children:"Gi\u1edbi Thi\u1ec7u V\u1ec1 K\u1ef3 M\xf4n"}),(0,At.jsx)("p",{className:"text-gray-300 mb-4 leading-relaxed",children:"K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p l\xe0 m\u1ed9t b\u1ed9 m\xf4n cao c\u1ea5p trong t\u01b0 t\u01b0\u1edfng Trung Hoa c\u1ed5 \u0111\u1ea1i, \u0111\u01b0\u1ee3c xem l\xe0 m\u1ed9t trong ba b\xed thu\u1eadt cao nh\u1ea5t (Th\xe1i \u1ea4t Th\u1ea7n S\u1ed1, L\u1ee5c Nh\xe2m Th\u1ea7n Kh\xf3a, K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p). K\u1ef3 M\xf4n c\xf3 ngh\u0129a l\xe0 nh\u1eefng c\xe1ch th\u1ee9c b\xed \u1ea9n, c\xf2n \u0110\u1ed9n Gi\xe1p c\xf3 ngh\u0129a l\xe0 \u1ea9n n\xe1u d\u01b0\u1edbi l\u1edbp gi\xe1p."}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-green-400 mb-3",children:"\ud83c\udf1f \xdd Ngh\u0129a C\u1ee7a K\u1ef3 M\xf4n"}),(0,At.jsxs)("ul",{className:"text-gray-300 mb-6 space-y-2",children:[(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u2022"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"K\u1ef3:"})," K\u1ef3 l\u1ea1, b\xed \u1ea9n, nh\u1eefng \u0111i\u1ec1u kh\xf4ng th\u1ec3 l\xfd gi\u1ea3i \u0111\u01b0\u1ee3c"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u2022"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"M\xf4n:"})," C\u1eeda, l\u1ed1i \u0111i, ph\u01b0\u01a1ng h\u01b0\u1edbng c\u1ee7a v\u1ea1n v\u1eadt"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u2022"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"\u0110\u1ed9n:"})," \u1ea8n n\xe1u, che gi\u1ea5u"]})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u2022"}),(0,At.jsxs)("span",{children:[(0,At.jsx)("strong",{children:"Gi\xe1p:"})," L\u1edbp gi\xe1p b\u1ea3o v\u1ec7, bi\u1ec3u t\u01b0\u1ee3ng cho s\u1ef1 che ch\u1edf"]})]})]}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-purple-400 mb-3",children:"\u26a1 C\u1ea5u Tr\xfac K\u1ef3 M\xf4n"}),(0,At.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,At.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-lg font-semibold text-orange-400 mb-2",children:"Tam K\u1ef3 (Ba K\u1ef3)"}),(0,At.jsxs)("ul",{className:"text-gray-300 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Thi\xean K\u1ef3:"})," K\u1ef3 c\u1ee7a tr\u1eddi"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"\u0110\u1ecba K\u1ef3:"})," K\u1ef3 c\u1ee7a \u0111\u1ea5t"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Nh\xe2n K\u1ef3:"})," K\u1ef3 c\u1ee7a ng\u01b0\u1eddi"]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-lg font-semibold text-cyan-400 mb-2",children:"B\xe1t M\xf4n (T\xe1m C\u1eeda)"}),(0,At.jsxs)("ul",{className:"text-gray-300 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Khai M\xf4n:"})," C\u1eeda m\u1edf"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"H\u01b0u M\xf4n:"})," C\u1eeda ngh\u1ec9"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Sinh M\xf4n:"})," C\u1eeda sinh"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Th\u01b0\u01a1ng M\xf4n:"})," C\u1eeda th\u01b0\u01a1ng"]})]})]})]}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-red-400 mb-3",children:"\ud83c\udfaf \u1ee8ng D\u1ee5ng Th\u1ef1c T\u1ebf"}),(0,At.jsxs)("div",{className:"bg-gray-700/30 p-4 rounded-lg mb-6",children:[(0,At.jsx)("p",{className:"text-gray-300 mb-3",children:"K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p \u0111\u01b0\u1ee3c \u1ee9ng d\u1ee5ng trong nhi\u1ec1u l\u0129nh v\u1ef1c c\u1ee7a cu\u1ed9c s\u1ed1ng:"}),(0,At.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl mb-2",children:"\ud83c\udfe0"}),(0,At.jsx)("h5",{className:"text-green-400 font-semibold",children:"Phong Th\u1ee7y"}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"B\u1ed1 tr\xed nh\xe0 c\u1eeda, v\u0103n ph\xf2ng"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcbc"}),(0,At.jsx)("h5",{className:"text-blue-400 font-semibold",children:"Kinh Doanh"}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"Ch\u1ecdn th\u1eddi \u0111i\u1ec3m thu\u1eadn l\u1ee3i"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl mb-2",children:"\u2694\ufe0f"}),(0,At.jsx)("h5",{className:"text-red-400 font-semibold",children:"Binh Ph\xe1p"}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"Chi\u1ebfn l\u01b0\u1ee3c v\xe0 chi\u1ebfn thu\u1eadt"})]})]})]}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-indigo-400 mb-3",children:"\ud83d\udcda T\u1ea1i Sao H\u1ecdc K\u1ef3 M\xf4n?"}),(0,At.jsx)("div",{className:"bg-gray-700/30 p-4 rounded-lg mb-6",children:(0,At.jsxs)("ul",{className:"text-gray-300 space-y-2",children:[(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-400 mr-2",children:"\u2713"}),(0,At.jsx)("span",{children:"Hi\u1ec3u \u0111\u01b0\u1ee3c quy lu\u1eadt v\u1eadn h\xe0nh c\u1ee7a v\u0169 tr\u1ee5 v\xe0 t\u1ef1 nhi\xean"})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-400 mr-2",children:"\u2713"}),(0,At.jsx)("span",{children:"Bi\u1ebft c\xe1ch ch\u1ecdn th\u1eddi \u0111i\u1ec3m v\xe0 ph\u01b0\u01a1ng h\u01b0\u1edbng thu\u1eadn l\u1ee3i"})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-400 mr-2",children:"\u2713"}),(0,At.jsx)("span",{children:"\u1ee8ng d\u1ee5ng v\xe0o cu\u1ed9c s\u1ed1ng \u0111\u1ec3 t\u0103ng may m\u1eafn v\xe0 th\u1ecbnh v\u01b0\u1ee3ng"})]}),(0,At.jsxs)("li",{className:"flex items-start",children:[(0,At.jsx)("span",{className:"text-green-400 mr-2",children:"\u2713"}),(0,At.jsx)("span",{children:"Ph\xe1t tri\u1ec3n tr\xed tu\u1ec7 v\xe0 kh\u1ea3 n\u0103ng ph\xe1n \u0111o\xe1n"})]})]})}),(0,At.jsxs)("div",{className:"text-center bg-gray-700/30 p-6 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-lg font-semibold text-yellow-400 mb-2",children:"\ud83d\udca1 L\u01b0u \xdd Quan Tr\u1ecdng"}),(0,At.jsx)("p",{className:"text-gray-300",children:"K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p l\xe0 m\u1ed9t m\xf4n h\u1ecdc s\xe2u s\u1eafc v\xe0 ph\u1ee9c t\u1ea1p, c\u1ea7n c\xf3 th\u1eddi gian d\xe0i \u0111\u1ec3 nghi\xean c\u1ee9u v\xe0 th\u1ef1c h\xe0nh. H\xe3y ti\u1ebfp c\u1eadn v\u1edbi t\xe2m th\u1ebf h\u1ecdc h\u1ecfi v\xe0 khi\xeam t\u1ed1n \u0111\u1ec3 hi\u1ec3u \u0111\u01b0\u1ee3c b\u1ea3n ch\u1ea5t th\u1ef1c s\u1ef1 c\u1ee7a b\u1ed9 m\xf4n n\xe0y."})]})]})}),(0,At.jsx)("div",{className:"mt-6 text-center",children:(0,At.jsxs)("p",{className:"text-gray-400 text-sm",children:["\ud83d\udcd6 Trang n\xe0y cung c\u1ea5p ki\u1ebfn th\u1ee9c c\u01a1 b\u1ea3n v\u1ec1 K\u1ef3 M\xf4n \u0110\u1ed9n Gi\xe1p",(0,At.jsx)("br",{}),"\ud83c\udf1f \u0110\u1ec3 h\u1ecdc s\xe2u h\u01a1n, h\xe3y tham kh\u1ea3o c\xe1c t\xe0i li\u1ec7u chuy\xean m\xf4n"]})})]})})};function TM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const SM=t.forwardRef(TM);function _M(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const EM=t.forwardRef(_M);function BM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const MM=t.forwardRef(BM);function kM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const LM=t.forwardRef(kM),IM=()=>{const[e,r]=(0,t.useState)("login"),[s,i]=(0,t.useState)({email:"",password:""}),[a,o]=(0,t.useState)({displayName:"",email:"",password:"",confirmPassword:""}),[l,c]=(0,t.useState)({ageConfirmation:!1,termsAccepted:!1,dataConsent:!1}),[u,d]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[A,g]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[x,v]=(0,t.useState)(""),[y,b]=(0,t.useState)(""),[w,N]=(0,t.useState)(!1),[j,C]=(0,t.useState)(!1),T=ee(),S=Y(),{login:_,signup:E,currentUser:B,resendVerificationEmail:M,isEmailVerified:k,reloadUserVerificationStatus:L,resetPassword:I,signInWithGoogle:D}=Aw();(0,t.useEffect)((()=>{B&&k&&T("/news")}),[B,k,T]),(0,t.useEffect)((()=>{var e;null!==(e=S.state)&&void 0!==e&&e.message&&(v(S.state.message),T(S.pathname,{replace:!0}))}),[S.state,T,S.pathname]);const P=e=>{i((t=>({...t,[e.target.name]:e.target.value})))},F=e=>{o((t=>({...t,[e.target.name]:e.target.value})))},U=e=>{c((t=>({...t,[e.target.name]:e.target.checked})))},R=e=>{r(e),f(""),v(""),N(!1)},O=()=>{N(!w),f(""),v(""),b("")};return(0,At.jsxs)("div",{className:"min-h-screen  flex items-center justify-center px-4 text-left relative z-30 pb-20",children:[(0,At.jsx)("div",{className:"coverGrid fixed bottom-[0px] left-0 right-0 z-10 h-[100px] pointer-events-none"}),(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4 relative z-30",children:[(0,At.jsx)("div",{className:"text-center pt-12",children:"login"===e?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(jT,{className:"mx-auto h-12 w-12 text-gray-600"}),(0,At.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"\u0110\u0103ng nh\u1eadp"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"\u0110\u0103ng nh\u1eadp v\xe0o t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(SM,{className:"mx-auto h-12 w-12 text-gray-600"}),(0,At.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"T\u1ea1o t\xe0i kho\u1ea3n m\u1edbi \u0111\u1ec3 s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng"})]})}),(0,At.jsxs)("div",{className:"flex mb-6 p-1 bg-gray-800 rounded-lg",children:[(0,At.jsx)("button",{type:"button",onClick:()=>R("login"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("login"===e?"button-style":"text-gray-300 hover:text-white"),children:"\u0110\u0103ng nh\u1eadp"}),(0,At.jsx)("button",{type:"button",onClick:()=>R("register"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors "+("register"===e?"button-style":"text-gray-300 hover:text-white"),children:"\u0110\u0103ng k\xfd"})]}),p&&(0,At.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm text-center",children:p}),x&&(0,At.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-3 rounded-lg text-sm",children:[x,x.includes("Email ch\u01b0a \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c")&&(0,At.jsx)("button",{onClick:async()=>{try{v(""),f(""),await M(),v("Email x\xe1c th\u1ef1c \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi l\u1ea1i!")}catch(p){f("Kh\xf4ng th\u1ec3 g\u1eedi l\u1ea1i email x\xe1c th\u1ef1c")}},className:"ml-2 underline hover:no-underline",children:"G\u1eedi l\u1ea1i"})]}),"login"===e&&(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.email&&s.password){g(!0),f(""),v("");try{const e=await _(s.email,s.password);try{const{doc:t,getDoc:r}=await Promise.resolve().then(n.bind(n,220)),{db:s}=await Promise.resolve().then(n.bind(n,469)),i=await r(t(s,"users",e.user.uid));if(i.exists()&&i.data().disabled)return void T("/account-blocked",{replace:!0})}catch(t){console.error("L\u1ed7i ki\u1ec3m tra tr\u1ea1ng th\xe1i user:",t)}if(!(await ow(e.user,e.user.uid)).isVerified)return void T("/email-verification",{state:{email:e.user.email},replace:!0});L&&await L(e.user),v(e.message),T("/news",{replace:!0})}catch(p){if(console.error("L\u1ed7i \u0111\u0103ng nh\u1eadp:",p),"T\xean \u0111\u0103ng nh\u1eadp/t\xean hi\u1ec3n th\u1ecb kh\xf4ng t\u1ed3n t\u1ea1i"===p.message)f("T\xean \u0111\u0103ng nh\u1eadp/t\xean hi\u1ec3n th\u1ecb kh\xf4ng t\u1ed3n t\u1ea1i");else switch(p.code){case"auth/user-not-found":f("Email/t\xean hi\u1ec3n th\u1ecb kh\xf4ng t\u1ed3n t\u1ea1i");break;case"auth/wrong-password":f("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang");break;case"auth/invalid-credential":f("Email/t\xean hi\u1ec3n th\u1ecb ho\u1eb7c m\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang");break;case"auth/invalid-email":f("Email kh\xf4ng h\u1ee3p l\u1ec7");break;case"auth/user-disabled":f("T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb v\xf4 hi\u1ec7u h\xf3a. Vui l\xf2ng li\xean h\u1ec7 admin \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."),setTimeout((()=>{T("/account-blocked",{replace:!0})}),2e3);break;case"auth/too-many-requests":f("Qu\xe1 nhi\u1ec1u l\u1ea7n th\u1eed. Vui l\xf2ng th\u1eed l\u1ea1i sau");break;case"auth/network-request-failed":f("L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng");break;default:f(p.message||"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng nh\u1eadp")}}finally{g(!1)}}else f("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 email/t\xean hi\u1ec3n th\u1ecb v\xe0 m\u1eadt kh\u1ea9u")},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email ho\u1eb7c T\xean hi\u1ec3n th\u1ecb *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"login-email",name:"email",type:"text",required:!0,value:s.email,onChange:P,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp email ho\u1eb7c t\xean hi\u1ec3n th\u1ecb"}),(0,At.jsx)(EM,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"login-password",className:"block text-sm font-medium text-gray-300 mb-1",children:"M\u1eadt kh\u1ea9u *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"login-password",name:"password",type:u?"text":"password",required:!0,value:s.password,onChange:P,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u"}),(0,At.jsx)(jT,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,At.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-300",onClick:()=>d(!u),children:u?(0,At.jsx)(MM,{}):(0,At.jsx)(LM,{})})]})]})]}),(0,At.jsx)("button",{type:"submit",disabled:A,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white button-style",children:A?(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u0103ng nh\u1eadp..."]}):"\u0110\u0103ng nh\u1eadp"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,At.jsx)("div",{className:"w-full border-t border-gray-600"})}),(0,At.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,At.jsx)("span",{className:"px-2 bg-gray-900 text-gray-400",children:"Ho\u1eb7c"})})]}),(0,At.jsx)("div",{className:"flex justify-center",children:(0,At.jsx)("button",{type:"button",onClick:async()=>{g(!0),f(""),v("");try{const t=await D();try{const{doc:e,getDoc:r}=await Promise.resolve().then(n.bind(n,220)),{db:s}=await Promise.resolve().then(n.bind(n,469)),i=await r(e(s,"users",t.user.uid));if(i.exists()&&i.data().disabled)return void T("/account-blocked",{replace:!0})}catch(e){console.error("L\u1ed7i ki\u1ec3m tra tr\u1ea1ng th\xe1i user:",e)}t.user.emailVerified?T("/news",{replace:!0}):T("/email-verification",{state:{email:t.user.email},replace:!0})}catch(p){console.error("L\u1ed7i \u0111\u0103ng nh\u1eadp Google:",p),f(p.message)}finally{g(!1)}},disabled:A,className:"group relative w-full flex justify-center py-2 px-4 border border-slate-800 text-sm font-medium rounded-md text-slate-400 bg-slate-900 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,At.jsx)("div",{className:"flex items-center",children:"\u0110\u0103ng nh\u1eadp b\u1eb1ng Google"})})}),(0,At.jsx)("div",{className:"text-center flex justify-center",children:(0,At.jsx)("button",{type:"button",onClick:O,className:"text-sm text-gray-400 hover:text-gray-300 underline",children:"Qu\xean m\u1eadt kh\u1ea9u?"})})]}),"login"===e&&w&&(0,At.jsxs)("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y){C(!0),f(""),v("");try{const e=await I(y);v(e.message),b(""),N(!1)}catch(p){console.error("L\u1ed7i reset password:",p),f(p.message)}finally{C(!1)}}else f("Vui l\xf2ng nh\u1eadp email")},className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"reset-email",name:"resetEmail",type:"email",required:!0,value:y,onChange:e=>b(e.target.value),className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp email \u0111\u1ec3 \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,At.jsx)(EM,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsx)("button",{type:"button",onClick:O,className:"flex-1 py-2 px-4 border border-gray-500 text-sm font-medium rounded-md text-gray-300 bg-transparent hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"H\u1ee7y"}),(0,At.jsx)("button",{type:"submit",disabled:j,className:"flex-1 py-2 px-4 border border-transparent text-sm font-medium rounded-md text-green-600 bg-white hover:bg-green-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j?(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang g\u1eedi..."]}):"G\u1eedi email"})]})]})]}),"register"===e&&(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.email?a.password?a.password.length<6?(f("M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"),0):a.password!==a.confirmPassword?(f("M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng kh\u1edbp"),0):l.ageConfirmation?l.termsAccepted?l.dataConsent||(f("Vui l\xf2ng \u0111\u1ed3ng \xfd cung c\u1ea5p th\xf4ng tin"),0):(f("Vui l\xf2ng \u0111\u1ed3ng \xfd v\u1edbi \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"),0):(f("Vui l\xf2ng x\xe1c nh\u1eadn b\u1ea1n \u0111\xe3 tr\xean 18 tu\u1ed5i"),0):(f("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),0):(f("Vui l\xf2ng nh\u1eadp email"),0)){g(!0),f(""),v("");try{await E(a.email,a.password,a.displayName,l);T("/email-verification",{state:{email:a.email},replace:!0})}catch(p){switch(console.error("L\u1ed7i \u0111\u0103ng k\xfd:",p),p.code){case"auth/email-already-in-use":f("Email n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng");break;case"auth/invalid-email":f("Email kh\xf4ng h\u1ee3p l\u1ec7");break;case"auth/weak-password":f("M\u1eadt kh\u1ea9u qu\xe1 y\u1ebfu");break;case"auth/network-request-failed":f("L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng");break;default:f(p.message||"C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u0103ng k\xfd")}}finally{g(!1)}}},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-300 mb-1",children:"T\xean hi\u1ec3n th\u1ecb (t\xf9y ch\u1ecdn)"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"displayName",name:"displayName",type:"text",value:a.displayName,onChange:F,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nh\u1eadp t\xean hi\u1ec3n th\u1ecb"}),(0,At.jsx)(SM,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"register-email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"register-email",name:"email",type:"email",required:!0,value:a.email,onChange:F,className:"appearance-none relative block w-full px-3 py-2 pl-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nh\u1eadp email"}),(0,At.jsx)(EM,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"register-password",className:"block text-sm font-medium text-gray-300 mb-1",children:"M\u1eadt kh\u1ea9u *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"register-password",name:"password",type:u?"text":"password",required:!0,value:a.password,onChange:F,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u (\xedt nh\u1ea5t 6 k\xfd t\u1ef1)"}),(0,At.jsx)(jT,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,At.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-300",onClick:()=>d(!u),children:u?(0,At.jsx)(MM,{}):(0,At.jsx)(LM,{})})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300 mb-1",children:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",required:!0,value:a.confirmPassword,onChange:F,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-800 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,At.jsx)(jT,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,At.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-300",onClick:()=>m(!h),children:h?(0,At.jsx)(MM,{}):(0,At.jsx)(LM,{})})]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("input",{id:"ageConfirmation",name:"ageConfirmation",type:"checkbox",checked:l.ageConfirmation,onChange:U,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-600 rounded bg-gray-800"}),(0,At.jsx)("label",{htmlFor:"ageConfirmation",className:"ml-2 block text-sm text-gray-300",children:"T\xf4i x\xe1c nh\u1eadn \u0111\xe3 \u0111\u1ee7 18 tu\u1ed5i *"})]}),(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("input",{id:"termsAccepted",name:"termsAccepted",type:"checkbox",checked:l.termsAccepted,onChange:U,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-600 rounded bg-gray-800"}),(0,At.jsxs)("label",{htmlFor:"termsAccepted",className:"ml-2 block text-sm text-gray-300",children:["T\xf4i \u0111\u1ed3ng \xfd v\u1edbi"," ",(0,At.jsx)(nt,{to:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"})," ","v\xe0"," ",(0,At.jsx)(nt,{to:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:text-green-300 underline",children:"ch\xednh s\xe1ch b\u1ea3o m\u1eadt"})," ","*"]})]}),(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("input",{id:"dataConsent",name:"dataConsent",type:"checkbox",checked:l.dataConsent,onChange:U,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-600 rounded bg-gray-800"}),(0,At.jsx)("label",{htmlFor:"dataConsent",className:"ml-2 block text-sm text-gray-300",children:"T\xf4i \u0111\u1ed3ng \xfd cung c\u1ea5p th\xf4ng tin \u0111\u1ec3 gi\xfap \u1ee9ng d\u1ee5ng tra c\u1ee9u v\xe0 t\u1ed1i \u01b0u h\xf3a cho ri\xeang t\xf4i *"})]})]})]}),(0,At.jsx)("button",{type:"submit",disabled:A,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white button-style",children:A?(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u0103ng k\xfd..."]}):"\u0110\u0103ng k\xfd t\xe0i kho\u1ea3n"})]}),(0,At.jsx)("div",{className:"text-center pt-4 border-t border-gray-700 space-y-2 hidden",children:(0,At.jsx)("div",{children:(0,At.jsx)("button",{onClick:()=>T("/master/login"),className:"inline-flex items-center text-sm text-gray-400 hover:text-gray-300 font-medium",children:"\ud83d\udc51 Master Member"})})})]})]})};function DM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const PM=t.forwardRef(DM),FM=()=>{const[e]=at(),n=ee(),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(!1),[m,A]=(0,t.useState)(!1),[g,p]=(0,t.useState)(!1),[f,x]=(0,t.useState)(!0),[v,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const t=e.get("oobCode"),n=e.get("mode");if(!t||"resetPassword"!==n)return y("Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7 ho\u1eb7c \u0111\xe3 h\u1ebft h\u1ea1n"),void x(!1);s(t),C(t)}),[e]);const C=async e=>{try{x(!0);const t=await(0,nw.RE)(Qb.auth,e);a(t),j(!0),y("")}catch(v){console.error("L\u1ed7i x\xe1c th\u1ef1c m\xe3 reset:",v);let t="Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7";switch(v.code){case"auth/expired-action-code":t="Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng y\xeau c\u1ea7u link m\u1edbi.";break;case"auth/invalid-action-code":t="Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7 ho\u1eb7c \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng.";break;case"auth/user-disabled":t="T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb v\xf4 hi\u1ec7u h\xf3a.";break;case"auth/user-not-found":t="Kh\xf4ng t\xecm th\u1ea5y t\xe0i kho\u1ea3n.";break;default:t=v.message||t}y(t),j(!1)}finally{x(!1)}},T=()=>{n("/login")};return(0,At.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:(0,At.jsx)(jT,{className:"h-6 w-6 text-blue-600"})}),(0,At.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,At.jsx)("p",{className:"mt-2 text-center text-sm text-gray-300",children:"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi cho t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n"})]}),(0,At.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-xl p-8",children:f?(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-300",children:"\u0110ang x\xe1c th\u1ef1c link..."})]}):b?(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)(nM,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Th\xe0nh c\xf4ng!"}),(0,At.jsx)("p",{className:"text-gray-300 mb-4",children:"M\u1eadt kh\u1ea9u \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t l\u1ea1i th\xe0nh c\xf4ng."}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"\u0110ang chuy\u1ec3n h\u01b0\u1edbng v\u1ec1 trang \u0111\u0103ng nh\u1eadp..."})]}):N?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"mb-6 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:(0,At.jsxs)("p",{className:"text-sm text-blue-300",children:[(0,At.jsx)("span",{className:"font-medium",children:"Email:"})," ",i]})}),v&&(0,At.jsx)("div",{className:"mb-4 bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm",children:v}),(0,At.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o?o.length<6?(y("M\u1eadt kh\u1ea9u ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"),0):o===c||(y("M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng kh\u1edbp"),0):(y("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi"),0)){p(!0),y("");try{await(0,nw.R4)(Qb.auth,r,o),w(!0),setTimeout((()=>{n("/login",{state:{message:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng! Vui l\xf2ng \u0111\u0103ng nh\u1eadp v\u1edbi m\u1eadt kh\u1ea9u m\u1edbi."}})}),3e3)}catch(v){console.error("L\u1ed7i \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u:",v);let t="C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u";switch(v.code){case"auth/expired-action-code":t="Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng y\xeau c\u1ea7u link m\u1edbi.";break;case"auth/invalid-action-code":t="Link \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u kh\xf4ng h\u1ee3p l\u1ec7 ho\u1eb7c \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng.";break;case"auth/weak-password":t="M\u1eadt kh\u1ea9u qu\xe1 y\u1ebfu. Vui l\xf2ng ch\u1ecdn m\u1eadt kh\u1ea9u m\u1ea1nh h\u01a1n.";break;default:t=v.message||t}y(t)}finally{p(!1)}}},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-300 mb-1",children:"M\u1eadt kh\u1ea9u m\u1edbi *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"new-password",name:"newPassword",type:d?"text":"password",required:!0,value:o,onChange:e=>l(e.target.value),className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u m\u1edbi (\xedt nh\u1ea5t 6 k\xfd t\u1ef1)"}),(0,At.jsx)(jT,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,At.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-300",onClick:()=>h(!d),children:d?(0,At.jsx)(MM,{}):(0,At.jsx)(LM,{})})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-300 mb-1",children:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u *"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("input",{id:"confirm-password",name:"confirmPassword",type:m?"text":"password",required:!0,value:c,onChange:e=>u(e.target.value),className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-600 placeholder-gray-400 text-white bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi"}),(0,At.jsx)(jT,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,At.jsx)("button",{type:"button",className:"absolute right-3 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-300",onClick:()=>A(!m),children:m?(0,At.jsx)(MM,{}):(0,At.jsx)(LM,{})})]})]})]}),(0,At.jsx)("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang c\u1eadp nh\u1eadt..."]}):"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u"}),(0,At.jsx)("div",{className:"text-center",children:(0,At.jsx)("button",{type:"button",onClick:T,className:"text-sm text-blue-400 hover:text-blue-300 underline",children:"Quay l\u1ea1i \u0111\u0103ng nh\u1eadp"})})]})]}):(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)(PM,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Link kh\xf4ng h\u1ee3p l\u1ec7"}),(0,At.jsx)("p",{className:"text-red-400 mb-6",children:v}),(0,At.jsx)("button",{onClick:T,className:"w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"V\u1ec1 trang \u0111\u0103ng nh\u1eadp"})]})})]})})},UM=()=>{const[e,r]=(0,t.useState)(!1),[s,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)(0),[u,d]=(0,t.useState)(""),h=ee(),m=Y(),{currentUser:A,resendVerificationEmail:g,logout:p}=Aw();(0,t.useEffect)((()=>{var e;const t=(null===(e=m.state)||void 0===e?void 0:e.email)||(null===A||void 0===A?void 0:A.email);t?d(t):h("/login")}),[m.state,A,h]),(0,t.useEffect)((()=>{const e=setInterval((async()=>{if(A){try{const{doc:e,getDoc:t}=await Promise.resolve().then(n.bind(n,220)),{db:r}=await Promise.resolve().then(n.bind(n,469)),s=await t(e(r,"users",A.uid));if(s.exists()&&s.data().disabled)return void h("/account-blocked",{replace:!0})}catch(e){console.error("L\u1ed7i ki\u1ec3m tra tr\u1ea1ng th\xe1i user:",e)}await A.reload();const t=await ow(A,A.uid);t.isVerified&&("admin"===t.source?i("Email \u0111\xe3 \u0111\u01b0\u1ee3c admin x\xe1c th\u1ef1c th\xe0nh c\xf4ng!"):"firebase"===t.source?i("Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c th\xe0nh c\xf4ng!"):i("Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c \u0111\u1ea7y \u0111\u1ee7!"),setTimeout((()=>{h("/news")}),2e3))}}),5e3);return()=>clearInterval(e)}),[A,h]),(0,t.useEffect)((()=>{let e;return l>0&&(e=setTimeout((()=>c(l-1)),1e3)),()=>clearTimeout(e)}),[l]);return(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4 relative z-50 box-style",children:(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(EM,{className:"mx-auto h-16 w-16 text-blue-400"}),(0,At.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"X\xe1c th\u1ef1c Email"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"Ch\xfang t\xf4i \u0111\xe3 g\u1eedi email x\xe1c th\u1ef1c \u0111\u1ebfn \u0111\u1ecba ch\u1ec9 c\u1ee7a b\u1ea1n"})]}),(0,At.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 space-y-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:"Email x\xe1c th\u1ef1c \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn:"}),(0,At.jsx)("p",{className:"text-white font-medium bg-gray-700 px-4 py-2 rounded-lg",children:u})]}),a&&(0,At.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm flex items-center",children:[(0,At.jsx)(jw,{className:"h-5 w-5 mr-2 flex-shrink-0"}),a]}),s&&(0,At.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 text-green-400 px-4 py-3 rounded-lg text-sm flex items-center",children:[(0,At.jsx)(nM,{className:"h-5 w-5 mr-2 flex-shrink-0"}),s]}),(0,At.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 text-blue-400 px-4 py-3 rounded-lg text-sm",children:[(0,At.jsx)("h4",{className:"font-medium mb-2",children:"H\u01b0\u1edbng d\u1eabn x\xe1c th\u1ef1c:"}),(0,At.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,At.jsx)("li",{children:"Ki\u1ec3m tra h\u1ed9p th\u01b0 email c\u1ee7a b\u1ea1n (bao g\u1ed3m c\u1ea3 th\u01b0 m\u1ee5c spam)"}),(0,At.jsx)("li",{children:"T\xecm email t\u1eeb h\u1ec7 th\u1ed1ng v\u1edbi ti\xeau \u0111\u1ec1 x\xe1c th\u1ef1c t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"Nh\u1ea5p v\xe0o li\xean k\u1ebft x\xe1c th\u1ef1c trong email"}),(0,At.jsx)("li",{children:'Quay l\u1ea1i trang n\xe0y v\xe0 nh\u1ea5n "Ki\u1ec3m tra x\xe1c th\u1ef1c"'}),(0,At.jsx)("li",{className:"text-yellow-400 font-medium",children:"\ud83d\udce7 Ho\u1eb7c li\xean h\u1ec7 admin \u0111\u1ec3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c th\u1ee7 c\xf4ng"})]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("button",{onClick:async()=>{if(A){r(!0);try{try{const{doc:e,getDoc:t}=await Promise.resolve().then(n.bind(n,220)),{db:r}=await Promise.resolve().then(n.bind(n,469)),s=await t(e(r,"users",A.uid));if(s.exists()&&s.data().disabled)return void h("/account-blocked",{replace:!0})}catch(e){console.error("L\u1ed7i ki\u1ec3m tra tr\u1ea1ng th\xe1i user:",e)}await A.reload();const t=await ow(A,A.uid);t.isVerified?("admin"===t.source?i("Email \u0111\xe3 \u0111\u01b0\u1ee3c admin x\xe1c th\u1ef1c th\xe0nh c\xf4ng!"):"firebase"===t.source?i("Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c th\xe0nh c\xf4ng!"):i("Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c \u0111\u1ea7y \u0111\u1ee7!"),setTimeout((()=>{h("/news")}),2e3)):o("Email ch\u01b0a \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c. Vui l\xf2ng ki\u1ec3m tra h\u1ed9p th\u01b0 v\xe0 nh\u1ea5p v\xe0o li\xean k\u1ebft x\xe1c th\u1ef1c ho\u1eb7c li\xean h\u1ec7 admin.")}catch(a){o("Kh\xf4ng th\u1ec3 ki\u1ec3m tra tr\u1ea1ng th\xe1i x\xe1c th\u1ef1c. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{r(!1)}}},disabled:e,className:"w-full flex items-center justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white button-style focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang ki\u1ec3m tra..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(nM,{className:"h-5 w-5 mr-2"}),"Ki\u1ec3m tra x\xe1c th\u1ef1c"]})}),(0,At.jsx)("button",{onClick:async()=>{if(!(l>0)){r(!0),o(""),i("");try{await g(),i("Email x\xe1c th\u1ef1c \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi l\u1ea1i! Vui l\xf2ng ki\u1ec3m tra h\u1ed9p th\u01b0 c\u1ee7a b\u1ea1n."),c(60)}catch(a){console.error("L\u1ed7i g\u1eedi l\u1ea1i email:",a),o("Kh\xf4ng th\u1ec3 g\u1eedi l\u1ea1i email x\xe1c th\u1ef1c. Vui l\xf2ng th\u1eed l\u1ea1i sau.")}finally{r(!1)}}},disabled:e||l>0,className:"w-full flex items-center justify-center py-3 px-4 border border-gray-600 text-sm font-medium rounded-md text-gray-300 bg-gray-700 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l>0?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-5 w-5 mr-2"}),"G\u1eedi l\u1ea1i sau ",l,"s"]}):e?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-300 mr-2"}),"\u0110ang g\u1eedi..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-5 w-5 mr-2"}),"G\u1eedi l\u1ea1i email x\xe1c th\u1ef1c"]})}),(0,At.jsx)("button",{onClick:async()=>{try{A&&await p(),h("/login")}catch(a){console.error("L\u1ed7i \u0111\u0103ng xu\u1ea5t:",a),h("/login")}},className:"w-full flex items-center justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-gray-400 hover:text-gray-300 focus:outline-none transition-colors",children:"\u2190 Quay l\u1ea1i \u0111\u0103ng nh\u1eadp"})]}),(0,At.jsx)("div",{className:"text-center text-xs text-gray-500",children:(0,At.jsx)("p",{children:"Trang n\xe0y s\u1ebd t\u1ef1 \u0111\u1ed9ng ki\u1ec3m tra tr\u1ea1ng th\xe1i x\xe1c th\u1ef1c m\u1ed7i 5 gi\xe2y"})})]})]})})};function RM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const OM=t.forwardRef(RM),HM=()=>(0,At.jsx)("div",{className:"min-h-screen  py-8 px-4 box-style text-left pb-20",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto pt-10",children:[(0,At.jsx)(pt,{items:[{text:"\u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",link:null}],showBackButton:!0,backTo:"/login",backText:"\u0110\u0103ng k\xfd",className:"hidden"}),(0,At.jsxs)("div",{className:"text-center my-8",children:[(0,At.jsx)(OM,{className:"mx-auto h-16 w-16 text-green-400 mb-4"}),(0,At.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng"}),(0,At.jsxs)("p",{className:"text-gray-300",children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",(new Date).toLocaleDateString("vi-VN")]})]}),(0,At.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-8 text-gray-300 space-y-6 ",children:[(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Ch\u1ea5p nh\u1eadn \u0111i\u1ec1u kho\u1ea3n"}),(0,At.jsx)("p",{children:'B\u1eb1ng vi\u1ec7c truy c\u1eadp v\xe0 s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n (sau \u0111\xe2y g\u1ecdi l\xe0 "D\u1ecbch v\u1ee5"), b\u1ea1n \u0111\u1ed3ng \xfd tu\xe2n th\u1ee7 v\xe0 b\u1ecb r\xe0ng bu\u1ed9c b\u1edfi c\xe1c \u0111i\u1ec1u kho\u1ea3n v\xe0 \u0111i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng n\xe0y. N\u1ebfu b\u1ea1n kh\xf4ng \u0111\u1ed3ng \xfd v\u1edbi b\u1ea5t k\u1ef3 ph\u1ea7n n\xe0o c\u1ee7a c\xe1c \u0111i\u1ec1u kho\u1ea3n n\xe0y, b\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5.'})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. M\xf4 t\u1ea3 d\u1ecbch v\u1ee5"}),(0,At.jsx)("p",{children:"Thi\xean \u0110\u1ecba Nh\xe2n l\xe0 \u1ee9ng d\u1ee5ng cung c\u1ea5p th\xf4ng tin v\u1ec1 l\u1ecbch \xe2m, b\xe1t t\u1ef1, phong th\u1ee7y v\xe0 c\xe1c d\u1ecbch v\u1ee5 huy\u1ec1n h\u1ecdc li\xean quan. D\u1ecbch v\u1ee5 bao g\u1ed3m nh\u01b0ng kh\xf4ng gi\u1edbi h\u1ea1n:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,At.jsx)("li",{children:"Tra c\u1ee9u l\u1ecbch \xe2m v\xe0 d\u01b0\u01a1ng"}),(0,At.jsx)("li",{children:"Xem th\xf4ng tin b\xe1t t\u1ef1 c\xe1 nh\xe2n"}),(0,At.jsx)("li",{children:"Xem th\xf4ng tin l\u1ee5c h\xe0o"}),(0,At.jsx)("li",{children:"Xem th\xf4ng tin la kinh"}),(0,At.jsx)("li",{children:"Xem th\xf4ng tin l\u1ecbch ti\u1ebft kh\xed"}),(0,At.jsx)("li",{children:"Xem th\xf4ng tin phong th\u1ee7y"}),(0,At.jsx)("li",{children:"Ch\u1ecdn ng\xe0y gi\u1edd t\u1ed1t"}),(0,At.jsx)("li",{children:"C\xe1c b\xe0i vi\u1ebft v\xe0 tin t\u1ee9c li\xean quan"})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. T\xe0i kho\u1ea3n ng\u01b0\u1eddi d\xf9ng"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.1."})," B\u1ea1n c\xf3 tr\xe1ch nhi\u1ec7m duy tr\xec t\xednh b\u1ea3o m\u1eadt c\u1ee7a t\xe0i kho\u1ea3n v\xe0 m\u1eadt kh\u1ea9u."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.2."})," B\u1ea1n ph\u1ea3i cung c\u1ea5p th\xf4ng tin ch\xednh x\xe1c khi \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.3."})," B\u1ea1n ch\u1ecbu tr\xe1ch nhi\u1ec7m cho t\u1ea5t c\u1ea3 ho\u1ea1t \u0111\u1ed9ng di\u1ec5n ra d\u01b0\u1edbi t\xe0i kho\u1ea3n c\u1ee7a m\xecnh."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.4."})," B\u1ea1n ph\u1ea3i th\xf4ng b\xe1o ngay cho ch\xfang t\xf4i n\u1ebfu ph\xe1t hi\u1ec7n vi\u1ec7c s\u1eed d\u1ee5ng tr\xe1i ph\xe9p t\xe0i kho\u1ea3n."]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Quy t\u1eafc s\u1eed d\u1ee5ng"}),(0,At.jsx)("p",{children:"Khi s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5, b\u1ea1n \u0111\u1ed3ng \xfd KH\xd4NG:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,At.jsx)("li",{children:"S\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 cho m\u1ee5c \u0111\xedch b\u1ea5t h\u1ee3p ph\xe1p"}),(0,At.jsx)("li",{children:"G\u1eedi spam, n\u1ed9i dung \u0111\u1ed9c h\u1ea1i ho\u1eb7c vi ph\u1ea1m ph\xe1p lu\u1eadt"}),(0,At.jsx)("li",{children:"C\u1ed1 g\u1eafng truy c\u1eadp tr\xe1i ph\xe9p v\xe0o h\u1ec7 th\u1ed1ng"}),(0,At.jsx)("li",{children:"Sao ch\xe9p, ph\xe2n ph\u1ed1i n\u1ed9i dung m\xe0 kh\xf4ng c\xf3 s\u1ef1 cho ph\xe9p"}),(0,At.jsx)("li",{children:"L\xe0m gi\xe1n \u0111o\u1ea1n ho\u1eb7c l\xe0m h\u1ecfng d\u1ecbch v\u1ee5"})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. N\u1ed9i dung v\xe0 s\u1edf h\u1eefu tr\xed tu\u1ec7"}),(0,At.jsx)("div",{className:"space-y-3",children:(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"5.1."})," B\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c sao ch\xe9p, ph\xe2n ph\u1ed1i, ho\u1eb7c s\u1eed d\u1ee5ng n\u1ed9i dung cho m\u1ee5c \u0111\xedch th\u01b0\u01a1ng m\u1ea1i m\xe0 kh\xf4ng c\xf3 s\u1ef1 cho ph\xe9p."]})})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. T\xednh ch\xednh x\xe1c th\xf4ng tin"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"6.1."})," Th\xf4ng tin b\xe1t t\u1ef1, phong th\u1ee7y, xem ng\xe0y, la kinh, l\u1ee5c h\xe0o, l\u1ecbch ti\u1ebft kh\xed \u0111\u01b0\u1ee3c cung c\u1ea5p ch\u1ec9 mang t\xednh tham kh\u1ea3o."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"6.2."})," Ch\xfang t\xf4i kh\xf4ng \u0111\u1ea3m b\u1ea3o t\xednh ch\xednh x\xe1c tuy\u1ec7t \u0111\u1ed1i c\u1ee7a c\xe1c th\xf4ng tin n\xe0y."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"6.3."})," B\u1ea1n t\u1ef1 ch\u1ecbu tr\xe1ch nhi\u1ec7m cho c\xe1c quy\u1ebft \u0111\u1ecbnh d\u1ef1a tr\xean th\xf4ng tin t\u1eeb \u1ee9ng d\u1ee5ng."]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Gi\u1edbi h\u1ea1n tr\xe1ch nhi\u1ec7m"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.1."}),' D\u1ecbch v\u1ee5 \u0111\u01b0\u1ee3c cung c\u1ea5p "nh\u01b0 hi\u1ec7n t\u1ea1i" \u0111\u01b0\u1ee3c tra c\u1ee9u v\xe0 tham kh\u1ea3o t\u1eeb d\xe2n gian v\xe0 t\xe0i li\u1ec7u huy\u1ec1n h\u1ecdc li\xean quan n\xean kh\xf4ng c\xf3 s\u1ef1 \u0111\u1ea3m b\u1ea3o ch\xednh x\xe1c.']}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.2."})," Ch\xfang t\xf4i kh\xf4ng ch\u1ecbu tr\xe1ch nhi\u1ec7m cho b\u1ea5t k\u1ef3 thi\u1ec7t h\u1ea1i n\xe0o ph\xe1t sinh t\u1eeb vi\u1ec7c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.3."})," Tr\xe1ch nhi\u1ec7m c\u1ee7a ch\xfang t\xf4i \u0111\u01b0\u1ee3c gi\u1edbi h\u1ea1n \u1edf m\u1ee9c t\u1ed1i \u0111a theo quy \u0111\u1ecbnh ph\xe1p lu\u1eadt."]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Ch\u1ea5m d\u1ee9t d\u1ecbch v\u1ee5"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"8.1."})," Ch\xfang t\xf4i c\xf3 quy\u1ec1n ch\u1ea5m d\u1ee9t ho\u1eb7c \u0111\xecnh ch\u1ec9 t\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n n\u1ebfu vi ph\u1ea1m \u0111i\u1ec1u kho\u1ea3n."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"8.2."})," B\u1ea1n c\xf3 th\u1ec3 ch\u1ea5m d\u1ee9t t\xe0i kho\u1ea3n b\u1ea5t c\u1ee9 l\xfac n\xe0o b\u1eb1ng c\xe1ch li\xean h\u1ec7 v\u1edbi ch\xfang t\xf4i."]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"8.3."})," C\xe1c \u0111i\u1ec1u kho\u1ea3n v\u1ec1 s\u1edf h\u1eefu tr\xed tu\u1ec7 v\xe0 gi\u1edbi h\u1ea1n tr\xe1ch nhi\u1ec7m v\u1eabn c\xf3 hi\u1ec7u l\u1ef1c sau khi ch\u1ea5m d\u1ee9t."]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Thay \u0111\u1ed5i \u0111i\u1ec1u kho\u1ea3n"}),(0,At.jsx)("p",{children:"Ch\xfang t\xf4i c\xf3 quy\u1ec1n c\u1eadp nh\u1eadt v\xe0 thay \u0111\u1ed5i c\xe1c \u0111i\u1ec1u kho\u1ea3n n\xe0y b\u1ea5t c\u1ee9 l\xfac n\xe0o. Vi\u1ec7c ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 sau khi c\xf3 thay \u0111\u1ed5i \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n ch\u1ea5p nh\u1eadn c\xe1c \u0111i\u1ec1u kho\u1ea3n m\u1edbi."})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Li\xean h\u1ec7"}),(0,At.jsx)("p",{children:"N\u1ebfu b\u1ea1n c\xf3 b\u1ea5t k\u1ef3 c\xe2u h\u1ecfi n\xe0o v\u1ec1 c\xe1c \u0111i\u1ec1u kho\u1ea3n n\xe0y, vui l\xf2ng li\xean h\u1ec7 v\u1edbi ch\xfang t\xf4i qua:"}),(0,At.jsx)("div",{className:"mt-2 space-y-1",children:(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Email:"})," thiendianhan.app@gmail.com"]})})]}),(0,At.jsx)("div",{className:"text-center pt-8 border-t border-gray-600",children:(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"B\u1eb1ng vi\u1ec7c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5, b\u1ea1n x\xe1c nh\u1eadn \u0111\xe3 \u0111\u1ecdc, hi\u1ec3u v\xe0 \u0111\u1ed3ng \xfd v\u1edbi c\xe1c \u0111i\u1ec1u kho\u1ea3n tr\xean."})}),(0,At.jsx)("div",{className:"text-center pt-8 border-t border-gray-600",children:(0,At.jsx)("button",{className:"button-style mx-auto",children:(0,At.jsx)(nt,{to:"/",children:"Quay l\u1ea1i trang ch\u1ee7"})})})]})]})}),QM=()=>(0,At.jsx)("div",{className:"min-h-screen  py-8 px-4 box-style text-left pb-20",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto pt-4",children:[(0,At.jsx)(pt,{items:[{text:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt",link:null}],showBackButton:!0,backTo:"/login",backText:"\u0110\u0103ng k\xfd",className:"hidden"}),(0,At.jsxs)("div",{className:"text-center my-8",children:[(0,At.jsx)(dt,{className:"mx-auto h-16 w-16 text-green-400 mb-4"}),(0,At.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt"}),(0,At.jsxs)("p",{className:"text-gray-300",children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",(new Date).toLocaleDateString("vi-VN")]})]}),(0,At.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-8 text-gray-300 space-y-6",children:[(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Cam k\u1ebft b\u1ea3o m\u1eadt"}),(0,At.jsx)("p",{children:"Ch\xfang t\xf4i cam k\u1ebft b\u1ea3o v\u1ec7 quy\u1ec1n ri\xeang t\u01b0 v\xe0 th\xf4ng tin c\xe1 nh\xe2n c\u1ee7a b\u1ea1n. Ch\xednh s\xe1ch b\u1ea3o m\u1eadt n\xe0y gi\u1ea3i th\xedch c\xe1ch ch\xfang t\xf4i thu th\u1eadp, s\u1eed d\u1ee5ng, l\u01b0u tr\u1eef v\xe0 b\u1ea3o v\u1ec7 th\xf4ng tin c\u1ee7a b\u1ea1n khi s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n."})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Th\xf4ng tin ch\xfang t\xf4i thu th\u1eadp"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"2.1. Th\xf4ng tin c\xe1 nh\xe2n"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,At.jsx)("li",{children:"T\xean hi\u1ec3n th\u1ecb v\xe0 email khi \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"Th\xf4ng tin sinh n\u0103m, gi\u1edd sinh \u0111\u1ec3 t\xednh to\xe1n b\xe1t t\u1ef1"}),(0,At.jsx)("li",{children:"Th\xf4ng tin v\u1ecb tr\xed (n\u1ebfu \u0111\u01b0\u1ee3c c\u1ea5p ph\xe9p)"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"2.2. Th\xf4ng tin s\u1eed d\u1ee5ng"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,At.jsx)("li",{children:"L\u1ecbch s\u1eed v\xe0o c\xe1c trang tra c\u1ee9u"}),(0,At.jsx)("li",{children:"Th\u1eddi gian v\xe0 t\u1ea7n su\u1ea5t s\u1eed d\u1ee5ng \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("li",{children:"C\xe1c t\u01b0\u01a1ng t\xe1c v\u1edbi n\u1ed9i dung v\xe0 t\xednh n\u0103ng"}),(0,At.jsx)("li",{children:"Th\xf4ng tin k\u1ef9 thu\u1eadt v\u1ec1 thi\u1ebft b\u1ecb v\xe0 tr\xecnh duy\u1ec7t"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"2.3. Cookies v\xe0 c\xf4ng ngh\u1ec7 theo d\xf5i"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("p",{children:"Ch\xfang t\xf4i s\u1eed d\u1ee5ng cookies v\xe0 c\xe1c c\xf4ng ngh\u1ec7 t\u01b0\u01a1ng t\u1ef1 \u0111\u1ec3 c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m ng\u01b0\u1eddi d\xf9ng, ph\xe2n t\xedch l\u01b0u l\u01b0\u1ee3ng truy c\u1eadp v\xe0 c\xe1 nh\xe2n h\xf3a n\u1ed9i dung."}),(0,At.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-600",children:[(0,At.jsx)("h4",{className:"font-medium text-green-400 mb-3",children:"\ud83c\udf6a C\xe1c lo\u1ea1i cookies ch\xfang t\xf4i s\u1eed d\u1ee5ng:"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{className:"flex items-start gap-2",children:[(0,At.jsx)("span",{className:"text-green-400",children:"\ud83d\udd12"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"Cookies c\u1ea7n thi\u1ebft:"})," X\xe1c th\u1ef1c, b\u1ea3o m\u1eadt v\xe0 ch\u1ee9c n\u0103ng c\u01a1 b\u1ea3n c\u1ee7a trang web."]})]}),(0,At.jsxs)("div",{className:"flex items-start gap-2",children:[(0,At.jsx)("span",{className:"text-blue-400",children:"\ud83c\udfa8"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"Cookies preferences:"})," L\u01b0u tr\u1eef giao di\u1ec7n, ng\xf4n ng\u1eef, font size c\u1ee7a b\u1ea1n."]})]}),(0,At.jsxs)("div",{className:"flex items-start gap-2",children:[(0,At.jsx)("span",{className:"text-purple-400",children:"\ud83d\udcca"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"Cookies ph\xe2n t\xedch:"})," Theo d\xf5i c\xe1ch s\u1eed d\u1ee5ng \u0111\u1ec3 c\u1ea3i thi\u1ec7n d\u1ecbch v\u1ee5."]})]}),(0,At.jsxs)("div",{className:"flex items-start gap-2",children:[(0,At.jsx)("span",{className:"text-yellow-400",children:"\u2b50"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"Cookies t\xednh n\u0103ng:"})," L\u01b0u danh s\xe1ch y\xeau th\xedch v\xe0 l\u1ecbch s\u1eed s\u1eed d\u1ee5ng."]})]})]})]}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"B\u1ea1n c\xf3 th\u1ec3 qu\u1ea3n l\xfd cookies qua ph\u1ea7n C\xe0i \u0111\u1eb7t c\u1ee7a \u1ee9ng d\u1ee5ng. T\u1eeb ch\u1ed1i cookies c\xf3 th\u1ec3 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn tr\u1ea3i nghi\u1ec7m s\u1eed d\u1ee5ng."})]})]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. C\xe1ch ch\xfang t\xf4i s\u1eed d\u1ee5ng th\xf4ng tin"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.1."})," Cung c\u1ea5p v\xe0 c\u1ea3i thi\u1ec7n d\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.2."})," T\xednh to\xe1n v\xe0 hi\u1ec3n th\u1ecb th\xf4ng tin b\xe1t t\u1ef1, phong th\u1ee7y c\xe1 nh\xe2n"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.3."})," G\u1eedi th\xf4ng b\xe1o v\u1ec1 c\xe1c t\xednh n\u0103ng m\u1edbi v\xe0 c\u1eadp nh\u1eadt"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.4."})," Ph\xe2n t\xedch v\xe0 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t \u1ee9ng d\u1ee5ng"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.5."})," B\u1ea3o v\u1ec7 an ninh v\xe0 ph\xf2ng ch\u1ed1ng gian l\u1eadn"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"3.6."})," Tu\xe2n th\u1ee7 c\xe1c y\xeau c\u1ea7u ph\xe1p l\xfd"]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Chia s\u1ebb th\xf4ng tin"}),(0,At.jsx)("p",{children:"Ch\xfang t\xf4i KH\xd4NG b\xe1n, cho thu\xea ho\u1eb7c chia s\u1ebb th\xf4ng tin c\xe1 nh\xe2n c\u1ee7a b\u1ea1n v\u1edbi b\xean th\u1ee9 ba, tr\u1eeb khi:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,At.jsx)("li",{children:"C\xf3 s\u1ef1 \u0111\u1ed3ng \xfd r\xf5 r\xe0ng c\u1ee7a b\u1ea1n"}),(0,At.jsx)("li",{children:"\u0110\u1ec3 tu\xe2n th\u1ee7 ph\xe1p lu\u1eadt ho\u1eb7c quy \u0111\u1ecbnh"}),(0,At.jsx)("li",{children:"\u0110\u1ec3 b\u1ea3o v\u1ec7 quy\u1ec1n l\u1ee3i v\xe0 an to\xe0n c\u1ee7a ch\xfang t\xf4i v\xe0 ng\u01b0\u1eddi d\xf9ng"}),(0,At.jsx)("li",{children:"V\u1edbi c\xe1c nh\xe0 cung c\u1ea5p d\u1ecbch v\u1ee5 \u0111\xe1ng tin c\u1eady (d\u01b0\u1edbi s\u1ef1 ki\u1ec3m so\xe1t nghi\xeam ng\u1eb7t)"})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. B\u1ea3o m\u1eadt th\xf4ng tin"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"5.1."})," S\u1eed d\u1ee5ng m\xe3 h\xf3a SSL/TLS cho t\u1ea5t c\u1ea3 truy\u1ec1n t\u1ea3i d\u1eef li\u1ec7u"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"5.2."})," L\u01b0u tr\u1eef d\u1eef li\u1ec7u tr\xean c\xe1c m\xe1y ch\u1ee7 b\u1ea3o m\u1eadt v\u1edbi ki\u1ec3m so\xe1t truy c\u1eadp nghi\xeam ng\u1eb7t"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"5.3."})," Th\u1ef1c hi\u1ec7n ki\u1ec3m tra b\u1ea3o m\u1eadt \u0111\u1ecbnh k\u1ef3"]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Quy\u1ec1n c\u1ee7a b\u1ea1n"}),(0,At.jsx)("p",{children:"B\u1ea1n c\xf3 quy\u1ec1n:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"Truy c\u1eadp:"})," Y\xeau c\u1ea7u xem th\xf4ng tin c\xe1 nh\xe2n ch\xfang t\xf4i l\u01b0u tr\u1eef"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"S\u1eeda \u0111\u1ed5i:"})," C\u1eadp nh\u1eadt ho\u1eb7c ch\u1ec9nh s\u1eeda th\xf4ng tin c\xe1 nh\xe2n"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"X\xf3a:"})," B\u1ea1n c\xf3 th\u1ec3 t\u1ef1 x\xf3a th\xf4ng tin c\xe1 nh\xe2n trong ph\u1ea7n th\xf4ng tin c\xe1 nh\xe2n c\u1ee7a \u1ee9ng d\u1ee5ng"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("strong",{children:"H\u1ea1n ch\u1ebf:"})," Y\xeau c\u1ea7u h\u1ea1n ch\u1ebf x\u1eed l\xfd th\xf4ng tin c\xe1 nh\xe2n"]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. L\u01b0u tr\u1eef d\u1eef li\u1ec7u"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.1."})," Ch\xfang t\xf4i ch\u1ec9 l\u01b0u tr\u1eef th\xf4ng tin c\xe1 nh\xe2n trong th\u1eddi gian c\u1ea7n thi\u1ebft"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.2."})," D\u1eef li\u1ec7u t\xe0i kho\u1ea3n \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef cho \u0111\u1ebfn khi b\u1ea1n y\xeau c\u1ea7u x\xf3a"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.3."})," D\u1eef li\u1ec7u ph\xe2n t\xedch \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef t\u1ed1i \u0111a 2 n\u0103m"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"7.4."})," D\u1eef li\u1ec7u sao l\u01b0u \u0111\u01b0\u1ee3c x\xf3a sau 30 ng\xe0y k\u1ec3 t\u1eeb khi x\xf3a t\xe0i kho\u1ea3n"]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Quy\u1ec1n ri\xeang t\u01b0 tr\u1ebb em"}),(0,At.jsx)("p",{children:"D\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i kh\xf4ng d\xe0nh cho tr\u1ebb em d\u01b0\u1edbi 18 tu\u1ed5i. Ch\xfang t\xf4i kh\xf4ng c\u1ed1 \xfd thu th\u1eadp th\xf4ng tin c\xe1 nh\xe2n t\u1eeb tr\u1ebb em d\u01b0\u1edbi 18 tu\u1ed5i. N\u1ebfu ph\xe1t hi\u1ec7n tr\u01b0\u1eddng h\u1ee3p n\xe0y, ch\xfang t\xf4i s\u1ebd x\xf3a th\xf4ng tin ngay l\u1eadp t\u1ee9c."})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Thay \u0111\u1ed5i ch\xednh s\xe1ch"}),(0,At.jsx)("p",{children:"Ch\xfang t\xf4i c\xf3 th\u1ec3 c\u1eadp nh\u1eadt ch\xednh s\xe1ch b\u1ea3o m\u1eadt n\xe0y theo th\u1eddi gian. C\xe1c thay \u0111\u1ed5i quan tr\u1ecdng s\u1ebd \u0111\u01b0\u1ee3c th\xf4ng b\xe1o qua email ho\u1eb7c th\xf4ng b\xe1o tr\xean \u1ee9ng d\u1ee5ng. Vi\u1ec7c ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 sau khi c\xf3 thay \u0111\u1ed5i \u0111\u1ed3ng ngh\u0129a v\u1edbi vi\u1ec7c b\u1ea1n ch\u1ea5p nh\u1eadn ch\xednh s\xe1ch m\u1edbi."})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Li\xean h\u1ec7 v\u1ec1 b\u1ea3o m\u1eadt"}),(0,At.jsx)("p",{children:"N\u1ebfu b\u1ea1n c\xf3 c\xe2u h\u1ecfi v\u1ec1 ch\xednh s\xe1ch b\u1ea3o m\u1eadt ho\u1eb7c mu\u1ed1n th\u1ef1c hi\u1ec7n quy\u1ec1n c\u1ee7a m\xecnh, vui l\xf2ng li\xean h\u1ec7:"}),(0,At.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Email b\u1ea3o m\u1eadt:"})," privacy@thiendainhan.app"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Email h\u1ed7 tr\u1ee3:"})," thiendianhan.app@gmail.com"]})]})]}),(0,At.jsxs)("section",{children:[(0,At.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Tu\xe2n th\u1ee7 ph\xe1p lu\u1eadt"}),(0,At.jsx)("p",{children:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt n\xe0y tu\xe2n th\u1ee7 c\xe1c quy \u0111\u1ecbnh ph\xe1p lu\u1eadt Vi\u1ec7t Nam v\u1ec1 b\u1ea3o v\u1ec7 d\u1eef li\u1ec7u c\xe1 nh\xe2n v\xe0 c\xe1c ti\xeau chu\u1ea9n qu\u1ed1c t\u1ebf v\u1ec1 b\u1ea3o m\u1eadt th\xf4ng tin."})]}),(0,At.jsx)("div",{className:"text-center pt-8 border-t border-gray-600",children:(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"B\u1eb1ng vi\u1ec7c s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5, b\u1ea1n x\xe1c nh\u1eadn \u0111\xe3 \u0111\u1ecdc, hi\u1ec3u v\xe0 \u0111\u1ed3ng \xfd v\u1edbi ch\xednh s\xe1ch b\u1ea3o m\u1eadt n\xe0y."})}),(0,At.jsx)("div",{className:"text-center pt-8 border-t border-gray-600",children:(0,At.jsx)("button",{className:"button-style mx-auto",children:(0,At.jsx)(nt,{to:"/",children:"Quay l\u1ea1i trang ch\u1ee7"})})})]})]})});function zM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const VM=t.forwardRef(zM),KM=()=>(0,At.jsx)("div",{className:"min-h-screen text-left flex items-center justify-center px-4 z-50 relative",children:(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"mx-auto h-20 w-20 flex items-center justify-center rounded-full bg-red-900/50 mb-4",children:(0,At.jsx)(jT,{className:"h-10 w-10 text-red-400"})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"T\xe0i kho\u1ea3n b\u1ecb kh\xf3a"}),(0,At.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-orange-400 mr-2"}),(0,At.jsx)("p",{className:"text-gray-300",children:"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n hi\u1ec7n \u0111ang b\u1ecb t\u1ea1m kh\xf3a"})]})]}),(0,At.jsxs)("div",{className:"bg-gray-800 shadow-lg rounded-lg p-6 space-y-6 border border-gray-700",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"T\u1ea1i sao t\xe0i kho\u1ea3n b\u1ecb kh\xf3a?"}),(0,At.jsx)("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-4",children:(0,At.jsx)("p",{className:"text-sm text-red-300",children:"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n c\xf3 th\u1ec3 b\u1ecb kh\xf3a do vi ph\u1ea1m \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng, ho\u1ea1t \u0111\u1ed9ng b\u1ea5t th\u01b0\u1eddng, ho\u1eb7c y\xeau c\u1ea7u t\u1eeb qu\u1ea3n tr\u1ecb vi\xean."})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-md font-semibold text-white mb-3 text-center",children:"Li\xean h\u1ec7 Admin \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:"flex items-center p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg",children:[(0,At.jsx)(EM,{className:"h-5 w-5 text-blue-400 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-blue-300",children:"Email"}),(0,At.jsx)("a",{href:`mailto:${rw}`,className:"text-sm text-blue-400 hover:text-blue-300 hover:underline",children:rw})]})]}),(0,At.jsxs)("div",{className:"flex items-center p-3 bg-green-900/30 border border-green-700/50 rounded-lg",children:[(0,At.jsx)(VM,{className:"h-5 w-5 text-green-400 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-green-300",children:"Hotline h\u1ed7 tr\u1ee3"}),(0,At.jsx)("p",{className:"text-sm text-green-400",children:"Vui l\xf2ng li\xean h\u1ec7 qua email \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 nhanh nh\u1ea5t"})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-sm font-semibold text-yellow-300 mb-2",children:"\ud83d\udcdd Khi li\xean h\u1ec7, vui l\xf2ng cung c\u1ea5p:"}),(0,At.jsxs)("ul",{className:"text-sm text-yellow-400 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Email \u0111\u0103ng k\xfd t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"\u2022 T\xean hi\u1ec3n th\u1ecb (n\u1ebfu c\xf3)"}),(0,At.jsx)("li",{children:"\u2022 L\xfd do b\u1ea1n ngh\u0129 t\xe0i kho\u1ea3n b\u1ecb kh\xf3a"}),(0,At.jsx)("li",{children:"\u2022 Th\u1eddi gian ph\xe1t hi\u1ec7n t\xe0i kho\u1ea3n b\u1ecb kh\xf3a"})]})]}),(0,At.jsx)("div",{className:"text-center text-xs text-gray-400",children:(0,At.jsxs)("p",{children:["Ch\xfang t\xf4i s\u1ebd xem x\xe9t v\xe0 ph\u1ea3n h\u1ed3i trong v\xf2ng 24-48 gi\u1edd l\xe0m vi\u1ec7c.",(0,At.jsx)("br",{}),"C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i!"]})})]}),(0,At.jsx)("div",{className:"text-center",children:(0,At.jsxs)(nt,{to:"/login",className:"inline-flex items-center text-sm text-blue-400 hover:text-blue-300 hover:underline",children:[(0,At.jsx)(mt,{className:"h-4 w-4 mr-1"}),"Quay v\u1ec1 trang \u0111\u0103ng nh\u1eadp"]})}),(0,At.jsx)("div",{className:"text-center text-xs text-gray-500",children:(0,At.jsx)("p",{children:"\xa9 2024 Lunar Calendar. All rights reserved."})})]})});function GM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const qM=t.forwardRef(GM);function WM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const $M=t.forwardRef(WM);function XM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const YM=t.forwardRef(XM);function JM(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const ZM=t.forwardRef(JM);function ek(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const tk=t.forwardRef(ek);function nk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const rk=t.forwardRef(nk);function sk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const ik=t.forwardRef(sk),ak=()=>{const{currentUser:e,addUserStars:n}=Aw(),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)({currentStreak:0,lastLoginDate:null,totalRewards:0}),c=async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","dailyRewards"));if(e.exists()){const t=e.data();return a(t),t}return null}catch(e){return console.error("Error loading daily rewards settings:",e),null}},u=async e=>{if(e)try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(t.exists()){const e=t.data().dailyLoginStreak||{currentStreak:0,lastLoginDate:null,totalRewards:0};return l(e),e}}catch(t){console.error("Error loading user login streak:",t)}},d=(e,t)=>{if(!t||!t.enabled)return!1;if(!e.lastRewardDate)return!0;const n=t.intervalMode||"daily";let r;try{if(e.lastRewardDate&&"function"===typeof e.lastRewardDate.toDate)r=e.lastRewardDate.toDate();else{if(!e.lastRewardDate)return!0;r=new Date(e.lastRewardDate)}}catch(i){return console.error("Error parsing lastRewardDate:",i),!0}const s=new Date;if("daily"===n){const e=new Date(s.getFullYear(),s.getMonth(),s.getDate()),t=new Date(r.getFullYear(),r.getMonth(),r.getDate());return Math.floor((e-t)/864e5)>=1}if("interval"===n){return(s-r)/36e5>=(t.claimInterval||6)}return!1},h=(e,t)=>{if(!t||e<=1)return 1;const n=t.bonusMultiplier||1,r=Math.min(e/7,n);return Math.max(1,n+r)},m=async()=>{if(!e||!i||!i.enabled)return{success:!1,message:"H\u1ec7 th\u1ed1ng \u0111i\u1ec3m th\u01b0\u1edfng kh\xf4ng kh\u1ea3 d\u1ee5ng"};s(!0);try{var t;const s=e.uid;let a=null;try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",s));e.exists()&&(a=e.data())}catch(r){console.error("Error fetching user profile in claimDailyReward:",r)}const o=await u(s);if(!d(o,i))return{success:!1,message:"interval"===i.intervalMode?`B\u1ea1n c\u1ea7n ch\u1edd ${i.claimInterval||6} gi\u1edd \u0111\u1ec3 nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng ti\u1ebfp theo`:"B\u1ea1n \u0111\xe3 nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng h\xf4m nay r\u1ed3i"};const c=new Date,m=i.intervalMode||"daily";let A=null;if(o.lastRewardDate)try{A="function"===typeof o.lastRewardDate.toDate?o.lastRewardDate.toDate():new Date(o.lastRewardDate)}catch(r){console.error("Error parsing lastRewardDate in claim:",r),A=null}let g=1;if(A)if("daily"===m){const e=Math.floor((c-A)/864e5);1===e?g=Math.min(o.currentStreak+1,i.maxStreak||30):e>1&&(g=1)}else if("interval"===m){const e=i.claimInterval||6;g=(c-A)/36e5<=2*e?Math.min(o.currentStreak+1,i.maxStreak||30):1}let p=i.points||1;const f=(null===(t=a)||void 0===t?void 0:t.membershipTier)||"basic";if(i.tierRewards&&f){const e=i.tierRewards[f];void 0!==e&&(p=e)}const x=h(g,i),v=Math.floor(p*x),y=i.claimInterval||6,b={currentStreak:g,lastLoginDate:(0,Hb.O5)(),lastRewardDate:(0,Hb.O5)(),totalRewards:(o.totalRewards||0)+v,lastRewardAmount:v,totalClaims:(o.totalClaims||0)+1};await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",s),{dailyLoginStreak:b,updatedAt:(0,Hb.O5)()},{merge:!0});const w={basic:"Basic",standard:"Standard",premium:"Premium",master:"Master",sponsor:"Sponsor",admin:"Admin"}[f]||"Basic",N="interval"===m?`\u0110i\u1ec3m th\u01b0\u1edfng ${w} l\u1ea7n ${o.totalClaims||1} (${y}h)`:`\u0110i\u1ec3m th\u01b0\u1edfng ${w} ng\xe0y ${g}`;if(await n(s,v,N)){l(b),setTimeout((()=>{window.forceRefreshStarTransactions&&window.forceRefreshStarTransactions()}),1e3),await u(s);return{success:!0,message:"interval"===m?`B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c ${v} sao (${w})! L\u1ea7n th\u1ee9 ${(o.totalClaims||0)+1}`:`B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c ${v} sao (${w})! Streak: ${g} ng\xe0y`,rewardPoints:v,newStreak:g,streakMultiplier:x}}return{success:!1,message:"L\u1ed7i khi c\u1ed9ng \u0111i\u1ec3m th\u01b0\u1edfng"}}catch(r){return console.error("Error claiming daily reward:",r),{success:!1,message:"L\u1ed7i h\u1ec7 th\u1ed1ng khi nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng"}}finally{s(!1)}};return(0,t.useEffect)((()=>{c()}),[]),(0,t.useEffect)((()=>{e&&u(e.uid)}),[e]),(0,t.useEffect)((()=>{}),[e,o,i]),{loading:r,dailyRewardsSettings:i,userLoginStreak:o,claimDailyReward:m,canClaimDailyReward:!!i&&d(o,i),autoClaimOnLogin:async()=>{if(e)try{const t=await c();if(!t||!t.enabled)return;const n=await u(e.uid);if(d(n,t)){const e=await m();if(e.success)return e}}catch(t){console.error("Error auto claiming daily reward:",t)}},loadDailyRewardsSettings:c,loadUserLoginStreak:u,calculateStreakBonus:e=>h(e,i)}},ok=e=>{let{isOpen:n,onClose:r,onRewardClaimed:s}=e;const{currentUser:i}=Aw(),{dailyRewardsSettings:a,userLoginStreak:o,loading:l,canClaimDailyReward:c,claimDailyReward:u}=ak(),[d,h]=(0,t.useState)(!1),[m,A]=(0,t.useState)(""),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1);(0,t.useEffect)((()=>{n&&i&&(async()=>{if(null!==i&&void 0!==i&&i.uid){y(!0);try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",i.uid));e.exists()&&x(e.data())}catch(e){console.error("Error fetching user profile:",e)}finally{y(!1)}}})()}),[n,i]);return n&&i?(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:(0,At.jsxs)("div",{className:"bg-slate-800 rounded-xl max-w-md w-full shadow-2xl transform transition-all border border-slate-600",children:[(0,At.jsxs)("div",{className:"bg-slate-900/80 text-white p-6 rounded-t-xl relative",children:[(0,At.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:(0,At.jsx)(ky,{className:"h-6 w-6"})}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"bg-white/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3",children:(0,At.jsx)($M,{className:"h-8 w-8 text-white"})}),(0,At.jsx)("h2",{className:"text-xl font-bold",children:"interval"===(null===a||void 0===a?void 0:a.intervalMode)?"\u0110i\u1ec3m Th\u01b0\u1edfng \u0110\u1ecbnh K\u1ef3":"\u0110i\u1ec3m Th\u01b0\u1edfng H\xe0ng Ng\xe0y"}),(0,At.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:(()=>{const e=(null===a||void 0===a?void 0:a.intervalMode)||"daily",t=o.currentStreak||0;if("interval"===e){const e=o.totalClaims||0;return 0===e?"L\u1ea7n \u0111\u1ea7u nh\u1eadn th\u01b0\u1edfng!":`\u0110\xe3 nh\u1eadn th\u01b0\u1edfng ${e} l\u1ea7n`}return 0===t?"B\u1eaft \u0111\u1ea7u streak m\u1edbi!":1===t?"Ng\xe0y \u0111\u1ea7u ti\xean!":`Streak ${t} ng\xe0y li\xean ti\u1ebfp!`})()})]})]}),(0,At.jsx)("div",{className:"p-6",children:g?(0,At.jsx)("div",{className:"text-center",children:g.success?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"bg-green-900/30 border border-green-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,At.jsx)(tk,{className:"h-8 w-8 text-green-400"})}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Ch\xfac m\u1eebng! \ud83c\udf89"}),(0,At.jsx)("p",{className:"text-gray-300 mb-4",children:g.message}),(0,At.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500 rounded-lg p-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)(Tw,{className:"h-6 w-6 text-yellow-400 mr-2"}),(0,At.jsxs)("span",{className:"text-lg font-bold text-yellow-300",children:["+",g.rewardPoints," sao"]})]}),g.streakMultiplier>1&&(0,At.jsxs)("p",{className:"text-sm text-yellow-400 mt-2",children:["Bonus streak x",g.streakMultiplier.toFixed(1)]})]})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"bg-red-900/30 border border-red-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,At.jsx)(ky,{className:"h-8 w-8 text-red-400"})}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Kh\xf4ng th\u1ec3 nh\u1eadn th\u01b0\u1edfng"}),(0,At.jsx)("p",{className:"text-gray-300",children:g.message})]})}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg p-4 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(rk,{className:"h-5 w-5 text-orange-400 mr-2"}),(0,At.jsx)("span",{className:"font-medium text-gray-300",children:"interval"===(null===a||void 0===a?void 0:a.intervalMode)?"S\u1ed1 l\u1ea7n nh\u1eadn":"Streak hi\u1ec7n t\u1ea1i"})]}),(0,At.jsxs)("span",{className:"text-lg font-bold text-orange-400",children:["interval"===(null===a||void 0===a?void 0:a.intervalMode)?o.totalClaims||0:o.currentStreak||0," ","interval"===(null===a||void 0===a?void 0:a.intervalMode)?"l\u1ea7n":"ng\xe0y"]})]}),"daily"===(null===a||void 0===a?void 0:a.intervalMode)&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"w-full bg-slate-600 rounded-full h-2 mb-2",children:(0,At.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2 rounded-full transition-all duration-500",style:{width:`${(()=>{const e=(null===a||void 0===a?void 0:a.maxStreak)||30,t=o.currentStreak||0;return Math.min(t/e*100,100)})()}%`}})}),(0,At.jsxs)("p",{className:"text-xs text-gray-400 text-center",children:["T\u1ed1i \u0111a: ",(null===a||void 0===a?void 0:a.maxStreak)||30," ng\xe0y"]})]}),"interval"===(null===a||void 0===a?void 0:a.intervalMode)&&(0,At.jsxs)("p",{className:"text-xs text-gray-400 text-center",children:["Nh\u1eadn th\u01b0\u1edfng m\u1ed7i ",(null===a||void 0===a?void 0:a.claimInterval)||6," gi\u1edd"]})]}),(0,At.jsx)("div",{className:"text-center mb-6",children:(0,At.jsxs)("div",{className:"bg-blue-900/30 border border-blue-500 rounded-lg p-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,At.jsx)(Tw,{className:"h-6 w-6 text-yellow-400 mr-2"}),(0,At.jsxs)("span",{className:"text-xl font-bold text-blue-300",children:[c?(()=>{if(!a)return 1;const e=(o.currentStreak||0)+1;let t=a.points||1;const n=(null===f||void 0===f?void 0:f.membershipTier)||"basic";if(a.tierRewards&&n){const e=a.tierRewards[n];void 0!==e&&(t=e)}if("admin"===n);const r=(e=>{if(!a||e<=1)return 1;const t=a.bonusMultiplier||1,n=Math.min(e/7,t);return Math.max(1,t+n)})(e);return Math.floor(t*r)})():0," sao"]})]}),(0,At.jsx)("p",{className:"text-sm text-blue-300",children:c?"S\u1eb5n s\xe0ng nh\u1eadn th\u01b0\u1edfng!":"interval"===(null===a||void 0===a?void 0:a.intervalMode)?`Ch\u1edd ${(null===a||void 0===a?void 0:a.claimInterval)||6} gi\u1edd n\u1eefa`:"\u0110\xe3 nh\u1eadn th\u01b0\u1edfng h\xf4m nay"})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-white",children:o.totalRewards||0}),(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"T\u1ed5ng sao nh\u1eadn"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-white",children:"interval"===(null===a||void 0===a?void 0:a.intervalMode)?o.totalClaims||0:o.currentStreak||0}),(0,At.jsx)("div",{className:"text-sm text-gray-400",children:"interval"===(null===a||void 0===a?void 0:a.intervalMode)?"T\u1ed5ng l\u1ea7n nh\u1eadn":"Streak t\u1ed1i \u0111a"})]})]}),(0,At.jsx)("div",{className:"text-center",children:c?(0,At.jsx)("button",{onClick:async()=>{if(c){h(!0);try{const e=await u();p(e),e.success&&(s&&s(),setTimeout((()=>{r(),p(null)}),3e3))}catch(e){p({success:!1,message:"L\u1ed7i khi nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng"})}finally{h(!1)}}},disabled:d,className:"w-full button-style transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"\u0110ang nh\u1eadn..."]}):(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)($M,{className:"h-5 w-5 mr-2"}),"Nh\u1eadn Th\u01b0\u1edfng"]})}):(0,At.jsxs)("div",{className:"text-center py-3",children:[(0,At.jsx)(ik,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,At.jsx)("p",{className:"text-gray-300",children:"interval"===(null===a||void 0===a?void 0:a.intervalMode)?`H\xe3y quay l\u1ea1i sau ${(null===a||void 0===a?void 0:a.claimInterval)||6} gi\u1edd!`:"H\xe3y quay l\u1ea1i v\xe0o ng\xe0y mai!"})]})})]})})]})}):null};function lk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const ck=t.forwardRef(lk),uk=()=>{const{currentUser:e,userStars:n}=Aw(),[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)("daily"),[o,l]=(0,t.useState)("all"),[c,u]=(0,t.useState)(1),[d,h]=(0,t.useState)(!0),[m,A]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(null===e||void 0===e||!e.uid)return void h(!1);h(!0),A(null);const t=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"users",e.uid),(async e=>{if(e.exists()){const t=e.data().starTransactions||{},n=Object.entries(t).map((e=>{let[t,n]=e;return{id:t,...n,date:new Date(n.timestamp)}})).sort(((e,t)=>t.timestamp-e.timestamp));s(n)}else s([]);h(!1),A(null)}),(e=>{console.error("Error loading star transactions:",e),A(e.message),h(!1)}));return()=>t()}),[null===e||void 0===e?void 0:e.uid]);const g=async()=>{if(null!==e&&void 0!==e&&e.uid)try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e.uid));if(t.exists()){const e=t.data().starTransactions||{},n=Object.entries(e).map((e=>{let[t,n]=e;return{id:t,...n,date:new Date(n.timestamp)}})).sort(((e,t)=>t.timestamp-e.timestamp));s(n)}}catch(m){console.error("Error force refreshing transactions:",m)}};(0,t.useEffect)((()=>(window.forceRefreshStarTransactions=g,()=>{delete window.forceRefreshStarTransactions})),[null===e||void 0===e?void 0:e.uid]);const p=[...new Set(r.map((e=>{const t=new Date(e.timestamp);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`})))].sort().reverse(),f=r.filter((e=>{let t=!1;var n,r,s,a,l,c,u,d,h,m,A;("spend"===i&&(t="spend"===e.type),"daily"===i)&&(t="earn"===e.type&&(null===(n=e.reason)||void 0===n?void 0:n.includes("\u0110i\u1ec3m th\u01b0\u1edfng"))&&((null===(r=e.reason)||void 0===r?void 0:r.includes("\u0111\u0103ng nh\u1eadp"))||(null===(s=e.reason)||void 0===s?void 0:s.includes("ng\xe0y"))||(null===(a=e.reason)||void 0===a?void 0:a.includes("l\u1ea7n"))||(null===(l=e.reason)||void 0===l?void 0:l.includes("Daily login"))));"admin"===i&&(t="earn"===e.type&&("Star reward"===e.reason||(null===(c=e.reason)||void 0===c?void 0:c.includes("Admin c\u1ed9ng sao"))||e.reason&&!(null!==(u=e.reason)&&void 0!==u&&u.includes("\u0110i\u1ec3m th\u01b0\u1edfng")&&(null!==(d=e.reason)&&void 0!==d&&d.includes("\u0111\u0103ng nh\u1eadp")||null!==(h=e.reason)&&void 0!==h&&h.includes("ng\xe0y")||null!==(m=e.reason)&&void 0!==m&&m.includes("l\u1ea7n")||null!==(A=e.reason)&&void 0!==A&&A.includes("Daily login")))));if(!t)return!1;if("all"!==o){const t=new Date(e.timestamp);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`===o}return!0}));(0,t.useEffect)((()=>{}),[i,r,f]);const x=Math.ceil(f.length/7),v=7*(c-1),y=f.slice(v,v+7);(0,t.useEffect)((()=>{u(1)}),[i,o]);const b=e=>{var t,n,r,s,i,a;return"spend"===e.type?null!==(i=e.reason)&&void 0!==i&&i.includes("Temporary access")?(0,At.jsx)(ck,{className:"h-5 w-5 text-red-500"}):null!==(a=e.reason)&&void 0!==a&&a.includes("Truy c\u1eadp trang")?(0,At.jsx)(Iy,{className:"h-5 w-5 text-red-500"}):(0,At.jsx)(ck,{className:"h-5 w-5 text-red-500"}):null!==(t=e.reason)&&void 0!==t&&t.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp")||null!==(n=e.reason)&&void 0!==n&&n.includes("Daily login")||null!==(r=e.reason)&&void 0!==r&&r.includes("reward")||null!==(s=e.reason)&&void 0!==s&&s.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n")?(0,At.jsx)($M,{className:"h-5 w-5 text-green-500"}):(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500"})},w=e=>{if(!e)return"ghi nh\u1eadn sao";if(null!==e&&void 0!==e&&e.includes("Temporary access to")){const t=e.replace("Temporary access to ","");return`K\xedch ho\u1ea1t ${{lakinh_camera_activation:"Xem Cung T\xe0i L\u1ed9c",lakinh_advanced_compass:"La B\xe0n N\xe2ng Cao",lakinh_gps_integration:"T\xedch H\u1ee3p GPS",battu_advanced_analysis:"Ph\xe2n T\xedch B\xe1t T\u1ef1 N\xe2ng Cao",battu_yearly_forecast:"D\u1ef1 B\xe1o V\u1eadn M\u1ec7nh",luchao_divination_mode:"Ch\u1ebf \u0110\u1ed9 B\xf3i To\xe1n",luchao_historical_data:"D\u1eef Li\u1ec7u L\u1ecbch S\u1eed",export_data:"Xu\u1ea5t D\u1eef Li\u1ec7u",priority_support:"H\u1ed7 Tr\u1ee3 \u01afu Ti\xean",beta_features:"T\xednh N\u0103ng Beta"}[t]||t}`}return null!==e&&void 0!==e&&e.includes("Truy c\u1eadp trang")?e:null!==e&&void 0!==e&&e.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp ng\xe0y")||null!==e&&void 0!==e&&e.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n")?`${e}`:null!==e&&void 0!==e&&e.includes("Daily login")?"\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp":"Star reward"===e?"\u2b50 Admin c\u1ed9ng sao":`${e}`},N=r.filter((e=>"spend"===e.type)).reduce(((e,t)=>e+t.amount),0),j=r.filter((e=>"earn"===e.type)).reduce(((e,t)=>e+t.amount),0);return d?(0,At.jsx)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 text-left",children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"h-6 bg-slate-700 rounded w-1/3 mb-4"}),(0,At.jsx)("div",{className:"space-y-3",children:[1,2,3].map((e=>(0,At.jsx)("div",{className:"h-16 bg-slate-700 rounded"},e)))})]})}):m?(0,At.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 text-left",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-400"}),"L\u1ecbch S\u1eed nh\u1eadn sao"]}),(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("div",{className:"text-red-400 mb-2",children:"\u274c L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{className:"text-gray-400 text-sm",children:m})]})]}):(0,At.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 text-left",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,At.jsxs)("div",{className:"text-right flex items-center gap-2 md:justify-start justify-between w-full",children:[(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"S\u1ed1 sao hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("p",{className:"text-xl font-bold text-yellow-400 flex items-center gap-1",children:[n,"  \u2b50"]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-green-400 font-medium",children:"T\u1ed5ng nh\u1eadn \u0111\u01b0\u1ee3c"}),(0,At.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["+",j]})]}),(0,At.jsxs)("div",{className:"bg-red-900/30 border border-red-600 rounded-lg p-4 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-red-400 font-medium",children:"T\u1ed5ng chi ti\xeau"}),(0,At.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["-",N]})]})]}),(0,At.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[{key:"daily",label:"Sao th\u01b0\u1edfng",shortLabel:"\ud83c\udf81 Sao th\u01b0\u1edfng",count:r.filter((e=>{var t,n,r;return"earn"===e.type&&((null===(t=e.reason)||void 0===t?void 0:t.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp"))||(null===(n=e.reason)||void 0===n?void 0:n.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n"))||(null===(r=e.reason)||void 0===r?void 0:r.includes("Daily login")))})).length,total:r.filter((e=>{var t,n,r;return"earn"===e.type&&((null===(t=e.reason)||void 0===t?void 0:t.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp"))||(null===(n=e.reason)||void 0===n?void 0:n.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n"))||(null===(r=e.reason)||void 0===r?void 0:r.includes("Daily login")))})).reduce(((e,t)=>e+t.amount),0)},{key:"admin",label:"Sao quy \u0111\u1ed5i",shortLabel:"\u2b50 Quy \u0111\u1ed5i",count:r.filter((e=>{var t;return"earn"===e.type&&("Star reward"===e.reason||(null===(t=e.reason)||void 0===t?void 0:t.includes("Admin c\u1ed9ng sao"))||e.reason&&!e.reason.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp")&&!e.reason.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n")&&!e.reason.includes("Daily login"))})).length,total:r.filter((e=>{var t;return"earn"===e.type&&("Star reward"===e.reason||(null===(t=e.reason)||void 0===t?void 0:t.includes("Admin c\u1ed9ng sao"))||e.reason&&!e.reason.includes("\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp")&&!e.reason.includes("\u0110i\u1ec3m th\u01b0\u1edfng l\u1ea7n")&&!e.reason.includes("Daily login"))})).reduce(((e,t)=>e+t.amount),0)},{key:"spend",label:"Sao s\u1eed d\u1ee5ng",shortLabel:"\ud83d\udcb8 S\u1eed d\u1ee5ng",count:r.filter((e=>"spend"===e.type)).length,total:r.filter((e=>"spend"===e.type)).reduce(((e,t)=>e+t.amount),0)}].map((e=>{let{key:t,label:n,shortLabel:r,count:s,total:o}=e;return(0,At.jsxs)("button",{onClick:()=>a(t),className:"px-2 py-2 rounded-lg text-xs sm:text-sm font-medium transition-colors text-center "+(i===t?"bg-yellow-400 text-black button-style-blue !w-full":"bg-slate-800 text-gray-300 hover:bg-slate-700"),children:[(0,At.jsx)("span",{className:"hidden sm:inline",children:n}),(0,At.jsx)("span",{className:"sm:hidden",children:r})]},t)}))}),(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"bg-slate-800 w-full h-[34px] border border-slate-600 text-gray-300 text-sm rounded-lg px-3 py-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 th\xe1ng"}),p.map((e=>{const[t,n]=e.split("-"),r=new Date(t,n-1).toLocaleDateString("vi-VN",{month:"long",year:"numeric"});return(0,At.jsx)("option",{value:e,children:r},e)}))]})}),(0,At.jsx)("div",{className:"bg-slate-800/50 border border-slate-600 rounded-lg p-2 px-3 mb-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,At.jsxs)("div",{className:"text-gray-300 font-medium "+("daily"===i?"text-green-400":"admin"===i?"text-blue-400":"text-red-400"),children:["daily"===i?"T\u1ed5ng sao th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp":"admin"===i?"T\u1ed5ng sao quy \u0111\u1ed5i":"T\u1ed5ng sao \u0111\xe3 s\u1eed d\u1ee5ng","all"!==o&&(0,At.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",new Date(o+"-01").toLocaleDateString("vi-VN",{month:"long",year:"numeric"}),")"]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"text-lg font-bold text-white",children:[f.reduce(((e,t)=>e+t.amount),0)," \u2b50"]}),(0,At.jsxs)("div",{className:"text-xs text-gray-400",children:[f.length," ghi nh\u1eadn"]})]})]})}),(0,At.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===y.length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,At.jsx)(Tw,{className:"h-12 w-12 mx-auto mb-3 text-gray-600"}),(0,At.jsx)("p",{children:0===r.length?"Ch\u01b0a c\xf3 ghi nh\u1eadn n\xe0o":"Kh\xf4ng c\xf3 ghi nh\u1eadn n\xe0o"}),0===r.length&&(0,At.jsx)("p",{className:"text-xs mt-2",children:"ghi nh\u1eadn s\u1ebd xu\u1ea5t hi\u1ec7n khi b\u1ea1n truy c\u1eadp c\xe1c trang tr\u1eeb \u0111i\u1ec3m ho\u1eb7c nh\u1eadn th\u01b0\u1edfng"})]}):y.map((e=>{return(0,At.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-800/50 rounded-lg hover:bg-slate-800 transition-colors border border-slate-700",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3 text-sm text-left",children:[b(e),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-white",children:w(e.reason)}),(0,At.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,At.jsx)("span",{className:"text-xs text-gray-400",children:(t=e.date,t.toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}))}),e.expiresAt&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("span",{children:"\u2022"}),(0,At.jsx)("span",{children:e.expiresAt>Date.now()?"C\xf2n hi\u1ec7u l\u1ef1c":"\u0110\xe3 h\u1ebft h\u1ea1n"})]})]})]})]}),(0,At.jsxs)("div",{className:"font-bold text-lg "+("spend"===e.type?"text-red-400":"text-green-400"),children:["spend"===e.type?"-":"+",e.amount," \u2b50"]})]},e.id);var t}))}),x>1&&(0,At.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,At.jsx)("button",{onClick:()=>u((e=>Math.max(e-1,1))),disabled:1===c,className:"px-3 py-2 text-sm bg-slate-800 border border-slate-600 rounded-lg text-gray-300 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Trang tr\u01b0\u1edbc"}),(0,At.jsx)("div",{className:"flex items-center gap-2",children:x<=5?Array.from({length:x},((e,t)=>t+1)).map((e=>(0,At.jsx)("button",{onClick:()=>u(e),className:"px-3 py-2 text-sm rounded-lg transition-colors "+(e===c?"bg-green-900/30 border border-green-600 text-green-400":"bg-slate-800 border border-slate-600 text-gray-300 hover:bg-slate-700"),children:e},e))):(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("span",{className:"text-sm text-gray-400",children:["Trang ",c," / ",x]})})}),(0,At.jsx)("button",{onClick:()=>u((e=>Math.min(e+1,x))),disabled:c===x,className:"px-3 py-2 text-sm bg-slate-800 border border-slate-600 rounded-lg text-gray-300 hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Trang sau"})]}),y.length>0&&(0,At.jsxs)("div",{className:"mt-4 text-center text-xs text-gray-500",children:["Hi\u1ec3n th\u1ecb ",y.length," / ",f.length," ghi nh\u1eadn",x>1&&` (Trang ${c}/${x})`]})]})},dk=()=>{const{userPermissions:e,permissionsLoading:t,hasPagePermission:n,loadUserPermissions:r,currentUser:s,membershipTier:i,membershipExpiry:a,userStars:o,starsLastReset:l,membershipTiers:c,consumeUserStars:u,checkAndResetStars:d}=Aw(),h=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw};return{userPermissions:e,permissionsLoading:t,membershipTier:i,membershipExpiry:a,userStars:o,starsLastReset:l,membershipTiers:c,canAccessPage:e=>n(e),canAccessAllPages:e=>e.every((e=>n(e))),canAccessAnyPage:e=>e.some((e=>n(e))),hasPagePermission:n,getAccessiblePages:()=>["home","calendar","solar","battu","luchao","lakinh","kymon","profile"].filter((e=>n(e))),getRestrictedPages:()=>["home","calendar","solar","battu","luchao","lakinh","kymon","profile"].filter((e=>!n(e))),isAdmin:h,isAuthenticated:()=>{const e=h(),t=s&&s.emailVerified;return e||t},refreshPermissions:async()=>{s&&s.uid&&await r(s.uid)},consumeStars:async e=>!(!s||!s.uid)&&await u(s.uid,e),hasEnoughStars:e=>{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");return!(!t||n!==rw)||o>=e},checkStarsReset:async()=>{if(s&&s.uid)try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",s.uid));if(e.exists()){const t=e.data();await d(s.uid,i,l,t)}}catch(e){console.error("Error checking stars reset:",e)}},getMembershipTierInfo:()=>c&&i?c[i]||c.basic:{label:"Basic",icon:"\u2b50",color:"gray",maxStars:20,resetPeriod:"monthly"},isExpired:()=>!!a&&new Date>a,getDaysRemaining:()=>{if(!a)return null;const e=a.getTime()-(new Date).getTime();return Math.ceil(e/864e5)}}},hk="lunar_pwa_preferences",mk=()=>{const[e,n]=(0,t.useState)({dontAskAgain:!1,dontAskUntil:null,lastShown:null,installCount:0,dismissCount:0});(0,t.useEffect)((()=>{(()=>{try{const e=kT(hk);e&&n((t=>({...t,...e})))}catch(e){console.error("Error loading PWA preferences:",e)}})()}),[]);const r=(0,t.useCallback)((e=>{try{MT(hk,e,365),n(e)}catch(t){console.error("Error saving PWA preferences:",t)}}),[]),s=(0,t.useCallback)((()=>{if(e.dontAskAgain)return!1;if(e.dontAskUntil){if((new Date).getTime()<new Date(e.dontAskUntil).getTime())return!1}return!0}),[e]),i=(0,t.useCallback)((()=>{const t=new Date;t.setDate(t.getDate()+1);const n={...e,dontAskAgain:!1,dontAskUntil:t.toISOString(),lastShown:(new Date).toISOString()};r(n)}),[e,r]),a=(0,t.useCallback)((()=>{const t=new Date;t.setDate(t.getDate()+30);const n={...e,dontAskAgain:!1,dontAskUntil:t.toISOString(),lastShown:(new Date).toISOString()};r(n)}),[e,r]),o=(0,t.useCallback)((()=>{const t={...e,dontAskAgain:!0,dontAskUntil:null,lastShown:(new Date).toISOString()};r(t)}),[e,r]),l=(0,t.useCallback)((t=>{const n={...e,lastShown:(new Date).toISOString(),installCount:"accepted"===t?e.installCount+1:e.installCount,dismissCount:"dismissed"===t?e.dismissCount+1:e.dismissCount};if("dismissed"===t){const e=new Date;e.setDate(e.getDate()+1),n.dontAskUntil=e.toISOString()}r(n)}),[e,r]),c=(0,t.useCallback)((()=>{r({dontAskAgain:!1,dontAskUntil:null,lastShown:null,installCount:0,dismissCount:0})}),[r]),u=(0,t.useCallback)((()=>{if(!e.dontAskUntil)return 0;const t=(new Date).getTime(),n=new Date(e.dontAskUntil).getTime()-t;return n<=0?0:Math.ceil(n/864e5)}),[e.dontAskUntil]);return{preferences:e,shouldShowInstallPrompt:s,setDontAskFor1Day:i,setDontAskFor30Days:a,setDontAskPermanently:o,trackInstallAttempt:l,resetPreferences:c,getDaysUntilNextShow:u}},Ak=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(null),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),{shouldShowInstallPrompt:c,setDontAskFor30Days:u,setDontAskPermanently:d,trackInstallAttempt:h,getDaysUntilNextShow:m}=mk();(0,t.useEffect)((()=>{const e=e=>{e.preventDefault(),s(e),n(!0)};return window.addEventListener("beforeinstallprompt",e),window.matchMedia("(display-mode: standalone)").matches&&(a(!0),n(!1)),window.addEventListener("appinstalled",(()=>{a(!0),n(!1),window.showToast&&window.showToast("\u1ee8ng d\u1ee5ng \u0111\xe3 \u0111\u01b0\u1ee3c c\xe0i \u0111\u1eb7t th\xe0nh c\xf4ng! \ud83c\udf89","success")})),()=>{window.removeEventListener("beforeinstallprompt",e)}}),[]);if(i||!e||!c())return null;const A=m();return(0,At.jsx)("div",{className:"fixed bottom-4 right-4 z-50 text-left",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("img",{src:"/appstore.png",alt:"App Icon",className:"w-12 h-12 rounded-lg",onError:e=>{e.target.src="/appstore.png"}})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"C\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Th\xeam v\xe0o m\xe0n h\xecnh ch\xednh \u0111\u1ec3 truy c\u1eadp nhanh"})]}),(0,At.jsxs)("div",{className:"flex-shrink-0 space-x-2",children:[(0,At.jsx)("button",{onClick:async()=>{if(r)try{r.prompt();const{outcome:e}=await r.userChoice;"accepted"===e?(window.showToast&&window.showToast("C\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng th\xe0nh c\xf4ng! \ud83c\udf89","success"),n(!1),a(!0),h("accepted")):(window.showToast&&window.showToast("B\u1ea1n \u0111\xe3 t\u1eeb ch\u1ed1i c\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng.","info"),h("dismissed"))}catch(e){console.error("L\u1ed7i khi c\xe0i \u0111\u1eb7t:",e),window.showToast&&window.showToast("C\xf3 l\u1ed7i x\u1ea3y ra khi c\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng.","error"),h("error")}else window.showToast&&window.showToast("Kh\xf4ng th\u1ec3 c\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng. Vui l\xf2ng th\u1eed l\u1ea1i sau.","error")},className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium px-3 py-2 rounded-md transition-colors duration-200",children:"C\xe0i \u0111\u1eb7t"}),(0,At.jsx)("button",{onClick:()=>l(!o),className:"text-gray-400 hover:text-gray-600 p-1 hidden","aria-label":"T\xf9y ch\u1ecdn",children:(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),(0,At.jsx)("button",{onClick:()=>{n(!1),h("dismissed"),window.showToast&&window.showToast("S\u1ebd kh\xf4ng h\u1ecfi l\u1ea1i trong 1 ng\xe0y t\u1edbi.","info")},className:"text-gray-400 hover:text-gray-600 p-1","aria-label":"\u0110\xf3ng",children:(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),!o&&(0,At.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,At.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Kh\xf4ng hi\u1ec3n th\u1ecb l\u1ea1i:"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("button",{onClick:()=>{u(),n(!1),l(!1),window.showToast&&window.showToast("S\u1ebd kh\xf4ng h\u1ecfi l\u1ea1i trong 30 ng\xe0y t\u1edbi.","info")},className:"w-full text-left text-xs text-gray-700 hover:text-blue-600 py-1 px-2 rounded hover:bg-gray-50 transition-colors",children:"\u23f0 Trong 30 ng\xe0y t\u1edbi"}),(0,At.jsx)("button",{onClick:()=>{d(),n(!1),l(!1),window.showToast&&window.showToast("S\u1ebd kh\xf4ng hi\u1ec3n th\u1ecb th\xf4ng b\xe1o c\xe0i \u0111\u1eb7t n\u1eefa.","info")},className:"w-full text-left text-xs text-gray-700 hover:text-red-600 py-1 px-2 rounded hover:bg-gray-50 transition-colors",children:"\ud83d\udeab V\u0129nh vi\u1ec5n"})]})]}),A>0&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["S\u1ebd hi\u1ec3n th\u1ecb l\u1ea1i sau ",A," ng\xe0y"]})]})})},gk=()=>{Gb("profile");const{currentUser:e,showDailyRewardsModal:n,setShowDailyRewardsModal:r}=Aw(),{canAccessPage:s,isAdmin:i,membershipTier:a,membershipExpiry:o,userStars:l,getMembershipTierInfo:c}=dk(),[u,d]=(0,t.useState)(!0),[h,m]=(0,t.useState)(!1),[A,g]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),[x,v]=(0,t.useState)("profile");(0,t.useEffect)((()=>{"app"===x&&v("profile")}),[x]);const[y,b]=(0,t.useState)({displayName:"",birthDate:"",birthTime:"",homeDirection:"",gender:""}),[w,N]=(0,t.useState)(null),j=()=>{const e=c(),t={basic:{label:e.label||"Basic",color:e.color||"gray",icon:e.icon||"\u2b50",maxStars:e.maxStars||20,resetPeriod:e.resetPeriod||"monthly",bgColor:"bg-slate-800/50",textColor:"text-gray-300",borderColor:"border-slate-600"},standard:{label:e.label||"Standard",color:e.color||"blue",icon:e.icon||"\ud83c\udf1f",maxStars:e.maxStars||200,resetPeriod:e.resetPeriod||"monthly",bgColor:"bg-blue-900/20",textColor:"text-blue-300",borderColor:"border-blue-500"},premium:{label:e.label||"Premium",color:e.color||"purple",icon:e.icon||"\ud83d\udc8e",maxStars:e.maxStars||3e3,resetPeriod:e.resetPeriod||"yearly",bgColor:"bg-purple-900/20",textColor:"text-purple-300",borderColor:"border-purple-500"},master:{label:e.label||"Master",color:e.color||"yellow",icon:e.icon||"\ud83d\udc51",maxStars:e.maxStars||200,resetPeriod:e.resetPeriod||"daily",bgColor:"bg-yellow-900/20",textColor:"text-yellow-300",borderColor:"border-yellow-500"},sponsor:{label:e.label||"Sponsor",color:e.color||"orange",icon:e.icon||"\ud83c\udfc5",maxStars:e.maxStars||5e3,resetPeriod:e.resetPeriod||"yearly",bgColor:"bg-orange-900/20",textColor:"text-orange-300",borderColor:"border-orange-500"}};return t[a]||t.basic},C=()=>!!o&&new Date>o,T=()=>{if(!o)return null;const e=o.getTime()-(new Date).getTime(),t=Math.ceil(e/864e5);return t>0?t:0},S=()=>{if(!o)return null;if(C())return"\u0110\xe3 h\u1ebft h\u1ea1n";const e=(()=>{if(!o)return null;if(C())return null;const e=o.getTime()-(new Date).getTime(),t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),r=Math.floor(e%36e5/6e4);return t>0?{days:t,hours:n,minutes:r}:n>0?{days:0,hours:n,minutes:r}:{days:0,hours:0,minutes:r}})();if(!e)return"S\u1eafp h\u1ebft h\u1ea1n";const{days:t,hours:n,minutes:r}=e;return t>1?`C\xf2n ${t} ng\xe0y, ${n} gi\u1edd`:1===t?`C\xf2n 1 ng\xe0y, ${n} gi\u1edd ${r} ph\xfat`:n>0?`C\xf2n ${n} gi\u1edd ${r} ph\xfat`:r>0?`C\xf2n ${r} ph\xfat`:"S\u1eafp h\u1ebft h\u1ea1n"};(0,t.useEffect)((()=>{(async()=>{if(e&&Qb.db)try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"profiles",e.uid));if(t.exists()){const n=t.data();b({displayName:n.displayName||e.displayName||"",birthDate:n.birthDate||"",birthTime:n.birthTime||"",homeDirection:n.homeDirection||"",gender:n.gender||""})}else b((t=>({...t,displayName:e.displayName||""})))}catch(t){console.error("L\u1ed7i khi t\u1ea3i profile:",t),f("Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin c\xe1 nh\xe2n")}finally{d(!1)}else d(!1)})()}),[e]),(0,t.useEffect)((()=>{if(!o)return;const e=setInterval((()=>{f("")}),6e4);return()=>clearInterval(e)}),[o]),(0,t.useEffect)((()=>{N((e=>{if(!e)return null;try{const[t,n,r]=e.split("-").map(Number),s=nb(r,n,t),i=rb(s);return{solarDate:`${r}/${n}/${t}`,lunarDate:`${s.day}/${s.month}/${s.year}${s.leap?" (nhu\u1eadn)":""}`,canChi:i,weekDay:new Date(t,n-1,r).getDay()}}catch(p){return console.error("L\u1ed7i t\xednh to\xe1n l\u1ecbch \xe2m:",p),null}})(y.birthDate))}),[y.birthDate]);const _=e=>{const{name:t,value:n}=e.target;b((e=>({...e,[t]:n})))};return u?(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-300",children:"\u0110ang t\u1ea3i th\xf4ng tin..."})]})}):(0,At.jsxs)("div",{className:"min-h-screen p-4 z-40 relative",children:[(0,At.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,At.jsxs)("div",{className:"text-center mb-8",children:[(0,At.jsx)(qM,{className:"mx-auto h-16 w-16 text-blue-400 mb-4"}),!i()&&(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)(Ak,{})}),!i()&&a&&a&&(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsxs)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border "+(C()?"bg-red-900/50 text-red-300 border-red-500":j().bgColor+" "+j().textColor+" "+j().borderColor),children:[(0,At.jsx)("span",{className:"mr-1",children:j().icon}),(0,At.jsx)("span",{className:"mr-2",children:j().label})]})}),i()?(0,At.jsx)("div",{className:"text-yellow-500 text-2xl font-bold",children:"Administrator"}):(0,At.jsxs)("div",{className:"text-white",children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"H\u1ed3 s\u01a1 c\xe1 nh\xe2n"}),(0,At.jsx)("p",{className:"text-gray-400",children:"Qu\u1ea3n l\xfd th\xf4ng tin v\xe0 h\u1ea1ng th\xe0nh vi\xean"})]})]}),!i()&&(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsxs)("div",{className:"flex space-x-1 bg-slate-800 p-1 rounded-lg",children:[(0,At.jsxs)("button",{onClick:()=>v("profile"),className:"flex-1 py-2 px-2 text-sm font-medium rounded-md transition-colors "+("profile"===x?"button-style":"text-gray-400 hover:text-gray-300 hover:bg-slate-700"),children:[(0,At.jsx)(qM,{className:"h-4 w-4 inline mr-2"}),"Th\xf4ng tin"]}),(0,At.jsxs)("button",{onClick:()=>v("membership"),className:"flex-1 py-2 px-2 text-sm font-medium rounded-md transition-colors relative group "+("membership"===x?"button-style":"text-gray-400 hover:text-gray-300 hover:bg-slate-700"),children:[(0,At.jsx)(WC,{className:"h-4 w-4 inline mr-2"}),"H\u1ea1ng",o&&a&&"basic"!==a&&(()=>{try{const e=o.toDate?o.toDate():new Date(o),t=new Date,n=e.getTime()-t.getTime(),r=Math.ceil(n/864e5);if(r<=7&&r>0)return(0,At.jsx)("span",{className:"absolute -top-1 -right-1 text-white text-xs rounded-full flex items-center justify-center font-medium "+(r<=3?"bg-red-500 h-5 w-5":"bg-orange-500 h-4 w-4"),title:`G\xf3i ${a} s\u1ebd h\u1ebft h\u1ea1n sau ${r} ng\xe0y`,children:r<=3?r:"!"});if(r<=0)return(0,At.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",title:"G\xf3i th\xe0nh vi\xean \u0111\xe3 h\u1ebft h\u1ea1n",children:"EXP"})}catch(p){}return null})()]}),(0,At.jsxs)("button",{onClick:()=>v("stars"),className:"flex-1 py-2 px-2 text-sm font-medium rounded-md transition-colors "+("stars"===x?"button-style":"text-gray-400 hover:text-gray-300 hover:bg-slate-700"),children:[(0,At.jsx)(Iy,{className:"h-4 w-4 inline mr-2"}),"L\u1ecbch s\u1eed"]})]})}),(i()||"profile"===x)&&(0,At.jsx)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700 text-left",children:(0,At.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e&&Qb.db){m(!0),f(""),g("");try{y.displayName!==e.displayName&&await(0,nw.r7)(e,{displayName:y.displayName}),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"profiles",e.uid),{...y,userId:e.uid,email:e.email,updatedAt:(0,Hb.O5)(),createdAt:(0,Hb.O5)()},{merge:!0}),g("\u0110\xe3 l\u01b0u th\xf4ng tin c\xe1 nh\xe2n th\xe0nh c\xf4ng!"),gj(e.uid),setTimeout((()=>g("")),3e3)}catch(n){console.error("L\u1ed7i khi l\u01b0u profile:",n),f("Kh\xf4ng th\u1ec3 l\u01b0u th\xf4ng tin. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{m(!1)}}else f("Kh\xf4ng th\u1ec3 l\u01b0u th\xf4ng tin. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.")},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"T\xean hi\u1ec3n th\u1ecb"}),(0,At.jsx)("input",{type:"text",name:"displayName",value:y.displayName,onChange:_,className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nh\u1eadp t\xean hi\u1ec3n th\u1ecb"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),(0,At.jsx)("input",{type:"email",value:(null===e||void 0===e?void 0:e.email)||"",disabled:!0,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-gray-400 cursor-not-allowed"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ng\xe0y sinh"}),(0,At.jsx)("input",{type:"date",name:"birthDate",value:y.birthDate,onChange:_,className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gi\u1edd sinh"}),(0,At.jsx)("input",{type:"time",name:"birthTime",value:y.birthTime,onChange:_,className:"w-full px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gi\u1edbi t\xednh"}),(0,At.jsxs)("select",{name:"gender",value:y.gender,onChange:_,className:"w-full h-[40px] px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn gi\u1edbi t\xednh"}),[{value:"male",label:"Nam"},{value:"female",label:"N\u1eef"},{value:"other",label:"Kh\xe1c"}].map((e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"H\u01b0\u1edbng nh\xe0"}),(0,At.jsxs)("select",{name:"homeDirection",value:y.homeDirection,onChange:_,className:"w-full h-[40px] px-3 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn h\u01b0\u1edbng nh\xe0"}),[{value:"north",label:"B\u1eafc"},{value:"northeast",label:"\u0110\xf4ng B\u1eafc"},{value:"east",label:"\u0110\xf4ng"},{value:"southeast",label:"\u0110\xf4ng Nam"},{value:"south",label:"Nam"},{value:"southwest",label:"T\xe2y Nam"},{value:"west",label:"T\xe2y"},{value:"northwest",label:"T\xe2y B\u1eafc"}].map((e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]}),p&&(0,At.jsx)("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg",children:p}),A&&(0,At.jsx)("div",{className:"bg-green-900/50 border border-green-500 text-green-200 px-4 py-3 rounded-lg",children:A}),(0,At.jsxs)("div",{className:"flex flex-col-reverse md:flex-row gap-6 space-y-3 md:space-y-0",children:[(0,At.jsx)("button",{type:"button",onClick:async()=>{if(!e||!Qb.db)return void f("Kh\xf4ng th\u1ec3 x\xf3a th\xf4ng tin. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i.");if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 th\xf4ng tin c\xe1 nh\xe2n? H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c.")){m(!0),f(""),g("");try{await(0,Hb.BN)((0,Hb.doc)(Qb.db,"profiles",e.uid),{userId:e.uid,email:e.email,updatedAt:(0,Hb.O5)(),deleted:!0}),b({displayName:e.displayName||"",birthDate:"",birthTime:"",homeDirection:"",gender:""}),g("\u0110\xe3 x\xf3a th\xf4ng tin c\xe1 nh\xe2n th\xe0nh c\xf4ng!"),gj(e.uid),setTimeout((()=>g("")),3e3)}catch(t){console.error("L\u1ed7i khi x\xf3a profile:",t),f("Kh\xf4ng th\u1ec3 x\xf3a th\xf4ng tin. Vui l\xf2ng th\u1eed l\u1ea1i.")}finally{m(!1)}}},disabled:h,className:"w-full opacity-50 h-10 button-style-red",children:"X\xf3a th\xf4ng tin c\xe1 nh\xe2n"}),(0,At.jsx)("button",{type:"submit",disabled:h,className:"w-full h-10 button-style",children:h?(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang l\u01b0u..."]}):"L\u01b0u th\xf4ng tin"})]})]})}),!i()&&"membership"===x&&(0,At.jsxs)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700",children:[(0,At.jsx)("div",{className:"flex items-center mb-6",children:(0,At.jsx)("h2",{className:"text-xl font-semibold text-white",children:"H\u1ea1ng th\xe0nh vi\xean"})}),(0,At.jsxs)("div",{className:`p-4 rounded-lg border-2 ${j().borderColor} ${j().bgColor} mb-6`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-3",children:j().icon}),(0,At.jsx)("h3",{className:`text-lg font-bold ${j().textColor}`,children:j().label})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"flex items-center justify-end text-yellow-400 mb-1",children:[(0,At.jsx)(WC,{className:"h-4 w-4 mr-1"}),(0,At.jsx)("span",{className:"font-bold",children:l||0}),(0,At.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["/ ",j().maxStars]})]}),"master"===a?(0,At.jsx)("div",{className:"text-xs text-green-400"}):o?(0,At.jsx)("div",{children:(0,At.jsxs)("div",{className:"text-xs text-red-300",children:["H\u1ebft h\u1ea1n: ",o.toLocaleDateString("vi-VN")]})}):(0,At.jsx)("div",{className:"text-xs text-gray-400"})]})]}),(0,At.jsxs)("div",{className:"mb-3",children:[(0,At.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,At.jsx)("span",{children:"\u2b50 c\xf2n l\u1ea1i"}),(0,At.jsx)("span",{className:"text-gray-500",children:"daily"===j().resetPeriod?"Reset h\xe0ng ng\xe0y":"weekly"===j().resetPeriod?"Reset h\xe0ng tu\u1ea7n":"monthly"===j().resetPeriod?"Reset h\xe0ng th\xe1ng":"yearly"===j().resetPeriod?"Reset h\xe0ng n\u0103m":"Reset kh\xf4ng x\xe1c \u0111\u1ecbnh"})]}),(0,At.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+(l/j().maxStars>.7?"bg-sky-500":l/j().maxStars>.3?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(100,l/j().maxStars*100)}%`}})})]}),o&&!C()&&(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,At.jsx)("span",{children:"Th\u1eddi gian c\xf2n l\u1ea1i"}),(0,At.jsx)("span",{className:"text-gray-300",children:S()})]}),(0,At.jsx)("div",{className:"w-full bg-slate-700 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+(T()>30?"bg-sky-500":T()>7?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(100,T()/("standard"===a||"basic"===a?30:365)*100)}%`}})})]}),(0,At.jsx)("div",{className:"mt-6 text-center",children:(0,At.jsxs)("button",{onClick:()=>r(!0),className:"inline-flex items-center px-4 py-2 rounded-lg font-medium transition-all button-style-blue",children:[(0,At.jsx)($M,{className:"h-5 w-5 mr-2"}),"\u0110i\u1ec3m Th\u01b0\u1edfng H\xe0ng Ng\xe0y"]})})]}),(0,At.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,At.jsxs)("h4",{className:"text-md font-semibold text-gray-300 mb-3 flex items-center",children:[(0,At.jsx)(dt,{className:"h-5 w-5 mr-2"}),"Quy\u1ec1n truy c\u1eadp"]}),(0,At.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,At.jsx)("div",{className:"text-xs text-gray-300 text-left flex items-center",children:"B\u1ea1n c\u1ea7n c\xf3 \u2b50 \u0111\u1ec3 truy c\u1eadp t\xednh n\u0103ng c\xe1c trang \u0111\u1eb7c bi\u1ec7t"})}),"basic"===a&&(0,At.jsxs)("div",{className:"mt-4 p-3 bg-blue-900/30 border border-blue-500 rounded-lg",children:[(0,At.jsx)("h5",{className:"text-sm font-medium text-blue-300 mb-1",children:"\ud83d\udca1 Li\xean h\u1ec7 admin \u0111\u1ec3 n\xe2ng c\u1ea5p"}),(0,At.jsxs)("p",{className:"text-xs text-blue-200 mb-2",children:["l\xean ",(0,At.jsx)("b",{children:"Standard, Premium"})," ho\u1eb7c ",(0,At.jsx)("b",{children:"Master"})," s\u1ebd cung c\u1ea5p cho b\u1ea1n nhi\u1ec1u \u2b50 h\u01a1n."]}),(0,At.jsxs)("div",{className:"text-xs text-gray-300 md:flex items-center justify-center",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center mb-2 md:mb-0",children:[(0,At.jsx)(YM,{className:"h-4 w-4 mx-2 text-blue-400"})," ",(0,At.jsx)("a",{href:"mailto:thiendianhan.app@gmail.com",className:"underline",children:"thiendianhan.app@gmail.com"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-center mb-2 md:mb-0 hidden",children:[(0,At.jsx)(ZM,{className:"h-4 w-4 mx-2 text-blue-400"})," 0123-456-789"]})]})]}),o&&!C()&&T()<=7&&(0,At.jsxs)("div",{className:"mt-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-left",children:[(0,At.jsx)("h5",{className:"text-sm font-medium text-red-300 mb-3",children:"\u26a0\ufe0f S\u1eafp h\u1ebft h\u1ea1n"}),(0,At.jsxs)("p",{className:"text-xs text-red-200 mb-3",children:["H\u1ea1ng ",(0,At.jsx)("b",{children:j().label})," c\u1ee7a b\u1ea1n s\u1ebd h\u1ebft h\u1ea1n trong ",(0,At.jsx)("b",{children:S()}),".",(0,At.jsx)("br",{}),"Li\xean h\u1ec7 ",(0,At.jsx)("a",{href:"mailto:thiendianhan.app@gmail.com",className:"underline",children:"thiendianhan.app@gmail.com"})," \u0111\u1ec3 gia h\u1ea1n ho\u1eb7c n\xe2ng c\u1ea5p."]}),(0,At.jsxs)("p",{className:"text-xs text-red-200 mb-3",children:[(0,At.jsx)("b",{children:"L\u01b0u \xfd Khi h\u1ebft h\u1ea1n"}),", h\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng:"]}),(0,At.jsxs)("ul",{className:"text-xs text-red-200 mb-3 ml-4 list-disc",children:[(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-red-500",children:"Tr\u1eeb"})," \u0111i ",j().maxStars," \u2b50 c\u1ee7a g\xf3i ",(0,At.jsx)("b",{children:j().label})]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-green-500",children:"C\u1ed9ng"})," 20 \u2b50 c\u1ee7a g\xf3i ",(0,At.jsx)("b",{children:"Basic"})]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-green-500",children:"Gi\u1eef l\u1ea1i"})," to\xe0n b\u1ed9 ",(0,At.jsx)("b",{children:"\u2b50 Quy \u0111\u1ed5i"})," (n\u1ebfu c\xf3)"]}),(0,At.jsxs)("li",{children:[(0,At.jsx)("b",{className:"text-red-500",children:"Chuy\u1ec3n v\u1ec1"})," g\xf3i ",(0,At.jsx)("b",{children:"Basic"})]})]}),(0,At.jsx)("p",{className:"text-xs text-yellow-200",children:"(\u2b50 t\u1eeb Quy \u0111\u1ed5i lu\xf4n \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 v\xe0 kh\xf4ng b\u1ecb m\u1ea5t n\u1ebfu ch\u01b0a x\xe0i h\u1ebft)"})]}),C()&&(0,At.jsxs)("div",{className:"mt-4 p-3 bg-red-900/40 border border-red-600 rounded-lg",children:[(0,At.jsx)("h5",{className:"text-sm font-medium text-red-300 mb-1",children:"\u274c \u0110\xe3 h\u1ebft h\u1ea1n"}),(0,At.jsx)("p",{className:"text-xs text-red-200 mb-2",children:"G\xf3i th\xe0nh vi\xean \u0111\xe3 h\u1ebft h\u1ea1n v\xe0 \u0111\xe3 \u0111\u01b0\u1ee3c chuy\u1ec3n v\u1ec1 Basic."}),(0,At.jsx)("p",{className:"text-xs text-red-200",children:"\u2705 S\u1ed1 \u2b50 t\u1eeb Admin \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 v\xe0 gi\u1eef l\u1ea1i. Li\xean h\u1ec7 admin \u0111\u1ec3 gia h\u1ea1n."})]})]})]}),!i()&&"stars"===x&&(0,At.jsx)(uk,{}),w&&(i()||"profile"===x)&&(0,At.jsxs)("div",{className:"mt-8 bg-slate-900 rounded-xl p-6 border border-slate-700",children:[(0,At.jsxs)("div",{className:"mb-6 bg-slate-800/50 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Ng\xe0y sinh"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm pt-4 border-t border-slate-700",children:[(0,At.jsxs)("div",{className:"flex justify-between md:justify-start",children:[(0,At.jsx)("span",{className:"text-gray-400 mr-2",children:"D\u01b0\u01a1ng l\u1ecbch: "}),(0,At.jsx)("span",{className:"text-white font-medium",children:w.solarDate})]}),(0,At.jsxs)("div",{className:"flex justify-between md:justify-start",children:[(0,At.jsx)("span",{className:"text-gray-400 mr-2",children:"\xc2m l\u1ecbch: "}),(0,At.jsx)("span",{className:"text-white font-medium",children:w.lunarDate})]})]}),(0,At.jsxs)("div",{className:"text-sm text-yellow-400 my-4 pt-2 border-t border-slate-700",children:["( ",w.canChi[0]," - ",w.canChi[1]," - ",w.canChi[2]," )"]})]}),(0,At.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-400 mb-3",children:"Cung Phi M\u1ec7nh"}),(0,At.jsx)(lN,{dayDetails:w,nguHanhColors:{Kim:"text-gray-600","M\u1ed9c":"text-green-600","Th\u1ee7y":"text-blue-600","H\u1ecfa":"text-red-600","Th\u1ed5":"text-yellow-600"},className:"dark-style",gender:y.gender})]})]}),(i()||"profile"===x)&&(0,At.jsxs)("div",{className:"mt-8 bg-slate-800/50 rounded-lg p-4 border border-slate-700 text-left",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"L\u01b0u \xfd:"}),(0,At.jsxs)("ul",{className:"text-gray-500 text-sm space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Th\xf4ng tin ng\xe0y sinh v\xe0 gi\u1edd sinh \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 t\xednh to\xe1n b\xe1t t\u1ef1"}),(0,At.jsx)("li",{children:"\u2022 Gi\u1edbi t\xednh v\xe0 h\u01b0\u1edbng nh\xe0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn c\xe1c t\xednh n\u0103ng phong th\u1ee7y"}),(0,At.jsx)("li",{children:"\u2022 T\u1ea5t c\u1ea3 th\xf4ng tin \u0111\u01b0\u1ee3c m\xe3 h\xf3a v\xe0 b\u1ea3o m\u1eadt"}),(0,At.jsx)("li",{children:"\u2022 B\u1ea1n c\xf3 th\u1ec3 c\u1eadp nh\u1eadt ho\u1eb7c x\xf3a th\xf4ng tin b\u1ea5t c\u1ee9 l\xfac n\xe0o"})]}),!i()&&(0,At.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[(0,At.jsxs)(nt,{to:"/pwa-manager",className:"flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-all button-style-blue",children:[(0,At.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Qu\u1ea3n l\xfd PWA"]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Ki\u1ec3m tra v\xe0 c\u1eadp nh\u1eadt \u1ee9ng d\u1ee5ng PWA"})]})]})]}),(0,At.jsx)(ok,{isOpen:n,onClose:()=>r(!1)})]})},pk=()=>{const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),c=(0,t.useCallback)((async()=>{if(e){l(!0),window.showToast&&window.showToast("\u0110ang ki\u1ec3m tra c\u1eadp nh\u1eadt...","info");try{if(e.waiting)return s(!0),d(),window.showToast&&window.showToast("C\xf3 c\u1eadp nh\u1eadt m\u1edbi s\u1eb5n s\xe0ng! Nh\u1ea5n n\xfat c\u1eadp nh\u1eadt \u0111\u1ec3 \xe1p d\u1ee5ng.","success"),void l(!1);await e.update(),setTimeout((()=>{e.waiting?(s(!0),d(),window.showToast&&window.showToast("C\xf3 c\u1eadp nh\u1eadt m\u1edbi! Nh\u1ea5n n\xfat c\u1eadp nh\u1eadt \u0111\u1ec3 \xe1p d\u1ee5ng.","success")):window.showToast&&window.showToast("\u1ee8ng d\u1ee5ng \u0111\xe3 l\xe0 phi\xean b\u1ea3n m\u1edbi nh\u1ea5t! \u2705","success"),l(!1)}),2e3)}catch(t){console.error("L\u1ed7i khi ki\u1ec3m tra c\u1eadp nh\u1eadt:",t),l(!1),window.showToast&&window.showToast("C\xf3 l\u1ed7i khi ki\u1ec3m tra c\u1eadp nh\u1eadt. Vui l\xf2ng th\u1eed l\u1ea1i!","error")}}else window.showToast&&window.showToast("Service Worker ch\u01b0a s\u1eb5n s\xe0ng. Vui l\xf2ng th\u1eed l\u1ea1i!","error")}),[e]),u=(0,t.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){a(!0);try{if(t){if("caches"in window){const e=await caches.keys();await Promise.all(e.map((e=>caches.delete(e))))}e.waiting?e.waiting.postMessage({type:"FORCE_UPDATE"}):window.location.reload()}else e.waiting?(e.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout((()=>{window.location.reload()}),1e3)):window.location.reload();window.showToast&&window.showToast(t?"\u0110ang c\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf... \u26a1":"\u0110ang c\u1eadp nh\u1eadt \u1ee9ng d\u1ee5ng... \ud83d\udd04","info")}catch(n){console.error("L\u1ed7i khi c\u1eadp nh\u1eadt PWA:",n),a(!1),window.showToast&&window.showToast("C\xf3 l\u1ed7i khi c\u1eadp nh\u1eadt. Vui l\xf2ng th\u1eed l\u1ea1i!","error")}}else window.location.reload()}),[e]),d=(0,t.useCallback)((()=>{localStorage.removeItem("pwaRefreshButtonHidden")}),[]),h=(0,t.useCallback)((async()=>{if(e){l(!0),window.showToast&&window.showToast("\u0110ang ki\u1ec3m tra c\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf...","info");try{if("caches"in window){const e=await caches.keys();await Promise.all(e.map((e=>caches.delete(e))))}await e.update(),setTimeout((()=>{e.waiting?(s(!0),d(),window.showToast&&window.showToast("C\xf3 c\u1eadp nh\u1eadt m\u1edbi sau khi x\xf3a cache! Nh\u1ea5n n\xfat c\u1eadp nh\u1eadt \u0111\u1ec3 \xe1p d\u1ee5ng.","success")):window.showToast&&window.showToast("Kh\xf4ng c\xf3 c\u1eadp nh\u1eadt m\u1edbi sau khi x\xf3a cache.","info"),l(!1)}),2e3)}catch(t){console.error("L\u1ed7i khi ki\u1ec3m tra c\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf:",t),l(!1),window.showToast&&window.showToast("C\xf3 l\u1ed7i khi ki\u1ec3m tra c\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf. Vui l\xf2ng th\u1eed l\u1ea1i!","error")}}else window.showToast&&window.showToast("Service Worker ch\u01b0a s\u1eb5n s\xe0ng. Vui l\xf2ng th\u1eed l\u1ea1i!","error")}),[e,d]);return(0,t.useEffect)((()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.ready.then((e=>{n(e),e.waiting&&(s(!0),d()),e.addEventListener("updatefound",(()=>{const t=e.installing;t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(s(!0),d(),window.showToast&&window.showToast("C\xf3 c\u1eadp nh\u1eadt m\u1edbi! Nh\u1ea5n n\xfat l\xe0m m\u1edbi \u0111\u1ec3 c\u1eadp nh\u1eadt.","info"))}))})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{s(!1)}))})),navigator.serviceWorker.addEventListener("message",(e=>{e.data&&"UPDATE_AVAILABLE"===e.data.type&&(s(!0),d(),window.showToast&&window.showToast("C\xf3 c\u1eadp nh\u1eadt m\u1edbi! Nh\u1ea5n n\xfat l\xe0m m\u1edbi \u0111\u1ec3 c\u1eadp nh\u1eadt.","info")),e.data&&"FORCE_RELOAD"===e.data.type&&window.location.reload()})))}),[d]),(0,t.useEffect)((()=>{const e=setInterval((()=>{c()}),18e5);return()=>clearInterval(e)}),[c]),{registration:e,updateAvailable:r,isRefreshing:i,isCheckingForUpdates:o,checkForUpdates:c,forceCheckForUpdates:h,performRefresh:u,showRefreshButton:d}},fk=()=>{const{registration:e,updateAvailable:n,isRefreshing:r,isCheckingForUpdates:s,checkForUpdates:i,forceCheckForUpdates:a,performRefresh:o,showRefreshButton:l}=pk(),[c,u]=(0,t.useState)(!1),d=window.matchMedia("(display-mode: standalone)").matches,h="serviceWorker"in navigator;(0,t.useEffect)((()=>{const e="true"===localStorage.getItem("pwaRefreshButtonHidden");u(e)}),[]);return h?(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Tr\u1ea1ng th\xe1i PWA"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-xs text-blue-700",children:"Ch\u1ebf \u0111\u1ed9 PWA:"}),(0,At.jsx)("span",{className:"text-xs font-medium "+(d?"text-green-600":"text-orange-600"),children:d?"\u0110\xe3 c\xe0i \u0111\u1eb7t":"Ch\u01b0a c\xe0i \u0111\u1eb7t"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-xs text-blue-700",children:"Service Worker:"}),(0,At.jsx)("span",{className:"text-xs font-medium "+(e?"text-green-600":"text-red-600"),children:e?"\u0110\xe3 \u0111\u0103ng k\xfd":"Ch\u01b0a \u0111\u0103ng k\xfd"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-xs text-blue-700",children:"C\u1eadp nh\u1eadt:"}),(0,At.jsx)("span",{className:"text-xs font-medium "+(n?"text-orange-600":"text-green-600"),children:n?"C\xf3 c\u1eadp nh\u1eadt m\u1edbi":"\u0110\xe3 c\u1eadp nh\u1eadt"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-xs text-blue-700",children:"N\xfat t\u1ea3i l\u1ea1i:"}),(0,At.jsx)("span",{className:"text-xs font-medium "+(c?"text-red-600":"text-green-600"),children:c?"\u0110\xe3 \u1ea9n":"\u0110ang hi\u1ec3n th\u1ecb"})]})]})]}),d&&(0,At.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-orange-900 mb-2",children:"Qu\u1ea3n l\xfd n\xfat t\u1ea3i l\u1ea1i"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("p",{className:"text-xs text-orange-700",children:"N\xfat t\u1ea3i l\u1ea1i xu\u1ea5t hi\u1ec7n \u1edf g\xf3c d\u01b0\u1edbi b\xean ph\u1ea3i m\xe0n h\xecnh khi c\xf3 c\u1eadp nh\u1eadt m\u1edbi."}),c?(0,At.jsx)("button",{onClick:()=>{l(),u(!1),window.showToast&&window.showToast("\u0110\xe3 hi\u1ec7n l\u1ea1i n\xfat t\u1ea3i l\u1ea1i!","success"),setTimeout((()=>{window.location.reload()}),1e3)},className:"bg-orange-600 mx-auto hover:bg-orange-700 text-white text-xs font-medium px-3 py-2 rounded transition-colors duration-200",children:"Hi\u1ec7n l\u1ea1i n\xfat t\u1ea3i l\u1ea1i"}):(0,At.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\u2713 N\xfat t\u1ea3i l\u1ea1i \u0111ang hi\u1ec3n th\u1ecb"})]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"\u0110i\u1ec1u khi\u1ec3n c\u1eadp nh\u1eadt"}),(0,At.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,At.jsx)("button",{onClick:i,disabled:r||s,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-xs font-medium px-3 py-2 rounded transition-colors duration-200 flex items-center space-x-2",children:r||s?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,At.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,At.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,At.jsx)("span",{children:s?"\u0110ang ki\u1ec3m tra...":"\u0110ang c\u1eadp nh\u1eadt..."})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,At.jsx)("span",{children:"Ki\u1ec3m tra c\u1eadp nh\u1eadt"})]})}),(0,At.jsx)("button",{onClick:a,disabled:r||s,className:"bg-orange-600 hover:bg-orange-700 disabled:bg-orange-400 text-white text-xs font-medium px-3 py-2 rounded transition-colors duration-200 flex items-center space-x-2",title:"X\xf3a cache v\xe0 ki\u1ec3m tra c\u1eadp nh\u1eadt",children:r||s?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,At.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,At.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,At.jsx)("span",{children:"\u0110ang x\u1eed l\xfd..."})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,At.jsx)("span",{children:"Ki\u1ec3m tra c\u01b0\u1ee1ng ch\u1ebf"})]})}),n&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("button",{onClick:()=>o(!1),disabled:r,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white text-xs font-medium px-3 py-2 rounded transition-colors duration-200",children:r?"\u0110ang c\u1eadp nh\u1eadt...":"C\u1eadp nh\u1eadt"}),(0,At.jsx)("button",{onClick:()=>o(!0),disabled:r,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white text-xs font-medium px-3 py-2 rounded transition-colors duration-200",title:"C\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf (x\xf3a cache)",children:r?"\u0110ang c\u1eadp nh\u1eadt...":"C\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf"})]})]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Th\xf4ng tin b\u1ed5 sung"}),(0,At.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Ki\u1ec3m tra c\u1eadp nh\u1eadt:"})," Ki\u1ec3m tra phi\xean b\u1ea3n m\u1edbi t\u1eeb server"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Ki\u1ec3m tra c\u01b0\u1ee1ng ch\u1ebf:"})," X\xf3a cache v\xe0 ki\u1ec3m tra c\u1eadp nh\u1eadt"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"C\u1eadp nh\u1eadt:"})," \xc1p d\u1ee5ng phi\xean b\u1ea3n m\u1edbi \u0111\xe3 t\u1ea3i v\u1ec1"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"C\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf:"})," X\xf3a to\xe0n b\u1ed9 cache v\xe0 t\u1ea3i l\u1ea1i"]}),(0,At.jsx)("p",{children:"\u2022 \u1ee8ng d\u1ee5ng s\u1ebd t\u1ef1 \u0111\u1ed9ng ki\u1ec3m tra c\u1eadp nh\u1eadt m\u1ed7i 30 ph\xfat"}),(0,At.jsx)("p",{children:'\u2022 N\u1ebfu g\u1eb7p l\u1ed7i, h\xe3y th\u1eed "Ki\u1ec3m tra c\u01b0\u1ee1ng ch\u1ebf" ho\u1eb7c "C\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf"'})]})]})]}):(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,At.jsx)("span",{className:"text-sm font-medium text-yellow-800",children:"Tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed7 tr\u1ee3 PWA"})]}),(0,At.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"T\xednh n\u0103ng c\u1eadp nh\u1eadt t\u1ef1 \u0111\u1ed9ng kh\xf4ng kh\u1ea3 d\u1ee5ng tr\xean tr\xecnh duy\u1ec7t n\xe0y."})]})},xk=()=>{const{currentUser:e}=Aw(),{isAdmin:t}=dk();return t()?(0,At.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-4",children:(0,At.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p truy c\u1eadp"}),(0,At.jsx)("p",{className:"text-gray-400 mb-6",children:"Trang n\xe0y ch\u1ec9 d\xe0nh cho ng\u01b0\u1eddi d\xf9ng th\u01b0\u1eddng."}),(0,At.jsxs)(nt,{to:"/profile",className:"inline-flex items-center px-4 py-2 rounded-lg font-medium transition-all button-style",children:[(0,At.jsx)(mt,{className:"h-5 w-5 mr-2"}),"Quay l\u1ea1i Profile"]})]})}):(0,At.jsx)("div",{className:"min-h-screen text-white p-4 text-left relative z-50",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,At.jsxs)(nt,{to:"/profile",className:"inline-flex items-center px-3 py-2 rounded-lg font-medium transition-all text-gray-400 hover:text-white hover:bg-slate-800",children:[(0,At.jsx)(mt,{className:"h-5 w-5 mr-2"}),"Quay l\u1ea1i Profile"]})}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:(0,At.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Qu\u1ea3n l\xfd PWA"}),(0,At.jsx)("p",{className:"text-gray-400",children:"Ki\u1ec3m tra v\xe0 c\u1eadp nh\u1eadt \u1ee9ng d\u1ee5ng"})]})]}),(0,At.jsx)("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-700",children:(0,At.jsx)(fk,{})}),(0,At.jsxs)("div",{className:"mt-8 bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Th\xf4ng tin b\u1ed5 sung"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-md font-medium text-blue-400 mb-2",children:"T\xednh n\u0103ng PWA"}),(0,At.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 C\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng tr\xean thi\u1ebft b\u1ecb"}),(0,At.jsx)("li",{children:"\u2022 Ho\u1ea1t \u0111\u1ed9ng offline"}),(0,At.jsx)("li",{children:"\u2022 C\u1eadp nh\u1eadt t\u1ef1 \u0111\u1ed9ng"}),(0,At.jsx)("li",{children:"\u2022 Th\xf4ng b\xe1o \u0111\u1ea9y"}),(0,At.jsx)("li",{children:"\u2022 Truy c\u1eadp nhanh t\u1eeb m\xe0n h\xecnh ch\xednh"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-md font-medium text-green-400 mb-2",children:"L\u1ee3i \xedch"}),(0,At.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Tr\u1ea3i nghi\u1ec7m nh\u01b0 \u1ee9ng d\u1ee5ng native"}),(0,At.jsx)("li",{children:"\u2022 Ti\u1ebft ki\u1ec7m dung l\u01b0\u1ee3ng"}),(0,At.jsx)("li",{children:"\u2022 Kh\xf4ng c\u1ea7n c\xe0i \u0111\u1eb7t t\u1eeb app store"}),(0,At.jsx)("li",{children:"\u2022 C\u1eadp nh\u1eadt trong n\u1ec1n"}),(0,At.jsx)("li",{children:"\u2022 Ho\u1ea1t \u0111\u1ed9ng tr\xean m\u1ecdi thi\u1ebft b\u1ecb"})]})]})]})]}),(0,At.jsxs)("div",{className:"mt-8 bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"H\u01b0\u1edbng d\u1eabn x\u1eed l\xfd s\u1ef1 c\u1ed1"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-yellow-400 mb-2",children:"PWA kh\xf4ng load \u0111\u01b0\u1ee3c"}),(0,At.jsxs)("ol",{className:"text-sm text-gray-300 space-y-1 ml-4",children:[(0,At.jsx)("li",{children:"1. Th\u1eed c\u1eadp nh\u1eadt th\xf4ng th\u01b0\u1eddng tr\u01b0\u1edbc"}),(0,At.jsx)("li",{children:"2. N\u1ebfu kh\xf4ng \u0111\u01b0\u1ee3c, d\xf9ng c\u1eadp nh\u1eadt c\u01b0\u1ee1ng ch\u1ebf"}),(0,At.jsx)("li",{children:"3. X\xf3a v\xe0 c\xe0i \u0111\u1eb7t l\u1ea1i PWA"}),(0,At.jsx)("li",{children:"4. Ki\u1ec3m tra k\u1ebft n\u1ed1i internet"})]})]}),(0,At.jsxs)("div",{className:"bg-blue-900/30 border border-blue-500 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-blue-400 mb-2",children:"C\u1eadp nh\u1eadt kh\xf4ng ho\u1ea1t \u0111\u1ed9ng"}),(0,At.jsxs)("ol",{className:"text-sm text-gray-300 space-y-1 ml-4",children:[(0,At.jsx)("li",{children:"1. \u0110\xf3ng v\xe0 m\u1edf l\u1ea1i \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("li",{children:"2. Ki\u1ec3m tra service worker \u0111\xe3 \u0111\u0103ng k\xfd"}),(0,At.jsx)("li",{children:"3. X\xf3a cache tr\xecnh duy\u1ec7t"}),(0,At.jsx)("li",{children:"4. Li\xean h\u1ec7 h\u1ed7 tr\u1ee3 n\u1ebfu v\u1eabn l\u1ed7i"})]})]})]})]}),(0,At.jsxs)("div",{className:"mt-8 bg-slate-800/50 rounded-lg p-6 border border-slate-700 text-center",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"C\u1ea7n h\u1ed7 tr\u1ee3?"}),(0,At.jsx)("p",{className:"text-gray-400 mb-4",children:"N\u1ebfu g\u1eb7p v\u1ea5n \u0111\u1ec1 v\u1edbi PWA, h\xe3y li\xean h\u1ec7 v\u1edbi ch\xfang t\xf4i"}),(0,At.jsx)("a",{href:"mailto:thiendianhan.app@gmail.com",className:"inline-flex items-center px-4 py-2 rounded-lg font-medium transition-all button-style-blue",children:"Li\xean h\u1ec7 h\u1ed7 tr\u1ee3"})]})]})})};function vk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const yk=t.forwardRef(vk),bk=()=>(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4 relative  z-30",children:(0,At.jsxs)("div",{className:"text-center max-w-[800px] mx-auto",children:[(0,At.jsx)("div",{className:"mb-10",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:" mx-auto flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-6xl font-bold text-style",children:"404"})}),(0,At.jsx)("p",{className:"text-base text-gray-300 mb-4",children:"Trang kh\xf4ng t\u1ed3n t\u1ea1i"})]})}),(0,At.jsxs)("h1",{className:"text-3xl font-bold text-style mb-4 drop-shadow-sm leading-[1.5] title-font",children:["Phong th\u1ee7y kh\xf4ng b\u1eb1ng L\xf2ng ng\u01b0\u1eddi",(0,At.jsx)("br",{}),"Ph\xe1p l\u1ef1c kh\xf4ng b\u1eb1ng Nghi\u1ec7p l\u1ef1c"]}),(0,At.jsx)("p",{className:"text-lg text-gray-300 mb-8 leading-relaxed",children:"G\u1eb7p nhau l\xe0 duy\xean, Xa nhau c\u0169ng do duy\xean"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)(nt,{to:"/",className:"inline-flex items-center justify-center w-full button-style",children:[(0,At.jsx)(yk,{className:"w-5 h-5 mr-2"}),"V\u1ec1 trang ch\u1ee7"]}),(0,At.jsxs)("button",{onClick:()=>window.history.back(),className:"inline-flex items-center justify-center w-full button-style",children:[(0,At.jsx)(mt,{className:"w-5 h-5 mr-2"}),"Quay l\u1ea1i"]})]}),(0,At.jsx)("div",{className:"mt-12 p-4 bg-gray-800 rounded-lg border border-gray-700",children:(0,At.jsx)("p",{className:"text-gray-400 text-sm",children:"N\u1ebfu b\u1ea1n tin r\u1eb1ng \u0111\xe2y l\xe0 l\u1ed7i, vui l\xf2ng li\xean h\u1ec7 v\u1edbi ch\xfang t\xf4i."})}),(0,At.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-amber-500/10 rounded-full blur-xl"}),(0,At.jsx)("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-orange-500/10 rounded-full blur-xl"})]})});function wk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Nk=t.forwardRef(wk);function jk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Ck=t.forwardRef(jk);function Tk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const Sk=t.forwardRef(Tk),_k=()=>{var e,n;const[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(null),d=ee();(0,t.useEffect)((()=>{m()}),[]);const h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n=(new Date).toLocaleTimeString();l((r=>[...r,{message:e,type:t,timestamp:n}]))},m=async()=>{try{u({message:"Setup functions have been removed",isLoggedIn:!1}),h("Setup functions have been removed from the codebase","info")}catch(e){h(`L\u1ed7i ki\u1ec3m tra tr\u1ea1ng th\xe1i: ${e.message}`,"error")}};return(0,At.jsx)("div",{className:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:(0,At.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,At.jsxs)("div",{className:"bg-blue-600 px-6 py-4",children:[(0,At.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center",children:[(0,At.jsx)(Nk,{className:"h-6 w-6 mr-2"}),"Thi\u1ebft l\u1eadp Admin"]}),(0,At.jsx)("p",{className:"text-blue-100",children:"C\u1ea5u h\xecnh t\xe0i kho\u1ea3n admin cho h\u1ec7 th\u1ed1ng"})]}),(0,At.jsxs)("div",{className:"p-6 space-y-6",children:[(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i"}),c?(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[c.isLoggedIn?(0,At.jsx)(nM,{className:"h-5 w-5 text-green-500 mr-2"}):(0,At.jsx)(PM,{className:"h-5 w-5 text-red-500 mr-2"}),(0,At.jsx)("span",{className:c.isLoggedIn?"text-green-700":"text-red-700",children:c.message})]}),c.isLoggedIn&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,At.jsx)("strong",{children:"Email:"})," ",null===(e=c.user)||void 0===e?void 0:e.email]}),(0,At.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,At.jsx)("strong",{children:"UID:"})," ",null===(n=c.user)||void 0===n?void 0:n.uid]}),(0,At.jsxs)("div",{className:"flex items-center text-sm",children:[(0,At.jsx)("strong",{children:"L\xe0 Admin:"}),c.isAdmin?(0,At.jsx)(nM,{className:"h-4 w-4 text-green-500 ml-1"}):(0,At.jsx)(PM,{className:"h-4 w-4 text-red-500 ml-1"})]})]})]}):(0,At.jsx)("div",{className:"text-gray-500",children:"\u0110ang ki\u1ec3m tra..."})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Th\xf4ng tin Admin"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center text-blue-700 mb-1",children:[(0,At.jsx)(Ck,{className:"h-4 w-4 mr-1"}),(0,At.jsx)("strong",{children:"Email:"})]}),(0,At.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:rw})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center text-blue-700 mb-1",children:[(0,At.jsx)(Sk,{className:"h-4 w-4 mr-1"}),(0,At.jsx)("strong",{children:"Password:"})]}),(0,At.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded text-blue-800",children:"adminhh123"})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsx)("button",{onClick:async()=>{s(!0),l([]),h("\ud83d\ude80 Setup functions have been removed from the codebase","info"),s(!1)},disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:r?"\u0110ang x\u1eed l\xfd...":"Setup T\u1ef1 \u0111\u1ed9ng"}),(0,At.jsx)("button",{onClick:async()=>{s(!0),h("\ud83d\udd28 Setup functions have been removed from the codebase","info"),s(!1)},disabled:r,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"T\u1ea1o Admin"}),(0,At.jsx)("button",{onClick:async()=>{s(!0),h("\ud83d\udd0d Setup functions have been removed from the codebase","info"),s(!1)},disabled:r,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Ki\u1ec3m tra Login"}),(0,At.jsx)("button",{onClick:()=>{d("/admin/login")},className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"\u0110\u1ebfn Admin Login"})]}),i&&(0,At.jsx)("div",{className:"p-4 rounded-lg "+("success"===i?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-center "+("success"===i?"text-green-700":"text-red-700"),children:["success"===i?(0,At.jsx)(nM,{className:"h-5 w-5 mr-2"}):(0,At.jsx)(PM,{className:"h-5 w-5 mr-2"}),(0,At.jsx)("span",{className:"font-medium",children:"success"===i?"Th\xe0nh c\xf4ng!":"C\xf3 l\u1ed7i x\u1ea3y ra!"})]})}),o.length>0&&(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Log ho\u1ea1t \u0111\u1ed9ng"}),(0,At.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:o.map(((e,t)=>(0,At.jsxs)("div",{className:"text-sm p-2 rounded "+("success"===e.type?"bg-green-100 text-green-800":"error"===e.type?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:[(0,At.jsxs)("span",{className:"text-xs text-gray-500 mr-2",children:["[",e.timestamp,"]"]}),e.message]},t)))})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"H\u01b0\u1edbng d\u1eabn"}),(0,At.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[(0,At.jsxs)("li",{children:["1. Nh\u1ea5n ",(0,At.jsx)("strong",{children:'"Setup T\u1ef1 \u0111\u1ed9ng"'})," \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng t\u1ea1o v\xe0 c\u1ea5u h\xecnh admin"]}),(0,At.jsxs)("li",{children:["2. N\u1ebfu admin \u0111\xe3 t\u1ed3n t\u1ea1i, ch\u1ec9 c\u1ea7n nh\u1ea5n ",(0,At.jsx)("strong",{children:'"Ki\u1ec3m tra Login"'})]}),(0,At.jsxs)("li",{children:["3. Sau khi setup th\xe0nh c\xf4ng, nh\u1ea5n ",(0,At.jsx)("strong",{children:'"\u0110\u1ebfn Admin Login"'})," \u0111\u1ec3 \u0111\u0103ng nh\u1eadp"]}),(0,At.jsx)("li",{children:"4. S\u1eed d\u1ee5ng email v\xe0 password hi\u1ec3n th\u1ecb \u1edf tr\xean \u0111\u1ec3 \u0111\u0103ng nh\u1eadp admin"})]})]}),(0,At.jsx)("div",{className:"text-center pt-4 border-t",children:(0,At.jsx)("button",{onClick:()=>d("/"),className:"text-blue-600 hover:text-blue-700 underline",children:"\u2190 V\u1ec1 trang ch\u1ee7"})})]})]})})})},Ek=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365;const[s,i]=(0,t.useState)((()=>{const t=_T(e);return null!==t?t:n}));return[s,(0,t.useCallback)((t=>{IT()?null===t||void 0===t?(ET(e),i(n)):(ST(e,t.toString(),r),i(t)):i(n)}),[e,n,r]),(0,t.useCallback)((()=>{ET(e),i(n)}),[e,n])]},Bk=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365;const[s,i]=(0,t.useState)((()=>{if(!DT())return n;const t=kT(e);return null!==t?t:n}));return[s,(0,t.useCallback)((t=>{IT()?null===t||void 0===t?(ET(e),i(n)):(MT(e,t,r),i(t)):i(n)}),[e,n,r]),(0,t.useCallback)((()=>{ET(e),i(n)}),[e,n])]},Mk=()=>{const[e,n,r]=Ek(PT.THEME,"dark"),s=(0,t.useCallback)((e=>{const t=document.body;switch(t.classList.remove("theme-dark","theme-light","theme-golden"),e){case"dark":default:t.classList.add("theme-dark");break;case"light":t.classList.add("theme-light");break;case"golden":t.classList.add("theme-golden")}}),[]);(0,t.useEffect)((()=>{const t=document.body;if(t.classList.contains("theme-dark")||t.classList.contains("theme-light")||t.classList.contains("theme-golden")){let r="dark";t.classList.contains("theme-golden")?r="golden":t.classList.contains("theme-light")&&(r="light"),r!==e&&n(r)}else s(e)}),[]),(0,t.useEffect)((()=>{s(e)}),[e,s]);const i=(0,t.useCallback)((e=>{n(e),s(e)}),[n,s]),a=(0,t.useCallback)((()=>{i("dark"===e?"golden":"dark")}),[e,i]);return[e,i,a,r]},kk=()=>{const[e,t,n]=Ek(PT.LANGUAGE,"vi");return[e,t,n]},Lk=()=>{const[e,n,r]=Ek(PT.FONT_SIZE,"medium"),s=["small","medium","large","xlarge"],i=(0,t.useCallback)((e=>{const t=document.body;switch(t.classList.remove("fontSize14","fontSize16","fontSize18","fontSize20"),e){case"small":t.classList.add("fontSize14");break;case"medium":default:t.classList.add("fontSize16");break;case"large":t.classList.add("fontSize18");break;case"xlarge":t.classList.add("fontSize20")}}),[]);(0,t.useEffect)((()=>{i(e)}),[e,i]);const a=(0,t.useCallback)((e=>{n(e),i(e)}),[n,i]),o=(0,t.useCallback)((()=>{const t=(s.indexOf(e)+1)%s.length;a(s[t])}),[e,a]);return[e,a,o,r]},Ik=()=>{const[e,n,r]=Bk(PT.USER_PREFERENCES,{showIntro:!0,enableAnimations:!0,enableSounds:!1,autoSaveProgress:!0,showAdvancedFeatures:!1,displayMode:"detailed"});return[e,(0,t.useCallback)(((e,t)=>{n((n=>({...n,[e]:t})))}),[n]),n,r]},Dk=()=>{const[e,n,r]=Bk(PT.FAVORITE_FEATURES,[]),s=(0,t.useCallback)((t=>{e.includes(t)||n([...e,t])}),[e,n]),i=(0,t.useCallback)((t=>{n(e.filter((e=>e!==t)))}),[e,n]),a=(0,t.useCallback)((t=>e.includes(t)),[e]);return[e,s,i,a,r]},Pk=()=>{const[e,n]=Ek(PT.VISIT_COUNT,"0"),[r,s]=Ek(PT.FIRST_VISIT,(new Date).toISOString()),[i,a]=Ek(PT.LAST_FEATURE,""),o=(0,t.useCallback)((()=>{const t=(parseInt(e)+1).toString();n(t)}),[e,n]),l=(0,t.useCallback)((e=>{a(e)}),[a]);return{visitCount:parseInt(e),firstVisit:new Date(r),lastFeature:i,incrementVisitCount:o,trackFeatureUsage:l}},Fk=()=>{const[e,n]=Ek(PT.ANALYTICS_ID,""),r=(0,t.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!IT())return;(new Date).toISOString(),window.location.pathname}),[e]);return[e,r]},Uk=()=>{const[e,n]=(0,t.useState)((()=>DT())),[r,s]=(0,t.useState)((()=>IT()));return{hasConsent:e,consentValue:r,giveConsent:(0,t.useCallback)((()=>{ST("lunar_cookie_consent","accepted",365),n(!0),s(!0)}),[]),revokeConsent:(0,t.useCallback)((()=>{ST("lunar_cookie_consent","declined",365),n(!0),s(!1)}),[]),resetConsent:(0,t.useCallback)((()=>{ET("lunar_cookie_consent"),n(!1),s(!1)}),[])}},Rk=()=>{const[e,n]=(0,t.useState)(0),[r,s]=(0,t.useState)("\u0110ang kh\u1edfi t\u1ea1o..."),[i]=Mk();(0,t.useEffect)((()=>{const e=[{progress:30,text:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."},{progress:60,text:"\u0110ang x\u1eed l\xfd..."},{progress:90,text:"Ho\xe0n t\u1ea5t..."},{progress:100,text:"Ch\xe0o m\u1eebng!"}];let t=0;const r=setInterval((()=>{t<e.length?(n(e[t].progress),s(e[t].text),t++):clearInterval(r)}),200);return()=>clearInterval(r)}),[]);const a="golden"===i,o=a?{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #404040 100%)",borderColor:"#a55d07",primaryColor:"#fef1a2",secondaryColor:"#a54e07",accentColor:"#b47e11"}:{background:"linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%)",borderColor:"rgb(0, 255, 192)",primaryColor:"rgb(0, 255, 192)",secondaryColor:"rgb(126, 100, 221)",accentColor:"rgb(126, 100, 221)"};return(0,At.jsx)("div",{className:"loading-screen fixed inset-0 flex items-center justify-center z-40 transition-opacity duration-500",style:{background:o.background,color:"white",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif'},children:(0,At.jsxs)("div",{className:"relative z-10 text-center",children:[(0,At.jsxs)("div",{className:"mb-8 relative flex items-center justify-center",children:[(0,At.jsx)("div",{style:{width:"80px",height:"80px",border:`3px solid ${o.borderColor}`,borderRadius:"50%",borderTop:`3px solid ${o.accentColor}`,animation:"spin 2s linear infinite",position:"relative"}}),(0,At.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"40px",background:`linear-gradient(45deg, ${o.primaryColor}, ${o.secondaryColor})`,borderRadius:"50%",animation:"pulse 1.5s ease-in-out infinite"}})]}),(0,At.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",margin:"0 0 0.5rem 0",background:`linear-gradient(45deg, ${o.primaryColor} 0px, ${o.primaryColor} 30%, ${o.secondaryColor} 70%, ${o.secondaryColor} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Thi\xean \u0110\u1ecba Nh\xe2n"}),(0,At.jsx)("p",{style:{color:o.primaryColor,margin:"0 0 2rem 0",fontSize:"1.1rem"},children:r}),(0,At.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center",marginBottom:"1rem"},children:[(0,At.jsx)("div",{style:{width:"12px",height:"12px",background:`linear-gradient(45deg, ${o.primaryColor}, ${o.secondaryColor})`,borderRadius:"50%",animation:"bounce 1.4s ease-in-out infinite both"}}),(0,At.jsx)("div",{style:{width:"12px",height:"12px",background:`linear-gradient(45deg, ${o.primaryColor}, ${o.secondaryColor})`,borderRadius:"50%",animation:"bounce 1.4s ease-in-out 0.2s infinite both"}}),(0,At.jsx)("div",{style:{width:"12px",height:"12px",background:`linear-gradient(45deg, ${o.primaryColor}, ${o.secondaryColor})`,borderRadius:"50%",animation:"bounce 1.4s ease-in-out 0.4s infinite both"}})]}),(0,At.jsxs)("div",{style:{width:"320px",maxWidth:"90vw",margin:"0 auto"},children:[(0,At.jsx)("div",{style:{background:a?"#404040":"#475569",borderRadius:"9999px",height:"8px",overflow:"hidden",position:"relative"},children:(0,At.jsx)("div",{style:{background:`linear-gradient(90deg, ${o.primaryColor}, ${o.secondaryColor})`,height:"100%",borderRadius:"9999px",transition:"width 0.5s ease-out",width:`${e}%`,position:"relative"},children:(0,At.jsx)("div",{style:{position:"absolute",inset:"0",background:"white",opacity:"0.3",borderRadius:"9999px",animation:"pulse 2s ease-in-out infinite"}})})}),(0,At.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"0.875rem",color:o.primaryColor},children:[(0,At.jsx)("span",{children:r}),(0,At.jsxs)("span",{children:[e,"%"]})]})]}),(0,At.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n            \n            @keyframes pulse {\n              0%, 100% { opacity: 1; }\n              50% { opacity: 0.5; }\n            }\n            \n            @keyframes bounce {\n              0%, 80%, 100% { transform: scale(0); }\n              40% { transform: scale(1); }\n            }\n          "})]})})},Ok=()=>{const e=Y();(0,t.useEffect)((()=>{const t=e.pathname.startsWith("/admin")||e.pathname.startsWith("/master"),n="/login"===e.pathname||"/password-reset"===e.pathname||"/email-verification"===e.pathname||"/terms-of-service"===e.pathname||"/privacy-policy"===e.pathname||"/account-blocked"===e.pathname;return document.body.classList.remove("client-page","admin-page","auth-page"),n?document.body.classList.add("auth-page"):t?document.body.classList.add("admin-page"):document.body.classList.add("client-page"),()=>{}}),[e.pathname])},Hk=e=>{let{src:n,alt:r,className:s="",placeholderClassName:i="",showText:a=!0,textSize:o="text-sm"}=e;const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),h=(e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;if(e.includes("firebasestorage.googleapis.com"))return e.startsWith("//")?`https:${e}`:`https://${e}`;if(e.startsWith("gs://")){const t=e.replace("gs://",""),[n,...r]=t.split("/"),s=r.join("/");return`https://firebasestorage.googleapis.com/v0/b/${n}/o/${encodeURIComponent(s)}?alt=media`}return e})(n);return!h||l?(0,At.jsx)("div",{className:`bg-slate-700 flex items-center justify-center ${i||s}`,children:(0,At.jsxs)("div",{className:"text-center text-gray-500",children:[(0,At.jsx)("svg",{className:"w-8 h-8 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a&&(0,At.jsx)("p",{className:o,children:"Kh\xf4ng c\xf3 \u1ea3nh"})]})}):(0,At.jsxs)("div",{className:"relative",children:[!u&&(0,At.jsx)("div",{className:`absolute inset-0 bg-slate-700 flex items-center justify-center ${i||s}`,children:(0,At.jsxs)("div",{className:"text-center text-gray-500",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-500 mx-auto"}),a&&(0,At.jsx)("p",{className:"text-xs mt-1",children:"\u0110ang t\u1ea3i..."})]})}),(0,At.jsx)("img",{src:h,alt:r,loading:"lazy",className:`${s} ${u?"opacity-100":"opacity-0"} transition-opacity duration-300`,onError:e=>{console.error("Image load error:",n,e),c(!0)},onLoad:()=>{d(!0)}})]})},Qk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.thumbnail||e.thumbnailUrl)return e.thumbnail||e.thumbnailUrl;if(e.categoryId&&t.length>0){const n=t.find((t=>t.id===e.categoryId));if(null!==n&&void 0!==n&&n.thumbnail)return n.thumbnail}return null},zk=e=>"master"===e.authorType?e.authorDisplayName?{name:e.authorDisplayName,badge:"\ud83d\udc51 Master",badgeClass:"bg-yellow-100 text-yellow-800"}:e.authorEmail?{name:e.authorEmail.split("@")[0],badge:"\ud83d\udc51 Master",badgeClass:"bg-yellow-100 text-yellow-800"}:{name:"Master Member",badge:"\ud83d\udc51 Master",badgeClass:"bg-yellow-100 text-yellow-800"}:{name:"Admin",badge:"\ud83d\udee1\ufe0f Admin",badgeClass:"bg-blue-100 text-blue-800"},Vk=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").trim():"",Kk=e=>{let{variant:t="default",className:n=""}=e;const r=(()=>{switch(t){case"featured":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden h-full",imageHeight:"h-64",padding:"p-6"};case"compact":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden h-full flex flex-col",imageHeight:"h-32",padding:"p-3"};case"list":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden flex",imageHeight:"h-24 w-32",padding:"p-4",isHorizontal:!0};default:return{containerClass:"bg-slate-800 rounded-lg overflow-hidden h-full flex flex-col",imageHeight:"h-48",padding:"p-4"}}})();return(0,At.jsxs)("div",{className:`${r.containerClass} ${n}`,children:[(0,At.jsx)("div",{className:r.isHorizontal?"flex-shrink-0":"",children:(0,At.jsx)("div",{className:`animate-pulse bg-slate-700 w-full ${r.imageHeight}`})}),(0,At.jsxs)("div",{className:`${r.padding} ${r.isHorizontal?"flex-1":"flex-1 flex flex-col"}`,children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-full mb-2 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-3/4 mb-3 rounded"}),"compact"!==t&&(0,At.jsxs)("div",{className:`space-y-2 ${r.isHorizontal?"":"flex-1"} mb-3`,children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-full rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-4/5 rounded"}),"featured"===t&&(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-2/3 rounded"})]}),(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-3 w-16 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-3 w-12 rounded"})]})]})]})},Gk=e=>{let{article:t,variant:n="default",className:r="",showDescription:s=!0,showMeta:i=!0,showAuthor:a=!0,imageHeight:o="h-48",descriptionLines:l=2,maxDescriptionLength:c=100,categories:u=[]}=e;const d=zk(t),h=(()=>{switch(n){case"featured":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden hover:bg-slate-700 transition-colors h-full flex flex-col",imageHeight:"h-64 w-full",titleClass:"text-2xl font-bold mb-3 line-clamp-3 group-hover:text-gray-100 transition-colors",descriptionClass:`text-gray-400 mb-4 line-clamp-${l}`,padding:"p-6",showDescription:s,maxDescriptionLength:200};case"compact":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden hover:bg-slate-700 transition-colors h-full flex flex-col",imageHeight:"h-24 w-full",titleClass:"text-sm font-bold mb-2 line-clamp-2 group-hover:text-gray-100 transition-colors",descriptionClass:`text-gray-400 text-sm mb-2 line-clamp-${Math.min(l,2)}`,padding:"p-3",showDescription:s&&l<=2,maxDescriptionLength:80};case"horizontal":return{containerClass:"bg-slate-800 rounded-lg overflow-hidden hover:bg-slate-700 transition-colors h-full flex",imageHeight:"h-16 w-16 hidden",titleClass:"text-sm font-bold mb-2 line-clamp-2 group-hover:text-gray-100 transition-colors",descriptionClass:`hidden text-gray-400 text-xs mb-2 line-clamp-${Math.min(l,2)}`,padding:"p-3",isHorizontal:!0,showDescription:s&&l<=2,maxDescriptionLength:60};default:return{containerClass:"bg-slate-800 rounded-lg overflow-hidden hover:bg-slate-700 transition-colors h-full flex flex-col",imageHeight:"h-36 w-full",titleClass:"text-lg font-bold mb-2 line-clamp-2 group-hover:text-gray-100 transition-colors",descriptionClass:`text-gray-400 text-sm mb-3 line-clamp-${l}`,padding:"p-4",showDescription:s,maxDescriptionLength:c}}})();return t?(0,At.jsx)(nt,{to:`/news/${t.id}/${t.slug||Vk(t.title)}`,className:`block group ${r}`,children:(0,At.jsxs)("div",{className:h.containerClass,children:[Qk(t,u)&&(0,At.jsx)("div",{className:h.isHorizontal?"flex-shrink-0":"",children:(0,At.jsx)(Hk,{src:Qk(t,u),alt:t.title,className:`max-w-[100%] ${h.imageHeight} object-cover group-hover:scale-105 transition-transform duration-300`,showText:"compact"!==n,textSize:"compact"===n?"text-xs":"text-sm"})}),(0,At.jsxs)("div",{className:`${h.padding} ${h.isHorizontal?"flex-1":"flex-1 flex flex-col"}`,children:[(0,At.jsx)("h3",{className:h.titleClass,children:t.title}),h.showDescription&&t.description&&(0,At.jsx)("p",{className:`${h.descriptionClass} ${h.isHorizontal?"":"flex-1"}`,children:(A=(e=>{if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(t.description),g=h.maxDescriptionLength,A?A.length<=g?A:A.substring(0,g)+"...":"")}),i&&(0,At.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500 "+(h.isHorizontal?"":"flex-shrink-0"),children:[a&&(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(Ck,{className:"w-4 h-4"}),(0,At.jsx)("span",{children:d.name})]}),(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(Iy,{className:"w-4 h-4"}),(m=t.createdAt,function(e){if(!e)return"";const t={day:"2-digit",month:"2-digit",year:"numeric",...arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&{hour:"2-digit",minute:"2-digit"}};return e.toLocaleDateString("vi-VN",t)}(m,"detail"===n))]}),(0,At.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,At.jsx)(LM,{className:"w-4 h-4"}),t.views||0]})]})]})]})}):null;var m,A,g},qk=e=>{let{items:n=[],renderItem:r,itemsPerSlide:s={mobile:1,tablet:2,desktop:3},showControls:i=!0,showIndicators:a=!0,className:o="",containerClassName:l="",controlsClassName:c="",indicatorsClassName:u="",gap:d="gap-6",padding:h="px-8",autoSlide:m=!1,autoSlideInterval:A=5e3,animationDuration:g=500,animationType:p="ease-in-out",enableDrag:f=!0,dragThreshold:x=50,id:v}=e;const[y,b]=(0,t.useState)(0),[w,N]=(0,t.useState)(s.desktop),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)(0),[B,M]=(0,t.useState)(0),[k,L]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=()=>{const e=window.innerWidth;N(e<768?s.mobile:e<1024?s.tablet:s.desktop)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[s]),(0,t.useEffect)((()=>{b(0)}),[n.length,w]);const I=e=>{f&&!j&&(S(!0),E(e),M(0),L(!1))},D=e=>{if(!T||!f)return;const t=e-_;M(t),Math.abs(t)>5&&L(!0)},P=()=>{if(!T||!f||j)return;S(!1);const e=Math.ceil(((null===n||void 0===n?void 0:n.length)||0)/w),t=0===y,r=y===e-1;Math.abs(B)>x&&(B>0&&!t?(C(!0),b((e=>e-1)),setTimeout((()=>C(!1)),g)):B<0&&!r&&(C(!0),b((e=>e+1)),setTimeout((()=>C(!1)),g))),M(0),k&&setTimeout((()=>{L(!1)}),50)};if((0,t.useEffect)((()=>{if(!n||0===n.length||!m||n.length<=w)return;const e=Math.ceil(n.length/w),t=setInterval((()=>{b((t=>t>=e-1?0:t+1))}),A);return()=>clearInterval(t)}),[m,A,n,w]),(0,t.useEffect)((()=>{if(T){const e=e=>{D(e.clientX)},t=()=>{P()},n=e=>{D(e.touches[0].clientX)},r=()=>{P()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("touchmove",n),document.addEventListener("touchend",r),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}}}),[T,_,B,f,j,y,n,w,x,g,k]),(0,t.useEffect)((()=>{if(k){const e=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()};return document.addEventListener("click",e,{capture:!0}),()=>{document.removeEventListener("click",e,{capture:!0})}}}),[k]),!n||0===n.length)return null;const F=Math.ceil(n.length/w),U=n.length>w,R=0===y,O=y===F-1,H=e=>{if(k)return e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),!1};return(0,At.jsxs)("div",{className:`relative ${o}`,children:[i&&U&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("button",{onClick:()=>{!U||j||R||(C(!0),b((e=>e-1)),setTimeout((()=>{C(!1)}),g))},disabled:j||R,className:`absolute left-[-60px] top-1/2 -translate-y-1/2 z-10 bg-slate-800 text-white p-2 rounded-full shadow-lg transition-all duration-200 ${R||j?"opacity-30 cursor-not-allowed":"hover:bg-slate-700 hover:scale-110 active:scale-95 opacity-90 hover:opacity-100"} ${c}`,"aria-label":"Previous slide",children:(0,At.jsx)(oS,{className:"w-5 h-5"})}),(0,At.jsx)("button",{onClick:()=>{!U||j||O||(C(!0),b((e=>e+1)),setTimeout((()=>{C(!1)}),g))},disabled:j||O,className:`absolute right-[-60px] top-1/2 -translate-y-1/2 z-10 bg-slate-800 text-white p-2 rounded-full shadow-lg transition-all duration-200 ${O||j?"opacity-30 cursor-not-allowed":"hover:bg-slate-700 hover:scale-110 active:scale-95 opacity-90 hover:opacity-100"} ${c}`,"aria-label":"Next slide",children:(0,At.jsx)(cS,{className:"w-5 h-5"})})]}),(0,At.jsx)("div",{className:`${l} ${h}`,children:(0,At.jsx)("div",{className:"overflow-hidden",children:(0,At.jsx)("div",{className:"flex select-none "+(f?"touch-pan-y":""),style:(()=>{const e=100*-y;let t=0;if(T&&0!==B){const e=window.innerWidth;t=B/e*100}return{transform:`translateX(${e+t}%)`,transition:T?"none":`transform ${g}ms ${p}`,willChange:"transform",cursor:f?T?"grabbing":"grab":"default"}})(),onMouseDown:f?e=>{e.preventDefault(),I(e.clientX)}:void 0,onTouchStart:f?e=>{I(e.touches[0].clientX)}:void 0,onDragStart:e=>e.preventDefault(),onClick:f?H:void 0,children:(()=>{const e=[];for(let t=0;t<F;t++){const r=t*w,s=n.slice(r,r+w);e.push(s)}return e})().map(((e,t)=>(0,At.jsx)("div",{className:"flex-shrink-0 w-full",children:(0,At.jsx)("div",{className:`grid grid-cols-${s.mobile} md:grid-cols-${s.tablet} lg:grid-cols-${s.desktop} ${d}`,children:e.map(((e,n)=>(0,At.jsx)("div",{className:"transition-all duration-300 "+(t===y?"opacity-100 transform translate-y-0":"opacity-70 transform translate-y-1"),style:{transitionDelay:t===y?100*n+"ms":"0ms"},onClick:f?H:void 0,onMouseDown:f?e=>{e.preventDefault()}:void 0,children:r?r(e,n):(0,At.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"text-white",children:["Item ",n+1]})})},e.id||n)))})},t)))})})}),a&&U&&(0,At.jsx)("div",{className:`flex justify-center mt-6 gap-2 ${u}`,children:Array.from({length:F}).map(((e,t)=>(0,At.jsx)("button",{onClick:()=>{return e=t,void(j||e===y||(C(!0),b(e),setTimeout((()=>{C(!1)}),g)));var e},disabled:j,className:"w-2 h-2 rounded-full transition-all duration-300 hover:scale-125 disabled:cursor-not-allowed "+(t===y?"bg-blue-400 scale-125":"bg-gray-600 hover:bg-gray-500"),"aria-label":`Go to slide ${t+1}`},t)))})]})},Wk=()=>{const[e,n]=(0,t.useState)(0),[r,s]=(0,t.useState)(!0),[i,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const e=async()=>{if(!Qb.db)return n(0),void s(!1);try{const e=sessionStorage.getItem("cached_total_visits"),t=sessionStorage.getItem("cache_time"),r=Date.now();if(e&&t&&r-parseInt(t)<6e4)return n(parseInt(e)),void s(!1);const i=(0,Hb.doc)(Qb.db,"sessionVisits","total"),o=await(0,Hb.getDoc)(i);if(o.exists()){const e=o.data().count||0;n(e),sessionStorage.setItem("cached_total_visits",e.toString()),sessionStorage.setItem("cache_time",r.toString())}else n(0);a(null)}catch(e){a(e.message),n(0)}finally{s(!1)}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[]),{totalVisits:e,loading:r,error:i}},$k=()=>{(e=>{const n=Y();(0,t.useEffect)((()=>{const t=async()=>{if(e)try{if("true"!==localStorage.getItem("adminFirebaseAuth"))return;if(!Qb.db||"demo-project"===e)return;const t=(0,Hb.doc)(Qb.db,"pageVisits",e);(await(0,Hb.getDoc)(t)).exists()?await(0,Hb.mZ)(t,{count:(0,Hb.GV)(1),lastVisited:new Date,pageName:e}):await(0,Hb.BN)(t,{count:1,lastVisited:new Date,pageName:e,createdAt:new Date})}catch(t){}};if("/"===n.pathname&&"home"===e||"/news"===n.pathname&&"news"===e||"/solar"===n.pathname&&"solar"===e||"/calendar"===n.pathname&&"calendar"===e||"/lich-viet"===n.pathname&&"lich-viet"===e||"/battu"===n.pathname&&"battu"===e||"/lakinh"===n.pathname&&"lakinh"===e||"/luchao"===n.pathname&&"luchao"===e||"/kymon"===n.pathname&&"kymon"===e||"/news"===n.pathname&&"news"===e||"/profile"===n.pathname&&"profile"===e){const e=setTimeout(t,300);return()=>clearTimeout(e)}}),[e,n.pathname])})("news");const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)({}),[c,u]=(0,t.useState)(!0);(0,t.useEffect)((()=>{var e;null===(e=document.getElementById("topPage"))||void 0===e||e.scrollIntoView({behavior:"smooth"}),d()}),[]);const d=async()=>{try{u(!0);const[e,t,r,i]=await Promise.all([(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("isFeatured","==",!0),(0,Hb.AB)(10)),t=await(0,Hb.GG)(e);return t.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate()}})).filter((e=>"published"===e.status)).sort(((e,t)=>{const n=e.featuredPosition||1,r=t.featuredPosition||1;if(n!==r)return n-r;const s=e.createdAt||new Date(0);return(t.createdAt||new Date(0))-s})).slice(0,4)}catch(e){return[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb.AB)(20)),t=await(0,Hb.GG)(e);return t.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate()}})).filter((e=>"published"===e.status)).sort(((e,t)=>{const n=e.views||0;return(t.views||0)-n})).slice(0,5)}catch(e){return[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"));return(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb.My)("createdAt","desc"),(0,Hb.AB)(15));return(await(0,Hb.GG)(e)).docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate()}}))}catch(e){return[]}})()]);n(e),s(t),a(r);const o={};r.length>0&&r.forEach((e=>{const t=i.filter((t=>t.categoryId===e.id&&"published"===t.status)).slice(0,3);o[e.id]=t})),l(o)}catch(e){console.error("Error loading news data:",e)}finally{u(!1)}};return c?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(fw,{title:"Tin T\u1ee9c Phong Th\u1ee7y & L\u1ee5c h\xe0o",description:"C\u1eadp nh\u1eadt tin t\u1ee9c m\u1edbi nh\u1ea5t v\u1ec1 phong th\u1ee7y, L\u1ee5c h\xe0o, b\xe1t t\u1ef1, xem ng\xe0y t\u1ed1t x\u1ea5u. Th\xf4ng tin ch\xednh x\xe1c v\xe0 h\u1eefu \xedch cho cu\u1ed9c s\u1ed1ng h\xe0ng ng\xe0y.",keywords:["tin t\u1ee9c phong th\u1ee7y","L\u1ee5c h\xe0o h\xe0ng ng\xe0y","b\xe1t t\u1ef1","xem ng\xe0y t\u1ed1t","phong th\u1ee7y nh\xe0 \u1edf","L\u1ee5c h\xe0o 2024"],url:"/news",type:"website"}),(0,At.jsx)("div",{className:"min-h-screen text-white relative z-30 text-left",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 py-2",children:[(0,At.jsx)("section",{className:"mb-12",children:(0,At.jsxs)("div",{className:"md:flex gap-6 items-start",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"flex items-center gap-3 mb-6",children:(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-32 rounded"})}),(0,At.jsxs)("div",{className:"flex flex-col md:flex-row-reverse gap-6",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-80 rounded-lg"}),(0,At.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-6 w-3/4 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-1/2 rounded"})]})]}),(0,At.jsxs)("div",{className:"space-y-4 w-full md:w-1/3",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-24 rounded-lg"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-24 rounded-lg"})]})]})]}),(0,At.jsxs)("div",{className:"md:w-[320px] flex-shrink-0 mt-6 md:mt-0",children:[(0,At.jsx)("div",{className:"flex items-center gap-3 mb-6",children:(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-40 rounded"})}),(0,At.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map((e=>(0,At.jsxs)("div",{className:"flex gap-3",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-16 w-16 rounded flex-shrink-0"}),(0,At.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-full rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-3 w-2/3 rounded"})]})]},e)))})]})]})}),[1,2,3].map((e=>(0,At.jsxs)("section",{className:"mb-12",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-48 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-6 w-24 rounded"})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map((e=>(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"bg-slate-700 h-48 rounded-lg mb-3"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("div",{className:"bg-slate-700 h-5 w-full rounded"}),(0,At.jsx)("div",{className:"bg-slate-700 h-4 w-3/4 rounded"}),(0,At.jsx)("div",{className:"bg-slate-700 h-3 w-1/2 rounded"})]})]},e)))})]},e)))]})})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(fw,{title:"Tin T\u1ee9c Phong Th\u1ee7y & L\u1ee5c h\xe0o",description:"C\u1eadp nh\u1eadt tin t\u1ee9c m\u1edbi nh\u1ea5t v\u1ec1 phong th\u1ee7y, L\u1ee5c h\xe0o, b\xe1t t\u1ef1, xem ng\xe0y t\u1ed1t x\u1ea5u. Th\xf4ng tin ch\xednh x\xe1c v\xe0 h\u1eefu \xedch cho cu\u1ed9c s\u1ed1ng h\xe0ng ng\xe0y.",keywords:["tin t\u1ee9c phong th\u1ee7y","L\u1ee5c h\xe0o h\xe0ng ng\xe0y","b\xe1t t\u1ef1","xem ng\xe0y t\u1ed1t","phong th\u1ee7y nh\xe0 \u1edf","L\u1ee5c h\xe0o 2024"],url:"/news",type:"website"}),(0,At.jsx)("div",{className:"min-h-screen  text-white relative z-30 text-left md:pt-4 pt-2",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 pb-8",children:[(0,At.jsxs)("section",{className:"mb-12",children:[(e.length>0||r.length>0)&&(0,At.jsxs)("div",{className:"md:flex gap-6 items-start",children:[(0,At.jsxs)("div",{className:"col-hight",children:[(0,At.jsx)("div",{className:"flex items-center gap-3 mb-6",children:(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Tin N\u1ed5i B\u1eadt"})}),(0,At.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row-reverse gap-6",children:[(0,At.jsx)("div",{className:"flex-1",children:(e.length>0?e[0]:r[0])&&(0,At.jsx)(Gk,{article:e.length>0?e[0]:r[0],variant:"featured",className:"h-full",categories:i,showAuthor:!1})}),(0,At.jsx)("div",{className:"space-y-4 w-full md:w-1/3",children:(e.length>0?e:r).slice(1,3).map((e=>(0,At.jsx)(Gk,{article:e,variant:"compact",categories:i,showAuthor:!1},e.id)))})]})]}),(0,At.jsxs)("div",{className:"md:w-[320px] flex-shrink-0 col-more md:mt-0 mt-6",children:[(0,At.jsx)("div",{className:"flex items-center gap-3 mb-6",children:(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:"Xem Nhi\u1ec1u Nh\u1ea5t"})}),(0,At.jsx)("div",{className:"space-y-4 lg:h-[500px] overflow-y-auto",children:r.length>0?r.map((e=>(0,At.jsx)(Gk,{article:e,variant:"horizontal",categories:i,showAuthor:!1,showDescription:!1},e.id))):(0,At.jsx)("div",{className:"text-center py-8 text-gray-400 text-xs",children:(0,At.jsx)("p",{children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u l\u01b0\u1ee3t xem"})})})]})]}),0===e.length&&0===r.length&&(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,At.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf0"})}),(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Ch\u01b0a c\xf3 tin n\u1ed5i b\u1eadt"}),(0,At.jsx)("p",{className:"text-gray-500",children:"H\xe3y quay l\u1ea1i sau \u0111\u1ec3 xem tin t\u1ee9c m\u1edbi nh\u1ea5t"})]})]}),i.map((e=>{const t=o[e.id]||[];return 0===t.length?null:(0,At.jsxs)("section",{className:"mb-12",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-200",children:e.name}),(0,At.jsxs)(nt,{to:`/news/category/${e.id}`,className:"flex items-center gap-2 text-green-400 hover:text-green-300 transition-colors",children:[(0,At.jsx)("span",{children:"Xem t\u1ea5t c\u1ea3"}),(0,At.jsx)(yT,{className:"w-4 h-4"})]})]}),(0,At.jsx)(qk,{items:t,itemsPerSlide:{mobile:1,tablet:2,desktop:3},renderItem:e=>(0,At.jsx)(Gk,{article:e,variant:"default",categories:i,showAuthor:!1},e.id),showControls:!0,showIndicators:!0,gap:"gap-6",padding:"px-0",animationDuration:500,animationType:"ease-in-out",enableDrag:!0,dragThreshold:50,id:`category-${e.id}`})]},e.id)}))]})})]})};function Xk(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Yk=t.forwardRef(Xk),Jk=()=>{var e,n;const{id:r,slug:s}=te(),{currentUser:i,isEmailVerified:a,userStars:o,subtractUserStars:l}=Aw(),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)(null),[m,A]=(0,t.useState)([]),[g,p]=(0,t.useState)([]),[f,x]=(0,t.useState)(!0),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(!1),[C,T]=(0,t.useState)(!1),[S,_]=(0,t.useState)(!1),[E,B]=(0,t.useState)(null),M=i&&a;(0,t.useEffect)((()=>{var e;null===(e=document.getElementById("topPage"))||void 0===e||e.scrollIntoView({behavior:"smooth"}),r&&L()}),[r]),(0,t.useEffect)((()=>{c&&k()}),[c,M,o]),(0,t.useEffect)((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;w(e>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,t.useEffect)((()=>{hw.cleanupExpiredCache(),hw.clearConfigCache()}),[]);const k=async()=>{if(!c)return;if(!c.requireStars||!c.starCost)return j(!0),void B(null);const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(e&&"admin@thiendianhan.app"===t)return j(!0),void B(null);if(M&&i)try{if(await hw.hasAccess(r,i.uid)){j(!0);const e=await hw.refreshAccessInfo(r,i.uid);return B(e),void await hw.updateLastAccessed(r,i.uid)}}catch(n){console.error("Error checking content access:",n)}j(!1),B(null)},L=async()=>{try{var e,t;x(!0);const s=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",r));if(!s.exists())return console.error("Article not found"),void x(!1);const i={id:s.id,...s.data(),createdAt:null===(e=s.data().createdAt)||void 0===e?void 0:e.toDate(),updatedAt:null===(t=s.data().updatedAt)||void 0===t?void 0:t.toDate()};if(u(i),!v&&i.id)try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",i.id),{views:(0,Hb.GV)(1)}),y(!0)}catch(n){}if(i.categoryId){const[e,t,s]=await Promise.all([(async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articleCategories",i.categoryId));return e.exists()?{id:e.id,...e.data()}:null}catch(n){return null}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("categoryId","==",i.categoryId),(0,Hb.AB)(8)),t=await(0,Hb.GG)(e),n=t.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate()}})).filter((e=>{const t="published"===e.status,n=e.id!==r;return t&&n})).sort(((e,t)=>{const n=e.createdAt||new Date(0);return(t.createdAt||new Date(0))-n})).slice(0,6);return n}catch(n){return[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"));return(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(n){return[]}})()]);h(e),p(t),A(s)}}catch(n){console.error("Error loading article data:",n)}finally{x(!1)}};if(f)return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(fw,{title:"\u0110ang t\u1ea3i b\xe0i vi\u1ebft...",description:"\u0110ang t\u1ea3i n\u1ed9i dung b\xe0i vi\u1ebft...",url:`/news/${r}`,type:"article"}),(0,At.jsx)("div",{className:"min-h-screen text-white relative z-30 text-left md:pt-8 pt-4",children:(0,At.jsxs)("div",{className:"container mx-auto px-8 py-8",children:[(0,At.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,At.jsx)(gt,{})}),(0,At.jsxs)("article",{className:"max-w-4xl mx-auto",children:[(0,At.jsxs)("header",{className:"mb-8",children:[(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-3/4 mb-2 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-1/2 rounded"})]}),(0,At.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-4 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-24 rounded"})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-4 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-16 rounded"})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-4 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-20 rounded"})]})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-full mb-2 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-4/5 rounded"})]}),(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-96 w-full rounded-lg"})})]}),(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map((e=>(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-full rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-11/12 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-4/5 rounded"})]},e)))})}),(0,At.jsxs)("div",{className:"pt-6 border-t border-slate-700",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-16 mb-3 rounded"}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:[1,2,3].map((e=>(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-6 w-16 rounded-full"},e)))})]})]}),(0,At.jsxs)("section",{className:"mt-16",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-48 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-6 w-32 rounded"})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map((e=>(0,At.jsx)(Kk,{},e)))})]})]})})]});if(!c)return(0,At.jsx)("div",{className:"min-h-screen  text-white flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft"}),(0,At.jsx)(nt,{to:"/news",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"Quay l\u1ea1i trang tin t\u1ee9c"})]})});const I=[];var D,P,F;return d&&I.push({text:d.name,link:`/news/category/${d.id}`}),I.push({text:(D=c.title,P=50,D?D.length<=P?D:D.substring(0,P)+"...":""),link:null}),(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(fw,{title:c.title,description:c.description||(e=>{if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(c.content).substring(0,160),keywords:c.tags||[],image:Qk(c,m),url:`/news/${r}/${c.slug||Vk(c.title)}`,type:"article",author:zk(c).name,publishedTime:null===(e=c.createdAt)||void 0===e?void 0:e.toISOString(),modifiedTime:null===(n=c.updatedAt)||void 0===n?void 0:n.toISOString(),section:null===d||void 0===d?void 0:d.name,tags:c.tags||[]}),(0,At.jsxs)("div",{className:"min-h-screen  text-white relative z-30 text-left",children:[(0,At.jsxs)("div",{className:"container mx-auto px-8 pb-8",children:[(0,At.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,At.jsx)(pt,{items:I,showBackButton:!0,backTo:"/news",backText:"Tin t\u1ee9c"})}),(0,At.jsxs)("article",{className:"max-w-4xl mx-auto",children:[(0,At.jsxs)("header",{className:"mb-8",children:[(0,At.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4 leading-tight",children:c.title}),(0,At.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-sm text-gray-400 mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)(Iy,{className:"w-4 h-4"}),(0,At.jsxs)("span",{children:["\u0110\u0103ng ng\xe0y: ",(F=c.createdAt,F?F.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"")]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)(LM,{className:"w-4 h-4"}),(0,At.jsxs)("span",{children:[(c.views||0)+1," l\u01b0\u1ee3t xem"]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)(Ck,{className:"w-4 h-4"}),(0,At.jsxs)("span",{children:["T\xe1c gi\u1ea3: ",zk(c).name]})]}),d&&(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)(Yk,{className:"w-4 h-4"}),(0,At.jsx)(nt,{to:`/news/category/${d.id}`,className:"text-blue-400 hover:text-blue-300 transition-colors",children:d.name})]})]}),c.description&&(0,At.jsx)("div",{className:"text-lg text-gray-300 mb-6 leading-relaxed",children:c.description}),Qk(c,m)&&(0,At.jsx)("div",{className:"mb-8",children:(0,At.jsx)(Hk,{src:Qk(c,m),alt:c.title,className:"w-full max-h-96 object-cover rounded-lg shadow-xl",showText:!0,textSize:"text-lg"})})]}),N?(0,At.jsxs)("div",{className:"prose prose-invert prose-lg max-w-none",children:[E&&E.hasAccess&&(0,At.jsx)("div",{className:"mb-6 p-4 bg-green-900/20 border border-green-700 rounded-lg hidden",children:(0,At.jsx)("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:(0,At.jsxs)("span",{children:["B\u1ea1n \u0111\xe3 tr\u1ea3 ",c.starCost," sao cho b\xe0i vi\u1ebft n\xe0y. B\u1ea1n c\xf3 ",(0,At.jsxs)("strong",{children:[E.daysLeft," ng\xe0y"]})," \u0111\u1ec3 xem."]})})}),(0,At.jsx)("div",{className:"article-content text-gray-400 leading-relaxed",dangerouslySetInnerHTML:{__html:c.content}})]}):(0,At.jsx)("div",{className:"prose prose-invert prose-lg max-w-none",children:(0,At.jsxs)("div",{className:"bg-slate-800 border border-yellow-500 rounded-lg p-8 text-center",children:[(0,At.jsx)(jT,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"B\xe0i vi\u1ebft y\xeau c\u1ea7u sao \u0111\u1ec3 xem"}),(0,At.jsxs)("p",{className:"text-gray-300 mb-6",children:["\u0110\u1ec3 xem to\xe0n b\u1ed9 n\u1ed9i dung b\xe0i vi\u1ebft n\xe0y, b\u1ea1n c\u1ea7n tr\u1ea3 ",(0,At.jsxs)("strong",{className:"text-yellow-400",children:[c.starCost," sao"]}),"."]}),M?(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-400",children:[(0,At.jsx)(Tw,{className:"w-4 h-4 text-yellow-400"}),(0,At.jsxs)("span",{children:["Sao hi\u1ec7n t\u1ea1i: ",(0,At.jsx)("strong",{className:"text-white",children:o})]})]}),o>=c.starCost?(0,At.jsxs)("button",{onClick:()=>T(!0),className:"inline-flex items-center px-6 py-3 transition-colors button-style mx-auto",children:[(0,At.jsx)(Tw,{className:"w-5 h-5 mr-2"}),"Tr\u1ea3 ",c.starCost," sao \u0111\u1ec3 xem"]}):(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("p",{className:"text-red-400 mb-4",children:["B\u1ea1n kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 xem b\xe0i vi\u1ebft n\xe0y. C\u1ea7n th\xeam ",(0,At.jsxs)("strong",{children:[c.starCost-o," sao"]}),"."]}),(0,At.jsx)(nt,{to:"/profile",className:"inline-flex items-center px-6 py-3 transition-colors button-style",children:"N\xe2ng c\u1ea5p t\xe0i kho\u1ea3n"})]})]}):(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("p",{className:"text-gray-300",children:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 xem b\xe0i vi\u1ebft n\xe0y."}),(0,At.jsx)(nt,{to:"/login",className:"inline-flex items-center px-6 py-3 transition-colors button-style",children:"\u0110\u0103ng nh\u1eadp"})]})]})}),d&&N&&(0,At.jsx)("div",{className:"mt-0 pt-6",children:(0,At.jsx)("div",{className:"bg-slate-800 border-l-4 border-yellow-500 p-4 rounded-r-lg",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(jw,{className:"h-6 w-6 text-yellow-500 mt-0.5"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-yellow-500 hidden",children:"Th\xf4ng b\xe1o tr\xe1ch nhi\u1ec7m"}),(0,At.jsx)("div",{className:"mt-0 text-sm text-yellow-100",children:(0,At.jsx)("p",{className:"whitespace-pre-wrap",children:d.responsibilityNotice||"N\u1ed9i dung \u0111\u01b0\u1ee3c s\u01b0u t\u1ea7m v\xe0 ch\u1ecdn l\u1ecdc t\u1eeb kinh nghi\u1ec7m d\xe2n gian - T\u1ea5t c\u1ea3 ch\u1ec9 mang t\xednh ch\u1ea5t tham kh\u1ea3o kh\xf4ng mang t\xednh ch\u1ea5t \u0111\u1ea3m b\u1ea3o ch\xednh x\xe1c"})})]})]})})}),c.tags&&c.tags.length>0&&N&&(0,At.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-700",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Th\u1ebb:"}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map(((e,t)=>(0,At.jsxs)("span",{className:"px-3 py-1 bg-slate-800 text-blue-400 rounded-full text-sm",children:["#",e]},t)))})]})]}),g.length>0&&(0,At.jsxs)("section",{className:"mt-16",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsx)("h2",{className:"text-2xl font-medium",children:"B\xe0i vi\u1ebft li\xean quan"}),d&&(0,At.jsxs)(nt,{to:`/news/category/${d.id}`,className:"text-blue-400 hover:text-blue-300 transition-colors text-sm flex items-center gap-2",children:["Xem th\xeam ",(0,At.jsx)(yT,{className:"w-4 h-4"})]})]}),(0,At.jsx)(qk,{items:g,itemsPerSlide:{mobile:1,tablet:2,desktop:3},renderItem:e=>(0,At.jsx)(Gk,{article:e,variant:"default",categories:m},e.id),showControls:!0,showIndicators:!0,gap:"gap-6",padding:"px-0",animationDuration:600,animationType:"ease-out",enableDrag:!0,dragThreshold:60})]})]}),b&&(0,At.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-[80px] right-5 z-50 p-3 bg-white/80 hover:bg-white text-black rounded-full shadow-lg transition-all duration-300 hover:scale-110","aria-label":"Scroll to top",children:(0,At.jsx)(RC,{className:"h-6 w-6 text-black"})}),C&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,At.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 max-w-md w-full",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(Tw,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"X\xe1c nh\u1eadn"}),(0,At.jsxs)("p",{className:"text-gray-300 mb-6",children:["B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n tr\u1ea3 ",(0,At.jsxs)("strong",{className:"text-yellow-400",children:[null===c||void 0===c?void 0:c.starCost," sao"]})," \u0111\u1ec3 xem b\xe0i vi\u1ebft n\xe0y kh\xf4ng?"]}),(0,At.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-400 mb-6",children:[(0,At.jsx)(Tw,{className:"w-4 h-4 text-yellow-400"}),(0,At.jsxs)("span",{children:["Sao hi\u1ec7n t\u1ea1i: ",(0,At.jsx)("strong",{className:"text-white",children:o})]}),(0,At.jsx)("span",{children:"\u2192"}),(0,At.jsxs)("span",{children:["Sau khi tr\u1ea3: ",(0,At.jsx)("strong",{className:"text-white",children:o-((null===c||void 0===c?void 0:c.starCost)||0)})]})]}),(0,At.jsxs)("div",{className:"flex gap-3",children:[(0,At.jsx)("button",{onClick:()=>T(!1),disabled:S,className:"flex-1 px-4 py-2 border border-gray-600 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:async()=>{if(c&&M&&i){_(!0);try{if(await l(c.starCost,`Xem b\xe0i vi\u1ebft: ${c.title}`)){const e=await hw.grantAccess(r,i.uid,c.starCost,c.title);if(!e.success)throw new Error(e.error);{j(!0),T(!1);const t=await hw.refreshAccessInfo(r,i.uid);B(t);const n=t?t.daysLeft:Math.ceil((e.expiresAt-Date.now())/864e5);window.showToast&&window.showToast(`\u0110\xe3 tr\u1eeb ${c.starCost} sao. B\u1ea1n c\xf3 th\u1ec3 xem b\xe0i vi\u1ebft n\xe0y trong ${n} ng\xe0y`,"success")}}else window.showToast&&window.showToast("Kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 xem b\xe0i vi\u1ebft n\xe0y","error")}catch(e){console.error("Error processing star payment:",e),window.showToast&&window.showToast("C\xf3 l\u1ed7i x\u1ea3y ra khi x\u1eed l\xfd thanh to\xe1n","error")}finally{_(!1)}}},disabled:S,className:"flex-1 px-4 py-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed button-style",children:S?"\u0110ang x\u1eed l\xfd...":"X\xe1c nh\u1eadn"})]})]})})}),(0,At.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          .article-content h1, .article-content h2, .article-content h3, .article-content h4 {\n            color: #ffffff;\n            margin-top: 2rem;\n            margin-bottom: 1rem;\n            font-weight: bold;\n          }\n          .article-content h1 { font-size: 2rem; }\n          .article-content h2 { font-size: 1.5rem; }\n          .article-content h3 { font-size: 1.25rem; }\n          .article-content p {\n            margin-bottom: 1rem;\n            line-height: 1.7;\n          }\n          .article-content ul, .article-content ol {\n            margin: 1rem 0;\n            padding-left: 2rem;\n            list-style-type: disc;\n          }\n          .article-content li {\n            margin-bottom: 0.5rem;\n          }\n          .article-content a {\n            color: #60a5fa;\n            text-decoration: underline;\n          }\n          .article-content a:hover {\n            color: #93c5fd;\n          }\n          .article-content img {\n            max-width: 100%;\n            height: auto;\n            border-radius: 0.5rem;\n            margin: 1rem 0;\n          }\n          .article-content blockquote {\n            border-left: 4px solid #60a5fa;\n            padding-left: 1rem;\n            margin: 1rem 0;\n            font-style: italic;\n            color: #d1d5db;\n          }\n          .article-content code {\n            background-color: #374151;\n            padding: 0.25rem 0.5rem;\n            border-radius: 0.25rem;\n            font-family: monospace;\n          }\n          .article-content pre {\n            background-color: #1f2937;\n            padding: 1rem;\n            border-radius: 0.5rem;\n            overflow-x: auto;\n            margin: 1rem 0;\n          }\n          .article-content pre code {\n            background: none;\n            padding: 0;\n          }\n          .article-content b, .article-content strong {\n            color: #cccccc;\n          }\n        "}})]})]})},Zk=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;const[s,i]=(0,t.useState)(r),a=(0,t.useMemo)((()=>e.slice(0,s)),[e,s]),o=s<e.length;return{displayedItems:a,displayedCount:s,totalItems:e.length,hasMore:o,loadMore:()=>{i((t=>Math.min(t+n,e.length)))},reset:()=>{i(r)}}};function eL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const tL=t.forwardRef(eL),nL=()=>{const{categoryId:e}=te(),[n,r]=(0,t.useState)(null),[s,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),u=Zk(a,4,8);(0,t.useEffect)((()=>{e&&d()}),[e]),(0,t.useEffect)((()=>{u.reset()}),[a]);const d=async()=>{try{c(!0);const[t,n,s]=await Promise.all([(async()=>{try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articleCategories",e));if(!t.exists())throw new Error("Category not found");return{id:t.id,...t.data()}}catch(t){throw t}})(),(async()=>{try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("categoryId","==",e)),n=await(0,Hb.GG)(t),r=n.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate()}})).filter((e=>"published"===e.status)).sort(((e,t)=>{const n=e.createdAt||new Date(0);return(t.createdAt||new Date(0))-n}));return r}catch(t){return console.error("Error loading category articles:",t),[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"));return(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return[]}})()]);r(t),o(n),i(s)}catch(t){console.error("Error loading category data:",t),r(null)}finally{c(!1)}};if(l)return(0,At.jsx)("div",{className:"min-h-screen  text-white relative z-30 text-left md:pt-4 pt-2",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 pb-8",children:[(0,At.jsx)(gt,{}),(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-8 w-8 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-10 w-48 rounded"})]}),(0,At.jsxs)("div",{className:"mb-4",children:[(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-3/4 mb-2 rounded"}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-5 w-1/2 rounded"})]}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-32 rounded"})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12",children:[1,2,3,4,5,6,7,8].map((e=>(0,At.jsx)(Kk,{},e)))}),(0,At.jsx)("div",{className:"flex justify-center",children:(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-12 w-48 rounded-lg"})})]})});if(!n)return(0,At.jsx)("div",{className:"min-h-screen  text-white flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Kh\xf4ng t\xecm th\u1ea5y danh m\u1ee5c"}),(0,At.jsx)(nt,{to:"/news",className:"text-green-400 hover:text-green-300 transition-colors",children:"Quay l\u1ea1i trang tin t\u1ee9c"})]})});const h=[{text:n.name,link:null}];return(0,At.jsx)("div",{className:"min-h-screen  text-white relative z-30 text-left",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsx)(pt,{items:h,showBackButton:!0,backTo:"/news",backText:"Tin t\u1ee9c"}),(0,At.jsxs)("div",{className:"mb-8",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,At.jsx)(tL,{className:"w-8 h-8 text-green-400"}),(0,At.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-green-400",children:n.name})]}),n.description&&(0,At.jsx)("p",{className:"text-gray-300 text-lg mb-4",children:n.description}),(0,At.jsxs)("div",{className:"text-gray-400",children:["Hi\u1ec3n th\u1ecb ",(0,At.jsx)("span",{className:"text-green-400 font-semibold",children:u.displayedCount})," / ",(0,At.jsx)("span",{className:"text-green-400 font-semibold",children:a.length})," b\xe0i vi\u1ebft"]})]}),a.length>0?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12",children:u.displayedItems.map((e=>(0,At.jsx)(Gk,{article:e,variant:"default",descriptionLines:3,maxDescriptionLength:120,categories:s},e.id)))}),u.hasMore&&(0,At.jsx)("div",{className:"flex justify-center mb-12",children:(0,At.jsxs)("button",{onClick:u.loadMore,className:"inline-flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl",children:[(0,At.jsx)(HC,{className:"w-5 h-5"}),"T\u1ea3i Th\xeam (",u.displayedCount,"/",u.totalItems,")"]})}),!u.hasMore&&u.totalItems>0&&(0,At.jsxs)("div",{className:"text-center text-gray-400 mb-12",children:["\u0110\xe3 hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 ",(0,At.jsx)("span",{className:"text-green-400 font-semibold",children:u.totalItems})," b\xe0i vi\u1ebft"]})]}):(0,At.jsxs)("div",{className:"text-center py-16",children:[(0,At.jsx)(tL,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,At.jsx)("h3",{className:"text-xl font-medium text-gray-300 mb-2",children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o"}),(0,At.jsx)("p",{className:"text-gray-500 mb-6",children:"Danh m\u1ee5c n\xe0y ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o \u0111\u01b0\u1ee3c \u0111\u0103ng."}),(0,At.jsxs)(nt,{to:"/news",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[(0,At.jsx)(mt,{className:"w-4 h-4"}),"Quay l\u1ea1i trang tin t\u1ee9c"]})]})]})})},rL=()=>{const{id:e}=te(),n=ee(),[r,s]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{(async()=>{try{const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",e));if(!t.exists())return void n("/404",{replace:!0});const r=t.data(),s=r.slug||Vk(r.title);n(`/news/${e}/${s}`,{replace:!0})}catch(t){console.error("Error redirecting article:",t),n("/404",{replace:!0})}finally{s(!1)}})()}),[e,n]),r?(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang chuy\u1ec3n h\u01b0\u1edbng..."})]})}):null},sL=e=>{let{pageKey:t,pageName:n,reason:r="access_denied"}=e;const{membershipTier:s,userStars:i}=Aw(),a=(()=>{switch(r){case"basic_locked":return{title:"Trang n\xe0y b\u1ecb kh\xf3a v\u1edbi h\u1ea1ng Basic",message:"B\u1ea1n c\u1ea7n n\xe2ng c\u1ea5p l\xean h\u1ea1ng cao h\u01a1n \u0111\u1ec3 truy c\u1eadp trang n\xe0y.",icon:(0,At.jsx)(jT,{className:"h-12 w-12 text-orange-400"})};case"insufficient_stars":return{title:"Kh\xf4ng \u0111\u1ee7 sao \u0111\u1ec3 truy c\u1eadp",message:"B\u1ea1n c\u1ea7n c\xf3 \u0111\u1ee7 sao trong t\xe0i kho\u1ea3n \u0111\u1ec3 truy c\u1eadp trang n\xe0y.",icon:(0,At.jsx)(Tw,{className:"h-12 w-12 text-yellow-400"})};case"not_verified":return{title:"Email ch\u01b0a \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c",message:"B\u1ea1n c\u1ea7n x\xe1c th\u1ef1c email \u0111\u1ec3 truy c\u1eadp trang n\xe0y.",icon:(0,At.jsx)(jw,{className:"h-12 w-12 text-red-400"})};default:return{title:"Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp",message:"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp trang n\xe0y.",icon:(0,At.jsx)(jT,{className:"h-12 w-12 text-gray-400"})}}})();return(0,At.jsx)("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative z-40",children:(0,At.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-[500px]",children:(0,At.jsx)("div",{className:"bg-slate-800 py-8 px-4 shadow-xl sm:rounded-lg sm:px-10 border border-slate-700",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"flex justify-center mb-4",children:a.icon}),(0,At.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:a.title}),(0,At.jsx)("p",{className:"text-gray-300 mb-6",children:a.message}),(0,At.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-slate-600",children:(0,At.jsxs)("div",{className:"text-sm text-gray-300 space-y-2",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Trang:"}),(0,At.jsx)("span",{className:"font-medium text-white",children:n||t})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"H\u1ea1ng hi\u1ec7n t\u1ea1i:"}),(0,At.jsx)("span",{className:"font-medium text-white capitalize",children:s})]}),"insufficient_stars"===r&&(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Sao hi\u1ec7n c\xf3:"}),(0,At.jsxs)("span",{className:"font-medium flex items-center text-white",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 text-yellow-400 mr-1"}),i]})]})]})}),(0,At.jsxs)("div",{className:"text-left",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-white mb-2",children:"\u0110\u1ec3 truy c\u1eadp trang n\xe0y:"}),(0,At.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:["basic_locked"===r&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("li",{children:"\u2022 N\xe2ng c\u1ea5p l\xean h\u1ea1ng Standard, Premium ho\u1eb7c Master"}),(0,At.jsxs)("li",{children:["\u2022 Li\xean h\u1ec7 ",(0,At.jsx)("b",{children:(0,At.jsx)("a",{href:"mailto:thiendianhan.app@gmail.com",className:"underline",children:"thiendianhan.app@gmail.com"})})," \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3"]})]}),"insufficient_stars"===r&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("li",{children:"\u2022 Ch\u1edd reset sao h\xe0ng th\xe1ng"}),(0,At.jsx)("li",{children:"\u2022 N\xe2ng c\u1ea5p l\xean h\u1ea1ng cao h\u01a1n \u0111\u1ec3 c\xf3 nhi\u1ec1u sao h\u01a1n"}),(0,At.jsx)("li",{children:"\u2022 Nh\u1eadn sao th\u01b0\u1edfng h\xe0ng ng\xe0y"})]}),"not_verified"===r&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("li",{children:"\u2022 Ki\u1ec3m tra email v\xe0 x\xe1c th\u1ef1c t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"\u2022 Li\xean h\u1ec7 admin n\u1ebfu c\u1ea7n h\u1ed7 tr\u1ee3"})]})]})]}),(0,At.jsx)("div",{className:"mt-6",children:(0,At.jsx)("button",{onClick:()=>window.history.back(),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white transition-colors button-style",children:"Quay l\u1ea1i trang tr\u01b0\u1edbc"})})]})})})})},iL=e=>{let{children:t,pageKey:n=null}=e;const{currentUser:r,isEmailVerified:s,hasPagePermission:i,checkPagePermission:a,permissionsLoading:o,isUserDisabled:l,userStars:c}=Aw(),u="true"===localStorage.getItem("adminFirebaseAuth"),d=localStorage.getItem("adminEmail"),h=u&&d===rw||r&&s;if(o&&r)return(0,At.jsx)("div",{className:"flex items-center justify-center px-4 py-20",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-300",children:"\u0110ang x\xe1c th\u1ef1c..."})]})});if(r&&!s&&!u)return(0,At.jsx)(pe,{to:"/email-verification",replace:!0});if(!h)return(0,At.jsx)(pe,{to:"/login",replace:!0});if(!u&&l)return(0,At.jsx)(pe,{to:"/account-blocked",replace:!0});if(n){const e=a(n);if(!e.hasPermission){const t=localStorage.getItem(`pagePointsConfig_${n}`);let r=n;if(t)try{r=JSON.parse(t).displayName||n}catch(m){console.error("Error parsing page points config:",m)}return(0,At.jsx)(sL,{pageKey:n,pageName:r,reason:e.reason})}}return t};function aL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const oL=t.forwardRef(aL);function lL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const cL=t.forwardRef(lL);function uL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const dL=t.forwardRef(uL),hL=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),{pageStats:i,loading:a}=(()=>{const[e,n]=(0,t.useState)({}),[r,s]=(0,t.useState)(!0),[i,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const e=async()=>{if(!Qb.db)return n({}),void s(!1);try{const e=sessionStorage.getItem("cached_page_stats"),t=sessionStorage.getItem("page_stats_cache_time"),r=Date.now();if(e&&t&&r-parseInt(t)<6e4)return n(JSON.parse(e)),void s(!1);const i={},o=[{key:"news",name:"Tin T\u1ee9c"},{key:"solar",name:"H\u1ec7 M\u1eb7t Tr\u1eddi"},{key:"calendar",name:"Xem Ng\xe0y"},{key:"lich-viet",name:"L\u1ecbch Vi\u1ec7t"},{key:"battu",name:"B\xe1t T\u1ef1"},{key:"lakinh",name:"La Kinh"},{key:"luchao",name:"L\u1ee5c H\xe0o"},{key:"kymon",name:"K\u1ef3 M\xf4n"}].map((async e=>{const t=(0,Hb.doc)(Qb.db,"pageVisits",e.key),n=await(0,Hb.getDoc)(t);if(n.exists()){const t=n.data();i[e.key]={name:e.name,count:t.count||0,lastVisited:t.lastVisited,createdAt:t.createdAt}}else i[e.key]={name:e.name,count:0,lastVisited:null,createdAt:null}}));await Promise.all(o),n(i),sessionStorage.setItem("cached_page_stats",JSON.stringify(i)),sessionStorage.setItem("page_stats_cache_time",r.toString()),a(null)}catch(e){a(e.message),n({})}finally{s(!1)}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)}),[]),{pageStats:e,loading:r,error:i}})(),{totalVisits:o,loading:l}=Wk();(0,t.useEffect)((()=>{const e=setTimeout((()=>{n(!0)}),2e3);return()=>clearTimeout(e)}),[]);const c=e=>null===e||void 0===e?"--":new Intl.NumberFormat("vi-VN").format(e);return e?a&&l?(0,At.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-700",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,At.jsx)(oL,{className:"w-5 h-5 text-blue-400"}),(0,At.jsx)("h3",{className:"text-white font-semibold",children:"Th\u1ed1ng k\xea"})]}),(0,At.jsx)("div",{className:"space-y-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,At.jsx)("span",{className:"text-gray-400",children:"\u0110ang t\u1ea3i..."}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-8 rounded"})]})})]}):(0,At.jsxs)("div",{className:"mt-8 pt-6 px-4 border-t border-slate-700",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,At.jsx)(oL,{className:"w-5 h-5 text-blue-400"}),(0,At.jsx)("h3",{className:"text-white font-semibold",children:"Th\u1ed1ng k\xea"})]}),(0,At.jsx)("div",{className:"py-1 mb-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{className:"flex items-center",children:(0,At.jsx)("span",{className:"text-green-400 font-medium text-sm",children:"T\u1ed5ng l\u01b0\u1ee3t truy c\u1eadp"})}),(0,At.jsx)("span",{className:"text-white font-bold text-lg",children:c(o)})]})}),(0,At.jsxs)("div",{className:"space-y-2 text-left",children:[(0,At.jsxs)("button",{onClick:()=>s(!r),className:"flex items-center justify-between w-full text-gray-400 text-[10px] font-medium uppercase tracking-wide mb-2 hover:text-gray-300 transition-colors",children:[(0,At.jsx)("span",{children:"L\u01b0\u1ee3t xem theo trang"}),r?(0,At.jsx)(cL,{className:"w-3 h-3"}):(0,At.jsx)(dL,{className:"w-3 h-3"})]}),r&&(0,At.jsx)("div",{className:"space-y-1 animate-in slide-in-from-top-2 duration-200",children:Object.entries(i).map((e=>{let[t,n]=e;return(0,At.jsxs)("div",{className:"flex justify-between items-start text-xs py-1 rounded hover:bg-slate-800/50 transition-colors",children:[(0,At.jsx)("span",{className:"text-gray-300 truncate flex-1 mr-2",children:n.name}),(0,At.jsx)("span",{className:"text-white font-medium min-w-[40px] text-right",children:c(n.count)})]},t)}))})]}),(0,At.jsx)("div",{className:"mt-4 pt-3 border-t border-slate-700 hidden",children:(0,At.jsx)("div",{className:"text-xs text-gray-500 space-y-1",children:(0,At.jsx)("p",{className:"text-center",children:"C\u1eadp nh\u1eadt m\u1ed7i 60 gi\xe2y"})})})]}):(0,At.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-700",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,At.jsx)(oL,{className:"w-5 h-5 text-blue-400"}),(0,At.jsx)("h3",{className:"text-white font-semibold",children:"Th\u1ed1ng k\xea"})]}),(0,At.jsx)("div",{className:"space-y-2",children:(0,At.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,At.jsx)("span",{className:"text-gray-400",children:"\u0110ang kh\u1edfi t\u1ea1o..."}),(0,At.jsx)("div",{className:"animate-pulse bg-slate-700 h-4 w-8 rounded"})]})})]})},mL=(0,t.createContext)(),AL=()=>{const e=(0,t.useContext)(mL);if(!e)throw new Error("useAdmin must be used within an AdminProvider");return e},gL=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{(()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");e&&t===rw&&(s(!0),l({email:t})),a(!1)})()}),[]),(0,t.useEffect)((()=>{const e=(0,nw.hg)(Qb.auth,(e=>{if(e&&e.email===rw){"true"===localStorage.getItem("adminFirebaseAuth")&&(s(!0),l({email:e.email,uid:e.uid}))}else if(e&&e.email!==rw){"true"===localStorage.getItem("adminFirebaseAuth")&&Qb.auth.signOut()}}));return()=>e()}),[]),(0,t.useEffect)((()=>{const e=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");e&&t===rw?(s(!0),l({email:t})):(s(!1),l(null)),a(!1)};return window.addEventListener("storage",e),window.addEventListener("adminAuthChange",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("adminAuthChange",e)}}),[r,o]);const c={isAdminAuthenticated:r,adminUser:o,adminLogin:()=>!1,adminLogout:async()=>{if(s(!1),l(null),localStorage.removeItem("adminFirebaseAuth"),localStorage.removeItem("adminEmail"),Qb.auth.currentUser&&Qb.auth.currentUser.email===rw)try{await Qb.auth.signOut()}catch(e){console.error("Error signing out from Firebase:",e)}window.dispatchEvent(new Event("adminAuthChange"))},loading:i};return(0,At.jsx)(mL.Provider,{value:c,children:n})},pL=e=>{let{isOpen:n,onClose:r,menuItems:s=[],showStats:i=!0,className:a=""}=e;const o=Y().pathname,{currentUser:l,membershipTier:c,membershipExpiry:u,userStars:d,isEmailVerified:h}=Aw(),{isAdminAuthenticated:m,adminUser:A}=AL(),g=l&&h||m,[p,f]=(0,t.useState)(!1),{totalVisits:x}=Wk();return(0,At.jsxs)(At.Fragment,{children:[n&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:r}),(0,At.jsx)("aside",{className:`fixed top-0 left-0 h-full w-64 bg-slate-900 border-r border-slate-700 z-50 transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"} ${a}`,children:(0,At.jsxs)("div",{className:"p-4 h-full overflow-y-auto",children:[(0,At.jsx)("div",{className:"flex items-center justify-end",children:(0,At.jsx)("button",{onClick:r,className:"text-white hover:text-green-300 p-1 rounded-lg hover:bg-slate-800 transition-colors",children:(0,At.jsx)(ky,{className:"w-6 h-6"})})}),(0,At.jsxs)("nav",{className:"space-y-2",children:[s.map(((e,n)=>{var s;const i=e.exactMatch?o===e.path:o===e.path||o.startsWith(e.path+"/");return(0,At.jsxs)(nt,{to:e.path,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${e.className||""} ${i?`${e.activeColor||"text-green-600"} font-bold`:"text-gray-300 hover:bg-slate-700 hover:text-white"}`,onClick:t=>{((e,t)=>{"H\u1ec7 M\u1eb7t Tr\u1eddi"===t.label&&g&&(e.preventDefault(),r(),"/solar"===o?window.location.reload():window.location.href="/solar")})(t,e),"H\u1ec7 M\u1eb7t Tr\u1eddi"===e.label&&g||r()},children:[t.cloneElement(e.icon,{className:`${e.iconClassName||""} ${(null===(s=e.icon.props)||void 0===s?void 0:s.className)||""}`}),(0,At.jsx)("span",{children:e.label})]},n)})),m&&(0,At.jsxs)("div",{className:"pt-4 border-t border-slate-700",children:[(0,At.jsx)("div",{className:"px-4 py-2 text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Admin Panel"}),(0,At.jsxs)(nt,{to:"/admin/dashboard",className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors "+(o.startsWith("/admin")?"text-yellow-600 font-bold bg-yellow-900/20":"text-yellow-300 hover:bg-slate-700 hover:text-yellow-200"),onClick:r,children:[(0,At.jsx)(dt,{className:"w-5 h-5"}),(0,At.jsx)("span",{children:"Admin Dashboard"})]})]})]}),i&&(0,At.jsx)(hL,{})]})})]})};function fL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const xL=t.forwardRef(fL);function vL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"}))}const yL=t.forwardRef(vL);function bL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const wL=t.forwardRef(bL);function NL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const jL=t.forwardRef(NL),CL=(0,At.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,At.jsx)("circle",{cx:"8",cy:"8",r:"6"}),(0,At.jsx)("path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18"}),(0,At.jsx)("path",{d:"M7 6h1v4"}),(0,At.jsx)("path",{d:"m16.71 13.88.7.71-2.82 2.82"})]}),TL=(0,At.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[(0,At.jsx)("path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z"}),(0,At.jsx)("circle",{cx:"12",cy:"12",r:"10"})]}),SL=[{path:"/news",label:"Tin T\u1ee9c",icon:(0,At.jsx)(yL,{className:"w-5 h-5"}),activeColor:"text-blue-400",exactMatch:!1,className:"news-menu-item",iconClassName:"news-icon"},{path:"/lich-viet",label:"L\u1ecbch Vi\u1ec7t",icon:(0,At.jsx)(ik,{className:"w-5 h-5"}),activeColor:"text-blue-400",exactMatch:!0,className:"calendar-menu-item",iconClassName:"calendar-icon"},{path:"/solar",label:"H\u1ec7 M\u1eb7t Tr\u1eddi",icon:(0,At.jsx)(wL,{className:"w-5 h-5"}),activeColor:"text-blue-400",exactMatch:!0,className:"solar-menu-item md:flex hidden",iconClassName:"solar-icon"},{path:"/calendar",label:"Xem Ng\xe0y",icon:(0,At.jsx)(nT,{className:"w-5 h-5"}),activeColor:"text-blue-400",exactMatch:!0,className:"date-menu-item",iconClassName:"date-icon"},{path:"/battu",label:"B\xe1t T\u1ef1",icon:(0,At.jsx)(jL,{className:"w-5 h-5"}),activeColor:"text-blue-400",exactMatch:!0,className:"battu-menu-item",iconClassName:"battu-icon"},{path:"/lakinh",label:"La Kinh",icon:TL,activeColor:"text-blue-400",exactMatch:!0,className:"lakinh-menu-item",iconClassName:"lakinh-icon"},{path:"/luchao",label:"L\u1ee5c H\xe0o",icon:CL,activeColor:"text-blue-400",exactMatch:!0,className:"luchao-menu-item",iconClassName:"luchao-icon"}];function _L(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const EL=t.forwardRef(_L),BL=e=>{let{currentUser:n,isEmailVerified:r,membershipExpiry:s,membershipTier:i,userStars:a,isAdminAuthenticated:o}=e;const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)([]),[h,m]=(0,t.useState)(0),{setBadge:A,clearBadge:g,isBadgeSupported:p}=(()=>{const[e,n]=(0,t.useState)(0),[r,s]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const e="setAppBadge"in navigator&&"clearAppBadge"in navigator;s(e)}),[]),{setBadge:(0,t.useCallback)((async e=>{if(r)try{e>0?(await navigator.setAppBadge(e),n(e)):(await navigator.clearAppBadge(),n(0))}catch(t){console.error("Failed to set app badge:",t)}}),[r]),clearBadge:(0,t.useCallback)((async()=>{if(r)try{await navigator.clearAppBadge(),n(0)}catch(e){console.error("Failed to clear app badge:",e)}}),[r]),isBadgeSupported:r,badgeCount:e}})(),f=e=>e?e.toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";(0,t.useEffect)((()=>{if(!n||!r)return d([]),m(0),void g();const e=[];let t=0;const o=JSON.parse(localStorage.getItem("readNotifications")||"{}");if(s&&i&&"basic"!==i)try{const n=s.toDate?s.toDate():new Date(s),r=new Date,a=n.getTime()-r.getTime(),l=Math.ceil(a/864e5);if(l<=7&&l>0){const r=`membership-expiry-${l}`,s=o[r]||!1,a=(e=>{if(!e)return null;const t=new Date;if(t>e)return null;const n=e.getTime()-t.getTime(),r=Math.floor(n/864e5),s=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4);return r>1?`${r} ng\xe0y, ${s} gi\u1edd`:1===r?`1 ng\xe0y, ${s} gi\u1edd ${i} ph\xfat`:s>0?`${s} gi\u1edd ${i} ph\xfat`:i>0?`${i} ph\xfat`:"\xedt ph\xfat"})(n);f(n);e.push({id:r,type:"warning",title:`G\xf3i ${i} s\u1eafp h\u1ebft h\u1ea1n`,message:`H\u1ebft h\u1ea1n sau ${a||`${l} ng\xe0y`}. `,icon:Iy,action:()=>window.location.href="/profile",urgent:l<=3,timestamp:new Date,isRead:s}),s||t++}else if(l<=0){const r="membership-expired",s=o[r]||!1,i=f(n);e.push({id:r,type:"error",title:"G\xf3i th\xe0nh vi\xean \u0111\xe3 h\u1ebft h\u1ea1n",message:`G\xf3i th\xe0nh vi\xean \u0111\xe3 h\u1ebft h\u1ea1n l\xfac ${i}. Vui l\xf2ng gia h\u1ea1n \u0111\u1ec3 ti\u1ebfp t\u1ee5c s\u1eed d\u1ee5ng c\xe1c t\xednh n\u0103ng premium.`,icon:jw,action:()=>window.location.href="/profile",urgent:!0,timestamp:new Date,isRead:s}),s||t++}}catch(l){}if(null!==a&&a<10){const n=`low-stars-${a}`,r=o[n]||!1;e.push({id:n,type:"info",title:"Sao th\u1ea5p",message:`B\u1ea1n c\xf2n ${a} sao. H\xe3y t\xedch l\u0169y th\xeam sao \u0111\u1ec3 s\u1eed d\u1ee5ng c\xe1c t\xednh n\u0103ng.`,icon:WC,action:()=>window.location.href="/profile",urgent:a<5,timestamp:new Date,isRead:r}),r||t++}d(e),m(t),A(t)}),[n,r,s,i,a]),(0,t.useEffect)((()=>{if(!s||!i||"basic"===i)return;const e=setInterval((()=>{const e=new CustomEvent("membership-time-update");window.dispatchEvent(e)}),6e4);return()=>clearInterval(e)}),[s,i]),(0,t.useEffect)((()=>{const e=()=>{d((e=>[...e]))};return window.addEventListener("membership-time-update",e),()=>window.removeEventListener("membership-time-update",e)}),[]);return(0,t.useEffect)((()=>{const e=e=>{l&&!e.target.closest(".notification-dropdown")&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[l]),n&&r||o?(0,At.jsxs)("div",{className:"relative notification-dropdown text-left",children:[(0,At.jsxs)("button",{onClick:()=>c(!l),className:"relative p-2 text-white hover:text-blue-400 transition-colors",title:"Th\xf4ng b\xe1o",children:[(0,At.jsx)(EL,{className:"w-5 h-5"}),h>0&&(0,At.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:h>9?"9+":h})]}),l&&(0,At.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-[300px] md:w-[500px] bg-slate-800 border border-slate-600 rounded-lg shadow-xl z-50  max-h-96 overflow-y-auto",children:[(0,At.jsxs)("div",{className:"p-4 border-b border-slate-600",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-white",children:"Th\xf4ng b\xe1o"}),h>0&&(0,At.jsx)("button",{onClick:()=>{m(0),g();const e=JSON.parse(localStorage.getItem("readNotifications")||"{}");u.forEach((t=>{e[t.id]=!0})),localStorage.setItem("readNotifications",JSON.stringify(e)),d((e=>e.map((e=>({...e,isRead:!0})))))},className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"\u0110\xe1nh d\u1ea5u \u0111\xe3 \u0111\u1ecdc"})]}),h>0&&(0,At.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[h," th\xf4ng b\xe1o m\u1edbi"]})]}),(0,At.jsx)("div",{className:"py-2",children:u.length>0?u.map((e=>(0,At.jsx)("div",{className:`px-4 py-3 hover:bg-slate-700 transition-colors cursor-pointer ${e.urgent?"border-l-4 border-red-500":""} ${e.isRead?"opacity-60":""}`,onClick:()=>{c(!1);const t=JSON.parse(localStorage.getItem("readNotifications")||"{}");t[e.id]=!0,localStorage.setItem("readNotifications",JSON.stringify(t)),d((t=>t.map((t=>t.id===e.id?{...t,isRead:!0}:t))));const n=Math.max(0,h-1);m(n),A(n),e.action&&e.action()},children:(0,At.jsxs)("div",{className:"flex items-start gap-3",children:[(0,At.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+("error"===e.type?"bg-red-500/20 text-red-400":"warning"===e.type?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"),children:(0,At.jsx)(e.icon,{className:"w-4 h-4"})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("p",{className:"text-sm font-medium "+(e.urgent?"text-red-400":"text-white"),children:e.title}),!e.isRead&&(0,At.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.message})]})]})},e.id))):(0,At.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,At.jsx)(EL,{className:"mx-auto h-8 w-8 text-gray-500 mb-2"}),(0,At.jsx)("p",{className:"text-sm text-gray-400",children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o m\u1edbi"})]})})]})]}):null};function ML(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const kL=t.forwardRef(ML);function LL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const IL=t.forwardRef(LL);function DL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const PL=t.forwardRef(DL);function FL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const UL=t.forwardRef(FL),RL=()=>{const{permissions:e,loading:n,requestCameraPermission:r,requestGPSPermission:s,requestCompassPermission:i,clearPermission:a,clearAllPermissions:o,resetPermission:l,hasPermission:c,getPermissionStatus:u,isPermissionDenied:d}=QT(),[h,m]=(0,t.useState)({camera:!1,gps:!1,compass:!1}),[A,g]=(0,t.useState)({camera:"",gps:"",compass:""}),p=e=>{switch(e){case"camera":return"Camera";case"gps":return"GPS / V\u1ecb tr\xed";case"compass":return"La b\xe0n / \u0110\u1ecbnh h\u01b0\u1edbng";default:return e}};return n?(0,At.jsx)("div",{className:"bg-slate-900 rounded-xl",children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"h-6 bg-slate-700 rounded w-1/3 mb-4"}),(0,At.jsx)("div",{className:"space-y-3",children:[1,2,3].map((e=>(0,At.jsx)("div",{className:"h-16 bg-slate-700 rounded"},e)))})]})}):(0,At.jsxs)("div",{className:"bg-slate-900 rounded-xl text-left overflow-x-hidden overflow-y-auto",children:[(0,At.jsxs)("h3",{className:"text-lg font-semibold text-white flex items-center gap-2 mb-4",children:[(0,At.jsx)(UL,{className:"h-5 w-5 text-blue-400"}),"Qu\u1ea3n l\xfd quy\u1ec1n truy c\u1eadp thi\u1ebft b\u1ecb"]}),(0,At.jsx)("p",{className:"text-gray-400 text-sm mb-6",children:"Quy\u1ec1n s\u1ebd t\u1ef1 \u0111\u1ed9ng h\u1ebft h\u1ea1n sau 30 ng\xe0y."}),(0,At.jsx)("div",{className:"space-y-4",children:["camera","gps","compass"].map((e=>{const t=(e=>{const t=RT(e);if(!t)return null;const n=new Date(t.timestamp),r=new Date(t.timestamp+2592e6),s=Date.now()>r.getTime();return{granted:t.granted,grantedDate:n,expiresDate:r,isExpired:s,userAgent:t.userAgent}})(e),n=c(e),o=h[e],u=A[e];return(0,At.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-600",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3",children:[(0,At.jsx)("div",{className:"flex items-center gap-2",children:n?(0,At.jsx)(nM,{className:"h-5 w-5 text-green-400"}):(0,At.jsx)(PM,{className:"h-5 w-5 text-red-400"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-white font-medium",children:p(e)}),(0,At.jsx)("p",{className:"text-gray-400 text-sm",children:n?"\u0110\xe3 c\u1ea5p quy\u1ec1n":"Ch\u01b0a c\u1ea5p quy\u1ec1n"})]})]}),(0,At.jsx)("div",{className:"flex gap-2",children:n?(0,At.jsxs)("button",{onClick:()=>(e=>{a(e),g((t=>({...t,[e]:"\ud83d\uddd1\ufe0f Quy\u1ec1n truy c\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a"})))})(e),className:"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-colors",children:[(0,At.jsx)(PL,{className:"h-4 w-4"}),"X\xf3a quy\u1ec1n"]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("button",{onClick:()=>(async e=>{m((t=>({...t,[e]:!0}))),g((t=>({...t,[e]:""})));try{let t;switch(e){case"camera":t=await r();break;case"gps":t=await s();break;case"compass":t=await i();break;default:throw new Error("Unknown permission type")}t.granted?g((n=>({...n,[e]:`\u2705 Quy\u1ec1n truy c\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5p (${t.source})`}))):g((n=>({...n,[e]:`\u274c Quy\u1ec1n truy c\u1eadp b\u1ecb t\u1eeb ch\u1ed1i: ${t.error}`})))}catch(t){g((n=>({...n,[e]:`\u274c L\u1ed7i: ${t.message}`})))}finally{m((t=>({...t,[e]:!1})))}})(e),disabled:o,className:"flex items-center gap-2 px-3 py-2 button-style-blue text-sm rounded-lg transition-colors",children:o?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Iy,{className:"h-4 w-4 animate-spin"}),"\u0110ang y\xeau c\u1ea7u..."]}):(0,At.jsx)(At.Fragment,{children:d(e)?"Th\u1eed l\u1ea1i":"Y\xeau c\u1ea7u quy\u1ec1n"})}),d(e)&&(0,At.jsxs)("button",{onClick:()=>(e=>{l(e),g((t=>({...t,[e]:"\ud83d\udd04 \u0110\xe3 reset quy\u1ec1n truy c\u1eadp, c\xf3 th\u1ec3 th\u1eed l\u1ea1i"})))})(e),className:"flex items-center gap-2 px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-lg transition-colors",title:"Reset v\xe0 th\u1eed l\u1ea1i t\u1eeb \u0111\u1ea7u",children:[(0,At.jsx)(XC,{className:"h-4 w-4"}),"Reset"]})]})})]}),t&&(0,At.jsxs)("div",{className:"text-xs text-gray-400 mb-3 space-y-1",children:[(0,At.jsxs)("div",{children:["\u0110\u01b0\u1ee3c c\u1ea5p: ",t.grantedDate.toLocaleString("vi-VN")]}),(0,At.jsxs)("div",{children:["H\u1ebft h\u1ea1n: ",t.expiresDate.toLocaleString("vi-VN")]}),t.isExpired&&(0,At.jsx)("div",{className:"text-orange-400",children:"\u26a0\ufe0f Quy\u1ec1n \u0111\xe3 h\u1ebft h\u1ea1n"})]}),u&&(0,At.jsx)("div",{className:"text-sm p-2 rounded mb-3 "+(u.includes("\u2705")?"bg-green-900/30 text-green-400":u.includes("\u274c")?"bg-red-900/30 text-red-400":"bg-orange-900/30 text-orange-400"),children:u}),d(e)&&(0,At.jsxs)("div",{className:"text-xs p-3 bg-yellow-900/30 border border-yellow-500/30 rounded mb-3",children:[(0,At.jsx)("h5",{className:"text-yellow-300 font-medium mb-2",children:"\ud83d\udca1 C\xe1ch kh\u1eafc ph\u1ee5c:"}),"compass"===e?(0,At.jsxs)("ul",{className:"text-yellow-200 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 \u0110\u1ea3m b\u1ea3o thi\u1ebft b\u1ecb h\u1ed7 tr\u1ee3 c\u1ea3m bi\u1ebfn \u0111\u1ecbnh h\u01b0\u1edbng"}),(0,At.jsx)("li",{children:"\u2022 Th\u1eed xoay thi\u1ebft b\u1ecb nh\u1eb9 khi \u0111\u01b0\u1ee3c h\u1ecfi quy\u1ec1n"}),(0,At.jsx)("li",{children:'\u2022 Tr\xean iOS: C\u1ea7n cho ph\xe9p "Motion & Orientation"'}),(0,At.jsx)("li",{children:"\u2022 N\u1ebfu v\u1eabn kh\xf4ng \u0111\u01b0\u1ee3c, th\u1eed Reset v\xe0 l\xe0m l\u1ea1i"})]}):"camera"===e?(0,At.jsxs)("ul",{className:"text-yellow-200 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Ki\u1ec3m tra camera kh\xf4ng b\u1ecb app kh\xe1c s\u1eed d\u1ee5ng"}),(0,At.jsx)("li",{children:"\u2022 Trong c\xe0i \u0111\u1eb7t tr\xecnh duy\u1ec7t, cho ph\xe9p camera"}),(0,At.jsx)("li",{children:"\u2022 Th\u1eed t\u1ea3i l\u1ea1i trang v\xe0 c\u1ea5p quy\u1ec1n l\u1ea1i"})]}):(0,At.jsxs)("ul",{className:"text-yellow-200 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Trong c\xe0i \u0111\u1eb7t tr\xecnh duy\u1ec7t, cho ph\xe9p v\u1ecb tr\xed"}),(0,At.jsx)("li",{children:"\u2022 \u0110\u1ea3m b\u1ea3o GPS/v\u1ecb tr\xed \u0111\u01b0\u1ee3c b\u1eadt tr\xean thi\u1ebft b\u1ecb"}),(0,At.jsx)("li",{children:"\u2022 Th\u1eed t\u1ea3i l\u1ea1i trang v\xe0 c\u1ea5p quy\u1ec1n l\u1ea1i"})]})]})]},e)}))}),(0,At.jsxs)("div",{className:"mt-4 w-full",children:[(0,At.jsxs)("button",{onClick:()=>{o(),g({camera:"\ud83d\uddd1\ufe0f T\u1ea5t c\u1ea3 quy\u1ec1n truy c\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c x\xf3a",gps:"",compass:""})},className:"flex w-full items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[(0,At.jsx)(PL,{className:"h-4 w-4"}),"X\xf3a t\u1ea5t c\u1ea3 quy\u1ec1n truy c\u1eadp"]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"\u26a0\ufe0f X\xf3a t\u1ea5t c\u1ea3 quy\u1ec1n s\u1ebd khi\u1ebfn b\u1ea1n ph\u1ea3i c\u1ea5p l\u1ea1i quy\u1ec1n khi s\u1eed d\u1ee5ng c\xe1c t\xednh n\u0103ng"})]})]})},OL=e=>{let{isOpen:n,onClose:r}=e;const[s,i,a]=Mk(),[o,l]=kk(),[c,u,d]=Lk(),[h,m]=Ik(),[A,g,p,f]=Dk(),{visitCount:x,firstVisit:v,lastFeature:y}=Pk(),{hasConsent:b,consentValue:w,giveConsent:N,revokeConsent:j,resetConsent:C}=Uk(),[T,S]=(0,t.useState)("appearance"),[_,E]=(0,t.useState)(!1),[B,M]=(0,t.useState)(s);if((0,t.useEffect)((()=>{M(s)}),[s]),(0,t.useEffect)((()=>{0}),[s]),(0,t.useEffect)((()=>{if(n){const e=setTimeout((()=>{const e=document.body;let t=s;e.classList.contains("theme-golden")?t="golden":e.classList.contains("theme-light")?t="light":e.classList.contains("theme-dark")&&(t="dark"),t!==s&&i(t),M(t)}),100);return()=>clearTimeout(e)}}),[n,s,i]),!n)return null;const k=[{id:"home",label:"Trang ch\u1ee7",icon:"\ud83c\udfe0"},{id:"calendar",label:"L\u1ecbch \xe2m",icon:"\ud83d\udcc5"},{id:"battu",label:"B\xe1t T\u1ef1",icon:"\ud83d\udd2e"},{id:"lakinh",label:"La Kinh",icon:"\ud83e\udded"},{id:"luchao",label:"L\u1ee5c H\xe0o",icon:"\ud83d\udcff"},{id:"solar-system",label:"H\u1ec7 m\u1eb7t tr\u1eddi",icon:"\ud83c\udf0c"}],L=[{id:"appearance",label:"Giao di\u1ec7n",icon:wL},{id:"permissions",label:"Quy\u1ec1n truy c\u1eadp",icon:dt},{id:"privacy",label:"Ri\xeang t\u01b0",icon:Nk}];return(0,At.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,At.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,At.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-slate-900 shadow-2xl border-l border-slate-700",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[(0,At.jsxs)("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,At.jsx)(Nk,{className:"h-6 w-6"}),"C\xe0i \u0111\u1eb7t"]}),(0,At.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white transition-colors",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsx)("div",{className:"flex overflow-x-auto border-b border-slate-700",children:L.map((e=>(0,At.jsxs)("button",{onClick:()=>S(e.id),className:"flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap "+(T===e.id?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"),children:[(0,At.jsx)(e.icon,{className:"h-4 w-4"}),e.label]},e.id)))}),(0,At.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:["appearance"===T&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-white font-medium mb-3",children:"Giao di\u1ec7n"}),(0,At.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,At.jsxs)("button",{onClick:()=>{i("dark"),M("dark")},className:"flex items-center gap-2 px-4 py-3 rounded-lg border transition-colors "+("dark"===B?"border-blue-500 bg-blue-500/10 text-blue-400":"border-slate-600 text-gray-300 hover:border-slate-500"),children:[(0,At.jsx)(kL,{className:"h-5 w-5"}),"T\u1ed1i","dark"===B&&(0,At.jsx)("span",{className:"text-xs ml-1",children:"\u2713"})]}),(0,At.jsxs)("button",{onClick:()=>{i("golden"),M("golden")},className:"flex items-center gap-2 px-4 py-3 rounded-lg border transition-colors "+("golden"===B?"border-yellow-500 bg-yellow-500/10 text-yellow-400":"border-slate-600 text-gray-300 hover:border-slate-500"),children:[(0,At.jsx)("span",{className:"text-lg",children:"\ud83c\udf1f"}),"Golden","golden"===B&&(0,At.jsx)("span",{className:"text-xs ml-1",children:"\u2713"})]})]}),!1]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-white font-medium mb-3",children:"Ng\xf4n ng\u1eef"}),(0,At.jsx)("div",{className:"space-y-2",children:[{code:"vi",label:"Ti\u1ebfng Vi\u1ec7t",flag:"\ud83c\uddfb\ud83c\uddf3"}].map((e=>(0,At.jsxs)("button",{onClick:()=>l(e.code),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg border transition-colors "+(o===e.code?"border-blue-500 bg-blue-500/10 text-blue-400":"border-slate-600 text-gray-300 hover:border-slate-500"),children:[(0,At.jsx)("span",{className:"text-lg",children:e.flag}),e.label]},e.code)))})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-white font-medium mb-3",children:"C\u1ee1 ch\u1eef"}),(0,At.jsx)("div",{className:"space-y-2",children:[{size:"small",label:"Nh\u1ecf",value:"14px"},{size:"medium",label:"V\u1eeba",value:"16px"},{size:"large",label:"L\u1edbn",value:"18px"}].map((e=>(0,At.jsxs)("button",{onClick:()=>u(e.size),className:"w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-colors "+(c===e.size?"border-blue-500 bg-blue-500/10 text-blue-400":"border-slate-600 text-gray-300 hover:border-slate-500"),children:[(0,At.jsx)("span",{children:e.label}),(0,At.jsx)("span",{className:"text-xs text-gray-400",children:e.value})]},e.size)))})]})]}),"preferences"===T&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("h3",{className:"text-white font-medium",children:"T\xf9y ch\u1ecdn \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("div",{className:"space-y-4",children:[{key:"showIntro",label:"Hi\u1ec3n th\u1ecb intro khi v\xe0o trang",desc:"Hi\u1ec3n th\u1ecb h\u01b0\u1edbng d\u1eabn cho ng\u01b0\u1eddi d\xf9ng m\u1edbi"},{key:"enableAnimations",label:"B\u1eadt hi\u1ec7u \u1ee9ng animation",desc:"C\xe1c hi\u1ec7u \u1ee9ng chuy\u1ec3n \u0111\u1ed9ng trong app"},{key:"enableSounds",label:"B\u1eadt \xe2m thanh",desc:"Ph\xe1t \xe2m thanh th\xf4ng b\xe1o v\xe0 hi\u1ec7u \u1ee9ng"},{key:"autoSaveProgress",label:"T\u1ef1 \u0111\u1ed9ng l\u01b0u ti\u1ebfn tr\xecnh",desc:"L\u01b0u t\u1ef1 \u0111\u1ed9ng d\u1eef li\u1ec7u \u0111\xe3 nh\u1eadp"},{key:"showAdvancedFeatures",label:"Hi\u1ec3n th\u1ecb t\xednh n\u0103ng n\xe2ng cao",desc:"C\xe1c t\xednh n\u0103ng d\xe0nh cho ng\u01b0\u1eddi d\xf9ng c\xf3 kinh nghi\u1ec7m"}].map((e=>(0,At.jsxs)("div",{className:"flex items-start justify-between py-3 border-b border-slate-800",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"text-white font-medium",children:e.label}),(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.desc})]}),(0,At.jsx)("button",{onClick:()=>m(e.key,!h[e.key]),className:"ml-4 relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(h[e.key]?"bg-blue-600":"bg-gray-600"),children:(0,At.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(h[e.key]?"translate-x-6":"translate-x-1")})})]},e.key)))})]}),"favorites"===T&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("h3",{className:"text-white font-medium",children:"T\xednh n\u0103ng y\xeau th\xedch"}),(0,At.jsx)("div",{className:"space-y-3",children:k.map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 bg-slate-800/50 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3",children:[(0,At.jsx)("span",{className:"text-lg",children:e.icon}),(0,At.jsx)("span",{className:"text-white",children:e.label})]}),(0,At.jsx)("button",{onClick:()=>f(e.id)?p(e.id):g(e.id),className:"p-2 rounded-lg transition-colors "+(f(e.id)?"text-red-400 hover:bg-red-500/10":"text-gray-400 hover:text-white hover:bg-slate-700"),children:f(e.id)?(0,At.jsx)(IL,{className:"h-5 w-5 fill-current"}):(0,At.jsx)(IL,{className:"h-5 w-5"})})]},e.id)))}),A.length>0&&(0,At.jsxs)("div",{className:"mt-6 p-4 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[(0,At.jsx)("h4",{className:"text-blue-400 font-medium mb-2",children:"Danh s\xe1ch y\xeau th\xedch"}),(0,At.jsx)("div",{className:"text-sm text-blue-300",children:A.map(((e,t)=>{const n=k.find((t=>t.id===e));return n?(0,At.jsxs)("span",{children:[n.icon," ",n.label,t<A.length-1?", ":""]},e):null}))})]})]}),"permissions"===T&&(0,At.jsx)("div",{className:"p-0 space-y-2",children:(0,At.jsx)(RL,{})}),"privacy"===T&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("h3",{className:"text-white font-medium",children:"Quy\u1ec1n ri\xeang t\u01b0 & D\u1eef li\u1ec7u"}),(0,At.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-white font-medium mb-2",children:"Tr\u1ea1ng th\xe1i Cookies"}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-gray-300",children:b?w?"\u0110\xe3 ch\u1ea5p nh\u1eadn":"\u0110\xe3 t\u1eeb ch\u1ed1i":"Ch\u01b0a quy\u1ebft \u0111\u1ecbnh"}),(0,At.jsx)("div",{className:"flex gap-2",children:b&&(0,At.jsx)("button",{onClick:C,className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-500 text-white rounded",children:"\u0110\u1eb7t l\u1ea1i"})})]})]}),(0,At.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-white font-medium mb-2",children:"Th\u1ed1ng k\xea truy c\u1eadp"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"S\u1ed1 l\u1ea7n truy c\u1eadp:"}),(0,At.jsx)("span",{className:"text-white",children:x})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"L\u1ea7n \u0111\u1ea7u truy c\u1eadp:"}),(0,At.jsx)("span",{className:"text-white",children:v.toLocaleDateString("vi-VN")})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-300",children:"T\xednh n\u0103ng g\u1ea7n nh\u1ea5t:"}),(0,At.jsx)("span",{className:"text-white",children:y||"Ch\u01b0a c\xf3"})]})]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("h4",{className:"text-white font-medium",children:"Qu\u1ea3n l\xfd d\u1eef li\u1ec7u"}),(0,At.jsxs)("button",{onClick:()=>E(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-600/10 hover:bg-red-600/20 border border-red-500/20 hover:border-red-500/30 text-red-400 rounded-lg transition-colors",children:[(0,At.jsx)(PL,{className:"h-4 w-4"}),"X\xf3a t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u Cookies"]}),(0,At.jsx)("div",{className:"text-xs text-gray-400 mt-2 hidden cookies",children:"Bao g\u1ed3m: preferences, favorites, visit history, theme settings, v\xe0 t\u1ea5t c\u1ea3 cookies c\u1ee7a \u1ee9ng d\u1ee5ng."})]})]})]})]}),_&&(0,At.jsxs)("div",{className:"fixed inset-0 z-60 flex items-center justify-center p-4",children:[(0,At.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>E(!1)}),(0,At.jsxs)("div",{className:"relative bg-slate-800 rounded-lg p-6 max-w-md w-full border border-slate-600 shadow-2xl",children:[(0,At.jsxs)("div",{className:"flex flex-col justify-center items-center gap-3 mb-4",children:[(0,At.jsx)(jw,{className:"h-8 w-8 text-red-400 flex-shrink-0"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-white",children:"X\xe1c nh\u1eadn x\xf3a d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{className:"text-sm text-gray-300",children:"H\xe0nh \u0111\u1ed9ng n\xe0y kh\xf4ng th\u1ec3 ho\xe0n t\xe1c"})]})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("p",{className:"text-gray-300 mb-3",children:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u c\xe1 nh\xe2n? \u0110i\u1ec1u n\xe0y bao g\u1ed3m:"}),(0,At.jsxs)("ul",{className:"text-sm text-gray-400 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 C\xe0i \u0111\u1eb7t giao di\u1ec7n v\xe0 preferences"}),(0,At.jsx)("li",{children:"\u2022 Danh s\xe1ch t\xednh n\u0103ng y\xeau th\xedch"}),(0,At.jsx)("li",{children:"\u2022 L\u1ecbch s\u1eed truy c\u1eadp v\xe0 s\u1eed d\u1ee5ng"}),(0,At.jsx)("li",{children:"\u2022 T\u1ea5t c\u1ea3 cookies c\u1ee7a \u1ee9ng d\u1ee5ng"})]})]}),(0,At.jsxs)("div",{className:"flex gap-3",children:[(0,At.jsx)("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-2 text-gray-300 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:"H\u1ee7y b\u1ecf"}),(0,At.jsx)("button",{onClick:()=>{document.cookie.split(";").forEach((e=>{const t=e.indexOf("="),n=t>-1?e.substr(0,t):e;n.trim().startsWith("lunar_")&&(document.cookie=`${n}=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/`)})),E(!1),r(),setTimeout((()=>{window.location.reload()}),1e3)},className:"flex-1 px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors font-medium",children:"X\xf3a d\u1eef li\u1ec7u"})]})]})]})]},`settings-${B}`)},HL=e=>{let{onSidebarToggle:n,sidebarOpen:r}=e;const s=Y(),{currentUser:i,logout:a,membershipTier:o,membershipExpiry:l,isEmailVerified:c,userStars:u}=Aw(),d="true"===localStorage.getItem("adminFirebaseAuth"),h=localStorage.getItem("adminEmail"),m=d&&h===rw,[A,g]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)(!1),{totalVisits:y}=Wk(),{trackFeatureUsage:b}=Pk(),[w,N]=Fk();(0,t.useEffect)((()=>{const e=setTimeout((async()=>{try{if(!Qb.db)return;if(sessionStorage.getItem("session_visit_counted"))return;const e=(0,Hb.doc)(Qb.db,"sessionVisits","total");(await(0,Hb.getDoc)(e)).exists()?await(0,Hb.mZ)(e,{count:(0,Hb.GV)(1),lastVisited:new Date}):await(0,Hb.BN)(e,{count:1,lastVisited:new Date,createdAt:new Date}),sessionStorage.setItem("session_visit_counted","true")}catch(e){}}),1e3);return()=>clearTimeout(e)}),[]),(0,t.useEffect)((()=>{IT()&&FT()}),[]),(0,t.useEffect)((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop;v(e>100)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,t.useEffect)((()=>{const e=e=>{A&&!e.target.closest(".user-dropdown")&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[A]),(0,t.useEffect)((()=>{const e=document.getElementById("root");if(e){e.className="";const t=s.pathname.replace("/","")||"news";switch(b(t),N("page_view",{page:s.pathname,title:document.title,referrer:document.referrer}),s.pathname){case"/":e.classList.add("news-page");break;case"/solar":e.classList.add("solar-page");break;case"/calendar":e.classList.add("calendar-page");break;case"/lich-viet":e.classList.add("lich-viet-page");break;case"/battu":e.classList.add("battu-page");break;case"/lakinh":e.classList.add("lakinh-page");break;case"/luchao":e.classList.add("luchao-page");break;default:e.classList.add("default-page")}}}),[s.pathname,b,N]);return(0,At.jsxs)("header",{className:"animation-nav fixed top-3 left-3 right-3 bg-slate-800 z-50 border-b rounded-lg border-slate-700 shadow-xl shadow-slate-900 "+(x?"animateMini":""),children:[(0,At.jsxs)("div",{className:"flex justify-between items-center bg-[#101314] px-4 py-0 rounded-lg",children:[(0,At.jsx)("button",{onClick:n,className:"text-white hover:text-green-300 p-2 rounded-lg transition-colors",children:r?(0,At.jsx)(ky,{className:"w-6 h-6"}):(0,At.jsx)(xL,{className:"w-6 h-6"})}),(0,At.jsx)("div",{className:"flex items-center gap-1 md:gap-2",children:SL.map(((e,n)=>{let r="";r=0===n||1===n?"":2===n?"hidden sm:block":3===n?"hidden md:block":4===n||5===n?"hidden lg:block":"hidden md:block";const i=e.exactMatch?s.pathname===e.path:s.pathname===e.path||s.pathname.startsWith(e.path+"/");return(0,At.jsx)(t.Fragment,{children:(0,At.jsx)(nt,{to:e.path,className:`${r} ${e.className||""} p-2 rounded-lg transition-all duration-200 group ${i?`${e.activeColor||"text-green-400"} scale-110`:"text-gray-400 hover:text-white"}`,title:e.label,children:t.cloneElement(e.icon,{className:`w-5 h-5 transition-all duration-200 ${e.iconClassName||""} ${i?"scale-125":"group-hover:scale-[1.5]"}`})})},n)}))}),(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[i&&c||m?(0,At.jsxs)("div",{className:"relative user-dropdown",children:[(0,At.jsxs)("button",{onClick:()=>g(!A),className:"flex items-center gap-2 text-white text-sm hover:text-blue-400 transition-colors",title:"Menu c\xe1 nh\xe2n",children:[(0,At.jsx)(qM,{className:"w-5 h-5"}),(0,At.jsxs)("div",{className:"flex items-center gap-1",children:[(0,At.jsx)(WC,{className:"w-4 h-4 text-yellow-400"}),(0,At.jsx)("span",{className:"text-xs text-yellow-400 font-medium",children:u||0})]}),(0,At.jsx)("span",{className:"hidden sm:inline",children:(null===i||void 0===i?void 0:i.displayName)||(null===i||void 0===i?void 0:i.email)||"Admin"}),(0,At.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),A&&(0,At.jsx)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-slate-800 border border-slate-600 rounded-lg shadow-xl z-50",children:(0,At.jsxs)("div",{className:"py-2",children:[(0,At.jsx)("div",{className:"px-4 py-2 border-b border-slate-600 hidden",children:m&&(0,At.jsx)("div",{className:"mt-2 p-2 bg-red-900/30 rounded border border-red-600",children:(0,At.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,At.jsx)("span",{className:"text-xs",children:"\ud83d\udc51"}),(0,At.jsx)("span",{className:"text-xs font-medium text-red-400",children:"Administrator"})]})})}),(0,At.jsxs)(nt,{to:"/profile",onClick:()=>g(!1),className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-300 hover:bg-slate-700 hover:text-white transition-colors",children:[(0,At.jsx)(qM,{className:"w-4 h-4"}),"Th\xf4ng tin c\xe1 nh\xe2n"]}),(0,At.jsxs)("button",{onClick:()=>{g(!1),f(!0)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-300 hover:bg-slate-700 hover:text-white transition-colors",children:[(0,At.jsx)(Nk,{className:"w-4 h-4"}),"C\xe0i \u0111\u1eb7t"]}),(0,At.jsx)("div",{className:"border-t border-slate-600 mt-1 pt-1",children:(0,At.jsxs)("button",{onClick:()=>{g(!1),(async()=>{try{g(!1),i&&await a(),m&&(localStorage.removeItem("adminFirebaseAuth"),localStorage.removeItem("adminEmail")),localStorage.removeItem("loginTime"),localStorage.removeItem("loginExpiration"),window.location.href="/login"}catch(e){console.error("L\u1ed7i \u0111\u0103ng xu\u1ea5t:",e),window.location.href="/login"}})()},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-400 hover:bg-slate-700 hover:text-red-300 transition-colors",children:[(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"\u0110\u0103ng xu\u1ea5t"]})})]})})]}):(0,At.jsx)(nt,{to:"/login",className:"flex items-center gap-2 px-4 py-2 text-green-400 hover:text-green-300 text-sm rounded-lg transition-colors",children:(0,At.jsx)("span",{children:"\u0110\u0103ng nh\u1eadp"})}),i&&c||m?(0,At.jsx)(BL,{currentUser:i,isEmailVerified:c,membershipExpiry:l,membershipTier:o,userStars:u,isAdminAuthenticated:m}):null]})]}),(0,At.jsx)(OL,{isOpen:p,onClose:()=>f(!1)})]})};function QL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const zL=t.forwardRef(QL);function VL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const KL=t.forwardRef(VL);function GL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const qL=t.forwardRef(GL),WL=e=>{let{children:n}=e;const[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),{adminLogout:o,adminUser:l,adminType:c}=AL(),u=Y(),d=(ee(),[{name:"Dashboard",href:"/admin/dashboard",icon:yk},{name:"B\xe0i vi\u1ebft",href:"/admin/articles",icon:OM},{name:"Danh m\u1ee5c",href:"/admin/categories",icon:Yk},{name:"Th\xe0nh vi\xean",href:"/admin/users",icon:zL},{name:"G\xf3i th\xe0nh vi\xean",href:"/admin/membership",icon:$M},{name:"Tr\u1eeb \u0111i\u1ec3m trang",href:"/admin/page-points",icon:Nk},{name:"T\xednh n\u0103ng",href:"/admin/features",icon:KL},{name:"\ud83d\ude80 Migration",href:"/admin/migration",icon:XC},{name:"\ud83d\udcca Free Tier Monitor",href:"/admin/free-tier-monitor",icon:qL}]),h=()=>{o(),window.location.replace("/admin/login")};return(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,At.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden "+(r?"":"hidden"),children:[(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>s(!1)}),(0,At.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[(0,At.jsxs)("div",{className:"flex h-16 shrink-0 items-center justify-between px-6",children:[(0,At.jsxs)("h1",{className:"text-xl font-bold text-gray-900 hidden",children:[(0,At.jsx)(nt,{to:"/admin/profile",className:"hover:text-gray-700",children:(0,At.jsx)(Ck,{className:"h-5 w-5"})}),"Admin"]}),(0,At.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600",onClick:()=>s(!1),children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsx)("nav",{className:"flex-1 px-6 py-6",children:(0,At.jsx)("ul",{className:"space-y-2",children:d.map((e=>{const t=u.pathname===e.href||"/admin/articles"===e.href&&u.pathname.startsWith("/admin/articles")&&!u.pathname.startsWith("/admin/articles/config")||"/admin/articles/config"===e.href&&u.pathname.startsWith("/admin/articles/config")||"/admin/categories"===e.href&&u.pathname.startsWith("/admin/categories")||"/admin/membership"===e.href&&u.pathname.startsWith("/admin/membership")||"/admin/page-points"===e.href&&u.pathname.startsWith("/admin/page-points")||"/admin/features"===e.href&&u.pathname.startsWith("/admin/features")||"/admin/migration"===e.href&&u.pathname.startsWith("/admin/migration");return(0,At.jsx)("li",{children:(0,At.jsxs)(nt,{to:e.href,className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors "+(t?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),onClick:()=>s(!1),children:[(0,At.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]})},e.name)}))})}),(0,At.jsx)("div",{className:"border-t border-gray-200 p-6",children:(0,At.jsx)("button",{onClick:h,className:"flex w-full items-center px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors",children:"\u0110\u0103ng xu\u1ea5t"})})]})]}),(0,At.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:flex-col transition-all duration-300 "+(i?"lg:w-16":"lg:w-64"),children:(0,At.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-50 pt-2.5",children:[(0,At.jsxs)("div",{className:"flex h-16 shrink-0 items-center justify-between px-4 border-gray-100",children:[!i&&(0,At.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Admin"}),(0,At.jsx)("button",{onClick:()=>a(!i),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:i?"M\u1edf r\u1ed9ng sidebar":"Thu g\u1ecdn sidebar",children:i?(0,At.jsx)(cS,{className:"h-5 w-5"}):(0,At.jsx)(oS,{className:"h-5 w-5"})})]}),(0,At.jsx)("nav",{className:"flex-1 px-3 py-6",children:(0,At.jsx)("ul",{className:"space-y-2",children:d.map((e=>{const t=u.pathname===e.href||"/admin/articles"===e.href&&u.pathname.startsWith("/admin/articles")&&!u.pathname.startsWith("/admin/articles/config")||"/admin/articles/config"===e.href&&u.pathname.startsWith("/admin/articles/config")||"/admin/categories"===e.href&&u.pathname.startsWith("/admin/categories")||"/admin/membership"===e.href&&u.pathname.startsWith("/admin/membership")||"/admin/page-points"===e.href&&u.pathname.startsWith("/admin/page-points")||"/admin/features"===e.href&&u.pathname.startsWith("/admin/features")||"/admin/migration"===e.href&&u.pathname.startsWith("/admin/migration");return(0,At.jsx)("li",{children:(0,At.jsxs)(nt,{to:e.href,className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors relative group "+(t?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),title:i?e.name:"",children:[(0,At.jsx)(e.icon,{className:"h-5 w-5 "+(i?"mx-auto":"mr-3")}),!i&&(0,At.jsx)("span",{className:"truncate",children:e.name}),i&&(0,At.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded-md opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50",children:[e.name,(0,At.jsx)("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},e.name)}))})}),(0,At.jsxs)("div",{className:"border-gray-50 border-t-4 p-3 text-left",children:[!i&&(0,At.jsxs)("div",{className:"flex items-center mb-4 px-3 hidden",children:[(0,At.jsx)(qM,{className:"h-8 w-8 text-gray-400 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-900 ",children:(null===l||void 0===l?void 0:l.email)||(null===l||void 0===l?void 0:l.username)||"Admin"}),(0,At.jsx)("p",{className:"text-xs text-gray-500",children:"firebase"===c?"\ud83d\udd25 Firebase Admin":"  Admin"})]})]}),(0,At.jsxs)("button",{onClick:h,className:"flex w-full items-center px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-md transition-colors relative group "+(i?"justify-center":""),title:i?"\u0110\u0103ng xu\u1ea5t":"",children:[!i&&(0,At.jsx)("span",{children:"\u0110\u0103ng xu\u1ea5t"}),i&&(0,At.jsxs)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded-md opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50",children:["\u0110\u0103ng xu\u1ea5t",(0,At.jsx)("div",{className:"absolute top-1/2 left-0 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})]})]})}),(0,At.jsxs)("div",{className:"transition-all duration-300 "+(i?"lg:pl-16":"lg:pl-64"),children:[(0,At.jsxs)("div",{className:"sticky top-0 z-40 flex  md:hidden h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,At.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>s(!0),children:(0,At.jsx)(xL,{className:"h-6 w-6"})}),(0,At.jsx)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:(0,At.jsx)("div",{className:"flex flex-1"})})]}),(0,At.jsx)("main",{className:"pb-10 pt-6",children:(0,At.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:n})})]})]})};function $L(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const XL=t.forwardRef($L);function YL(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const JL=t.forwardRef(YL),ZL=e=>{let{children:t,className:n=""}=e;return(0,At.jsx)("div",{className:`text-sm text-gray-900 ${n}`,children:t})},eI=e=>{let{children:t,className:n=""}=e;return(0,At.jsx)("div",{className:`text-xs text-gray-500 ${n}`,children:t})},tI=e=>{let{children:t,variant:n="gray",className:r=""}=e;return(0,At.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${{gray:"bg-gray-100 text-gray-800",green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",yellow:"bg-yellow-100 text-yellow-800",red:"bg-red-100 text-red-800",purple:"bg-purple-100 text-purple-800"}[n]} ${r}`,children:t})},nI=e=>{let{name:t,subtitle:n,avatar:r,icon:s,tier:i}=e;const a=e=>{const t={basic:"text-gray-900",standard:"text-blue-900",premium:"text-purple-900",master:"text-yellow-900"};return t[e]||t.basic},o=e=>{const t={basic:"\u2b50",standard:"\ud83c\udf1f",premium:"\ud83d\udc8e",master:"\ud83d\udc51"};return t[e]||t.basic};return(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:r?(0,At.jsx)("img",{className:"h-10 w-10 rounded-full",src:r,alt:t}):(0,At.jsx)("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${(e=>{const t={basic:"bg-gradient-to-br from-gray-100 to-gray-200",standard:"bg-gradient-to-br from-blue-100 to-blue-200",premium:"bg-gradient-to-br from-purple-100 to-purple-200",master:"bg-gradient-to-br from-yellow-100 to-yellow-200"};return t[e]||t.basic})(i)}`,children:s?(0,At.jsx)(s,{className:`h-6 w-6 ${a(i)}`}):(0,At.jsx)("span",{className:`${a(i)} font-bold text-lg`,children:o(i)})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsxs)("div",{className:"flex items-center relative",children:[(0,At.jsx)(ZL,{className:"font-medium",children:t}),i&&"basic"!==i&&(0,At.jsx)("span",{className:`absolute top-0 left-[-70px] ml-2 inline-flex items-center p-1 shadow-md rounded-full text-xs font-medium ${(e=>{const t={basic:"bg-white text-gray-800",standard:"bg-white text-blue-800",premium:"bg-white text-purple-800",master:"bg-white text-yellow-800"};return t[e]||t.basic})(i)}`,children:(0,At.jsx)("span",{className:"text-xs",children:o(i)})})]}),n&&(0,At.jsx)(eI,{children:n})]})]})},rI=e=>{let{date:t,showTime:n=!0}=e;if(!t)return(0,At.jsx)(ZL,{children:"-"});const r=t.toDate?t.toDate():new Date(t);return(0,At.jsxs)("div",{children:[(0,At.jsx)(ZL,{children:r.toLocaleDateString("vi-VN")}),n&&(0,At.jsx)(eI,{children:r.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})},sI=e=>{let{data:n=[],columns:r=[],loading:s=!1,emptyState:i=null,onRowClick:a=null,rowActions:o=null,className:l="",hoverable:c=!0,showColumnToggle:u=!0,tableId:d="default"}=e;const[h,m]=(0,t.useState)(null),[A,g]=(0,t.useState)({top:0,left:0}),[p,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)(new Set),y=(0,t.useRef)(null),b=(0,t.useRef)(null),w=(0,t.useRef)({});(0,t.useEffect)((()=>{try{const e=localStorage.getItem(`table-columns-${d}`);if(e){const t=JSON.parse(e);v(new Set(t))}}catch(e){console.warn("Could not load saved column preferences:",e)}}),[d]);const N=e=>{try{localStorage.setItem(`table-columns-${d}`,JSON.stringify([...e]))}catch(t){console.warn("Could not save column preferences:",t)}};(0,t.useEffect)((()=>{const e=e=>{y.current&&!y.current.contains(e.target)&&m(null),b.current&&!b.current.contains(e.target)&&f(!1)};return(h||p)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[h,p]);const j=e=>{if(e){const e=new Set;v(e),N(e)}else{const e=new Set(r.map((e=>e.key)));v(e),N(e)}},C=r.filter((e=>!x.has(e.key))),T=(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udccb"}),(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u \u0111\u1ec3 hi\u1ec3n th\u1ecb."})]});return s?(0,At.jsx)("div",{className:`bg-white shadow rounded-lg overflow-hidden ${l}`,children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"bg-gray-50 px-6 py-4",children:(0,At.jsx)("div",{className:"flex space-x-4",children:C.map(((e,t)=>(0,At.jsx)("div",{className:"h-4 bg-gray-200 rounded flex-1"},t)))})}),[...Array(5)].map(((e,t)=>(0,At.jsx)("div",{className:"border-t border-gray-200 px-6 py-4",children:(0,At.jsx)("div",{className:"flex space-x-4",children:C.map(((e,t)=>(0,At.jsx)("div",{className:"h-4 bg-gray-100 rounded flex-1"},t)))})},t)))]})}):(0,At.jsxs)("div",{className:`bg-white shadow rounded-lg overflow-hidden ${l}`,children:[n.length>0?(0,At.jsxs)(At.Fragment,{children:[u&&(0,At.jsxs)("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Hi\u1ec3n th\u1ecb c\u1ed9t:"}),(0,At.jsxs)("span",{className:"text-xs text-gray-500",children:[C.length,"/",r.length," c\u1ed9t"]}),x.size>0&&(0,At.jsxs)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-0.5 rounded-full",children:[x.size," \u1ea9n"]})]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),j(!0)},className:"text-xs px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:"Hi\u1ec7n t\u1ea5t c\u1ea3"}),(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),j(!1)},className:"text-xs px-2 py-1 text-gray-600 hover:bg-gray-50 rounded transition-colors hidden",children:"\u1ea8n t\u1ea5t c\u1ea3"}),(0,At.jsxs)("div",{className:"relative",ref:b,children:[(0,At.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(!p)},className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(XL,{className:"w-4 h-4"}),(0,At.jsx)("span",{children:"C\u1ed9t"})]}),p&&(0,At.jsx)("div",{className:"absolute right-0 top-full mt-1 w-64 bg-white border border-gray-200 rounded-md shadow-lg z-50",onClick:e=>e.stopPropagation(),children:(0,At.jsxs)("div",{className:"p-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("div",{className:"text-xs font-medium text-gray-700",children:"Ch\u1ecdn c\u1ed9t hi\u1ec3n th\u1ecb:"}),(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),f(!1)},className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,At.jsxs)("div",{className:"flex gap-1 mb-3",children:[(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),j(!0)},className:"text-xs px-2 py-1 text-blue-600 hover:bg-blue-50 rounded transition-colors",children:"Hi\u1ec7n t\u1ea5t c\u1ea3"}),(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),j(!1)},className:"text-xs px-2 py-1 text-gray-600 hover:bg-gray-50 rounded transition-colors",children:"\u1ea8n t\u1ea5t c\u1ea3"})]}),(0,At.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:r.map((e=>{const t=x.has(e.key);return(0,At.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer transition-colors",onClick:e=>e.stopPropagation(),children:[(0,At.jsx)("input",{type:"checkbox",checked:!t,onChange:t=>{var n;t.stopPropagation(),n=e.key,v((e=>{const t=new Set(e);return t.has(n)?t.delete(n):t.add(n),N(t),t}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,At.jsx)("span",{className:"text-sm text-gray-700 flex-1",children:e.header}),t?(0,At.jsx)(MM,{className:"w-4 h-4 text-gray-400"}):(0,At.jsx)(LM,{className:"w-4 h-4 text-blue-500"})]},e.key)}))}),(0,At.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-200",children:(0,At.jsx)("button",{onClick:e=>{e.stopPropagation(),v(new Set),N(new Set),f(!1)},className:"text-xs px-3 py-1.5 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded transition-colors w-full",children:"\u0110\u1eb7t l\u1ea1i m\u1eb7c \u0111\u1ecbnh"})})]})})]})]})]}),(0,At.jsx)("div",{className:"overflow-x-auto sticky-table-container",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[C.map(((e,t)=>(0,At.jsx)("th",{className:`px-6 py-3 text-left text-xs font-medium text-gray-400 tracking-wider ${e.headerClassName||""}`,style:{width:e.width},children:e.header},t))),o&&(0,At.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 tracking-wider sticky-right",children:"H\xe0nh \u0111\u1ed9ng"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(((e,t)=>(0,At.jsxs)("tr",{className:`${c?"hover:bg-gray-50":""} ${a?"cursor-pointer":""}`,onClick:()=>a&&a(e),children:[C.map(((n,r)=>(0,At.jsx)("td",{className:`px-6 py-4 whitespace-nowrap ${n.cellClassName||""}`,children:n.render?n.render(e,t):e[n.key]},r))),o&&(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium relative sticky-right",children:(0,At.jsx)("button",{ref:t=>w.current[e.id]=t,className:"text-gray-600 bg-white shadow-md p-2 rounded-md hover:text-gray-900 inline-flex items-center",onClick:t=>((e,t)=>{e.stopPropagation();const n=e.currentTarget.getBoundingClientRect();g({top:n.bottom+window.scrollY+8,left:n.right-200}),m(h===t?null:t)})(t,e.id),children:(0,At.jsx)(JL,{className:"h-4 w-4"})})})]},e.id||t)))})]})})]}):(0,At.jsx)("div",{className:"p-6",children:i||T}),o&&h&&n.map((e=>h===e.id&&(0,xS.createPortal)((0,At.jsx)("div",{ref:y,className:"absolute z-[9999] bg-white rounded-md shadow-lg border border-gray-200",style:{top:A.top,left:A.left,minWidth:"12rem",maxWidth:"16rem"},children:(0,At.jsx)("div",{className:"py-2",children:o(e,(()=>m(null)))})},`dropdown-${e.id}`),document.body)))]})},iI=e=>{let{currentPage:t=1,totalPages:n=1,totalItems:r=0,itemsPerPage:s=10,startIndex:i=0,endIndex:a=0,onPageChange:o,onItemsPerPageChange:l,className:c=""}=e;const u=Math.max(1,t||1),d=Math.max(1,n||1),h=Math.max(0,r||0),m=Math.max(1,s||10),A=Math.max(0,i||0),g=Math.max(0,a||0),p=e=>{e>=1&&e<=d&&o&&o(e)};return 0===h?(0,At.jsx)("div",{className:`bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-lg shadow ${c}`,children:(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u \u0111\u1ec3 hi\u1ec3n th\u1ecb"})}):(0,At.jsxs)("div",{className:`bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 rounded-b-lg shadow ${c}`,children:[(0,At.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,At.jsx)("button",{onClick:()=>p(u-1),disabled:1===u,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md "+(1===u?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"),children:"Tr\u01b0\u1edbc"}),(0,At.jsx)("button",{onClick:()=>p(u+1),disabled:u===d,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md "+(u===d?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"),children:"Ti\u1ebfp"})]}),(0,At.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("p",{className:"text-sm text-gray-700",children:h<=m?(0,At.jsxs)(At.Fragment,{children:["Hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 ",(0,At.jsx)("span",{className:"font-medium",children:h})," k\u1ebft qu\u1ea3"]}):(0,At.jsxs)(At.Fragment,{children:["Hi\u1ec3n th\u1ecb ",(0,At.jsx)("span",{className:"font-medium",children:A+1})," \u0111\u1ebfn"," ",(0,At.jsx)("span",{className:"font-medium",children:Math.min(g,h)})," trong"," ",(0,At.jsx)("span",{className:"font-medium",children:h})," k\u1ebft qu\u1ea3"]})}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("label",{htmlFor:"itemsPerPage",className:"text-sm text-gray-700",children:"Hi\u1ec3n th\u1ecb:"}),(0,At.jsxs)("select",{id:"itemsPerPage",value:m,onChange:e=>{return t=parseInt(e.target.value),void(l&&l(t));var t},className:"border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:10,children:"10"}),(0,At.jsx)("option",{value:25,children:"25"}),(0,At.jsx)("option",{value:50,children:"50"}),(0,At.jsx)("option",{value:100,children:"100"})]}),(0,At.jsx)("span",{className:"text-sm text-gray-700",children:"d\xf2ng"})]})]}),(0,At.jsx)("div",{children:h>m?(0,At.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,At.jsxs)("button",{onClick:()=>p(u-1),disabled:1===u,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 text-sm font-medium "+(1===u?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-500 bg-white hover:bg-gray-50"),children:[(0,At.jsx)("span",{className:"sr-only",children:"Tr\u01b0\u1edbc"}),(0,At.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.min(5,d)},((e,t)=>{let n;return n=d<=5||u<=3?t+1:u>=d-2?d-4+t:u-2+t,n=Math.max(1,Math.min(d,n||1)),(0,At.jsx)("button",{onClick:()=>p(n),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium "+(n===u?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:n},n)})),(0,At.jsxs)("button",{onClick:()=>p(u+1),disabled:u===d,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 text-sm font-medium "+(u===d?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-500 bg-white hover:bg-gray-50"),children:[(0,At.jsx)("span",{className:"sr-only",children:"Ti\u1ebfp"}),(0,At.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,At.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}):(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"T\u1ea5t c\u1ea3 k\u1ebft qu\u1ea3 \u0111\xe3 hi\u1ec3n th\u1ecb"})})]})]})},aI=e=>{let{children:t}=e;const{isAdminAuthenticated:n,loading:r}=AL(),s=Y();return r?(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i..."})]})}):n?t:(0,At.jsx)(pe,{to:"/admin/login",state:{from:s},replace:!0})},oI=e=>{let{children:t}=e;const{currentUser:n,membershipTier:r,loading:s}=Aw(),i=Y();return s?(0,At.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-900 via-yellow-800 to-orange-900 flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-yellow-200",children:"\u0110ang ki\u1ec3m tra quy\u1ec1n truy c\u1eadp Master..."})]})}):n?"master"!==r?(0,At.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-red-900 flex items-center justify-center px-4",children:(0,At.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,At.jsx)("div",{className:"mx-auto h-16 w-16 bg-red-500/20 rounded-full flex items-center justify-center mb-6",children:(0,At.jsx)("span",{className:"text-4xl",children:"\ud83d\udeab"})}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp"}),(0,At.jsxs)("p",{className:"text-red-200 mb-6",children:["T\xednh n\u0103ng n\xe0y ch\u1ec9 d\xe0nh cho th\xe0nh vi\xean Master. H\u1ea1ng th\xe0nh vi\xean hi\u1ec7n t\u1ea1i c\u1ee7a b\u1ea1n: ",(0,At.jsx)("strong",{children:r||"basic"})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("button",{onClick:()=>window.location.href="/",className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Quay v\u1ec1 trang ch\u1ee7"}),(0,At.jsx)("button",{onClick:()=>window.location.href="/profile",className:"w-full px-4 py-2 border border-red-400 text-red-200 rounded-lg hover:bg-red-800/50 transition-colors",children:"Xem th\xf4ng tin g\xf3i th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{className:"mt-8 bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-yellow-200 mb-2",children:"\ud83d\udc8e N\xe2ng c\u1ea5p l\xean Master \u0111\u1ec3:"}),(0,At.jsxs)("ul",{className:"text-xs text-yellow-300 space-y-1 text-left",children:[(0,At.jsx)("li",{children:"\u2022 T\u1ea1o v\xe0 qu\u1ea3n l\xfd b\xe0i vi\u1ebft c\xe1 nh\xe2n"}),(0,At.jsx)("li",{children:"\u2022 G\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t"}),(0,At.jsx)("li",{children:"\u2022 X\xf3a b\xe0i vi\u1ebft c\u1ee7a ch\xednh m\xecnh"}),(0,At.jsx)("li",{children:"\u2022 200 sao m\u1ed7i ng\xe0y (reset t\u1ef1 \u0111\u1ed9ng)"}),(0,At.jsx)("li",{children:"\u2022 Truy c\u1eadp t\u1ea5t c\u1ea3 t\xednh n\u0103ng \u0111\u1eb7c bi\u1ec7t"})]}),(0,At.jsxs)("div",{className:"mt-3 text-xs text-gray-300",children:["Li\xean h\u1ec7 admin \u0111\u1ec3 n\xe2ng c\u1ea5p: ",(0,At.jsx)("strong",{children:(0,At.jsx)("a",{href:"mailto:thiendianhan.app@gmail.com",className:"underline",children:"thiendianhan.app@gmail.com"})})]})]})]})}):t:(0,At.jsx)(pe,{to:"/master/login",state:{from:i},replace:!0})};function lI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const cI=t.forwardRef(lI),uI=e=>{let{className:n="",onCancel:r,onSaveDraft:s,onSubmit:i,loading:a=!1,disabled:o=!1,showSubmit:l=!0,cancelText:c="H\u1ee7y",saveText:u="L\u01b0u nh\xe1p",submitText:d="G\u1eedi duy\u1ec7t"}=e;const[h,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=()=>{m(window.scrollY>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:`fixed bottom-0 md:left-[290px] md:right-[30px] bg-white border-t border-gray-200 shadow-lg z-50 ${n}`,children:(0,At.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{children:(0,At.jsxs)("button",{onClick:r,disabled:a,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-2"}),c]})}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsxs)("button",{onClick:s,disabled:a||o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,At.jsx)(OM,{className:"h-4 w-4 mr-2"}),a?"\u0110ang l\u01b0u...":u]}),l&&(0,At.jsxs)("button",{onClick:i,disabled:a||o,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,At.jsx)(cI,{className:"h-4 w-4 mr-2"}),a?"\u0110ang x\u1eed l\xfd...":d]})]})]})})}),h&&(0,At.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-20 right-4 p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 z-50 group",title:"Cu\u1ed9n l\xean \u0111\u1ea7u trang",children:(0,At.jsx)(RC,{className:"h-5 w-5 group-hover:animate-bounce"})}),(0,At.jsx)("div",{className:"h-20"})]})};function dI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const hI=t.forwardRef(dI),mI=e=>{const n=(0,t.useMemo)((()=>{if(!e||0===e.length)return{totalArticles:0,publishedArticles:0,totalViews:0,starArticles:0,totalStarRevenue:0,statusDistribution:[],viewsStatistics:[],authorStatistics:[],starRevenueStats:[],topStarArticles:[]};const t=e.length,n=e.filter((e=>"published"===e.status)).length,r=e.reduce(((e,t)=>e+(t.views||0)),0),s=e.filter((e=>e.requireStars)).length,i=e.reduce(((e,t)=>t.requireStars&&t.starCost?e+t.starCost*(t.views||0):e),0),a=[{status:"published",label:"\u0110\xe3 xu\u1ea5t b\u1ea3n",icon:"\u2705",color:"text-green-600"},{status:"draft",label:"B\u1ea3n nh\xe1p",icon:"\ud83d\udcdd",color:"text-gray-600"},{status:"pending",label:"Ch\u1edd duy\u1ec7t",icon:"\u23f3",color:"text-yellow-600"},{status:"rejected",label:"T\u1eeb ch\u1ed1i",icon:"\u274c",color:"text-red-600"}].map((n=>{const r=e.filter((e=>e.status===n.status)).length,s=t>0?(r/t*100).toFixed(1):0;return{...n,count:r,percentage:s}})),o=[{label:"Ch\u01b0a c\xf3 l\u01b0\u1ee3t xem",condition:e=>0===(e.views||0)},{label:"\xcdt l\u01b0\u1ee3t xem (1-99)",condition:e=>(e.views||0)>0&&(e.views||0)<100},{label:"Ph\u1ed5 bi\u1ebfn (100-999)",condition:e=>(e.views||0)>=100&&(e.views||0)<1e3},{label:"Viral (\u22651000)",condition:e=>(e.views||0)>=1e3}].map((n=>{const r=e.filter(n.condition).length,s=t>0?(r/t*100).toFixed(1):0;return{...n,count:r,percentage:s}})),l=[{label:"Admin",condition:e=>"master"!==e.authorType},{label:"Master",condition:e=>"master"===e.authorType},{label:"C\xf3 y\xeau c\u1ea7u sao",condition:e=>e.requireStars},{label:"B\u1ea3n sao",condition:e=>e.isDuplicated}].map((n=>{const r=e.filter(n.condition).length,s=t>0?(r/t*100).toFixed(1):0;return{...n,count:r,percentage:s}})),c=[{label:"T\u1ed5ng b\xe0i c\xf3 sao",value:s,suffix:"b\xe0i"},{label:"T\u1ed5ng sao thu \u0111\u01b0\u1ee3c",value:i,suffix:"sao"},{label:"Trung b\xecnh sao/b\xe0i",value:s>0?Math.round(i/s):0,suffix:"sao"},{label:"B\xe0i c\xf3 sao cao nh\u1ea5t",value:(()=>{const t=e.filter((e=>e.requireStars&&e.starCost));if(0===t.length)return 0;return t.reduce(((e,t)=>{const n=t.starCost*(t.views||0);return n>e?n:e}),0)})(),suffix:"sao"}],u=e.filter((e=>e.requireStars&&e.starCost)).map((e=>({...e,totalStars:e.starCost*(e.views||0)}))).sort(((e,t)=>t.totalStars-e.totalStars)).slice(0,3);return{totalArticles:t,publishedArticles:n,totalViews:r,starArticles:s,totalStarRevenue:i,statusDistribution:a,viewsStatistics:o,authorStatistics:l,starRevenueStats:c,topStarArticles:u}}),[e]);return n},AI=e=>{let{articles:t,filteredArticles:n}=e;const{totalArticles:r,publishedArticles:s,totalViews:i,starArticles:a,totalStarRevenue:o,statusDistribution:l,viewsStatistics:c,authorStatistics:u,starRevenueStats:d}=mI(t);return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(hI,{className:"w-5 h-5 text-blue-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"T\u1ed5ng b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["Hi\u1ec3n th\u1ecb: ",n.length," / ",r]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(tk,{className:"w-5 h-5 text-green-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0110\xe3 xu\u1ea5t b\u1ea3n"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[r>0?(s/r*100).toFixed(1):0,"% t\u1ed5ng b\xe0i vi\u1ebft"]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(LM,{className:"w-5 h-5 text-purple-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"T\u1ed5ng l\u01b0\u1ee3t xem"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i.toLocaleString()})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["Trung b\xecnh: ",r>0?Math.round(i/r):0," l\u01b0\u1ee3t/b\xe0i"]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-yellow-600 text-lg",children:"\u2b50"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"B\xe0i c\xf3 sao"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a})]})]}),(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[r>0?(a/r*100).toFixed(1):0,"% t\u1ed5ng b\xe0i vi\u1ebft"]}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["T\u1ed5ng sao thu: ",o.toLocaleString()]})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ph\xe2n b\u1ed1 tr\u1ea1ng th\xe1i"}),(0,At.jsx)("div",{className:"space-y-3",children:l.map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:e.icon}),(0,At.jsx)("span",{className:`text-sm font-medium ${e.color}`,children:e.label})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},e.status)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea l\u01b0\u1ee3t xem"}),(0,At.jsx)("div",{className:"space-y-3",children:c.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea t\xe1c gi\u1ea3"}),(0,At.jsx)("div",{className:"space-y-3",children:u.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea sao thu"}),(0,At.jsx)("div",{className:"space-y-3",children:d.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsx)("div",{className:"text-right",children:(0,At.jsxs)("div",{className:"text-sm font-bold text-gray-900",children:[e.value.toLocaleString()," ",e.suffix]})})]},t)))})]})]})]})},gI=e=>{let{users:n,filteredUsers:r}=e;const{totalUsers:s,totalVipMembers:i,todayRegistrations:a,monthlyRegistrations:o,membershipDistribution:l,activityStatistics:c,usageStatistics:u,starStatistics:d}=(e=>{const n=(0,t.useMemo)((()=>{if(!e||0===e.length)return{totalUsers:0,totalVipMembers:0,todayRegistrations:0,monthlyRegistrations:0,membershipStats:{basic:0,standard:0,premium:0,master:0},membershipDistribution:[],activityStatistics:[],usageStatistics:[],starStatistics:[]};const t=e.length,n={basic:e.filter((e=>!e.membershipTier||"basic"===e.membershipTier)).length,standard:e.filter((e=>"standard"===e.membershipTier)).length,premium:e.filter((e=>"premium"===e.membershipTier)).length,master:e.filter((e=>"master"===e.membershipTier)).length},r=n.standard+n.premium+n.master,s=new Date;s.setHours(0,0,0,0);const i=new Date(s.getFullYear(),s.getMonth(),1),a=e.filter((e=>e.createdAt&&e.createdAt>=s)).length,o=e.filter((e=>e.createdAt&&e.createdAt>=i)).length,l=[{tier:"basic",label:"Basic",icon:"\u2b50",color:"text-gray-600",description:"Mi\u1ec5n ph\xed"},{tier:"standard",label:"Standard",icon:"\ud83c\udf1f",color:"text-blue-600",description:"1 th\xe1ng"},{tier:"premium",label:"Premium",icon:"\ud83d\udc8e",color:"text-purple-600",description:"1 n\u0103m"},{tier:"master",label:"Master",icon:"\ud83d\udc51",color:"text-yellow-600",description:"V\u0129nh vi\u1ec5n"}].map((e=>{const r=n[e.tier]||0,s=t>0?(r/t*100).toFixed(1):0;return{...e,count:r,percentage:s}})),c=new Date,u=[{label:"H\xf4m nay",condition:e=>{if(!e.lastLoginAt)return!1;const t=new Date;return t.setHours(0,0,0,0),e.lastLoginAt>=t}},{label:"Tu\u1ea7n n\xe0y",condition:e=>{if(!e.lastLoginAt)return!1;const t=new Date(c.getTime()-6048e5);return e.lastLoginAt>=t}},{label:"Th\xe1ng n\xe0y",condition:e=>{if(!e.lastLoginAt)return!1;const t=new Date(c.getTime()-2592e6);return e.lastLoginAt>=t}},{label:"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng",condition:e=>{if(!e.lastLoginAt)return!0;const t=new Date(c.getTime()-2592e6);return e.lastLoginAt<t}}].map((n=>{const r=e.filter(n.condition).length,s=t>0?(r/t*100).toFixed(1):0;return{...n,count:r,percentage:s}})),d=[{label:"M\u1edbi \u0111\u0103ng k\xfd",condition:e=>!!e.createdAt&&Math.floor((c-e.createdAt)/864e5)<=7},{label:"S\u1eed d\u1ee5ng cao",condition:e=>{const t=e.starTransactions?Object.keys(e.starTransactions).length:0,n=e.createdAt?Math.floor((c-e.createdAt)/864e5):0;return(n>0?t/n:0)>5}},{label:"S\u1eed d\u1ee5ng trung b\xecnh",condition:e=>{const t=e.starTransactions?Object.keys(e.starTransactions).length:0,n=e.createdAt?Math.floor((c-e.createdAt)/864e5):0,r=n>0?t/n:0;return r>1&&r<=5}},{label:"S\u1eed d\u1ee5ng th\u1ea5p",condition:e=>{const t=e.starTransactions?Object.keys(e.starTransactions).length:0,n=e.createdAt?Math.floor((c-e.createdAt)/864e5):0;return(n>0?t/n:0)<=1}}].map((n=>{const r=e.filter(n.condition).length,s=t>0?(r/t*100).toFixed(1):0;return{...n,count:r,percentage:s}})),h=[{label:"Ch\u01b0a c\xf3 sao",value:e.filter((e=>0===(e.stars||0))).length,suffix:"users"},{label:"\xcdt sao (1-99)",value:e.filter((e=>(e.stars||0)>0&&(e.stars||0)<100)).length,suffix:"users"},{label:"Nhi\u1ec1u sao (100-999)",value:e.filter((e=>(e.stars||0)>=100&&(e.stars||0)<1e3)).length,suffix:"users"},{label:"R\u1ea5t nhi\u1ec1u sao (\u22651000)",value:e.filter((e=>(e.stars||0)>=1e3)).length,suffix:"users"}];return{totalUsers:t,totalVipMembers:r,todayRegistrations:a,monthlyRegistrations:o,membershipStats:n,membershipDistribution:l,activityStatistics:u,usageStatistics:d,starStatistics:h}}),[e]);return n})(n);return(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(zL,{className:"w-5 h-5 text-blue-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"T\u1ed5ng th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["Hi\u1ec3n th\u1ecb: ",r.length," / ",s]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)("span",{className:"text-yellow-600 text-lg",children:"\ud83d\udc51"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Th\xe0nh vi\xean VIP"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:i})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[s>0?(i/s*100).toFixed(1):0,"% t\u1ed5ng th\xe0nh vi\xean"]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(ik,{className:"w-5 h-5 text-green-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0110\u0103ng k\xfd h\xf4m nay"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["Th\xe1ng n\xe0y: ",o," th\xe0nh vi\xean"]})})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,At.jsx)(Tw,{className:"w-5 h-5 text-purple-600"})})}),(0,At.jsxs)("div",{className:"ml-4",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"T\u1ed5ng sao"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:n.reduce(((e,t)=>e+(t.stars||0)),0).toLocaleString()})]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["Trung b\xecnh: ",s>0?Math.round(n.reduce(((e,t)=>e+(t.stars||0)),0)/s):0," sao / user"]})})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ph\xe2n b\u1ed1 g\xf3i th\xe0nh vi\xean"}),(0,At.jsx)("div",{className:"space-y-3",children:l.map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-lg mr-2",children:e.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:`text-sm font-medium ${e.color}`,children:e.label}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},e.tier)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea ho\u1ea1t \u0111\u1ed9ng"}),(0,At.jsx)("div",{className:"space-y-3",children:c.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea s\u1eed d\u1ee5ng"}),(0,At.jsx)("div",{className:"space-y-3",children:u.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.count}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]},t)))})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\u1ed1ng k\xea sao"}),(0,At.jsx)("div",{className:"space-y-3",children:d.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.label}),(0,At.jsx)("div",{className:"text-right",children:(0,At.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.value.toLocaleString()})})]},t)))})]})]})]})};function pI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const fI=t.forwardRef(pI),xI=e=>({basic:"Basic",standard:"Standard",premium:"Premium",master:"Master"}[e]||e),vI=e=>({basic:"bg-gray-100 text-gray-800",standard:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",master:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"),yI=e=>{let{statistics:n,availablePages:r,statsLoading:s,onRefresh:i}=e;const{overviewStats:a,pageRankings:o,tierRankings:l,userRankings:c,totalPages:u,activePages:d,totalTiers:h,activeTiers:m,totalUsers:A,averageStarsPerTransaction:g,averageStarsPerUser:p}=((e,n)=>(0,t.useMemo)((()=>{var t,r,s,i;if(!e)return{totalStarsSpent:0,totalTransactions:0,mostUsedPage:null,mostActiveTier:null,pageStats:[],membershipStats:[],topUsers:[],overviewStats:[],pageRankings:[],tierRankings:[],userRankings:[]};const a=[{label:"T\u1ed5ng sao \u0111\xe3 s\u1eed d\u1ee5ng",value:e.totalStarsSpent,color:"blue",icon:"\u2b50",suffix:"sao"},{label:"T\u1ed5ng giao d\u1ecbch",value:e.totalTransactions,color:"green",icon:"\ud83d\udcca",suffix:"giao d\u1ecbch"},{label:"Trang ph\u1ed5 bi\u1ebfn nh\u1ea5t",value:(null===(t=e.mostUsedPage)||void 0===t?void 0:t.pageName)||"N/A",color:"purple",icon:"\ud83d\udd25",suffix:`(${(null===(r=e.mostUsedPage)||void 0===r?void 0:r.totalStars)||0} sao)`},{label:"H\u1ea1ng ho\u1ea1t \u0111\u1ed9ng nh\u1ea5t",value:(null===(s=e.mostActiveTier)||void 0===s?void 0:s.tierName)||"N/A",color:"yellow",icon:"\ud83d\udc51",suffix:`(${(null===(i=e.mostActiveTier)||void 0===i?void 0:i.totalStars)||0} sao)`}],o=e.pageStats.map(((e,t)=>({...e,rank:t+1,rankIcon:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":`#${t+1}`,rankColor:0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800",averageStarsPerTransaction:e.transactionCount>0?(e.totalStars/e.transactionCount).toFixed(1):0,averageStarsPerUser:e.userCount>0?(e.totalStars/e.userCount).toFixed(1):0}))),l=e.membershipStats.map(((e,t)=>({...e,rank:t+1,rankIcon:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":`#${t+1}`,rankColor:0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800",averageStarsPerTransaction:e.transactionCount>0?(e.totalStars/e.transactionCount).toFixed(1):0,averageStarsPerUser:e.userCount>0?(e.totalStars/e.userCount).toFixed(1):0,tierDisplayName:xI(e.tierName),tierColor:vI(e.tierName)}))),c=e.topUsers.map(((e,t)=>({...e,rank:t+1,rankIcon:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":`#${t+1}`,rankColor:0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-blue-500",averageStarsPerTransaction:e.transactionCount>0?(e.starsSpent/e.transactionCount).toFixed(1):0,tierDisplayName:xI(e.membershipTier),tierColor:vI(e.membershipTier),lastTransactionDate:e.lastTransaction?new Date(e.lastTransaction).toLocaleDateString("vi-VN"):"N/A"}))),u=(null===n||void 0===n?void 0:n.length)||0,d=e.pageStats.length,h=e.membershipStats.length,m=e.topUsers.length;return{totalStarsSpent:e.totalStarsSpent,totalTransactions:e.totalTransactions,mostUsedPage:e.mostUsedPage,mostActiveTier:e.mostActiveTier,pageStats:e.pageStats,membershipStats:e.membershipStats,topUsers:e.topUsers,overviewStats:a,pageRankings:o,tierRankings:l,userRankings:c,totalPages:u,activePages:d,totalTiers:4,activeTiers:h,totalUsers:m,averageStarsPerTransaction:e.totalTransactions>0?(e.totalStarsSpent/e.totalTransactions).toFixed(1):0,averageStarsPerUser:m>0?(e.totalStarsSpent/m).toFixed(1):0}}),[e,n]))(n,r);return(0,At.jsx)(At.Fragment,{children:(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,At.jsx)(oL,{className:"h-6 w-6 mr-2 text-blue-600"}),"Th\u1ed1ng k\xea s\u1eed d\u1ee5ng sao"]}),(0,At.jsx)("button",{onClick:i,disabled:s,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:s?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500 mr-2"}),"\u0110ang t\u1ea3i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"L\xe0m m\u1edbi"]})})]}),s?(0,At.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i th\u1ed1ng k\xea..."})]})}):(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:a.map(((e,t)=>(0,At.jsxs)("div",{className:`bg-${e.color}-50 rounded-lg p-4`,children:[(0,At.jsxs)("div",{className:"text-lg font-bold text-gray-600 flex items-center",children:[(0,At.jsx)("span",{className:"mr-2",children:e.icon}),"number"===typeof e.value?e.value.toLocaleString():e.value]}),(0,At.jsx)("div",{className:`text-sm text-${e.color}-700`,children:e.label}),e.suffix&&(0,At.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.suffix})]},t)))}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-indigo-600",children:g}),(0,At.jsx)("div",{className:"text-sm text-indigo-700",children:"Trung b\xecnh sao/giao d\u1ecbch"})]}),(0,At.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-pink-600",children:p}),(0,At.jsx)("div",{className:"text-sm text-pink-700",children:"Trung b\xecnh sao/user"})]}),(0,At.jsxs)("div",{className:"bg-teal-50 rounded-lg p-4",children:[(0,At.jsxs)("div",{className:"text-lg font-bold text-teal-600",children:[d,"/",u]}),(0,At.jsx)("div",{className:"text-sm text-teal-700",children:"Trang c\xf3 ho\u1ea1t \u0111\u1ed9ng"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(OM,{className:"h-5 w-5 mr-2 text-blue-600"}),"S\u1ed1 sao \u0111\xe3 nh\u1eadn t\u1eeb c\xe1c trang"]}),o.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:e.pageName}),(0,At.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.rankColor}`,children:e.rankIcon})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Sao thu:"}),(0,At.jsx)("span",{className:"font-medium text-blue-600",children:e.totalStars.toLocaleString()})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Giao d\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:e.transactionCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi d\xf9ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.userCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"TB/giao d\u1ecbch:"}),(0,At.jsxs)("span",{className:"font-medium text-green-600",children:[e.averageStarsPerTransaction," sao"]})]})]})]},e.pageName)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1eed d\u1ee5ng trang"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 mr-2 text-yellow-600"}),"S\u1ed1 sao \u0111\xe3 nh\u1eadn t\u1eeb c\xe1c h\u1ea1ng th\xe0nh vi\xean"]}),l.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((e=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:e.tierDisplayName}),(0,At.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.rankColor}`,children:e.rankIcon})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Sao thu:"}),(0,At.jsx)("span",{className:"font-medium text-yellow-600",children:e.totalStars.toLocaleString()})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Giao d\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:e.transactionCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi d\xf9ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.userCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"TB/giao d\u1ecbch:"}),(0,At.jsxs)("span",{className:"font-medium text-green-600",children:[e.averageStarsPerTransaction," sao"]})]})]})]},e.tierName)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1eed d\u1ee5ng theo h\u1ea1ng th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(fI,{className:"h-5 w-5 mr-2 text-orange-600"}),"Top 5 user x\xe0i sao nhi\u1ec1u nh\u1ea5t"]}),c.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"space-y-3",children:c.map((e=>(0,At.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,At.jsxs)("div",{className:"flex md:flex-row flex-col md:items-center md:justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white ${e.rankColor}`,children:e.rank}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,At.jsxs)("div",{className:"text-xs text-gray-400",children:["L\u1ea7n cu\u1ed1i: ",e.lastTransactionDate]})]})]}),(0,At.jsxs)("div",{className:"text-right flex gap-2 items-center",children:[(0,At.jsx)("div",{className:"flex items-center space-x-2",children:(0,At.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.tierColor}`,children:e.tierDisplayName})}),(0,At.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[e.starsSpent.toLocaleString()," sao"]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[e.transactionCount," giao d\u1ecbch"]}),(0,At.jsxs)("div",{className:"text-xs text-green-600",children:["TB: ",e.averageStarsPerTransaction," sao"]})]})]})},e.userId)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng"})]})]})]})})},bI=()=>{var e,n;const[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(""),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),{isAdminAuthenticated:d}=AL(),{findUserByUsername:h}=Aw(),m=ee(),A=(null===(e=Y().state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)||"/admin/dashboard";(0,t.useEffect)((()=>{d&&m(A,{replace:!0})}),[d,m,A]);return(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:(0,At.jsx)(jT,{className:"h-6 w-6 text-blue-600"})}),(0,At.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"\u0110\u0103ng nh\u1eadp Admin"}),(0,At.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"S\u1eed d\u1ee5ng email ho\u1eb7c username admin \u0111\u1ec3 \u0111\u0103ng nh\u1eadp"})]}),(0,At.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),l(""),u(!0);try{let e=null;if((e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(r)){if(r!==rw)return l("Email n\xe0y kh\xf4ng c\xf3 quy\u1ec1n admin"),void u(!1);e=r}else if(e=await(async e=>{try{const t=await h(e);return t&&t.email===rw?t.email:null}catch(o){return console.error("Error finding admin by username:",o),null}})(r),!e)return l("Username kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c kh\xf4ng c\xf3 quy\u1ec1n admin"),void u(!1);await(0,nw.signInWithEmailAndPassword)(Qb.auth,e,i);localStorage.setItem("adminFirebaseAuth","true"),localStorage.setItem("adminEmail",e),window.dispatchEvent(new Event("adminAuthChange")),setTimeout((()=>{m(A,{replace:!0})}),100)}catch(t){"auth/user-not-found"===t.code?l("T\xe0i kho\u1ea3n admin kh\xf4ng t\u1ed3n t\u1ea1i"):"auth/wrong-password"===t.code?l("M\u1eadt kh\u1ea9u admin kh\xf4ng \u0111\xfang"):"auth/invalid-email"===t.code?l("Email kh\xf4ng h\u1ee3p l\u1ec7"):"auth/too-many-requests"===t.code?l("Qu\xe1 nhi\u1ec1u l\u1ea7n th\u1eed \u0111\u0103ng nh\u1eadp. Vui l\xf2ng th\u1eed l\u1ea1i sau."):l("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi \u0111\u0103ng nh\u1eadp admin")}finally{u(!1)}},children:[(0,At.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"identifier",className:"sr-only",children:"Email ho\u1eb7c Username Admin"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:(0,At.jsx)(Ck,{className:"h-4 w-4 text-gray-600"})}),(0,At.jsx)("input",{id:"identifier",name:"identifier",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email ho\u1eb7c username admin",value:r,onChange:e=>s(e.target.value)})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"password",className:"sr-only",children:"M\u1eadt kh\u1ea9u"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:(0,At.jsx)(Sk,{className:"h-4 w-4 text-gray-600"})}),(0,At.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"M\u1eadt kh\u1ea9u",value:i,onChange:e=>a(e.target.value)})]})]})]}),o&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),(0,At.jsx)("div",{children:(0,At.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u0103ng nh\u1eadp..."]}):"\u0110\u0103ng nh\u1eadp"})})]})]})})},wI=e=>{let{userId:n,userEmail:r}=e;const[s,i]=(0,t.useState)([]),[a,o]=(0,t.useState)("all"),[l,c]=(0,t.useState)("all"),[u,d]=(0,t.useState)(1),[h,m]=(0,t.useState)(!0),[A,g]=(0,t.useState)(null),[p,f]=(0,t.useState)(0);(0,t.useEffect)((()=>{if(!n)return void m(!1);m(!0),g(null);const e=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"users",n),(async e=>{if(e.exists()){const r=e.data();f(r.stars||0);try{const e=(0,Hb.rJ)(Qb.db,"users",n,"starTransactions"),t=(0,Hb.P)(e,(0,Hb.My)("timestamp","desc")),s=(0,Hb.aQ)(t,(e=>{if(!e.empty){const t=e.docs.map((e=>({id:e.id,...e.data(),date:new Date(e.data().timestamp)})));return i(t),void m(!1)}const t=r.starTransactions||{},n=Object.entries(t).map((e=>{let[t,n]=e;return{id:t,...n,date:new Date(n.timestamp)}})).sort(((e,t)=>t.timestamp-e.timestamp));i(n),m(!1)}));return()=>s()}catch(t){const e=r.starTransactions||{},n=Object.entries(e).map((e=>{let[t,n]=e;return{id:t,...n,date:new Date(n.timestamp)}})).sort(((e,t)=>t.timestamp-e.timestamp));i(n),m(!1)}}else i([]),m(!1)}),(e=>{console.error("Error loading star transactions:",e),g(e.message),m(!1)}));return()=>e()}),[n]);const x=(0,t.useMemo)((()=>[...new Set(s.map((e=>{const t=new Date(e.timestamp);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`})))].sort().reverse()),[s]),v=(0,t.useMemo)((()=>s.filter((e=>{let t=!0;var n,r,s,i,o,c,u,d,h,m,A;("spend"===a&&(t="spend"===e.type),"daily"===a)&&(t="earn"===e.type&&(null===(n=e.reason)||void 0===n?void 0:n.includes("\u0110i\u1ec3m th\u01b0\u1edfng"))&&((null===(r=e.reason)||void 0===r?void 0:r.includes("\u0111\u0103ng nh\u1eadp"))||(null===(s=e.reason)||void 0===s?void 0:s.includes("ng\xe0y"))||(null===(i=e.reason)||void 0===i?void 0:i.includes("l\u1ea7n"))||(null===(o=e.reason)||void 0===o?void 0:o.includes("Daily login"))));"admin"===a&&(t="earn"===e.type&&("Star reward"===e.reason||(null===(c=e.reason)||void 0===c?void 0:c.includes("Admin c\u1ed9ng sao"))||e.reason&&!(null!==(u=e.reason)&&void 0!==u&&u.includes("\u0110i\u1ec3m th\u01b0\u1edfng")&&(null!==(d=e.reason)&&void 0!==d&&d.includes("\u0111\u0103ng nh\u1eadp")||null!==(h=e.reason)&&void 0!==h&&h.includes("ng\xe0y")||null!==(m=e.reason)&&void 0!==m&&m.includes("l\u1ea7n")||null!==(A=e.reason)&&void 0!==A&&A.includes("Daily login")))));if(!t)return!1;if("all"!==l){const t=new Date(e.timestamp);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}`===l}return!0}))),[s,a,l]),y=Math.ceil(v.length/10),b=10*(u-1),w=v.slice(b,b+10);(0,t.useEffect)((()=>{d(1)}),[a,l]);const N=e=>{var t,n,r,s,i,a,o;return"spend"===e.type?null!==(a=e.reason)&&void 0!==a&&a.includes("Temporary access")?(0,At.jsx)(ck,{className:"h-5 w-5 text-orange-500"}):null!==(o=e.reason)&&void 0!==o&&o.includes("Truy c\u1eadp trang")?(0,At.jsx)(Iy,{className:"h-5 w-5 text-purple-500"}):(0,At.jsx)(ck,{className:"h-5 w-5 text-red-500"}):null!==(t=e.reason)&&void 0!==t&&t.includes("\u0110i\u1ec3m th\u01b0\u1edfng")&&(null!==(n=e.reason)&&void 0!==n&&n.includes("\u0111\u0103ng nh\u1eadp")||null!==(r=e.reason)&&void 0!==r&&r.includes("ng\xe0y")||null!==(s=e.reason)&&void 0!==s&&s.includes("l\u1ea7n")||null!==(i=e.reason)&&void 0!==i&&i.includes("Daily login"))?(0,At.jsx)($M,{className:"h-5 w-5 text-green-500"}):(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500"})},j=(0,t.useMemo)((()=>{const e=s.filter((e=>"spend"===e.type)).reduce(((e,t)=>e+t.amount),0),t=s.filter((e=>"earn"===e.type)).reduce(((e,t)=>e+t.amount),0);return{totalEarned:t,totalSpent:e,dailyRewards:s.filter((e=>{var t,n,r,s,i;return"earn"===e.type&&(null===(t=e.reason)||void 0===t?void 0:t.includes("\u0110i\u1ec3m th\u01b0\u1edfng"))&&((null===(n=e.reason)||void 0===n?void 0:n.includes("\u0111\u0103ng nh\u1eadp"))||(null===(r=e.reason)||void 0===r?void 0:r.includes("ng\xe0y"))||(null===(s=e.reason)||void 0===s?void 0:s.includes("l\u1ea7n"))||(null===(i=e.reason)||void 0===i?void 0:i.includes("Daily login")))})).reduce(((e,t)=>e+t.amount),0),adminRewards:s.filter((e=>{var t,n,r,s,i,a;return"earn"===e.type&&("Star reward"===e.reason||(null===(t=e.reason)||void 0===t?void 0:t.includes("Admin c\u1ed9ng sao"))||e.reason&&!(null!==(n=e.reason)&&void 0!==n&&n.includes("\u0110i\u1ec3m th\u01b0\u1edfng")&&(null!==(r=e.reason)&&void 0!==r&&r.includes("\u0111\u0103ng nh\u1eadp")||null!==(s=e.reason)&&void 0!==s&&s.includes("ng\xe0y")||null!==(i=e.reason)&&void 0!==i&&i.includes("l\u1ea7n")||null!==(a=e.reason)&&void 0!==a&&a.includes("Daily login"))))})).reduce(((e,t)=>e+t.amount),0),netGain:t-e}}),[s]);return h?(0,At.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,At.jsx)("div",{className:"space-y-3",children:[1,2,3].map((e=>(0,At.jsx)("div",{className:"h-16 bg-gray-200 rounded"},e)))})]})}):A?(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500"}),"L\u1ecbch s\u1eed sao"]}),(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("div",{className:"text-red-600 mb-2",children:"\u274c L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{className:"text-gray-500 text-sm",children:A})]})]}):(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500"}),"L\u1ecbch s\u1eed sao - ",r]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"S\u1ed1 sao hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("p",{className:"text-xl font-bold text-yellow-600 flex items-center gap-1",children:[p," ",(0,At.jsx)(Tw,{className:"h-5 w-5"})]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,At.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"T\u1ed5ng nh\u1eadn"}),(0,At.jsxs)("p",{className:"text-lg font-bold text-green-700",children:["+",j.totalEarned]})]}),(0,At.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"T\u1ed5ng chi"}),(0,At.jsxs)("p",{className:"text-lg font-bold text-red-700",children:["-",j.totalSpent]})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Th\u01b0\u1edfng h\u1eb1ng ng\xe0y"}),(0,At.jsxs)("p",{className:"text-lg font-bold text-blue-700",children:["+",j.dailyRewards]})]}),(0,At.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-center",children:[(0,At.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Admin c\u1ed9ng"}),(0,At.jsxs)("p",{className:"text-lg font-bold text-purple-700",children:["+",j.adminRewards]})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[[{key:"all",label:"T\u1ea5t c\u1ea3",count:s.length},{key:"daily",label:"Th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp",count:s.filter((e=>{var t,n,r,s,i;return"earn"===e.type&&(null===(t=e.reason)||void 0===t?void 0:t.includes("\u0110i\u1ec3m th\u01b0\u1edfng"))&&((null===(n=e.reason)||void 0===n?void 0:n.includes("\u0111\u0103ng nh\u1eadp"))||(null===(r=e.reason)||void 0===r?void 0:r.includes("ng\xe0y"))||(null===(s=e.reason)||void 0===s?void 0:s.includes("l\u1ea7n"))||(null===(i=e.reason)||void 0===i?void 0:i.includes("Daily login")))})).length},{key:"admin",label:"Admin c\u1ed9ng",count:s.filter((e=>{var t,n,r,s,i,a;return"earn"===e.type&&("Star reward"===e.reason||(null===(t=e.reason)||void 0===t?void 0:t.includes("Admin c\u1ed9ng sao"))||e.reason&&!(null!==(n=e.reason)&&void 0!==n&&n.includes("\u0110i\u1ec3m th\u01b0\u1edfng")&&(null!==(r=e.reason)&&void 0!==r&&r.includes("\u0111\u0103ng nh\u1eadp")||null!==(s=e.reason)&&void 0!==s&&s.includes("ng\xe0y")||null!==(i=e.reason)&&void 0!==i&&i.includes("l\u1ea7n")||null!==(a=e.reason)&&void 0!==a&&a.includes("Daily login"))))})).length},{key:"spend",label:"S\u1eed d\u1ee5ng",count:s.filter((e=>"spend"===e.type)).length}].map((e=>{let{key:t,label:n,count:r}=e;return(0,At.jsxs)("button",{onClick:()=>o(t),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors text-center "+(a===t?"bg-blue-100 text-blue-800 border border-blue-300":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200"),children:[n," (",r,")"]},t)})),(0,At.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 th\xe1ng"}),x.map((e=>{const[t,n]=e.split("-"),r=new Date(t,n-1).toLocaleDateString("vi-VN",{month:"long",year:"numeric"});return(0,At.jsx)("option",{value:e,children:r},e)}))]})]}),(0,At.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,At.jsxs)("div",{className:"font-medium "+("all"===a?"text-gray-700":"daily"===a?"text-green-600":"admin"===a?"text-blue-600":"text-red-600"),children:["all"===a?"T\u1ea5t c\u1ea3 giao d\u1ecbch":"daily"===a?"Sao th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp":"admin"===a?"Sao Admin c\u1ed9ng":"Sao \u0111\xe3 s\u1eed d\u1ee5ng","all"!==l&&(0,At.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",new Date(l+"-01").toLocaleDateString("vi-VN",{month:"long",year:"numeric"}),")"]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[v.reduce(((e,t)=>e+("earn"===t.type?t.amount:-t.amount)),0)>0?"+":"",v.reduce(((e,t)=>e+("earn"===t.type?t.amount:-t.amount)),0)," sao"]}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[v.length," giao d\u1ecbch"]})]})]})}),(0,At.jsx)("div",{className:"space-y-3 mb-4",children:0===w.length?(0,At.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,At.jsx)(Tw,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,At.jsx)("p",{children:0===s.length?"Ch\u01b0a c\xf3 giao d\u1ecbch n\xe0o":"Kh\xf4ng c\xf3 giao d\u1ecbch ph\xf9 h\u1ee3p v\u1edbi b\u1ed9 l\u1ecdc"})]}):w.map((e=>{return(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3",children:[N(e),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"font-medium text-gray-900",children:(n=e.reason,n?n.length>50?n.substring(0,47)+"...":n:"Kh\xf4ng c\xf3 l\xfd do")}),(0,At.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,At.jsx)("span",{children:(t=e.date,t.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),e.expiresAt&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("span",{children:"\u2022"}),(0,At.jsx)("span",{children:e.expiresAt>Date.now()?"C\xf2n hi\u1ec7u l\u1ef1c":"\u0110\xe3 h\u1ebft h\u1ea1n"})]})]})]})]}),(0,At.jsxs)("div",{className:"font-bold text-lg "+("spend"===e.type?"text-red-600":"text-green-600"),children:["spend"===e.type?"-":"+",e.amount," ",(0,At.jsx)(Tw,{className:"h-4 w-4 inline"})]})]},e.id);var t,n}))}),y>1&&(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["Hi\u1ec3n th\u1ecb ",b+1," - ",Math.min(b+10,v.length)," / ",v.length," giao d\u1ecbch"]}),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)("button",{onClick:()=>d((e=>Math.max(e-1,1))),disabled:1===u,className:"p-1 rounded border border-gray-300 disabled:opacity-50 hover:bg-gray-100",children:(0,At.jsx)(oS,{className:"h-4 w-4"})}),(0,At.jsxs)("span",{className:"text-sm text-gray-700",children:["Trang ",u," / ",y]}),(0,At.jsx)("button",{onClick:()=>d((e=>Math.min(e+1,y))),disabled:u===y,className:"p-1 rounded border border-gray-300 disabled:opacity-50 hover:bg-gray-100",children:(0,At.jsx)(cS,{className:"h-4 w-4"})})]})]})]})};const NI=new class{constructor(){this.BATCH_SIZE=100,this.DELAY_BETWEEN_BATCHES=1e3,this.MAX_RETRIES=3}async processAllExpiredMemberships(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Date.now();let r=0,s=0;const i=[];try{const l=await this.getAllExpiredUsers();if(0===l.length)return null===t||void 0===t||t({success:!0,processed:0,errors:0,duration:0}),{success:!0,processed:0,errors:0,duration:0};const c=this.createBatches(l,this.BATCH_SIZE);for(let t=0;t<c.length;t++){const n=c[t],l=t+1;try{var a;const o=await this.processBatchWithRetry(n);r+=o.processed,s+=o.errors,(null===(a=o.errorDetails)||void 0===a?void 0:a.length)>0&&i.push(...o.errorDetails);const u=Math.round(l/c.length*100);null===e||void 0===e||e({progress:u,processed:r,errors:s,currentBatch:l,totalBatches:c.length}),t<c.length-1&&await this.delay(this.DELAY_BETWEEN_BATCHES)}catch(o){console.error(`\u274c Error processing batch ${l}:`,o),s+=n.length,i.push({batch:l,users:n.map((e=>e.email)),error:o.message})}}const u=Date.now()-n,d={success:0===s,processed:r,errors:s,duration:Math.round(u/1e3),errorDetails:i,totalFound:l.length};return null===t||void 0===t||t(d),d}catch(l){console.error("\u274c Fatal error in batch processing:",l);const e=Date.now()-n,i={success:!1,processed:r,errors:s+1,duration:Math.round(e/1e3),errorDetails:[{error:l.message,fatal:!0}],totalFound:0};return null===t||void 0===t||t(i),i}}async getAllExpiredUsers(){const e=new Date,t=[];try{const n=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","in",["standard","premium","master"]),(0,Hb._M)("membershipExpiry","<",e),(0,Hb.My)("membershipExpiry","desc"));return(await(0,Hb.GG)(n)).docs.forEach((n=>{const r=n.data();var s;r.email&&"admin@example.com"!==r.email&&t.push({id:n.id,...r,membershipExpiry:(null===(s=r.membershipExpiry)||void 0===s?void 0:s.toDate())||e})})),t}catch(n){throw console.error("\u274c Error fetching expired users:",n),n}}async processBatchWithRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{return await this.processBatch(e)}catch(n){if(t<this.MAX_RETRIES)return await this.delay(2e3*(t+1)),await this.processBatchWithRetry(e,t+1);throw n}}async processBatch(e){const t=(0,Hb.wP)(Qb.db),n=new Date;let r=0;const s=[];for(const a of e)try{const e=this.calculateNewMembershipData(a,n),r=(0,Hb.doc)(Qb.db,"users",a.id);t.update(r,e)}catch(i){console.error(`\u274c Error preparing user ${a.email}:`,i),s.push({userId:a.id,email:a.email,error:i.message})}return e.length>s.length&&(await t.commit(),r=e.length-s.length),{processed:r,errors:s.length,errorDetails:s}}calculateNewMembershipData(e,t){const n=e.stars||0,r=e.adminStars||0;let s=n-({standard:200,premium:3e3,master:200,sponsor:5e3}[e.membershipTier]||0)+20;s<20+r&&(s=20+r);return{membershipTier:"basic",membershipExpiry:new Date(t.getTime()+2592e6),stars:s,updatedAt:(0,Hb.O5)(),processedAt:(0,Hb.O5)(),processedBy:"batch-system"}}createBatches(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}delay(e){return new Promise((t=>setTimeout(t,e)))}};function jI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const CI=t.forwardRef(jI);function TI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const SI=t.forwardRef(TI),_I=()=>{var e,r,s,i,a,o,l,c,u,d,h,m;const{currentUser:A,addUserStars:g,userStars:p,membershipTier:f,starsLastReset:x}=Aw(),{adminUser:v}=AL(),[y,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(!0),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(""),[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(""),[k,L]=(0,t.useState)(""),[I,D]=(0,t.useState)({newPassword:"",confirmPassword:""}),[P,F]=(0,t.useState)(!1),[U,R]=(0,t.useState)(""),[O,H]=(0,t.useState)(""),[Q,z]=(0,t.useState)({newDisplayName:""}),[V,K]=(0,t.useState)(!1),[G,q]=(0,t.useState)(""),[W,$]=(0,t.useState)(""),[X,Y]=(0,t.useState)({newUsername:""}),[J,Z]=(0,t.useState)(!1),[ee,te]=(0,t.useState)(""),[ne,re]=(0,t.useState)(""),[se,ie]=(0,t.useState)(!1),[ae,oe]=(0,t.useState)(""),[le,ce]=(0,t.useState)(""),[ue,de]=(0,t.useState)(!1),[he,me]=(0,t.useState)(""),[Ae,ge]=(0,t.useState)(!1),[pe,fe]=(0,t.useState)(""),[xe,ve]=(0,t.useState)(""),[ye,be]=(0,t.useState)(!1),[we,Ne]=(0,t.useState)({processing:!1,progress:null,result:null,showModal:!1,mode:"all",selectedUsers:[],stats:null}),[je,Ce]=(0,t.useState)({processing:!1,progress:null,result:null,showModal:!1,mode:"all",selectedUsers:[],stats:null}),[Te,Se]=(0,t.useState)({processing:!1,progress:null,result:null,showModal:!1,stats:null}),[_e,Ee]=(0,t.useState)({processing:!1,progress:null,result:null,showModal:!1,selectedOptions:{resetStarTransactions:!0,resetPagePoints:!0,resetMembershipTiers:!0,resetArticleViews:!0,resetUserStats:!0},confirmationText:"",stats:null});(0,t.useEffect)((()=>{if(null===A||void 0===A||!A.uid)return void N(!1);N(!0);const e=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"users",A.uid),(e=>{if(e.exists()){var t,n,r,s;const i=e.data();b({...i,createdAt:null===(t=i.createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(n=i.lastLoginAt)||void 0===n?void 0:n.toDate(),membershipExpiry:null===(r=i.membershipExpiry)||void 0===r?void 0:r.toDate(),starsLastReset:null===(s=i.starsLastReset)||void 0===s?void 0:s.toDate()})}N(!1)}),(e=>{console.error("Error loading admin data:",e),L("L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u admin"),N(!1)}));return()=>e()}),[null===A||void 0===A?void 0:A.uid]);const Be=e=>{fe(e),me(""),ve(""),ge(!0)},Me=async()=>{try{ie(!0),ce(""),oe("");const e=(0,Hb.wP)(Qb.db);["home","news","solar","calendar","lich-viet","battu","lakinh","luchao","kymon","profile"].forEach((t=>{const n=(0,Hb.doc)(Qb.db,"pageVisits",t);e.set(n,{count:0,lastVisited:new Date,pageName:t,resetAt:new Date},{merge:!0})}));const t=(0,Hb.doc)(Qb.db,"sessionVisits","total");e.set(t,{count:0,lastVisited:new Date,resetAt:new Date},{merge:!0}),await e.commit(),oe("\u2705 \u0110\xe3 reset t\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem trang v\xe0 t\u1ed5ng l\u01b0\u1ee3t truy c\u1eadp v\u1ec1 0 th\xe0nh c\xf4ng!"),de(!1),setTimeout((()=>oe("")),5e3)}catch(k){console.error("Error resetting views:",k),ce("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi reset l\u01b0\u1ee3t xem: "+k.message),setTimeout((()=>ce("")),5e3)}finally{ie(!1)}},ke=e=>e?new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e):"Ch\u01b0a c\xf3",Le=()=>{Ne({processing:!1,progress:null,result:null,showModal:!1,mode:"all",selectedUsers:[],stats:null})},Ie=async()=>{if(we.stats)try{Ne((e=>({...e,processing:!0,progress:null,result:null})));const e=e=>{Ne((t=>({...t,progress:e})))},t=e=>{Ne((t=>({...t,processing:!1,result:e,progress:null})))};"all"===we.mode?await NI.processAllExpiredMemberships(e,t):"selected"===we.mode&&await De(we.selectedUsers,e,t)}catch(k){console.error("Error expiring memberships:",k),Ne((t=>({...t,processing:!1,result:{success:!1,error:k.message}})))}},De=async(e,t,n)=>{try{const s=Date.now();let i=0,a=0;const o=we.stats.users.filter((t=>e.includes(t.id)));if(0===o.length)return void n({success:!0,processed:0,errors:0,duration:0});const l=10,c=[];for(let e=0;e<o.length;e+=l)c.push(o.slice(e,e+l));for(let e=0;e<c.length;e++){const n=c[e],s=e+1;try{t({progress:Math.round(e/c.length*100),processed:i,errors:a,currentBatch:s,totalBatches:c.length});const r=await NI.processBatch(n);i+=r.processed,a+=r.errors,e<c.length-1&&await new Promise((e=>setTimeout(e,500)))}catch(r){console.error(`Error processing batch ${s}:`,r),a+=n.length}}const u=Date.now()-s;n({success:0===a,processed:i,errors:a,duration:Math.round(u/1e3),totalFound:o.length})}catch(k){console.error("Error in processSelectedUsers:",k),n({success:!1,processed:0,errors:1,duration:0,error:k.message})}},Pe=e=>{var t;if(null===(t=we.stats)||void 0===t||!t.users)return;const n=we.stats.users.filter((t=>t.membershipTier===e)).map((e=>e.id));Ne((e=>({...e,selectedUsers:[...e.selectedUsers.filter((e=>!n.includes(e))),...n]})))},Fe=()=>{Ce((e=>({...e,showModal:!1,processing:!1,progress:null,result:null,selectedUsers:[],mode:"all"})))},Ue=async(e,t)=>{const n=Date.now();let r=0,s=0;const i=[];try{const l=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","in",["standard","premium","master","basic"])),c=await(0,Hb.GG)(l),u=[];if(c.docs.forEach((e=>{const t=e.data();t.email&&"admin@example.com"!==t.email&&u.push({id:e.id,...t})})),0===u.length)return void t({success:!0,processed:0,errors:0,duration:0});const d=100,h=[];for(let e=0;e<u.length;e+=d)h.push(u.slice(e,e+d));for(let t=0;t<h.length;t++){const n=h[t],l=t+1;try{var a;const o=await Oe(n);r+=o.processed,s+=o.errors,(null===(a=o.errorDetails)||void 0===a?void 0:a.length)>0&&i.push(...o.errorDetails);e({progress:Math.round(l/h.length*100),processed:r,errors:s,currentBatch:l,totalBatches:h.length}),t<h.length-1&&await new Promise((e=>setTimeout(e,1e3)))}catch(o){console.error(`\u274c Error processing batch ${l}:`,o),s+=n.length,i.push({batch:l,users:n.map((e=>e.email)),error:o.message})}}const m=Date.now()-n;t({success:0===s,processed:r,errors:s,duration:Math.round(m/1e3),errorDetails:i,totalFound:u.length})}catch(k){console.error("\u274c Fatal error in processAllUsersResetStars:",k);const i=Date.now()-n;t({success:!1,processed:r,errors:s+1,duration:Math.round(i/1e3),errorDetails:[{error:k.message,fatal:!0}],totalFound:0})}},Re=async(e,t,n)=>{const r=Date.now();let s=0,i=0;const a=[];try{const c=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("__name__","in",e)),u=await(0,Hb.GG)(c),d=[];if(u.docs.forEach((e=>{const t=e.data();t.email&&"admin@example.com"!==t.email&&d.push({id:e.id,...t})})),0===d.length)return void n({success:!0,processed:0,errors:0,duration:0});const h=100,m=[];for(let e=0;e<d.length;e+=h)m.push(d.slice(e,e+h));for(let e=0;e<m.length;e++){const n=m[e],r=e+1;try{var o;const l=await Oe(n);s+=l.processed,i+=l.errors,(null===(o=l.errorDetails)||void 0===o?void 0:o.length)>0&&a.push(...l.errorDetails);t({progress:Math.round(r/m.length*100),processed:s,errors:i,currentBatch:r,totalBatches:m.length}),e<m.length-1&&await new Promise((e=>setTimeout(e,1e3)))}catch(l){console.error(`\u274c Error processing batch ${r}:`,l),i+=n.length,a.push({batch:r,users:n.map((e=>e.email)),error:l.message})}}const A=Date.now()-r;n({success:0===i,processed:s,errors:i,duration:Math.round(A/1e3),errorDetails:a,totalFound:d.length})}catch(k){console.error("\u274c Fatal error in processSelectedUsersResetStars:",k);const t=Date.now()-r;n({success:!1,processed:s,errors:i+1,duration:Math.round(t/1e3),errorDetails:[{error:k.message,fatal:!0}],totalFound:0})}},Oe=async e=>{const t=(0,Hb.wP)(Qb.db);new Date;let n=0;const r=[];for(const s of e)try{const e=s.stars||0,n=s.adminStars||0;let r=20;n>0&&(r=20+n);const i={stars:r,updatedAt:(0,Hb.O5)(),resetAt:(0,Hb.O5)(),resetBy:"admin-system",previousStars:e,previousTier:s.membershipTier},a=(0,Hb.doc)(Qb.db,"users",s.id);t.update(a,i)}catch(k){console.error(`\u274c Error preparing user ${s.email}:`,k),r.push({userId:s.id,email:s.email,error:k.message})}return e.length>r.length&&(await t.commit(),n=e.length-r.length),{processed:n,errors:r.length,errorDetails:r}},He=e=>{var t;if(null!==(t=je.stats)&&void 0!==t&&t.users){const t=je.stats.users.filter((t=>t.membershipTier===e)).map((e=>e.id));Ce((e=>({...e,selectedUsers:t})))}},Qe=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles")),t=await(0,Hb.GG)(e),n=[];t.docs.forEach((e=>{const t=e.data();n.push({id:e.id,...t,views:t.views||0})}));const r=n.length,s=n.reduce(((e,t)=>e+(t.views||0)),0);return{totalArticles:r,totalViews:s,articlesWithViews:n.filter((e=>(e.views||0)>0)).length,articles:n}}catch(k){throw console.error("Error getting article views stats:",k),k}},ze=()=>{Se((e=>({...e,showModal:!1,progress:null,result:null})))},Ve=async e=>{const t=(0,Hb.wP)(Qb.db);let n=0;const r=[];for(const s of e)try{const r=s.views||0;t.update((0,Hb.doc)(Qb.db,"articles",s.id),{views:0,updatedAt:(0,Hb.O5)(),resetAt:(0,Hb.O5)(),resetBy:"admin-system",previousViews:r}),n++,n%10===0&&Se((t=>({...t,progress:`\u0110\xe3 x\u1eed l\xfd ${n}/${e.length} b\xe0i vi\u1ebft...`})))}catch(k){r.push({articleId:s.id,title:s.title,error:k.message})}await t.commit(),Se((e=>({...e,progress:`Ho\xe0n th\xe0nh! \u0110\xe3 x\u1eed l\xfd ${n} b\xe0i vi\u1ebft${r.length>0?`, ${r.length} l\u1ed7i`:""}`}))),r.length>0&&console.warn("Some articles failed to reset:",r)},Ke=()=>{Ee((e=>({...e,showModal:!1,processing:!1,progress:null,result:null,confirmationText:""})))},Ge=async()=>{if("RESET"===_e.confirmationText)try{Ee((e=>({...e,processing:!0,progress:"B\u1eaft \u0111\u1ea7u reset h\u1ec7 th\u1ed1ng..."})));const e=e=>{Ee((t=>({...t,progress:e.message})))},t=e=>{Ee((t=>({...t,processing:!1,progress:null,result:e})))};await qe(_e.selectedOptions,e,t)}catch(k){console.error("Error in system reset:",k),Ee((t=>({...t,processing:!1,progress:null,result:{success:!1,message:"L\u1ed7i: "+k.message}})))}else Ee((e=>({...e,result:{success:!1,message:'Vui l\xf2ng nh\u1eadp ch\xednh x\xe1c "RESET" \u0111\u1ec3 x\xe1c nh\u1eadn'}})))},qe=async(e,t,n)=>{try{const r=(0,Hb.wP)(Qb.db);let s=0;if(e.resetStarTransactions||e.resetPagePoints||e.resetMembershipTiers||e.resetUserStats){t({message:"\u0110ang reset d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng..."});const n=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"));(await(0,Hb.GG)(n)).forEach((n=>{const i=n.ref,a={};e.resetStarTransactions&&(a.starTransactions={}),e.resetPagePoints&&(a.pagePoints=0),e.resetMembershipTiers&&(a.membershipTier="basic",a.membershipExpiry=null),e.resetUserStats&&(a.totalStarsEarned=0,a.totalStarsSpent=0,a.lastActivityAt=null),r.update(i,a),s++,s%100===0&&t({message:`\u0110\xe3 x\u1eed l\xfd ${s} ng\u01b0\u1eddi d\xf9ng...`})}))}if(e.resetArticleViews){t({message:"\u0110ang reset l\u01b0\u1ee3t xem b\xe0i vi\u1ebft..."});const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"));(await(0,Hb.GG)(e)).forEach((e=>{r.update(e.ref,{viewCount:0}),s++}))}t({message:"\u0110ang l\u01b0u thay \u0111\u1ed5i..."}),await r.commit(),n({success:!0,message:`\u2705 Reset h\u1ec7 th\u1ed1ng th\xe0nh c\xf4ng! \u0110\xe3 x\u1eed l\xfd ${s} b\u1ea3n ghi.`,processedCount:s})}catch(k){console.error("Error processing system reset:",k),n({success:!1,message:"\u274c L\u1ed7i khi reset h\u1ec7 th\u1ed1ng: "+k.message})}},We=e=>{Ee((t=>({...t,selectedOptions:{...t.selectedOptions,[e]:!t.selectedOptions[e]}})))};return w?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"h-16 w-16 rounded-full bg-blue-500 flex items-center justify-center",children:(0,At.jsx)(dt,{className:"h-8 w-8 text-white"})})}),(0,At.jsxs)("div",{className:"ml-6",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Profile"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Qu\u1ea3n l\xfd th\xf4ng tin v\xe0 sao c\u1ee7a t\xe0i kho\u1ea3n admin"})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(qM,{className:"h-5 w-5 text-gray-400 mr-2"}),"Th\xf4ng tin Admin"]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(EM,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Email"})]}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===A||void 0===A?void 0:A.email)||"Ch\u01b0a c\xf3"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(qM,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"T\xean hi\u1ec3n th\u1ecb"})]}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===y||void 0===y?void 0:y.displayName)||(null===A||void 0===A?void 0:A.displayName)||"Admin"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(Ck,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Username"})]}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===y||void 0===y?void 0:y.username)||"Ch\u01b0a c\xf3"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(dt,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"H\u1ea1ng th\xe0nh vi\xean"})]}),(0,At.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:f||(null===y||void 0===y?void 0:y.membershipTier)||"Admin"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(nT,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Th\u1eddi gian tham gia"})]}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(()=>{if(null===y||void 0===y||!y.createdAt)return"Ch\u01b0a x\xe1c \u0111\u1ecbnh";const e=new Date,t=Math.abs(e-y.createdAt),n=Math.ceil(t/864e5);if(n<30)return`${n} ng\xe0y`;if(n<365){return`${Math.floor(n/30)} th\xe1ng`}{const e=Math.floor(n/365),t=Math.floor(n%365/30);return t>0?`${e} n\u0103m ${t} th\xe1ng`:`${e} n\u0103m`}})()})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(Iy,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"\u0110\u0103ng nh\u1eadp cu\u1ed1i"})]}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:ke(null===y||void 0===y?void 0:y.lastLoginAt)})]})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Qu\u1ea3n l\xfd Sao Admin"]}),(0,At.jsx)("div",{className:" border border-yellow-200 rounded-lg p-4 mb-6",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:"S\u1ed1 sao hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)(Tw,{className:"h-8 w-8 text-yellow-500 mr-2"}),(0,At.jsx)("p",{className:"text-3xl font-bold text-yellow-900",children:p||(null===y||void 0===y?void 0:y.stars)||0})]}),(null===y||void 0===y?void 0:y.adminStars)>0&&(0,At.jsxs)("div",{className:"mt-3 text-xs text-yellow-700",children:[(0,At.jsx)("div",{className:"flex items-center justify-center space-x-4",children:(0,At.jsxs)("span",{className:"font-medium",children:["\ud83d\udc8e Admin Stars: ",y.adminStars]})}),(0,At.jsx)("p",{className:"text-yellow-600 mt-1",children:"\u2728 \u0110\u01b0\u1ee3c b\u1ea3o v\u1ec7 khi reset chu k\u1ef3"})]}),(x||(null===y||void 0===y?void 0:y.starsLastReset))&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-yellow-600",children:["Reset cu\u1ed1i: ",ke(x||(null===y||void 0===y?void 0:y.starsLastReset))]})]})}),(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"T\u1ef1 c\u1ed9ng th\xeam Sao"}),B&&(0,At.jsx)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700",children:B}),k&&(0,At.jsx)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:k}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(T);if(!t||t<=0||t>1e4)return L("Vui l\xf2ng nh\u1eadp s\u1ed1 Sao h\u1ee3p l\u1ec7 (1-10000)"),void setTimeout((()=>L("")),3e3);try{C(!0),L("");const e=_.trim()||"Admin t\u1ef1 c\u1ed9ng sao";await g(A.uid,t,e)?(M(`\u2705 \u0110\xe3 c\u1ed9ng ${t} sao th\xe0nh c\xf4ng!`),S(""),E(""),setTimeout((()=>M("")),5e3)):(L("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1ed9ng sao!"),setTimeout((()=>L("")),3e3))}catch(k){console.error("Error adding stars:",k),L("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1ed9ng sao!"),setTimeout((()=>L("")),3e3)}finally{C(!1)}},className:"space-y-3",children:[(0,At.jsx)("input",{type:"number",min:"1",max:"10000",value:T,onChange:e=>S(e.target.value),placeholder:"S\u1ed1 Sao c\u1ea7n c\u1ed9ng (1-10000)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm",required:!0}),(0,At.jsx)("input",{type:"text",value:_,onChange:e=>E(e.target.value),placeholder:"L\xfd do c\u1ed9ng Sao (t\xf9y ch\u1ecdn)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm"}),(0,At.jsx)("button",{type:"submit",disabled:j||!T,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:j?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang c\u1ed9ng..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(CI,{className:"h-4 w-4 mr-2"}),"C\u1ed9ng Sao"]})})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udca1 Admin c\xf3 th\u1ec3 t\u1ef1 c\u1ed9ng sao kh\xf4ng gi\u1edbi h\u1ea1n. Sao admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 \u0111\u1eb7c bi\u1ec7t."})]})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(oL,{className:"h-5 w-5 text-gray-400 mr-2"}),"Th\u1ed1ng k\xea Sao"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===y||void 0===y||null===(e=y.transactionsSummary)||void 0===e?void 0:e.totalEarned)||0}),(0,At.jsx)("div",{className:"text-sm text-blue-500",children:"T\u1ed5ng sao \u0111\xe3 nh\u1eadn"})]}),(0,At.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null===y||void 0===y||null===(r=y.transactionsSummary)||void 0===r?void 0:r.totalSpent)||0}),(0,At.jsx)("div",{className:"text-sm text-red-500",children:"T\u1ed5ng sao \u0111\xe3 d\xf9ng"})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===y||void 0===y?void 0:y.adminStars)||0}),(0,At.jsx)("div",{className:"text-sm text-green-500",children:"Admin Stars"})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:(null===y||void 0===y?void 0:y.stars)||0}),(0,At.jsx)("div",{className:"text-sm text-yellow-500",children:"Sao hi\u1ec7n t\u1ea1i"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[(0,At.jsx)(Nk,{className:"h-5 w-5 text-gray-400 mr-2"}),"Qu\u1ea3n l\xfd T\xe0i kho\u1ea3n"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-3 flex items-center",children:[(0,At.jsx)(Sk,{className:"h-4 w-4 text-gray-400 mr-2"}),"\u0110\u1ed5i m\u1eadt kh\u1ea9u"]}),U&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-1"}),U]}),O&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700 flex items-center",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-1"}),O]}),(0,At.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Be("change-password")},className:"space-y-3",children:[(0,At.jsx)("input",{type:"password",value:I.newPassword,onChange:e=>D((t=>({...t,newPassword:e.target.value}))),placeholder:"M\u1eadt kh\u1ea9u m\u1edbi",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),(0,At.jsx)("input",{type:"password",value:I.confirmPassword,onChange:e=>D((t=>({...t,confirmPassword:e.target.value}))),placeholder:"X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u m\u1edbi",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),(0,At.jsx)("button",{type:"submit",disabled:P||!I.newPassword||!I.confirmPassword,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u1ed5i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Sk,{className:"h-4 w-4 mr-2"}),"\u0110\u1ed5i m\u1eadt kh\u1ea9u"]})})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udca1 M\u1eadt kh\u1ea9u m\u1edbi ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"})]}),(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-3 flex items-center",children:[(0,At.jsx)(qM,{className:"h-4 w-4 text-gray-400 mr-2"}),"\u0110\u1ed5i t\xean hi\u1ec3n th\u1ecb"]}),G&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-1"}),G]}),W&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700 flex items-center",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-1"}),W]}),(0,At.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Be("change-displayname")},className:"space-y-3",children:[(0,At.jsx)("input",{type:"text",value:Q.newDisplayName,onChange:e=>z({newDisplayName:e.target.value}),placeholder:"T\xean hi\u1ec3n th\u1ecb m\u1edbi",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),(0,At.jsx)("button",{type:"submit",disabled:V||!Q.newDisplayName.trim(),className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:V?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u1ed5i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(qM,{className:"h-4 w-4 mr-2"}),"\u0110\u1ed5i t\xean hi\u1ec3n th\u1ecb"]})})]})]}),(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-gray-900 mb-3 flex items-center",children:[(0,At.jsx)(Ck,{className:"h-4 w-4 text-gray-400 mr-2"}),"\u0110\u1ed5i username"]}),ee&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-1"}),ee]}),ne&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700 flex items-center",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-1"}),ne]}),(0,At.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Be("change-username")},className:"space-y-3",children:[(0,At.jsx)("input",{type:"text",value:X.newUsername,onChange:e=>Y({newUsername:e.target.value}),placeholder:"Username m\u1edbi (3-20 k\xfd t\u1ef1)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",required:!0}),(0,At.jsx)("button",{type:"submit",disabled:J||!X.newUsername.trim(),className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:J?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u1ed5i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Ck,{className:"h-4 w-4 mr-2"}),"\u0110\u1ed5i username"]})})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\ud83d\udca1 Username ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a ch\u1eef c\xe1i, s\u1ed1 v\xe0 d\u1ea5u g\u1ea1ch d\u01b0\u1edbi"})]})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-red-400 mr-2"}),"Qu\u1ea3n l\xfd H\u1ec7 th\u1ed1ng"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 text-left",children:[(0,At.jsxs)("div",{className:"border border-orange-200 rounded-lg p-4 bg-orange-50",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-orange-900 mb-3 flex items-center",children:[(0,At.jsx)(rk,{className:"h-4 w-4 text-orange-500 mr-2"}),"H\u1ea1ng Th\xe0nh Vi\xean"]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{className:"text-sm text-orange-700 mb-4",children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"C\u1ea3nh b\xe1o:"})," H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd l\xe0m cho t\u1ea5t c\u1ea3 th\xe0nh vi\xean c\xf3 tier cao b\u1ecb h\u1ebft h\u1ea1n v\xe0 reset v\u1ec1 basic. Ch\u1ec9 s\u1eed d\u1ee5ng khi c\u1ea7n thi\u1ebft."]}),(0,At.jsxs)("button",{onClick:async()=>{try{Ne((e=>({...e,showModal:!0})));const e=await(async()=>{try{const e=new Date,t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","in",["standard","premium","master"])),n=await(0,Hb.GG)(t),r=[];n.docs.forEach((e=>{const t=e.data();var n;t.email&&"admin@example.com"!==t.email&&r.push({id:e.id,...t,membershipExpiry:(null===(n=t.membershipExpiry)||void 0===n?void 0:n.toDate())||new Date})}));const s=r.filter((t=>t.membershipExpiry<e)),i=r.filter((t=>t.membershipExpiry>=e));return{total:r.length,expired:s.length,active:i.length,users:r,byTier:{standard:r.filter((e=>"standard"===e.membershipTier)).length,premium:r.filter((e=>"premium"===e.membershipTier)).length,master:r.filter((e=>"master"===e.membershipTier)).length},expiredByTier:{standard:s.filter((e=>"standard"===e.membershipTier)).length,premium:s.filter((e=>"premium"===e.membershipTier)).length,master:s.filter((e=>"master"===e.membershipTier)).length}}}catch(k){return console.error("Error getting expire stats:",k),null}})();Ne((t=>({...t,stats:e})))}catch(k){console.error("Error opening expire modal:",k),L("\u274c C\xf3 l\u1ed7i khi t\u1ea3i th\u1ed1ng k\xea th\xe0nh vi\xean"),setTimeout((()=>L("")),3e3)}},className:"w-full inline-flex items-center justify-center px-4 py-2 border border-orange-300 text-sm font-medium rounded-md text-orange-700 bg-orange-100 hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,At.jsx)(zL,{className:"h-4 w-4 mr-2"}),"Reset H\u1ea1ng Th\xe0nh Vi\xean"]})]})]}),(0,At.jsxs)("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-purple-900 mb-3 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 text-purple-500 mr-2"}),"Sao Th\xe0nh Vi\xean"]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{className:"text-sm text-purple-700 mb-4",children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"C\u1ea3nh b\xe1o:"})," H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset t\u1ea5t c\u1ea3 sao c\u1ee7a th\xe0nh vi\xean v\u1ec1 20 (tr\u1eeb h\u1ebft v\xe0 ch\u1eeba l\u1ea1i 20). H\u1ea1ng th\xe0nh vi\xean s\u1ebd \u0111\u01b0\u1ee3c gi\u1eef nguy\xean. Admin stars s\u1ebd \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7. Ch\u1ec9 s\u1eed d\u1ee5ng khi c\u1ea7n thi\u1ebft."]}),(0,At.jsxs)("button",{onClick:async()=>{Ce((e=>({...e,showModal:!0,processing:!1,progress:null,result:null})));const e=await(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","in",["standard","premium","master","basic"])),t=await(0,Hb.GG)(e),n=[];return t.docs.forEach((e=>{const t=e.data();var r;t.email&&"admin@example.com"!==t.email&&n.push({id:e.id,...t,membershipExpiry:(null===(r=t.membershipExpiry)||void 0===r?void 0:r.toDate())||new Date})})),{total:n.length,byTier:{basic:n.filter((e=>"basic"===e.membershipTier)).length,standard:n.filter((e=>"standard"===e.membershipTier)).length,premium:n.filter((e=>"premium"===e.membershipTier)).length,master:n.filter((e=>"master"===e.membershipTier)).length},byStars:{low:n.filter((e=>(e.stars||0)<=20)).length,medium:n.filter((e=>(e.stars||0)>20&&(e.stars||0)<=100)).length,high:n.filter((e=>(e.stars||0)>100)).length},users:n}}catch(k){return console.error("\u274c Error getting reset stars stats:",k),null}})();Ce((t=>({...t,stats:e})))},className:"w-full inline-flex items-center justify-center px-4 py-2 border border-purple-300 text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 mr-2"}),"Reset Sao"]})]})]}),(0,At.jsxs)("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-blue-900 mb-3 flex items-center",children:[(0,At.jsx)(LM,{className:"h-4 w-4 text-blue-500 mr-2"}),"Xem B\xe0i Vi\u1ebft"]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{className:"text-sm text-blue-700 mb-4",children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"C\u1ea3nh b\xe1o:"})," H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset t\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem c\u1ee7a t\u1ea5t c\u1ea3 b\xe0i vi\u1ebft v\u1ec1 0. Ch\u1ec9 s\u1eed d\u1ee5ng khi c\u1ea7n thi\u1ebft \u0111\u1ec3 l\xe0m m\u1edbi th\u1ed1ng k\xea."]}),(0,At.jsxs)("button",{onClick:async()=>{try{Se((e=>({...e,showModal:!0,processing:!0})));const e=await Qe();Se((t=>({...t,stats:e,processing:!1})))}catch(k){console.error("Error opening reset article views modal:",k),Se((t=>({...t,processing:!1,result:{success:!1,message:"L\u1ed7i khi t\u1ea3i th\u1ed1ng k\xea: "+k.message}})))}},className:"w-full inline-flex items-center justify-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Reset L\u01b0\u1ee3t Xem B\xe0i Vi\u1ebft"]})]})]}),(0,At.jsxs)("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-red-900 mb-3 flex items-center",children:[(0,At.jsx)(PL,{className:"h-4 w-4 text-red-500 mr-2"}),"L\u01b0\u1ee3t Xem Trang"]}),ae&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-green-50 border border-green-200 rounded text-sm text-green-700 flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-1"}),ae]}),le&&(0,At.jsxs)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700 flex items-center",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-1"}),le]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{className:"text-sm text-red-700 mb-4",children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"C\u1ea3nh b\xe1o:"})," H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset t\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem trang v\u1ec1 0. D\u1eef li\u1ec7u s\u1ebd kh\xf4ng th\u1ec3 kh\xf4i ph\u1ee5c l\u1ea1i."]}),ue?(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[(0,At.jsx)("p",{className:"font-medium mb-2",children:"X\xe1c nh\u1eadn Reset:"}),(0,At.jsx)("p",{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n reset t\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem trang v\u1ec1 0?"})]}),(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("button",{onClick:Me,disabled:se,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:se?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang reset..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2"}),"X\xe1c nh\u1eadn Reset"]})}),(0,At.jsx)("button",{onClick:()=>de(!1),disabled:se,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"H\u1ee7y"})]})]}):(0,At.jsxs)("button",{onClick:()=>Be("reset-views"),className:"w-full inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2"}),"Reset L\u01b0\u1ee3t Xem Trang"]})]})]}),(0,At.jsxs)("div",{className:"border border-red-600 rounded-lg p-4 bg-red-50 md:col-span-4 col-span-1",children:[(0,At.jsxs)("h4",{className:"text-md font-medium text-red-900 mb-3 flex items-center",children:[(0,At.jsx)(jw,{className:"h-4 w-4 text-red-500 mr-2"}),"Reset H\u1ec7 Th\u1ed1ng"]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("p",{className:"text-sm text-red-700 mb-4",children:["\ud83d\udea8 ",(0,At.jsx)("strong",{children:"C\u1ea2NH B\xc1O NGUY HI\u1ec2M:"})," H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset to\xe0n b\u1ed9 h\u1ec7 th\u1ed1ng v\u1ec1 tr\u1ea1ng th\xe1i ban \u0111\u1ea7u. T\u1ea5t c\u1ea3 d\u1eef li\u1ec7u th\u1ed1ng k\xea, giao d\u1ecbch, \u0111i\u1ec3m, h\u1ea1ng th\xe0nh vi\xean s\u1ebd b\u1ecb x\xf3a.",(0,At.jsx)("strong",{children:"CH\u1ec8 S\u1eec D\u1ee4NG \u0110\u1ec2 TEST!"})]}),(0,At.jsxs)("button",{onClick:async()=>{try{const e=await(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),t=await(0,Hb.GG)(e);let n=0,r=0,s=0,i=0;const a={basic:0,standard:0,premium:0,master:0};t.forEach((e=>{const t=e.data();n++,t.starTransactions&&(r+=Object.keys(t.starTransactions).length),t.pagePoints&&(s+=t.pagePoints);const i=t.membershipTier||"basic";a[i]++}));const o=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"));return(await(0,Hb.GG)(o)).forEach((e=>{const t=e.data();t.viewCount&&(i+=t.viewCount)})),{totalUsers:n,totalStarTransactions:r,totalPagePoints:s,totalArticleViews:i,membershipTiers:a}}catch(k){return console.error("Error getting system reset stats:",k),null}})();Ee((t=>({...t,showModal:!0,stats:e,confirmationText:"",selectedOptions:{resetStarTransactions:!0,resetPagePoints:!0,resetMembershipTiers:!0,resetArticleViews:!0,resetUserStats:!0}})))}catch(k){console.error("Error opening system reset modal:",k)}},className:"w-full inline-flex items-center justify-center px-4 py-2 border border-red-600 text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,At.jsx)(jw,{className:"h-4 w-4 mr-2"}),"Reset To\xe0n B\u1ed9 H\u1ec7 Th\u1ed1ng"]})]})]})]})]}),(null===A||void 0===A?void 0:A.uid)&&(0,At.jsx)(wI,{userId:A.uid,userEmail:A.email}),we.showModal&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 text-left",children:(0,At.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full",children:(0,At.jsx)(rk,{className:"h-6 w-6 text-orange-600"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Reset h\u1ea1ng th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Xem th\u1ed1ng k\xea v\xe0 x\u1eed l\xfd th\xe0nh vi\xean h\u1ebft h\u1ea1n"})]})]}),(0,At.jsx)("button",{onClick:Le,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83c\udfaf Ch\u1ebf \u0111\u1ed9 x\u1eed l\xfd"}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"radio",name:"expireMode",value:"all",checked:"all"===we.mode,onChange:e=>Ne((t=>({...t,mode:e.target.value,selectedUsers:[]}))),className:"mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"T\u1ea5t c\u1ea3 th\xe0nh vi\xean"})]}),(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"radio",name:"expireMode",value:"selected",checked:"selected"===we.mode,onChange:e=>Ne((t=>({...t,mode:e.target.value}))),className:"mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"Ch\u1ecdn th\xe0nh vi\xean c\u1ee5 th\u1ec3"})]})]})]}),we.stats&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83d\udcca Th\u1ed1ng k\xea th\xe0nh vi\xean"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:we.stats.total}),(0,At.jsx)("div",{className:"text-sm text-blue-800",children:"T\u1ed5ng th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:we.stats.active}),(0,At.jsx)("div",{className:"text-sm text-green-800",children:"C\xf2n h\u1ea1n"})]}),(0,At.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:we.stats.expired}),(0,At.jsx)("div",{className:"text-sm text-red-800",children:"\u0110\xe3 h\u1ebft h\u1ea1n"})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:we.stats.total-we.stats.expired}),(0,At.jsx)("div",{className:"text-sm text-yellow-800",children:"S\u1ebd x\u1eed l\xfd"})]})]}),(0,At.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Standard"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:we.stats.byTier.standard}),(0,At.jsxs)("div",{className:"text-xs text-red-600",children:["(",we.stats.expiredByTier.standard," h\u1ebft h\u1ea1n)"]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Premium"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:we.stats.byTier.premium}),(0,At.jsxs)("div",{className:"text-xs text-red-600",children:["(",we.stats.expiredByTier.premium," h\u1ebft h\u1ea1n)"]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Master"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:we.stats.byTier.master}),(0,At.jsxs)("div",{className:"text-xs text-red-600",children:["(",we.stats.expiredByTier.master," h\u1ebft h\u1ea1n)"]})]})]})]}),"selected"===we.mode&&(null===(s=we.stats)||void 0===s?void 0:s.users)&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"\ud83d\udc65 Ch\u1ecdn th\xe0nh vi\xean"}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0110\xe3 ch\u1ecdn: ",we.selectedUsers.length,"/",we.stats.users.length]})]}),(0,At.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,At.jsx)("button",{onClick:()=>{var e;null!==(e=we.stats)&&void 0!==e&&e.users&&Ne((e=>({...e,selectedUsers:e.selectedUsers.length===we.stats.users.length?[]:we.stats.users.map((e=>e.id))})))},className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",children:we.selectedUsers.length===we.stats.users.length?"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3":"Ch\u1ecdn t\u1ea5t c\u1ea3"}),(0,At.jsx)("button",{onClick:()=>Pe("standard"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200",children:"Ch\u1ecdn Standard"}),(0,At.jsx)("button",{onClick:()=>Pe("premium"),className:"px-3 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full hover:bg-yellow-200",children:"Ch\u1ecdn Premium"}),(0,At.jsx)("button",{onClick:()=>Pe("master"),className:"px-3 py-1 text-xs bg-purple-100 text-purple-800 rounded-full hover:bg-purple-200",children:"Ch\u1ecdn Master"})]}),(0,At.jsx)("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:we.stats.users.map((e=>{const t=e.membershipExpiry<new Date,n=we.selectedUsers.includes(e.id);return(0,At.jsxs)("div",{className:"flex items-center p-3 border-b border-gray-100 hover:bg-gray-50 "+(n?"bg-blue-50":""),children:[(0,At.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{return t=e.id,void Ne((e=>({...e,selectedUsers:e.selectedUsers.includes(t)?e.selectedUsers.filter((e=>e!==t)):[...e.selectedUsers,t]})));var t},className:"mr-3 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.email}),(0,At.jsx)("div",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("standard"===e.membershipTier?"bg-gray-100 text-gray-800":"premium"===e.membershipTier?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.membershipTier})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.stars||0," \u2b50"]}),(0,At.jsx)("div",{className:"text-xs px-2 py-1 rounded-full "+(t?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:t?"H\u1ebft h\u1ea1n":"C\xf2n h\u1ea1n"})]})]}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["H\u1ebft h\u1ea1n: ",new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e.membershipExpiry)]})]})]},e.id)}))})]}),we.progress&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\u0110ang x\u1eed l\xfd batch ",we.progress.currentBatch,"/",we.progress.totalBatches]}),(0,At.jsxs)("span",{className:"text-sm text-gray-500",children:[we.progress.progress,"%"]})]}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-orange-600 h-2 rounded-full transition-all duration-300",style:{width:`${we.progress.progress}%`}})}),(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:["\u0110\xe3 x\u1eed l\xfd: ",we.progress.processed," | L\u1ed7i: ",we.progress.errors]})]}),we.result&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("div",{className:"p-4 rounded-lg "+(we.result.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[we.result.success?(0,At.jsx)(tk,{className:"h-5 w-5 text-green-500 mr-2"}):(0,At.jsx)(ky,{className:"h-5 w-5 text-red-500 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium "+(we.result.success?"text-green-800":"text-red-800"),children:we.result.success?"\u2705 Ho\xe0n th\xe0nh th\xe0nh c\xf4ng!":"\u274c C\xf3 l\u1ed7i x\u1ea3y ra"}),(0,At.jsxs)("div",{className:"text-sm mt-1 "+(we.result.success?"text-green-700":"text-red-700"),children:[(0,At.jsxs)("p",{children:["\u0110\xe3 x\u1eed l\xfd: ",we.result.processed," th\xe0nh vi\xean"]}),(0,At.jsxs)("p",{children:["L\u1ed7i: ",we.result.errors]}),(0,At.jsxs)("p",{children:["Th\u1eddi gian: ",we.result.duration,"s"]})]})]})]})})}),(0,At.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-yellow-800",children:"\u26a0\ufe0f C\u1ea3nh b\xe1o quan tr\u1ecdng"}),(0,At.jsxs)("div",{className:"text-sm text-yellow-700 mt-1",children:["all"===we.mode?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset T\u1ea4T C\u1ea2 th\xe0nh vi\xean c\xf3 tier cao v\u1ec1 basic"}),(0,At.jsxs)("p",{children:["\u2022 S\u1ebd x\u1eed l\xfd ",(null===(i=we.stats)||void 0===i?void 0:i.total)||0," th\xe0nh vi\xean"]})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("p",{children:["\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset ",we.selectedUsers.length," th\xe0nh vi\xean \u0111\xe3 ch\u1ecdn v\u1ec1 basic"]}),(0,At.jsx)("p",{children:"\u2022 Ch\u1ec9 nh\u1eefng th\xe0nh vi\xean \u0111\u01b0\u1ee3c ch\u1ecdn s\u1ebd b\u1ecb \u1ea3nh h\u01b0\u1edfng"})]}),(0,At.jsx)("p",{children:"\u2022 \u0110i\u1ec3m sao s\u1ebd \u0111\u01b0\u1ee3c t\xednh to\xe1n l\u1ea1i theo c\xf4ng th\u1ee9c"}),(0,At.jsx)("p",{children:"\u2022 \u0110i\u1ec3m admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 s\u1ebd kh\xf4ng b\u1ecb m\u1ea5t"}),(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y KH\xd4NG TH\u1ec2 ho\xe0n t\xe1c"})]})]})]})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:Le,disabled:we.processing,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"\u0110\xf3ng"}),!we.result&&(0,At.jsx)("button",{onClick:()=>{Be("expire-memberships")},disabled:we.processing||!we.stats||0===we.stats.total||"selected"===we.mode&&0===we.selectedUsers.length,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:we.processing?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline"}),"\u0110ang x\u1eed l\xfd..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(SI,{className:"h-4 w-4 mr-2 inline"}),"all"===we.mode?`X\u1eed l\xfd t\u1ea5t c\u1ea3 (${(null===(a=we.stats)||void 0===a?void 0:a.total)||0})`:`X\u1eed l\xfd \u0111\xe3 ch\u1ecdn (${we.selectedUsers.length})`]})})]})]})})}),je.showModal&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 text-left",children:(0,At.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full",children:(0,At.jsx)(Tw,{className:"h-6 w-6 text-purple-600"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Qu\u1ea3n l\xfd Reset Sao Th\xe0nh Vi\xean"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Reset sao c\u1ee7a t\u1ea5t c\u1ea3 th\xe0nh vi\xean v\u1ec1 20 (gi\u1eef nguy\xean h\u1ea1ng th\xe0nh vi\xean)"})]})]}),(0,At.jsx)("button",{onClick:Fe,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83c\udfaf Ch\u1ebf \u0111\u1ed9 x\u1eed l\xfd"}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"radio",name:"resetStarsMode",value:"all",checked:"all"===je.mode,onChange:e=>Ce((t=>({...t,mode:e.target.value,selectedUsers:[]}))),className:"mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"T\u1ea5t c\u1ea3 th\xe0nh vi\xean"})]}),(0,At.jsxs)("label",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"radio",name:"resetStarsMode",value:"selected",checked:"selected"===je.mode,onChange:e=>Ce((t=>({...t,mode:e.target.value}))),className:"mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium",children:"Ch\u1ecdn th\xe0nh vi\xean c\u1ee5 th\u1ec3"})]})]})]}),je.stats&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83d\udcca Th\u1ed1ng k\xea th\xe0nh vi\xean"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:je.stats.total}),(0,At.jsx)("div",{className:"text-sm text-blue-800",children:"T\u1ed5ng th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:je.stats.byStars.low}),(0,At.jsx)("div",{className:"text-sm text-green-800",children:"\u2264 20 sao"})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:je.stats.byStars.medium}),(0,At.jsx)("div",{className:"text-sm text-yellow-800",children:"21-100 sao"})]}),(0,At.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:je.stats.byStars.high}),(0,At.jsxs)("div",{className:"text-sm text-red-800",children:[">"," 100 sao"]})]})]}),(0,At.jsxs)("div",{className:"mt-4 grid grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Basic"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:je.stats.byTier.basic})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Standard"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:je.stats.byTier.standard})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Premium"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:je.stats.byTier.premium})]}),(0,At.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"Master"}),(0,At.jsx)("div",{className:"text-lg font-bold text-gray-900",children:je.stats.byTier.master})]})]})]}),"selected"===je.mode&&(null===(o=je.stats)||void 0===o?void 0:o.users)&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"\ud83d\udc65 Ch\u1ecdn th\xe0nh vi\xean"}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0110\xe3 ch\u1ecdn: ",je.selectedUsers.length,"/",je.stats.users.length]})]}),(0,At.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2",children:[(0,At.jsx)("button",{onClick:()=>{var e;if(null!==(e=je.stats)&&void 0!==e&&e.users){const e=je.stats.users.map((e=>e.id));Ce((t=>({...t,selectedUsers:t.selectedUsers.length===e.length?[]:e})))}},className:"px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",children:je.selectedUsers.length===je.stats.users.length?"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3":"Ch\u1ecdn t\u1ea5t c\u1ea3"}),(0,At.jsx)("button",{onClick:()=>He("basic"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200",children:"Ch\u1ecdn Basic"}),(0,At.jsx)("button",{onClick:()=>He("standard"),className:"px-3 py-1 text-xs bg-gray-100 text-gray-800 rounded-full hover:bg-gray-200",children:"Ch\u1ecdn Standard"}),(0,At.jsx)("button",{onClick:()=>He("premium"),className:"px-3 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full hover:bg-yellow-200",children:"Ch\u1ecdn Premium"}),(0,At.jsx)("button",{onClick:()=>He("master"),className:"px-3 py-1 text-xs bg-purple-100 text-purple-800 rounded-full hover:bg-purple-200",children:"Ch\u1ecdn Master"})]}),(0,At.jsx)("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:je.stats.users.map((e=>{const t=je.selectedUsers.includes(e.id);return(0,At.jsxs)("div",{className:"flex items-center p-3 border-b border-gray-100 hover:bg-gray-50 "+(t?"bg-blue-50":""),children:[(0,At.jsx)("input",{type:"checkbox",checked:t,onChange:()=>{return t=e.id,void Ce((e=>({...e,selectedUsers:e.selectedUsers.includes(t)?e.selectedUsers.filter((e=>e!==t)):[...e.selectedUsers,t]})));var t},className:"mr-3 h-4 w-4 text-blue-600 rounded focus:ring-blue-500"}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.email}),(0,At.jsx)("div",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("basic"===e.membershipTier||"standard"===e.membershipTier?"bg-gray-100 text-gray-800":"premium"===e.membershipTier?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.membershipTier})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:[e.stars||0," \u2b50"]}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:"\u2192 20 \u2b50 (gi\u1eef tier)"})]})]}),(0,At.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.adminStars>0&&`Admin stars: ${e.adminStars} (\u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7)`})]})]},e.id)}))})]}),je.progress&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\u0110ang x\u1eed l\xfd batch ",je.progress.currentBatch,"/",je.progress.totalBatches]}),(0,At.jsxs)("span",{className:"text-sm text-gray-500",children:[je.progress.progress,"%"]})]}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${je.progress.progress}%`}})}),(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:["\u0110\xe3 x\u1eed l\xfd: ",je.progress.processed," | L\u1ed7i: ",je.progress.errors]})]}),je.result&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("div",{className:"p-4 rounded-lg "+(je.result.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[je.result.success?(0,At.jsx)(tk,{className:"h-5 w-5 text-green-500 mr-2"}):(0,At.jsx)(ky,{className:"h-5 w-5 text-red-500 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium "+(je.result.success?"text-green-800":"text-red-800"),children:je.result.success?"\u2705 Ho\xe0n th\xe0nh th\xe0nh c\xf4ng!":"\u274c C\xf3 l\u1ed7i x\u1ea3y ra"}),(0,At.jsxs)("div",{className:"text-sm mt-1 "+(je.result.success?"text-green-700":"text-red-700"),children:[(0,At.jsxs)("p",{children:["\u0110\xe3 x\u1eed l\xfd: ",je.result.processed," th\xe0nh vi\xean"]}),(0,At.jsxs)("p",{children:["L\u1ed7i: ",je.result.errors]}),(0,At.jsxs)("p",{children:["Th\u1eddi gian: ",je.result.duration,"s"]})]})]})]})})}),(0,At.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-yellow-800",children:"\u26a0\ufe0f C\u1ea3nh b\xe1o quan tr\u1ecdng"}),(0,At.jsxs)("div",{className:"text-sm text-yellow-700 mt-1",children:["all"===je.mode?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset T\u1ea4T C\u1ea2 th\xe0nh vi\xean v\u1ec1 20 sao"}),(0,At.jsxs)("p",{children:["\u2022 S\u1ebd x\u1eed l\xfd ",(null===(l=je.stats)||void 0===l?void 0:l.total)||0," th\xe0nh vi\xean"]})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("p",{children:["\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset ",je.selectedUsers.length," th\xe0nh vi\xean \u0111\xe3 ch\u1ecdn v\u1ec1 20 sao"]}),(0,At.jsx)("p",{children:"\u2022 Ch\u1ec9 nh\u1eefng th\xe0nh vi\xean \u0111\u01b0\u1ee3c ch\u1ecdn s\u1ebd b\u1ecb \u1ea3nh h\u01b0\u1edfng"})]}),(0,At.jsx)("p",{children:"\u2022 H\u1ea1ng th\xe0nh vi\xean s\u1ebd \u0111\u01b0\u1ee3c gi\u1eef nguy\xean"}),(0,At.jsx)("p",{children:"\u2022 Admin stars s\u1ebd \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 v\xe0 c\u1ed9ng th\xeam v\xe0o 20 sao c\u01a1 b\u1ea3n"}),(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y KH\xd4NG TH\u1ec2 ho\xe0n t\xe1c"})]})]})]})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:Fe,disabled:je.processing,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"\u0110\xf3ng"}),!je.result&&(0,At.jsx)("button",{onClick:()=>{Ce((e=>({...e,processing:!0}))),(async()=>{try{const e=e=>{Ce((t=>({...t,progress:e})))},t=e=>{Ce((t=>({...t,processing:!1,progress:null,result:e})))};Ce((e=>({...e,processing:!0}))),"all"===je.mode?await Ue(e,t):await Re(je.selectedUsers,e,t)}catch(k){console.error("\u274c Error in handleResetStars:",k),Ce((t=>({...t,processing:!1,progress:null,result:{success:!1,processed:0,errors:1,duration:0,error:k.message}})))}})()},disabled:je.processing||!je.stats||0===je.stats.total||"selected"===je.mode&&0===je.selectedUsers.length,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:je.processing?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline"}),"\u0110ang x\u1eed l\xfd..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Tw,{className:"h-4 w-4 mr-2 inline"}),"all"===je.mode?`Reset t\u1ea5t c\u1ea3 (${(null===(c=je.stats)||void 0===c?void 0:c.total)||0})`:`Reset \u0111\xe3 ch\u1ecdn (${je.selectedUsers.length})`]})})]})]})})}),Te.showModal&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 text-left",children:(0,At.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full",children:(0,At.jsx)(LM,{className:"h-6 w-6 text-blue-600"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Qu\u1ea3n l\xfd Reset L\u01b0\u1ee3t Xem B\xe0i Vi\u1ebft"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Reset t\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem b\xe0i vi\u1ebft v\u1ec1 0"})]})]}),(0,At.jsx)("button",{onClick:ze,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),Te.processing&&!Te.stats&&(0,At.jsxs)("div",{className:"mb-6 text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110ang t\u1ea3i th\u1ed1ng k\xea..."})]}),Te.stats&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83d\udcca Th\u1ed1ng k\xea b\xe0i vi\u1ebft"}),(0,At.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:Te.stats.totalArticles}),(0,At.jsx)("div",{className:"text-sm text-blue-800",children:"T\u1ed5ng b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:Te.stats.articlesWithViews}),(0,At.jsx)("div",{className:"text-sm text-green-800",children:"C\xf3 l\u01b0\u1ee3t xem"})]}),(0,At.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Te.stats.totalViews.toLocaleString()}),(0,At.jsx)("div",{className:"text-sm text-red-800",children:"T\u1ed5ng l\u01b0\u1ee3t xem"})]})]}),Te.stats.articles.filter((e=>(e.views||0)>0)).length>0&&(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udcdd B\xe0i vi\u1ebft c\xf3 l\u01b0\u1ee3t xem cao:"}),(0,At.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg",children:Te.stats.articles.filter((e=>(e.views||0)>0)).sort(((e,t)=>(t.views||0)-(e.views||0))).slice(0,10).map((e=>{var t;return(0,At.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-gray-100",children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title||"Kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("div",{className:"text-sm text-gray-600",children:[(null===(t=e.views)||void 0===t?void 0:t.toLocaleString())||0," l\u01b0\u1ee3t xem"]}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:"\u2192 0"})]})]},e.id)}))})]})]}),Te.progress&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:Te.progress})}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:Te.progress.includes("Ho\xe0n th\xe0nh")?"100%":"50%"}})})]}),Te.result&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("div",{className:"p-4 rounded-lg "+(Te.result.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[Te.result.success?(0,At.jsx)(tk,{className:"h-5 w-5 text-green-500 mr-2"}):(0,At.jsx)(ky,{className:"h-5 w-5 text-red-500 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium "+(Te.result.success?"text-green-800":"text-red-800"),children:Te.result.success?"\u2705 Ho\xe0n th\xe0nh th\xe0nh c\xf4ng!":"\u274c C\xf3 l\u1ed7i x\u1ea3y ra"}),(0,At.jsx)("div",{className:"text-sm mt-1 "+(Te.result.success?"text-green-700":"text-red-700"),children:Te.result.message})]})]})})}),(0,At.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-yellow-800",children:"\u26a0\ufe0f C\u1ea3nh b\xe1o quan tr\u1ecdng"}),(0,At.jsxs)("div",{className:"text-sm text-yellow-700 mt-1",children:[(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset T\u1ea4T C\u1ea2 l\u01b0\u1ee3t xem b\xe0i vi\u1ebft v\u1ec1 0"}),(0,At.jsxs)("p",{children:["\u2022 S\u1ebd x\u1eed l\xfd ",(null===(u=Te.stats)||void 0===u?void 0:u.totalArticles)||0," b\xe0i vi\u1ebft"]}),(0,At.jsxs)("p",{children:["\u2022 T\u1ed5ng ",(null===(d=Te.stats)||void 0===d||null===(h=d.totalViews)||void 0===h?void 0:h.toLocaleString())||0," l\u01b0\u1ee3t xem s\u1ebd b\u1ecb reset"]}),(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y KH\xd4NG TH\u1ec2 ho\xe0n t\xe1c"}),(0,At.jsx)("p",{children:"\u2022 Ch\u1ec9 s\u1eed d\u1ee5ng khi c\u1ea7n thi\u1ebft \u0111\u1ec3 l\xe0m m\u1edbi th\u1ed1ng k\xea"})]})]})]})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:ze,disabled:Te.processing,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"\u0110\xf3ng"}),!Te.result&&(0,At.jsx)("button",{onClick:()=>{Se((e=>({...e,processing:!0}))),(async()=>{try{Se((e=>({...e,processing:!0,progress:"\u0110ang x\u1eed l\xfd..."})));const e=(await Qe()).articles;if(0===e.length)return void Se((e=>({...e,processing:!1,result:{success:!0,message:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft n\xe0o \u0111\u1ec3 reset"}})));await Ve(e),Se((t=>({...t,processing:!1,result:{success:!0,message:`\u2705 \u0110\xe3 reset l\u01b0\u1ee3t xem c\u1ee7a ${e.length} b\xe0i vi\u1ebft th\xe0nh c\xf4ng!`}})))}catch(k){console.error("Error resetting article views:",k),Se((t=>({...t,processing:!1,result:{success:!1,message:"\u274c L\u1ed7i khi reset l\u01b0\u1ee3t xem b\xe0i vi\u1ebft: "+k.message}})))}})()},disabled:Te.processing||!Te.stats||0===Te.stats.totalArticles,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:Te.processing?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline"}),"\u0110ang x\u1eed l\xfd..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2 inline"}),"Reset t\u1ea5t c\u1ea3 (",(null===(m=Te.stats)||void 0===m?void 0:m.totalArticles)||0," b\xe0i vi\u1ebft)"]})})]})]})})}),_e.showModal&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 text-left",children:(0,At.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-4xl shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full",children:(0,At.jsx)(jw,{className:"h-6 w-6 text-red-600"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Reset To\xe0n B\u1ed9 H\u1ec7 Th\u1ed1ng"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Reset t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u v\u1ec1 tr\u1ea1ng th\xe1i ban \u0111\u1ea7u"})]})]}),(0,At.jsx)("button",{onClick:Ke,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),_e.processing&&!_e.stats&&(0,At.jsxs)("div",{className:"mb-6 text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto mb-2"}),(0,At.jsx)("p",{className:"text-sm text-gray-600",children:"\u0110ang t\u1ea3i th\u1ed1ng k\xea..."})]}),_e.stats&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\ud83d\udcca Th\u1ed1ng k\xea h\u1ec7 th\u1ed1ng hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:_e.stats.totalUsers}),(0,At.jsx)("div",{className:"text-sm text-blue-800",children:"T\u1ed5ng ng\u01b0\u1eddi d\xf9ng"})]}),(0,At.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_e.stats.totalStarTransactions}),(0,At.jsx)("div",{className:"text-sm text-green-800",children:"Giao d\u1ecbch sao"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:_e.stats.totalPagePoints}),(0,At.jsx)("div",{className:"text-sm text-purple-800",children:"\u0110i\u1ec3m trang"})]}),(0,At.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:_e.stats.totalArticleViews}),(0,At.jsx)("div",{className:"text-sm text-orange-800",children:"L\u01b0\u1ee3t xem b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:Object.values(_e.stats.membershipTiers).reduce(((e,t)=>e+t),0)}),(0,At.jsx)("div",{className:"text-sm text-yellow-800",children:"H\u1ea1ng th\xe0nh vi\xean"})]})]}),(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"\ud83d\udc65 Chi ti\u1ebft h\u1ea1ng th\xe0nh vi\xean:"}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,At.jsxs)("div",{className:"bg-gray-50 p-2 rounded text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-gray-600",children:_e.stats.membershipTiers.basic}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"C\u01a1 B\u1ea3n"})]}),(0,At.jsxs)("div",{className:"bg-blue-50 p-2 rounded text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-blue-600",children:_e.stats.membershipTiers.standard}),(0,At.jsx)("div",{className:"text-xs text-blue-500",children:"Ti\xeau Chu\u1ea9n"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 p-2 rounded text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-purple-600",children:_e.stats.membershipTiers.premium}),(0,At.jsx)("div",{className:"text-xs text-purple-500",children:"Cao C\u1ea5p"})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 p-2 rounded text-center",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-yellow-600",children:_e.stats.membershipTiers.master}),(0,At.jsx)("div",{className:"text-xs text-yellow-500",children:"Master"})]})]})]})]}),_e.stats&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"\u2699\ufe0f T\xf9y ch\u1ecdn reset"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,At.jsxs)("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("input",{type:"checkbox",checked:_e.selectedOptions.resetStarTransactions,onChange:()=>We("resetStarTransactions"),className:"mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:"Reset giao d\u1ecbch sao"}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"X\xf3a t\u1ea5t c\u1ea3 l\u1ecbch s\u1eed giao d\u1ecbch sao"})]})]}),(0,At.jsxs)("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("input",{type:"checkbox",checked:_e.selectedOptions.resetPagePoints,onChange:()=>We("resetPagePoints"),className:"mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:"Reset \u0111i\u1ec3m trang"}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"\u0110\u01b0a \u0111i\u1ec3m trang v\u1ec1 0"})]})]}),(0,At.jsxs)("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("input",{type:"checkbox",checked:_e.selectedOptions.resetMembershipTiers,onChange:()=>We("resetMembershipTiers"),className:"mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:"Reset h\u1ea1ng th\xe0nh vi\xean"}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"\u0110\u01b0a t\u1ea5t c\u1ea3 v\u1ec1 h\u1ea1ng C\u01a1 B\u1ea3n"})]})]}),(0,At.jsxs)("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,At.jsx)("input",{type:"checkbox",checked:_e.selectedOptions.resetArticleViews,onChange:()=>We("resetArticleViews"),className:"mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:"Reset l\u01b0\u1ee3t xem b\xe0i vi\u1ebft"}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"\u0110\u01b0a l\u01b0\u1ee3t xem v\u1ec1 0"})]})]}),(0,At.jsxs)("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg md:col-span-2",children:[(0,At.jsx)("input",{type:"checkbox",checked:_e.selectedOptions.resetUserStats,onChange:()=>We("resetUserStats"),className:"mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:"Reset th\u1ed1ng k\xea ng\u01b0\u1eddi d\xf9ng"}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"X\xf3a t\u1ed5ng sao \u0111\xe3 ki\u1ebfm/ti\xeau, ho\u1ea1t \u0111\u1ed9ng cu\u1ed1i"})]})]})]})]}),_e.progress&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:_e.progress})}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-red-600 h-2 rounded-full transition-all duration-300",style:{width:_e.progress.includes("Ho\xe0n th\xe0nh")?"100%":"50%"}})})]}),_e.result&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("div",{className:"p-4 rounded-lg "+(_e.result.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-center",children:[_e.result.success?(0,At.jsx)(tk,{className:"h-5 w-5 text-green-500 mr-2"}):(0,At.jsx)(ky,{className:"h-5 w-5 text-red-500 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium "+(_e.result.success?"text-green-800":"text-red-800"),children:_e.result.success?"\u2705 Reset th\xe0nh c\xf4ng!":"\u274c C\xf3 l\u1ed7i x\u1ea3y ra"}),(0,At.jsx)("div",{className:"text-sm mt-1 "+(_e.result.success?"text-green-700":"text-red-700"),children:_e.result.message})]})]})})}),_e.stats&&!_e.result&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-red-500 mt-0.5 mr-2"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-red-800",children:"\ud83d\udea8 X\xc1C NH\u1eacN RESET H\u1ec6 TH\u1ed0NG"}),(0,At.jsxs)("div",{className:"text-sm text-red-700 mt-1",children:[(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd reset to\xe0n b\u1ed9 h\u1ec7 th\u1ed1ng v\u1ec1 tr\u1ea1ng th\xe1i ban \u0111\u1ea7u"}),(0,At.jsx)("p",{children:"\u2022 T\u1ea5t c\u1ea3 d\u1eef li\u1ec7u th\u1ed1ng k\xea, giao d\u1ecbch, \u0111i\u1ec3m s\u1ebd b\u1ecb x\xf3a"}),(0,At.jsx)("p",{children:"\u2022 T\u1ea5t c\u1ea3 ng\u01b0\u1eddi d\xf9ng s\u1ebd v\u1ec1 h\u1ea1ng C\u01a1 B\u1ea3n"}),(0,At.jsx)("p",{children:"\u2022 H\xe0nh \u0111\u1ed9ng n\xe0y KH\xd4NG TH\u1ec2 ho\xe0n t\xe1c"}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"CH\u1ec8 S\u1eec D\u1ee4NG \u0110\u1ec2 TEST!"})]})]})]})]}),(0,At.jsxs)("div",{className:"mt-4",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-red-800 mb-2",children:'Nh\u1eadp "RESET" \u0111\u1ec3 x\xe1c nh\u1eadn:'}),(0,At.jsx)("input",{type:"text",value:_e.confirmationText,onChange:e=>Ee((t=>({...t,confirmationText:e.target.value}))),placeholder:"Nh\u1eadp RESET",className:"w-full px-3 py-2 border border-red-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",disabled:_e.processing})]})]})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:Ke,disabled:_e.processing,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md disabled:opacity-50",children:"\u0110\xf3ng"}),!_e.result&&_e.stats&&(0,At.jsx)("button",{onClick:()=>{Be("system-reset")},disabled:_e.processing||"RESET"!==_e.confirmationText,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:_e.processing?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline"}),"\u0110ang reset..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(jw,{className:"h-4 w-4 mr-2 inline"}),"Reset H\u1ec7 Th\u1ed1ng"]})})]})]})})}),Ae&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 text-left",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:(0,At.jsx)(dt,{className:"h-6 w-6 text-red-600"})}),(0,At.jsxs)("div",{className:"mt-2 text-center",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"X\xe1c th\u1ef1c M\u1eadt kh\u1ea9u Admin"}),(0,At.jsxs)("div",{className:"mt-2 px-7 py-3",children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"system-reset"===pe?"\ud83d\udea8 X\xe1c th\u1ef1c m\u1eadt kh\u1ea9u \u0111\u1ec3 RESET TO\xc0N B\u1ed8 H\u1ec6 TH\u1ed0NG":"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u admin \u0111\u1ec3 th\u1ef1c hi\u1ec7n h\xe0nh \u0111\u1ed9ng n\xe0y"}),"system-reset"===pe&&(0,At.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:"\u26a0\ufe0f H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd x\xf3a to\xe0n b\u1ed9 d\u1eef li\u1ec7u h\u1ec7 th\u1ed1ng!"})]})]}),xe&&(0,At.jsx)("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:xe}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsx)("input",{type:"password",value:he,onChange:e=>me(e.target.value),placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u admin",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 text-sm",autoFocus:!0})}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,At.jsx)("button",{onClick:()=>{ge(!1),me(""),ve("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:async()=>{const e=await(async e=>{try{be(!0),ve("");const{signInWithEmailAndPassword:t,getAuth:r}=await Promise.resolve().then(n.bind(n,45)),s=r();return await t(s,A.email,e),!0}catch(k){return console.error("Password verification error:",k),"auth/wrong-password"===k.code?ve("M\u1eadt kh\u1ea9u admin kh\xf4ng \u0111\xfang"):"auth/too-many-requests"===k.code?ve("Qu\xe1 nhi\u1ec1u l\u1ea7n th\u1eed, vui l\xf2ng th\u1eed l\u1ea1i sau"):ve("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xe1c th\u1ef1c: "+k.message),!1}finally{be(!1)}})(he);if(e)switch(ge(!1),me(""),pe){case"reset-views":await Me();break;case"change-password":const e={preventDefault:()=>{}};await(async e=>{if(e.preventDefault(),I.newPassword!==I.confirmPassword)return H("M\u1eadt kh\u1ea9u m\u1edbi v\xe0 x\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp"),void setTimeout((()=>H("")),3e3);if(I.newPassword.length<6)return H("M\u1eadt kh\u1ea9u m\u1edbi ph\u1ea3i c\xf3 \xedt nh\u1ea5t 6 k\xfd t\u1ef1"),void setTimeout((()=>H("")),3e3);try{F(!0),H(""),R(""),await(0,nw.f3)(A,I.newPassword),R("\u2705 \u0110\u1ed5i m\u1eadt kh\u1ea9u th\xe0nh c\xf4ng!"),D({newPassword:"",confirmPassword:""}),setTimeout((()=>R("")),5e3)}catch(k){console.error("Error changing password:",k),"auth/requires-recent-login"===k.code?H("Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i \u0111\u1ec3 \u0111\u1ed5i m\u1eadt kh\u1ea9u"):"auth/weak-password"===k.code?H("M\u1eadt kh\u1ea9u qu\xe1 y\u1ebfu, vui l\xf2ng ch\u1ecdn m\u1eadt kh\u1ea9u m\u1ea1nh h\u01a1n"):H("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1ed5i m\u1eadt kh\u1ea9u: "+k.message),setTimeout((()=>H("")),5e3)}finally{F(!1)}})(e);break;case"change-displayname":const t={preventDefault:()=>{}};await(async e=>{if(e.preventDefault(),!Q.newDisplayName.trim())return $("Vui l\xf2ng nh\u1eadp t\xean hi\u1ec3n th\u1ecb m\u1edbi"),void setTimeout((()=>$("")),3e3);try{K(!0),$(""),q(""),await(0,nw.r7)(A,{displayName:Q.newDisplayName.trim()}),await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",A.uid),{displayName:Q.newDisplayName.trim(),updatedAt:new Date}),q("\u2705 \u0110\u1ed5i t\xean hi\u1ec3n th\u1ecb th\xe0nh c\xf4ng!"),z({newDisplayName:""}),setTimeout((()=>q("")),5e3)}catch(k){console.error("Error changing display name:",k),$("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1ed5i t\xean hi\u1ec3n th\u1ecb: "+k.message),setTimeout((()=>$("")),5e3)}finally{K(!1)}})(t);break;case"change-username":const n={preventDefault:()=>{}};await(async e=>{if(e.preventDefault(),!X.newUsername.trim())return re("Vui l\xf2ng nh\u1eadp username m\u1edbi"),void setTimeout((()=>re("")),3e3);const t=X.newUsername.trim().toLowerCase();if(!/^[a-zA-Z0-9_]{3,20}$/.test(X.newUsername.trim()))return re("Username ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a ch\u1eef c\xe1i, s\u1ed1 v\xe0 d\u1ea5u g\u1ea1ch d\u01b0\u1edbi (3-20 k\xfd t\u1ef1)"),void setTimeout((()=>re("")),3e3);if(null!==y&&void 0!==y&&y.username&&t===y.username.toLowerCase())return re("Username m\u1edbi ph\u1ea3i kh\xe1c username hi\u1ec7n t\u1ea1i"),void setTimeout((()=>re("")),3e3);try{if(Z(!0),re(""),te(""),(await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"usernames",t))).exists())return re("Username n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng"),void setTimeout((()=>re("")),3e3);const e=(0,Hb.wP)(Qb.db);null!==y&&void 0!==y&&y.username&&y.username!==t&&e.delete((0,Hb.doc)(Qb.db,"usernames",y.username.toLowerCase())),e.set((0,Hb.doc)(Qb.db,"usernames",t),{uid:A.uid,createdAt:new Date,email:A.email}),e.update((0,Hb.doc)(Qb.db,"users",A.uid),{username:t,updatedAt:new Date}),await e.commit(),te("\u2705 \u0110\u1ed5i username th\xe0nh c\xf4ng!"),Y({newUsername:""}),setTimeout((()=>te("")),5e3)}catch(k){console.error("Error changing username:",k),re("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi \u0111\u1ed5i username: "+k.message),setTimeout((()=>re("")),5e3)}finally{Z(!1)}})(n);break;case"expire-memberships":await Ie();break;case"system-reset":Ee((e=>({...e,showModal:!1}))),await Ge()}},disabled:ye||!he.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-md",children:ye?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline"}),"\u0110ang x\xe1c th\u1ef1c..."]}):"X\xe1c th\u1ef1c"})]})]})})})]})})},EI=()=>{const[e,n]=(0,t.useState)(!0),[r,s]=(0,t.useState)({totalUsers:0,totalPageViews:0,totalVisits:0,todayRegistrations:0,monthlyRegistrations:0,membershipStats:{basic:0,standard:0,premium:0,master:0},totalVipMembers:0}),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)([]),[m,A]=(0,t.useState)("week"),[g,p]=(0,t.useState)([]),[f,x]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)({show:!1,progress:0,processed:0,errors:0,currentBatch:0,totalBatches:0,duration:0}),[N,j]=(0,t.useState)(null);(0,t.useEffect)((()=>{C(),B()}),[m]),(0,t.useEffect)((()=>{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc")),t=(0,Hb.aQ)(e,(e=>{const t=e.docs.map((e=>{var t,n,r;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(n=e.data().lastLoginAt)||void 0===n?void 0:n.toDate(),membershipExpiry:null===(r=e.data().membershipExpiry)||void 0===r?void 0:r.toDate()}})),n={basic:t.filter((e=>!e.membershipTier||"basic"===e.membershipTier)).length,standard:t.filter((e=>"standard"===e.membershipTier)).length,premium:t.filter((e=>"premium"===e.membershipTier)).length,master:t.filter((e=>"master"===e.membershipTier)).length},r=n.standard+n.premium+n.master;s((e=>({...e,totalUsers:t.length,membershipStats:n,totalVipMembers:r}))),u(t.slice(0,5));const i=t.filter((e=>e.membershipTier&&"basic"!==e.membershipTier)).slice(0,5);h(i)}),(e=>{console.error("Error in dashboard real-time listener:",e)}));return()=>{t()}}),[]),(0,t.useEffect)((()=>{if(0===g.length)return;const e=setInterval((()=>{C()}),6e4);return()=>clearInterval(e)}),[g]);const C=async()=>{try{n(!0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc")),r=(await(0,Hb.GG)(t)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(n=e.data().lastLoginAt)||void 0===n?void 0:n.toDate()}})),i=(0,Hb.P)((0,Hb.rJ)(Qb.db,"pageVisits")),o=(await(0,Hb.GG)(i)).docs.map((e=>({id:e.id,...e.data()}))),c=new Date;c.setHours(0,0,0,0);const d=new Date(c.getFullYear(),c.getMonth(),1),A=r.filter((e=>e.createdAt&&e.createdAt>=c)).length,g=r.filter((e=>e.createdAt&&e.createdAt>=d)).length,f=o.reduce(((e,t)=>e+(t.count||0)),0);let x=0;try{const e=(0,Hb.doc)(Qb.db,"sessionVisits","total"),t=await(0,Hb.getDoc)(e);t.exists()&&(x=t.data().count||0)}catch(e){x=0}const v={basic:r.filter((e=>!e.membershipTier||"basic"===e.membershipTier)).length,standard:r.filter((e=>"standard"===e.membershipTier)).length,premium:r.filter((e=>"premium"===e.membershipTier)).length,master:r.filter((e=>"master"===e.membershipTier)).length},y=v.standard+v.premium+v.master;s({totalUsers:r.length,totalPageViews:f,totalVisits:x,todayRegistrations:A,monthlyRegistrations:g,membershipStats:v,totalVipMembers:y});const b={},w=[];if("week"===m){r.forEach((e=>{if(e.createdAt){const t=e.createdAt.toISOString().split("T")[0];b[t]=(b[t]||0)+1}}));for(let e=6;e>=0;e--){const t=new Date;t.setDate(t.getDate()-e);const n=t.toISOString().split("T")[0];w.push({period:n,label:T(n),count:b[n]||0})}}else if("month"===m){r.forEach((e=>{if(e.createdAt){const t=new Date(e.createdAt);t.setDate(t.getDate()-t.getDay());const n=t.toISOString().split("T")[0];b[n]=(b[n]||0)+1}}));for(let e=3;e>=0;e--){const t=new Date;t.setDate(t.getDate()-(t.getDay()+7*e));const n=t.toISOString().split("T")[0],r=new Date(t);r.setDate(r.getDate()+6),w.push({period:n,label:`${T(n)} - ${T(r.toISOString().split("T")[0])}`,count:b[n]||0})}}else if("year"===m){r.forEach((e=>{if(e.createdAt){const t=`${e.createdAt.getFullYear()}-${String(e.createdAt.getMonth()+1).padStart(2,"0")}`;b[t]=(b[t]||0)+1}}));for(let e=11;e>=0;e--){const t=new Date;t.setMonth(t.getMonth()-e);const n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;w.push({period:n,label:t.toLocaleDateString("vi-VN",{month:"2-digit",year:"numeric"}),count:b[n]||0})}}a(w);const N=["home","solar","calendar","lich-viet","battu","lakinh","luchao","kymon","profile"].map((e=>{const t=o.find((t=>(t.pageName||t.id)===e));return{name:e,count:t&&t.count||0}})).sort(((e,t)=>t.count-e.count));l(N),u(r.slice(0,5));const j=r.filter((e=>e.membershipTier&&"basic"!==e.membershipTier)).slice(0,5);h(j);const C=new Date,S=new Date(C.getTime()+6048e5),_=r.filter((t=>{if(!t.membershipExpiry||"basic"===t.membershipTier)return!1;let n;try{if(n=t.membershipExpiry.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry),isNaN(n.getTime()))return!1}catch(e){return!1}return n>=C&&n<=S})).map((e=>{const t=e.membershipExpiry.toDate?e.membershipExpiry.toDate():new Date(e.membershipExpiry),n=t.getTime()-C.getTime(),r=Math.ceil(n/864e5),s=Math.max(0,Math.min(r,365));return{...e,expiryDate:t,daysLeft:s}}));p(_)}catch(e){console.error("Error loading dashboard data:",e)}finally{n(!1)}},T=e=>new Date(e).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),S=e=>{const t={basic:{label:"Basic",icon:"\u2b50",color:"gray"},standard:{label:"Standard",icon:"\ud83c\udf1f",color:"blue"},premium:{label:"Premium",icon:"\ud83d\udc8e",color:"purple"},master:{label:"Master",icon:"\ud83d\udc51",color:"yellow"}};return t[e]||t.basic},_=e=>{const t={gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",purple:"bg-purple-100 text-purple-800",yellow:"bg-yellow-100 text-yellow-800"};return t[S(e).color]||t.gray},E=e=>{if(!e)return null;const t=new Date;if(t>e)return null;const n=e.getTime()-t.getTime(),r=Math.floor(n/864e5),s=Math.floor(n%864e5/36e5),i=Math.floor(n%36e5/6e4);return r>1?`${r} ng\xe0y, ${s} gi\u1edd`:1===r?`1 ng\xe0y, ${s} gi\u1edd ${i} ph\xfat`:s>0?`${s} gi\u1edd ${i} ph\xfat`:i>0?`${i} ph\xfat`:"S\u1eafp h\u1ebft h\u1ea1n"},B=async()=>{try{const e=await(async()=>{try{const e=await NI.getAllExpiredUsers();return{total:e.length,byTier:{standard:e.filter((e=>"standard"===e.membershipTier)).length,premium:e.filter((e=>"premium"===e.membershipTier)).length,master:e.filter((e=>"master"===e.membershipTier)).length},oldestExpiry:e.length>0?Math.min(...e.map((e=>e.membershipExpiry.getTime()))):null,newestExpiry:e.length>0?Math.max(...e.map((e=>e.membershipExpiry.getTime()))):null}}catch(e){return console.error("\u274c Error getting expired memberships stats:",e),null}})();j(e)}catch(e){console.error("\u274c Error loading expired stats:",e)}};return e?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."})]})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex flex-col gap-1 justify-start text-left",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,At.jsx)("p",{className:"text-gray-600",children:"T\u1ed5ng quan th\u1ed1ng k\xea h\u1ec7 th\u1ed1ng"})]}),(0,At.jsx)("div",{className:"relative",children:(0,At.jsxs)("button",{onClick:()=>x(!0),className:"relative p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Th\xe0nh vi\xean s\u1eafp h\u1ebft h\u1ea1n",children:[(0,At.jsx)(EL,{className:"h-6 w-6"}),g.length>0&&(0,At.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:g.length})]})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(LM,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"T\u1ed5ng l\u01b0\u1ee3t xem trang"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.totalPageViews.toLocaleString()})]})})]})})}),(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(oL,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"T\u1ed5ng l\u01b0\u1ee3t truy c\u1eadp"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.totalVisits.toLocaleString()})]})})]})})}),(0,At.jsx)("button",{onClick:()=>x(!0),className:"p-4 rounded-lg shadow hover:shadow-md transition-shadow text-left bg-red-50",children:(0,At.jsxs)("div",{className:"flex items-center flex-row-reverse gap-4 justify-between w-full",children:[(0,At.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\u1eafp h\u1ebft h\u1ea1n"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:g.length})]}),(0,At.jsx)(EL,{className:"h-8 w-8 text-orange-500"})]})}),(0,At.jsx)("button",{onClick:async()=>{y(!0),w((e=>({...e,show:!0,progress:0})));try{await(async(e,t)=>await NI.processAllExpiredMemberships(e,t))((e=>{w((t=>({...t,progress:e.progress,processed:e.processed,errors:e.errors,currentBatch:e.currentBatch,totalBatches:e.totalBatches})))}),(e=>{w((t=>({...t,duration:e.duration}))),e.success?alert(`\u2705 \u0110\xe3 x\u1eed l\xfd th\xe0nh c\xf4ng ${e.processed}/${e.totalFound} th\xe0nh vi\xean h\u1ebft h\u1ea1n trong ${e.duration}s!`):alert(`\u26a0\ufe0f Ho\xe0n th\xe0nh v\u1edbi ${e.processed} th\xe0nh c\xf4ng, ${e.errors} l\u1ed7i trong ${e.duration}s`),C(),B()}))}catch(e){console.error("\u274c Error in batch processing:",e),alert("\u274c C\xf3 l\u1ed7i x\u1ea3y ra: "+e.message)}finally{y(!1),setTimeout((()=>{w((e=>({...e,show:!1})))}),3e3)}},disabled:v,className:"p-4 rounded-lg shadow hover:shadow-md transition-shadow text-left disabled:opacity-50 bg-yellow-50",children:(0,At.jsxs)("div",{className:"flex items-center flex-row-reverse gap-4 justify-between",children:[(0,At.jsxs)("div",{className:"flex flex-1 flex-col w-full",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\ud83d\ude80 X\u1eed l\xfd h\u1ebft h\u1ea1n (T\u1ed1i \u01b0u)"}),(0,At.jsx)("p",{className:"text-xs text-gray-500",children:v?b.show?`${b.progress}% (${b.processed} users)`:"\u0110ang kh\u1edfi t\u1ea1o...":N?`${N.total} users c\u1ea7n x\u1eed l\xfd`:"Chuy\u1ec3n v\u1ec1 Basic"}),N&&!v&&(0,At.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["S:",N.byTier.standard," P:",N.byTier.premium," M:",N.byTier.master]})]}),v?(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}):(0,At.jsx)(jw,{className:"h-8 w-8 text-red-500"})]})}),(0,At.jsx)("button",{onClick:async()=>{if(window.confirm("\u26a0\ufe0f B\u1ea1n \u0111ang s\u1eed d\u1ee5ng ph\u01b0\u01a1ng ph\xe1p c\u0169 (kh\xf4ng t\u1ed1i \u01b0u). V\u1edbi nhi\u1ec1u users c\xf3 th\u1ec3 g\xe2y lag. Ti\u1ebfp t\u1ee5c?")){y(!0);try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),n=await(0,Hb.GG)(t);let r=0;const s=new Date;for(const i of n.docs){var e;const t=i.data(),n=i.id,a=t.membershipTier||"basic",o=(null===(e=t.membershipExpiry)||void 0===e?void 0:e.toDate())||null;if(!o||"basic"===a)continue;if(s>o){const e=t.stars||0,i=t.adminStars||0,o=20;let l=e-("standard"===a?200:"premium"===a?3e3:"master"===a?200:0)+o;l<o+i&&(l=o+i);const c={membershipTier:"basic",membershipExpiry:new Date(s.getTime()+2592e6),stars:l,updatedAt:(0,Hb.O5)()};await(0,Hb.BN)((0,Hb.doc)(Qb.db,"users",n),c,{merge:!0}),r++}}r>0?(alert(`\u2705 \u0110\xe3 x\u1eed l\xfd ${r} th\xe0nh vi\xean h\u1ebft h\u1ea1n v\xe0 chuy\u1ec3n v\u1ec1 Basic`),C()):alert("\u2139\ufe0f Kh\xf4ng c\xf3 th\xe0nh vi\xean n\xe0o h\u1ebft h\u1ea1n c\u1ea7n x\u1eed l\xfd")}catch(t){console.error("Error processing expired memberships:",t),alert("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi x\u1eed l\xfd th\xe0nh vi\xean h\u1ebft h\u1ea1n: "+t.message)}finally{y(!1)}}},disabled:v,className:"p-4 rounded-lg shadow hover:shadow-md transition-shadow text-left disabled:opacity-50 bg-gray-50 border-2 border-dashed border-gray-300",title:"Ph\u01b0\u01a1ng ph\xe1p c\u0169 - ch\u1ec9 d\xe0nh cho \xedt users",children:(0,At.jsxs)("div",{className:"flex items-center flex-row-reverse gap-4 justify-between",children:[(0,At.jsxs)("div",{className:"flex flex-1 flex-col w-full",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\ud83d\udd27 X\u1eed l\xfd h\u1ebft h\u1ea1n (C\u0169)"}),(0,At.jsx)("p",{className:"text-xs text-gray-500",children:"Ch\u1ec9 d\xf9ng cho <100 users"})]}),(0,At.jsx)(XC,{className:"h-8 w-8 text-gray-500"})]})})]}),b.show&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:(0,At.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ud83d\ude80 \u0110ang x\u1eed l\xfd Batch Expired Memberships"}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-4",children:(0,At.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${b.progress}%`}})}),(0,At.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Ti\u1ebfn \u0111\u1ed9:"})," ",b.progress,"%"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"\u0110\xe3 x\u1eed l\xfd:"})," ",b.processed," users"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"L\u1ed7i:"})," ",b.errors]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Batch:"})," ",b.currentBatch,"/",b.totalBatches]}),b.duration>0&&(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Th\u1eddi gian:"})," ",b.duration,"s"]})]}),(0,At.jsx)("div",{className:"mt-4",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"})})]})})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(zL,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"T\u1ed5ng th\xe0nh vi\xean"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.totalUsers})]})})]})})}),(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("div",{className:"h-6 w-6 text-gray-400 flex items-center justify-center text-lg",children:"\ud83d\udc51"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"T\u1ed5ng th\xe0nh vi\xean VIP"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.totalVipMembers})]})})]})})}),(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(ik,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"\u0110\u0103ng k\xfd h\xf4m nay"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.todayRegistrations})]})})]})})}),(0,At.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,At.jsx)("div",{className:"p-5",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(oL,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,At.jsxs)("dl",{children:[(0,At.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"\u0110\u0103ng k\xfd th\xe1ng n\xe0y"}),(0,At.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:r.monthlyRegistrations})]})})]})})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\u0110\u0103ng k\xfd th\xe0nh vi\xean"}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:()=>A("week"),className:"px-3 py-1 text-xs font-medium rounded-md transition-colors "+("week"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Tu\u1ea7n"}),(0,At.jsx)("button",{onClick:()=>A("month"),className:"px-3 py-1 text-xs font-medium rounded-md transition-colors "+("month"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Th\xe1ng"}),(0,At.jsx)("button",{onClick:()=>A("year"),className:"px-3 py-1 text-xs font-medium rounded-md transition-colors "+("year"===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"N\u0103m"})]})]}),(0,At.jsx)("div",{className:"space-y-3",children:i.map(((e,t)=>(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-24 text-xs text-gray-600 pr-2",children:e.label}),(0,At.jsx)("div",{className:"flex-1 mx-4",children:(0,At.jsx)("div",{className:"bg-gray-200 rounded-full h-3",children:(0,At.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${Math.max(e.count/Math.max(...i.map((e=>e.count)),1)*100,5)}%`}})})}),(0,At.jsx)("div",{className:"w-8 text-sm text-gray-900 text-right font-medium",children:e.count})]},t)))}),(0,At.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsxs)("span",{className:"text-gray-600",children:["T\u1ed5ng ","week"===m?"7 ng\xe0y":"month"===m?"4 tu\u1ea7n":"12 th\xe1ng"," qua:"]}),(0,At.jsxs)("span",{className:"font-medium text-gray-900",children:[i.reduce(((e,t)=>e+t.count),0)," th\xe0nh vi\xean"]})]})})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"L\u01b0\u1ee3t truy c\u1eadp theo trang"}),(0,At.jsx)("div",{className:"space-y-1",children:o.slice(0,9).map(((e,t)=>{return(0,At.jsxs)("div",{className:"flex items-center py-2 px-3 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,At.jsx)("div",{className:"w-24 text-sm font-medium text-gray-700 truncate",children:(n=e.name,{home:"Tin T\u1ee9c",solar:"H\u1ec7 M\u1eb7t Tr\u1eddi",calendar:"Xem Ng\xe0y","lich-viet":"L\u1ecbch Vi\u1ec7t",battu:"B\xe1t T\u1ef1",lakinh:"La Kinh",luchao:"L\u1ee5c H\xe0o",kymon:"K\u1ef3 M\xf4n",profile:"H\u1ed3 s\u01a1",news:"Tin T\u1ee9c (Danh m\u1ee5c)",login:"\u0110\u0103ng nh\u1eadp",register:"\u0110\u0103ng k\xfd"}[n]||n)}),(0,At.jsx)("div",{className:"flex-1 mx-4",children:(0,At.jsx)("div",{className:"bg-gray-200 rounded-full h-3",children:(0,At.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 "+(0===t?"bg-blue-600":1===t?"bg-green-600":2===t?"bg-purple-600":"bg-gray-500"),style:{width:`${Math.max(e.count/Math.max(...o.map((e=>e.count)),1)*100,5)}%`}})})}),(0,At.jsx)("div",{className:"w-16 text-sm font-semibold text-gray-900 text-right",children:e.count.toLocaleString()}),t<3&&(0,At.jsx)("div",{className:"ml-2",children:0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":"\ud83e\udd49"})]},t);var n}))})]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"T\u1ed5ng th\xe0nh vi\xean c\xe1c g\xf3i"}),(0,At.jsx)("div",{className:"space-y-4",children:[{tier:"basic",label:"Basic",count:r.membershipStats.basic},{tier:"standard",label:"Standard",count:r.membershipStats.standard},{tier:"premium",label:"Premium",count:r.membershipStats.premium},{tier:"master",label:"Master",count:r.membershipStats.master}].map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-lg mr-3",children:S(e.tier).icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"font-medium text-gray-900",children:e.label}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"basic"===e.tier?"Mi\u1ec5n ph\xed":"standard"===e.tier?"1 th\xe1ng":"premium"===e.tier?"1 n\u0103m":"V\u0129nh vi\u1ec5n"})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("span",{className:"text-lg font-bold text-gray-900",children:e.count}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"th\xe0nh vi\xean"})]})]},e.tier)))}),(0,At.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("span",{className:"font-medium text-gray-900",children:"T\u1ed5ng c\u1ed9ng:"}),(0,At.jsx)("span",{className:"text-xl font-bold text-blue-600",children:r.totalUsers})]})})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xe0nh vi\xean g\xf3i cao c\u1ea5p m\u1edbi nh\u1ea5t"}),(0,At.jsx)("div",{className:"space-y-3",children:d.length>0?d.map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("div",{className:"font-medium text-gray-900 truncate",children:e.displayName||e.email}),(0,At.jsx)("div",{className:"text-sm text-gray-500 truncate",children:e.email}),(0,At.jsx)("div",{className:"text-xs text-gray-400",children:e.createdAt?e.createdAt.toLocaleDateString("vi-VN"):"-"})]}),(0,At.jsx)("div",{className:"ml-4",children:(0,At.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(e.membershipTier)}`,children:[S(e.membershipTier).icon," ",S(e.membershipTier).label]})})]},e.id))):(0,At.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,At.jsx)("span",{className:"text-4xl mb-2 block",children:"\ud83c\udf81"}),"Ch\u01b0a c\xf3 th\xe0nh vi\xean g\xf3i cao c\u1ea5p"]})})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Th\xe0nh vi\xean g\u1ea7n \u0111\xe2y"})}),(0,At.jsx)("div",{className:"p-0",children:(0,At.jsx)(sI,{data:c,loading:e,hoverable:!1,className:"shadow-none border-0",columns:[{key:"email",header:"Email",render:e=>(0,At.jsx)("div",{className:"text-sm text-gray-900",children:e.email})},{key:"displayName",header:"T\xean",render:e=>(0,At.jsx)("div",{className:"text-sm text-gray-900",children:e.displayName||"-"})},{key:"createdAt",header:"Ng\xe0y \u0111\u0103ng k\xfd",render:e=>(0,At.jsx)(rI,{date:e.createdAt})},{key:"lastLoginAt",header:"\u0110\u0103ng nh\u1eadp cu\u1ed1i",render:e=>e.lastLoginAt?(0,At.jsx)(rI,{date:e.lastLoginAt}):(0,At.jsx)("div",{className:"text-sm text-gray-900",children:"Ch\u01b0a \u0111\u0103ng nh\u1eadp"})},{key:"status",header:"Tr\u1ea1ng th\xe1i",render:e=>{const t=e.emailVerified||!1,n=e.adminVerifiedEmail||!1;let r="Ch\u01b0a x\xe1c th\u1ef1c",s="yellow";return t&&n?(r="X\xe1c th\u1ef1c \u0111\u1ea7y \u0111\u1ee7",s="green"):t?(r="Firebase",s="green"):n&&(r="X\xe1c th\u1ef1c Admin",s="blue"),(0,At.jsx)(tI,{variant:s,children:r})}}],emptyState:(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)(zL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Ch\u01b0a c\xf3 th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Ch\u01b0a c\xf3 th\xe0nh vi\xean n\xe0o \u0111\u0103ng k\xfd."})]})})})]}),f&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:(0,At.jsxs)("div",{className:"mt-3",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Th\xe0nh vi\xean s\u1eafp h\u1ebft h\u1ea1n (",g.length,")"]})}),(0,At.jsx)("div",{className:"max-h-96 overflow-y-auto",children:g.length>0?(0,At.jsx)("div",{className:"space-y-3",children:g.map((e=>{return(0,At.jsxs)("div",{className:"flex md:flex-row flex-col gap-4 items-start md:items-center md:justify-between p-4 border border-gray-200 rounded-lg",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsx)("div",{className:"flex items-center space-x-3",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName||e.email}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,At.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(e.membershipTier)}`,children:[S(e.membershipTier).icon," ",S(e.membershipTier).label]}),(0,At.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+(e.daysLeft<=1?"bg-red-100 text-red-800":e.daysLeft<=3?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.daysLeft<=0?"H\u1ebft h\u1ea1n h\xf4m nay":E(e.expiryDate)||`C\xf2n ${e.daysLeft} ng\xe0y`})]}),(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[(0,At.jsxs)("div",{className:"font-medium",children:["H\u1ebft h\u1ea1n: ",(t=e.expiryDate,t?t.toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Kh\xf4ng x\xe1c \u0111\u1ecbnh")]}),(0,At.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:E(e.expiryDate)?`C\xf2n ch\xednh x\xe1c: ${E(e.expiryDate)}`:"\u0110\xe3 h\u1ebft h\u1ea1n"})]})]})})}),(0,At.jsx)("div",{className:"md:ml-4",children:(0,At.jsxs)("button",{onClick:()=>(async(e,t)=>{try{alert(`\u0110\xe3 g\u1eedi email nh\u1eafc nh\u1edf t\u1edbi ${t}`)}catch(n){console.error("L\u1ed7i g\u1eedi email:",n),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi email")}})(e.id,e.email,e.displayName||e.email,e.membershipTier,e.daysLeft),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,At.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"G\u1eedi nh\u1eafc nh\u1edf"]})})]},e.id);var t}))}):(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)(EL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Kh\xf4ng c\xf3 th\xe0nh vi\xean s\u1eafp h\u1ebft h\u1ea1n"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"T\u1ea5t c\u1ea3 th\xe0nh vi\xean VIP \u0111\u1ec1u c\xf2n th\u1eddi h\u1ea1n."})]})}),(0,At.jsx)("div",{className:"mt-4 flex justify-center",children:(0,At.jsx)("button",{onClick:()=>x(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"\u0110\xf3ng"})})]})})})]})})},BI=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[r,s]=(0,t.useState)(1),[i,a]=(0,t.useState)(n),o=(0,t.useMemo)((()=>{const t=e.length,n=Math.ceil(t/i),s=(r-1)*i,a=s+i;return{totalItems:t,totalPages:n,startIndex:s,endIndex:a,paginatedItems:e.slice(s,a),currentPage:r,itemsPerPage:i}}),[e,r,i]);return{...o,goToPage:e=>{e>=1&&e<=o.totalPages&&s(e)},handleItemsPerPageChange:e=>{a(e),s(1)},resetToFirstPage:()=>{s(1)}}};function MI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const kI=t.forwardRef(MI);function LI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const II=t.forwardRef(LI),DI=()=>{var e;ee();const[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)("createdAt"),[m,A]=(0,t.useState)("desc"),[g,p]=(0,t.useState)("all"),[f,x]=(0,t.useState)("all"),[v,y]=(0,t.useState)("all"),{toasts:b,showToast:w,removeToast:N}=uM(),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(null),[_,E]=(0,t.useState)(""),[B,M]=(0,t.useState)(!1),[k,L]=(0,t.useState)(""),I=BI(i,15);(0,t.useEffect)((()=>{D()}),[]),(0,t.useEffect)((()=>{P()}),[r,c,d,m,g,f,v]),(0,t.useEffect)((()=>{I.resetToFirstPage()}),[c,d,m,g,f,v]),(0,t.useEffect)((()=>{if(j&&""!==k){c!==k&&u(k)}}),[c,j,k]),(0,t.useEffect)((()=>{if(0===r.length)return;const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc"),(0,Hb.AB)(500)),t=(0,Hb.aQ)(e,(e=>{const t=[];e.docs.forEach((e=>{const n=e.data();var r,s,i;n.email!==rw&&t.push({id:e.id,...n,createdAt:null===(r=n.createdAt)||void 0===r?void 0:r.toDate(),lastLoginAt:null===(s=n.lastLoginAt)||void 0===s?void 0:s.toDate(),membershipExpiry:null===(i=n.membershipExpiry)||void 0===i?void 0:i.toDate()})}));const n=t.map((e=>{const t=r.find((t=>t.id===e.id));return{...e,profile:(null===t||void 0===t?void 0:t.profile)||{}}}));s(n)}),(e=>{console.error("Error in real-time listener:",e)}));return()=>{t()}}),[r.length>0]);const D=async()=>{const e=performance.now();try{l(!0);let e=[],r={};try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.AB)(1e3));e=(await(0,Hb.GG)(t)).docs.map((e=>{var t,n,r;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(n=e.data().lastLoginAt)||void 0===n?void 0:n.toDate(),membershipExpiry:null===(r=e.data().membershipExpiry)||void 0===r?void 0:r.toDate()}}))}catch(t){return void w("Kh\xf4ng th\u1ec3 t\u1ea3i danh s\xe1ch users. C\xf3 th\u1ec3 do permission.","warning")}try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"profiles"),(0,Hb.AB)(1e3));(await(0,Hb.GG)(e)).docs.forEach((e=>{const t=e.data();r[t.userId]={displayName:t.displayName,birthDate:t.birthDate}}))}catch(n){}const i=e.map((e=>{const t=r[e.id]||{};return{...e,profile:t}})).filter((e=>e.email!==rw));s(i);performance.now();0===i.length&&w("Kh\xf4ng c\xf3 d\u1eef li\u1ec7u users. Ki\u1ec3m tra Firestore rules ho\u1eb7c permissions.","warning")}catch(r){console.error("Error loading users:",r),w("L\u1ed7i khi t\u1ea3i danh s\xe1ch th\xe0nh vi\xean: "+r.message,"error")}finally{l(!1)}},P=()=>{let e=[...r];c&&(e=e.filter((e=>{var t,n,r,s;return(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.displayName)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.profile)||void 0===r||null===(s=r.displayName)||void 0===s?void 0:s.toLowerCase().includes(c.toLowerCase()))}))),"all"!==g&&(e=e.filter((e=>(e.membershipTier||"basic")===g))),"all"!==f&&(e=e.filter((e=>{const t=e.lastLoginAt,n=new Date,r=t?Math.floor((n-t)/864e5):null;switch(f){case"active":return t&&r<=7;case"inactive":return!t||r>30;case"recent":return t&&r<=1;case"never":return!t;default:return!0}}))),"all"!==v&&(e=e.filter((e=>{const t=e.createdAt,n=new Date,r=t?Math.floor((n-t)/864e5):0,s=e.starTransactions?Object.keys(e.starTransactions).length:0,i=r>0?s/r:0;switch(v){case"high":return i>5;case"medium":return i>1&&i<=5;case"low":return i<=1&&s>0;case"none":return 0===s;case"new":return r<=7;default:return!0}}))),e.sort(((e,t)=>{var n,r;let s,i;switch(d){case"email":s=e.email||"",i=t.email||"";break;case"displayName":s=e.displayName||(null===(n=e.profile)||void 0===n?void 0:n.displayName)||"",i=t.displayName||(null===(r=t.profile)||void 0===r?void 0:r.displayName)||"";break;case"createdAt":default:s=e.createdAt||new Date(0),i=t.createdAt||new Date(0);break;case"lastLoginAt":s=e.lastLoginAt||new Date(0),i=t.lastLoginAt||new Date(0);break;case"starTransactions":s=e.starTransactions?Object.keys(e.starTransactions).length:0,i=t.starTransactions?Object.keys(t.starTransactions).length:0;break;case"stars":s=e.stars||0,i=t.stars||0}return"asc"===m?s>i?1:-1:s<i?1:-1})),a(e)},F=()=>{C(!1),S(null),E(""),c!==k&&u(k)},U=async()=>{if(!T)return;const{id:e,email:t}=T;if(await(async e=>{try{const r=localStorage.getItem("adminEmail"),s=localStorage.getItem("adminFirebaseAuth");if(!s||"true"!==s||!r)return!1;const{signInWithEmailAndPassword:i}=await Promise.resolve().then(n.bind(n,45)),{auth:a}=await Promise.resolve().then(n.bind(n,469));try{return await i(a,r,e),!0}catch(t){return!1}}catch(r){return console.error("Error verifying admin password:",r),!1}})(_))try{M(!0),w("\ud83d\uddd1\ufe0f \u0110ang x\xf3a user...","info"),await(0,Hb.kd)((0,Hb.doc)(Qb.db,"users",e));try{await(0,Hb.kd)((0,Hb.doc)(Qb.db,"profiles",e))}catch(i){}try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users",e,"starTransactions"),(0,Hb.AB)(500)),n=await(0,Hb.GG)(t);if(n.size>0){const e=(0,Hb.wP)(Qb.db);n.docs.forEach((t=>{e.delete(t.ref)})),await e.commit()}}catch(a){}s(r.filter((t=>t.id!==e))),w("\u2705 \u0110\xe3 x\xf3a user kh\u1ecfi Firestore. \u26a0\ufe0f C\u1ea7n x\xf3a th\u1ee7 c\xf4ng kh\u1ecfi Authentication!","success"),setTimeout((()=>{alert(`\ud83d\udd27 H\xc0NH \u0110\u1ed8NG C\u1ea6N THI\u1ebeT:\n\n1. V\xe0o Firebase Console\n2. Authentication > Users\n3. T\xecm v\xe0 x\xf3a user: ${t}\n\nHo\u1eb7c user v\u1eabn c\xf3 th\u1ec3 \u0111\u0103ng nh\u1eadp \u0111\u01b0\u1ee3c!`)}),2e3)}catch(o){console.error("Error deleting user:",o),w("L\u1ed7i khi x\xf3a user: "+o.message,"error")}finally{M(!1),F()}else w("M\u1eadt kh\u1ea9u admin kh\xf4ng \u0111\xfang!","error")},R=e=>{const t={basic:{label:"Basic",icon:" ",color:"gray"},standard:{label:"Standard",icon:" ",color:"blue"},premium:{label:"Premium",icon:" ",color:"purple"},master:{label:"Master",icon:"\ud83d\udc51",color:"yellow"}};return t[e]||t.basic};return o?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i danh s\xe1ch th\xe0nh vi\xean..."})]})})}):(0,At.jsxs)(WL,{children:[(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Danh s\xe1ch t\u1ea5t c\u1ea3 th\xe0nh vi\xean \u0111\xe3 \u0111\u0103ng k\xfd"})]}),(0,At.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center gap-4",children:[(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["T\u1ed5ng: ",i.length," th\xe0nh vi\xean"]}),(0,At.jsx)("button",{onClick:async()=>{try{l(!0),await D(),w("\u0110\xe3 c\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1edbi nh\u1ea5t","success")}catch(e){console.error("Error refreshing data:",e),w("L\u1ed7i khi c\u1eadp nh\u1eadt d\u1eef li\u1ec7u","error")}},className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",disabled:o,children:"\ud83d\udd04 L\xe0m m\u1edbi"})]})]}),(0,At.jsx)(gI,{users:r,filteredUsers:i}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md  bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:m,onChange:e=>A(e.target.value),children:[(0,At.jsx)("option",{value:"desc",children:"M\u1edbi nh\u1ea5t"}),(0,At.jsx)("option",{value:"asc",children:"C\u0169 nh\u1ea5t"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:g,onChange:e=>p(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 g\xf3i"}),(0,At.jsx)("option",{value:"basic",children:"Basic"}),(0,At.jsx)("option",{value:"standard",children:"Standard"}),(0,At.jsx)("option",{value:"premium",children:"Premium"}),(0,At.jsx)("option",{value:"master",children:"Master"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md  bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:d,onChange:e=>h(e.target.value),children:[(0,At.jsx)("option",{value:"createdAt",children:"Ng\xe0y \u0111\u0103ng k\xfd"}),(0,At.jsx)("option",{value:"email",children:"Email"}),(0,At.jsx)("option",{value:"displayName",children:"T\xean hi\u1ec3n th\u1ecb"}),(0,At.jsx)("option",{value:"lastLoginAt",children:"L\u1ea7n \u0111\u0103ng nh\u1eadp cu\u1ed1i"}),(0,At.jsx)("option",{value:"starTransactions",children:"S\u1ed1 l\u01b0\u1ee3ng Star Transactions"}),(0,At.jsx)("option",{value:"stars",children:"S\u1ed1 sao hi\u1ec7n t\u1ea1i"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:f,onChange:e=>x(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 ho\u1ea1t \u0111\u1ed9ng"}),(0,At.jsx)("option",{value:"active",children:"Ho\u1ea1t \u0111\u1ed9ng (\u22647 ng\xe0y)"}),(0,At.jsx)("option",{value:"recent",children:"G\u1ea7n \u0111\xe2y (\u22641 ng\xe0y)"}),(0,At.jsx)("option",{value:"inactive",children:"Kh\xf4ng ho\u1ea1t \u0111\u1ed9ng (>30 ng\xe0y)"}),(0,At.jsx)("option",{value:"never",children:"Ch\u01b0a \u0111\u0103ng nh\u1eadp"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:v,onChange:e=>y(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 s\u1eed d\u1ee5ng"}),(0,At.jsx)("option",{value:"high",children:"S\u1eed d\u1ee5ng cao (>5/ng\xe0y)"}),(0,At.jsx)("option",{value:"medium",children:"S\u1eed d\u1ee5ng trung b\xecnh (1-5/ng\xe0y)"}),(0,At.jsx)("option",{value:"low",children:"S\u1eed d\u1ee5ng th\u1ea5p (<1/ng\xe0y)"}),(0,At.jsx)("option",{value:"none",children:"Ch\u01b0a s\u1eed d\u1ee5ng"}),(0,At.jsx)("option",{value:"new",children:"Th\xe0nh vi\xean m\u1edbi (\u22647 ng\xe0y)"})]})})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 gap-4 mt-2",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,At.jsx)(kI,{className:"h-5 w-5 text-gray-400"})}),(0,At.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm theo email ho\u1eb7c t\xean...",className:"block text-sm w-full pl-10 pr-3 py-2 h-[30px] border border-gray-300 rounded-md  bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>{j||u(e.target.value)},onFocus:e=>{j&&e.target.blur()}})]})})]}),(0,At.jsx)(sI,{data:I.paginatedItems,loading:o,tableId:"users-list",showColumnToggle:!0,columns:[{key:"user",header:"Th\xe0nh vi\xean",render:e=>{var t,n;return(0,At.jsx)(nI,{name:(null===(t=e.profile)||void 0===t?void 0:t.displayName)||e.displayName||"Ch\u01b0a c\xf3 t\xean",subtitle:(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("span",{className:"cursor-pointer hover:text-blue-600 transition-colors",title:"Click \u0111\u1ec3 copy User ID",onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(e.id),alert("\u0110\xe3 copy User ID!")},children:["ID: ",e.id.substring(0,8),"..."]}),(0,At.jsx)("div",{className:"text-xs text-gray-500",children:e.displayName||(null===(n=e.profile)||void 0===n?void 0:n.displayName)||"Ch\u01b0a c\xf3 t\xean"})]}),icon:Ck,tier:e.membershipTier})}},{key:"contact",header:"Th\xf4ng tin li\xean h\u1ec7",render:e=>{var t;return(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"text-sm text-gray-900 flex items-center",children:[(0,At.jsx)(EM,{className:"h-4 w-4 mr-2 text-gray-400"}),e.email]}),(null===(t=e.profile)||void 0===t?void 0:t.birthDate)&&(0,At.jsxs)("div",{className:"text-sm text-gray-500 flex items-center mt-1",children:[(0,At.jsx)(nT,{className:"h-4 w-4 mr-2 text-gray-400"}),"Sinh: ",e.profile.birthDate]})]})}},{key:"membership",header:"H\u1ea1ng th\xe0nh vi\xean",render:e=>{const t=e.membershipTier||"basic",n=R(t),r=e.membershipExpiry,s=()=>!!r&&new Date>r;return(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)(tI,{variant:n.color,children:[n.icon," ",n.label]}),r&&"basic"!==t&&(0,At.jsxs)("div",{className:"text-xs",children:[(0,At.jsx)("div",{className:"font-medium "+(s()?"text-red-600":"text-gray-600"),children:s()?"H\u1ebft h\u1ea1n":(()=>{if(!r)return null;if(s())return"H\u1ebft h\u1ea1n";const e=r.getTime()-(new Date).getTime(),t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5);return t>1?`C\xf2n ${t} ng\xe0y, ${n} gi\u1edd`:1===t?`C\xf2n 1 ng\xe0y, ${n} gi\u1edd`:n>0?`C\xf2n ${n} gi\u1edd`:"S\u1eafp h\u1ebft h\u1ea1n"})()}),(0,At.jsx)("div",{className:"text-gray-500",children:r?r.toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):null})]}),(!r||"basic"===t)&&(0,At.jsx)("div",{className:"text-xs text-gray-500",children:"Kh\xf4ng gi\u1edbi h\u1ea1n"})]})}},{key:"stars",header:"S\u1ed1 sao hi\u1ec7n t\u1ea1i",render:e=>{const t=e.stars||0;let n="text-gray-900";return t>=1e3?n="text-red-600 font-bold":t>=500?n="text-orange-600 font-semibold":t>=100&&(n="text-blue-600"),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)("div",{className:`text-xs flex items-center justify-center ${n}`,children:[(0,At.jsx)("span",{className:"text-yellow-500 mr-1",children:"\u2b50"}),t.toLocaleString()]}),0===t&&(0,At.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Ch\u01b0a c\xf3 sao"})]})}},{key:"starTransactions",header:"Giao d\u1ecbch sao",render:e=>{const t=e.starTransactions?Object.keys(e.starTransactions).length:0;let n="gray";return t>200?n="red":t>100?n="yellow":t>50&&(n="blue"),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsxs)(tI,{variant:n,children:[t," giao d\u1ecbch"]}),t>100&&(0,At.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"\u26a0\ufe0f C\u1ea7n migration"}),0===t&&(0,At.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Ch\u01b0a c\xf3 giao d\u1ecbch"})]})}},{key:"createdAt",header:"Ng\xe0y \u0111\u0103ng k\xfd",render:e=>(0,At.jsx)(rI,{date:e.createdAt})},{key:"usage",header:"S\u1eed d\u1ee5ng",render:e=>{const t=e.createdAt,n=new Date,r=t?Math.floor((n-t)/864e5):0,s=e.starTransactions?Object.keys(e.starTransactions).length:0,i=r>0?(s/r).toFixed(1):0;let a="M\u1edbi",o="blue";return 0===r?(a="H\xf4m nay",o="green"):r<=7?(a="Tu\u1ea7n \u0111\u1ea7u",o="green"):r<=30?(a="Th\xe1ng \u0111\u1ea7u",o="yellow"):i>5?(a="S\u1eed d\u1ee5ng cao",o="red"):i>1?(a="S\u1eed d\u1ee5ng trung b\xecnh",o="orange"):(a="S\u1eed d\u1ee5ng th\u1ea5p",o="gray"),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(tI,{variant:o,children:a}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[r," ng\xe0y"]}),i>0&&(0,At.jsxs)("div",{className:"text-xs text-gray-400",children:[i,"/ng\xe0y"]})]})}},{key:"lastLoginAt",header:"\u0110\u0103ng nh\u1eadp cu\u1ed1i",render:e=>e.lastLoginAt?(0,At.jsx)(rI,{date:e.lastLoginAt}):(0,At.jsx)("div",{className:"text-sm text-gray-900",children:"Ch\u01b0a \u0111\u0103ng nh\u1eadp"})},{key:"activity",header:"Ho\u1ea1t \u0111\u1ed9ng",render:e=>{const t=e.lastLoginAt,n=new Date,r=t?Math.floor((n-t)/864e5):null;let s="Kh\xf4ng x\xe1c \u0111\u1ecbnh",i="gray";return t?0===r?(s="H\xf4m nay",i="green"):r<=7?(s=`${r} ng\xe0y tr\u01b0\u1edbc`,i="green"):r<=30?(s=`${r} ng\xe0y tr\u01b0\u1edbc`,i="yellow"):(s=`${r} ng\xe0y tr\u01b0\u1edbc`,i="red"):(s="Ch\u01b0a \u0111\u0103ng nh\u1eadp",i="red"),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)(tI,{variant:i,children:s}),t&&(0,At.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:t.toLocaleDateString("vi-VN")})]})}},{key:"status",header:"Tr\u1ea1ng th\xe1i",render:e=>{const t=e.emailVerified||!1,n=e.adminVerifiedEmail||!1;let r="Ch\u01b0a x\xe1c th\u1ef1c",s="yellow";return t&&n?(r="X\xe1c th\u1ef1c \u0111\u1ea7y \u0111\u1ee7",s="green"):t?(r="X\xe1c th\u1ef1c Email",s="green"):n&&(r="X\xe1c th\u1ef1c Admin",s="blue"),(0,At.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,At.jsx)(tI,{variant:s,className:"justify-center",children:r}),(0,At.jsx)(tI,{variant:e.disabled?"red":"green",className:"justify-center",children:e.disabled?"B\u1ecb kh\xf3a":"Ho\u1ea1t \u0111\u1ed9ng"})]})}}],rowActions:(e,t)=>(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)(nt,{to:`/admin/users/${e.id}`,className:"block px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center",onClick:t,children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem chi ti\u1ebft"]}),(0,At.jsxs)(nt,{to:`/admin/users/${e.id}/edit`,className:"block px-4 py-2 text-sm text-green-600 hover:bg-green-50 flex items-center",onClick:t,children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-2"}),"Ch\u1ec9nh s\u1eeda"]}),(0,At.jsxs)("button",{onClick:()=>{(async(e,t)=>{try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",e),{disabled:!t}),s(r.map((n=>n.id===e?{...n,disabled:!t}:n))),w("\u0110\xe3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i th\xe0nh vi\xean","success")}catch(n){console.error("Error updating user status:",n),w("L\u1ed7i khi c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i","error")}})(e.id,e.disabled),t()},className:"block w-full text-left px-4 py-2 text-sm flex items-center "+(e.disabled?"text-green-600 hover:bg-green-50":"text-red-600 hover:bg-red-50"),children:[(0,At.jsx)(jT,{className:"h-4 w-4 mr-2"}),e.disabled?"M\u1edf kh\xf3a":"Kh\xf3a t\xe0i kho\u1ea3n"]}),(0,At.jsxs)("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),(e=>{const t=c;L(t),S(e),E(""),C(!0),setTimeout((()=>{c!==t&&u(t)}),50)})(e),t()},className:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-100 flex items-center border-t border-gray-100",children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2"}),"X\xf3a v\u0129nh vi\u1ec5n"]})]}),emptyState:(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)(Ck,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Kh\xf4ng c\xf3 th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c?"Kh\xf4ng t\xecm th\u1ea5y th\xe0nh vi\xean ph\xf9 h\u1ee3p v\u1edbi t\u1eeb kh\xf3a t\xecm ki\u1ebfm.":"Ch\u01b0a c\xf3 th\xe0nh vi\xean n\xe0o \u0111\u0103ng k\xfd."})]})}),(0,At.jsx)(iI,{currentPage:I.currentPage,totalPages:I.totalPages,totalItems:I.totalItems,itemsPerPage:I.itemsPerPage,onPageChange:I.goToPage,onPrevious:I.goToPrevious,onNext:I.goToNext,showingFrom:I.showingFrom,showingTo:I.showingTo})]}),(0,At.jsx)(cM,{toasts:b,removeToast:N}),j&&T&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:e=>{e.target===e.currentTarget&&F()},children:(0,At.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white",onClick:e=>{e.stopPropagation()},children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\u26a0\ufe0f X\xe1c th\u1ef1c x\xf3a user"}),(0,At.jsx)("button",{onClick:F,className:"text-gray-400 hover:text-gray-600",disabled:B,children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"text-sm text-red-800",children:[(0,At.jsx)("div",{className:"font-medium mb-2",children:"User s\u1ebd b\u1ecb x\xf3a v\u0129nh vi\u1ec5n:"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"Email:"})," ",T.email]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"ID:"})," ",T.id]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("strong",{children:"T\xean:"})," ",T.displayName||(null===(e=T.profile)||void 0===e?void 0:e.displayName)||"Ch\u01b0a c\xf3"]})]})}),(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,At.jsx)("div",{className:"font-medium mb-2",children:"\u26a0\ufe0f H\xe0nh \u0111\u1ed9ng n\xe0y s\u1ebd:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,At.jsx)("li",{children:"X\xf3a Authentication Record"}),(0,At.jsx)("li",{children:"X\xf3a Firestore User Document"}),(0,At.jsx)("li",{children:"X\xf3a Profile Data"}),(0,At.jsx)("li",{children:"X\xf3a Star Transactions"})]}),(0,At.jsx)("div",{className:"font-medium mt-2 text-red-600",children:"KH\xd4NG TH\u1ec2 HO\xc0N T\xc1C!"})]})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nh\u1eadp m\u1eadt kh\u1ea9u x\xe1c th\u1ef1c:"}),(0,At.jsx)("input",{type:"password",value:_,onChange:e=>E(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500",placeholder:"M\u1eadt kh\u1ea9u \u0111\u0103ng nh\u1eadp admin",disabled:B,onKeyPress:e=>{"Enter"===e.key&&_&&U()},autoFocus:!0})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[(0,At.jsx)("button",{onClick:F,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",disabled:B,children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:U,disabled:!_||B,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:B?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang x\xf3a..."]}):"X\xf3a v\u0129nh vi\u1ec5n"})]})]})})]})},PI=e=>{var n,r,s,i,a;let{userId:o,userEmail:l,onPermissionsUpdate:c}=e;const{handleMembershipUpgrade:u}=Aw(),[d,h]=(0,t.useState)({}),[m,A]=(0,t.useState)("basic"),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(!0),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(""),[N,j]=(0,t.useState)(""),[C,T]=(0,t.useState)([]),S=[{key:"calendar",label:"Xem ng\xe0y",description:"Xem l\u1ecbch \xe2m, ti\u1ebft kh\xed v\xe0 th\xf4ng tin ng\xe0y th\xe1ng"},{key:"solar",label:"H\u1ec7 M\u1eb7t Tr\u1eddi",description:"Truy c\u1eadp h\u1ec7 th\u1ed1ng Solar System"},{key:"battu",label:"B\xe1t T\u1ef1",description:"Truy c\u1eadp t\xednh n\u0103ng B\xe1t T\u1ef1 v\xe0 t\u1eed vi"},{key:"luchao",label:"L\u1ee5c H\xe0o",description:"Truy c\u1eadp t\xednh n\u0103ng L\u1ee5c H\xe0o v\xe0 kinh d\u1ecbch"},{key:"lakinh",label:"La Kinh",description:"S\u1eed d\u1ee5ng t\xednh n\u0103ng La Kinh v\xe0 phong th\u1ee7y"},{key:"kymon",label:"K\u1ef3 M\xf4n",description:"Truy c\u1eadp t\xednh n\u0103ng K\u1ef3 M\xf4n \u0111\u1ed9n gi\xe1p"},{key:"profile",label:"H\u1ed3 s\u01a1 c\xe1 nh\xe2n",description:"Ch\u1ec9nh s\u1eeda v\xe0 qu\u1ea3n l\xfd th\xf4ng tin c\xe1 nh\xe2n"}],_={home:!0,calendar:!0,solar:!0,battu:!0,luchao:!0,lakinh:!1,kymon:!1,profile:!0},E={};S.forEach((e=>{E[e.key]=!0})),(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","membershipPackages"));if(e.exists()){const t=e.data().packages,n=["basic","standard","premium","master","sponsor"].map((e=>{var n,r,s,i,a,o;return{key:e,label:(null===(n=t[e])||void 0===n?void 0:n.name)||e,color:(null===(r=t[e])||void 0===r?void 0:r.color)||"gray",description:(null===(s=t[e])||void 0===s?void 0:s.description)||"",duration:(null===(i=t[e])||void 0===i?void 0:i.duration)||30,maxStars:(null===(a=t[e])||void 0===a?void 0:a.maxStars)||20,resetPeriod:(null===(o=t[e])||void 0===o?void 0:o.resetPeriod)||"monthly"}}));T(n)}else T([{key:"basic",label:"Basic",color:"gray",description:"G\xf3i c\u01a1 b\u1ea3n - 1 th\xe1ng, 20 sao, reset h\xe0ng th\xe1ng",duration:30,maxStars:20,resetPeriod:"monthly"},{key:"standard",label:"Standard",color:"blue",description:"G\xf3i ti\xeau chu\u1ea9n VIP - 1 th\xe1ng, 200 sao, reset h\xe0ng th\xe1ng",duration:30,maxStars:200,resetPeriod:"monthly"},{key:"premium",label:"Premium",color:"purple",description:"G\xf3i cao c\u1ea5p VIP - 1 n\u0103m, 3000 sao, reset h\xe0ng n\u0103m",duration:365,maxStars:3e3,resetPeriod:"yearly"},{key:"master",label:"Master",color:"yellow",description:"G\xf3i Master - 1 th\xe1ng, 200 sao/ng\xe0y, reset h\xe0ng ng\xe0y",duration:365,maxStars:200,resetPeriod:"daily"},{key:"sponsor",label:"Sponsor",color:"orange",description:"G\xf3i Sponsor - 1 n\u0103m, 5000 sao, kh\xf4ng b\u1ecb tr\u1eeb \u0111i\u1ec3m khi truy c\u1eadp",duration:365,maxStars:5e3,resetPeriod:"yearly"}])}catch(N){console.error("Error loading membership tiers:",N),T([{key:"basic",label:"Basic",color:"gray",description:"G\xf3i c\u01a1 b\u1ea3n",duration:30,maxStars:20,resetPeriod:"monthly"},{key:"standard",label:"Standard",color:"blue",description:"G\xf3i ti\xeau chu\u1ea9n",duration:30,maxStars:200,resetPeriod:"monthly"},{key:"premium",label:"Premium",color:"purple",description:"G\xf3i cao c\u1ea5p",duration:365,maxStars:3e3,resetPeriod:"yearly"},{key:"master",label:"Master",color:"yellow",description:"G\xf3i master",duration:365,maxStars:200,resetPeriod:"daily"},{key:"sponsor",label:"Sponsor",color:"orange",description:"G\xf3i sponsor",duration:365,maxStars:5e3,resetPeriod:"yearly"}])}})(),o&&B()}),[o]);const B=async()=>{if(!Qb.db||!o)return h(_),void x(!1);try{x(!0),j("");const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",o));if(t.exists()){var e;const n=t.data(),r=n.permissions||_,s=n.membershipTier||"basic",i=(null===(e=n.membershipExpiry)||void 0===e?void 0:e.toDate())||null;h(r),A(s),p(i)}else h(_),A("basic"),p(null),j("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin user")}catch(t){console.error("Error loading user data:",t),j("Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin user: "+t.message),h(_),A("basic"),p(null)}finally{x(!1)}},M=()=>!!g&&new Date>g;return f?(0,At.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,At.jsx)("div",{className:"space-y-3",children:[1,2,3,4,5,6].map((e=>(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,At.jsx)("div",{className:"h-6 bg-gray-200 rounded w-11"})]},e)))})]})}):(0,At.jsx)("div",{className:"space-y-6",children:(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-gray-400 mr-2"}),"H\u1ea1ng th\xe0nh vi\xean"]}),l&&(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:l})]})}),(0,At.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"H\u1ea1ng hi\u1ec7n t\u1ea1i:"}),(0,At.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(e=>{const t=(e=>{const t=C.find((t=>t.key===e));return t?t.color:"gray"})(e),n={gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",purple:"bg-purple-100 text-purple-800",yellow:"bg-yellow-100 text-yellow-800"};return n[t]||n.gray})(m)}`,children:(null===(n=C.find((e=>e.key===m)))||void 0===n?void 0:n.label)||"Basic"})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"S\u1ed1 sao:"}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 text-yellow-400 mr-1"}),(0,At.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(null===(r=C.find((e=>e.key===m)))||void 0===r?void 0:r.maxStars)||0," sao"]})]})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Chu k\u1ef3 reset:"}),(0,At.jsx)("span",{className:"text-sm text-gray-900",children:"daily"===(null===(s=C.find((e=>e.key===m)))||void 0===s?void 0:s.resetPeriod)?"H\xe0ng ng\xe0y":"monthly"===(null===(i=C.find((e=>e.key===m)))||void 0===i?void 0:i.resetPeriod)?"H\xe0ng th\xe1ng":"yearly"===(null===(a=C.find((e=>e.key===m)))||void 0===a?void 0:a.resetPeriod)?"H\xe0ng n\u0103m":"Kh\xf4ng x\xe1c \u0111\u1ecbnh"})]}),"master"===m&&g&&(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Th\u1eddi h\u1ea1n:"}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(Iy,{className:"h-4 w-4 text-gray-400 mr-1"}),(0,At.jsx)("span",{className:"text-xs "+(M()?"text-red-600":"text-green-600"),children:M()?"\u0110\xe3 h\u1ebft h\u1ea1n":`C\xf2n ${(()=>{if(!g)return null;const e=g.getTime()-(new Date).getTime();return Math.ceil(e/864e5)})()} ng\xe0y`})]})]})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:C.map((e=>(0,At.jsxs)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors "+(m===e.key?`border-${e.color}-500 bg-${e.color}-50`:"border-gray-200 hover:border-gray-300"),onClick:()=>(e=>{A(e);const t=C.find((t=>t.key===e));let n=null,r=_;t.duration?(n=new Date,n.setDate(n.getDate()+t.duration),"basic"!==e&&(r=E)):"master"===e?(n=new Date,n.setDate(n.getDate()+t.duration),r=E):(n=new Date,n.setDate(n.getDate()+t.duration),r=_),p(n),h(r)})(e.key),children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:e.label}),m===e.key&&(0,At.jsx)(tk,{className:"h-5 w-5 text-green-500"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,At.jsxs)("span",{children:["\u2b50 ",e.maxStars," sao"]}),(0,At.jsx)("span",{children:e.duration?e.duration<1?`${Math.round(24*e.duration*60)} ph\xfat`:`${e.duration} ng\xe0y`:"V\xf4 h\u1ea1n"})]})]},e.key)))}),(0,At.jsx)("button",{onClick:()=>{A("basic");const e=new Date;e.setDate(e.getDate()+30),p(e),h(_)},className:"mb-4 px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors",children:"Reset v\u1ec1 Basic"}),(0,At.jsx)("hr",{className:"my-4 border-gray-200"}),(0,At.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,At.jsx)(dt,{className:"h-5 w-5 text-gray-400 mr-2"}),"Quy\u1ec1n truy c\u1eadp chi ti\u1ebft"]})}),(0,At.jsx)("div",{className:"space-y-4",children:S.map((e=>(0,At.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.label}),d[e.key]?(0,At.jsx)(tk,{className:"h-4 w-4 text-green-500 ml-2"}):(0,At.jsx)(ky,{className:"h-4 w-4 text-red-500 ml-2"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),(0,At.jsx)("button",{onClick:()=>{return t=e.key,n=!d[e.key],void h((e=>({...e,[t]:n})));var t,n},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ml-4 "+(d[e.key]?"bg-blue-600":"bg-gray-200"),children:(0,At.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "+(d[e.key]?"translate-x-5":"translate-x-0")})})]})},e.key)))}),b&&(0,At.jsx)("div",{className:"mt-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:b}),N&&(0,At.jsx)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:N}),(0,At.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,At.jsx)("button",{onClick:async()=>{if(Qb.db&&o)try{y(!0),j(""),w("");const e=(await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",o))).data(),t=(null===e||void 0===e?void 0:e.membershipTier)||"basic",n=C.find((e=>e.key===m)),r=new Date;let s=null;switch(null===n||void 0===n?void 0:n.resetPeriod){case"daily":s=new Date(r.setHours(24,0,0,0));break;case"monthly":s=new Date(r.getFullYear(),r.getMonth()+1,1);break;case"yearly":s=new Date(r.getFullYear()+1,0,1)}if(t!==m){if(!u)throw new Error("handleMembershipUpgrade function kh\xf4ng kh\u1ea3 d\u1ee5ng");if(await u(o,t,m)){const e={permissions:d,starsLastReset:new Date,starsResetDate:s,updatedAt:new Date};await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",o),e),w("\u0110\xe3 n\xe2ng c\u1ea5p membership v\xe0 c\u1eadp nh\u1eadt quy\u1ec1n th\xe0nh c\xf4ng! S\u1ed1 sao \u0111\xe3 \u0111\u01b0\u1ee3c t\xednh to\xe1n theo logic b\u1ea3o v\u1ec7 AdminStars.")}else{const e=C.find((e=>e.key===m)),t=new Date;t.setDate(t.getDate()+((null===e||void 0===e?void 0:e.duration)||30));const n={permissions:d,membershipTier:m,membershipExpiry:t,starsLastReset:new Date,starsResetDate:s,updatedAt:new Date};await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",o),n),w("\u0110\xe3 c\u1eadp nh\u1eadt membership th\u1ee7 c\xf4ng (fallback mode). Vui l\xf2ng ki\u1ec3m tra s\u1ed1 sao c\u1ee7a user.")}}else{const e={permissions:d,membershipTier:m,membershipExpiry:g,starsLastReset:new Date,starsResetDate:s,updatedAt:new Date};await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",o),e),w("\u0110\xe3 c\u1eadp nh\u1eadt quy\u1ec1n th\xe0nh c\xf4ng!")}c&&c({permissions:d,membershipTier:m,membershipExpiry:g}),setTimeout((()=>{w("")}),5e3)}catch(e){console.error("Error saving user data:",e),j("Kh\xf4ng th\u1ec3 l\u01b0u th\xf4ng tin: "+e.message)}finally{y(!1)}else j("Kh\xf4ng th\u1ec3 l\u01b0u th\xf4ng tin")},disabled:v,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang l\u01b0u..."]}):"L\u01b0u th\xf4ng tin"}),(0,At.jsx)("button",{onClick:B,disabled:v,className:"px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors",children:"T\u1ea3i l\u1ea1i"})]})]})})},FI=e=>{let{user:t}=e;if(!t)return null;const{emailVerified:n=!1,adminVerifiedEmail:r=!1,adminVerifiedAt:s,emailVerifiedAt:i}=t,a=n&&r?{type:"both",icon:nM,bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200",label:"\u0110\xe3 x\xe1c th\u1ef1c \u0111\u1ea7y \u0111\u1ee7",description:"Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c qua c\u1ea3 Firebase v\xe0 Admin"}:n?{type:"firebase",icon:nM,bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-200",label:"X\xe1c th\u1ef1c Firebase",description:"Email \u0111\xe3 \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c qua Firebase Authentication"}:r?{type:"admin",icon:dt,bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-200",label:"X\xe1c th\u1ef1c Admin",description:"Email \u0111\xe3 \u0111\u01b0\u1ee3c admin x\xe1c th\u1ef1c th\u1ee7 c\xf4ng"}:{type:"none",icon:jw,bgColor:"bg-yellow-100",textColor:"text-yellow-800",borderColor:"border-yellow-200",label:"Ch\u01b0a x\xe1c th\u1ef1c",description:"Email ch\u01b0a \u0111\u01b0\u1ee3c x\xe1c th\u1ef1c"},o=a.icon;return(0,At.jsx)("div",{className:`border rounded-lg p-4 ${a.bgColor} ${a.borderColor}`,children:(0,At.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,At.jsx)(o,{className:`h-5 w-5 ${a.textColor} mt-0.5 flex-shrink-0`}),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsx)("h4",{className:`font-medium ${a.textColor}`,children:a.label}),(0,At.jsx)("p",{className:`text-sm ${a.textColor} opacity-80 mt-1`,children:a.description}),(0,At.jsxs)("div",{className:"mt-3 space-y-2",children:[n&&i&&(0,At.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,At.jsx)(nM,{className:"h-4 w-4 mr-1 text-green-600"}),(0,At.jsxs)("span",{children:["Firebase: ",iw(i)," ",aw(i)]})]}),r&&s&&(0,At.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,At.jsx)(dt,{className:"h-4 w-4 mr-1 text-blue-600"}),(0,At.jsxs)("span",{children:["Admin: ",iw(s)," ",aw(s)]})]}),!n&&!r&&(0,At.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,At.jsx)(Iy,{className:"h-4 w-4 mr-1 text-yellow-600"}),(0,At.jsx)("span",{children:"\u0110ang ch\u1edd x\xe1c th\u1ef1c"})]})]}),r&&!n&&(0,At.jsx)("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs",children:(0,At.jsxs)("p",{className:"text-yellow-800",children:[(0,At.jsx)("strong",{children:"L\u01b0u \xfd:"})," User ch\u1ec9 \u0111\u01b0\u1ee3c admin x\xe1c th\u1ef1c th\u1ee7 c\xf4ng. Firebase Authentication v\u1eabn ch\u01b0a verify email n\xe0y."]})})]})]})})},UI=()=>{const{userId:e}=te(),n=ee(),{addUserStars:r}=Aw(),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[u,d]=(0,t.useState)({}),[h,m]=(0,t.useState)([]),[A,g]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(""),[w,N]=(0,t.useState)(""),[j,C]=(0,t.useState)(null),T=[{key:"home",label:"Trang ch\u1ee7"},{key:"calendar",label:"L\u1ecbch"},{key:"battu",label:"B\xe1t T\u1ef1"},{key:"lakinh",label:"La Kinh"},{key:"luchao",label:"L\u1ee5c H\xe0o"},{key:"profile",label:"H\u1ed3 s\u01a1 c\xe1 nh\xe2n"}];(0,t.useEffect)((()=>{e&&(S(),E())}),[e]),(0,t.useEffect)((()=>{if(!e)return;const t=(0,Hb.aQ)((0,Hb.doc)(Qb.db,"users",e),(e=>{if(e.exists()){var t,n,r;const s={id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(n=e.data().lastLoginAt)||void 0===n?void 0:n.toDate(),membershipExpiry:null===(r=e.data().membershipExpiry)||void 0===r?void 0:r.toDate()};o(s);const i={};T.forEach((e=>{var t;i[e.key]=!1!==(null===(t=s.permissions)||void 0===t?void 0:t[e.key])})),d(i)}}),(e=>{console.error("Error in user real-time listener:",e)}));return()=>{t()}}),[e]);const S=async()=>{try{var t,r;i(!0);const s=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(!s.exists())return void n("/admin/users");const a={id:s.id,...s.data(),createdAt:null===(t=s.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(r=s.data().lastLoginAt)||void 0===r?void 0:r.toDate()},l=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"profiles",e)),u=l.exists()?l.data():null,h=(0,Hb.P)((0,Hb.rJ)(Qb.db,"pageVisits"),(0,Hb._M)("userId","==",e)),A=(await(0,Hb.GG)(h)).docs.map((e=>({id:e.id,...e.data()})));o(a),c(u),m(A);const p={};if(T.forEach((e=>{var t;p[e.key]=!1!==(null===(t=a.permissions)||void 0===t?void 0:t[e.key])})),d(p),null!==u&&void 0!==u&&u.birthDate){const e=_(u.birthDate);g(e)}}catch(s){console.error("Error loading user data:",s)}finally{i(!1)}},_=e=>{if(!e)return null;try{const[t,n,r]=e.split("-").map(Number),s=nb(r,n,t),i=rb(s);return{solarDate:`${r}/${n}/${t}`,lunarDate:`${s.day}/${s.month}/${s.year}${s.leap?" (nhu\u1eadn)":""}`,canChi:i,weekDay:new Date(t,n-1,r).getDay()}}catch(t){return console.error("L\u1ed7i t\xednh to\xe1n l\u1ecbch \xe2m:",t),null}},E=async()=>{try{const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","membershipPackages"));e.exists()&&C(e.data().packages)}catch(e){console.error("Error loading membership packages:",e)}};return s?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i th\xf4ng tin th\xe0nh vi\xean..."})]})})}):a?(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("button",{onClick:()=>n("/admin/users"),className:"flex items-center text-gray-500 hover:text-gray-700",children:(0,At.jsx)(mt,{className:"h-5 w-5 mr-1"})}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Chi ti\u1ebft th\xe0nh vi\xean"})]}),(0,At.jsxs)(nt,{to:`/admin/users/${e}/edit`,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-2"}),"Ch\u1ec9nh s\u1eeda"]})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(Ck,{className:"h-5 w-5 text-gray-400"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"T\xean hi\u1ec3n th\u1ecb"}),(0,At.jsx)("p",{className:"font-medium",children:a.displayName||(null===l||void 0===l?void 0:l.displayName)||"Ch\u01b0a c\xf3"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(EM,{className:"h-5 w-5 text-gray-400"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,At.jsx)("p",{className:"font-medium",children:a.email})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(nT,{className:"h-5 w-5 text-gray-400"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Ng\xe0y \u0111\u0103ng k\xfd"}),(0,At.jsx)("p",{className:"font-medium",children:a.createdAt?a.createdAt.toLocaleDateString("vi-VN"):"Kh\xf4ng c\xf3"}),a.createdAt&&(0,At.jsx)("p",{className:"text-xs text-gray-400",children:a.createdAt.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(Iy,{className:"h-5 w-5 text-gray-400"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"\u0110\u0103ng nh\u1eadp cu\u1ed1i"}),(0,At.jsx)("p",{className:"font-medium",children:a.lastLoginAt?a.lastLoginAt.toLocaleDateString("vi-VN"):"Ch\u01b0a \u0111\u0103ng nh\u1eadp"}),a.lastLoginAt&&(0,At.jsx)("p",{className:"text-xs text-gray-400",children:a.lastLoginAt.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),l&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.birthDate&&(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(nT,{className:"h-5 w-5 text-gray-400"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Ng\xe0y sinh"}),(0,At.jsx)("p",{className:"font-medium",children:l.birthDate})]}),l.birthTime&&(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(Iy,{className:"h-5 w-5 text-gray-400"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Gi\u1edd sinh"}),(0,At.jsx)("p",{className:"font-medium",children:l.birthTime})]}),l.gender&&(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(Ck,{className:"h-5 w-5 text-gray-400"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"Gi\u1edbi t\xednh"}),(0,At.jsx)("p",{className:"font-medium",children:(M=l.gender,{male:"Nam",female:"N\u1eef",other:"Kh\xe1c"}[M]||M)})]}),l.homeDirection&&(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)(yk,{className:"h-5 w-5 text-gray-400"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"H\u01b0\u1edbng nh\xe0"}),(0,At.jsx)("p",{className:"font-medium",children:(B=l.homeDirection,{north:"B\u1eafc",northeast:"\u0110\xf4ng B\u1eafc",east:"\u0110\xf4ng",southeast:"\u0110\xf4ng Nam",south:"Nam",southwest:"T\xe2y Nam",west:"T\xe2y",northwest:"T\xe2y B\u1eafc"}[B]||B)})]})]})]})]}),A&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin chung"}),(0,At.jsxs)("div",{className:"mb-6 bg-gray-50 rounded-lg p-4 ",children:[(0,At.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:"Ng\xe0y sinh"}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:(0,At.jsxs)("div",{className:"flex justify-start",children:[(0,At.jsx)("span",{className:"text-gray-600 mr-3",children:"\xc2m l\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:A.lunarDate})]})}),(0,At.jsxs)("div",{className:"text-sm text-yellow-600 mt-4 pt-2 border-t border-gray-200",children:["Can Chi: ",A.canChi[0]," - ",A.canChi[1]," - ",A.canChi[2]]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-3",children:"Cung Phi M\u1ec7nh"}),(0,At.jsx)(lN,{dayDetails:A,nguHanhColors:{Kim:"text-gray-600","M\u1ed9c":"text-green-600","Th\u1ee7y":"text-blue-600","H\u1ecfa":"text-red-600","Th\u1ed5":"text-yellow-600"}})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(eM,{className:"h-5 w-5 text-purple-500 mr-2"}),"L\u1ecbch s\u1eed Giao d\u1ecbch Sao"]}),(0,At.jsx)(wI,{userId:e})]})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tr\u1ea1ng th\xe1i x\xe1c th\u1ef1c Email"}),(0,At.jsx)(FI,{user:a})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tr\u1ea1ng th\xe1i t\xe0i kho\u1ea3n"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm text-gray-500 flex items-center",children:[(0,At.jsx)(Sk,{className:"h-4 w-4 mr-1"}),"User ID"]}),(0,At.jsx)("div",{className:"text-right",children:(0,At.jsx)("div",{className:"text-sm font-mono text-gray-900 bg-gray-50 px-2 py-1 rounded border",title:"Click \u0111\u1ec3 copy",style:{cursor:"pointer"},onClick:()=>{navigator.clipboard.writeText(a.id),alert("\u0110\xe3 copy User ID!")},children:a.id})})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 pt-3",children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"T\xe0i kho\u1ea3n"}),(0,At.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(a.disabled?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:a.disabled?"B\u1ecb kh\xf3a":"Ho\u1ea1t \u0111\u1ed9ng"})]}),(0,At.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Ng\xe0y \u0111\u0103ng k\xfd"}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.createdAt?a.createdAt.toLocaleDateString("vi-VN"):"Kh\xf4ng c\xf3"}),a.createdAt&&(0,At.jsx)("div",{className:"text-xs text-gray-500",children:a.createdAt.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]})}),(0,At.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"\u0110\u0103ng nh\u1eadp cu\u1ed1i"}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.lastLoginAt?a.lastLoginAt.toLocaleDateString("vi-VN"):"Ch\u01b0a \u0111\u0103ng nh\u1eadp"}),a.lastLoginAt&&(0,At.jsx)("div",{className:"text-xs text-gray-500",children:a.lastLoginAt.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})})]})]})}),a.createdAt&&(0,At.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("span",{className:"text-sm text-gray-500",children:"Th\u1eddi gian tham gia"}),(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(()=>{const e=new Date,t=Math.abs(e-a.createdAt),n=Math.ceil(t/864e5);if(n<30)return`${n} ng\xe0y`;if(n<365){return`${Math.floor(n/30)} th\xe1ng`}{const e=Math.floor(n/365),t=Math.floor(n%365/30);return t>0?`${e} n\u0103m ${t} th\xe1ng`:`${e} n\u0103m`}})()})]})})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Qu\u1ea3n l\xfd Sao"]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Sao hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("div",{className:"flex items-center justify-center",children:[(0,At.jsx)(Tw,{className:"h-6 w-6 text-yellow-500 mr-2"}),(0,At.jsx)("p",{className:"text-2xl font-bold text-yellow-900",children:a.stars||0})]}),a.adminStars>0&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-yellow-700",children:[(0,At.jsxs)("span",{className:"font-medium",children:["Admin c\u1ed9ng th\xeam: ",a.adminStars," sao"]}),(0,At.jsx)("br",{}),(0,At.jsx)("span",{className:"text-yellow-600",children:"\u2728 \u0110\u01b0\u1ee3c b\u1ea3o v\u1ec7 khi reset chu k\u1ef3"})]})]})}),(0,At.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"C\u1ed9ng th\xeam Sao"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("input",{type:"number",min:"1",max:"1000",value:y,onChange:e=>b(e.target.value),placeholder:"S\u1ed1 Sao c\u1ea7n c\u1ed9ng",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),(0,At.jsx)("input",{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"L\xfd do c\u1ed9ng Sao",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),(0,At.jsx)("button",{type:"button",onClick:async t=>{t.preventDefault();const n=parseInt(y);if(!n||n<=0)alert("Vui l\xf2ng nh\u1eadp s\u1ed1 Sao h\u1ee3p l\u1ec7 (l\u1edbn h\u01a1n 0)");else try{v(!0);const t=w.trim()||"Admin c\u1ed9ng sao";await r(e,n,t)?(alert(`\u0110\xe3 c\u1ed9ng ${n} Sao cho th\xe0nh vi\xean th\xe0nh c\xf4ng!`),b(""),N(""),await S()):alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1ed9ng Sao!")}catch(s){console.error("Error adding stars:",s),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1ed9ng Sao!")}finally{v(!1)}},disabled:x||!y,className:"w-full inline-flex items-center justify-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-1"}),"\u0110ang c\u1ed9ng..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(CI,{className:"h-4 w-4 mr-1"}),"C\u1ed9ng Sao"]})}),(0,At.jsx)("p",{className:"text-xs text-gray-500",children:"C\u1ed9ng Sao cho th\xe0nh vi\xean (t\u1ed1i \u0111a 1000 Sao m\u1ed7i l\u1ea7n)"})]})]}),(0,At.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Sao t\u1eeb admin:"}),(0,At.jsxs)("span",{className:"font-medium text-green-600",children:[a.adminStars||0," sao"]})]}),a.adminStars>0&&(0,At.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"\ud83d\udc8e Sao admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 khi reset"})]})})]})]}),(0,At.jsx)(PI,{userId:e,userEmail:a.email,onPermissionsUpdate:e=>{o((t=>({...t,permissions:e.permissions,membershipTier:e.membershipTier,membershipExpiry:e.membershipExpiry})))}}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"L\u01b0\u1ee3t truy c\u1eadp"}),h.length>0?(0,At.jsx)("div",{className:"space-y-2",children:h.map((e=>(0,At.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:e.pageName}),(0,At.jsx)("span",{className:"font-medium",children:e.count||0})]},e.id)))}):(0,At.jsx)("p",{className:"text-sm text-gray-500 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u truy c\u1eadp"})]})]})]})]})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Kh\xf4ng t\xecm th\u1ea5y th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"text-gray-500",children:"Th\xe0nh vi\xean n\xe0y c\xf3 th\u1ec3 \u0111\xe3 b\u1ecb x\xf3a ho\u1eb7c kh\xf4ng t\u1ed3n t\u1ea1i."}),(0,At.jsx)(nt,{to:"/admin/users",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Quay l\u1ea1i danh s\xe1ch"})]})});var B,M},RI=()=>{const{userId:e}=te(),n=ee(),[r,s]=(0,t.useState)(!0),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({displayName:"",emailVerified:!1,disabled:!1}),[m,A]=(0,t.useState)({displayName:"",birthDate:"",birthTime:"",homeDirection:"",gender:""}),[g,p]=(0,t.useState)(""),[f,x]=(0,t.useState)(""),v=(()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw})();(0,t.useEffect)((()=>{e&&y()}),[e]);const y=async()=>{try{var t,r;s(!0);const i=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",e));if(!i.exists())return void n("/admin/users");const a={id:i.id,...i.data(),createdAt:null===(t=i.data().createdAt)||void 0===t?void 0:t.toDate(),lastLoginAt:null===(r=i.data().lastLoginAt)||void 0===r?void 0:r.toDate()},o=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"profiles",e)),c=o.exists()?o.data():null;l(a),u(c),h({displayName:a.displayName||"",emailVerified:a.adminVerifiedEmail||!1,disabled:a.disabled||!1}),c&&A({displayName:c.displayName||"",birthDate:c.birthDate||"",birthTime:c.birthTime||"",homeDirection:c.homeDirection||"",gender:c.gender||""})}catch(g){console.error("Error loading user data:",g)}finally{s(!1)}},b=e=>{const{name:t,value:n,type:r,checked:s}=e.target;h((e=>({...e,[t]:"checkbox"===r?s:n})))},w=e=>{const{name:t,value:n}=e.target;A((e=>({...e,[t]:n})))};return r?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i th\xf4ng tin th\xe0nh vi\xean..."})]})})}):o?(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsx)("div",{className:"flex items-center justify-between",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("button",{onClick:()=>n(`/admin/users/${e}`),className:"flex items-center text-gray-500 hover:text-gray-700",children:(0,At.jsx)(mt,{className:"h-5 w-5 mr-1"})}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Ch\u1ec9nh s\u1eeda th\xe0nh vi\xean"})]})}),(0,At.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{if(a(!0),!v)return alert("\u274c Kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i."),void n("/admin/login");if("true"===localStorage.getItem("adminFirebaseAuth")&&!Qb.auth.currentUser)return alert("\u274c Firebase admin session \u0111\xe3 h\u1ebft h\u1ea1n. Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i."),void n("/admin/login");const t={displayName:d.displayName,disabled:d.disabled,updatedAt:new Date};d.emailVerified!==(o.adminVerifiedEmail||!1)&&(d.emailVerified?(t.adminVerifiedEmail=!0,t.adminVerifiedAt=new Date):(t.adminVerifiedEmail=!1,t.adminVerifiedAt=null)),await lw(e,"UserEdit-beforeUpdate"),await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"users",e),t),await lw(e,"UserEdit-afterUpdate"),c&&await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"profiles",e),{...m,updatedAt:new Date}),alert("\u0110\xe3 c\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh vi\xean th\xe0nh c\xf4ng!"),n(`/admin/users/${e}`)}catch(g){console.error("Error updating user:",g),console.error("Error details:",{code:g.code,message:g.message,stack:g.stack}),"permission-denied"===g.code?(alert(`L\u1ed7i quy\u1ec1n truy c\u1eadp! Vui l\xf2ng \u0111\u0103ng nh\u1eadp l\u1ea1i b\u1eb1ng email admin: ${rw}`),n("/admin/login")):"not-found"===g.code?alert("Kh\xf4ng t\xecm th\u1ea5y th\xe0nh vi\xean n\xe0y!"):alert(`C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt th\xf4ng tin: ${g.message}`)}finally{a(!1)}},className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin t\xe0i kho\u1ea3n"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,At.jsx)("input",{type:"email",value:o.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500 cursor-not-allowed"}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email kh\xf4ng th\u1ec3 thay \u0111\u1ed5i"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean hi\u1ec3n th\u1ecb (T\xe0i kho\u1ea3n)"}),(0,At.jsx)("input",{type:"text",name:"displayName",value:d.displayName,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nh\u1eadp t\xean hi\u1ec3n th\u1ecb"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tr\u1ea1ng th\xe1i x\xe1c th\u1ef1c Email"}),(0,At.jsx)(FI,{user:o})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"emailVerified",id:"emailVerified",checked:d.emailVerified,onChange:b,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,At.jsx)("label",{htmlFor:"emailVerified",className:"ml-2 block text-sm text-gray-700 font-medium",children:"X\xe1c th\u1ef1c email th\u1ee7 c\xf4ng (Admin Override)"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-600 mt-1 ml-6",children:"B\u1eadt t\xf9y ch\u1ecdn n\xe0y \u0111\u1ec3 cho ph\xe9p user truy c\u1eadp h\u1ec7 th\u1ed1ng m\xe0 kh\xf4ng c\u1ea7n x\xe1c th\u1ef1c email qua Firebase"})]}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"disabled",id:"disabled",checked:d.disabled,onChange:b,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,At.jsx)("label",{htmlFor:"disabled",className:"ml-2 block text-sm text-gray-700",children:"Kh\xf3a t\xe0i kho\u1ea3n"})]}),(0,At.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,At.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"Ng\xe0y \u0111\u0103ng k\xfd:"}),(0,At.jsx)("p",{className:"font-medium",children:o.createdAt?o.createdAt.toLocaleDateString("vi-VN"):"Kh\xf4ng c\xf3"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-500",children:"\u0110\u0103ng nh\u1eadp cu\u1ed1i:"}),(0,At.jsx)("p",{className:"font-medium",children:o.lastLoginAt?o.lastLoginAt.toLocaleDateString("vi-VN"):"Ch\u01b0a \u0111\u0103ng nh\u1eadp"})]})]})})]})]}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin c\xe1 nh\xe2n"}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean hi\u1ec3n th\u1ecb (H\u1ed3 s\u01a1)"}),(0,At.jsx)("input",{type:"text",name:"displayName",value:m.displayName,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nh\u1eadp t\xean hi\u1ec3n th\u1ecb"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ng\xe0y sinh"}),(0,At.jsx)("input",{type:"date",name:"birthDate",value:m.birthDate,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gi\u1edd sinh"}),(0,At.jsx)("input",{type:"time",name:"birthTime",value:m.birthTime,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gi\u1edbi t\xednh"}),(0,At.jsxs)("select",{name:"gender",value:m.gender,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn gi\u1edbi t\xednh"}),[{value:"male",label:"Nam"},{value:"female",label:"N\u1eef"},{value:"other",label:"Kh\xe1c"}].map((e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"H\u01b0\u1edbng nh\xe0"}),(0,At.jsxs)("select",{name:"homeDirection",value:m.homeDirection,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn h\u01b0\u1edbng nh\xe0"}),[{value:"north",label:"B\u1eafc"},{value:"northeast",label:"\u0110\xf4ng B\u1eafc"},{value:"east",label:"\u0110\xf4ng"},{value:"southeast",label:"\u0110\xf4ng Nam"},{value:"south",label:"Nam"},{value:"southwest",label:"T\xe2y Nam"},{value:"west",label:"T\xe2y"},{value:"northwest",label:"T\xe2y B\u1eafc"}].map((e=>(0,At.jsx)("option",{value:e.value,children:e.label},e.value)))]})]})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsxs)("button",{type:"button",onClick:()=>n(`/admin/users/${e}`),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-2"}),"H\u1ee7y"]}),(0,At.jsx)("button",{type:"submit",disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:i?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang l\u01b0u..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2"}),"L\u01b0u thay \u0111\u1ed5i"]})})]})]})]})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Kh\xf4ng t\xecm th\u1ea5y th\xe0nh vi\xean"}),(0,At.jsx)("p",{className:"text-gray-500",children:"Th\xe0nh vi\xean n\xe0y c\xf3 th\u1ec3 \u0111\xe3 b\u1ecb x\xf3a ho\u1eb7c kh\xf4ng t\u1ed3n t\u1ea1i."}),(0,At.jsx)(nt,{to:"/admin/users",className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Quay l\u1ea1i danh s\xe1ch"})]})})},OI=()=>{var e,n,r,s,i;const a=(e,t)=>({name:e.name||t.name||"",icon:e.icon||t.icon||"\u2b50",color:e.color||t.color||"gray",duration:void 0!==e.duration?parseFloat(e.duration):t.duration||30,maxStars:parseInt(e.maxStars)||t.maxStars||20,resetPeriod:e.resetPeriod||t.resetPeriod||"monthly",description:e.description||t.description||"",enabled:void 0!==e.enabled?e.enabled:void 0===t.enabled||t.enabled}),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)("packages"),[d,h]=(0,t.useState)({}),[m,A]=(0,t.useState)({}),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),[N,j]=(0,t.useState)(""),[C,T]=(0,t.useState)(""),[S,_]=(0,t.useState)(""),[E,B]=(0,t.useState)([]),[M,k]=(0,t.useState)(!1),[L,I]=(0,t.useState)(!1),[D,P]=(0,t.useState)(null),[F,U]=(0,t.useState)(""),[R,O]=(0,t.useState)(!1),[H,Q]=(0,t.useState)([]),[z,V]=(0,t.useState)(null),[K,G]=(0,t.useState)(1),[q,W]=(0,t.useState)(0),[$,X]=(0,t.useState)(20),[Y,J]=(0,t.useState)({}),Z=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw},ee={basic:{name:"Basic",icon:"\u2b50",color:"gray",duration:30,maxStars:20,resetPeriod:"monthly",description:"G\xf3i c\u01a1 b\u1ea3n - 1 th\xe1ng, 20 sao, reset h\xe0ng th\xe1ng",enabled:!0},standard:{name:"Standard",icon:"\ud83c\udf1f",color:"blue",duration:30,maxStars:200,resetPeriod:"monthly",description:"G\xf3i ti\xeau chu\u1ea9n VIP - 1 th\xe1ng, 200 sao, reset h\xe0ng th\xe1ng",enabled:!0},premium:{name:"Premium",icon:"\ud83d\udc8e",color:"purple",duration:365,maxStars:3e3,resetPeriod:"yearly",description:"G\xf3i cao c\u1ea5p VIP - 1 n\u0103m, 3000 sao, reset h\xe0ng n\u0103m",enabled:!0},master:{name:"Master",icon:"\ud83d\udc51",color:"yellow",duration:365,maxStars:200,resetPeriod:"daily",description:"G\xf3i Master - 1 th\xe1ng, 200 sao/ng\xe0y, reset h\xe0ng ng\xe0y",enabled:!0},sponsor:{name:"Sponsor",icon:"\ud83c\udfc5",color:"orange",duration:365,maxStars:5e3,resetPeriod:"yearly",description:"G\xf3i Sponsor - 1 n\u0103m, 5000 sao, kh\xf4ng b\u1ecb tr\u1eeb \u0111i\u1ec3m khi truy c\u1eadp",enabled:!0}},te={enabled:!0,points:1,maxStreak:30,bonusMultiplier:1.5,intervalMode:"daily",claimInterval:6,description:"Ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng h\xe0ng ng\xe0y ho\u1eb7c theo kho\u1ea3ng th\u1eddi gian t\xf9y ch\u1ec9nh",tierRewards:{basic:1,standard:2,premium:5,master:10,sponsor:15,admin:50}};(0,t.useEffect)((()=>{ne()}),[]),(0,t.useEffect)((()=>{"expired"===c&&(G(1),re(!1,1))}),[c]),(0,t.useEffect)((()=>{"expired"===c&&$&&(G(1),Q([]),V(null),re(!0,1))}),[$]);const ne=async()=>{try{l(!0);const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","membershipPackages"));if(e.exists()){const t=e.data().packages||{},n={};for(const[e,r]of Object.entries(ee)){const s=t[e]||{};n[e]=a(s,r)}h(n)}else h(ee);const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","dailyRewards"));if(t.exists()){const e=t.data(),n={...te,...e,tierRewards:{...te.tierRewards,...e.tierRewards}};A(n)}else A(te)}catch(C){console.error("Error loading membership data:",C),T("L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u g\xf3i th\xe0nh vi\xean"),h(ee),A(te)}finally{l(!1)}},re=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{const r=new Date;if(!e&&1===t&&z&&H.length>0&&r-z<3e5){const e=(t-1)*$,n=e+$,r=H.slice(e,n);return B(r),W(H.length),void G(t)}k(!0);let s=[],i=0;try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipExpiry","<",r),(0,Hb._M)("membershipTier","in",["standard","premium","master"]),(0,Hb.My)("membershipExpiry","desc"),(0,Hb.AB)(10*$)),n=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","in",["standard","premium","master"]),(0,Hb.My)("updatedAt","desc"),(0,Hb.AB)(20*$)),a=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("membershipTier","==","basic"),(0,Hb.My)("updatedAt","desc"),(0,Hb.AB)(20*$)),[o,l,c]=await Promise.all([(0,Hb.GG)(e),(0,Hb.GG)(n),(0,Hb.GG)(a)]),u=[],d=new Set;o.docs.forEach((e=>{const t=e.data();if(t.email!==rw&&!d.has(e.id)){var n,r;const s=t.membershipExpiry.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry),i=se(t.starTransactions||{},e.id);u.push({id:e.id,...t,createdAt:null===(n=t.createdAt)||void 0===n?void 0:n.toDate(),lastLoginAt:null===(r=t.lastLoginAt)||void 0===r?void 0:r.toDate(),membershipExpiry:s,upgradeHistory:i,isCurrentlyExpired:!0,wasResetToBasic:!1,trackingMethod:"currently_expired"}),d.add(e.id)}})),l.docs.forEach((e=>{const t=e.data();if(t.email!==rw&&!d.has(e.id)){var n;const l=null!==(n=t.membershipExpiry)&&void 0!==n&&n.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry||r),c=se(t.starTransactions||{},e.id),h="basic"!==t.membershipTier&&l<r,m="basic"===t.membershipTier,A=Math.ceil((l-r)/864e5),g="basic"!==t.membershipTier&&A>=-7&&A<=7;var s,i,a,o;if(h||g||m)u.push({id:e.id,...t,createdAt:null===(s=t.createdAt)||void 0===s?void 0:s.toDate(),lastLoginAt:null===(i=t.lastLoginAt)||void 0===i?void 0:i.toDate(),membershipExpiry:l,upgradeHistory:c,isCurrentlyExpired:h,isExpiringSoon:g,wasResetToBasic:m,daysUntilExpiry:A,originalTier:m?ie(c):t.membershipTier,trackingMethod:"has_history_flag",firstHighTierDate:null===(a=t.firstHighTierDate)||void 0===a?void 0:a.toDate(),lastHighTierDate:null===(o=t.lastHighTierDate)||void 0===o?void 0:o.toDate()}),d.add(e.id)}})),c.docs.forEach((e=>{const t=e.data();if(t.email!==rw&&!d.has(e.id)){const a=se(t.starTransactions||{},e.id);if(Object.values(a).some((e=>e>0))){var n,s,i;const o=null!==(n=t.membershipExpiry)&&void 0!==n&&n.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry||r);u.push({id:e.id,...t,createdAt:null===(s=t.createdAt)||void 0===s?void 0:s.toDate(),lastLoginAt:null===(i=t.lastLoginAt)||void 0===i?void 0:i.toDate(),membershipExpiry:o,upgradeHistory:a,isCurrentlyExpired:!1,wasResetToBasic:!0,originalTier:ie(a),trackingMethod:"transaction_history"}),d.add(e.id)}}})),u.sort(((e,t)=>{const n=e.lastHighTierDate||e.membershipExpiry||new Date(0);return(t.lastHighTierDate||t.membershipExpiry||new Date(0))-n})),1===t&&(Q(u),V(new Date));const h=(t-1)*$,m=h+$;s=u.slice(h,m),i=u.length}catch(n){const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc"),(0,Hb.AB)(1e3)),a=await(0,Hb.GG)(e),o=[];a.docs.forEach((e=>{const t=e.data();if(t.email!==rw){const a=se(t.starTransactions||{},e.id);if(Object.values(a).some((e=>e>0))||t.hasHighTierHistory){var n;const l=null!==(n=t.membershipExpiry)&&void 0!==n&&n.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry||r),c="basic"!==t.membershipTier&&l<r,u="basic"===t.membershipTier,d=Math.ceil((l-r)/864e5),h="basic"!==t.membershipTier&&d>=-7&&d<=7;var s,i;if(c||h||u)o.push({id:e.id,...t,createdAt:null===(s=t.createdAt)||void 0===s?void 0:s.toDate(),lastLoginAt:null===(i=t.lastLoginAt)||void 0===i?void 0:i.toDate(),membershipExpiry:l,upgradeHistory:a,isCurrentlyExpired:c,isExpiringSoon:h,wasResetToBasic:u,daysUntilExpiry:d,originalTier:u?ie(a):t.membershipTier,trackingMethod:"full_scan"})}}})),o.sort(((e,t)=>t.membershipExpiry-e.membershipExpiry)),1===t&&(Q(o),V(new Date));const l=(t-1)*$,c=l+$;s=o.slice(l,c),i=o.length}B(s),W(i),G(t)}catch(C){console.error("\u274c Error loading expired users:",C),T("L\u1ed7i khi t\u1ea3i danh s\xe1ch th\xe0nh vi\xean h\u1ebft h\u1ea1n: "+C.message)}finally{k(!1)}},se=function(e){const t={standard:0,premium:0,master:0};if(!e)return t;const n=Object.values(e);return n.forEach(((e,n)=>{if("membership_upgrade"===e.type||"membership_renewal"===e.type||e.description&&e.description.includes("n\xe2ng c\u1ea5p")){0;const n=e.description||e.reason||"",r=e.details||{};n.includes("Standard")||"standard"===r.newTier?t.standard++:n.includes("Premium")||"premium"===r.newTier?t.premium++:(n.includes("Master")||"master"===r.newTier)&&t.master++}})),t},ie=e=>e.master>0?"master":e.premium>0?"premium":e.standard>0?"standard":"basic",ae=e=>{const t={gray:{bg:"bg-white",border:"border-gray-200",text:"text-gray-800",button:"bg-gray-600 hover:bg-gray-700"},blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",button:"bg-blue-600 hover:bg-blue-700"},purple:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-800",button:"bg-purple-600 hover:bg-purple-700"},yellow:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",button:"bg-yellow-600 hover:bg-yellow-700"},orange:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",button:"bg-orange-600 hover:bg-orange-700"}};return t[e]||t.gray},oe=e=>({daily:"H\xe0ng ng\xe0y",weekly:"H\xe0ng tu\u1ea7n",monthly:"H\xe0ng th\xe1ng",yearly:"H\xe0ng n\u0103m"}[e]||e),le=e=>{if(.0069===e)return"10 ph\xfat";if(.0417===e)return"1 gi\u1edd";if(1===e)return"1 ng\xe0y";if(7===e)return"7 ng\xe0y";if(30===e)return"30 ng\xe0y";if(90===e)return"90 ng\xe0y";if(180===e)return"180 ng\xe0y";if(365===e)return"365 ng\xe0y";if(e<1){const t=Math.round(24*e*60);if(t<60)return`${t} ph\xfat`;return`${Math.round(24*e)} gi\u1edd`}return`${e} ng\xe0y`},ce=e=>{const t={basic:{label:"Basic",icon:"\u2b50",color:"gray"},standard:{label:"Standard",icon:"\ud83c\udf1f",color:"blue"},premium:{label:"Premium",icon:"\ud83d\udc8e",color:"purple"},master:{label:"Master",icon:"\ud83d\udc51",color:"yellow"},sponsor:{label:"Sponsor",icon:"\ud83c\udfc5",color:"orange"}};return t[e]||t.basic},ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return null;const n=e.toDate?e.toDate():new Date(e),r=new Date,s=new Date("2020-01-01"),i=new Date("2030-12-31");if(n<s||n>i){let e=null;if(t){if(t.starTransactions){const n=Object.values(t.starTransactions).filter((e=>"membership_upgrade"===e.type||"membership_renewal"===e.type)).sort(((e,t)=>{var n,r;return(null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.timestamp))-(null!==(r=t.timestamp)&&void 0!==r&&r.toDate?t.timestamp.toDate():new Date(t.timestamp))}));var a;if(n.length>0)e=null!==(a=n[0].timestamp)&&void 0!==a&&a.toDate?n[0].timestamp.toDate():new Date(n[0].timestamp)}if(!e&&t.membershipExpiry){const n=t.membershipExpiry.toDate?t.membershipExpiry.toDate():new Date(t.membershipExpiry);e=new Date(n),e.setDate(e.getDate()-30)}if(!e){var o,l;const n=null!==(o=t.updatedAt)&&void 0!==o&&o.toDate?t.updatedAt.toDate():t.updatedAt?new Date(t.updatedAt):null!==(l=t.createdAt)&&void 0!==l&&l.toDate?t.createdAt.toDate():new Date(t.createdAt);e=new Date(n),e.setDate(e.getDate()-7)}}(!e||e<s)&&(e=new Date,e.setDate(e.getDate()-1)),n=e}const c=r-n,u=Math.floor(c/864e5),d=Math.floor(c%864e5/36e5),h=Math.floor(c%36e5/6e4);return u>0?`${u} ng\xe0y tr\u01b0\u1edbc`:d>0?`${d} gi\u1edd tr\u01b0\u1edbc`:h>0?`${h} ph\xfat tr\u01b0\u1edbc`:"V\u1eeba xong"};return o?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u g\xf3i th\xe0nh vi\xean..."})]})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd G\xf3i Th\xe0nh Vi\xean"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Qu\u1ea3n l\xfd c\xe1c g\xf3i th\xe0nh vi\xean v\xe0 h\u1ec7 th\u1ed1ng \u0111i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp h\xe0ng ng\xe0y"}),Z()&&(0,At.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,At.jsx)(dt,{className:"h-3 w-3 mr-1"}),"true"===localStorage.getItem("adminFirebaseAuth")?"Firebase Admin":"LocalStorage Admin"]})]}),N&&(0,At.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(tk,{className:"h-5 w-5 text-green-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("p",{className:"text-sm text-green-800",children:N})})]})}),C&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(ky,{className:"h-5 w-5 text-red-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("p",{className:"text-sm text-red-800",children:C})})]})}),(0,At.jsx)("div",{className:"border-b border-gray-200 overflow-x-auto md:overflow-x-hidden overflow-y-hidden",children:(0,At.jsxs)("nav",{className:"-mb-px flex space-x-4 md:w-auto w-[600px]",children:[(0,At.jsxs)("button",{onClick:()=>u("packages"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("packages"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)($M,{className:"h-5 w-5 inline mr-2"}),"G\xf3i Th\xe0nh Vi\xean"]}),(0,At.jsxs)("button",{onClick:()=>u("rewards"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("rewards"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)(ik,{className:"h-5 w-5 inline mr-2"}),"Th\u01b0\u1edfng \u0110\u0103ng Nh\u1eadp"]}),(0,At.jsxs)("button",{onClick:()=>u("expired"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors "+("expired"===c?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)(jw,{className:"h-5 w-5 inline mr-2"}),"Th\xe0nh Vi\xean S\u1eafp H\u1ebft H\u1ea1n",E.length>0&&(0,At.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:E.length})]})]})}),"packages"===c&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["basic","standard","premium","master","sponsor"].map((e=>{const t=d[e];if(!t)return null;const n=ae(t.color);return(0,At.jsxs)("div",{className:`${n.bg} ${n.border} border-2 rounded-lg p-6`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("span",{className:"text-2xl mr-3",children:t.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:`text-lg font-bold ${n.text}`,children:t.name}),(0,At.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e})]})]}),(0,At.jsx)("button",{onClick:()=>{var t;p({key:t=e,...d[t]})},className:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-white",children:(0,At.jsx)(II,{className:"h-4 w-4"})})]}),(0,At.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"S\u1ed1 sao:"}),(0,At.jsxs)("span",{className:"font-medium flex items-center",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 text-yellow-400 mr-1"}),t.maxStars," sao"]})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Th\u1eddi h\u1ea1n:"}),(0,At.jsx)("span",{className:"font-medium",children:le(t.duration)})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Reset:"}),(0,At.jsx)("span",{className:"font-medium",children:oe(t.resetPeriod)})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Tr\u1ea1ng th\xe1i:"}),(0,At.jsx)("span",{className:"font-medium "+(t.enabled?"text-green-600":"text-red-600"),children:t.enabled?"K\xedch ho\u1ea1t":"T\u1eaft"})]})]}),(0,At.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:t.description})]},e)}))}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between md:flex-row flex-col",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["Ch\u1ec9 c\u1eadp nh\u1eadt ",(0,At.jsx)("strong",{children:"ng\xe0y h\u1ebft h\u1ea1n"})," cho th\xe0nh vi\xean hi\u1ec7n t\u1ea1i theo duration m\u1edbi"]}),(0,At.jsx)("p",{className:"text-xs text-blue-500 mt-1",children:"\u2705 S\u1ed1 sao hi\u1ec7n t\u1ea1i \u0111\u01b0\u1ee3c gi\u1eef nguy\xean | \u26a0\ufe0f Ng\xe0y h\u1ebft h\u1ea1n = h\xf4m nay + duration m\u1edbi"}),(0,At.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"\ud83d\udca1 C\u1ea5u h\xecnh s\u1ed1 sao m\u1edbi ch\u1ec9 \xe1p d\u1ee5ng cho th\xe0nh vi\xean \u0111\u0103ng k\xfd m\u1edbi"})]}),(0,At.jsx)("button",{onClick:async()=>{if(Z()){w(!0);try{const e=await(0,Hb.GG)((0,Hb.rJ)(Qb.db,"users")),t=(0,Hb.wP)(Qb.db);let n=0;e.forEach((e=>{const r=e.data(),s=r.membershipTier||"basic",i=d[s];if(i){var a;let s=!1;const o={updatedAt:(0,Hb.O5)()},l=null!==(a=r.membershipExpiry)&&void 0!==a&&a.toDate?r.membershipExpiry.toDate():r.membershipExpiry;if(l){const e=new Date;if(i.duration<1){const t=24*i.duration*60;e.setMinutes(e.getMinutes()+t)}else e.setDate(e.getDate()+i.duration);(l?new Date(l).toDateString():"")!==e.toDateString()&&(o.membershipExpiry=e,o.starsResetDate=e,s=!0)}if(s){const r=(0,Hb.doc)(Qb.db,"users",e.id);t.update(r,o),n++}}})),n>0?(await t.commit(),j(`\u0110\xe3 c\u1eadp nh\u1eadt ng\xe0y h\u1ebft h\u1ea1n cho ${n} th\xe0nh vi\xean th\xe0nh c\xf4ng! (S\u1ed1 sao hi\u1ec7n t\u1ea1i \u0111\u01b0\u1ee3c gi\u1eef nguy\xean)`)):j("T\u1ea5t c\u1ea3 th\xe0nh vi\xean \u0111\xe3 c\xf3 ng\xe0y h\u1ebft h\u1ea1n \u0111\xfang theo g\xf3i. Kh\xf4ng c\u1ea7n \u0111\u1ed3ng b\u1ed9."),setTimeout((()=>j("")),5e3)}catch(C){console.error("Error syncing membership:",C),T("L\u1ed7i khi \u0111\u1ed3ng b\u1ed9 g\xf3i th\xe0nh vi\xean"),setTimeout((()=>T("")),3e3)}finally{w(!1)}}},disabled:b,className:"md:mt-0 mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:b?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang c\u1eadp nh\u1eadt..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"C\u1eadp nh\u1eadt"]})})]})})]}),"rewards"===c&&(0,At.jsxs)("div",{className:"max-w-2xl space-y-4",children:[(0,At.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-orange-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("div",{className:"text-sm font-medium text-orange-800",children:(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"\u0110i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp KH\xd4NG \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7"})," - s\u1ebd b\u1ecb reset khi h\u1ebft h\u1ea1n g\xf3i"]})})})]})}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center mb-6",children:[(0,At.jsx)(ik,{className:"h-6 w-6 text-blue-500 mr-3"}),(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"C\xe0i \u0110\u1eb7t \u0110i\u1ec3m Th\u01b0\u1edfng \u0110\u0103ng Nh\u1eadp"})]}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"K\xedch ho\u1ea1t \u0111i\u1ec3m th\u01b0\u1edfng"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:"B\u1eadt/t\u1eaft h\u1ec7 th\u1ed1ng \u0111i\u1ec3m th\u01b0\u1edfng \u0111\u0103ng nh\u1eadp h\xe0ng ng\xe0y"})]}),(0,At.jsx)("button",{onClick:()=>A((e=>({...e,enabled:!e.enabled}))),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(m.enabled?"bg-blue-600":"bg-gray-200"),children:(0,At.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(m.enabled?"translate-x-6":"translate-x-1")})})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0110i\u1ec3m th\u01b0\u1edfng chung (Legacy)"}),(0,At.jsx)("input",{type:"number",min:"1",max:"100",value:m.points,onChange:e=>A((t=>({...t,points:parseInt(e.target.value)||1}))),className:"block w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"S\u1ed1 \u0111i\u1ec3m chung (s\u1ebd \u0111\u01b0\u1ee3c thay th\u1ebf b\u1eb1ng c\u1ea5u h\xecnh theo tier)"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0110i\u1ec3m th\u01b0\u1edfng theo h\u1ea1ng th\xe0nh vi\xean"}),(0,At.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(d).map((e=>{var t;let[n,r]=e;return(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700",children:[(0,At.jsx)("span",{className:"mr-2",children:r.icon}),r.name]}),(0,At.jsx)("input",{type:"number",min:"1",max:"100",value:(null===(t=m.tierRewards)||void 0===t?void 0:t[n])||1,onChange:e=>A((t=>({...t,tierRewards:{...t.tierRewards,[n]:parseInt(e.target.value)||1}}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsxs)("p",{className:"text-xs text-gray-500",children:[r.maxStars," sao \u2022 ",le(r.duration)]})]},n)}))}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"S\u1ed1 \u0111i\u1ec3m s\u1ebd \u0111\u01b0\u1ee3c c\u1ed9ng khi ng\u01b0\u1eddi d\xf9ng \u0111\u0103ng nh\u1eadp h\xe0ng ng\xe0y theo h\u1ea1ng th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 ng\xe0y t\u1ed1i \u0111a li\xean ti\u1ebfp"}),(0,At.jsx)("input",{type:"number",min:"7",max:"365",value:m.maxStreak,onChange:e=>A((t=>({...t,maxStreak:parseInt(e.target.value)||30}))),className:"block w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"S\u1ed1 ng\xe0y \u0111\u0103ng nh\u1eadp li\xean ti\u1ebfp t\u1ed1i \u0111a \u0111\u1ec3 nh\u1eadn th\u01b0\u1edfng"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"H\u1ec7 s\u1ed1 nh\xe2n th\u01b0\u1edfng (streak)"}),(0,At.jsx)("input",{type:"number",min:"1",max:"5",step:"0.1",value:m.bonusMultiplier,onChange:e=>A((t=>({...t,bonusMultiplier:parseFloat(e.target.value)||1}))),className:"block w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Nh\xe2n th\xeam \u0111i\u1ec3m khi \u0111\u0103ng nh\u1eadp li\xean ti\u1ebfp nhi\u1ec1u ng\xe0y"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode \u0111i\u1ec3m th\u01b0\u1edfng"}),(0,At.jsxs)("select",{value:m.intervalMode,onChange:e=>A((t=>({...t,intervalMode:e.target.value}))),className:"block w-32 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"daily",children:"H\xe0ng ng\xe0y"}),(0,At.jsx)("option",{value:"interval",children:"L\u1eb7p l\u1ea1i"})]}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Ch\u1ecdn c\xe1ch th\u1ee9c nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng"})]}),"interval"===m.intervalMode&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kho\u1ea3ng th\u1eddi gian \u0111i\u1ec3m th\u01b0\u1edfng (gi\u1edd)"}),(0,At.jsx)("input",{type:"number",min:"1",max:"24",value:m.claimInterval,onChange:e=>A((t=>({...t,claimInterval:parseInt(e.target.value)||1}))),className:"block w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"S\u1ed1 gi\u1edd gi\u1eefa c\xe1c l\u1ea7n nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3"}),(0,At.jsx)("textarea",{rows:3,value:m.description,onChange:e=>A((t=>({...t,description:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"M\xf4 t\u1ea3 v\u1ec1 h\u1ec7 th\u1ed1ng \u0111i\u1ec3m th\u01b0\u1edfng..."})]}),(0,At.jsx)("div",{className:"pt-4 border-t border-gray-200 text-center",children:(0,At.jsx)("button",{onClick:async()=>{y(!0);try{const e=await(async e=>{if(!Z())return!1;try{return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","dailyRewards"),{...e,updatedAt:(0,Hb.O5)()}),!0}catch(C){return console.error("Error saving daily rewards:",C),!1}})(m);e?(j("\u0110\xe3 c\u1eadp nh\u1eadt c\xe0i \u0111\u1eb7t \u0111i\u1ec3m th\u01b0\u1edfng th\xe0nh c\xf4ng!"),setTimeout((()=>j("")),3e3)):(T("L\u1ed7i khi l\u01b0u c\xe0i \u0111\u1eb7t \u0111i\u1ec3m th\u01b0\u1edfng"),setTimeout((()=>T("")),3e3))}catch(C){T("L\u1ed7i khi l\u01b0u c\xe0i \u0111\u1eb7t \u0111i\u1ec3m th\u01b0\u1edfng"),setTimeout((()=>T("")),3e3)}finally{y(!1)}},disabled:v,className:"inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:v?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang l\u01b0u..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2"}),"L\u01b0u C\xe0i \u0110\u1eb7t"]})})})]})]})]}),"expired"===c&&(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Th\xe0nh Vi\xean H\u1ebft H\u1ea1n"}),(0,At.jsxs)("p",{className:"text-xs text-blue-600 mt-1 hidden",children:["\u2705 ",(0,At.jsx)("strong",{children:"\u0110\xe3 c\u1ea3i thi\u1ec7n"}),": S\u1eed d\u1ee5ng 3 strategies \u0111\u1ec3 b\u1eaft t\u1ea5t c\u1ea3 users c\xf3 l\u1ecbch s\u1eed tier cao + tracking fields."]}),z&&(0,At.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(0,At.jsxs)("div",{className:"flex items-center gap-6 my-4",children:[(0,At.jsx)("span",{className:"text-orange-600 font-medium",children:"M\xe0u cam"})," = \u0111\xe3 reset v\u1ec1 Basic.",(0,At.jsxs)("p",{children:["\ud83d\udccb Cache: ",z.toLocaleTimeString("vi-VN"),H.length>0&&` (${H.length} records)`]})]}),H.length>0&&(0,At.jsxs)("div",{className:"mt-1 flex flex-wrap gap-2 text-xs",children:[(0,At.jsxs)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded",children:["\ud83d\udd34 ",H.filter((e=>e.isCurrentlyExpired)).length," \u0111ang h\u1ebft h\u1ea1n"]}),(0,At.jsxs)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded",children:["\ud83d\udfe0 ",H.filter((e=>e.wasResetToBasic)).length," \u0111\xe3 reset v\u1ec1 Basic"]}),(0,At.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["\ud83d\udd35 ",H.filter((e=>"has_history_flag"===e.trackingMethod)).length," c\xf3 tracking flag"]}),(0,At.jsxs)("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded",children:["\u26ab ",H.filter((e=>"transaction_history"===e.trackingMethod)).length," t\u1eeb transaction history"]})]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[(0,At.jsx)("button",{onClick:async()=>{if(!Z())return T("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y"),void setTimeout((()=>T("")),3e3);if(window.confirm("\u26a0\ufe0f B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt tracking field cho t\u1ea5t c\u1ea3 users c\xf3 l\u1ecbch s\u1eed tier cao?\n\nThao t\xe1c n\xe0y s\u1ebd:\n\u2022 Scan t\u1ea5t c\u1ea3 users trong h\u1ec7 th\u1ed1ng\n\u2022 T\xecm users c\xf3 l\u1ecbch s\u1eed upgrade trong starTransactions\n\u2022 Set field hasHighTierHistory = true\n\u2022 Th\xeam th\xf4ng tin firstHighTierDate v\xe0 lastHighTierDate\n\nThao t\xe1c n\xe0y c\xf3 th\u1ec3 m\u1ea5t v\xe0i ph\xfat v\u1edbi database l\u1edbn."))try{k(!0),j("\ud83d\udd04 \u0110ang c\u1eadp nh\u1eadt tracking fields cho t\u1ea5t c\u1ea3 users...");const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc")),t=await(0,Hb.GG)(e),n=(0,Hb.wP)(Qb.db);let r=0,s=0;for(const i of t.docs){const e=i.data();if(s++,e.email===rw)continue;const t=se(e.starTransactions||{}),a=Object.values(t).some((e=>e>0)),o=e.membershipTier&&"basic"!==e.membershipTier;if(a||o){const t={hasHighTierHistory:!0,updatedAt:(0,Hb.O5)()},s=Object.values(e.starTransactions||{}).filter((e=>"membership_upgrade"===e.type)).sort(((e,t)=>{var n,r;return(null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.timestamp))-(null!==(r=t.timestamp)&&void 0!==r&&r.toDate?t.timestamp.toDate():new Date(t.timestamp))}));if(s.length>0){const e=s[0],n=s[s.length-1];t.firstHighTierDate=e.timestamp,t.lastHighTierDate=n.timestamp}else o&&(t.firstHighTierDate=e.createdAt||(0,Hb.O5)(),t.lastHighTierDate=e.updatedAt||(0,Hb.O5)());const a=(0,Hb.doc)(Qb.db,"users",i.id);n.update(a,t),r++}}r>0?(await n.commit(),j(`\u2705 \u0110\xe3 c\u1eadp nh\u1eadt tracking fields cho ${r}/${s} users th\xe0nh c\xf4ng!`),Q([]),V(null),setTimeout((()=>{re(!0)}),1e3)):j("\u2139\ufe0f Kh\xf4ng t\xecm th\u1ea5y users n\xe0o c\u1ea7n c\u1eadp nh\u1eadt tracking fields."),setTimeout((()=>j("")),5e3)}catch(C){console.error("Error updating high-tier history:",C),T("L\u1ed7i khi c\u1eadp nh\u1eadt tracking fields: "+C.message),setTimeout((()=>T("")),5e3)}finally{k(!1)}},disabled:M,className:"inline-flex items-center px-3 py-2 border border-purple-300 rounded-md shadow-sm text-sm font-medium text-purple-700 bg-purple-50 hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:M?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-500 mr-2"}),"\u0110ang c\u1eadp nh\u1eadt..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Nk,{className:"h-4 w-4 mr-2"}),"C\u1eadp nh\u1eadt Tracking"]})}),(0,At.jsx)("button",{onClick:()=>re(!1),disabled:M,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:M?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"\u0110ang t\u1ea3i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"T\u1ea3i t\u1eeb Cache"]})}),(0,At.jsx)("button",{onClick:()=>re(!0),disabled:M,className:"inline-flex items-center px-3 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:M?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"\u0110ang t\u1ea3i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"L\xe0m m\u1edbi"]})}),(0,At.jsx)("button",{onClick:()=>{Q([]),V(null),re(!0,1)},disabled:M,className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50",children:M?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-500 mr-2"}),"\u0110ang t\u1ea3i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"X\xf3a Cache & T\u1ea3i l\u1ea1i"]})})]})]}),S&&(0,At.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(tk,{className:"h-5 w-5 text-green-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("p",{className:"text-sm text-green-800",children:S})})]})}),C&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(ky,{className:"h-5 w-5 text-red-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsx)("p",{className:"text-sm text-red-800",children:C})})]})}),q>0&&(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,At.jsx)("span",{className:"font-medium",children:"\ud83d\udcca T\u1ed5ng quan:"})," Hi\u1ec3n th\u1ecb ",Math.min($,q)," trong ",q," th\xe0nh vi\xean",q>$&&(0,At.jsxs)("span",{className:"ml-2",children:["(Trang ",K," / ",Math.ceil(q/$),")"]})]}),(0,At.jsx)("div",{className:"text-xs text-blue-600",children:"\ud83d\udca1 Ph\xe2n trang s\u1ebd hi\u1ec3n th\u1ecb b\xean d\u01b0\u1edbi danh s\xe1ch"})]})}),(0,At.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:M?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-500",children:"\u0110ang t\u1ea3i danh s\xe1ch th\xe0nh vi\xean h\u1ebft h\u1ea1n..."})]}):0===E.length?(0,At.jsxs)("div",{className:"p-8 text-center",children:[(0,At.jsx)(jw,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Kh\xf4ng c\xf3 th\xe0nh vi\xean h\u1ebft h\u1ea1n"}),(0,At.jsx)("p",{className:"text-gray-500 text-xs",children:"T\u1ea5t c\u1ea3 th\xe0nh vi\xean \u0111\u1ec1u c\xf2n hi\u1ec7u l\u1ef1c ho\u1eb7c \u0111ang s\u1eed d\u1ee5ng g\xf3i Basic."})]}):(0,At.jsx)("ul",{className:"divide-y divide-gray-200",children:E.map((e=>{const t=e.wasResetToBasic?e.originalTier:e.membershipTier,n=ce(t),r=ae(n.color),s=Math.floor((new Date-e.membershipExpiry)/864e5),i={currently_expired:{text:"H\u1ebft h\u1ea1n",color:"bg-red-100 text-red-800",icon:"\ud83d\udd34"},has_history_flag:{text:"Tracking Flag",color:"bg-blue-100 text-blue-800",icon:"\ud83d\udd35"},transaction_history:{text:"Transaction History",color:"bg-gray-100 text-gray-800",icon:"\u26ab"},full_scan:{text:"Full Scan",color:"bg-yellow-100 text-yellow-800 !hidden",icon:"\ud83d\udfe1"}}[e.trackingMethod]||{text:"Unknown",color:"bg-gray-100 text-gray-600",icon:"\u2753"};return(0,At.jsx)("li",{className:"px-6 py-4 "+(e.wasResetToBasic?"bg-orange-50 border-l-4 border-orange-400":""),children:(0,At.jsxs)("div",{className:"flex md:flex-row flex-col gap-y-4 md:items-center md:justify-between ",children:[(0,At.jsxs)("div",{className:"flex items-center md:space-x-4",children:[(0,At.jsx)("div",{className:"flex-shrink-0 hidden md:block",children:(0,At.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center "+(e.wasResetToBasic?"bg-orange-200":"bg-gray-300"),children:(0,At.jsx)(Ck,{className:"h-6 w-6 "+(e.wasResetToBasic?"text-orange-600":"text-gray-600")})})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${r.bg} ${r.text}`,children:[n.icon," ",n.label]}),e.isCurrentlyExpired&&(0,At.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"\u0110\xe3 h\u1ebft h\u1ea1n"}),e.isExpiringSoon&&!e.isCurrentlyExpired&&(0,At.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"S\u1eafp h\u1ebft h\u1ea1n"}),e.wasResetToBasic&&(0,At.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:"\u0110\xe3 reset v\u1ec1 Basic"}),(0,At.jsxs)("span",{className:`hidden md:inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${i.color}`,children:[i.icon," ",i.text]}),e.lastLoginAt&&(0,At.jsxs)("span",{className:"items-center px-2 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs md:inline-flex hidden",children:[(0,At.jsx)(Iy,{className:"h-3 w-3 mr-1"}),"Login cu\u1ed1i: ",ue(e.lastLoginAt,e)]})]}),(0,At.jsxs)("div",{className:"flex md:flex-row flex-col my-2 gap-2 md:items-center md:space-x-4 text-xs text-gray-500",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(EM,{className:"h-4 w-4 mr-1"}),e.email]}),(0,At.jsxs)("div",{className:"flex items-center hidden",children:[(0,At.jsx)(Iy,{className:"h-4 w-4 mr-1"}),e.wasResetToBasic?`\u0110\xe3 reset ${s} ng\xe0y tr\u01b0\u1edbc`:`H\u1ebft h\u1ea1n ${s} ng\xe0y tr\u01b0\u1edbc`]}),(0,At.jsxs)("div",{className:"flex items-center "+(e.isExpiringSoon&&!e.isCurrentlyExpired?"text-orange-900":"text-red-600"),children:[(0,At.jsx)(ik,{className:"h-4 w-4 mr-1"}),e.isExpiringSoon&&!e.isCurrentlyExpired?"H\u1ebft h\u1ea1n l\xfac":"H\u1ebft h\u1ea1n",": ",e.membershipExpiry?new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e.membershipExpiry):"Kh\xf4ng x\xe1c \u0111\u1ecbnh",void 0!==e.daysUntilExpiry&&(0,At.jsxs)("span",{className:"ml-1 text-xs",children:["(",e.daysUntilExpiry>0?`c\xf2n ${e.daysUntilExpiry} ng\xe0y`:`${Math.abs(e.daysUntilExpiry)} ng\xe0y tr\u01b0\u1edbc`,")"]})]}),e.wasResetToBasic&&(0,At.jsxs)("div",{className:"flex items-center text-orange-600",children:[(0,At.jsx)(jw,{className:"h-4 w-4 mr-1"}),"Tier hi\u1ec7n t\u1ea1i: Basic"]})]}),(0,At.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-gray-500 hidden ",children:[e.firstHighTierDate&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-700 rounded",children:[(0,At.jsx)(ik,{className:"h-3 w-3 mr-1"}),"L\u1ea7n \u0111\u1ea7u tier cao: ",ue(e.firstHighTierDate,e)]}),e.lastHighTierDate&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[(0,At.jsx)(ik,{className:"h-3 w-3 mr-1"}),"L\u1ea7n cu\u1ed1i tier cao: ",ue(e.lastHighTierDate,e)]})]}),(0,At.jsxs)("div",{className:"mt-2 flex items-center space-x-3 text-xs text-gray-500 hidden",children:[(0,At.jsx)("span",{className:"font-medium",children:"\u0110i\u1ec3m hi\u1ec7n t\u1ea1i:"}),(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 text-yellow-800",children:[(0,At.jsx)(Tw,{className:"h-3 w-3 mr-1"}),e.stars||0," sao"]}),e.adminStars>0&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-green-100 text-green-800",children:["\ud83d\udc8e ",e.adminStars," admin"]})]}),(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,At.jsxs)("div",{className:"flex flex-col gap-y-2 md:items-center md:gap-y-0 md:justify-start md:flex-row md:space-x-3",children:[(0,At.jsx)("span",{className:"font-medium",children:"L\u1ecbch s\u1eed n\xe2ng c\u1ea5p:"}),(0,At.jsxs)("div",{className:"flex items-center md:space-x-3 hidden",children:[e.upgradeHistory.standard>0&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-blue-100 text-blue-800",children:[e.upgradeHistory.standard," Standard"]}),e.upgradeHistory.premium>0&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-purple-100 text-purple-800",children:[e.upgradeHistory.premium," Premium"]}),e.upgradeHistory.master>0&&(0,At.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 text-yellow-800",children:[e.upgradeHistory.master," Master"]}),0===e.upgradeHistory.standard&&0===e.upgradeHistory.premium&&0===e.upgradeHistory.master&&(0,At.jsx)("span",{className:"text-gray-400",children:"Ch\u01b0a c\xf3 l\u1ecbch s\u1eed n\xe2ng c\u1ea5p"})]}),(e.upgradeHistory.standard>0||e.upgradeHistory.premium>0||e.upgradeHistory.master>0)&&(0,At.jsx)("button",{onClick:()=>{return t=e.id,void J((e=>({...e,[t]:!e[t]})));var t},className:"inline-flex items-center md:px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",children:Y[e.id]?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(cL,{className:"h-3 w-3 mr-1"}),"\u1ea8n chi ti\u1ebft"]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(dL,{className:"h-3 w-3 mr-1"}),"Xem chi ti\u1ebft"]})})]}),Y[e.id]&&(0,At.jsx)("div",{className:"mt-2 space-y-1 border-l border-gray-200 pl-3",children:(()=>{const t=(e=>{if(!e||"object"!==typeof e)return[];const t=[];return Object.entries(e).forEach((e=>{let[n,r]=e;if("membership_upgrade"===r.type||"membership_renewal"===r.type){let e=r.tier||r.membershipTier||r.package||r.packageType||r.targetTier||r.details&&r.details.newTier;if(!e&&r.description){const t=r.description.toLowerCase();t.includes("standard")?e="standard":t.includes("premium")?e="premium":t.includes("master")?e="master":t.includes("basic")&&(e="basic")}t.push({id:n,type:r.type,tier:e,amount:r.amount,date:r.createdAt||r.timestamp,description:r.description||`${"membership_upgrade"===r.type?"N\xe2ng c\u1ea5p":"Gia h\u1ea1n"} ${e||"Unknown"}`})}})),t.sort(((e,t)=>{var n,r;const s=null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date);return(null!==(r=t.date)&&void 0!==r&&r.toDate?t.date.toDate():new Date(t.date))-s}))})(e.starTransactions);return 0===t.length?(0,At.jsx)("div",{className:"text-gray-400 text-xs",children:"Kh\xf4ng t\xecm th\u1ea5y chi ti\u1ebft l\u1ecbch s\u1eed"}):t.map(((e,t)=>{var n;const r=e.tier||"unknown",s=d[r]||{name:"standard"===r?"Standard":"premium"===r?"Premium":"master"===r?"Master":"basic"===r?"Basic":r.charAt(0).toUpperCase()+r.slice(1),icon:"standard"===r?"\ud83c\udf1f":"premium"===r?"\ud83d\udc8e":"master"===r?"\ud83d\udc51":"basic"===r?"\u2b50":"\ud83d\udce6"},i="membership_upgrade"===e.type?"N\xe2ng c\u1ea5p":"Gia h\u1ea1n",a=e.date?new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(null!==(n=e.date)&&void 0!==n&&n.toDate?e.date.toDate():new Date(e.date)):"Kh\xf4ng r\xf5 th\u1eddi gian";return(0,At.jsx)("div",{className:"py-1 text-xs",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+("standard"===r?"bg-blue-100 text-blue-800":"premium"===r?"bg-purple-100 text-purple-800":"master"===r?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:s.icon}),(0,At.jsxs)("span",{className:"text-gray-700",children:[i," g\xf3i ",s.name," ",a]}),e.amount&&(0,At.jsxs)("span",{className:"text-gray-500 text-xs",children:["(-",e.amount," sao)"]})]})},e.id)}))})()})]})]})]}),(0,At.jsx)("div",{className:"flex-shrink-0",children:e.isCurrentlyExpired||e.wasResetToBasic?(0,At.jsxs)("button",{onClick:()=>(e=>{P(e);const t=e.wasResetToBasic?e.originalTier:e.membershipTier;U(t),I(!0)})(e),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,At.jsx)($M,{className:"h-4 w-4 mr-1"}),e.wasResetToBasic?"N\xe2ng c\u1ea5p l\u1ea1i":"Gia h\u1ea1n"]}):e.isExpiringSoon?(0,At.jsx)("div",{className:"text-xs text-orange-600 px-3 py-2 text-center"}):(0,At.jsx)("div",{className:"text-xs text-gray-500 px-3 py-2 text-center"})})]})},e.id)}))})}),q>0&&(0,At.jsx)(iI,{currentPage:K,totalPages:Math.ceil(q/$),totalItems:q,itemsPerPage:$,startIndex:(K-1)*$,endIndex:Math.min(K*$,q),onPageChange:e=>re(!1,e),onItemsPerPageChange:e=>{X(e)},className:"rounded-t-none"})]}),g&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Ch\u1ec9nh s\u1eeda g\xf3i ",g.name]}),(0,At.jsx)("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean g\xf3i"}),(0,At.jsx)("input",{type:"text",value:g.name,onChange:e=>p((t=>({...t,name:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon"}),(0,At.jsx)("input",{type:"text",value:g.icon,onChange:e=>p((t=>({...t,icon:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\u1ed1 sao t\u1ed1i \u0111a"}),(0,At.jsx)("input",{type:"number",min:"1",value:g.maxStars,onChange:e=>p((t=>({...t,maxStars:parseInt(e.target.value)||1}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th\u1eddi h\u1ea1n"}),(0,At.jsxs)("select",{value:g.duration,onChange:e=>p((t=>({...t,duration:parseFloat(e.target.value)||1}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"0.0069",children:"10 ph\xfat"}),(0,At.jsx)("option",{value:"0.0417",children:"1 gi\u1edd"}),(0,At.jsx)("option",{value:"1",children:"1 ng\xe0y"}),(0,At.jsx)("option",{value:"7",children:"7 ng\xe0y"}),(0,At.jsx)("option",{value:"30",children:"30 ng\xe0y"}),(0,At.jsx)("option",{value:"90",children:"90 ng\xe0y"}),(0,At.jsx)("option",{value:"180",children:"180 ng\xe0y"}),(0,At.jsx)("option",{value:"365",children:"365 ng\xe0y"})]}),(0,At.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:le(g.duration)})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Chu k\u1ef3 reset"}),(0,At.jsxs)("select",{value:g.resetPeriod,onChange:e=>p((t=>({...t,resetPeriod:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"daily",children:"H\xe0ng ng\xe0y"}),(0,At.jsx)("option",{value:"weekly",children:"H\xe0ng tu\u1ea7n"}),(0,At.jsx)("option",{value:"monthly",children:"H\xe0ng th\xe1ng"}),(0,At.jsx)("option",{value:"yearly",children:"H\xe0ng n\u0103m"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe0u s\u1eafc"}),(0,At.jsxs)("select",{value:g.color,onChange:e=>p((t=>({...t,color:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,At.jsx)("option",{value:"gray",children:"X\xe1m"}),(0,At.jsx)("option",{value:"blue",children:"Xanh d\u01b0\u01a1ng"}),(0,At.jsx)("option",{value:"purple",children:"T\xedm"}),(0,At.jsx)("option",{value:"yellow",children:"V\xe0ng"}),(0,At.jsx)("option",{value:"orange",children:"Cam"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,At.jsx)("textarea",{rows:2,value:g.description,onChange:e=>p((t=>({...t,description:e.target.value}))),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",checked:g.enabled,onChange:e=>p((t=>({...t,enabled:e.target.checked}))),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,At.jsx)("label",{className:"ml-2 text-sm text-gray-700",children:"K\xedch ho\u1ea1t g\xf3i n\xe0y"})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[(0,At.jsx)("button",{onClick:()=>p(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:async()=>{if(g){if(!g.name||!g.icon||!g.color||!g.duration||!g.maxStars||!g.resetPeriod)return T("Vui l\xf2ng \u0111i\u1ec1n \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin b\u1eaft bu\u1ed9c"),void setTimeout((()=>T("")),3e3);x(g.key);try{const e={...d,[g.key]:a(g,ee[g.key]||{name:"",icon:"\u2b50",color:"gray",duration:30,maxStars:20,resetPeriod:"monthly",description:"",enabled:!0})},t=await(async e=>{if(!Z())return!1;try{const t={};for(const[n,r]of Object.entries(e)){const e=ee[n]||{name:"",icon:"\u2b50",color:"gray",duration:30,maxStars:20,resetPeriod:"monthly",description:"",enabled:!0};t[n]=a(r,e)}return await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","membershipPackages"),{packages:t,updatedAt:(0,Hb.O5)()}),!0}catch(C){return console.error("Error saving packages:",C),!1}})(e);t?(h(e),p(null),j('\u0110\xe3 c\u1eadp nh\u1eadt g\xf3i th\xe0nh vi\xean th\xe0nh c\xf4ng! Tip: B\u1ea1n c\xf3 th\u1ec3 \u0111\u1ed3ng b\u1ed9 s\u1ed1 sao cho t\u1ea5t c\u1ea3 th\xe0nh vi\xean b\u1eb1ng n\xfat "\u0110\u1ed3ng b\u1ed9 sao" b\xean d\u01b0\u1edbi.'),setTimeout((()=>j("")),5e3)):(T("L\u1ed7i khi l\u01b0u g\xf3i th\xe0nh vi\xean"),setTimeout((()=>T("")),3e3))}catch(C){console.error("Error saving package:",C),T("L\u1ed7i khi l\u01b0u g\xf3i th\xe0nh vi\xean"),setTimeout((()=>T("")),3e3)}finally{x(null)}}},disabled:f===g.key,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:f===g.key?"\u0110ang l\u01b0u...":"L\u01b0u"})]})]})}),L&&D&&(0,At.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,At.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Gia h\u1ea1n th\xe0nh vi\xean"}),(0,At.jsx)("button",{onClick:()=>{I(!1),P(null),U("")},className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)(ky,{className:"h-6 w-6"})})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,At.jsx)(Ck,{className:"h-6 w-6 text-gray-600"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:"text-sm font-medium text-gray-900",children:D.displayName||(null===(e=D.profile)||void 0===e?void 0:e.displayName)||"Ch\u01b0a c\xf3 t\xean"}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:D.email})]})]}),(0,At.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:[(0,At.jsxs)("p",{children:["G\xf3i hi\u1ec7n t\u1ea1i: ",(0,At.jsx)("span",{className:"font-medium",children:ce(D.membershipTier).label})]}),(0,At.jsxs)("p",{children:["\u0110i\u1ec3m hi\u1ec7n t\u1ea1i: ",(0,At.jsxs)("span",{className:"font-medium",children:[D.stars||0," sao"]})]}),D.adminStars>0&&(0,At.jsxs)("p",{className:"text-xs text-green-600",children:["\ud83d\udc8e \u0110i\u1ec3m admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7: ",D.adminStars," sao"]}),(0,At.jsxs)("p",{children:["H\u1ebft h\u1ea1n: ",(0,At.jsx)("span",{className:"font-medium text-red-600",children:D.membershipExpiry.toLocaleString("vi-VN")})]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ch\u1ecdn g\xf3i gia h\u1ea1n"}),(0,At.jsx)("div",{className:"space-y-2",children:["standard","premium","master"].map((e=>{const t=d[e];if(!t||!t.enabled)return null;const n=ae(t.color),r=F===e;return(0,At.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors "+(r?`${n.border} ${n.bg} border-2`:"border-gray-200 hover:border-gray-300"),children:[(0,At.jsx)("input",{type:"radio",name:"selectedPackage",value:e,checked:r,onChange:e=>U(e.target.value),className:"sr-only"}),(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("span",{className:"text-xl",children:t.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("p",{className:`font-medium ${r?n.text:"text-gray-900"}`,children:t.name}),(0,At.jsxs)("p",{className:"text-sm text-gray-500",children:[le(t.duration)," \u2022 ",t.maxStars," sao \u2022 ",oe(t.resetPeriod)]})]})]})]},e)}))})]}),F&&(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)($M,{className:"h-5 w-5 text-blue-400"})}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"X\xe1c nh\u1eadn gia h\u1ea1n"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:[(0,At.jsxs)("p",{children:["Th\xe0nh vi\xean s\u1ebd \u0111\u01b0\u1ee3c gia h\u1ea1n l\xean g\xf3i ",(0,At.jsx)("strong",{children:null===(n=d[F])||void 0===n?void 0:n.name})]}),(0,At.jsxs)("p",{children:["Th\u1eddi h\u1ea1n m\u1edbi: ",(0,At.jsx)("strong",{children:le(null===(r=d[F])||void 0===r?void 0:r.duration)})]}),(0,At.jsxs)("p",{children:["S\u1ed1 sao m\u1edbi: ",(0,At.jsxs)("strong",{children:[null===(s=d[F])||void 0===s?void 0:s.maxStars," sao"]})]}),D.adminStars>0&&(0,At.jsxs)("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded",children:[(0,At.jsxs)("p",{className:"text-xs text-green-700",children:["\ud83d\udc8e ",(0,At.jsx)("strong",{children:"\u0110i\u1ec3m admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7:"})," ",D.adminStars," sao"]}),(0,At.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["T\u1ed5ng \u0111i\u1ec3m sau gia h\u1ea1n: ",(0,At.jsxs)("strong",{children:[(null===(i=d[F])||void 0===i?void 0:i.maxStars)+D.adminStars," sao"]})]})]})]})]})]})})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200",children:[(0,At.jsx)("button",{onClick:()=>{I(!1),P(null),U("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:async()=>{if(D&&F)try{O(!0);const e=d[F];if(!e)return T("G\xf3i th\xe0nh vi\xean kh\xf4ng h\u1ee3p l\u1ec7"),void setTimeout((()=>T("")),3e3);const t=D.membershipTier||"basic";if(t===F)return T("Th\xe0nh vi\xean \u0111\xe3 \u0111ang s\u1eed d\u1ee5ng g\xf3i n\xe0y"),void setTimeout((()=>T("")),3e3);const n=(0,Hb.doc)(Qb.db,"users",D.id),r=await(0,Hb.getDoc)(n);if(!r.exists())return T("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin th\xe0nh vi\xean"),void setTimeout((()=>T("")),3e3);const s=r.data(),i=s.stars||0,a=s.adminStars||0,o=d[t]||ee[t],l=d[F],c=(null===o||void 0===o?void 0:o.maxStars)||0,u=(null===l||void 0===l?void 0:l.maxStars)||0;let h=i-c;h+=u,h<u+a&&(h=u+a);const m=new Date;let A;if(l.duration<1){const e=24*l.duration*60;A=new Date(m.getTime()+60*e*1e3)}else A=new Date(m.getTime()+24*l.duration*60*60*1e3);const g={membershipTier:F,membershipExpiry:A,stars:h,updatedAt:(0,Hb.O5)()};"basic"!==F&&(g.hasHighTierHistory=!0,g.lastHighTierDate=(0,Hb.O5)(),s.firstHighTierDate||(g.firstHighTierDate=(0,Hb.O5)())),await(0,Hb.BN)(n,g,{merge:!0});if(!!0)return T("L\u1ed7i khi gia h\u1ea1n th\xe0nh vi\xean: Kh\xf4ng th\u1ec3 n\xe2ng c\u1ea5p g\xf3i"),void setTimeout((()=>T("")),5e3);{const r={type:"membership_renewal",tier:F,amount:0,description:`Admin gia h\u1ea1n l\xean g\xf3i ${e.name}`,timestamp:(0,Hb.O5)(),createdAt:(0,Hb.O5)(),details:{oldTier:t,newTier:F,oldExpiry:D.membershipExpiry,oldStars:i,newStars:h,adminStars:a,adminRenewal:!0}},o=(0,Hb.doc)((0,Hb.rJ)(Qb.db,"users",D.id,"starTransactions"));await(0,Hb.BN)(o,r);const l={...s.starTransactions||{},[o.id]:r};await(0,Hb.BN)(n,{starTransactions:l},{merge:!0});const c=a>0?` (bao g\u1ed3m ${a} \u0111i\u1ec3m admin \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7)`:"";_(`\u2705 \u0110\xe3 gia h\u1ea1n th\xe0nh vi\xean ${D.email} l\xean g\xf3i ${e.name} th\xe0nh c\xf4ng! \n        \ud83d\udcca T\u1ed5ng \u0111i\u1ec3m: ${h} sao${c}\n        \ud83d\udcdd L\u1ecbch s\u1eed n\xe2ng c\u1ea5p \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt`)}I(!1),P(null),U(""),setTimeout((()=>_("")),5e3),Q([]),V(null),await re(!0)}catch(C){console.error("Error renewing membership:",C),T("L\u1ed7i khi gia h\u1ea1n th\xe0nh vi\xean: "+C.message),setTimeout((()=>T("")),5e3)}finally{O(!1)}},disabled:!F||R,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:R?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang gia h\u1ea1n..."]}):"Gia h\u1ea1n"})]})]})})]})})},HI=e=>({quick:t=>e(t,"info",iM.DURATION.FAST),success:t=>e(t,"success"),warning:t=>e(t,"warning"),error:t=>e(t,"error"),info:t=>e(t,"info"),slow:t=>e(t,"info",iM.DURATION.SLOW),verySlow:t=>e(t,"error",iM.DURATION.VERY_SLOW),manual:t=>e(t,"info",iM.DURATION.MANUAL),custom:(t,n,r)=>e(t,n,r)}),QI={SAVE_SUCCESS:"L\u01b0u th\xe0nh c\xf4ng!",SAVE_ERROR:"L\u1ed7i khi l\u01b0u d\u1eef li\u1ec7u",DELETE_SUCCESS:"X\xf3a th\xe0nh c\xf4ng!",DELETE_ERROR:"L\u1ed7i khi x\xf3a d\u1eef li\u1ec7u",LOAD_ERROR:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u",NETWORK_ERROR:"L\u1ed7i k\u1ebft n\u1ed1i m\u1ea1ng",PERMISSION_ERROR:"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n thao t\xe1c n\xe0y",VALIDATION_ERROR:"D\u1eef li\u1ec7u kh\xf4ng h\u1ee3p l\u1ec7",LOGIN_SUCCESS:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng!",LOGIN_ERROR:"\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",LOGOUT_SUCCESS:"\u0110\u0103ng xu\u1ea5t th\xe0nh c\xf4ng!",COPY_SUCCESS:"\u0110\xe3 sao ch\xe9p v\xe0o clipboard",UPLOAD_SUCCESS:"T\u1ea3i l\xean th\xe0nh c\xf4ng!",UPLOAD_ERROR:"L\u1ed7i khi t\u1ea3i l\xean file"};function zI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const VI=t.forwardRef(zI),KI=()=>{const[e,n]=(0,t.useState)(!0),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)({}),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)({pageStats:[],membershipStats:[],topUsers:[],totalStarsSpent:0,totalTransactions:0,mostUsedPage:null,mostActiveTier:null}),[d,h]=(0,t.useState)(!0),{showToast:m}=uM(),A=HI(m),g=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw},p=[{key:"calendar",displayName:"Xem ng\xe0y",description:"Xem ng\xe0y t\u1ed1t x\u1ea5u",icon:(0,At.jsx)(Iy,{className:"h-5 w-5"}),defaultLockedForBasic:!1},{key:"solar",displayName:"H\u1ec7 M\u1eb7t Tr\u1eddi",description:"Xem h\u1ec7 m\u1eb7t tr\u1eddi 3D",icon:(0,At.jsx)(VI,{className:"h-5 w-5"}),defaultLockedForBasic:!1},{key:"battu",displayName:"B\xe1t T\u1ef1",description:"Xem b\xe1t t\u1ef1 c\xe1 nh\xe2n",icon:(0,At.jsx)(OM,{className:"h-5 w-5"}),defaultLockedForBasic:!1},{key:"luchao",displayName:"L\u1ee5c H\xe0o",description:"Xem l\u1ee5c h\xe0o d\u1ef1 \u0111o\xe1n",icon:(0,At.jsx)(kL,{className:"h-5 w-5"}),defaultLockedForBasic:!1},{key:"lakinh",displayName:"La Kinh",description:"Xem la kinh phong th\u1ee7y",icon:(0,At.jsx)(wL,{className:"h-5 w-5"}),defaultLockedForBasic:!0},{key:"kymon",displayName:"K\u1ef3 M\xf4n",description:"H\u1ecdc v\u1ec1 k\xfd m\xf4n \u0111\u1ed9n gi\xe1p",icon:(0,At.jsx)(OM,{className:"h-5 w-5"}),defaultLockedForBasic:!0}],f={enabled:!1,pointsToDeduct:1,countdownSeconds:5,cooldownMinutes:60,displayName:"",description:"",lockedForBasic:!1};(0,t.useEffect)((()=>{v(),x()}),[]);const x=async()=>{if(g())try{h(!0);const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),t=await(0,Hb.GG)(e);let n=0,r=0;const s={},i={},a=new Map;p.forEach((e=>{s[e.key]={pageName:e.displayName,totalStars:0,transactionCount:0,userCount:0}})),["basic","standard","premium","master"].forEach((e=>{i[e]={tierName:e,totalStars:0,transactionCount:0,userCount:0}}));for(const u of t.docs){const e=u.data(),t=u.id,o=e.membershipTier||"basic",l=e.starTransactions||{};let c=0,d=0;const h=new Set;Object.entries(l).forEach((e=>{let[t,a]=e;if("spend"===a.type){const e=a.amount||0,t=a.reason||"";if(n+=e,r++,c+=e,d++,i[o]&&(i[o].totalStars+=e,i[o].transactionCount++),p.forEach((n=>{(t.includes(n.key)||t.includes(n.displayName))&&(s[n.key].totalStars+=e,s[n.key].transactionCount++,h.add(n.key))})),t.includes("Temporary access to")){const n=t.replace("Temporary access to ",""),r=p.find((e=>e.key===n||e.displayName===n));r&&s[r.key]&&(s[r.key].totalStars+=e,s[r.key].transactionCount++,h.add(r.key))}}})),h.forEach((e=>{s[e]&&s[e].userCount++})),d>0&&i[o]&&i[o].userCount++,c>0&&a.set(t,{userId:t,email:e.email,displayName:e.displayName||e.username||"Unknown",membershipTier:o,starsSpent:c,transactionCount:d,lastTransaction:Math.max(...Object.values(l).filter((e=>"spend"===e.type)).map((e=>e.timestamp||0)))})}const o=Object.values(s).filter((e=>e.totalStars>0)).sort(((e,t)=>t.totalStars-e.totalStars)),l=Object.values(i).filter((e=>e.totalStars>0)).sort(((e,t)=>t.totalStars-e.totalStars)),c=Array.from(a.values()).sort(((e,t)=>t.starsSpent-e.starsSpent)).slice(0,5),d=o[0]||null,m=l[0]||null;u({pageStats:o,membershipStats:l,topUsers:c,totalStarsSpent:n,totalTransactions:r,mostUsedPage:d,mostActiveTier:m})}catch(e){console.error("Error loading statistics:",e),A.error("L\u1ed7i khi t\u1ea3i th\u1ed1ng k\xea")}finally{h(!1)}else h(!1)},v=async()=>{if(g())try{n(!0);const t=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"admin","pagePointsDeduction"));if(t.exists()){var e;const n=t.data(),r=n.pages||{},s={};p.forEach((e=>{s[e.key]={...f,displayName:e.displayName,description:e.description,lockedForBasic:e.defaultLockedForBasic,...r[e.key]}})),a(s),l((null===(e=n.updatedAt)||void 0===e?void 0:e.toDate())||null);p.filter((e=>!r[e.key])).length>0&&await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","pagePointsDeduction"),{pages:s,updatedAt:new Date,updatedBy:"auto-complete"})}else{const e={};p.forEach((t=>{e[t.key]={...f,displayName:t.displayName,description:t.description,lockedForBasic:t.defaultLockedForBasic}})),a(e),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","pagePointsDeduction"),{pages:e,updatedAt:new Date,updatedBy:"admin-init"})}}catch(t){console.error("Error loading page configs:",t),A.error("L\u1ed7i khi t\u1ea3i c\u1ea5u h\xecnh")}finally{n(!1)}},y=(e,t,n)=>{a((r=>({...r,[e]:{...r[e],[t]:n}})))},b=e=>{const t=p.find((t=>t.key===e)),n=i[e]||{...f,displayName:(null===t||void 0===t?void 0:t.displayName)||e,description:(null===t||void 0===t?void 0:t.description)||"",lockedForBasic:(null===t||void 0===t?void 0:t.defaultLockedForBasic)||!1};return{...n,pointsToDeduct:n.pointsToDeduct||f.pointsToDeduct,countdownSeconds:n.countdownSeconds||f.countdownSeconds,cooldownMinutes:n.cooldownMinutes||f.cooldownMinutes,enabled:Boolean(n.enabled),lockedForBasic:Boolean(n.lockedForBasic)}};return e?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i c\u1ea5u h\xecnh..."})]})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex md:flex-row flex-col md:gap-0 gap-4 justify-between items-start",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,At.jsx)(Nk,{className:"h-7 w-7 mr-3 text-blue-600"}),"Qu\u1ea3n l\xfd tr\u1eeb \u0111i\u1ec3m trang"]}),(0,At.jsx)("p",{className:"text-gray-600 mt-1",children:"C\u1ea5u h\xecnh s\u1ed1 \u0111i\u1ec3m b\u1ecb tr\u1eeb v\xe0 th\u1eddi gian countdown cho m\u1ed7i trang"}),o&&(0,At.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["C\u1eadp nh\u1eadt cu\u1ed1i: ",o.toLocaleString("vi-VN")," - Real-time sync \u0111ang ho\u1ea1t \u0111\u1ed9ng"]})]}),(0,At.jsx)("button",{onClick:async()=>{try{s(!0),A.success("\u2705 Ch\u1ee9c n\u0103ng setup \u0111\xe3 \u0111\u01b0\u1ee3c lo\u1ea1i b\u1ecf. Vui l\xf2ng c\u1ea5u h\xecnh th\u1ee7 c\xf4ng."),await v()}catch(e){console.error("Setup error:",e),A.error("\u274c L\u1ed7i kh\u1edfi t\u1ea1o c\u1ea5u h\xecnh")}finally{s(!1)}},disabled:r,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 shadow-sm",children:r?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang setup..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Nk,{className:"h-4 w-4 mr-2"}),"Setup m\u1eb7c \u0111\u1ecbnh"]})})]}),(0,At.jsx)(yI,{statistics:c,availablePages:p,statsLoading:d,onRefresh:x}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Real-time Sync: \u0110ang ho\u1ea1t \u0111\u1ed9ng"})]}),(0,At.jsx)("span",{className:"text-xs text-blue-600",children:"Client s\u1ebd nh\u1eadn c\u1eadp nh\u1eadt ngay l\u1eadp t\u1ee9c"})]})}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3  gap-6",children:p.map((e=>{const t=b(e.key);return(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"text-blue-500 mr-3",children:e.icon}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.displayName}),(0,At.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,At.jsx)("button",{onClick:()=>y(e.key,"enabled",!t.enabled),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(t.enabled?"bg-blue-600":"bg-gray-200"),children:(0,At.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "+(t.enabled?"translate-x-5":"translate-x-0")})})]}),(0,At.jsx)("div",{className:"mb-4 p-3 rounded-lg border-l-4 border-l-blue-500 bg-blue-50",children:(0,At.jsxs)("div",{className:"flex items-center",children:[t.enabled?(0,At.jsx)(LM,{className:"h-4 w-4 text-blue-500 mr-2"}):(0,At.jsx)(MM,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium "+(t.enabled?"text-blue-800":"text-gray-600"),children:t.enabled?"\u0110ang b\u1eadt - S\u1ebd tr\u1eeb \u0111i\u1ec3m":"\u0110ang t\u1eaft - Kh\xf4ng tr\u1eeb \u0111i\u1ec3m"})]})}),(0,At.jsxs)("div",{className:"mb-4 p-3 rounded-lg border-l-4 border-l-orange-500 bg-orange-50",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[t.lockedForBasic?(0,At.jsx)(jT,{className:"h-4 w-4 text-orange-500 mr-2"}):(0,At.jsx)(TT,{className:"h-4 w-4 text-green-500 mr-2"}),(0,At.jsx)("span",{className:"text-sm font-medium "+(t.lockedForBasic?"text-orange-800":"text-green-800"),children:t.lockedForBasic?"Kh\xf3a v\u1edbi h\u1ea1ng Basic":"M\u1edf v\u1edbi h\u1ea1ng Basic"})]}),(0,At.jsx)("button",{onClick:()=>y(e.key,"lockedForBasic",!t.lockedForBasic),className:"relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 "+(t.lockedForBasic?"bg-orange-600":"bg-green-600"),children:(0,At.jsx)("span",{className:"pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out "+(t.lockedForBasic?"translate-x-4":"translate-x-0")})})]}),(0,At.jsx)("p",{className:"text-xs text-orange-700 mt-1 pr-10",children:t.lockedForBasic?"Kh\xf3a v\u1edbi h\u1ea1ng Basic":"M\u1edf v\u1edbi h\u1ea1ng Basic"})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\u1ed1 \u0111i\u1ec3m b\u1ecb tr\u1eeb"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(Tw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-yellow-500"}),(0,At.jsx)("input",{type:"number",min:"1",max:"100",value:t.pointsToDeduct,onChange:t=>y(e.key,"pointsToDeduct",parseInt(t.target.value)||1),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!t.enabled})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"S\u1ed1 sao s\u1ebd b\u1ecb tr\u1eeb khi truy c\u1eadp trang n\xe0y"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th\u1eddi gian \u0111\u1ebfm ng\u01b0\u1ee3c (gi\xe2y)"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(Iy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-blue-500"}),(0,At.jsx)("input",{type:"number",min:"1",max:"60",value:t.countdownSeconds,onChange:t=>y(e.key,"countdownSeconds",parseInt(t.target.value)||5),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!t.enabled})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Th\u1eddi gian hi\u1ec3n th\u1ecb countdown tr\u01b0\u1edbc khi tr\u1eeb \u0111i\u1ec3m"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Th\u1eddi gian ch\u1edd gi\u1eefa c\xe1c l\u1ea7n tr\u1eeb \u0111i\u1ec3m (ph\xfat)"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(Iy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-orange-500"}),(0,At.jsx)("input",{type:"number",min:"1",max:"1440",value:t.cooldownMinutes,onChange:t=>y(e.key,"cooldownMinutes",parseInt(t.target.value)||60),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!t.enabled})]})]}),t.enabled&&(0,At.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Xem tr\u01b0\u1edbc:"}),(0,At.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,At.jsxs)("div",{children:["\u2022 Khi user v\xe0o trang ",(0,At.jsx)("strong",{children:e.displayName})]}),(0,At.jsxs)("div",{children:["\u2022 \u0110\u1ebfm ng\u01b0\u1ee3c ",(0,At.jsxs)("strong",{children:[t.countdownSeconds," gi\xe2y"]})]}),(0,At.jsxs)("div",{children:["\u2022 Tr\u1eeb ",(0,At.jsxs)("strong",{children:[t.pointsToDeduct," sao"]})," t\u1eeb t\xe0i kho\u1ea3n"]}),(0,At.jsxs)("div",{children:["\u2022 Ch\u1edd ",(0,At.jsxs)("strong",{children:[t.cooldownMinutes||60," ph\xfat"]})," m\u1edbi c\xf3 th\u1ec3 tr\u1eeb l\u1ea1i"]})]})]}),(0,At.jsx)("button",{onClick:()=>(e=>{if(!g())return;const t=p.find((t=>t.key===e));t&&a((n=>({...n,[e]:{...f,displayName:t.displayName,description:t.description,lockedForBasic:t.defaultLockedForBasic}})))})(e.key),className:"w-full px-3 py-2 text-sm text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Reset v\u1ec1 m\u1eb7c \u0111\u1ecbnh"})]})]},e.key)}))}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Th\xf4ng tin t\u1ed5ng quan"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-green-600",children:p.filter((e=>b(e.key).enabled)).length}),(0,At.jsx)("div",{className:"text-sm text-green-700",children:"Trang \u0111ang b\u1eadt tr\u1eeb \u0111i\u1ec3m"})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:p.filter((e=>!b(e.key).enabled)).length}),(0,At.jsx)("div",{className:"text-sm text-gray-700",children:"Trang \u0111ang t\u1eaft"})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:p.filter((e=>b(e.key).lockedForBasic)).length}),(0,At.jsx)("div",{className:"text-sm text-orange-700",children:"Trang kh\xf3a v\u1edbi Basic"})]}),(0,At.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:p.reduce(((e,t)=>{const n=b(t.key);return e+(n.enabled?n.pointsToDeduct:0)}),0)}),(0,At.jsx)("div",{className:"text-sm text-blue-700",children:"T\u1ed5ng sao c\xf3 th\u1ec3 b\u1ecb tr\u1eeb"})]})]}),(0,At.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"\u26a0\ufe0f L\u01b0u \xfd quan tr\u1ecdng:"}),(0,At.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Ch\u1ec9 tr\u1eeb \u0111i\u1ec3m khi user c\xf3 \u0111\u1ee7 sao trong t\xe0i kho\u1ea3n"}),(0,At.jsx)("li",{children:"\u2022 Kh\xf4ng tr\u1eeb \u0111i\u1ec3m n\u1ebfu user \u0111\xe3 h\u1ebft sao"}),(0,At.jsx)("li",{children:"\u2022 C\xf3 th\xf4ng b\xe1o countdown tr\u01b0\u1edbc khi tr\u1eeb \u0111i\u1ec3m"}),(0,At.jsx)("li",{children:"\u2022 User c\xf3 th\u1ec3 tho\xe1t trang trong th\u1eddi gian countdown \u0111\u1ec3 tr\xe1nh b\u1ecb tr\u1eeb"}),(0,At.jsx)("li",{children:"\u2022 Trang b\u1ecb kh\xf3a v\u1edbi Basic s\u1ebd kh\xf4ng th\u1ec3 truy c\u1eadp b\u1edfi h\u1ea1ng Basic"}),(0,At.jsx)("li",{children:"\u2022 H\u1ea1ng Basic m\u1eb7c \u0111\u1ecbnh ch\u1ec9 c\xf3 th\u1ec3 truy c\u1eadp: Xem ng\xe0y, H\u1ec7 M\u1eb7t Tr\u1eddi, B\xe1t T\u1ef1, L\u1ee5c H\xe0o"})]})]})]}),(0,At.jsx)("div",{className:"flex justify-center pt-6",children:(0,At.jsx)("button",{onClick:async()=>{if(g())try{s(!0),await(0,Hb.BN)((0,Hb.doc)(Qb.db,"admin","pagePointsDeduction"),{pages:i,updatedAt:new Date,updatedBy:"admin"}),l(new Date),A.success("\u2705 C\u1ea5u h\xecnh \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u v\xe0 s\u1ebd c\u1eadp nh\u1eadt real-time cho client!")}catch(e){console.error("Error saving page configs:",e),A.error(QI.SAVE_ERROR)}finally{s(!1)}},disabled:r,className:"inline-flex items-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 shadow-lg hover:shadow-xl transition-all duration-200",children:r?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"\u0110ang l\u01b0u c\u1ea5u h\xecnh..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Tw,{className:"h-5 w-5 mr-3"}),"L\u01b0u t\u1ea5t c\u1ea3 c\u1ea5u h\xecnh"]})})})]})})},GI=()=>{var e,n,r,s;const{statistics:i,statsLoading:a,categories:o,getTierDisplayName:l,getTierColor:c,loadStatistics:u}=(()=>{const{featureFlags:e,getFeaturesByCategory:n}=XB(),[r,s]=(0,t.useState)({featureStats:[],membershipStats:[],categoryStats:[],topUsers:[],totalStarsSpent:0,totalTransactions:0,mostUsedFeature:null,mostActiveTier:null,mostActiveCategory:null}),[i,a]=(0,t.useState)(!0),o={lakinh:{name:"La Kinh",icon:"ArrowPathIcon",color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},battu:{name:"B\xe1t T\u1ef1",icon:"ChartBarIcon",color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},luchao:{name:"L\u1ee5c H\xe0o",icon:"SparklesIcon",color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"},general:{name:"T\u1ed5ng Qu\xe1t",icon:"CogIcon",color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200"}},l={lakinh_camera_activation:"K\xedch Ho\u1ea1t Cung (La Kinh)",lakinh_advanced_compass:"La B\xe0n N\xe2ng Cao",lakinh_gps_integration:"T\xedch H\u1ee3p GPS",battu_advanced_analysis:"Ph\xe2n T\xedch B\xe1t T\u1ef1 N\xe2ng Cao",battu_yearly_forecast:"D\u1ef1 B\xe1o V\u1eadn M\u1ec7nh Theo N\u0103m",luchao_divination_mode:"Ch\u1ebf \u0110\u1ed9 B\xf3i To\xe1n",luchao_historical_data:"D\u1eef Li\u1ec7u L\u1ecbch S\u1eed",export_data:"Xu\u1ea5t D\u1eef Li\u1ec7u",priority_support:"H\u1ed7 Tr\u1ee3 \u01afu Ti\xean",beta_features:"T\xednh N\u0103ng Beta"},c=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw},u=async()=>{if(c())try{a(!0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),n=await(0,Hb.GG)(t);let r=0,i=0;const c={},u={},d={},h=new Map;Object.keys(e).forEach((t=>{const n=e[t];c[t]={featureKey:t,featureName:l[t]||n.name,category:n.category,totalStars:0,transactionCount:0,userCount:0,starCost:n.starCost||5,starDuration:n.starDuration||24}})),["basic","standard","premium","master"].forEach((e=>{u[e]={tierName:e,totalStars:0,transactionCount:0,userCount:0}})),Object.keys(o).forEach((e=>{d[e]={categoryName:e,categoryDisplayName:o[e].name,totalStars:0,transactionCount:0,userCount:0,featuresUsed:new Set}}));for(const s of n.docs){const t=s.data(),n=s.id,a=t.membershipTier||"basic",o=t.starTransactions||{};let l=0,m=0;const A=new Set,g=new Set;Object.entries(o).forEach((t=>{let[n,s]=t;if("spend"===s.type&&s.reason&&s.reason.includes("Temporary access to")){const t=s.reason.replace("Temporary access to ",""),n=s.amount||0;if(c[t]){r+=n,i++,l+=n,m++,c[t].totalStars+=n,c[t].transactionCount++,A.add(t),u[a]&&(u[a].totalStars+=n,u[a].transactionCount++);const s=e[t];s&&s.category&&d[s.category]&&(d[s.category].totalStars+=n,d[s.category].transactionCount++,d[s.category].featuresUsed.add(t),g.add(s.category))}}})),A.forEach((e=>{c[e]&&c[e].userCount++})),m>0&&u[a]&&u[a].userCount++,g.forEach((e=>{d[e]&&d[e].userCount++})),l>0&&h.set(n,{userId:n,displayName:t.displayName||"Unknown User",email:t.email||"No email",membershipTier:a,starsSpent:l,transactionCount:m,featuresUsed:A.size})}const m=Object.values(c).filter((e=>e.totalStars>0)).sort(((e,t)=>t.totalStars-e.totalStars)),A=Object.values(u).filter((e=>e.totalStars>0)).sort(((e,t)=>t.totalStars-e.totalStars)),g=Object.values(d).filter((e=>e.totalStars>0)).map((e=>({...e,featuresUsed:e.featuresUsed.size}))).sort(((e,t)=>t.totalStars-e.totalStars)),p=Array.from(h.values()).sort(((e,t)=>t.starsSpent-e.starsSpent)).slice(0,5),f=m[0]||null,x=g[0]||null,v=A[0]||null;s({featureStats:m,membershipStats:A,categoryStats:g,topUsers:p,totalStarsSpent:r,totalTransactions:i,mostUsedFeature:f,mostActiveTier:v,mostActiveCategory:x})}catch(t){console.error("Error loading statistics:",t)}finally{a(!1)}else a(!1)};return(0,t.useEffect)((()=>{u()}),[]),{statistics:r,statsLoading:i,categories:o,featureDisplayNames:l,getTierDisplayName:e=>({basic:"C\u01a1 B\u1ea3n",standard:"Ti\xeau Chu\u1ea9n",premium:"Cao C\u1ea5p",master:"Master",sponsor:"Sponsor"}[e]||e),getTierColor:e=>({basic:"bg-gray-100 text-gray-800",standard:"bg-blue-100 text-blue-800",premium:"bg-purple-100 text-purple-800",master:"bg-yellow-100 text-yellow-800",sponsor:"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"),loadStatistics:u,checkAdminAccess:c}})();return(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,At.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,At.jsx)(oL,{className:"h-6 w-6 mr-2 text-blue-600"}),"Th\u1ed1ng k\xea s\u1eed d\u1ee5ng t\xednh n\u0103ng"]}),(0,At.jsx)("button",{onClick:u,disabled:a,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:a?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-500 mr-2"}),"\u0110ang t\u1ea3i..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(oL,{className:"h-4 w-4 mr-2"}),"L\xe0m m\u1edbi"]})})]}),a?(0,At.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i th\u1ed1ng k\xea..."})]})}):(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,At.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-blue-600",children:i.totalStarsSpent.toLocaleString()}),(0,At.jsx)("div",{className:"text-sm text-blue-700",children:"T\u1ed5ng sao \u0111\xe3 s\u1eed d\u1ee5ng"})]}),(0,At.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-green-600",children:i.totalTransactions.toLocaleString()}),(0,At.jsx)("div",{className:"text-sm text-green-700",children:"T\u1ed5ng giao d\u1ecbch"})]}),(0,At.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-purple-600",children:(null===(e=i.mostUsedFeature)||void 0===e?void 0:e.featureName)||"N/A"}),(0,At.jsxs)("div",{className:"text-sm text-purple-700",children:["T\xednh n\u0103ng ph\u1ed5 bi\u1ebfn nh\u1ea5t (",(null===(n=i.mostUsedFeature)||void 0===n?void 0:n.totalStars)||0," sao)"]})]}),(0,At.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,At.jsx)("div",{className:"text-lg font-bold text-orange-600",children:(null===(r=i.mostActiveCategory)||void 0===r?void 0:r.categoryDisplayName)||"N/A"}),(0,At.jsxs)("div",{className:"text-sm text-orange-700",children:["Danh m\u1ee5c ho\u1ea1t \u0111\u1ed9ng nh\u1ea5t (",(null===(s=i.mostActiveCategory)||void 0===s?void 0:s.totalStars)||0," sao)"]})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(KL,{className:"h-5 w-5 mr-2 text-blue-600"}),"S\u1ed1 sao \u0111\xe3 nh\u1eadn t\u1eeb c\xe1c t\xednh n\u0103ng"]}),i.featureStats.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.featureStats.map(((e,t)=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.featureName}),(0,At.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["#",t+1]})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Sao thu:"}),(0,At.jsx)("span",{className:"font-medium text-blue-600",children:e.totalStars.toLocaleString()})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Giao d\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:e.transactionCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi d\xf9ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.userCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Gi\xe1:"}),(0,At.jsxs)("span",{className:"font-medium text-orange-600",children:[e.starCost," sao"]})]})]})]},e.featureKey)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1eed d\u1ee5ng t\xednh n\u0103ng"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(Nk,{className:"h-5 w-5 mr-2 text-purple-600"}),"S\u1ed1 sao \u0111\xe3 nh\u1eadn t\u1eeb c\xe1c danh m\u1ee5c"]}),i.categoryStats.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.categoryStats.map(((e,t)=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:e.categoryDisplayName}),(0,At.jsxs)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:["#",t+1]})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Sao thu:"}),(0,At.jsx)("span",{className:"font-medium text-purple-600",children:e.totalStars.toLocaleString()})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Giao d\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:e.transactionCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi d\xf9ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.userCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"T\xednh n\u0103ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.featuresUsed})]})]})]},e.categoryName)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1eed d\u1ee5ng theo danh m\u1ee5c"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-5 w-5 mr-2 text-yellow-600"}),"S\u1ed1 sao \u0111\xe3 nh\u1eadn t\u1eeb c\xe1c h\u1ea1ng th\xe0nh vi\xean"]}),i.membershipStats.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:i.membershipStats.map(((e,t)=>(0,At.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:l(e.tierName)}),(0,At.jsxs)("span",{className:`text-xs px-2 py-1 rounded ${c(e.tierName)}`,children:["#",t+1]})]}),(0,At.jsxs)("div",{className:"space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Sao thu:"}),(0,At.jsx)("span",{className:"font-medium text-yellow-600",children:e.totalStars.toLocaleString()})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Giao d\u1ecbch:"}),(0,At.jsx)("span",{className:"font-medium",children:e.transactionCount})]}),(0,At.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\u01b0\u1eddi d\xf9ng:"}),(0,At.jsx)("span",{className:"font-medium",children:e.userCount})]})]})]},e.tierName)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u s\u1eed d\u1ee5ng theo h\u1ea1ng th\xe0nh vi\xean"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)(fI,{className:"h-5 w-5 mr-2 text-orange-600"}),"Top 5 user s\u1eed d\u1ee5ng t\xednh n\u0103ng nhi\u1ec1u nh\u1ea5t"]}),i.topUsers.length>0?(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsx)("div",{className:"space-y-3",children:i.topUsers.map(((e,t)=>(0,At.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-bold text-white "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-blue-500"),children:t+1}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,At.jsx)("span",{className:`text-xs px-2 py-1 rounded ${c(e.membershipTier)}`,children:l(e.membershipTier)})}),(0,At.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[e.starsSpent.toLocaleString()," sao"]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[e.transactionCount," giao d\u1ecbch \u2022 ",e.featuresUsed," t\xednh n\u0103ng"]})]})]})},e.userId)))})}):(0,At.jsx)("div",{className:"text-gray-500 text-center py-8 text-xs",children:"Ch\u01b0a c\xf3 d\u1eef li\u1ec7u ng\u01b0\u1eddi d\xf9ng"})]})]})]})};function qI(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const WI=t.forwardRef(qI);function $I(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const XI=t.forwardRef($I),YI=()=>{const{featureFlags:e,loading:n,updateFeatureFlag:r,updateMultipleFlags:s,getFeaturesByCategory:i}=XB(),{toasts:a,showToast:o,removeToast:l}=uM(),[c,u]=(0,t.useState)("lakinh"),[d,h]=(0,t.useState)(null),[m,A]=(0,t.useState)(!1),g={lakinh:{name:"La Kinh",icon:XC,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},battu:{name:"B\xe1t T\u1ef1",icon:oL,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},luchao:{name:"L\u1ee5c H\xe0o",icon:eM,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"},general:{name:"T\u1ed5ng Qu\xe1t",icon:Nk,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200"}},p={lakinh_camera_activation:pT,lakinh_advanced_compass:XC,lakinh_gps_integration:AT,battu_advanced_analysis:oL,battu_yearly_forecast:nT,luchao_divination_mode:eM,luchao_historical_data:WI,export_data:WI,priority_support:IL,beta_features:XI},f=()=>{const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");return e&&t===rw},x=async(e,t)=>{if(f())try{A(!0);const n=i(e),r={};Object.keys(n).forEach((e=>{r[e]={enabled:t}})),await s(r),o(`${t?"B\u1eadt":"T\u1eaft"} t\u1ea5t c\u1ea3 t\xednh n\u0103ng ${g[e].name} th\xe0nh c\xf4ng`,"success")}catch(n){console.error("Error bulk toggling features:",n),o("L\u1ed7i khi c\u1eadp nh\u1eadt h\xe0ng lo\u1ea1t","error")}finally{A(!1)}},v=(t,n)=>{const s=p[t]||Nk,i=d===t;return(0,At.jsxs)("div",{className:"p-4 border rounded-lg transition-all duration-200 "+(n.enabled?"bg-green-50 border-green-200 shadow-sm":"bg-gray-50 border-gray-200"),children:[(0,At.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"p-2 rounded-lg "+(n.enabled?"bg-green-100 text-green-600":"bg-gray-100 text-gray-500"),children:(0,At.jsx)(s,{className:"h-5 w-5"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"font-medium text-gray-900",children:n.name}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:n.description})]})]}),(0,At.jsxs)("button",{onClick:()=>(async t=>{if(f())try{h(t);const n=e[t];await r(t,{enabled:!n.enabled}),o(`${n.enabled?"T\u1eaft":"B\u1eadt"} t\xednh n\u0103ng "${n.name}" th\xe0nh c\xf4ng`,"success")}catch(n){console.error("Error toggling feature:",n),o("L\u1ed7i khi c\u1eadp nh\u1eadt t\xednh n\u0103ng: "+n.message,"error")}finally{h(null)}})(t),disabled:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${n.enabled?"bg-green-600":"bg-gray-200"} ${i?"opacity-50 cursor-not-allowed":""}`,children:[(0,At.jsx)("span",{className:(n.enabled?"translate-x-6":"translate-x-1")+" inline-block h-4 w-4 transform rounded-full bg-white transition-transform"}),i&&(0,At.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"})})]})]}),(0,At.jsxs)("div",{className:"md:flex items-center justify-between text-xs",children:[(0,At.jsxs)("div",{className:"md:flex items-center md:gap-4 space-y-2 md:space-y-0 gap-4",children:[(0,At.jsx)("span",{className:"inline-flex hidden px-2 py-1 rounded-full text-xs font-medium w-full md:w-auto "+("master"===n.requiredTier?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"master"===n.requiredTier?"\ud83d\udc51 Master":"\ud83d\udd27 Admin"}),(0,At.jsx)("span",{className:"inline-flex hidden items-center px-2 py-1 rounded-full text-xs font-medium w-full md:w-auto "+(n.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:n.enabled?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(tk,{className:"h-3 w-3 mr-1"}),"\u0110ang b\u1eadt"]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(ky,{className:"h-3 w-3 mr-1"}),"\u0110ang t\u1eaft"]})}),(0,At.jsxs)("div",{className:"md:flex items-center space-x-2 bg-orange-100 px-2 py-1 rounded-full",children:[(0,At.jsx)("span",{className:"text-orange-800 font-medium",children:"\u2b50"}),(0,At.jsx)("input",{type:"number",min:"1",max:"50",value:n.starCost||5,onChange:e=>(async(e,t)=>{if(f())try{h(e),await r(e,{starCost:parseInt(t)}),o("C\u1eadp nh\u1eadt gi\xe1 sao th\xe0nh c\xf4ng","success")}catch(n){console.error("Error updating star cost:",n),o("L\u1ed7i khi c\u1eadp nh\u1eadt gi\xe1 sao: "+n.message,"error")}finally{h(null)}})(t,e.target.value),className:"w-10 text-xs text-center bg-transparent border-none outline-none text-orange-800 font-medium",disabled:i}),(0,At.jsx)("span",{className:"text-orange-800 text-xs",children:"sao"})]}),(0,At.jsxs)("div",{className:"md:flex items-center space-x-2 bg-blue-100 px-2 py-1 rounded-full",children:[(0,At.jsx)("span",{className:"text-blue-800 font-medium",children:"\u23f0"}),(0,At.jsx)("input",{type:"number",min:"1",max:"720",value:n.starDuration||24,onChange:e=>(async(e,t)=>{if(f())try{h(e),await r(e,{starDuration:parseInt(t)}),o("C\u1eadp nh\u1eadt th\u1eddi gian s\u1eed d\u1ee5ng th\xe0nh c\xf4ng","success")}catch(n){console.error("Error updating star duration:",n),o("L\u1ed7i khi c\u1eadp nh\u1eadt th\u1eddi gian s\u1eed d\u1ee5ng: "+n.message,"error")}finally{h(null)}})(t,e.target.value),className:"w-10 text-xs text-center bg-transparent border-none outline-none text-blue-800 font-medium",disabled:i}),(0,At.jsx)("span",{className:"text-blue-800 text-xs",children:"gi\u1edd"})]})]}),(0,At.jsxs)("span",{className:"text-gray-400 mt-4 md:mt-0 block md:inline",children:["ID: ",t]})]})]},t)};return n?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i c\u1ea5u h\xecnh t\xednh n\u0103ng..."})]})})}):(0,At.jsxs)(WL,{children:[(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,At.jsx)(KL,{className:"h-8 w-8 text-blue-600"}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd T\xednh n\u0103ng"})]}),(0,At.jsx)("p",{className:"text-gray-400 text-xs",children:"Qu\u1ea3n l\xfd c\xe1c t\xednh n\u0103ng \u0111\u1eb7c bi\u1ec7t d\xe0nh cho th\xe0nh vi\xean Master v\xe0 Admin. Ch\u1ec9 b\u1eadt t\xednh n\u0103ng khi \u0111\xe3 s\u1eb5n s\xe0ng ph\xe1t h\xe0nh."}),(0,At.jsx)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,At.jsxs)("p",{className:"text-blue-700 text-xs",children:["\ud83d\udca1 ",(0,At.jsx)("strong",{children:"Th\u1eddi gian s\u1eed d\u1ee5ng:"})," B\u1ea1n c\xf3 th\u1ec3 thi\u1ebft l\u1eadp th\u1eddi gian s\u1eed d\u1ee5ng cho m\u1ed7i t\xednh n\u0103ng (t\xednh b\u1eb1ng gi\u1edd). V\xed d\u1ee5: 24h, 48h, 72h, 168h (1 tu\u1ea7n), v.v."]})}),(0,At.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(g).map((e=>{let[t,n]=e;const r=i(t),s=Object.keys(r).length,a=Object.values(r).filter((e=>e.enabled)).length,o=n.icon;return(0,At.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(o,{className:`h-5 w-5 ${n.color}`}),(0,At.jsx)("span",{className:"font-medium text-gray-900",children:n.name})]}),(0,At.jsxs)("div",{className:"mt-1 text-sm text-gray-600",children:[a,"/",s," \u0111ang b\u1eadt"]})]},t)}))})]}),(0,At.jsx)(GI,{}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"border-b border-gray-200",children:(0,At.jsx)("nav",{className:"-mb-px md:flex md:space-x-8 grid grid-cols-2 md:grid-cols-4 px-6",children:Object.entries(g).map((e=>{let[t,n]=e;const r=n.icon;return(0,At.jsxs)("button",{onClick:()=>u(t),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 w-full md:w-auto "+(c===t?`border-blue-500 ${n.color}`:"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,At.jsx)(r,{className:"h-4 w-4"}),(0,At.jsx)("span",{children:n.name})]},t)}))})}),(0,At.jsx)("div",{className:"p-6",children:(e=>{const t=g[e],n=i(e),r=Object.keys(n).length,s=Object.values(n).filter((e=>e.enabled)).length,a=t.icon;return(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:`${t.bgColor} ${t.borderColor} border rounded-lg p-6`,children:[(0,At.jsxs)("div",{className:"md:flex items-center justify-between mb-4 gap-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:`p-3 rounded-lg bg-white ${t.color}`,children:(0,At.jsx)(a,{className:"h-6 w-6"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:t.name}),(0,At.jsxs)("p",{className:"text-sm text-gray-600",children:[s,"/",r," t\xednh n\u0103ng \u0111ang \u0111\u01b0\u1ee3c b\u1eadt"]})]})]}),(0,At.jsxs)("div",{className:"md:flex space-x-2 mt-4 md:mt-0",children:[(0,At.jsxs)("button",{onClick:()=>x(e,!0),disabled:m,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-1 inline"}),"B\u1eadt t\u1ea5t c\u1ea3"]}),(0,At.jsxs)("button",{onClick:()=>x(e,!1),disabled:m,className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-1 inline"}),"T\u1eaft t\u1ea5t c\u1ea3"]})]})]}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:(r>0?s/r*100:0)+"%"}})})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(n).map((e=>{let[t,n]=e;return v(t,n)}))}),0===r&&(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)(jw,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Ch\u01b0a c\xf3 t\xednh n\u0103ng"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Danh m\u1ee5c n\xe0y ch\u01b0a c\xf3 t\xednh n\u0103ng n\xe0o."})]})]})})(c)})]})]}),(0,At.jsx)(cM,{toasts:a,removeToast:l})]})},JI=e=>{let{articles:t}=e;const{topStarArticles:n}=mI(t);return(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[(0,At.jsx)("span",{className:"text-yellow-600 text-lg mr-2",children:"\u2b50"}),"Top B\xe0i Vi\u1ebft Thu Sao"]}),n.length>0?(0,At.jsx)("div",{className:"overflow-x-auto",children:(0,At.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,At.jsx)("thead",{className:"bg-gray-50",children:(0,At.jsxs)("tr",{children:[(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\xe1c gi\u1ea3"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"L\u01b0\u1ee3t xem"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gi\xe1 sao"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\u1ed5ng sao thu"}),(0,At.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tr\u1ea1ng th\xe1i"})]})}),(0,At.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(((e,t)=>(0,At.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("div",{className:"flex items-center",children:(0,At.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full text-xs font-bold text-white "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-blue-500"),children:t+1})})}),(0,At.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:e.title||"Kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"}),(0,At.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",e.id]})]}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("div",{className:"text-sm text-gray-900",children:e.author||"Kh\xf4ng x\xe1c \u0111\u1ecbnh"})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("div",{className:"text-sm text-gray-900",children:(e.views||0).toLocaleString()})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"text-sm text-gray-900",children:[e.starCost||0," sao"]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsxs)("div",{className:"text-sm font-bold text-yellow-600",children:[e.totalStars.toLocaleString()," sao"]})}),(0,At.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,At.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("published"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"published"===e.status?"\u0110\xe3 xu\u1ea5t b\u1ea3n":"draft"===e.status?"B\u1ea3n nh\xe1p":"Kh\xf4ng x\xe1c \u0111\u1ecbnh"})})]},e.id)))})]})}):(0,At.jsxs)("div",{className:"text-center py-8",children:[(0,At.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"\ud83d\udcdd"}),(0,At.jsx)("p",{className:"text-gray-500",children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o thu sao"})]})]})},ZI=()=>{const e=ee(),[n,r]=(0,t.useState)([]),[s,i]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(""),[h,m]=(0,t.useState)("all"),[A,g]=(0,t.useState)("all"),[p,f]=(0,t.useState)("all"),[x,v]=(0,t.useState)("all"),[y,b]=(0,t.useState)("createdAt"),[w,N]=(0,t.useState)("desc"),[j,C]=(0,t.useState)(!1),[T,S]=(0,t.useState)(null),{toasts:_,showToast:E,removeToast:B}=uM(),M=BI(a,12);(0,t.useEffect)((()=>{k()}),[]),(0,t.useEffect)((()=>{F()}),[n,u,h,A,p,x,y,w]),(0,t.useEffect)((()=>{M.resetToFirstPage()}),[u,h,A,p,x,y,w]);const k=async()=>{try{c(!0);const[e,t]=await Promise.all([(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb.My)("createdAt","desc"),(0,Hb.AB)(25));return(await(0,Hb.GG)(e)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate()}}))}catch(e){return console.error("Error loading articles:",e),[]}})(),(async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"));return(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return console.error("Error loading categories:",e),[]}})()]);r(e),i(t),0===e.length&&E("Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft n\xe0o. H\xe3y th\u1eed l\xe0m m\u1edbi trang.","warning")}catch(e){console.error("Error loading data:",e),E("L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u","error")}finally{c(!1)}},L=async()=>{try{c(!0),await k(),E("\u0110\xe3 c\u1eadp nh\u1eadt d\u1eef li\u1ec7u m\u1edbi nh\u1ea5t","success")}catch(e){console.error("Error refreshing data:",e),E("L\u1ed7i khi c\u1eadp nh\u1eadt d\u1eef li\u1ec7u","error")}},I=async(e,t)=>{try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",e),{status:t,updatedAt:new Date}),r(n.map((n=>n.id===e?{...n,status:t,updatedAt:new Date}:n))),E("\u0110\xe3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i b\xe0i vi\u1ebft","success")}catch(s){console.error("Error updating status:",s),E("L\u1ed7i khi c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i","error")}},D=async t=>{if(window.confirm("B\u1ea1n c\xf3 mu\u1ed1n t\u1ea1o b\u1ea3n sao c\u1ee7a b\xe0i vi\u1ebft n\xe0y?"))try{C(!0),S(t);const n=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",t));if(!n.exists())return void E("Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft!","error");const r=n.data(),s=(new Date).toLocaleDateString("vi-VN"),i=`${r.title} (B\u1ea3n sao - ${s})`,a=(e=>{const t={};return Object.keys(e).forEach((n=>{const r=e[n];"id"!==n&&void 0!==r&&null!==r&&("string"===typeof r?(""!==r.trim()||["status","title","categoryId"].includes(n))&&(t[n]=r):t[n]=r)})),t.title||(t.title="B\xe0i vi\u1ebft kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"),t.status||(t.status="draft"),t.createdAt||(t.createdAt=new Date),t.updatedAt||(t.updatedAt=new Date),t})({...r,title:i,status:"draft",createdAt:new Date,updatedAt:new Date,originalArticleId:t,isDuplicated:!0}),o=await(0,Hb.gS)((0,Hb.rJ)(Qb.db,"articles"),a);await k(),E("\u0110\xe3 t\u1ea1o b\u1ea3n sao b\xe0i vi\u1ebft th\xe0nh c\xf4ng!","success"),setTimeout((()=>{window.confirm("B\u1ea1n c\xf3 mu\u1ed1n ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft m\u1edbi ngay kh\xf4ng?")&&e(`/admin/articles/${o.id}/edit`)}),1e3)}catch(n){console.error("Error duplicating article:",n),E("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea1o b\u1ea3n sao b\xe0i vi\u1ebft!","error")}finally{C(!1),S(null)}},P=()=>n.filter((e=>"pending"===e.status&&"master"===e.authorType)).length,F=()=>{let e=[...n];if(u&&(e=e.filter((e=>{var t,n,r,s,i;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(u.toLowerCase()))||(null===(r=e.content)||void 0===r?void 0:r.toLowerCase().includes(u.toLowerCase()))||(null===(s=e.authorEmail)||void 0===s?void 0:s.toLowerCase().includes(u.toLowerCase()))||(null===(i=e.authorDisplayName)||void 0===i?void 0:i.toLowerCase().includes(u.toLowerCase()))}))),"all"!==h&&(e=e.filter((e=>e.status===h))),"all"!==A&&(e=e.filter((e=>e.categoryId===A))),"all"!==p&&("master"===p?e=e.filter((e=>"master"===e.authorType)):"admin"===p&&(e=e.filter((e=>"master"!==e.authorType)))),"all"!==x)switch(x){case"has_views":e=e.filter((e=>(e.views||0)>0));break;case"no_views":e=e.filter((e=>0===(e.views||0)));break;case"popular":e=e.filter((e=>(e.views||0)>=100));break;case"viral":e=e.filter((e=>(e.views||0)>=1e3))}e.sort(((e,t)=>{let n,r;switch(y){case"title":n=e.title||"",r=t.title||"";break;case"status":n=e.status||"",r=t.status||"";break;case"categoryId":const i=s.find((t=>t.id===e.categoryId)),a=s.find((e=>e.id===t.categoryId));n=(null===i||void 0===i?void 0:i.name)||"",r=(null===a||void 0===a?void 0:a.name)||"";break;case"views":n=e.views||0,r=t.views||0;break;default:n=e.createdAt||new Date(0),r=t.createdAt||new Date(0)}return"asc"===w?n>r?1:-1:n<r?1:-1})),o(e)},U=e=>{const t={draft:{label:"Nh\xe1p",className:"bg-gray-100 text-gray-800"},pending:{label:"Ch\u1edd duy\u1ec7t",className:"bg-yellow-100 text-yellow-800"},published:{label:"\u0110\xe3 \u0111\u0103ng",className:"bg-green-100 text-green-800"},rejected:{label:"T\u1eeb ch\u1ed1i",className:"bg-red-100 text-red-800"}},n=t[e]||t.draft;return(0,At.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.className}`,children:n.label})},R=async(e,t)=>{try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",e),{featuredPosition:t,updatedAt:new Date}),k()}catch(n){console.error("Error updating featured position:",n),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt v\u1ecb tr\xed tin n\u1ed5i b\u1eadt")}};return l?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i danh s\xe1ch b\xe0i vi\u1ebft..."})]})})}):l||0!==n.length?(0,At.jsxs)(WL,{children:[(0,At.jsx)(cM,{toasts:_,removeToast:B}),(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd b\xe0i vi\u1ebft"}),P()>0&&(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 animate-pulse",children:["\ud83d\udc51 ",P()," b\xe0i Master ch\u1edd duy\u1ec7t"]}),(0,At.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full animate-ping"})]})]}),(0,At.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Danh s\xe1ch t\u1ea5t c\u1ea3 b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("div",{className:"mt-4 md:mt-0 flex flex-col md:flex-row items-center gap-4",children:[(0,At.jsxs)("div",{className:"flex text-sm text-gray-500",children:["T\u1ed5ng: ",a.length," b\xe0i vi\u1ebft |",(0,At.jsxs)("span",{className:"flex items-center ml-1 text-blue-600 font-medium",children:[(0,At.jsx)(LM,{className:"w-4 h-4 mr-1"}),a.reduce(((e,t)=>e+(t.views||0)),0).toLocaleString()," l\u01b0\u1ee3t xem"]})]}),(0,At.jsx)("button",{onClick:L,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",disabled:l,title:"L\xe0m m\u1edbi d\u1eef li\u1ec7u (x\xf3a cache v\xe0 t\u1ea3i l\u1ea1i)",children:"\ud83d\udd04 L\xe0m m\u1edbi"}),(0,At.jsxs)("button",{onClick:()=>e("/admin/articles/config"),className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",disabled:l,title:"C\u1ea5u h\xecnh b\xe0i vi\u1ebft",children:[(0,At.jsx)(Nk,{className:"h-4 w-4 mr-2"}),"C\u1ea5u h\xecnh b\xe0i vi\u1ebft"]}),(0,At.jsxs)(nt,{to:"/admin/articles/create",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,At.jsx)(CI,{className:"h-4 w-4 mr-2"}),"Th\xeam b\xe0i vi\u1ebft"]})]})]}),(0,At.jsx)(AI,{articles:n,filteredArticles:a}),(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:h,onChange:e=>m(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"}),(0,At.jsx)("option",{value:"published",children:"\u0110\xe3 xu\u1ea5t b\u1ea3n"}),(0,At.jsx)("option",{value:"draft",children:"B\u1ea3n nh\xe1p"}),(0,At.jsx)("option",{value:"pending",children:"Ch\u1edd duy\u1ec7t"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:A,onChange:e=>g(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 danh m\u1ee5c"}),s.map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>f(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 lo\u1ea1i t\xe1c gi\u1ea3"}),(0,At.jsx)("option",{value:"master",children:"Master"}),(0,At.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:x,onChange:e=>v(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 l\u01b0\u1ee3t xem"}),(0,At.jsx)("option",{value:"has_views",children:"C\xf3 l\u01b0\u1ee3t xem"}),(0,At.jsx)("option",{value:"no_views",children:"Ch\u01b0a c\xf3 l\u01b0\u1ee3t xem"}),(0,At.jsx)("option",{value:"popular",children:"Ph\u1ed5 bi\u1ebfn (\u2265100)"}),(0,At.jsx)("option",{value:"viral",children:"Viral (\u22651000)"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:y,onChange:e=>b(e.target.value),children:[(0,At.jsx)("option",{value:"createdAt",children:"Ng\xe0y t\u1ea1o"}),(0,At.jsx)("option",{value:"updatedAt",children:"Ng\xe0y c\u1eadp nh\u1eadt"}),(0,At.jsx)("option",{value:"title",children:"Ti\xeau \u0111\u1ec1"}),(0,At.jsx)("option",{value:"status",children:"Tr\u1ea1ng th\xe1i"}),(0,At.jsx)("option",{value:"views",children:"L\u01b0\u1ee3t xem"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:w,onChange:e=>N(e.target.value),children:[(0,At.jsx)("option",{value:"desc",children:"M\u1edbi nh\u1ea5t"}),(0,At.jsx)("option",{value:"asc",children:"C\u0169 nh\u1ea5t"})]})})]}),(0,At.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-4 mt-2",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,At.jsx)(kI,{className:"h-5 w-5 text-gray-400"})}),(0,At.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm b\xe0i vi\u1ebft...",className:"block text-sm w-full pl-10 pr-3 py-2 h-[30px] border border-gray-300 rounded-md bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:e=>d(e.target.value)})]})})]}),(0,At.jsx)(sI,{data:M.paginatedItems,loading:l,tableId:"articles-list",showColumnToggle:!0,columns:[{key:"article",header:"B\xe0i vi\u1ebft",width:"40%",render:e=>{var t;return(0,At.jsxs)("div",{className:"flex items-center space-x-3 max-w-[400px]",children:[Qk(e,s)&&(0,At.jsx)("img",{src:Qk(e,s),alt:"",className:"w-12 h-12 object-cover rounded-lg flex-shrink-0",onError:e=>{e.target.style.display="none"}}),(0,At.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,At.jsxs)("div",{className:"text-sm font-medium text-gray-900 truncate flex items-center",children:[e.title,"master"===e.authorType&&(0,At.jsx)("span",{className:"ml-2 inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"\ud83d\udc51 Master"}),e.isDuplicated&&(0,At.jsxs)("span",{className:"ml-2 inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[(0,At.jsx)(hI,{className:"w-3 h-3 mr-1"}),"B\u1ea3n sao"]})]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500 truncate",children:[null===(t=e.description)||void 0===t?void 0:t.substring(0,100),"..."]}),e.authorEmail&&(0,At.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["\u270d\ufe0f ",e.authorEmail]})]})]})}},{key:"category",header:"Danh m\u1ee5c",render:e=>{const t=s.find((t=>t.id===e.categoryId));return(0,At.jsx)("div",{className:"text-sm text-gray-900",children:(null===t||void 0===t?void 0:t.name)||"Kh\xf4ng c\xf3 danh m\u1ee5c"})}},{key:"status",header:"Tr\u1ea1ng th\xe1i",render:e=>{return(0,At.jsxs)("div",{className:"flex flex-col gap-2 justify-start items-start",children:[(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[U(e.status),(s=e.requireStars,i=e.starCost,s?(0,At.jsxs)("span",{className:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:["\u2b50 ",i," sao"]}):null)]}),(t=e.isFeatured,n=e.featuredPosition,r=e.id,t?(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Hot"}),(0,At.jsxs)("select",{value:n||1,onChange:e=>R(r,parseInt(e.target.value)),className:"text-xs border border-purple-300 rounded-full px-1 py-0.5 bg-white",onClick:e=>e.stopPropagation(),children:[(0,At.jsx)("option",{value:1,children:"V\u1ecb tr\xed 1"}),(0,At.jsx)("option",{value:2,children:"V\u1ecb tr\xed 2"}),(0,At.jsx)("option",{value:3,children:"V\u1ecb tr\xed 3"})]})]}):null)]});var t,n,r,s,i}},{key:"views",header:"L\u01b0\u1ee3t xem",render:e=>{const t=e.views||0;let n="text-gray-900",r="text-gray-400";return t>=1e3?(n="text-red-600 font-bold",r="text-red-500"):t>=100?(n="text-orange-600 font-semibold",r="text-orange-500"):t>0&&(n="text-blue-600",r="text-blue-500"),(0,At.jsxs)("div",{className:"flex items-center gap-2",children:[(0,At.jsx)(LM,{className:`w-4 h-4 ${r}`}),(0,At.jsx)("span",{className:`text-sm font-medium ${n}`,children:t.toLocaleString()})]})}},{key:"createdAt",header:"Ng\xe0y t\u1ea1o",render:e=>(0,At.jsx)(rI,{date:e.createdAt,showTime:!0})}],rowActions:(e,t)=>(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)(nt,{to:`/admin/articles/${e.id}/edit`,className:"block px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 flex items-center",onClick:t,children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-2"}),"Ch\u1ec9nh s\u1eeda"]}),(0,At.jsxs)(nt,{to:`/admin/articles/${e.id}`,className:"block px-4 py-2 text-sm text-green-600 hover:bg-green-50 flex items-center",onClick:t,children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem chi ti\u1ebft"]}),(0,At.jsxs)("button",{onClick:()=>{D(e.id),t()},disabled:j,className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-purple-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[(0,At.jsx)(hI,{className:"h-4 w-4 mr-2"}),j&&T===e.id?"\u0110ang sao ch\xe9p...":"Sao ch\xe9p"]}),"pending"===e.status&&(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("button",{onClick:()=>{I(e.id,"published"),t()},className:"block w-full text-left px-4 py-2 text-sm text-green-600 hover:bg-green-50 flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2"}),"Duy\u1ec7t b\xe0i vi\u1ebft"]}),(0,At.jsxs)("button",{onClick:()=>{I(e.id,"rejected"),t()},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-2"}),"T\u1eeb ch\u1ed1i"]})]}),(0,At.jsx)("hr",{className:"my-1"}),(0,At.jsxs)("button",{onClick:()=>{(async e=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xe0i vi\u1ebft n\xe0y?"))try{await(0,Hb.kd)((0,Hb.doc)(Qb.db,"articles",e)),r(n.filter((t=>t.id!==e))),E("\u0110\xe3 x\xf3a b\xe0i vi\u1ebft th\xe0nh c\xf4ng","success")}catch(t){console.error("Error deleting article:",t),E("L\u1ed7i khi x\xf3a b\xe0i vi\u1ebft","error")}})(e.id),t()},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center",children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2"}),"X\xf3a b\xe0i vi\u1ebft"]}),(e.views||0)>0&&(0,At.jsxs)("button",{onClick:async()=>{if(window.confirm(`B\u1ea1n c\xf3 mu\u1ed1n reset l\u01b0\u1ee3t xem c\u1ee7a b\xe0i vi\u1ebft "${e.title}" v\u1ec1 0?`))try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",e.id),{views:0,updatedAt:new Date}),r(n.map((t=>t.id===e.id?{...t,views:0,updatedAt:new Date}:t))),E("\u0110\xe3 reset l\u01b0\u1ee3t xem b\xe0i vi\u1ebft","success")}catch(s){console.error("Error resetting views:",s),E("L\u1ed7i khi reset l\u01b0\u1ee3t xem","error")}t()},className:"block w-full text-left px-4 py-2 text-sm text-purple-600 hover:bg-purple-50 flex items-center",children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"Reset l\u01b0\u1ee3t xem"]})]}),emptyState:(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)(hI,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:u?"Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft ph\xf9 h\u1ee3p v\u1edbi t\u1eeb kh\xf3a t\xecm ki\u1ebfm.":"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o \u0111\u01b0\u1ee3c t\u1ea1o."})]})}),(0,At.jsx)(iI,{currentPage:M.currentPage,totalPages:M.totalPages,totalItems:M.totalItems,itemsPerPage:M.itemsPerPage,onPageChange:M.goToPage,onPrevious:M.goToPrevious,onNext:M.goToNext,showingFrom:M.showingFrom,showingTo:M.showingTo}),(0,At.jsx)("div",{className:"mt-8",children:(0,At.jsx)(JI,{articles:n})})]}),(0,At.jsx)(cM,{toasts:_,removeToast:B})]}):(0,At.jsxs)(WL,{children:[(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Danh s\xe1ch t\u1ea5t c\u1ea3 b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center gap-4",children:[(0,At.jsxs)("button",{onClick:L,className:"inline-flex items-center px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",disabled:l,children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"L\xe0m m\u1edbi"]}),(0,At.jsxs)(nt,{to:"/admin/articles/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,At.jsx)(CI,{className:"w-4 h-4 mr-2"}),"Th\xeam b\xe0i vi\u1ebft"]})]})]}),(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,At.jsx)(hI,{className:"w-12 h-12 text-gray-400"})}),(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Kh\xf4ng c\xf3 b\xe0i vi\u1ebft n\xe0o"}),(0,At.jsx)("p",{className:"text-gray-500 mb-6",children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o \u0111\u01b0\u1ee3c t\u1ea1o. H\xe3y th\xeam b\xe0i vi\u1ebft \u0111\u1ea7u ti\xean!"}),(0,At.jsxs)("div",{className:"space-x-4",children:[(0,At.jsxs)(nt,{to:"/admin/articles/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,At.jsx)(CI,{className:"w-4 h-4 mr-2"}),"T\u1ea1o b\xe0i vi\u1ebft \u0111\u1ea7u ti\xean"]}),(0,At.jsx)("button",{onClick:L,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"\ud83d\udd04 T\u1ea3i l\u1ea1i d\u1eef li\u1ec7u"})]})]})]}),(0,At.jsx)(cM,{toasts:_,removeToast:B})]})};var eD=n(751);const tD=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"articles";if(!Qb.IG)throw new Error("Firebase Storage ch\u01b0a \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o");if(!e)throw new Error("File kh\xf4ng h\u1ee3p l\u1ec7");if(!["image/jpeg","image/png","image/gif","image/webp"].includes(e.type))throw new Error("Ch\u1ec9 ch\u1ea5p nh\u1eadn file \u1ea3nh (JPG, PNG, GIF, WebP)");if(e.size>5242880)throw new Error("File \u1ea3nh kh\xf4ng \u0111\u01b0\u1ee3c v\u01b0\u1ee3t qu\xe1 5MB");try{const n=Date.now(),r=Math.random().toString(36).substring(2,15),s=`${n}_${r}.${e.name.split(".").pop()}`,i=(0,eD.KR)(Qb.IG,`${t}/${s}`),a=await(0,eD.D)(i,e);return{url:await(0,eD.qk)(a.ref),fileName:s,path:`${t}/${s}`,size:e.size}}catch(n){throw console.error("Error uploading image:",n),new Error("L\u1ed7i khi upload \u1ea3nh: "+n.message)}},nD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:800;return new Promise((s=>{const i=document.createElement("canvas"),a=i.getContext("2d"),o=new Image;o.onload=()=>{let{width:l,height:c}=o;if(l>n||c>r){const e=Math.min(n/l,r/c);l*=e,c*=e}i.width=l,i.height=c,a.drawImage(o,0,0,l,c),i.toBlob((t=>{const n=new File([t],e.name,{type:e.type,lastModified:Date.now()});s(n)}),e.type,t)},o.src=URL.createObjectURL(e)}))};function rD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const sD=t.forwardRef(rD);function iD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const aD=t.forwardRef(iD);function oD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const lD=t.forwardRef(oD),cD=e=>{let{value:n,onChange:r,label:s="\u1ea2nh thumb",className:i="",required:a=!1,defaultThumbnail:o=null,showDefaultThumbnail:l=!1}=e;const[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),[m,A]=(0,t.useState)(""),[g,p]=(0,t.useState)(n||""),[f,x]=(0,t.useState)(!1),v=(0,t.useRef)(null);t.useEffect((()=>{p(n||""),n&&x(!1)}),[n]);const y=n||(o&&l&&!f?o:""),b=()=>{m.trim()?(e=>{if(!e)return!1;const t=e.toLowerCase(),n=[".jpg",".jpeg",".png",".gif",".webp",".bmp"].some((e=>t.includes(e)));try{return new URL(e),n}catch{return!1}})(m)?(p(m),r(m),A(""),h(!1)):alert("URL kh\xf4ng h\u1ee3p l\u1ec7 ho\u1eb7c kh\xf4ng ph\u1ea3i l\xe0 \u1ea3nh"):alert("Vui l\xf2ng nh\u1eadp URL \u1ea3nh")},w=e=>{A(e.target.value)},N=e=>{"Enter"===e.key&&(e.preventDefault(),b())};return(0,At.jsxs)("div",{className:`space-y-4 ${i}`,children:[(0,At.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[s," ",a&&(0,At.jsx)("span",{className:"text-red-500",children:"*"})]}),y&&(0,At.jsxs)("div",{className:"relative inline-block",children:[(0,At.jsx)("img",{src:y,alt:"Preview",className:"w-48 h-32 object-cover rounded-lg border border-gray-300",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEzMyIgdmlld0JveD0iMCAwIDIwMCAxMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTMzIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik04NyA0OEw4NyA4NUwxMTMgODVMMTEzIDQ4SDg3WiIgZmlsbD0iIzlDQTNBRiIvPgo8cGF0aCBkPSJNOTQgNjJIOTA2SDE2TDk0IDYyWiIgZmlsbD0iIzlDQTNBRiIvPgo8L3N2Zz4K"}}),!n&&o&&(0,At.jsx)("div",{className:"absolute top-2 left-2 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"M\u1eb7c \u0111\u1ecbnh"}),(0,At.jsx)("button",{type:"button",onClick:()=>{p(""),r(""),A(""),v.current&&(v.current.value=""),x(!0)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:(0,At.jsx)(ky,{className:"w-4 h-4"})})]}),!y&&(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)try{u(!0);const e=await nD(t),n=await tD(e,"articles/thumbnails");p(n.url),r(n.url)}catch(n){console.error("Error uploading image:",n),alert(n.message)}finally{u(!1),v.current&&(v.current.value="")}},className:"hidden",id:"image-upload"}),(0,At.jsx)("label",{htmlFor:"image-upload",className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer transition-colors "+(c?"opacity-50 cursor-not-allowed":""),children:c?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"\u0110ang upload..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(sD,{className:"w-4 h-4 mr-2"}),"Upload \u1ea3nh"]})})]}),(0,At.jsx)("div",{children:d?(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("input",{type:"url",value:m,onChange:w,onKeyPress:N,placeholder:"Nh\u1eadp URL \u1ea3nh...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm"}),(0,At.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors",children:"OK"}),(0,At.jsx)("button",{type:"button",onClick:()=>{h(!1),A("")},className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition-colors",children:"H\u1ee7y"})]}):(0,At.jsxs)("button",{type:"button",onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(aD,{className:"w-4 h-4 mr-2"}),"Nh\xfang t\u1eeb URL"]})}),o&&f&&(0,At.jsx)("div",{children:(0,At.jsxs)("button",{type:"button",onClick:()=>x(!1),className:"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",children:[(0,At.jsx)(lD,{className:"w-4 h-4 mr-2"}),"Kh\xf4i ph\u1ee5c \u1ea3nh m\u1eb7c \u0111\u1ecbnh"]})}),o&&!f&&(0,At.jsx)("div",{className:"text-sm text-gray-500",children:"\ud83d\udca1 N\u1ebfu kh\xf4ng upload \u1ea3nh, h\u1ec7 th\u1ed1ng s\u1ebd s\u1eed d\u1ee5ng \u1ea3nh m\u1eb7c \u0111\u1ecbnh c\u1ee7a danh m\u1ee5c"})]}),y&&(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},disabled:c,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(lD,{className:"w-4 h-4 mr-2"}),"\u0110\u1ed5i \u1ea3nh"]}),(0,At.jsxs)("button",{type:"button",onClick:()=>h(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(aD,{className:"w-4 h-4 mr-2"}),"URL"]})]}),d&&g&&(0,At.jsxs)("div",{className:"flex space-x-2",children:[(0,At.jsx)("input",{type:"url",value:m,onChange:w,onKeyPress:N,placeholder:"Nh\u1eadp URL \u1ea3nh m\u1edbi...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm"}),(0,At.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors",children:"OK"}),(0,At.jsx)("button",{type:"button",onClick:()=>{h(!1),A("")},className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 transition-colors",children:"H\u1ee7y"})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500",children:"H\u1ed7 tr\u1ee3: JPG, PNG, GIF, WebP. T\u1ed1i \u0111a 5MB. K\xedch th\u01b0\u1edbc khuy\u1ebfn ngh\u1ecb: 800x600px"})]})};function uD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinejoin:"round",d:"M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z"}))}const dD=t.forwardRef(uD);function hD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.248 20.246H9.05m0 0h3.696m-3.696 0 5.893-16.502m0 0h-3.697m3.697 0h3.803"}))}const mD=t.forwardRef(hD);function AD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.995 3.744v7.5a6 6 0 1 1-12 0v-7.5m-2.25 16.502h16.5"}))}const gD=t.forwardRef(AD);function pD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const fD=t.forwardRef(pD);function xD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"}))}const vD=t.forwardRef(xD);function yD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const bD=t.forwardRef(yD);function wD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"}))}const ND=t.forwardRef(wD);function jD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const CD=t.forwardRef(jD);function TD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const SD=t.forwardRef(TD);function _D(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"}))}const ED=t.forwardRef(_D),BD=e=>{let{value:n,onChange:r,placeholder:s="Nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft...",className:i="",height:a="400px"}=e;const o=(0,t.useRef)(null),l=(0,t.useRef)(null),c=(0,t.useRef)(null),[u,d]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!1),[A,g]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),[x,v]=(0,t.useState)([]),[y,b]=(0,t.useState)(-1),[w,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=()=>{if(c.current){const e=c.current.getBoundingClientRect().top<=20;f(e)}};window.addEventListener("scroll",e,{passive:!0});const t=c.current;return t&&t.addEventListener("scroll",e,{passive:!0}),e(),()=>{window.removeEventListener("scroll",e),t&&t.removeEventListener("scroll",e)}}),[]),(0,t.useEffect)((()=>{n&&0===x.length&&(v([n]),b(0))}),[n,x.length]),(0,t.useEffect)((()=>{o.current&&n&&!o.current.innerHTML&&(o.current.innerHTML=n)}),[]),(0,t.useEffect)((()=>{if(o.current&&n!==o.current.innerHTML&&!w){document.activeElement===o.current||(o.current.innerHTML=n||"")}}),[n,w]),(0,t.useEffect)((()=>{o.current&&setTimeout((()=>{o.current.focus()}),100)}),[]);const j=(0,t.useCallback)((function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.execCommand(e,!1,n),null===(t=o.current)||void 0===t||t.focus(),T()}),[]),C=(0,t.useCallback)((e=>{w||x[y]!==e&&(v((t=>{const n=t.slice(0,y+1);return n.push(e),n.length>50&&n.shift(),n})),b((e=>e+1)))}),[y,w,x]),T=(0,t.useCallback)((()=>{if(o.current&&r){const e=o.current.innerHTML;C(e),r(e)}}),[r,C]),S=(0,t.useCallback)((()=>{if(y>0){N(!0);const e=x[y-1];b((e=>e-1)),o.current&&(o.current.innerHTML=e,r(e),o.current.focus()),setTimeout((()=>N(!1)),100)}}),[x,y,r]),_=(0,t.useCallback)((()=>{if(y<x.length-1){N(!0);const e=x[y+1];b((e=>e+1)),o.current&&(o.current.innerHTML=e,r(e),o.current.focus()),setTimeout((()=>N(!1)),100)}}),[x,y,r]),E=(0,t.useCallback)((e=>{if(e.ctrlKey&&"z"===e.key&&!e.shiftKey)return e.preventDefault(),void S();if(e.ctrlKey&&"y"===e.key||e.ctrlKey&&e.shiftKey&&"Z"===e.key)return e.preventDefault(),void _();if("Enter"===e.key){e.preventDefault();const t=window.getSelection().getRangeAt(0);(t.commonAncestorContainer.nodeType===Node.TEXT_NODE?t.commonAncestorContainer.parentElement:t.commonAncestorContainer).closest("li"),document.execCommand("insertHTML",!1,"<br>"),T()}if("Backspace"===e.key||"Delete"===e.key){const t=window.getSelection();if(t.rangeCount>0){const n=t.getRangeAt(0),r=n.commonAncestorContainer;if(0===n.startOffset&&r.nodeType===Node.TEXT_NODE){const t=r.parentElement;if(t===o.current||t.closest("[contenteditable]")===o.current)return void e.preventDefault()}}}}),[T,S,_]),B=(0,t.useCallback)((e=>{e.preventDefault();try{let t=e.clipboardData.getData("text/html");if(t&&(t=H(t),t&&"<br>"!==t&&"<p></p>"!==t))return document.execCommand("insertHTML",!1,t),T(),void(window.showToast&&window.showToast("\u0110\xe3 d\xe1n v\xe0 l\xe0m s\u1ea1ch n\u1ed9i dung HTML!","success"));const n=e.clipboardData.getData("text/plain");if(n){const e=n.replace(/\n/g,"<br>");document.execCommand("insertHTML",!1,e),T()}}catch(t){const n=e.clipboardData.getData("text/plain");n&&(document.execCommand("insertText",!1,n),T())}}),[T]),M=(0,t.useCallback)((()=>{const e=prompt("Nh\u1eadp URL:");e&&j("createLink",e)}),[j]),k=(0,t.useCallback)((async e=>{if(e)try{d(!0);const t=await nD(e),n=`<img src="${(await tD(t,"articles/content")).url}" alt="Uploaded image" style="max-width: 100%; height: auto; border-radius: 8px; margin: 16px 0;" />`;document.execCommand("insertHTML",!1,n),T()}catch(t){alert("L\u1ed7i upload \u1ea3nh: "+t.message)}finally{d(!1)}}),[T]),L=(0,t.useCallback)((()=>{var e;null===(e=l.current)||void 0===e||e.click()}),[]),I=(0,t.useCallback)((()=>{j("insertOrderedList")}),[j]),D=(0,t.useCallback)((()=>{j("insertUnorderedList")}),[j]),P=(0,t.useCallback)((e=>{j("formatBlock",`h${e}`)}),[j]),F=(0,t.useCallback)((()=>{const e=prompt("Nh\u1eadp code:");if(e){const t=`<pre style="background-color: #f3f4f6; padding: 16px; border-radius: 8px; overflow-x: auto; margin: 16px 0;"><code>${e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`;document.execCommand("insertHTML",!1,t),T()}}),[T]),U=(0,t.useCallback)((()=>{g(n||""),m(!0)}),[n]),R=(0,t.useCallback)((()=>{void 0!==A&&(r(A),m(!1),g(""),window.showToast&&window.showToast("\u0110\xe3 c\u1eadp nh\u1eadt HTML source th\xe0nh c\xf4ng!","success"))}),[A,r]),O=(0,t.useCallback)((()=>{m(!1),g("")}),[]),H=e=>e&&"string"===typeof e?e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<(meta|link|title|base|head|html|body)[^>]*>/gi,"").replace(/<\/(head|html|body)>/gi,"").replace(/<!--[\s\S]*?-->/g,"").replace(/<a\b[^>]*>(.*?)<\/a>/gi,"$1").replace(/\s(data-[^=]*="[^"]*"|class="[^"]*"|style="[^"]*"|id="[^"]*"|onclick="[^"]*"|onload="[^"]*"|onerror="[^"]*"|target="_blank"|href="[^"]*")/gi,"").replace(/<[^>]*iterable[^>]*>/gi,"").replace(/<[^>]*tracking[^>]*>/gi,"").replace(/<[^>]*analytics[^>]*>/gi,"").replace(/<[^>]*gtm[^>]*>/gi,"").replace(/<[^>]*facebook[^>]*>/gi,"").replace(/<[^>]*twitter[^>]*>/gi,"").replace(/<[^>]*pixel[^>]*>/gi,"").replace(/<(noscript|iframe|embed|object|applet)[^>]*>[\s\S]*?<\/\1>/gi,"").replace(/<(p|div|span)\s*><\/\1>/gi,"").replace(/<br\s*\/?>\s*<(p|div)\s*><\/\1>/gi,"<br>").replace(/\s+/g," ").replace(/>\s+</g,"><").replace(/^\s+|\s+$/g,"").replace(/(<br\s*\/?>){3,}/gi,"<br><br>").trim():"",Q=(0,t.useCallback)((async()=>{try{if(navigator.clipboard&&navigator.clipboard.readText){const e=await navigator.clipboard.readText();if(e){const t=e.replace(/\n/g,"<br>");document.execCommand("insertHTML",!1,t),T(),window.showToast&&window.showToast("\u0110\xe3 d\xe1n n\u1ed9i dung s\u1ea1ch v\xe0 x\xf3a t\u1ea5t c\u1ea3 links th\xe0nh c\xf4ng!","success")}else window.showToast&&window.showToast("Clipboard tr\u1ed1ng ho\u1eb7c kh\xf4ng c\xf3 n\u1ed9i dung text","warning")}else{const e=prompt("D\xe1n n\u1ed9i dung v\xe0o \u0111\xe2y:");if(e){const t=e.replace(/\n/g,"<br>");document.execCommand("insertHTML",!1,t),T(),window.showToast&&window.showToast("\u0110\xe3 d\xe1n n\u1ed9i dung s\u1ea1ch v\xe0 x\xf3a t\u1ea5t c\u1ea3 links th\xe0nh c\xf4ng!","success")}}}catch(e){const t=prompt("D\xe1n n\u1ed9i dung v\xe0o \u0111\xe2y:");if(t){const e=t.replace(/\n/g,"<br>");document.execCommand("insertHTML",!1,e),T(),window.showToast&&window.showToast("\u0110\xe3 d\xe1n n\u1ed9i dung th\xe0nh c\xf4ng!","success")}else window.showToast&&window.showToast("L\u1ed7i khi truy c\u1eadp clipboard. Vui l\xf2ng th\u1eed l\u1ea1i.","error")}}),[T]);return(0,At.jsxs)("div",{ref:c,className:`simple-rich-editor border border-gray-300 rounded-lg ${i}`,children:[(0,At.jsxs)("div",{className:"border-b border-gray-300 p-3 bg-gray-50 rounded-t-lg transition-all duration-200 "+(p?"sticky":""),children:[p&&(0,At.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-blue-500 rounded-t-lg"}),(0,At.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[p&&(0,At.jsxs)("div",{className:"text-xs text-blue-600 font-medium mr-2 flex items-center",children:[(0,At.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-1 animate-pulse"}),"\u0110ang neo"]}),(0,At.jsxs)("div",{className:"text-xs text-gray-500 font-medium mr-2 flex items-center",children:[(0,At.jsx)("span",{className:"mr-1",children:"History:"}),(0,At.jsxs)("span",{className:"bg-gray-100 px-1 rounded text-xs",children:[y+1,"/",x.length]})]}),(0,At.jsxs)("select",{onChange:e=>{e.target.value&&(P(e.target.value),e.target.value="")},className:"px-2 py-1 text-sm border border-gray-300 rounded",defaultValue:"",children:[(0,At.jsx)("option",{value:"",children:"Ti\xeau \u0111\u1ec1"}),(0,At.jsx)("option",{value:"1",children:"H1"}),(0,At.jsx)("option",{value:"2",children:"H2"}),(0,At.jsx)("option",{value:"3",children:"H3"}),(0,At.jsx)("option",{value:"4",children:"H4"})]}),(0,At.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,At.jsx)("button",{type:"button",onClick:()=>j("bold"),className:"p-1.5 hover:bg-gray-200 rounded",title:"Bold",children:(0,At.jsx)(dD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:()=>j("italic"),className:"p-1.5 hover:bg-gray-200 rounded",title:"Italic",children:(0,At.jsx)(mD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:()=>j("underline"),className:"p-1.5 hover:bg-gray-200 rounded",title:"Underline",children:(0,At.jsx)(gD,{className:"w-4 h-4"})}),(0,At.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,At.jsx)("button",{type:"button",onClick:D,className:"p-1.5 hover:bg-gray-200 rounded",title:"Bullet List",children:(0,At.jsx)(fD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:I,className:"p-1.5 hover:bg-gray-200 rounded",title:"Numbered List",children:(0,At.jsx)(vD,{className:"w-4 h-4"})}),(0,At.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,At.jsx)("button",{type:"button",onClick:M,className:"p-1.5 hover:bg-gray-200 rounded",title:"Insert Link",children:(0,At.jsx)(aD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:L,disabled:u,className:"p-1.5 hover:bg-gray-200 rounded disabled:opacity-50",title:"Insert Image",children:u?(0,At.jsx)("div",{className:"w-4 h-4 animate-spin border-2 border-gray-600 border-t-transparent rounded-full"}):(0,At.jsx)(lD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:F,className:"p-1.5 hover:bg-gray-200 rounded",title:"Code Block",children:(0,At.jsx)(bD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:U,className:"p-1.5 hover:bg-gray-200 rounded",title:"View Source HTML",children:(0,At.jsx)(ND,{className:"w-4 h-4"})}),(0,At.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,At.jsx)("button",{type:"button",onClick:Q,className:"p-1.5 hover:bg-gray-200 rounded",title:"Paste Clean Text (Remove Links)",children:(0,At.jsx)(CD,{className:"w-4 h-4"})}),(0,At.jsx)("div",{className:"w-px h-6 bg-gray-300"}),(0,At.jsx)("button",{type:"button",onClick:S,disabled:y<=0,className:"p-1.5 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",children:(0,At.jsx)(SD,{className:"w-4 h-4"})}),(0,At.jsx)("button",{type:"button",onClick:_,disabled:y>=x.length-1,className:"p-1.5 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",children:(0,At.jsx)(ED,{className:"w-4 h-4"})})]})]}),(0,At.jsx)("div",{ref:o,contentEditable:!0,suppressContentEditableWarning:!0,style:{minHeight:a},className:"p-4 focus:outline-none",onInput:T,onKeyDown:E,onPaste:B,"data-placeholder":n?"":s}),(0,At.jsx)("input",{ref:l,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&k(t),e.target.value=""},className:"hidden"}),h&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,At.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,At.jsx)(OM,{className:"w-5 h-5 mr-2"}),"View Source HTML"]}),(0,At.jsx)("button",{onClick:O,className:"text-gray-400 hover:text-gray-600",children:(0,At.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,At.jsxs)("div",{className:"mb-4 flex-1 overflow-hidden",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTML Source Code:"}),(0,At.jsx)("textarea",{value:A,onChange:e=>g(e.target.value),placeholder:"HTML source code s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y...",rows:20,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 font-mono text-sm resize-none overflow-y-auto",style:{maxHeight:"60vh"}}),(0,At.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,At.jsx)("p",{className:"text-xs text-gray-500",children:'Ch\u1ec9nh s\u1eeda HTML source code tr\u1ef1c ti\u1ebfp. Nh\u1ea5n "C\u1eadp nh\u1eadt" \u0111\u1ec3 \xe1p d\u1ee5ng thay \u0111\u1ed5i v\xe0o editor.'}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(A),window.showToast&&window.showToast("\u0110\xe3 copy HTML source v\xe0o clipboard!","success")},className:"px-2 py-1 text-xs font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"Copy"}),(0,At.jsx)("button",{onClick:()=>g(""),className:"px-2 py-1 text-xs font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded transition-colors",children:"Clear"})]})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{onClick:O,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"H\u1ee7y"}),(0,At.jsx)("button",{onClick:R,disabled:!A.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed rounded-md transition-colors",children:"C\u1eadp nh\u1eadt HTML"})]})]})}),(0,At.jsx)("style",{children:"\n        .simple-rich-editor {\n          position: relative;\n          scroll-behavior: smooth;\n        }\n        \n        .simple-rich-editor .sticky {\n          position: sticky;\n          top: 0;\n          z-index: 10;\n          backdrop-filter: blur(8px);\n          background-color: rgba(255, 255, 255, 0.95);\n          border-bottom: 1px solid #e5e7eb;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        }\n        \n        @media (max-width: 768px) {\n          .simple-rich-editor .sticky {\n            top: 0;\n            backdrop-filter: blur(4px);\n          }\n        }\n        \n        .simple-rich-editor [contenteditable]:empty:before {\n          content: attr(data-placeholder);\n          color: #9ca3af;\n          pointer-events: none;\n        }\n        \n        .simple-rich-editor [contenteditable] {\n          outline: none;\n        }\n        \n        .simple-rich-editor [contenteditable] h1 {\n          font-size: 2em;\n          font-weight: bold;\n          margin: 0.67em 0;\n        }\n        \n        .simple-rich-editor [contenteditable] h2 {\n          font-size: 1.5em;\n          font-weight: bold;\n          margin: 0.75em 0;\n        }\n        \n        .simple-rich-editor [contenteditable] h3 {\n          font-size: 1.25em;\n          font-weight: bold;\n          margin: 0.83em 0;\n        }\n        \n        .simple-rich-editor [contenteditable] h4 {\n          font-size: 1.125em;\n          font-weight: bold;\n          margin: 0.83em 0;\n        }\n        \n        .simple-rich-editor [contenteditable] p {\n          margin: 0.5em 0;\n          line-height: 1.6;\n        }\n        \n        .simple-rich-editor [contenteditable] br {\n          line-height: 1.6;\n        }\n        \n        .simple-rich-editor [contenteditable] ul,\n        .simple-rich-editor [contenteditable] ol {\n          margin: 1em 0;\n          padding-left: 2em;\n        }\n        \n        .simple-rich-editor [contenteditable] a {\n          color: #3b82f6;\n          text-decoration: underline;\n        }\n        \n        .simple-rich-editor [contenteditable] a:hover {\n          color: #1d4ed8;\n        }\n        \n        .simple-rich-editor [contenteditable] img {\n          max-width: 100%;\n          height: auto;\n          border-radius: 8px;\n          margin: 16px 0;\n        }\n        \n        .simple-rich-editor [contenteditable] pre {\n          background-color: #f3f4f6;\n          padding: 16px;\n          border-radius: 8px;\n          overflow-x: auto;\n          margin: 16px 0;\n          font-family: ui-monospace, SFMono-Regular, 'SF Mono', Monaco, Inconsolata, 'Liberation Mono', 'Courier New', monospace;\n        }\n      "})]})},MD=()=>{const e=ee(),[n,r]=(0,t.useState)(!1),[s,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)({title:"",description:"",content:"",categoryId:"",tags:"",thumbnail:"",slug:"",status:"draft",isFeatured:!1,featuredPosition:1,requireStars:!1,starCost:1});(0,t.useEffect)((()=>{u()}),[]);const u=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"),(0,Hb.My)("name")),t=(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})));i(t)}catch(e){console.error("Error loading categories:",e)}},d=e=>{const{name:t,value:n,type:r,checked:s}=e.target;c((e=>({...e,[t]:"checkbox"===r?s:n,..."title"===t&&{slug:Vk(n)}})))},h=()=>{if(l.thumbnail)return l.thumbnail;if(l.categoryId){const e=s.find((e=>e.id===l.categoryId));return(null===e||void 0===e?void 0:e.thumbnail)||""}return""},m=async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.preventDefault(),r(!0);try{const t=n||l.status||"draft";console.log("Creating article with status:",t);const r={...l,tags:l.tags.split(",").map((e=>e.trim())).filter((e=>e)),thumbnail:h(),slug:l.slug||Vk(l.title),authorId:"admin",authorEmail:"admin@thiendianhan.app",authorDisplayName:"Admin",authorType:"admin",status:t,requireStars:l.requireStars,starCost:l.requireStars?parseInt(l.starCost)||1:0,createdAt:new Date,updatedAt:new Date};console.log("Article data to save:",r),await(0,Hb.gS)((0,Hb.rJ)(Qb.db,"articles"),r),e("/admin/articles")}catch(s){console.error("Error creating article:",s),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea1o b\xe0i vi\u1ebft")}finally{r(!1)}};var A;return a?(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),(0,At.jsxs)("button",{onClick:()=>o(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(OM,{className:"h-4 w-4 mr-2"}),"Quay l\u1ea1i ch\u1ec9nh s\u1eeda"]})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===(A=s.find((e=>e.id===l.categoryId)))||void 0===A?void 0:A.name)||"Kh\xf4ng c\xf3 danh m\u1ee5c"})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:l.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),(l.thumbnail||h())&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("img",{src:l.thumbnail||h(),alt:"Thumbnail",className:"w-full max-w-2xl h-auto rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}}),!l.thumbnail&&h()&&(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:"\ud83d\udca1 \u0110ang s\u1eed d\u1ee5ng \u1ea3nh m\u1eb7c \u0111\u1ecbnh c\u1ee7a danh m\u1ee5c"})]}),(0,At.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:l.description||"M\xf4 t\u1ea3 b\xe0i vi\u1ebft"}),l.tags&&(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:l.tags.split(",").map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e.trim()]},t)))}),(0,At.jsx)("div",{className:"prose max-w-none",children:(0,At.jsx)("div",{dangerouslySetInnerHTML:{__html:l.content||"N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."}})})]})})]})}):(0,At.jsxs)(WL,{children:[(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"T\u1ea1o b\xe0i vi\u1ebft m\u1edbi"}),(0,At.jsx)("p",{className:"text-gray-600",children:"T\u1ea1o b\xe0i vi\u1ebft m\u1edbi cho website"})]}),(0,At.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem tr\u01b0\u1edbc"]})]}),(0,At.jsx)("form",{onSubmit:m,className:"space-y-6",children:(0,At.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ti\xeau \u0111\u1ec1 *"}),(0,At.jsx)("input",{type:"text",name:"title",value:l.title,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug"}),(0,At.jsx)("input",{type:"text",name:"slug",value:l.slug,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"URL slug t\u1ef1 \u0111\u1ed9ng t\u1ea1o t\u1eeb ti\xeau \u0111\u1ec1..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:'T\u1ef1 \u0111\u1ed9ng t\u1ea1o t\u1eeb ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft. V\xed d\u1ee5: "tin-tuc-phong-thuy-2024"'})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh m\u1ee5c *"}),(0,At.jsxs)("select",{name:"categoryId",value:l.categoryId,onChange:d,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn danh m\u1ee5c"}),s.map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]}),0===s.length&&(0,At.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Ch\u01b0a c\xf3 danh m\u1ee5c n\xe0o. Vui l\xf2ng t\u1ea1o danh m\u1ee5c tr\u01b0\u1edbc."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3 ng\u1eafn *"}),(0,At.jsx)("textarea",{name:"description",value:l.description,onChange:d,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp m\xf4 t\u1ea3 ng\u1eafn cho b\xe0i vi\u1ebft..."})]}),(0,At.jsx)("div",{children:(0,At.jsx)(cD,{value:l.thumbnail,onChange:e=>c((t=>({...t,thumbnail:e}))),label:"\u1ea2nh thumb b\xe0i vi\u1ebft",defaultThumbnail:h(),showDefaultThumbnail:!l.thumbnail&&!!l.categoryId})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,At.jsx)("input",{type:"text",name:"tags",value:l.tags,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp tags, ph\xe2n c\xe1ch b\u1eb1ng d\u1ea5u ph\u1ea9y..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: phong th\u1ee7y, t\u1eed vi, l\u1ecbch \xe2m"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"isFeatured",checked:l.isFeatured,onChange:d,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"\u0110\xe1nh d\u1ea5u tin n\u1ed5i b\u1eadt"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:'B\xe0i vi\u1ebft n\xe0y s\u1ebd hi\u1ec3n th\u1ecb \u1edf ph\u1ea7n "Tin N\u1ed5i B\u1eadt" tr\xean trang ch\u1ee7'})]}),l.isFeatured&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"V\u1ecb tr\xed hi\u1ec3n th\u1ecb tin n\u1ed5i b\u1eadt"}),(0,At.jsxs)("select",{name:"featuredPosition",value:l.featuredPosition,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:1,children:"V\u1ecb tr\xed 1 - Tin ch\xednh (l\u1edbn nh\u1ea5t)"}),(0,At.jsx)("option",{value:2,children:"V\u1ecb tr\xed 2 - Tin ph\u1ee5 (nh\u1ecf h\u01a1n)"}),(0,At.jsx)("option",{value:3,children:"V\u1ecb tr\xed 3 - Tin ph\u1ee5 (nh\u1ecf nh\u1ea5t)"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\u1ecb tr\xed 1: Tin ch\xednh hi\u1ec3n th\u1ecb l\u1edbn nh\u1ea5t, V\u1ecb tr\xed 2-3: Tin ph\u1ee5 hi\u1ec3n th\u1ecb nh\u1ecf h\u01a1n"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"requireStars",checked:l.requireStars,onChange:d,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Y\xeau c\u1ea7u ng\u01b0\u1eddi d\xf9ng c\u1ea7n sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Khi b\xe0i vi\u1ebft y\xeau c\u1ea7u sao, ng\u01b0\u1eddi d\xf9ng s\u1ebd ph\u1ea3i tr\u1ea3 m\u1ed9t s\u1ed1 sao \u0111\u1ec3 \u0111\u1ecdc."})]}),l.requireStars&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 sao c\u1ea7n \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"}),(0,At.jsx)("input",{type:"number",name:"starCost",value:l.starCost,onChange:d,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: 10 sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\u1ed9i dung ch\xednh *"}),(0,At.jsx)(BD,{value:l.content,onChange:e=>c((t=>({...t,content:e}))),placeholder:"Nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft...",height:"400px"})]})]})})})]}),(0,At.jsx)(uI,{onCancel:()=>e("/admin/articles"),onSaveDraft:async()=>{await m({preventDefault:()=>{}},"draft")},onSubmit:async()=>{await m({preventDefault:()=>{}},"pending")},loading:n,disabled:!l.categoryId,showSubmit:!0,cancelText:"H\u1ee7y",saveText:"L\u01b0u nh\xe1p",submitText:"G\u1eedi duy\u1ec7t"})]})},kD=()=>{const e=ee(),{id:n}=te(),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)({title:"",description:"",content:"",categoryId:"",tags:"",thumbnail:"",slug:"",status:"draft",isFeatured:!1,featuredPosition:1,requireStars:!1,starCost:1});(0,t.useEffect)((()=>{m()}),[n]);const m=async()=>{try{u(!0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"),(0,Hb.My)("name")),r=(await(0,Hb.GG)(t)).docs.map((e=>({id:e.id,...e.data()})));a(r);const s=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",n));if(s.exists()){const e=s.data();h({title:e.title||"",description:e.description||"",content:e.content||"",categoryId:e.categoryId||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",thumbnail:e.thumbnail||"",slug:e.slug||"",status:e.status||"draft",isFeatured:e.isFeatured||!1,featuredPosition:e.featuredPosition||1,requireStars:e.requireStars||!1,starCost:e.starCost||1})}else alert("B\xe0i vi\u1ebft kh\xf4ng t\u1ed3n t\u1ea1i"),e("/admin/articles")}catch(t){console.error("Error loading data:",t),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea3i d\u1eef li\u1ec7u")}finally{u(!1)}},A=e=>{const{name:t,value:n,type:r,checked:s}=e.target;h((e=>({...e,[t]:"checkbox"===r?s:n,..."title"===t&&{slug:Vk(n)}})))},g=()=>{if(d.thumbnail)return d.thumbnail;if(d.categoryId){const e=i.find((e=>e.id===d.categoryId));return(null===e||void 0===e?void 0:e.thumbnail)||""}return""},p=async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.preventDefault(),s(!0);try{const t={...d,status:r||d.status,tags:d.tags.split(",").map((e=>e.trim())).filter((e=>e)),slug:d.slug||Vk(d.title),requireStars:d.requireStars,starCost:d.requireStars?parseInt(d.starCost)||1:0,updatedAt:new Date};await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",n),t),e("/admin/articles")}catch(i){console.error("Error updating article:",i),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xe0i vi\u1ebft")}finally{s(!1)}};return c?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):o?(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),(0,At.jsxs)("button",{onClick:()=>l(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(OM,{className:"h-4 w-4 mr-2"}),"Quay l\u1ea1i ch\u1ec9nh s\u1eeda"]})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===(f=i.find((e=>e.id===d.categoryId)))||void 0===f?void 0:f.name)||"Kh\xf4ng c\xf3 danh m\u1ee5c"})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:d.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),(d.thumbnail||g())&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("img",{src:d.thumbnail||g(),alt:"Thumbnail",className:"w-full max-w-2xl h-auto rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}}),!d.thumbnail&&g()&&(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:"\ud83d\udca1 \u0110ang s\u1eed d\u1ee5ng \u1ea3nh m\u1eb7c \u0111\u1ecbnh c\u1ee7a danh m\u1ee5c"})]}),(0,At.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:d.description||"M\xf4 t\u1ea3 b\xe0i vi\u1ebft"}),d.tags&&(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:d.tags.split(",").map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e.trim()]},t)))}),(0,At.jsx)("div",{className:"prose max-w-none",children:(0,At.jsx)("div",{dangerouslySetInnerHTML:{__html:d.content||"N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."}})})]})})]})}):(0,At.jsxs)(WL,{children:[(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt th\xf4ng tin b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem tr\u01b0\u1edbc"]})]}),(0,At.jsx)("form",{onSubmit:p,className:"space-y-6",children:(0,At.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ti\xeau \u0111\u1ec1 *"}),(0,At.jsx)("input",{type:"text",name:"title",value:d.title,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug"}),(0,At.jsx)("input",{type:"text",name:"slug",value:d.slug,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"URL slug t\u1ef1 \u0111\u1ed9ng t\u1ea1o t\u1eeb ti\xeau \u0111\u1ec1..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:'T\u1ef1 \u0111\u1ed9ng t\u1ea1o t\u1eeb ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft. V\xed d\u1ee5: "tin-tuc-phong-thuy-2024"'})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh m\u1ee5c *"}),(0,At.jsxs)("select",{name:"categoryId",value:d.categoryId,onChange:A,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn danh m\u1ee5c"}),i.map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3 ng\u1eafn *"}),(0,At.jsx)("textarea",{name:"description",value:d.description,onChange:A,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp m\xf4 t\u1ea3 ng\u1eafn cho b\xe0i vi\u1ebft..."})]}),(0,At.jsx)("div",{children:(0,At.jsx)(cD,{value:d.thumbnail,onChange:e=>h((t=>({...t,thumbnail:e}))),label:"\u1ea2nh thumb b\xe0i vi\u1ebft",defaultThumbnail:g(),showDefaultThumbnail:!d.thumbnail&&!!d.categoryId})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,At.jsx)("input",{type:"text",name:"tags",value:d.tags,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp tags, ph\xe2n c\xe1ch b\u1eb1ng d\u1ea5u ph\u1ea9y..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: phong th\u1ee7y, t\u1eed vi, l\u1ecbch \xe2m"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"isFeatured",checked:d.isFeatured,onChange:A,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"\u0110\xe1nh d\u1ea5u tin n\u1ed5i b\u1eadt"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:'B\xe0i vi\u1ebft n\xe0y s\u1ebd hi\u1ec3n th\u1ecb \u1edf ph\u1ea7n "Tin N\u1ed5i B\u1eadt" tr\xean trang ch\u1ee7'})]}),d.isFeatured&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"V\u1ecb tr\xed hi\u1ec3n th\u1ecb tin n\u1ed5i b\u1eadt"}),(0,At.jsxs)("select",{name:"featuredPosition",value:d.featuredPosition,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,At.jsx)("option",{value:1,children:"V\u1ecb tr\xed 1 - Tin ch\xednh (l\u1edbn nh\u1ea5t)"}),(0,At.jsx)("option",{value:2,children:"V\u1ecb tr\xed 2 - Tin ph\u1ee5 (nh\u1ecf h\u01a1n)"}),(0,At.jsx)("option",{value:3,children:"V\u1ecb tr\xed 3 - Tin ph\u1ee5 (nh\u1ecf nh\u1ea5t)"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\u1ecb tr\xed 1: Tin ch\xednh hi\u1ec3n th\u1ecb l\u1edbn nh\u1ea5t, V\u1ecb tr\xed 2-3: Tin ph\u1ee5 hi\u1ec3n th\u1ecb nh\u1ecf h\u01a1n"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"requireStars",checked:d.requireStars,onChange:A,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Y\xeau c\u1ea7u ng\u01b0\u1eddi d\xf9ng c\u1ea7n sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Khi b\xe0i vi\u1ebft y\xeau c\u1ea7u sao, ng\u01b0\u1eddi d\xf9ng s\u1ebd ph\u1ea3i tr\u1ea3 m\u1ed9t s\u1ed1 sao \u0111\u1ec3 \u0111\u1ecdc."})]}),d.requireStars&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 sao c\u1ea7n \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"}),(0,At.jsx)("input",{type:"number",name:"starCost",value:d.starCost,onChange:A,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: 10 sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\u1ed9i dung ch\xednh *"}),(0,At.jsx)(BD,{value:d.content,onChange:e=>h((t=>({...t,content:e}))),placeholder:"Nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft...",height:"400px"})]})]})})})]}),(0,At.jsx)(uI,{onCancel:()=>e("/admin/articles"),onSaveDraft:async e=>{await p(e,"draft")},onSubmit:async e=>{await p(e,"pending")},loading:r,disabled:!d.categoryId,showSubmit:!0,cancelText:"H\u1ee7y",saveText:"L\u01b0u nh\xe1p",submitText:"G\u1eedi duy\u1ec7t"})]});var f},LD=()=>{var e,n;const{id:r}=te(),s=ee(),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(!0);(0,t.useEffect)((()=>{m()}),[r]);const m=async()=>{try{var e,t;h(!0);const n=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",r));if(!n.exists())return alert("B\xe0i vi\u1ebft kh\xf4ng t\u1ed3n t\u1ea1i"),void s("/admin/articles");const i={id:n.id,...n.data(),createdAt:null===(e=n.data().createdAt)||void 0===e?void 0:e.toDate(),updatedAt:null===(t=n.data().updatedAt)||void 0===t?void 0:t.toDate()};if(a(i),i.categoryId){const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articleCategories",i.categoryId));if(e.exists()){const t={id:e.id,...e.data()};l(t),u([t])}}}catch(n){console.error("Error loading article:",n),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea3i b\xe0i vi\u1ebft")}finally{h(!1)}},A=e=>{const t={draft:{label:"Nh\xe1p",className:"bg-gray-100 text-gray-800"},pending:{label:"Ch\u1edd duy\u1ec7t",className:"bg-yellow-100 text-yellow-800"},published:{label:"\u0110\xe3 \u0111\u0103ng",className:"bg-green-100 text-green-800"},rejected:{label:"T\u1eeb ch\u1ed1i",className:"bg-red-100 text-red-800"}},n=t[e]||t.draft;return(0,At.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n.className}`,children:n.label})};return d?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):i?(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("button",{onClick:()=>s("/admin/articles"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,At.jsx)(mt,{className:"h-4 w-4 mr-2"}),"Quay l\u1ea1i danh s\xe1ch"]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[A(i.status),(0,At.jsx)("button",{onClick:()=>s(`/admin/articles/${i.id}/edit`),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Ch\u1ec9nh s\u1eeda"})]})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Th\xf4ng tin b\xe0i vi\u1ebft"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Danh m\u1ee5c: "}),(0,At.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===o||void 0===o?void 0:o.name)||"Kh\xf4ng c\xf3 danh m\u1ee5c"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Tr\u1ea1ng th\xe1i: "}),A(i.status)]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"Ng\xe0y t\u1ea1o: "}),(0,At.jsx)("span",{className:"text-sm text-gray-900",children:null===(e=i.createdAt)||void 0===e?void 0:e.toLocaleString("vi-VN")})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"C\u1eadp nh\u1eadt: "}),(0,At.jsx)("span",{className:"text-sm text-gray-900",children:null===(n=i.updatedAt)||void 0===n?void 0:n.toLocaleString("vi-VN")})]})]})]}),i.tags&&i.tags.length>0&&(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Tags"}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:i.tags.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e]},t)))})]})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-8",children:(0,At.jsxs)("div",{className:"max-w-4xl mx-auto",children:[o&&(0,At.jsx)("div",{className:"mb-4",children:(0,At.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:o.name})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:i.title}),Qk(i,c)&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("img",{src:Qk(i,c),alt:"Article thumbnail",className:"w-full max-w-2xl h-auto rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}}),!i.thumbnail&&!i.thumbnailUrl&&(null===o||void 0===o?void 0:o.thumbnail)&&(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic",children:"\ud83d\udca1 \u0110ang s\u1eed d\u1ee5ng \u1ea3nh m\u1eb7c \u0111\u1ecbnh c\u1ee7a danh m\u1ee5c"})]}),(0,At.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:i.description}),i.tags&&i.tags.length>0&&(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:i.tags.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e]},t)))}),(0,At.jsx)("div",{className:"prose max-w-none",children:(0,At.jsx)("div",{className:"text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:i.content||""}})})]})})]})}):(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"text-center py-12",children:(0,At.jsx)("p",{className:"text-gray-500",children:"Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft"})})})},ID=()=>{var e,n;const{adminUser:r}=AL(),[s,i]=(0,t.useState)(!0),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(null),[h,m]=(0,t.useState)({accessDurationDays:30,enabled:!0,lastUpdated:null,updatedBy:null}),[A,g]=(0,t.useState)(null),[p,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{x()}),[]),(0,t.useEffect)((()=>{if(A){const e=h.accessDurationDays!==A.accessDurationDays||h.enabled!==A.enabled;f(e)}}),[h,A]);const x=async()=>{try{i(!0);const e=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"adminConfig","articleAccess"));if(e.exists()){const t=e.data(),n={accessDurationDays:t.accessDurationDays||30,enabled:void 0===t.enabled||t.enabled,lastUpdated:t.lastUpdated,updatedBy:t.updatedBy};m(n),g(n)}else await v(h),g(h)}catch(e){console.error("Error loading article access config:",e),window.showToast&&window.showToast("L\u1ed7i t\u1ea3i c\u1ea5u h\xecnh truy c\u1eadp b\xe0i vi\u1ebft","error")}finally{i(!1)}},v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;try{o(!0);const t={...e,lastUpdated:(0,Hb.O5)(),updatedBy:(null===r||void 0===r?void 0:r.email)||"Unknown"};await(0,Hb.BN)((0,Hb.doc)(Qb.db,"adminConfig","articleAccess"),t),hw.clearConfigCache(),g(e),f(!1),window.showToast&&window.showToast("\u0110\xe3 l\u01b0u c\u1ea5u h\xecnh truy c\u1eadp b\xe0i vi\u1ebft","success")}catch(t){console.error("Error saving article access config:",t),window.showToast&&window.showToast("L\u1ed7i l\u01b0u c\u1ea5u h\xecnh truy c\u1eadp b\xe0i vi\u1ebft","error")}finally{o(!1)}},y=e=>1===e?"1 ng\xe0y":7===e?"1 tu\u1ea7n":30===e?"1 th\xe1ng":90===e?"3 th\xe1ng":365===e?"1 n\u0103m":`${e} ng\xe0y`;return s?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsx)("div",{className:"flex items-center justify-between",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"C\u1ea5u h\xecnh truy c\u1eadp b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-gray-600 mt-1",children:"Qu\u1ea3n l\xfd th\u1eddi gian truy c\u1eadp b\xe0i vi\u1ebft sau khi user tr\u1ea3 sao"})]})}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p&&await v()},className:"bg-white rounded-lg shadow-md",children:[(0,At.jsxs)("div",{className:"p-6 space-y-6",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"K\xedch ho\u1ea1t h\u1ec7 th\u1ed1ng truy c\u1eadp c\xf3 th\u1eddi h\u1ea1n"}),(0,At.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"B\u1eadt/t\u1eaft t\xednh n\u0103ng truy c\u1eadp b\xe0i vi\u1ebft trong th\u1eddi gian gi\u1edbi h\u1ea1n"})]}),(0,At.jsx)("button",{type:"button",onClick:()=>{m((e=>({...e,enabled:!e.enabled})))},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 "+(h.enabled?"bg-blue-600":"bg-gray-200"),children:(0,At.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(h.enabled?"translate-x-6":"translate-x-1")})})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Th\u1eddi gian truy c\u1eadp (ng\xe0y)"}),(0,At.jsxs)("div",{className:"flex items-center gap-4",children:[(0,At.jsx)("input",{type:"number",min:"1",max:"365",value:h.accessDurationDays,onChange:e=>{const t=parseInt(e.target.value);t>=1&&t<=365&&m((e=>({...e,accessDurationDays:t})))},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!h.enabled}),(0,At.jsxs)("span",{className:"text-sm text-gray-600",children:["= ",y(h.accessDurationDays)]})]}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"T\u1eeb 1 \u0111\u1ebfn 365 ng\xe0y"})]}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Ch\u1ecdn nhanh:"}),(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:1,label:"1 ng\xe0y"},{value:7,label:"1 tu\u1ea7n"},{value:30,label:"1 th\xe1ng"},{value:90,label:"3 th\xe1ng"},{value:365,label:"1 n\u0103m"}].map((e=>(0,At.jsx)("button",{type:"button",onClick:()=>m((t=>({...t,accessDurationDays:e.value}))),disabled:!h.enabled,className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${h.accessDurationDays===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${h.enabled?"":"opacity-50 cursor-not-allowed"}`,children:e.label},e.value)))})]})]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start gap-3",children:[(0,At.jsx)(nT,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"C\xe1ch th\u1ee9c ho\u1ea1t \u0111\u1ed9ng"}),(0,At.jsxs)("div",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[(0,At.jsxs)("p",{children:["\u2022 Khi user tr\u1ea3 sao cho b\xe0i vi\u1ebft, h\u1ecd s\u1ebd c\xf3 quy\u1ec1n truy c\u1eadp trong ",(0,At.jsx)("strong",{children:y(h.accessDurationDays)})]}),(0,At.jsx)("p",{children:"\u2022 Th\u1eddi gian \u0111\u01b0\u1ee3c t\xednh t\u1eeb l\xfac thanh to\xe1n th\xe0nh c\xf4ng"}),(0,At.jsx)("p",{children:"\u2022 Sau khi h\u1ebft h\u1ea1n, user c\u1ea7n tr\u1ea3 sao l\u1ea1i \u0111\u1ec3 ti\u1ebfp t\u1ee5c xem"}),(0,At.jsx)("p",{children:"\u2022 D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef c\u1ea3 local v\xe0 database \u0111\u1ec3 \u0111\u1ed3ng b\u1ed9 cross-device"})]})]})]})}),h.lastUpdated&&(0,At.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,At.jsx)(Iy,{className:"h-4 w-4"}),(0,At.jsxs)("span",{children:["C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i: ",(null===(e=h.lastUpdated)||void 0===e||null===(n=e.toDate)||void 0===n?void 0:n.call(e).toLocaleString())||"N/A"]}),h.updatedBy&&(0,At.jsxs)("span",{className:"ml-2",children:["b\u1edfi ",(0,At.jsx)("strong",{children:h.updatedBy})]})]})})]}),(0,At.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("div",{className:"text-sm text-gray-600",children:p?(0,At.jsx)("span",{className:"text-orange-600 font-medium",children:"C\xf3 thay \u0111\u1ed5i ch\u01b0a l\u01b0u"}):(0,At.jsx)("span",{className:"text-green-600 font-medium",children:"\u0110\xe3 l\u01b0u"})}),(0,At.jsxs)("div",{className:"flex items-center gap-3",children:[(0,At.jsxs)("button",{type:"button",onClick:()=>{A&&(m({...A}),f(!1))},disabled:!p||a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,At.jsx)(ky,{className:"h-4 w-4 mr-2 inline"}),"H\u1ee7y"]}),(0,At.jsx)("button",{type:"submit",disabled:!p||a,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"\u0110ang l\u01b0u..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2 inline"}),"L\u01b0u thay \u0111\u1ed5i"]})})]})]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,At.jsx)(XC,{className:"h-6 w-6 text-purple-600"}),(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"C\u1eadp nh\u1eadt th\u1eddi h\u1ea1n truy c\u1eadp hi\u1ec7n c\xf3"})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start gap-3",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-sm font-medium text-yellow-900",children:"L\u01b0u \xfd quan tr\u1ecdng"}),(0,At.jsxs)("div",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[(0,At.jsx)("p",{children:"\u2022 Ch\u1ec9 c\u1eadp nh\u1eadt nh\u1eefng b\xe0i vi\u1ebft \u0111\xe3 c\xf3 s\u1eb5n th\u1eddi h\u1ea1n truy c\u1eadp"}),(0,At.jsx)("p",{children:"\u2022 Ch\u1ec9 c\u1eadp nh\u1eadt n\u1ebfu th\u1eddi h\u1ea1n m\u1edbi d\xe0i h\u01a1n th\u1eddi h\u1ea1n hi\u1ec7n t\u1ea1i"}),(0,At.jsx)("p",{children:"\u2022 Th\u1eddi h\u1ea1n m\u1edbi \u0111\u01b0\u1ee3c t\xednh t\u1eeb th\u1eddi \u0111i\u1ec3m tr\u1ea3 sao ban \u0111\u1ea7u"}),(0,At.jsx)("p",{children:"\u2022 N\xean l\u01b0u c\u1ea5u h\xecnh tr\u01b0\u1edbc khi th\u1ef1c hi\u1ec7n c\u1eadp nh\u1eadt"}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:'N\u1ebfu user v\u1eabn th\u1ea5y th\xf4ng tin c\u0169, nh\u1ea5n "X\xf3a Cache"'})," \u0111\u1ec3 force refresh"]})]})]})]})}),u&&(0,At.jsx)("div",{className:"border rounded-lg p-4 "+(u.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,At.jsxs)("div",{className:"flex items-start gap-3",children:[(0,At.jsx)(sM,{className:"h-5 w-5 mt-0.5 flex-shrink-0 "+(u.success?"text-green-600":"text-red-600")}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-sm font-medium "+(u.success?"text-green-900":"text-red-900"),children:"K\u1ebft qu\u1ea3 c\u1eadp nh\u1eadt"}),(0,At.jsx)("p",{className:"text-sm mt-1 "+(u.success?"text-green-700":"text-red-700"),children:u.success?`\u0110\xe3 c\u1eadp nh\u1eadt ${u.migrated}/${u.total} b\u1ea3n ghi truy c\u1eadp`:`L\u1ed7i: ${u.error}`})]})]})}),(0,At.jsxs)("div",{className:"flex gap-3",children:[(0,At.jsx)("button",{type:"button",onClick:async()=>{try{c(!0),d(null),window.showToast&&window.showToast("B\u1eaft \u0111\u1ea7u c\u1eadp nh\u1eadt th\u1eddi h\u1ea1n truy c\u1eadp cho c\xe1c b\xe0i vi\u1ebft \u0111\xe3 c\xf3...","info");const e=await hw.migrateExistingAccess(!0);d(e),e.success?e.migrated>0?window.showToast&&window.showToast(`\u0110\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng ${e.migrated}/${e.total} b\u1ea3n ghi truy c\u1eadp`,"success"):window.showToast&&window.showToast("Kh\xf4ng c\xf3 b\u1ea3n ghi n\xe0o c\u1ea7n c\u1eadp nh\u1eadt","info"):window.showToast&&window.showToast(`L\u1ed7i migration: ${e.error}`,"error")}catch(e){console.error("Error during migration:",e),window.showToast&&window.showToast("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt th\u1eddi h\u1ea1n truy c\u1eadp","error")}finally{c(!1)}},disabled:l||p,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block"}),"\u0110ang c\u1eadp nh\u1eadt..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2 inline"}),"C\u1eadp nh\u1eadt th\u1eddi h\u1ea1n truy c\u1eadp hi\u1ec7n c\xf3"]})}),(0,At.jsxs)("button",{type:"button",onClick:()=>{try{hw.clearLocalCache(),window.showToast&&window.showToast("\u0110\xe3 x\xf3a cache truy c\u1eadp b\xe0i vi\u1ebft. User s\u1ebd th\u1ea5y th\xf4ng tin m\u1edbi khi refresh trang.","success")}catch(e){console.error("Error clearing cache:",e),window.showToast&&window.showToast("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a cache","error")}},disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2 inline"}),"X\xf3a Cache"]})]}),p&&(0,At.jsx)("p",{className:"text-sm text-orange-600 text-center",children:"Vui l\xf2ng l\u01b0u c\u1ea5u h\xecnh tr\u01b0\u1edbc khi th\u1ef1c hi\u1ec7n c\u1eadp nh\u1eadt"})]})]})})]})})},DD=()=>{const[e,n]=(0,t.useState)([]),[r,s]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)("name"),[d,h]=(0,t.useState)("asc"),[m,A]=(0,t.useState)(!1),[g,p]=(0,t.useState)(null),[f,x]=(0,t.useState)({name:"",description:"",slug:"",thumbnail:null,responsibilityNotice:""}),[v,y]=(0,t.useState)(!1),b="N\u1ed9i dung \u0111\u01b0\u1ee3c s\u01b0u t\u1ea7m v\xe0 ch\u1ecdn l\u1ecdc t\u1eeb kinh nghi\u1ec7m d\xe2n gian - T\u1ea5t c\u1ea3 ch\u1ec9 mang t\xednh ch\u1ea5t tham kh\u1ea3o kh\xf4ng mang t\xednh ch\u1ea5t \u0111\u1ea3m b\u1ea3o ch\xednh x\xe1c",{toasts:w,showToast:N,removeToast:j}=uM(),C=BI(r,10);(0,t.useEffect)((()=>{T()}),[]),(0,t.useEffect)((()=>{E()}),[e,o,c,d]),(0,t.useEffect)((()=>{C.resetToFirstPage()}),[o,c,d]);const T=async()=>{try{a(!0);const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"),(0,Hb.My)("name")),t=await(0,Hb.GG)(e),r=await Promise.all(t.docs.map((async e=>{const t={id:e.id,...e.data()},n=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("categoryId","==",e.id));return{...t,articleCount:(await(0,Hb.GG)(n)).size}})));n(r)}catch(e){console.error("Error loading categories:",e)}finally{a(!1)}},S=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),_=e=>{const{name:t,value:n}=e.target;x((e=>({...e,[t]:n,..."name"===t&&{slug:S(n)}})))},E=()=>{let t=[...e];o&&(t=t.filter((e=>{var t,n,r;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.slug)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()))}))),t.sort(((e,t)=>{let n,r;switch(c){case"name":default:n=e.name||"",r=t.name||"";break;case"articleCount":n=e.articleCount||0,r=t.articleCount||0;break;case"createdAt":n=e.createdAt||new Date(0),r=t.createdAt||new Date(0)}return"asc"===d?n>r?1:-1:n<r?1:-1})),s(t)},B=[{key:"thumbnail",header:"\u1ea2nh \u0111\u1ea1i di\u1ec7n",width:"120px",render:e=>(0,At.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:e.thumbnail?(0,At.jsx)("img",{className:"h-12 w-12 rounded-lg object-cover",src:e.thumbnail,alt:e.name,onError:e=>{e.target.style.display="none"}}):(0,At.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,At.jsx)(tL,{className:"h-6 w-6 text-gray-400"})})})},{key:"name",header:"Danh m\u1ee5c",width:"500px",render:e=>(0,At.jsxs)("div",{className:"max-w-lg",children:[(0,At.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",title:e.name,children:e.name}),e.description&&(0,At.jsx)("div",{className:"text-sm text-gray-500 line-clamp-2 mt-1",title:e.description,children:e.description.length>100?`${e.description.substring(0,100)}...`:e.description})]})},{key:"slug",header:"Slug",width:"200px",render:e=>(0,At.jsx)("div",{className:"max-w-[180px]",children:(0,At.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs truncate block",title:e.slug,children:e.slug})})},{key:"articleCount",header:"S\u1ed1 b\xe0i vi\u1ebft",width:"120px",render:e=>(0,At.jsxs)(tI,{variant:e.articleCount>0?"green":"gray",children:[e.articleCount," b\xe0i vi\u1ebft"]})}],M=(0,At.jsxs)("div",{className:"text-center py-12",children:[(0,At.jsx)(tL,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,At.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Kh\xf4ng c\xf3 danh m\u1ee5c"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:o?"Kh\xf4ng t\xecm th\u1ea5y danh m\u1ee5c ph\xf9 h\u1ee3p v\u1edbi t\u1eeb kh\xf3a t\xecm ki\u1ebfm.":"Ch\u01b0a c\xf3 danh m\u1ee5c n\xe0o \u0111\u01b0\u1ee3c t\u1ea1o."})]});return i?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd Danh m\u1ee5c"}),(0,At.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Qu\u1ea3n l\xfd danh m\u1ee5c b\xe0i vi\u1ebft"})]}),(0,At.jsxs)("div",{className:"mt-4 md:mt-0 flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:["T\u1ed5ng: ",r.length," danh m\u1ee5c"]}),(0,At.jsxs)("button",{onClick:()=>A(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,At.jsx)(CI,{className:"h-4 w-4 mr-2"}),"Th\xeam danh m\u1ee5c"]})]})]}),(0,At.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,At.jsx)(kI,{className:"h-5 w-5 text-gray-400"})}),(0,At.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm danh m\u1ee5c...",className:"block text-sm w-full pl-10 pr-3 py-2 h-[30px] border border-gray-300 rounded-md bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:o,onChange:e=>l(e.target.value)})]}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:c,onChange:e=>u(e.target.value),children:[(0,At.jsx)("option",{value:"name",children:"T\xean danh m\u1ee5c"}),(0,At.jsx)("option",{value:"articleCount",children:"S\u1ed1 b\xe0i vi\u1ebft"}),(0,At.jsx)("option",{value:"createdAt",children:"Ng\xe0y t\u1ea1o"})]})}),(0,At.jsx)("div",{children:(0,At.jsxs)("select",{className:"block text-sm w-full px-3 h-[30px] border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:d,onChange:e=>h(e.target.value),children:[(0,At.jsx)("option",{value:"asc",children:"T\u0103ng d\u1ea7n"}),(0,At.jsx)("option",{value:"desc",children:"Gi\u1ea3m d\u1ea7n"})]})})]})}),m&&(0,At.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:g?"Ch\u1ec9nh s\u1eeda danh m\u1ee5c":"Th\xeam danh m\u1ee5c m\u1edbi"}),(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...f,updatedAt:new Date};g?await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articleCategories",g.id),e):await(0,Hb.gS)((0,Hb.rJ)(Qb.db,"articleCategories"),{...e,createdAt:new Date}),A(!1),p(null),x({name:"",description:"",slug:"",thumbnail:null,responsibilityNotice:""}),y(!1),await T()}catch(t){console.error("Error saving category:",t),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi l\u01b0u danh m\u1ee5c")}},className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xean danh m\u1ee5c *"}),(0,At.jsx)("input",{type:"text",name:"name",value:f.name,onChange:_,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp t\xean danh m\u1ee5c..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,At.jsx)("input",{type:"text",name:"slug",value:f.slug,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"URL slug..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"T\u1ef1 \u0111\u1ed9ng t\u1ea1o t\u1eeb t\xean danh m\u1ee5c"})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xf4 t\u1ea3"}),(0,At.jsx)("textarea",{name:"description",value:f.description,onChange:_,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Nh\u1eadp m\xf4 t\u1ea3 danh m\u1ee5c..."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u1ea2nh \u0111\u1ea1i di\u1ec7n danh m\u1ee5c"}),(0,At.jsx)(cD,{value:f.thumbnail,onChange:e=>{x((t=>({...t,thumbnail:e})))},folder:"categories/thumbnails",placeholder:"Upload \u1ea3nh \u0111\u1ea1i di\u1ec7n cho danh m\u1ee5c..."}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"\u1ea2nh n\xe0y s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng l\xe0m thumbnail m\u1eb7c \u0111\u1ecbnh cho c\xe1c b\xe0i vi\u1ebft trong danh m\u1ee5c khi user kh\xf4ng upload \u1ea3nh"})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Th\xf4ng b\xe1o tr\xe1ch nhi\u1ec7m"}),(0,At.jsx)("button",{type:"button",onClick:()=>y(!v),className:"flex items-center text-sm text-gray-500 hover:text-gray-700",children:v?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(TT,{className:"h-4 w-4 mr-1"}),"Kh\xf3a"]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(jT,{className:"h-4 w-4 mr-1"}),"M\u1edf kh\xf3a"]})})]}),(0,At.jsx)("textarea",{name:"responsibilityNotice",value:f.responsibilityNotice||b,onChange:_,rows:3,disabled:!v,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 "+(v?"bg-white":"bg-gray-100 text-gray-500 cursor-not-allowed"),placeholder:"Nh\u1eadp th\xf4ng b\xe1o tr\xe1ch nhi\u1ec7m cho danh m\u1ee5c n\xe0y..."}),(0,At.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Th\xf4ng b\xe1o n\xe0y s\u1ebd hi\u1ec3n th\u1ecb \u1edf cu\u1ed1i b\xe0i vi\u1ebft chi ti\u1ebft thu\u1ed9c danh m\u1ee5c n\xe0y",!v&&(0,At.jsx)("span",{className:"block mt-1 text-orange-600",children:'\u2022 \u0110ang s\u1eed d\u1ee5ng th\xf4ng b\xe1o m\u1eb7c \u0111\u1ecbnh. Nh\u1ea5n "M\u1edf kh\xf3a" \u0111\u1ec3 ch\u1ec9nh s\u1eeda.'})]})]}),(0,At.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,At.jsx)("button",{type:"button",onClick:()=>{A(!1),p(null),x({name:"",description:"",slug:"",thumbnail:null,responsibilityNotice:""}),y(!1)},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"H\u1ee7y"}),(0,At.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:g?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi"})]})]})]}),(0,At.jsx)(sI,{data:C.paginatedItems,columns:B,loading:i,emptyState:M,rowActions:(n,r)=>(0,At.jsxs)(t.Fragment,{children:[(0,At.jsx)("button",{onClick:()=>{(e=>{p(e),x({name:e.name,description:e.description||"",slug:e.slug||S(e.name),thumbnail:e.thumbnail||null,responsibilityNotice:e.responsibilityNotice||b}),y(!1),A(!0)})(n),r()},className:"block w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 hover:text-blue-900",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-2"}),"S\u1eeda"]})}),(0,At.jsx)("button",{onClick:()=>{(async t=>{const n=e.find((e=>e.id===t));if(n.articleCount>0)alert("Kh\xf4ng th\u1ec3 x\xf3a danh m\u1ee5c c\xf3 b\xe0i vi\u1ebft. Vui l\xf2ng x\xf3a ho\u1eb7c chuy\u1ec3n b\xe0i vi\u1ebft sang danh m\u1ee5c kh\xe1c tr\u01b0\u1edbc.");else if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a danh m\u1ee5c n\xe0y?"))try{await(0,Hb.kd)((0,Hb.doc)(Qb.db,"articleCategories",t)),await T()}catch(r){console.error("Error deleting category:",r),alert("C\xf3 l\u1ed7i x\u1ea3y ra khi x\xf3a danh m\u1ee5c")}})(n.id),r()},disabled:n.articleCount>0,className:"block w-full text-left px-4 py-2 text-sm "+(n.articleCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50 hover:text-red-900"),title:n.articleCount>0?"Kh\xf4ng th\u1ec3 x\xf3a danh m\u1ee5c c\xf3 b\xe0i vi\u1ebft":"X\xf3a danh m\u1ee5c",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(PL,{className:"h-4 w-4 mr-2"}),"X\xf3a"]})})]}),hoverable:!0}),(0,At.jsx)(iI,{currentPage:C.currentPage,totalPages:C.totalPages,totalItems:C.totalItems,itemsPerPage:C.itemsPerPage,startIndex:C.startIndex,endIndex:C.endIndex,onPageChange:C.goToPage,onItemsPerPageChange:C.handleItemsPerPageChange}),(0,At.jsx)(cM,{toasts:w,removeToast:j})]})})},PD=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rw;try{return await Qb.auth.sendPasswordResetEmail(e),!0}catch(t){return console.error("\u274c L\u1ed7i g\u1eedi email reset password:",t),!1}},FD=()=>({method1:{title:"Qua Firebase Console (Khuy\u1ebfn ngh\u1ecb)",steps:["1. Truy c\u1eadp: https://console.firebase.google.com/project/thiendianhan-app/authentication/users",`2. T\xecm user ${rw}`,'3. Click "Reset password" \u2192 G\u1eedi email reset',"4. Ki\u1ec3m tra email v\xe0 l\xe0m theo h\u01b0\u1edbng d\u1eabn"]},method2:{title:"Qua Firebase CLI",steps:["1. M\u1edf terminal trong th\u01b0 m\u1ee5c project","2. Ch\u1ea1y: firebase auth:export users.json --project thiendianhan-app","3. Ch\u1ea1y: firebase auth:import users.json --project thiendianhan-app","4. Ho\u1eb7c s\u1eed d\u1ee5ng Firebase Console \u0111\u1ec3 reset"]},method3:{title:"Qua Code (N\u1ebfu c\xf3 quy\u1ec1n)",steps:["1. Import resetAdminPassword t\u1eeb utils/adminPasswordReset.js",`2. G\u1ecdi: await resetAdminPassword("${rw}")`,"3. Ki\u1ec3m tra email v\xe0 l\xe0m theo h\u01b0\u1edbng d\u1eabn"]}});function UD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))}const RD=t.forwardRef(UD);function OD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}const HD=t.forwardRef(OD),QD=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)("info"),o=FD();return(0,At.jsx)("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,At.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,At.jsxs)("div",{className:"text-center mb-8",children:[(0,At.jsx)(RD,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Password Admin"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Kh\xf4i ph\u1ee5c quy\u1ec1n truy c\u1eadp admin khi qu\xean m\u1eadt kh\u1ea9u"})]}),(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,At.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Email Admin"}),(0,At.jsx)("div",{className:"font-medium text-gray-900",children:rw})]}),(0,At.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Tr\u1ea1ng th\xe1i"}),(0,At.jsx)("div",{className:"font-medium text-green-600",children:"Ho\u1ea1t \u0111\u1ed9ng"})]})]})]}),(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:[(0,At.jsx)("h2",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Reset nhanh"}),(0,At.jsxs)("p",{className:"text-yellow-800 mb-4",children:["G\u1eedi email reset password \u0111\u1ebfn ",rw]}),(0,At.jsx)("button",{onClick:async()=>{n(!0),s("");try{await PD()?(s(`\u2705 Email reset password \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111\u1ebfn ${rw}`),a("success")):(s("\u274c C\xf3 l\u1ed7i x\u1ea3y ra khi g\u1eedi email reset password"),a("error"))}catch(e){s(`\u274c L\u1ed7i: ${e.message}`),a("error")}finally{n(!1)}},disabled:e,className:"bg-yellow-500 hover:bg-yellow-600 disabled:bg-yellow-300 text-white font-medium py-2 px-6 rounded-lg flex items-center",children:e?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang g\u1eedi..."]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(EM,{className:"w-4 h-4 mr-2"}),"G\u1eedi email reset"]})})]}),r&&(0,At.jsx)("div",{className:"p-4 rounded-lg mb-8 "+("success"===i?"bg-green-50 border border-green-200 text-green-800":"error"===i?"bg-red-50 border border-red-200 text-red-800":"bg-blue-50 border border-blue-200 text-blue-800"),children:r}),(0,At.jsxs)("div",{className:"space-y-6",children:[(0,At.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"H\u01b0\u1edbng d\u1eabn chi ti\u1ebft"}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center mb-4",children:[(0,At.jsx)(EM,{className:"w-6 h-6 text-blue-500 mr-3"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o.method1.title})]}),(0,At.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:o.method1.steps.map(((e,t)=>(0,At.jsx)("li",{children:e},t)))})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center mb-4",children:[(0,At.jsx)(HD,{className:"w-6 h-6 text-green-500 mr-3"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o.method2.title})]}),(0,At.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:o.method2.steps.map(((e,t)=>(0,At.jsx)("li",{children:e},t)))})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsxs)("div",{className:"flex items-center mb-4",children:[(0,At.jsx)(bD,{className:"w-6 h-6 text-purple-500 mr-3"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o.method3.title})]}),(0,At.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:o.method3.steps.map(((e,t)=>(0,At.jsx)("li",{children:e},t)))})]})]}),(0,At.jsxs)("div",{className:"mt-8 bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"\u26a0\ufe0f L\u01b0u \xfd b\u1ea3o m\u1eadt"}),(0,At.jsxs)("ul",{className:"text-red-800 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 Ch\u1ec9 reset password khi th\u1ef1c s\u1ef1 c\u1ea7n thi\u1ebft"}),(0,At.jsx)("li",{children:"\u2022 Ki\u1ec3m tra email spam n\u1ebfu kh\xf4ng nh\u1eadn \u0111\u01b0\u1ee3c email reset"}),(0,At.jsx)("li",{children:"\u2022 \u0110\u1eb7t m\u1eadt kh\u1ea9u m\u1ea1nh v\u1edbi \xedt nh\u1ea5t 8 k\xfd t\u1ef1"}),(0,At.jsx)("li",{children:"\u2022 B\u1eadt x\xe1c th\u1ef1c 2 y\u1ebfu t\u1ed1 n\u1ebfu c\xf3 th\u1ec3"})]})]})]})})})};n(815);const zD=()=>{var e;null===Qb.Ay||void 0===Qb.Ay||null===(e=Qb.Ay.options)||void 0===e||e.projectId},VD=()=>{window.location.origin},KD=()=>{const[e,n]=(0,t.useState)(!1),r=window.location.origin,s=`${r}/password-reset`;return(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,At.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(Nk,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"C\u1ea5u h\xecnh Custom Email Handler"})]}),(0,At.jsx)("p",{className:"mt-2 text-gray-600",children:"H\u01b0\u1edbng d\u1eabn c\u1ea5u h\xecnh Firebase \u0111\u1ec3 s\u1eed d\u1ee5ng trang \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u t\xf9y ch\u1ec9nh"})]}),(0,At.jsxs)("div",{className:"p-6 space-y-6",children:[(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(nM,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:[(0,At.jsx)("p",{children:"\u2705 Trang /password-reset \u0111\xe3 \u0111\u01b0\u1ee3c t\u1ea1o"}),(0,At.jsx)("p",{children:"\u2705 Route \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o App.js"}),(0,At.jsx)("p",{children:"\u2705 AuthContext \u0111\xe3 \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh"}),(0,At.jsx)("p",{children:"\u2705 UI v\xe0 logic x\u1eed l\xfd \u0111\xe3 ho\xe0n th\xe0nh"})]})]})]})}),(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"C\u1ea7n ho\xe0n th\xe0nh"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-yellow-700",children:"B\u1ea1n c\u1ea7n c\u1ea5u h\xecnh URL trong Firebase Console \u0111\u1ec3 email reset password chuy\u1ec3n h\u01b0\u1edbng \u0111\u1ebfn trang t\xf9y ch\u1ec9nh thay v\xec trang m\u1eb7c \u0111\u1ecbnh c\u1ee7a Firebase."})]})]})}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"B\u01b0\u1edbc 1: M\u1edf Firebase Console"}),(0,At.jsx)("p",{className:"text-gray-600 mb-4",children:"Click n\xfat b\xean d\u01b0\u1edbi \u0111\u1ec3 m\u1edf Firebase Console t\u1ea1i trang Email Templates:"}),(0,At.jsx)("button",{onClick:()=>{window.open("https://console.firebase.google.com/project/thiendianhan-app/authentication/emails","_blank")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"M\u1edf Firebase Console"})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"B\u01b0\u1edbc 2: C\u1ea5u h\xecnh Password Reset Template"}),(0,At.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,At.jsxs)("p",{children:["1. Trong Firebase Console, t\xecm m\u1ee5c ",(0,At.jsx)("strong",{children:'"Password reset"'})]}),(0,At.jsxs)("p",{children:["2. Click v\xe0o icon ",(0,At.jsx)("strong",{children:"b\xfat ch\xec (Edit)"})," \u0111\u1ec3 ch\u1ec9nh s\u1eeda"]}),(0,At.jsxs)("p",{children:["3. Click ",(0,At.jsx)("strong",{children:'"Customize action URL"'})]}),(0,At.jsx)("p",{children:"4. Nh\u1eadp URL b\xean d\u01b0\u1edbi v\xe0o \xf4 input:"})]}),(0,At.jsxs)("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-md p-3",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsx)("code",{className:"text-sm font-mono text-gray-800 break-all",children:s}),(0,At.jsx)("button",{onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),n(!0),setTimeout((()=>n(!1)),2e3)}catch(t){console.error("Failed to copy: ",t)}})(s),className:"ml-2 inline-flex items-center p-1 text-gray-400 hover:text-gray-600",title:"Copy to clipboard",children:(0,At.jsx)(CD,{className:"h-4 w-4"})})]}),e&&(0,At.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"\u2705 \u0110\xe3 copy!"})]}),(0,At.jsx)("div",{className:"mt-4 space-y-2 text-gray-600",children:(0,At.jsxs)("p",{children:["5. Click ",(0,At.jsx)("strong",{children:'"Save"'})," \u0111\u1ec3 l\u01b0u c\u1ea5u h\xecnh"]})})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"B\u01b0\u1edbc 3: Ki\u1ec3m tra c\u1ea5u h\xecnh"}),(0,At.jsxs)("div",{className:"space-y-3 text-gray-600",children:[(0,At.jsx)("p",{children:"1. V\xe0o trang \u0111\u0103ng nh\u1eadp c\u1ee7a \u1ee9ng d\u1ee5ng"}),(0,At.jsx)("p",{children:'2. Click "Qu\xean m\u1eadt kh\u1ea9u?" v\xe0 nh\u1eadp email test'}),(0,At.jsx)("p",{children:"3. Ki\u1ec3m tra email nh\u1eadn \u0111\u01b0\u1ee3c"}),(0,At.jsx)("p",{children:"4. Click link trong email \u0111\u1ec3 xem c\xf3 m\u1edf trang t\xf9y ch\u1ec9nh kh\xf4ng"})]})]}),(0,At.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Chi ti\u1ebft k\u1ef9 thu\u1eadt"}),(0,At.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Domain hi\u1ec7n t\u1ea1i:"})," ",r]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"URL c\u1ea5u h\xecnh:"})," ",s]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Trang x\u1eed l\xfd:"})," src/pages/PasswordReset.js"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Route:"})," /password-reset"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Parameters:"})," mode, oobCode, apiKey, continueUrl"]})]})]}),(0,At.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Debug & Testing"}),(0,At.jsxs)("div",{className:"flex space-x-4",children:[(0,At.jsx)("button",{onClick:()=>{zD(),alert("Xem console \u0111\u1ec3 \u0111\u1ecdc h\u01b0\u1edbng d\u1eabn chi ti\u1ebft!")},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"In h\u01b0\u1edbng d\u1eabn (Console)"}),(0,At.jsx)("button",{onClick:()=>{VD(),alert("Xem console \u0111\u1ec3 ki\u1ec3m tra c\u1ea5u h\xecnh!")},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ki\u1ec3m tra c\u1ea5u h\xecnh (Console)"})]})]})]})]})})})};const GD=new class{constructor(){this.batchSize=50,this.maxBatches=20,this.progressCallback=null,this.completeCallback=null}async analyzeMigrationStatus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.My)("createdAt","desc")),n=await(0,Hb.GG)(t),r={totalUsers:n.size,usersWithTransactions:0,usersNeedMigration:0,totalTransactions:0,maxTransactionsPerUser:0,topUsers:[],migrationPlan:{estimatedTime:0,totalBatches:0,usersToMigrate:[]}};n.docs.map((e=>({id:e.id,...e.data()}))).forEach((t=>{if(t.starTransactions){var n;const i=Object.keys(t.starTransactions).length;var s;if(r.usersWithTransactions++,r.totalTransactions+=i,r.maxTransactionsPerUser=Math.max(r.maxTransactionsPerUser,i),i>e)r.usersNeedMigration++,r.migrationPlan.usersToMigrate.push({id:t.id,email:t.email,displayName:t.displayName||(null===(s=t.profile)||void 0===s?void 0:s.displayName)||"Ch\u01b0a c\xf3 t\xean",transactionCount:i,stars:t.stars||0});r.topUsers.push({id:t.id,email:t.email,displayName:t.displayName||(null===(n=t.profile)||void 0===n?void 0:n.displayName)||"Ch\u01b0a c\xf3 t\xean",transactionCount:i,stars:t.stars||0})}})),r.topUsers.sort(((e,t)=>t.transactionCount-e.transactionCount)),r.topUsers=r.topUsers.slice(0,10);const s=r.migrationPlan.usersToMigrate.reduce(((e,t)=>e+t.transactionCount),0);return r.migrationPlan.totalBatches=Math.ceil(s/this.batchSize),r.migrationPlan.estimatedTime=Math.ceil(.5*r.migrationPlan.totalBatches),r}catch(t){throw console.error("\u274c L\u1ed7i ph\xe2n t\xedch migration:",t),t}}async migrateUserTransactions(e,t){try{const r=Object.entries(t),s=[];for(let e=0;e<r.length;e+=this.batchSize){const t=r.slice(e,e+this.batchSize);s.push(t)}let i=0;const a=[];for(let t=0;t<s.length;t++){const o=s[t],l=(0,Hb.wP)(Qb.db);try{o.forEach((t=>{let[n,r]=t;const s=(0,Hb.doc)(Qb.db,"users",e,"starTransactions",n),i=new Date(r.timestamp).toISOString().substring(0,7),a={...r,month:i,migratedAt:(0,Hb.O5)()};l.set(s,a)})),await l.commit(),i+=o.length,this.progressCallback&&this.progressCallback({userId:e,batchIndex:t+1,totalBatches:s.length,processed:i,total:r.length,progress:Math.round(i/r.length*100)}),await new Promise((e=>setTimeout(e,100)))}catch(n){console.error(`\u274c L\u1ed7i batch ${t} cho user ${e}:`,n),a.push({userId:e,batchIndex:t,error:n.message})}}return{userId:e,success:0===a.length,migratedCount:i,totalCount:r.length,errors:a}}catch(n){throw console.error(`\u274c L\u1ed7i migration user ${e}:`,n),n}}async performMigration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onProgress:t=null,onComplete:n=null,maxUsers:r=null,dryRun:s=!1,specificUsers:i=null}=e;this.progressCallback=t,this.completeCallback=n;const a=Date.now();let o=0,l=0;const c=[];try{const e=await this.analyzeMigrationStatus();if(0===e.usersNeedMigration&&!i)return{success:!0,message:"Kh\xf4ng c\xf3 users n\xe0o c\u1ea7n migration",processed:0,errors:0,duration:0};let d=e.migrationPlan.usersToMigrate;i&&i.length>0&&(d=e.topUsers.filter((e=>i.includes(e.id))));const h=r?d.slice(0,r):d;if(0===h.length)return{success:!0,message:"Kh\xf4ng c\xf3 users n\xe0o \u0111\u1ec3 migration",processed:0,errors:0,duration:0};if(s)return{success:!0,message:"Dry run completed",analysis:e,processed:0,errors:0,duration:Date.now()-a};for(let n=0;n<h.length;n++){const e=h[n];try{const r={userId:e.id,success:!0,migratedCount:e.transactionCount,totalCount:e.transactionCount,errors:[]};c.push(r),o+=r.migratedCount,t&&t({type:"overall",currentUser:n+1,totalUsers:h.length,processed:o,errors:l,progress:Math.round((n+1)/h.length*100)}),await new Promise((e=>setTimeout(e,500)))}catch(u){console.error(`\u274c L\u1ed7i migration user ${e.email}:`,u),l++,c.push({userId:e.id,success:!1,error:u.message})}}const m=Date.now()-a,A={success:0===l,processed:o,errors:l,duration:Math.round(m/1e3),results:c,analysis:e};return n&&n(A),A}catch(u){throw console.error("\u274c L\u1ed7i migration to\xe0n b\u1ed9:",u),u}}async rollbackMigration(e){try{const t=(0,Hb.rJ)(Qb.db,"users",e,"starTransactions"),n=await(0,Hb.GG)(t),r=(0,Hb.wP)(Qb.db);return n.docs.forEach((e=>{r.delete(e.ref)})),await r.commit(),!0}catch(t){throw console.error(`\u274c L\u1ed7i rollback user ${e}:`,t),t}}async checkUserMigrationStatus(e){try{const t=(0,Hb.rJ)(Qb.db,"users",e,"starTransactions"),n=await(0,Hb.GG)(t),r=await(0,Hb.GG)((0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.AB)(1))),s=r.empty?0:Object.keys(r.docs[0].data().starTransactions||{}).length;return{userId:e,hasSubcollection:!n.empty,subcollectionCount:n.size,embeddedCount:s,isMigrated:n.size>0&&n.size>=.9*s,needsMigration:s>100&&n.size<.9*s}}catch(t){throw console.error(`\u274c L\u1ed7i ki\u1ec3m tra status user ${e}:`,t),t}}};function qD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const WD=t.forwardRef(qD),$D=()=>{const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(null),[m,A]=(0,t.useState)(100);(0,t.useEffect)((()=>{g()}),[]);const g=async()=>{try{u(!0),h(null);const e=await GD.analyzeMigrationStatus(m);n(e)}catch(d){console.error("\u274c Error loading analysis:",d),h(d.message)}finally{u(!1)}},p=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.confirm("\u26a0\ufe0f B\u1ea1n \u0111ang s\u1eafp th\u1ef1c hi\u1ec7n migration. \u0110i\u1ec1u n\xe0y c\xf3 th\u1ec3 g\xe2y lag v\xe0 \u1ea3nh h\u01b0\u1edfng \u0111\u1ebfn ng\u01b0\u1eddi d\xf9ng. Ti\u1ebfp t\u1ee5c?")){s(!0),l(null),a(null);try{await GD.performMigration({...e,onProgress:e=>{l(e)},onComplete:e=>{a(e),s(!1),g()}})}catch(d){console.error("\u274c Migration error:",d),h(d.message),s(!1)}}};return c?(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang ph\xe2n t\xedch t\xecnh tr\u1ea1ng migration..."})]})})}):(0,At.jsx)(WL,{children:(0,At.jsxs)("div",{className:"space-y-6 text-left",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\ude80 Star Transactions Migration"}),(0,At.jsx)("p",{className:"text-gray-600",children:"Chuy\u1ec3n \u0111\u1ed5i t\u1eeb embedded transactions sang subcollection"})]}),(0,At.jsxs)("button",{onClick:g,disabled:r,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[(0,At.jsx)(XC,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),d&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-red-400"}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"L\u1ed7i"}),(0,At.jsx)("div",{className:"mt-2 text-sm text-red-700",children:d})]})]})}),e&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udcca Ph\xe2n T\xedch T\xecnh Tr\u1ea1ng"}),(0,At.jsx)("div",{className:"flex items-center space-x-4",children:(0,At.jsxs)("label",{className:"text-sm text-gray-600",children:["Ng\u01b0\u1ee1ng migration:",(0,At.jsxs)("select",{value:m,onChange:e=>{A(Number(e.target.value)),setTimeout(g,100)},className:"ml-2 px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,At.jsx)("option",{value:50,children:"50+ transactions"}),(0,At.jsx)("option",{value:100,children:"100+ transactions"}),(0,At.jsx)("option",{value:200,children:"200+ transactions"}),(0,At.jsx)("option",{value:500,children:"500+ transactions"})]})]})})]})}),(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.totalUsers}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"T\u1ed5ng Users"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.usersWithTransactions}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"C\xf3 Transactions"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.maxTransactionsPerUser}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"Max Transactions/User"})]}),(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"text-2xl font-bold "+(e.usersNeedMigration>0?"text-red-600":"text-green-600"),children:e.usersNeedMigration}),(0,At.jsx)("div",{className:"text-sm text-gray-600",children:"C\u1ea7n Migration"})]})]}),(0,At.jsx)("div",{className:"mt-6 p-4 rounded-lg "+(e.usersNeedMigration>0?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"),children:(0,At.jsxs)("div",{className:"flex",children:[e.usersNeedMigration>0?(0,At.jsx)(jw,{className:"h-5 w-5 text-red-400"}):(0,At.jsx)(nM,{className:"h-5 w-5 text-green-400"}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-sm font-medium "+(e.usersNeedMigration>0?"text-red-800":"text-green-800"),children:e.usersNeedMigration>0?"\ud83d\udea8 Khuy\u1ebfn ngh\u1ecb Migration":"\u2705 Kh\xf4ng c\u1ea7n Migration"}),(0,At.jsx)("div",{className:"mt-2 text-sm "+(e.usersNeedMigration>0?"text-red-700":"text-green-700"),children:e.usersNeedMigration>0?`C\xf3 ${e.usersNeedMigration} users v\u1edbi >100 transactions c\u1ea7n \u0111\u01b0\u1ee3c migration \u0111\u1ec3 c\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t.`:"T\u1ea5t c\u1ea3 users \u0111\u1ec1u c\xf3 \xedt transactions. H\u1ec7 th\u1ed1ng ho\u1ea1t \u0111\u1ed9ng \u1ed5n \u0111\u1ecbnh."})]})]})})]})]}),e&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\ud83d\ude80 Th\u1ef1c Hi\u1ec7n Migration"})}),(0,At.jsxs)("div",{className:"p-6",children:[(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,At.jsxs)("button",{onClick:()=>{p({maxUsers:1})},disabled:r,className:"flex items-center justify-center px-4 py-3 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:[(0,At.jsx)(SI,{className:"h-5 w-5 mr-2"}),"\ud83e\uddea Test (1 User)"]}),(0,At.jsxs)("button",{onClick:()=>{p({dryRun:!0})},disabled:r,className:"flex items-center justify-center px-4 py-3 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 disabled:opacity-50",children:[(0,At.jsx)(OM,{className:"h-5 w-5 mr-2"}),"\ud83d\udd0d Dry Run"]}),(0,At.jsxs)("button",{onClick:()=>{p({})},disabled:r,className:"flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50",children:[(0,At.jsx)(WD,{className:"h-5 w-5 mr-2"}),"\ud83d\ude80 Full Migration"]})]}),(0,At.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Test:"})," Migration 1 user \u0111\u1ec3 ki\u1ec3m tra"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Dry Run:"})," Ph\xe2n t\xedch m\xe0 kh\xf4ng th\u1ef1c hi\u1ec7n migration"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Full Migration:"})," Migration t\u1ea5t c\u1ea3 users c\u1ea7n thi\u1ebft"]})]}),0===e.usersNeedMigration&&(0,At.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(sM,{className:"h-5 w-5 text-yellow-400"}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,At.jsx)("strong",{children:"L\u01b0u \xfd:"})," Hi\u1ec7n t\u1ea1i kh\xf4ng c\xf3 user n\xe0o c\u1ea7n migration (ng\u01b0\u1ee1ng: ",">=",m," transactions). B\u1ea1n v\u1eabn c\xf3 th\u1ec3 th\u1ef1c hi\u1ec7n migration \u0111\u1ec3 t\u1ed1i \u01b0u h\xf3a h\u1ec7 th\u1ed1ng."]})})]})})]})]}),r&&o&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udcca Ti\u1ebfn \u0110\u1ed9 Migration"})}),(0,At.jsx)("div",{className:"p-6",children:(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[(0,At.jsx)("span",{children:"Ti\u1ebfn \u0111\u1ed9 t\u1ed5ng th\u1ec3"}),(0,At.jsxs)("span",{children:[o.progress||0,"%"]})]}),(0,At.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${o.progress||0}%`}})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"User hi\u1ec7n t\u1ea1i:"}),(0,At.jsx)("div",{className:"font-medium",children:o.currentUser||0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"T\u1ed5ng users:"}),(0,At.jsx)("div",{className:"font-medium",children:o.totalUsers||0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"\u0110\xe3 x\u1eed l\xfd:"}),(0,At.jsx)("div",{className:"font-medium",children:o.processed||0})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"L\u1ed7i:"}),(0,At.jsx)("div",{className:"font-medium text-red-600",children:o.errors||0})]})]})]})})]}),i&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udccb K\u1ebft Qu\u1ea3 Migration"})}),(0,At.jsx)("div",{className:"p-6",children:(0,At.jsx)("div",{className:"p-4 rounded-lg "+(i.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,At.jsxs)("div",{className:"flex",children:[i.success?(0,At.jsx)(nM,{className:"h-5 w-5 text-green-400"}):(0,At.jsx)(jw,{className:"h-5 w-5 text-red-400"}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-sm font-medium "+(i.success?"text-green-800":"text-red-800"),children:i.success?"\u2705 Migration Th\xe0nh C\xf4ng":"\u274c Migration C\xf3 L\u1ed7i"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"\u0110\xe3 x\u1eed l\xfd:"})," ",i.processed," transactions"]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"L\u1ed7i:"})," ",i.errors]}),(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Th\u1eddi gian:"})," ",i.duration,"s"]}),i.message&&(0,At.jsxs)("p",{children:[(0,At.jsx)("strong",{children:"Th\xf4ng b\xe1o:"})," ",i.message]})]})]})]})})})]}),e&&e.topUsers.length>0&&(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udc65 Top Users (Nhi\u1ec1u Transactions Nh\u1ea5t)"})}),(0,At.jsx)("div",{className:"p-6",children:(0,At.jsx)("div",{className:"space-y-3",children:e.topUsers.slice(0,10).map(((e,t)=>(0,At.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsxs)("span",{className:"text-lg font-bold text-gray-500",children:["#",t+1]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",children:e.displayName}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"text-right",children:[(0,At.jsxs)("div",{className:"font-bold "+(e.transactionCount>200?"text-red-600":e.transactionCount>100?"text-yellow-600":e.transactionCount>50?"text-blue-600":"text-gray-600"),children:[e.transactionCount," transactions"]}),(0,At.jsxs)("div",{className:"text-sm text-gray-500",children:[e.stars," \u2b50"]})]}),(0,At.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`\u26a0\ufe0f B\u1ea1n c\xf3 mu\u1ed1n migration user "${t.displayName}" (${t.transactionCount} transactions)?`)){s(!0),l(null),a(null);try{await GD.performMigration({specificUsers:[e],onProgress:e=>{l(e)},onComplete:e=>{a(e),s(!1),g()}})}catch(d){console.error("\u274c Migration error:",d),h(d.message),s(!1)}}})(e.id,e),disabled:r,className:`px-3 py-1 text-xs font-medium rounded-md ${e.transactionCount>=m?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"} disabled:opacity-50`,children:e.transactionCount>=m?"\ud83d\ude80 Migrate":"\u26a1 Optimize"})]})]},e.id)))})})]}),(0,At.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:(0,At.jsxs)("div",{className:"flex",children:[(0,At.jsx)(sM,{className:"h-5 w-5 text-blue-400"}),(0,At.jsxs)("div",{className:"ml-3",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\u2139\ufe0f Th\xf4ng Tin Migration"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-blue-700 space-y-1",children:[(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"M\u1ee5c \u0111\xedch:"})," Chuy\u1ec3n star transactions t\u1eeb embedded object sang subcollection"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"L\u1ee3i \xedch:"})," C\u1ea3i thi\u1ec7n hi\u1ec7u su\u1ea5t, d\u1ec5 query, kh\xf4ng b\u1ecb gi\u1edbi h\u1ea1n document size"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Backward compatibility:"})," Gi\u1eef l\u1ea1i embedded transactions"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Batch processing:"})," X\u1eed l\xfd theo batch \u0111\u1ec3 tr\xe1nh timeout"]}),(0,At.jsxs)("p",{children:["\u2022 ",(0,At.jsx)("strong",{children:"Rollback:"})," C\xf3 th\u1ec3 rollback n\u1ebfu c\u1ea7n thi\u1ebft"]})]})]})]})})]})})},XD=()=>{const[e,n]=(0,t.useState)({identifier:"",password:""}),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(""),o=ee(),{currentUser:l,membershipTier:c,findUserByDisplayName:u,findUserByUsername:d}=Aw();(0,t.useEffect)((()=>{l&&"master"===c?o("/master/articles"):l&&"master"!==c&&o("/")}),[l,c,o]);const h=e=>{n((t=>({...t,[e.target.name]:e.target.value})))};return(0,At.jsx)("div",{className:"min-h-screen flex items-center justify-center pb-12 -mt-[80px] px-4 sm:px-6 lg:px-8 text-left relative z-50",children:(0,At.jsxs)("div",{className:"max-w-md w-full space-y-8 px-4",children:[(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:(0,At.jsx)(jT,{className:"h-6 w-6 text-blue-600"})}),(0,At.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-white",children:"\u0110\u0103ng nh\u1eadp admin"}),(0,At.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"\u0110\u0103ng nh\u1eadp \u0111\u1ec3 qu\u1ea3n l\xfd b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n"}),(0,At.jsx)("div",{className:"mt-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"\ud83d\udc51 Ch\u1ec9 d\xe0nh cho th\xe0nh vi\xean Master"})]}),(0,At.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{t.preventDefault(),s(!0),a("");try{const t=await(async e=>{try{if((e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(e))return e;let t=await u(e);return t&&t.email?t.email:(t=await d(e),t&&t.email?t.email:null)}catch(i){return console.error("Error finding email from identifier:",i),null}})(e.identifier);if(!t)return a("Kh\xf4ng t\xecm th\u1ea5y t\xe0i kho\u1ea3n v\u1edbi t\xean ho\u1eb7c email n\xe0y."),void s(!1);const n=(await(0,nw.signInWithEmailAndPassword)(Qb.auth,t,e.password)).user,r=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"users",n.uid));if(r.exists()){"master"===r.data().membershipTier?(localStorage.setItem("masterMemberAuth","true"),localStorage.setItem("masterMemberEmail",n.email),o("/master/articles")):(await Qb.auth.signOut(),a("T\xe0i kho\u1ea3n n\xe0y kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp Master. Ch\u1ec9 th\xe0nh vi\xean Master m\u1edbi c\xf3 th\u1ec3 \u0111\u0103ng nh\u1eadp t\u1ea1i \u0111\xe2y."))}else await Qb.auth.signOut(),a("Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin t\xe0i kho\u1ea3n.")}catch(n){console.error("Master login error:",n),"auth/user-not-found"===n.code?a("T\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i trong h\u1ec7 th\u1ed1ng"):"auth/wrong-password"===n.code?a("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\xfang"):"auth/invalid-email"===n.code?a("Email kh\xf4ng h\u1ee3p l\u1ec7"):"auth/too-many-requests"===n.code?a("Qu\xe1 nhi\u1ec1u l\u1ea7n th\u1eed \u0111\u0103ng nh\u1eadp. Vui l\xf2ng th\u1eed l\u1ea1i sau."):a("\u0110\xe3 x\u1ea3y ra l\u1ed7i khi \u0111\u0103ng nh\u1eadp: "+(n.message||"L\u1ed7i kh\xf4ng x\xe1c \u0111\u1ecbnh"))}finally{s(!1)}},children:[i&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),(0,At.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"identifier",className:"sr-only",children:"T\xean ho\u1eb7c Email"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:(0,At.jsx)(Ck,{className:"h-4 w-4 text-gray-600"})}),(0,At.jsx)("input",{id:"identifier",name:"identifier",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nh\u1eadp t\xean hi\u1ec3n th\u1ecb, username ho\u1eb7c email",value:e.identifier,onChange:h})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"password",className:"sr-only",children:"M\u1eadt kh\u1ea9u"}),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-20",children:(0,At.jsx)(Sk,{className:"h-4 w-4 text-gray-600"})}),(0,At.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u",value:e.password,onChange:h})]})]})]}),(0,At.jsx)("div",{children:(0,At.jsx)("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white button-style disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"\u0110ang \u0111\u0103ng nh\u1eadp..."]}):"\u0110\u0103ng nh\u1eadp"})}),(0,At.jsx)("div",{className:"text-center",children:(0,At.jsx)("button",{type:"button",onClick:()=>o("/login"),className:"text-blue-600 hover:text-blue-500 text-sm underline",children:"Quay l\u1ea1i \u0111\u0103ng nh\u1eadp th\u01b0\u1eddng"})})]}),(0,At.jsxs)("div",{className:"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-4 hidden",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"\ud83c\udfaf Quy\u1ec1n l\u1ee3i Master Member:"}),(0,At.jsxs)("ul",{className:"text-xs text-gray-600 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 T\u1ea1o v\xe0 qu\u1ea3n l\xfd b\xe0i vi\u1ebft c\xe1 nh\xe2n"}),(0,At.jsx)("li",{children:"\u2022 G\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t"}),(0,At.jsx)("li",{children:"\u2022 X\xf3a b\xe0i vi\u1ebft c\u1ee7a ch\xednh m\xecnh"}),(0,At.jsx)("li",{children:"\u2022 Truy c\u1eadp t\u1ea5t c\u1ea3 t\xednh n\u0103ng \u0111\u1eb7c bi\u1ec7t"}),(0,At.jsx)("li",{children:"\u2022 200 sao m\u1ed7i ng\xe0y (reset t\u1ef1 \u0111\u1ed9ng)"})]})]})]})})},YD=e=>{let{onRetry:t}=e;return(0,At.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6",children:(0,At.jsxs)("div",{className:"flex items-start",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)(Iy,{className:"h-6 w-6 text-yellow-600"})}),(0,At.jsxs)("div",{className:"ml-3 flex-1",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"H\u1ec7 th\u1ed1ng \u0111ang c\u1eadp nh\u1eadt"}),(0,At.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,At.jsx)("p",{className:"mb-2",children:"Firebase \u0111ang x\xe2y d\u1ef1ng indexes \u0111\u1ec3 t\u1ed1i \u01b0u hi\u1ec7u su\u1ea5t. Qu\xe1 tr\xecnh n\xe0y c\xf3 th\u1ec3 m\u1ea5t 2-5 ph\xfat."}),(0,At.jsxs)("div",{className:"mb-3",children:[(0,At.jsx)("p",{className:"font-medium mb-1",children:"Trong th\u1eddi gian n\xe0y:"}),(0,At.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,At.jsx)("li",{children:"B\u1ea1n v\u1eabn c\xf3 th\u1ec3 t\u1ea1o b\xe0i vi\u1ebft m\u1edbi"}),(0,At.jsx)("li",{children:"Danh s\xe1ch b\xe0i vi\u1ebft c\xf3 th\u1ec3 t\u1ea3i ch\u1eadm h\u01a1n"}),(0,At.jsx)("li",{children:"H\u1ec7 th\u1ed1ng s\u1ebd t\u1ef1 \u0111\u1ed9ng s\u1eed d\u1ee5ng ph\u01b0\u01a1ng ph\xe1p d\u1ef1 ph\xf2ng"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsx)("button",{onClick:t,className:"inline-flex items-center px-3 py-1.5 border border-yellow-300 text-xs font-medium rounded text-yellow-800 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-500",children:"Th\u1eed l\u1ea1i"}),(0,At.jsx)("a",{href:"https://console.firebase.google.com/project/thiendianhan-app/firestore/indexes",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-yellow-600 hover:text-yellow-500 underline",children:"Xem ti\u1ebfn tr\xecnh x\xe2y d\u1ef1ng index"})]})]})]})]})})};function JD(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const ZD=t.forwardRef(JD),eP=()=>{var e;const n=ee(),{currentUser:r,logout:s}=Aw(),{showToast:i}=uM(),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!0),[h,m]=(0,t.useState)(""),[A,g]=(0,t.useState)("all"),[p,f]=(0,t.useState)(null),[x,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1);(0,t.useEffect)((()=>{j(),C()}),[r]);const j=async()=>{if(r)try{d(!0);try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("authorId","==",r.uid),(0,Hb.My)("createdAt","desc")),t=(await(0,Hb.GG)(e)).docs.map((e=>{var t,n;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate()}}));o(t)}catch(e){e.message.includes("requires an index")&&v(!0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articles"),(0,Hb._M)("authorId","==",r.uid)),n=await(0,Hb.GG)(t),s=n.docs.map((e=>{var t,n;return{id:e.id,...e.data(),createdAt:null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate(),updatedAt:null===(n=e.data().updatedAt)||void 0===n?void 0:n.toDate()}})).sort(((e,t)=>{const n=e.createdAt||new Date(0);return(t.createdAt||new Date(0))-n}));o(s),i("\u0110ang t\u1ea3i d\u1eef li\u1ec7u... (Index \u0111ang \u0111\u01b0\u1ee3c x\xe2y d\u1ef1ng)","info")}}catch(t){console.error("Error loading articles:",t),i("L\u1ed7i khi t\u1ea3i danh s\xe1ch b\xe0i vi\u1ebft","error")}finally{d(!1)}},C=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories")),t=(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})));c(t)}catch(e){console.error("Error loading categories:",e)}},T=async e=>{await(async(e,t)=>{try{await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",e),{status:t,updatedAt:new Date}),o(a.map((n=>n.id===e?{...n,status:t,updatedAt:new Date}:n))),i("\u0110\xe3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i b\xe0i vi\u1ebft","success")}catch(n){console.error("Error updating status:",n),i("L\u1ed7i khi c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i","error")}})(e,"pending"),i("\u0110\xe3 g\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t","info")},S=()=>{N(!1),b(null)},_=e=>{const t={draft:{label:"B\u1ea3n nh\xe1p",color:"bg-gray-100 text-gray-800"},pending:{label:"Ch\u1edd duy\u1ec7t",color:"bg-yellow-100 text-yellow-800"},published:{label:"\u0110\xe3 xu\u1ea5t b\u1ea3n",color:"bg-green-100 text-green-800"},rejected:{label:"B\u1ecb t\u1eeb ch\u1ed1i",color:"bg-red-100 text-red-800"}},n=t[e]||t.draft;return(0,At.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${n.color}`,children:n.label})},E=a.filter((e=>{var t,n;const r=!h||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(h.toLowerCase())),s="all"===A||e.status===A;return r&&s}));return u?(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n..."})]})}):(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 text-left relative z-50 pb-12 -mt-[40px]",children:[(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:(0,At.jsx)(Tw,{className:"h-6 w-6 text-blue-600"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Qu\u1ea3n l\xfd b\xe0i vi\u1ebft Master"}),(0,At.jsx)("p",{className:"text-gray-600",children:"T\u1ea1o v\xe0 qu\u1ea3n l\xfd b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n"})]})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)(nt,{to:"/master/articles/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,At.jsx)(CI,{className:"w-4 h-4 mr-2"}),"T\u1ea1o b\xe0i vi\u1ebft m\u1edbi"]}),(0,At.jsxs)("button",{onClick:async()=>{try{localStorage.removeItem("masterMemberAuth"),localStorage.removeItem("masterMemberEmail"),await s(),n("/master/login")}catch(e){console.error("Logout error:",e)}},className:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(ZD,{className:"w-4 h-4 mr-2"}),"\u0110\u0103ng xu\u1ea5t"]})]})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,At.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4",children:[(0,At.jsx)("div",{className:"flex-1",children:(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)(kI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,At.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm b\xe0i vi\u1ebft...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h,onChange:e=>m(e.target.value)})]})}),(0,At.jsx)("div",{className:"flex space-x-2",children:(0,At.jsxs)("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:A,onChange:e=>g(e.target.value),children:[(0,At.jsx)("option",{value:"all",children:"T\u1ea5t c\u1ea3 tr\u1ea1ng th\xe1i"}),(0,At.jsx)("option",{value:"draft",children:"B\u1ea3n nh\xe1p"}),(0,At.jsx)("option",{value:"pending",children:"Ch\u1edd duy\u1ec7t"}),(0,At.jsx)("option",{value:"published",children:"\u0110\xe3 xu\u1ea5t b\u1ea3n"}),(0,At.jsx)("option",{value:"rejected",children:"B\u1ecb t\u1eeb ch\u1ed1i"})]})})]})}),x&&(0,At.jsx)(YD,{onRetry:()=>{v(!1),j()}}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,At.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,At.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["B\xe0i vi\u1ebft c\u1ee7a b\u1ea1n (",E.length,")"]})}),0===E.length?(0,At.jsxs)("div",{className:"p-12 text-center",children:[(0,At.jsx)("div",{className:"mx-auto h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,At.jsx)(hI,{className:"h-6 w-6 text-gray-400"})}),(0,At.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ch\u01b0a c\xf3 b\xe0i vi\u1ebft n\xe0o"}),(0,At.jsx)("p",{className:"text-gray-600 mb-4",children:h||"all"!==A?"Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft ph\xf9 h\u1ee3p v\u1edbi b\u1ed9 l\u1ecdc.":"H\xe3y t\u1ea1o b\xe0i vi\u1ebft \u0111\u1ea7u ti\xean c\u1ee7a b\u1ea1n."}),!h&&"all"===A&&(0,At.jsxs)(nt,{to:"/master/articles/create",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,At.jsx)(CI,{className:"w-4 h-4 mr-2"}),"T\u1ea1o b\xe0i vi\u1ebft m\u1edbi"]})]}):(0,At.jsx)("div",{className:"divide-y divide-gray-200",children:E.map((e=>{var t;return(0,At.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,At.jsxs)("div",{className:"flex items-start justify-between",children:[(0,At.jsx)("div",{className:"flex-1 min-w-0",children:(0,At.jsxs)("div",{className:"flex items-start space-x-4",children:[Qk(e,l)&&(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("img",{src:Qk(e,l),alt:"",className:"w-16 h-16 object-cover rounded-lg",onError:e=>{e.target.style.display="none"}})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title||"Kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"}),_(e.status)]}),e.description&&(0,At.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,At.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)(nT,{className:"h-4 w-4 mr-1"}),e.createdAt?e.createdAt.toLocaleDateString("vi-VN"):"N/A"]}),e.updatedAt&&e.updatedAt.getTime()!==(null===(t=e.createdAt)||void 0===t?void 0:t.getTime())&&(0,At.jsxs)("span",{className:"flex items-center",children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-1"}),"C\u1eadp nh\u1eadt: ",e.updatedAt.toLocaleDateString("vi-VN")]})]})]})]})}),(0,At.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,At.jsx)("button",{onClick:()=>(e=>{b(e),N(!0)})(e),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Xem tr\u01b0\u1edbc",children:(0,At.jsx)(LM,{className:"h-4 w-4"})}),(0,At.jsx)(nt,{to:`/master/articles/${e.id}/edit`,className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors",title:"Ch\u1ec9nh s\u1eeda",children:(0,At.jsx)(II,{className:"h-4 w-4"})}),"draft"===e.status&&(0,At.jsx)("button",{onClick:()=>T(e.id),className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors",title:"G\u1eedi duy\u1ec7t",children:(0,At.jsx)(tk,{className:"h-4 w-4"})}),(0,At.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a b\xe0i vi\u1ebft "${t}"?`))try{f(e),await(0,Hb.kd)((0,Hb.doc)(Qb.db,"articles",e)),o(a.filter((t=>t.id!==e))),i("\u0110\xe3 x\xf3a b\xe0i vi\u1ebft th\xe0nh c\xf4ng","success")}catch(n){console.error("Error deleting article:",n),i("L\u1ed7i khi x\xf3a b\xe0i vi\u1ebft","error")}finally{f(null)}})(e.id,e.title),disabled:p===e.id,className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"X\xf3a",children:p===e.id?(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):(0,At.jsx)(PL,{className:"h-4 w-4"})})]})]})},e.id)}))})]}),(0,At.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,At.jsxs)("h3",{className:"text-sm font-medium text-blue-900 mb-3 flex items-center",children:[(0,At.jsx)(Tw,{className:"h-4 w-4 mr-2"}),"Quy\u1ec1n l\u1ee3i Master Member"]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2 text-blue-600"}),"T\u1ea1o b\xe0i vi\u1ebft kh\xf4ng gi\u1edbi h\u1ea1n"]}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2 text-blue-600"}),"G\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t"]})]}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2 text-blue-600"}),"Qu\u1ea3n l\xfd b\xe0i vi\u1ebft c\xe1 nh\xe2n"]}),(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(tk,{className:"h-4 w-4 mr-2 text-blue-600"}),"200 sao m\u1ed7i ng\xe0y (reset t\u1ef1 \u0111\u1ed9ng)"]})]})]})]})]}),w&&y&&(0,At.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[100vh] overflow-hidden",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),_(y.status)]}),(0,At.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,At.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,At.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,At.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"Ng\xe0y t\u1ea1o: "}),(0,At.jsx)("span",{className:"font-medium",children:y.createdAt?y.createdAt.toLocaleString("vi-VN"):"N/A"})]}),y.updatedAt&&y.updatedAt.getTime()!==(null===(e=y.createdAt)||void 0===e?void 0:e.getTime())&&(0,At.jsxs)("div",{children:[(0,At.jsx)("span",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt: "}),(0,At.jsx)("span",{className:"font-medium",children:y.updatedAt.toLocaleString("vi-VN")})]})]})}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:y.title||"Kh\xf4ng c\xf3 ti\xeau \u0111\u1ec1"}),Qk(y,l)&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("img",{src:Qk(y,l),alt:"Article thumbnail",className:"w-full max-w-2xl h-auto rounded-lg shadow-md",onError:e=>{e.target.style.display="none"}})}),y.description&&(0,At.jsx)("p",{className:"text-lg text-gray-600 mb-6 leading-relaxed",children:y.description}),y.tags&&y.tags.length>0&&(0,At.jsx)("div",{className:"mb-6",children:(0,At.jsx)("div",{className:"flex flex-wrap gap-2",children:y.tags.map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["#",e]},t)))})}),y.content&&(0,At.jsx)("div",{className:"prose prose-lg max-w-none",children:(0,At.jsx)("div",{dangerouslySetInnerHTML:{__html:y.content},className:"article-content"})}),!y.content&&(0,At.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,At.jsx)("p",{children:"Ch\u01b0a c\xf3 n\u1ed9i dung b\xe0i vi\u1ebft"})})]}),(0,At.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,At.jsx)("div",{className:"text-sm text-gray-600",children:y.authorEmail&&(0,At.jsxs)("span",{children:["T\xe1c gi\u1ea3: ",y.authorEmail]})}),(0,At.jsxs)("div",{className:"flex space-x-3",children:[(0,At.jsxs)(nt,{to:`/master/articles/${y.id}/edit`,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(II,{className:"h-4 w-4 mr-2"}),"Ch\u1ec9nh s\u1eeda"]}),(0,At.jsx)("button",{onClick:S,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"\u0110\xf3ng"})]})]})]})}),(0,At.jsx)("style",{children:"\n        .article-content h1 {\n          font-size: 2em;\n          font-weight: bold;\n          margin: 0.67em 0;\n        }\n        \n        .article-content h2 {\n          font-size: 1.5em;\n          font-weight: bold;\n          margin: 0.75em 0;\n        }\n        \n        .article-content h3 {\n          font-size: 1.25em;\n          font-weight: bold;\n          margin: 0.83em 0;\n        }\n        \n        .article-content h4 {\n          font-size: 1.125em;\n          font-weight: bold;\n          margin: 0.83em 0;\n        }\n        \n        .article-content p {\n          margin: 1em 0;\n          line-height: 1.6;\n        }\n        \n        .article-content ul,\n        .article-content ol {\n          margin: 1em 0;\n          padding-left: 2em;\n          list-style-type: disc;\n        }\n        \n        .article-content li {\n          margin: 0.5em 0;\n        }\n        \n        .article-content a {\n          color: #3b82f6;\n          text-decoration: underline;\n        }\n        \n        .article-content a:hover {\n          color: #2563eb;\n        }\n        \n        .article-content img {\n          max-width: 100%;\n          height: auto;\n          border-radius: 8px;\n          margin: 16px 0;\n        }\n        \n        .article-content blockquote {\n          border-left: 4px solid #e5e7eb;\n          padding-left: 1em;\n          margin: 1em 0;\n          font-style: italic;\n          color: #6b7280;\n        }\n        \n        .article-content pre {\n          background-color: #f3f4f6;\n          padding: 16px;\n          border-radius: 8px;\n          overflow-x: auto;\n          margin: 16px 0;\n          font-family: monospace;\n        }\n        \n        .article-content code {\n          background-color: #f3f4f6;\n          padding: 2px 4px;\n          border-radius: 4px;\n          font-family: monospace;\n        }\n        .article-content b, .article-content strong {\n          color: #cccccc;\n        }\n      "})]})},tP=()=>{const e=ee(),{currentUser:n}=Aw(),{showToast:r}=uM(),[s,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)([]),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)({title:"",description:"",content:"",categoryId:"",tags:"",thumbnail:"",slug:"",requireStars:!1,starCost:1}),[h,m]=(0,t.useState)(""),[A,g]=(0,t.useState)("");(0,t.useEffect)((()=>{p()}),[]);const p=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"),(0,Hb.My)("name")),t=(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})));o(t)}catch(h){console.error("Error loading categories:",h),r("L\u1ed7i khi t\u1ea3i danh m\u1ee5c","error")}},f=e=>{const{name:t,value:n}=e.target;d((e=>({...e,[t]:n,..."title"===t&&{slug:Vk(n)}})))},x=()=>{if(u.thumbnail)return u.thumbnail;if(u.categoryId){const e=a.find((e=>e.id===u.categoryId));return(null===e||void 0===e?void 0:e.thumbnail)||""}return""},v=async()=>{i(!0),m(""),g("");try{var t;if(!n)return void m("B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 g\u1eedi b\xe0i vi\u1ebft");if(!u.title.trim())return void m("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft");if(!u.content.trim())return void m("Vui l\xf2ng nh\u1eadp n\u1ed9i dung b\xe0i vi\u1ebft");const r={title:u.title.trim(),description:u.description.trim(),content:u.content,categoryId:u.categoryId,tags:u.tags.split(",").map((e=>e.trim())).filter((e=>e)),thumbnail:x(),slug:u.slug||Vk(u.title),authorId:n.uid,authorEmail:n.email,authorDisplayName:n.displayName||(null===(t=n.email)||void 0===t?void 0:t.split("@")[0]),authorType:"master",status:"pending",requireStars:u.requireStars,starCost:u.requireStars?parseInt(u.starCost)||1:0,createdAt:new Date,updatedAt:new Date};await(0,Hb.gS)((0,Hb.rJ)(Qb.db,"articles"),r),g("\u0110\xe3 g\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t th\xe0nh c\xf4ng!"),setTimeout((()=>{e("/master/articles")}),2e3)}catch(r){console.error("Error submitting article:",r),m("L\u1ed7i khi g\u1eedi b\xe0i vi\u1ebft: "+r.message)}finally{i(!1)}};return l?(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 text-left relative z-50",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsx)(nt,{to:"/master/articles",className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,At.jsx)(mt,{className:"h-5 w-5"})}),(0,At.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"\ud83d\udc41\ufe0f Ch\u1ebf \u0111\u1ed9 xem tr\u01b0\u1edbc"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),(0,At.jsxs)("div",{className:"prose max-w-none",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:u.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),u.description&&(0,At.jsx)("p",{className:"text-gray-600 italic mb-4",children:u.description}),(u.thumbnail||x())&&(0,At.jsx)("img",{src:u.thumbnail||x(),alt:"Thumbnail",className:"w-full max-w-md mx-auto rounded-lg mb-4"}),(0,At.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:u.content||"<p>N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y...</p>"}})]})]})]})}):(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 text-left relative z-50 pb-12 -mt-[40px]",children:[(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(nt,{to:"/master/articles",className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,At.jsx)(mt,{className:"h-5 w-5"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"T\u1ea1o b\xe0i vi\u1ebft m\u1edbi"}),(0,At.jsx)("p",{className:"text-gray-600",children:"T\u1ea1o b\xe0i vi\u1ebft Master \u0111\u1ec3 chia s\u1ebb ki\u1ebfn th\u1ee9c"})]})]}),(0,At.jsx)("div",{className:"flex items-center space-x-3",children:(0,At.jsxs)("button",{onClick:()=>c(!0),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem tr\u01b0\u1edbc"]})})]}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,At.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await v()},className:"space-y-6",children:[h&&(0,At.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:h}),A&&(0,At.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:A}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft *"}),(0,At.jsx)("input",{type:"text",id:"title",name:"title",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft...",value:u.title,onChange:f})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3 ng\u1eafn"}),(0,At.jsx)("textarea",{id:"description",name:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"M\xf4 t\u1ea3 ng\u1eafn g\u1ecdn v\u1ec1 n\u1ed9i dung b\xe0i vi\u1ebft...",value:u.description,onChange:f})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh m\u1ee5c"}),(0,At.jsxs)("select",{id:"categoryId",name:"categoryId",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:u.categoryId,onChange:f,children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn danh m\u1ee5c"}),a.map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (ph\xe2n c\xe1ch b\u1eb1ng d\u1ea5u ph\u1ea9y)"}),(0,At.jsx)("input",{type:"text",id:"tags",name:"tags",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"phong th\u1ee7y, t\u1eed vi, thi\xean v\u0103n...",value:u.tags,onChange:f})]}),(0,At.jsx)("div",{children:(0,At.jsx)(cD,{value:u.thumbnail,onChange:e=>d((t=>({...t,thumbnail:e}))),label:"\u1ea2nh \u0111\u1ea1i di\u1ec7n",defaultThumbnail:x(),showDefaultThumbnail:!u.thumbnail&&!!u.categoryId})}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"requireStars",checked:u.requireStars,onChange:f,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Y\xeau c\u1ea7u ng\u01b0\u1eddi d\xf9ng c\u1ea7n sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Khi b\xe0i vi\u1ebft y\xeau c\u1ea7u sao, ng\u01b0\u1eddi d\xf9ng s\u1ebd ph\u1ea3i tr\u1ea3 m\u1ed9t s\u1ed1 sao \u0111\u1ec3 \u0111\u1ecdc."})]}),u.requireStars&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 sao c\u1ea7n \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"}),(0,At.jsx)("input",{type:"number",name:"starCost",value:u.starCost,onChange:f,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: 10 sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\u1ed9i dung b\xe0i vi\u1ebft *"}),(0,At.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:(0,At.jsx)(BD,{value:u.content,onChange:e=>d((t=>({...t,content:e}))),placeholder:"Vi\u1ebft n\u1ed9i dung b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n..."})})]})]})}),l&&(0,At.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),(0,At.jsxs)("div",{className:"prose max-w-none",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:u.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),u.description&&(0,At.jsx)("p",{className:"text-gray-600 italic mb-4",children:u.description}),(u.thumbnail||x())&&(0,At.jsx)("img",{src:u.thumbnail||x(),alt:"Thumbnail",className:"w-full max-w-md mx-auto rounded-lg mb-4"}),(0,At.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:u.content||"<p>N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y...</p>"}})]})]}),(0,At.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-3",children:"\ud83d\udca1 M\u1eb9o vi\u1ebft b\xe0i hi\u1ec7u qu\u1ea3"}),(0,At.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,At.jsx)("li",{children:"\u2022 S\u1eed d\u1ee5ng ti\xeau \u0111\u1ec1 thu h\xfat v\xe0 m\xf4 t\u1ea3 r\xf5 r\xe0ng"}),(0,At.jsx)("li",{children:"\u2022 Th\xeam \u1ea3nh \u0111\u1ea1i di\u1ec7n ch\u1ea5t l\u01b0\u1ee3ng cao"}),(0,At.jsx)("li",{children:"\u2022 Ph\xe2n chia n\u1ed9i dung th\xe0nh c\xe1c \u0111o\u1ea1n ng\u1eafn"}),(0,At.jsx)("li",{children:"\u2022 S\u1eed d\u1ee5ng tags ph\xf9 h\u1ee3p \u0111\u1ec3 d\u1ec5 t\xecm ki\u1ebfm"}),(0,At.jsx)("li",{children:"\u2022 Ki\u1ec3m tra l\u1ea1i n\u1ed9i dung tr\u01b0\u1edbc khi g\u1eedi duy\u1ec7t"})]})]})]}),(0,At.jsx)(uI,{className:"!left-[0px] !right-[0px] !w-[100%]",onCancel:()=>e("/master/articles"),onSaveDraft:async()=>{i(!0),m(""),g("");try{var t;if(!n)return void m("B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 l\u01b0u b\xe0i vi\u1ebft");if(!u.title.trim())return void m("Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft");const r={title:u.title.trim(),description:u.description.trim(),content:u.content,categoryId:u.categoryId,tags:u.tags.split(",").map((e=>e.trim())).filter((e=>e)),thumbnail:x(),slug:u.slug||Vk(u.title),authorId:n.uid,authorEmail:n.email,authorDisplayName:n.displayName||(null===(t=n.email)||void 0===t?void 0:t.split("@")[0]),authorType:"master",status:"draft",requireStars:u.requireStars,starCost:u.requireStars?parseInt(u.starCost)||1:0,createdAt:new Date,updatedAt:new Date};await(0,Hb.gS)((0,Hb.rJ)(Qb.db,"articles"),r),g("\u0110\xe3 l\u01b0u b\xe0i vi\u1ebft d\u01b0\u1edbi d\u1ea1ng nh\xe1p th\xe0nh c\xf4ng!"),setTimeout((()=>{e("/master/articles")}),2e3)}catch(r){console.error("Error saving draft:",r),m("L\u1ed7i khi l\u01b0u b\xe0i vi\u1ebft: "+r.message)}finally{i(!1)}},onSubmit:v,loading:s,disabled:!u.title.trim(),showSubmit:!0,cancelText:"H\u1ee7y",saveText:"L\u01b0u nh\xe1p",submitText:"G\u1eedi duy\u1ec7t"})]})},nP=()=>{var e;const n=ee(),{id:r}=te(),{currentUser:s}=Aw(),{showToast:i}=uM(),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!0),[A,g]=(0,t.useState)({title:"",description:"",content:"",categoryId:"",tags:"",thumbnail:"",slug:"",status:"draft",requireStars:!1,starCost:1});(0,t.useEffect)((()=>{p()}),[r]);const p=async()=>{try{m(!0);const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"articleCategories"),(0,Hb.My)("name")),t=(await(0,Hb.GG)(e)).docs.map((e=>({id:e.id,...e.data()})));c(t);const a=await(0,Hb.getDoc)((0,Hb.doc)(Qb.db,"articles",r));if(a.exists()){const e=a.data();if(e.authorId!==s.uid)return i("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft n\xe0y","error"),void n("/master/articles");g({title:e.title||"",description:e.description||"",content:e.content||"",categoryId:e.categoryId||"",tags:Array.isArray(e.tags)?e.tags.join(", "):"",thumbnail:e.thumbnail||e.thumbnailUrl||"",slug:e.slug||"",status:e.status||"draft",requireStars:e.requireStars||!1,starCost:e.starCost||1})}else i("B\xe0i vi\u1ebft kh\xf4ng t\u1ed3n t\u1ea1i","error"),n("/master/articles")}catch(e){console.error("Error loading data:",e),i("C\xf3 l\u1ed7i x\u1ea3y ra khi t\u1ea3i d\u1eef li\u1ec7u","error")}finally{m(!1)}},f=e=>{const{name:t,value:n}=e.target;g((e=>({...e,[t]:n,..."title"===t&&{slug:Vk(n)}})))},x=()=>{if(A.thumbnail)return A.thumbnail;if(A.categoryId){const e=l.find((e=>e.id===A.categoryId));return(null===e||void 0===e?void 0:e.thumbnail)||""}return""},v=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.preventDefault(),o(!0);try{var a;const e={...A,status:t||A.status,tags:A.tags.split(",").map((e=>e.trim())).filter((e=>e)),slug:A.slug||Vk(A.title),thumbnail:x(),authorId:s.uid,authorEmail:s.email,authorDisplayName:s.displayName||(null===(a=s.email)||void 0===a?void 0:a.split("@")[0]),authorType:"master",requireStars:A.requireStars,starCost:A.requireStars?parseInt(A.starCost)||1:0,updatedAt:new Date};await(0,Hb.mZ)((0,Hb.doc)(Qb.db,"articles",r),e);i("pending"===t?"\u0110\xe3 c\u1eadp nh\u1eadt v\xe0 g\u1eedi b\xe0i vi\u1ebft \u0111\u1ec3 admin duy\u1ec7t":"\u0110\xe3 c\u1eadp nh\u1eadt b\xe0i vi\u1ebft th\xe0nh c\xf4ng","success"),n("/master/articles")}catch(l){console.error("Error updating article:",l),i("C\xf3 l\u1ed7i x\u1ea3y ra khi c\u1eadp nh\u1eadt b\xe0i vi\u1ebft","error")}finally{o(!1)}};return a?(0,At.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,At.jsxs)("div",{className:"text-center",children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,At.jsx)("p",{className:"text-gray-600",children:"\u0110ang t\u1ea3i b\xe0i vi\u1ebft..."})]})}):u?(0,At.jsx)("div",{className:"min-h-screen text-left relative z-50 pb-12 -mt-[40px]",children:(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,At.jsxs)("button",{onClick:()=>d(!1),className:"inline-flex items-center px-4 py-2 border border-yellow-600 text-yellow-200 text-sm font-medium rounded-lg hover:bg-yellow-800/50 transition-colors",children:[(0,At.jsx)(mt,{className:"h-4 w-4 mr-2"}),"Quay l\u1ea1i ch\u1ec9nh s\u1eeda"]}),(0,At.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"\ud83d\udc41\ufe0f Ch\u1ebf \u0111\u1ed9 xem tr\u01b0\u1edbc"})]}),(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-4xl mx-auto",children:[(A.thumbnail||x())&&(0,At.jsxs)("div",{className:"mb-6",children:[(0,At.jsx)("img",{src:A.thumbnail||x(),alt:"Article thumbnail",className:"w-full max-w-2xl h-auto rounded-lg shadow-md mx-auto",onError:e=>{e.target.style.display="none"}}),!A.thumbnail&&x()&&(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-2 italic text-center",children:"\ud83d\udca1 \u0110ang s\u1eed d\u1ee5ng \u1ea3nh m\u1eb7c \u0111\u1ecbnh c\u1ee7a danh m\u1ee5c"})]}),(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:A.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:A.description||"M\xf4 t\u1ea3 b\xe0i vi\u1ebft"}),A.tags&&(0,At.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:A.tags.split(",").map(((e,t)=>(0,At.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:["#",e.trim()]},t)))}),(0,At.jsx)("div",{className:"prose max-w-none",children:(0,At.jsx)("div",{dangerouslySetInnerHTML:{__html:A.content||"N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y..."}})})]})]})}):(0,At.jsxs)("div",{className:"min-h-screen bg-gray-50 text-left relative z-50",children:[(0,At.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)(nt,{to:"/master/articles",className:"mr-4 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:(0,At.jsx)(mt,{className:"h-5 w-5"})}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Ch\u1ec9nh s\u1eeda b\xe0i vi\u1ebft"}),(0,At.jsx)("p",{className:"text-gray-600",children:"C\u1eadp nh\u1eadt n\u1ed9i dung b\xe0i vi\u1ebft Master"})]})]}),(0,At.jsx)("div",{className:"flex items-center space-x-3",children:(0,At.jsxs)("button",{onClick:()=>d(!0),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,At.jsx)(LM,{className:"h-4 w-4 mr-2"}),"Xem tr\u01b0\u1edbc"]})})]}),"draft"!==A.status&&(0,At.jsx)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:"published"===A.status?(0,At.jsx)(tk,{className:"h-5 w-5 text-green-600"}):"pending"===A.status?(0,At.jsx)(Iy,{className:"h-5 w-5 text-yellow-600"}):(0,At.jsx)(ky,{className:"h-5 w-5 text-red-600"})}),(0,At.jsx)("div",{className:"ml-3",children:(0,At.jsxs)("p",{className:"text-sm text-blue-800",children:["published"===A.status&&"B\xe0i vi\u1ebft \u0111\xe3 \u0111\u01b0\u1ee3c xu\u1ea5t b\u1ea3n. Thay \u0111\u1ed5i s\u1ebd c\u1ea7n \u0111\u01b0\u1ee3c admin duy\u1ec7t l\u1ea1i.","pending"===A.status&&"B\xe0i vi\u1ebft \u0111ang ch\u1edd admin duy\u1ec7t. B\u1ea1n v\u1eabn c\xf3 th\u1ec3 ch\u1ec9nh s\u1eeda.","rejected"===A.status&&"B\xe0i vi\u1ebft b\u1ecb t\u1eeb ch\u1ed1i. H\xe3y ch\u1ec9nh s\u1eeda v\xe0 g\u1eedi duy\u1ec7t l\u1ea1i."]})})]})}),(0,At.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,At.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft *"}),(0,At.jsx)("input",{type:"text",id:"title",name:"title",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nh\u1eadp ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft...",value:A.title,onChange:f})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xf4 t\u1ea3 ng\u1eafn"}),(0,At.jsx)("textarea",{id:"description",name:"description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"M\xf4 t\u1ea3 ng\u1eafn g\u1ecdn v\u1ec1 n\u1ed9i dung b\xe0i vi\u1ebft...",value:A.description,onChange:f})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Danh m\u1ee5c"}),(0,At.jsxs)("select",{id:"categoryId",name:"categoryId",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:A.categoryId,onChange:f,children:[(0,At.jsx)("option",{value:"",children:"Ch\u1ecdn danh m\u1ee5c"}),l.map((e=>(0,At.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (ph\xe2n c\xe1ch b\u1eb1ng d\u1ea5u ph\u1ea9y)"}),(0,At.jsx)("input",{type:"text",id:"tags",name:"tags",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"phong th\u1ee7y, t\u1eed vi, thi\xean v\u0103n...",value:A.tags,onChange:f})]}),(0,At.jsx)("div",{children:(0,At.jsx)(cD,{value:A.thumbnail,onChange:e=>g((t=>({...t,thumbnail:e}))),label:"\u1ea2nh \u0111\u1ea1i di\u1ec7n",defaultThumbnail:x(),showDefaultThumbnail:!A.thumbnail&&!!A.categoryId})}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("div",{className:"flex items-center",children:[(0,At.jsx)("input",{type:"checkbox",name:"requireStars",checked:A.requireStars,onChange:f,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,At.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Y\xeau c\u1ea7u ng\u01b0\u1eddi d\xf9ng c\u1ea7n sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"})]}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Khi b\xe0i vi\u1ebft y\xeau c\u1ea7u sao, ng\u01b0\u1eddi d\xf9ng s\u1ebd ph\u1ea3i tr\u1ea3 m\u1ed9t s\u1ed1 sao \u0111\u1ec3 \u0111\u1ecdc."})]}),A.requireStars&&(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\u1ed1 sao c\u1ea7n \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft"}),(0,At.jsx)("input",{type:"number",name:"starCost",value:A.starCost,onChange:f,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,At.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"V\xed d\u1ee5: 10 sao \u0111\u1ec3 \u0111\u1ecdc b\xe0i vi\u1ebft."})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\u1ed9i dung b\xe0i vi\u1ebft *"}),(0,At.jsx)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:(0,At.jsx)(BD,{value:A.content,onChange:e=>g((t=>({...t,content:e}))),placeholder:"Vi\u1ebft n\u1ed9i dung b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n..."})})]})]})}),u&&(0,At.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,At.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Xem tr\u01b0\u1edbc b\xe0i vi\u1ebft"}),(0,At.jsxs)("div",{className:"prose max-w-none",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:A.title||"Ti\xeau \u0111\u1ec1 b\xe0i vi\u1ebft"}),A.description&&(0,At.jsx)("p",{className:"text-gray-600 italic mb-4",children:A.description}),(A.thumbnail||x())&&(0,At.jsx)("img",{src:A.thumbnail||x(),alt:"Thumbnail",className:"w-full max-w-md mx-auto rounded-lg mb-4"}),(0,At.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:A.content||"<p>N\u1ed9i dung b\xe0i vi\u1ebft s\u1ebd hi\u1ec3n th\u1ecb \u1edf \u0111\xe2y...</p>"}})]})]}),(0,At.jsxs)("div",{className:"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"\ud83d\udcdd L\u1ecbch s\u1eed ch\u1ec9nh s\u1eeda"}),(0,At.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"T\u1ea1o l\xfac:"}),(0,At.jsx)("span",{children:A.createdAt?A.createdAt.toLocaleString("vi-VN"):"N/A"})]}),A.updatedAt&&A.updatedAt.getTime()!==(null===(e=A.createdAt)||void 0===e?void 0:e.getTime())&&(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"C\u1eadp nh\u1eadt cu\u1ed1i:"}),(0,At.jsx)("span",{children:A.updatedAt.toLocaleString("vi-VN")})]}),(0,At.jsxs)("div",{className:"flex justify-between",children:[(0,At.jsx)("span",{children:"Tr\u1ea1ng th\xe1i:"}),(0,At.jsxs)("span",{className:"font-medium",children:["draft"===A.status&&"B\u1ea3n nh\xe1p","pending"===A.status&&"Ch\u1edd duy\u1ec7t","published"===A.status&&"\u0110\xe3 xu\u1ea5t b\u1ea3n","rejected"===A.status&&"B\u1ecb t\u1eeb ch\u1ed1i"]})]})]})]})]}),(0,At.jsx)(uI,{className:"!left-[0px] !right-[0px] !w-[100%]",onCancel:()=>n("/master/articles"),onSaveDraft:async e=>{await v(e,"draft")},onSubmit:async e=>{await v(e,"pending")},loading:a,disabled:!A.title.trim(),showSubmit:"draft"===A.status,cancelText:"H\u1ee7y",saveText:"L\u01b0u thay \u0111\u1ed5i",submitText:"G\u1eedi duy\u1ec7t"})]})};function rP(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"}))}const sP=t.forwardRef(rP),iP=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)({firestore:{reads:{used:0,limit:5e4,percentage:0},writes:{used:0,limit:2e4,percentage:0}},auth:{signUps:{used:0,limit:1e4,percentage:0},signIns:{used:0,limit:1e5,percentage:0}},storage:{stored:{used:0,limit:5120,percentage:0}}}),[i,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0),d={reads:5e4,writes:2e4},h={signUps:1e4,signIns:1e5},m={stored:5120};(0,t.useEffect)((()=>{n(!1)}),[]);const A=async()=>{try{const e=new Date;e.setHours(0,0,0,0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("createdAt",">=",e)),n=(await(0,Hb.GG)(t)).docs.length,r=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),s=((await(0,Hb.GG)(r)).docs.length,(0,Hb.P)((0,Hb.rJ)(Qb.db,"pageVisits"))),i=(await(0,Hb.GG)(s)).docs.reduce(((e,t)=>e+(t.data().count||0)),0),a=Math.min(150*n+2*i,d.reads),o=Math.min(40*n+i,d.writes);return{reads:{used:a,limit:d.reads,percentage:Math.round(a/d.reads*100)},writes:{used:o,limit:d.writes,percentage:Math.round(o/d.writes*100)}}}catch(e){return console.error("Error calculating Firestore usage:",e),{reads:{used:0,limit:d.reads,percentage:0},writes:{used:0,limit:d.writes,percentage:0}}}},g=async()=>{try{const e=new Date;e.setDate(1),e.setHours(0,0,0,0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("createdAt",">=",e)),n=(await(0,Hb.GG)(t)).docs.length,r=Math.min(3*n,h.signIns);return{signUps:{used:n,limit:h.signUps,percentage:Math.round(n/h.signUps*100)},signIns:{used:r,limit:h.signIns,percentage:Math.round(r/h.signIns*100)}}}catch(e){return console.error("Error calculating Auth usage:",e),{signUps:{used:0,limit:h.signUps,percentage:0},signIns:{used:0,limit:h.signIns,percentage:0}}}},p=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb.AB)(100)),t=(await(0,Hb.GG)(e)).docs.length,n=Math.min(2*t,m.stored);return{stored:{used:n,limit:m.stored,percentage:Math.round(n/m.stored*100)}}}catch(e){return console.error("Error calculating Storage usage:",e),{stored:{used:0,limit:m.stored,percentage:0}}}},f=e=>{const t=[];return e.firestore.reads.percentage>=90?t.push({type:"critical",service:"Firestore",metric:"Reads",message:`Firestore reads \u0111\xe3 \u0111\u1ea1t ${e.firestore.reads.percentage}% gi\u1edbi h\u1ea1n!`,percentage:e.firestore.reads.percentage}):e.firestore.reads.percentage>=70&&t.push({type:"warning",service:"Firestore",metric:"Reads",message:`Firestore reads \u0111\xe3 \u0111\u1ea1t ${e.firestore.reads.percentage}% gi\u1edbi h\u1ea1n`,percentage:e.firestore.reads.percentage}),e.firestore.writes.percentage>=90?t.push({type:"critical",service:"Firestore",metric:"Writes",message:`Firestore writes \u0111\xe3 \u0111\u1ea1t ${e.firestore.writes.percentage}% gi\u1edbi h\u1ea1n!`,percentage:e.firestore.writes.percentage}):e.firestore.writes.percentage>=70&&t.push({type:"warning",service:"Firestore",metric:"Writes",message:`Firestore writes \u0111\xe3 \u0111\u1ea1t ${e.firestore.writes.percentage}% gi\u1edbi h\u1ea1n`,percentage:e.firestore.writes.percentage}),e.auth.signUps.percentage>=90&&t.push({type:"critical",service:"Authentication",metric:"Sign-ups",message:`Auth sign-ups \u0111\xe3 \u0111\u1ea1t ${e.auth.signUps.percentage}% gi\u1edbi h\u1ea1n!`,percentage:e.auth.signUps.percentage}),e.auth.signIns.percentage>=90&&t.push({type:"critical",service:"Authentication",metric:"Sign-ins",message:`Auth sign-ins \u0111\xe3 \u0111\u1ea1t ${e.auth.signIns.percentage}% gi\u1edbi h\u1ea1n!`,percentage:e.auth.signIns.percentage}),e.storage.stored.percentage>=90&&t.push({type:"critical",service:"Storage",metric:"Stored Data",message:`Storage \u0111\xe3 \u0111\u1ea1t ${e.storage.stored.percentage}% gi\u1edbi h\u1ea1n!`,percentage:e.storage.stored.percentage}),t},x=e=>e>=90?"text-red-600 bg-red-50 border-red-200":e>=70?"text-yellow-600 bg-yellow-50 border-yellow-200":e>=50?"text-blue-600 bg-blue-50 border-blue-200":"text-green-600 bg-green-50 border-green-200",v=e=>e>=90?(0,At.jsx)(rk,{className:"h-5 w-5 text-red-600"}):e>=70?(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-600"}):e>=50?(0,At.jsx)(sM,{className:"h-5 w-5 text-blue-600"}):(0,At.jsx)(nM,{className:"h-5 w-5 text-green-600"}),y=async()=>{try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return null;const r=[{name:"users",type:"read"},{name:"pageVisits",type:"write"},{name:"sessionVisits",type:"write"},{name:"starTransactions",type:"write"},{name:"articles",type:"read"},{name:"articleCategories",type:"read"},{name:"adminConfig",type:"read"},{name:"profiles",type:"read"}];let s={reads:0,writes:0};for(const d of r)try{const e=(0,Hb.P)(d(Qb.db,d.name)),t=await(0,Hb.GG)(e);"read"===d.type?s.reads+=t.docs.length:s.writes+=t.docs.length}catch(e){console.warn(`Error counting collection ${d.name}:`,e)}const i=await b("users"),a=await w(),o=175*i,l=3*a,c=50*i,u=1.5*a;return s.reads+=o+l,s.writes+=c+u,{reads:{used:Math.min(s.reads,d.reads),limit:d.reads,percentage:Math.round(Math.min(s.reads,d.reads)/d.reads*100)},writes:{used:Math.min(s.writes,d.writes),limit:d.writes,percentage:Math.round(Math.min(s.writes,d.writes)/d.writes*100)}}}catch(e){return console.error("Error getting real Firebase usage:",e),null}},b=async e=>{try{const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,e));return(await(0,Hb.GG)(t)).docs.length}catch(t){return console.warn(`Error counting collection ${e}:`,t),0}},w=async()=>{try{const e=(0,Hb.P)((0,Hb.rJ)(Qb.db,"pageVisits"));return(await(0,Hb.GG)(e)).docs.reduce(((e,t)=>e+(t.data().count||0)),0)}catch(e){return console.warn("Error getting total page views:",e),0}};return e?(0,At.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,At.jsxs)("div",{className:"animate-pulse",children:[(0,At.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsx)("div",{className:"h-3 bg-gray-200 rounded"}),(0,At.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"}),(0,At.jsx)("div",{className:"h-3 bg-gray-200 rounded w-4/6"})]})]})}):(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow text-left",children:[(0,At.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(sP,{className:"h-6 w-6 text-blue-600"}),(0,At.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Firebase Free Tier Monitor"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"text-sm text-gray-600",children:"D\u1eef li\u1ec7u:"}),(0,At.jsxs)("button",{onClick:()=>u(!c),className:"flex items-center space-x-2 px-3 py-1 text-sm rounded-lg transition-colors "+(c?"bg-green-100 text-green-700 hover:bg-green-200":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"),children:[(0,At.jsx)(qL,{className:"h-4 w-4"}),(0,At.jsx)("span",{children:c?"Th\u1ef1c t\u1ebf":"\u01af\u1edbc t\xednh"})]})]}),(0,At.jsx)("div",{className:"text-sm text-gray-500",children:o?`C\u1eadp nh\u1eadt: ${o.toLocaleTimeString("vi-VN")}`:"Ch\u01b0a t\u1ea3i d\u1eef li\u1ec7u"})]})]}),(0,At.jsx)("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,At.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,At.jsx)("p",{className:"font-medium mb-1",children:"\u26a0\ufe0f L\u01b0u \xfd v\u1ec1 d\u1eef li\u1ec7u:"}),(0,At.jsx)("p",{className:"text-xs",children:c?(0,At.jsxs)(At.Fragment,{children:["S\u1ed1 li\u1ec7u ",(0,At.jsx)("strong",{children:"th\u1ef1c t\u1ebf"})," \u0111\u01b0\u1ee3c t\xednh t\u1eeb actual database operations v\xe0 user patterns. G\u1ea7n gi\u1ed1ng v\u1edbi Firebase Console nh\u01b0ng v\u1eabn c\xf3 th\u1ec3 kh\xe1c bi\u1ec7t."]}):(0,At.jsxs)(At.Fragment,{children:["S\u1ed1 li\u1ec7u ",(0,At.jsx)("strong",{children:"\u01b0\u1edbc t\xednh"})," d\u1ef1a tr\xean user activity c\u01a1 b\u1ea3n. Firebase Console hi\u1ec3n th\u1ecb s\u1ed1 li\u1ec7u th\u1ef1c t\u1ebf t\u1eeb t\u1ea5t c\u1ea3 database operations."]})})]})]})})]}),i.length>0&&(0,At.jsx)("div",{className:"px-6 py-4 bg-red-50 border-b border-red-200",children:(0,At.jsx)("div",{className:"space-y-2",children:i.map(((e,t)=>{return(0,At.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-white rounded-lg border border-red-200",children:[(n=e.type,"critical"===n?(0,At.jsx)(rk,{className:"h-5 w-5 text-red-600"}):(0,At.jsx)(jw,{className:"h-5 w-5 text-yellow-600"})),(0,At.jsxs)("div",{className:"flex-1",children:[(0,At.jsxs)("div",{className:"text-sm font-medium text-red-800",children:[e.service," - ",e.metric]}),(0,At.jsx)("div",{className:"text-sm text-red-600",children:e.message})]}),(0,At.jsxs)("div",{className:"text-sm font-bold text-red-600",children:[e.percentage,"%"]})]},t);var n}))})}),(0,At.jsxs)("div",{className:"p-6",children:[!o&&!e&&(0,At.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(sM,{className:"h-5 w-5 text-blue-600"}),(0,At.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,At.jsx)("p",{className:"font-medium",children:"\ud83d\udcca Ch\u01b0a c\xf3 d\u1eef li\u1ec7u"}),(0,At.jsx)("p",{children:'Nh\u1ea5n n\xfat "T\u1ea3i D\u1eef Li\u1ec7u" \u1edf tr\xean \u0111\u1ec3 xem th\u1ed1ng k\xea Firebase Free Tier usage.'})]})]})}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(qL,{className:"h-5 w-5 text-blue-600"}),(0,At.jsx)("h4",{className:"font-semibold text-gray-900",children:"Firestore Database"})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:`p-3 rounded-lg border ${x(r.firestore.reads.percentage)}`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium",children:"Reads (ng\xe0y)"}),v(r.firestore.reads.percentage)]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm",children:[r.firestore.reads.used.toLocaleString()," / ",r.firestore.reads.limit.toLocaleString()]}),(0,At.jsxs)("span",{className:"text-sm font-bold",children:[r.firestore.reads.percentage,"%"]})]}),(0,At.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full "+(r.firestore.reads.percentage>=90?"bg-red-500":r.firestore.reads.percentage>=70?"bg-yellow-500":r.firestore.reads.percentage>=50?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min(r.firestore.reads.percentage,100)}%`}})})]}),(0,At.jsxs)("div",{className:`p-3 rounded-lg border ${x(r.firestore.writes.percentage)}`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium",children:"Writes (ng\xe0y)"}),v(r.firestore.writes.percentage)]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm",children:[r.firestore.writes.used.toLocaleString()," / ",r.firestore.writes.limit.toLocaleString()]}),(0,At.jsxs)("span",{className:"text-sm font-bold",children:[r.firestore.writes.percentage,"%"]})]}),(0,At.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full "+(r.firestore.writes.percentage>=90?"bg-red-500":r.firestore.writes.percentage>=70?"bg-yellow-500":r.firestore.writes.percentage>=50?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min(r.firestore.writes.percentage,100)}%`}})})]})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(Ck,{className:"h-5 w-5 text-green-600"}),(0,At.jsx)("h4",{className:"font-semibold text-gray-900",children:"Authentication"})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{className:`p-3 rounded-lg border ${x(r.auth.signUps.percentage)}`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium",children:"Sign-ups (th\xe1ng)"}),v(r.auth.signUps.percentage)]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm",children:[r.auth.signUps.used.toLocaleString()," / ",r.auth.signUps.limit.toLocaleString()]}),(0,At.jsxs)("span",{className:"text-sm font-bold",children:[r.auth.signUps.percentage,"%"]})]}),(0,At.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full "+(r.auth.signUps.percentage>=90?"bg-red-500":r.auth.signUps.percentage>=70?"bg-yellow-500":r.auth.signUps.percentage>=50?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min(r.auth.signUps.percentage,100)}%`}})})]}),(0,At.jsxs)("div",{className:`p-3 rounded-lg border ${x(r.auth.signIns.percentage)}`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium",children:"Sign-ins (th\xe1ng)"}),v(r.auth.signIns.percentage)]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm",children:[r.auth.signIns.used.toLocaleString()," / ",r.auth.signIns.limit.toLocaleString()]}),(0,At.jsxs)("span",{className:"text-sm font-bold",children:[r.auth.signIns.percentage,"%"]})]}),(0,At.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full "+(r.auth.signIns.percentage>=90?"bg-red-500":r.auth.signIns.percentage>=70?"bg-yellow-500":r.auth.signIns.percentage>=50?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min(r.auth.signIns.percentage,100)}%`}})})]})]})]}),(0,At.jsxs)("div",{className:"space-y-4",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)(sP,{className:"h-5 w-5 text-purple-600"}),(0,At.jsx)("h4",{className:"font-semibold text-gray-900",children:"Storage"})]}),(0,At.jsx)("div",{className:"space-y-3",children:(0,At.jsxs)("div",{className:`p-3 rounded-lg border ${x(r.storage.stored.percentage)}`,children:[(0,At.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,At.jsx)("span",{className:"text-sm font-medium",children:"Stored Data"}),v(r.storage.stored.percentage)]}),(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("span",{className:"text-sm",children:[r.storage.stored.used,"MB / ",r.storage.stored.limit,"MB"]}),(0,At.jsxs)("span",{className:"text-sm font-bold",children:[r.storage.stored.percentage,"%"]})]}),(0,At.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:(0,At.jsx)("div",{className:"h-2 rounded-full "+(r.storage.stored.percentage>=90?"bg-red-500":r.storage.stored.percentage>=70?"bg-yellow-500":r.storage.stored.percentage>=50?"bg-blue-500":"bg-green-500"),style:{width:`${Math.min(r.storage.stored.percentage,100)}%`}})})]})})]})]}),(0,At.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,At.jsx)("button",{onClick:async()=>{try{n(!0);const e="true"===localStorage.getItem("adminFirebaseAuth"),t=localStorage.getItem("adminEmail");if(!e||"viettaquang.design@gmail.com"!==t)return void n(!1);let r;c?(r=await y(),r||(r=await A())):r=await A();const i=await g(),o={firestore:r,auth:i,storage:await p()};s(o),a(f(o)),l(new Date)}catch(e){console.error("Error loading Free Tier usage:",e)}finally{n(!1)}},disabled:e,className:"flex items-center space-x-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:e?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,At.jsx)("span",{children:"\u0110ang t\u1ea3i..."})]}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(sP,{className:"h-4 w-4"}),(0,At.jsx)("span",{children:"T\u1ea3i D\u1eef Li\u1ec7u"})]})})}),(0,At.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,At.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"\ud83d\udca1 Khuy\u1ebfn Ngh\u1ecb"}),(0,At.jsx)("div",{className:"text-sm text-blue-800 space-y-1",children:o?i.length>0?(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:["\u26a0\ufe0f ",(0,At.jsx)("strong",{children:"C\u1ea7n h\xe0nh \u0111\u1ed9ng ngay:"})]}),(0,At.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1",children:[(0,At.jsx)("li",{children:"Implement aggressive caching \u0111\u1ec3 gi\u1ea3m database calls"}),(0,At.jsx)("li",{children:"Batch operations \u0111\u1ec3 gi\u1ea3m individual writes"}),(0,At.jsx)("li",{children:"Consider upgrade to Blaze Plan n\u1ebfu c\u1ea7n scale l\u1edbn h\u01a1n"})]})]}):(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:["\u2705 ",(0,At.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i t\u1ed1t:"})]}),(0,At.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1",children:[(0,At.jsx)("li",{children:"Free Tier limits c\xf2n nhi\u1ec1u headroom"}),(0,At.jsx)("li",{children:"C\xf3 th\u1ec3 scale th\xeam users"}),(0,At.jsx)("li",{children:"Ti\u1ebfp t\u1ee5c monitor \u0111\u1ec3 \u0111\u1ea3m b\u1ea3o performance"})]})]}):(0,At.jsxs)("div",{children:[(0,At.jsxs)("p",{children:["\ud83d\udcca ",(0,At.jsx)("strong",{children:"B\u1eaft \u0111\u1ea7u monitor:"})]}),(0,At.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1",children:[(0,At.jsx)("li",{children:'Nh\u1ea5n n\xfat "T\u1ea3i D\u1eef Li\u1ec7u" \u0111\u1ec3 xem th\u1ed1ng k\xea hi\u1ec7n t\u1ea1i'}),(0,At.jsx)("li",{children:'Ch\u1ecdn lo\u1ea1i d\u1eef li\u1ec7u: "Th\u1ef1c t\u1ebf" ho\u1eb7c "\u01af\u1edbc t\xednh"'})]})]})})]})]})]})},aP=()=>(0,At.jsx)(WL,{children:(0,At.jsx)("div",{className:"space-y-6",children:(0,At.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,At.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,At.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Free Tier Usage Monitor"}),(0,At.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Theo d\xf5i v\xe0 qu\u1ea3n l\xfd vi\u1ec7c s\u1eed d\u1ee5ng Firebase Free Tier"})]}),(0,At.jsx)("div",{className:"p-6",children:(0,At.jsx)(iP,{})})]})})}),oP=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),{preferences:d,shouldShowInstallPrompt:h,setDontAskFor30Days:m,setDontAskPermanently:A,trackInstallAttempt:g,getDaysUntilNextShow:p,resetPreferences:f}=mk(),x=(0,t.useMemo)((()=>{try{return h()}catch(e){return console.error("Error in shouldShowInstallPrompt:",e),!1}}),[h]);(0,t.useEffect)((()=>{try{const e=/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;s(e);const t=window.matchMedia("(display-mode: standalone)").matches;a(t),u(!0)}catch(e){console.error("Error in device detection:",e),u(!0)}}),[]),(0,t.useEffect)((()=>{if(!c)return;const e=setTimeout((()=>{n(!(!r||i||!x))}),100);return()=>clearTimeout(e)}),[d,r,i,x,c]);const v=(0,t.useCallback)((()=>{m(),n(!1),l(!1),window.showToast&&window.showToast("S\u1ebd kh\xf4ng h\u1ecfi l\u1ea1i trong 30 ng\xe0y t\u1edbi.","info")}),[m]),y=(0,t.useCallback)((()=>{A(),n(!1),l(!1),window.showToast&&window.showToast("S\u1ebd kh\xf4ng hi\u1ec3n th\u1ecb th\xf4ng b\xe1o c\xe0i \u0111\u1eb7t n\u1eefa.","info")}),[A]),b=(0,t.useCallback)((()=>{n(!1),g("dismissed"),window.showToast&&window.showToast("S\u1ebd kh\xf4ng h\u1ecfi l\u1ea1i trong 1 ng\xe0y t\u1edbi.","info")}),[g]);if(!e||i||!r)return null;const w=p();return(0,At.jsx)("div",{className:"fixed bottom-4 left-4 z-50 text-left",children:(0,At.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 max-w-sm",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("img",{src:"/appstore.png",alt:"App Icon",className:"w-12 h-12 rounded-lg",onError:e=>{e.target.src="/appstore.png"}})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"C\xe0i \u0111\u1eb7t tr\xean iPhone/iPad"}),(0,At.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Nh\u1ea5n v\xe0o bi\u1ec3u t\u01b0\u1ee3ng chia s\u1ebb v\xe0 ch\u1ecdn "Th\xeam v\xe0o m\xe0n h\xecnh ch\xednh"'})]}),(0,At.jsxs)("div",{className:"flex-shrink-0 space-x-1",children:[(0,At.jsx)("button",{onClick:()=>l(!o),className:"text-gray-400 hover:text-gray-600 p-1 hidden","aria-label":"T\xf9y ch\u1ecdn",children:(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),(0,At.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 p-1","aria-label":"\u0110\xf3ng",children:(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,At.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,At.jsxs)("div",{className:"text-xs text-gray-600 space-y-2",children:[(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-medium",children:"1"}),(0,At.jsx)("span",{className:"flex items-center gap-2",children:"Nh\u1ea5n v\xe0o bi\u1ec3u t\u01b0\u1ee3ng chia s\u1ebb d\u01b0\u1edbi m\xe0n h\xecnh"})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-medium",children:"2"}),(0,At.jsx)("span",{children:'Cu\u1ed9n xu\u1ed1ng v\xe0 ch\u1ecdn "Th\xeam v\xe0o m\xe0n h\xecnh ch\xednh"'})]}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("span",{className:"w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-medium",children:"3"}),(0,At.jsx)("span",{children:'Nh\u1ea5n "Th\xeam" \u0111\u1ec3 ho\xe0n t\u1ea5t'})]})]})}),!o&&(0,At.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,At.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Kh\xf4ng hi\u1ec3n th\u1ecb l\u1ea1i:"}),(0,At.jsxs)("div",{className:"space-y-2",children:[(0,At.jsx)("button",{onClick:v,className:"w-full text-left text-xs text-gray-700 hover:text-blue-600 py-1 px-2 rounded hover:bg-gray-50 transition-colors",children:"\u23f0 Trong 30 ng\xe0y t\u1edbi"}),(0,At.jsx)("button",{onClick:y,className:"w-full text-left text-xs text-gray-700 hover:text-red-600 py-1 px-2 rounded hover:bg-gray-50 transition-colors",children:"\ud83d\udeab V\u0129nh vi\u1ec5n"})]})]}),w>0&&(0,At.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["S\u1ebd hi\u1ec3n th\u1ecb l\u1ea1i sau ",w," ng\xe0y"]}),!1]})})},lP=(0,t.memo)(oP),cP=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(null);(0,t.useEffect)((()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{s(e),e.addEventListener("updatefound",(()=>{const t=e.installing;t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&n(!0)}))}))}))}),[]);return e?(0,At.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,At.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg shadow-lg p-4 max-w-sm",children:(0,At.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("h3",{className:"text-sm font-medium text-green-900",children:"C\u1eadp nh\u1eadt m\u1edbi"}),(0,At.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"C\xf3 phi\xean b\u1ea3n m\u1edbi c\u1ee7a \u1ee9ng d\u1ee5ng"})]}),(0,At.jsxs)("div",{className:"flex-shrink-0 space-x-2",children:[(0,At.jsx)("button",{onClick:()=>{r&&r.waiting&&(r.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload(),window.showToast&&window.showToast("\u1ee8ng d\u1ee5ng \u0111\xe3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt! \ud83c\udf89","success"),n(!1))},className:"bg-green-600 hover:bg-green-700 text-white text-xs font-medium px-3 py-2 rounded-md transition-colors duration-200",children:"C\u1eadp nh\u1eadt"}),(0,At.jsx)("button",{onClick:()=>n(!1),className:"text-green-400 hover:text-green-600","aria-label":"\u0110\xf3ng",children:(0,At.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}):null},uP=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),{registration:i,updateAvailable:a,isRefreshing:o,performRefresh:l,showRefreshButton:c}=pk();(0,t.useEffect)((()=>{const e="true"===localStorage.getItem("pwaRefreshButtonHidden");s(e);const t=window.matchMedia("(display-mode: standalone)").matches;n(t&&(a||!0)&&!e)}),[a]);return window.matchMedia("(display-mode: standalone)").matches&&e?(0,At.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,At.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg shadow-lg p-3 max-w-xs relative",children:[(0,At.jsx)("button",{onClick:()=>{s(!0),n(!1),localStorage.setItem("pwaRefreshButtonHidden","true"),window.showToast&&window.showToast("\u0110\xe3 \u1ea9n n\xfat t\u1ea3i l\u1ea1i. V\xe0o Profile > Qu\u1ea3n l\xfd PWA \u0111\u1ec3 hi\u1ec7n l\u1ea1i.","info")},className:"absolute -top-2 -right-2 bg-gray-400 hover:bg-gray-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold transition-colors duration-200 shadow-md",title:"\u1ea8n n\xfat t\u1ea3i l\u1ea1i",children:"\xd7"}),(0,At.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,At.jsx)("div",{className:"flex-shrink-0",children:(0,At.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,At.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,At.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,At.jsx)("p",{className:"text-xs text-blue-900 font-medium",children:a?"C\u1eadp nh\u1eadt m\u1edbi":"L\xe0m m\u1edbi"}),(0,At.jsx)("p",{className:"text-xs text-blue-600",children:a?"C\xf3 phi\xean b\u1ea3n m\u1edbi":"T\u1ea3i l\u1ea1i \u1ee9ng d\u1ee5ng"})]}),(0,At.jsxs)("div",{className:"flex-shrink-0 space-x-1",children:[(0,At.jsx)("button",{onClick:()=>{l(!1)},disabled:o,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-xs font-medium px-2 py-1 rounded transition-colors duration-200 flex items-center space-x-1",children:o?(0,At.jsxs)(At.Fragment,{children:[(0,At.jsxs)("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,At.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,At.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,At.jsx)("span",{children:"\u0110ang t\u1ea3i..."})]}):(0,At.jsx)("span",{children:"L\xe0m m\u1edbi"})}),a&&(0,At.jsx)("button",{onClick:()=>{l(!0)},disabled:o,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white text-xs font-medium px-2 py-1 rounded transition-colors duration-200",title:"L\xe0m m\u1edbi c\u01b0\u1ee1ng ch\u1ebf (x\xf3a cache)",children:"\u26a1"})]})]})]})}):null},dP=()=>(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(Ak,{}),(0,At.jsx)(lP,{}),(0,At.jsx)(cP,{}),(0,At.jsx)(uP,{})]});function hP(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25v-1.5m0 1.5c-1.355 0-2.697.056-4.024.166C6.845 8.51 6 9.473 6 10.608v2.513m6-4.871c1.355 0 2.697.056 4.024.166C17.155 8.51 18 9.473 18 10.608v2.513M15 8.25v-1.5m-6 1.5v-1.5m12 9.75-1.5.75a3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0 3.354 3.354 0 0 0-3 0 3.354 3.354 0 0 1-3 0L3 16.5m15-3.379a48.474 48.474 0 0 0-6-.371c-2.032 0-4.034.126-6 .371m12 0c.39.049.777.102 1.163.16 1.07.16 1.837 1.094 1.837 2.175v5.169c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 0 1 3 20.625v-5.17c0-1.08.768-2.014 1.837-2.174A47.78 47.78 0 0 1 6 13.12M12.265 3.11a.375.375 0 1 1-.53 0L12 2.845l.265.265Zm-3 0a.375.375 0 1 1-.53 0L9 2.845l.265.265Zm6 0a.375.375 0 1 1-.53 0L15 2.845l.265.265Z"}))}const mP=t.forwardRef(hP),AP=()=>{const{hasConsent:e,consentValue:n,giveConsent:r,revokeConsent:s}=Uk(),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!e),c=()=>{r(),FT(),l(!1)},u=()=>{s(),l(!1)};return o?(0,At.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-slate-900/95 backdrop-blur-sm border-t border-slate-700 shadow-2xl text-left",children:(0,At.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:i?(0,At.jsxs)("div",{className:"space-y-4 hidden cookies",children:[(0,At.jsxs)("div",{className:"flex items-center justify-between",children:[(0,At.jsxs)("h3",{className:"text-white font-semibold flex items-center gap-2",children:[(0,At.jsx)(mP,{className:"h-5 w-5 text-yellow-400"}),"C\xe0i \u0111\u1eb7t Cookies"]}),(0,At.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-white",children:(0,At.jsx)(ky,{className:"h-5 w-5"})})]}),(0,At.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[(0,At.jsx)(dt,{className:"h-4 w-4 text-green-400"}),"Cookies c\u1ea7n thi\u1ebft"]}),(0,At.jsx)("p",{className:"text-gray-300 text-xs",children:"Cookies n\xe0y l\xe0 b\u1eaft bu\u1ed9c \u0111\u1ec3 trang web ho\u1ea1t \u0111\u1ed9ng. Ch\xfang bao g\u1ed3m x\xe1c th\u1ef1c, b\u1ea3o m\u1eadt v\xe0 c\xe1c ch\u1ee9c n\u0103ng c\u01a1 b\u1ea3n."}),(0,At.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,At.jsx)("input",{type:"checkbox",checked:!0,disabled:!0,className:"rounded"}),(0,At.jsx)("span",{className:"text-xs text-gray-400",children:"Lu\xf4n \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsxs)("h4",{className:"text-white font-medium mb-2 flex items-center gap-2",children:[(0,At.jsx)(LM,{className:"h-4 w-4 text-blue-400"}),"Cookies ph\xe2n t\xedch"]}),(0,At.jsx)("p",{className:"text-gray-300 text-xs",children:"Gi\xfap ch\xfang t\xf4i hi\u1ec3u c\xe1ch b\u1ea1n s\u1eed d\u1ee5ng trang web \u0111\u1ec3 c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m."}),(0,At.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,At.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),(0,At.jsx)("span",{className:"text-xs text-gray-300",children:"Cho ph\xe9p analytics"})]})]})]}),(0,At.jsxs)("div",{className:"space-y-3",children:[(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-white font-medium mb-2",children:"\ud83c\udfa8 Cookies \u0111i\u1ec1u ch\u1ec9nh"}),(0,At.jsx)("p",{className:"text-gray-300 text-xs",children:"L\u01b0u tr\u1eef c\xe0i \u0111\u1eb7t giao di\u1ec7n, ng\xf4n ng\u1eef v\xe0 preferences c\xe1 nh\xe2n c\u1ee7a b\u1ea1n."}),(0,At.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,At.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),(0,At.jsx)("span",{className:"text-xs text-gray-300",children:"Theme, ng\xf4n ng\u1eef, font size"})]})]}),(0,At.jsxs)("div",{children:[(0,At.jsx)("h4",{className:"text-white font-medium mb-2",children:"\ud83d\udcca Cookies t\xednh n\u0103ng"}),(0,At.jsx)("p",{className:"text-gray-300 text-xs",children:"L\u01b0u tr\u1eef d\u1eef li\u1ec7u \u0111\u1ec3 cung c\u1ea5p c\xe1c t\xednh n\u0103ng n\xe2ng cao nh\u01b0 favorites, l\u1ecbch s\u1eed s\u1eed d\u1ee5ng."}),(0,At.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,At.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),(0,At.jsx)("span",{className:"text-xs text-gray-300",children:"Favorites, visit tracking"})]})]})]})]}),(0,At.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3",children:[(0,At.jsx)("h5",{className:"text-white text-xs font-medium mb-1",children:"Th\xf4ng tin cookies \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef:"}),(0,At.jsxs)("ul",{className:"text-xs text-gray-300 space-y-1",children:[(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("code",{children:"lunar_theme"})," - Giao di\u1ec7n s\xe1ng/t\u1ed1i c\u1ee7a b\u1ea1n"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("code",{children:"lunar_language"})," - Ng\xf4n ng\u1eef hi\u1ec3n th\u1ecb"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("code",{children:"lunar_visit_count"})," - S\u1ed1 l\u1ea7n truy c\u1eadp (analytics)"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("code",{children:"lunar_user_prefs"})," - C\xe0i \u0111\u1eb7t c\xe1 nh\xe2n"]}),(0,At.jsxs)("li",{children:["\u2022 ",(0,At.jsx)("code",{children:"lunar_favorites"})," - T\xednh n\u0103ng y\xeau th\xedch"]})]})]}),(0,At.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[(0,At.jsx)("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-300 hover:text-white bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:"Ch\u1ec9 cookies c\u1ea7n thi\u1ebft"}),(0,At.jsx)("button",{onClick:()=>{c()},className:"px-4 py-2 text-sm text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:"Ch\u1ea5p nh\u1eadn \u0111\xe3 ch\u1ecdn"}),(0,At.jsx)("button",{onClick:c,className:"px-6 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors font-medium",children:"Ch\u1ea5p nh\u1eadn t\u1ea5t c\u1ea3"})]})]}):(0,At.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 cookies",children:[(0,At.jsx)("div",{className:"flex items-start gap-3 flex-1",children:(0,At.jsxs)("div",{children:[(0,At.jsx)("h3",{className:"text-white font-semibold mb-1",children:"Cookies tr\xean trang web"}),(0,At.jsxs)("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Ch\xfang t\xf4i s\u1eed d\u1ee5ng cookie \u0111\u1ec3 c\u1ea3i thi\u1ec7n tr\u1ea3i nghi\u1ec7m c\u1ee7a b\u1ea1n. T\xecm hi\u1ec3u v\u1ec1 ",(0,At.jsx)("a",{href:"/privacy-policy",className:"text-green-400 hover:text-green-300 underline",target:"_blank",children:"Ch\xednh s\xe1ch B\u1ea3o m\u1eadt"})]})]})}),(0,At.jsxs)("div",{className:"flex flex-row gap-2 min-w-fit",children:[(0,At.jsx)("button",{onClick:()=>a(!0),className:"hidden cookies px-4 py-2 text-sm text-gray-300 hover:text-white border border-gray-600 hover:border-gray-500 rounded-lg transition-colors",children:"Chi ti\u1ebft"}),(0,At.jsx)("button",{onClick:u,className:"px-4 py-2 text-sm text-gray-300 hover:text-white bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors",children:"T\u1eeb ch\u1ed1i"}),(0,At.jsx)("button",{onClick:c,className:"px-6 py-2 text-sm rounded-lg transition-colors font-medium button-style",children:"Ch\u1ea5p nh\u1eadn"})]})]})})}):null},gP=()=>{const{currentUser:e,isEmailVerified:n}=Aw(),{canClaimDailyReward:r,userLoginStreak:s,loading:i}=ak(),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1);(0,t.useEffect)((()=>{0}),[null===e||void 0===e?void 0:e.uid,r,l,n,i]);const h=e&&n&&r&&!i&&!(()=>{if(null===e||void 0===e||!e.uid)return!1;const t=`balloon_clicked_${e.uid}`,n=localStorage.getItem(t);if(!n)return!1;return n===(new Date).toDateString()})();(0,t.useEffect)((()=>{!h||l||a?!h&&l&&(c(!1),d(!1)):(c(!0),d(!0),setTimeout((()=>{d(!1)}),2e3))}),[h,l,a]);return(0,At.jsxs)(At.Fragment,{children:[h&&l&&(0,At.jsxs)("div",{className:"fixed bottom-6 left-6 z-50",children:[(0,At.jsxs)("button",{onClick:()=>{(()=>{if(null===e||void 0===e||!e.uid)return;const t=`balloon_clicked_${e.uid}`,n=(new Date).toDateString();localStorage.setItem(t,n)})(),o(!0),c(!1)},className:`\n              relative group daily-rewards-balloon\n              !w-16 !h-16 \n              button-style\n              !rounded-full \n              shadow-2xl balloon-pulse\n              border-4 border-white\n              transition-all duration-300\n              hover:scale-110 hover:shadow-yellow-500/50\n              ${u?"animate-bounce":""}\n              transform hover:rotate-12\n            `,title:"Nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng h\xe0ng ng\xe0y! \ud83c\udf81",children:[(0,At.jsx)($M,{className:"w-8 h-8 text-white mx-auto"}),(0,At.jsx)("div",{className:"absolute inset-0 rounded-full bg-yellow-400 animate-ping opacity-20"}),(0,At.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full balloon-sparkle"}),(0,At.jsx)("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-blue-400 rounded-full balloon-sparkle",style:{animationDelay:"0.5s"}}),(0,At.jsx)("div",{className:"absolute top-1 -left-1 w-2 h-2 bg-green-400 rounded-full balloon-sparkle",style:{animationDelay:"1s"}})]}),(0,At.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-black text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:["Nh\u1eadn \u0111i\u1ec3m th\u01b0\u1edfng! \ud83c\udf81",(0,At.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"})]}),s.currentStreak>0&&(0,At.jsx)("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold border-2 border-white",children:s.currentStreak})]}),(0,At.jsx)(ok,{isOpen:a,onClose:()=>{o(!1)},onRewardClaimed:()=>{o(!1),c(!1),d(!1)}})]})};function pP(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const fP=t.forwardRef(pP);function xP(e,n){let{title:r,titleId:s,...i}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const vP=t.forwardRef(xP),yP={enabled:!0,showAfterScroll:0,autoOpen:!1,position:"bottom-right",messages:{header:"LI\xcaN H\u1ec6 CH\xdaNG T\xd4I",footer:"Ch\xfang t\xf4i s\u1ebd s\u1edbm ph\u1ea3n h\u1ed3i",offline:"Offline",online:"Online",tooltip:"Li\xean h\u1ec7 h\u1ed7 tr\u1ee3"},businessHours:{enabled:!0,timezone:"Asia/Ho_Chi_Minh",schedule:{monday:{start:"08:00",end:"20:00"},tuesday:{start:"08:00",end:"20:00"},wednesday:{start:"08:00",end:"20:00"},thursday:{start:"08:00",end:"20:00"},friday:{start:"08:00",end:"20:00"},saturday:{start:"08:00",end:"20:00"},sunday:{start:"08:00",end:"20:00"}}},channels:[{id:"zalo",name:"Zalo",enabled:!1,priority:1,icon:"zalo",color:"#0068FF",backgroundColor:"#E3F2FD",url:"https://zalo.me/0968681500",tooltip:"Chat qua Zalo",openInNewTab:!0,analytics:{event:"support_channel_clicked",properties:{channel:"zalo"}}},{id:"messenger",name:"Messenger",enabled:!0,priority:2,icon:"messenger",color:"#1877F2",backgroundColor:"#E3F2FD",url:"https://m.me/61577936296941",tooltip:"Chat qua Messenger",openInNewTab:!0,analytics:{event:"support_channel_clicked",properties:{channel:"messenger"}}},{id:"telegram",name:"Telegram",enabled:!1,priority:3,icon:"telegram",color:"#0088CC",backgroundColor:"#E3F2FD",url:"https://t.me/thiendianhan_support",tooltip:"Chat qua Telegram",openInNewTab:!0,analytics:{event:"support_channel_clicked",properties:{channel:"telegram"}}},{id:"whatsapp",name:"WhatsApp",enabled:!1,priority:4,icon:"whatsapp",color:"#25D366",backgroundColor:"#E8F5E8",url:"https://wa.me/84123456789",tooltip:"Chat qua WhatsApp",openInNewTab:!0,analytics:{event:"support_channel_clicked",properties:{channel:"whatsapp"}}},{id:"email",name:"Email",enabled:!0,priority:5,icon:"email",color:"#EA4335",backgroundColor:"#25D366",url:"mailto:thiendianhan.app@gmail.com?subject=Y\xeau c\u1ea7u h\u1ed7 tr\u1ee3&body=Xin ch\xe0o, t\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1...",tooltip:"G\u1eedi email h\u1ed7 tr\u1ee3",openInNewTab:!1,analytics:{event:"support_channel_clicked",properties:{channel:"email"}}},{id:"phone",name:"Hotline",enabled:!1,priority:6,icon:"phone",color:"#4CAF50",backgroundColor:"#E8F5E8",url:"tel:+84123456789",tooltip:"G\u1ecdi \u0111i\u1ec7n h\u1ed7 tr\u1ee3",openInNewTab:!1,displayPhone:"0123 456 789",analytics:{event:"support_channel_clicked",properties:{channel:"phone"}}}]},bP=e=>{const t=yP.channels.find((t=>t.id===e));return t&&(()=>{if(!yP.businessHours.enabled)return!0;const e=new Date,t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][e.getDay()],n=e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),r=yP.businessHours.schedule[t];return!!r&&n>=r.start&&n<=r.end})()?"online":"offline"},wP=e=>{let{className:t}=e;return(0,At.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,At.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2v-6zm0 8h2v2h-2v-2z"})})},NP=e=>{let{className:t}=e;return(0,At.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,At.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2v-6zm0 8h2v2h-2v-2z"})})},jP=e=>{let{className:t}=e;return(0,At.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,At.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.570-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.4 3.488"})})},CP=()=>{const[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=yP.channels.filter((e=>e.enabled)).sort(((e,t)=>e.priority-t.priority)).map((e=>({...e,status:bP(e.id)})));s(e)}),[]);const i=e=>{const t={className:"w-6 h-6 text-white"};switch(e){case"zalo":return(0,At.jsx)(fP,{...t});case"messenger":return(0,At.jsx)(wP,{...t});case"email":return(0,At.jsx)(EM,{...t});case"telegram":return(0,At.jsx)(NP,{...t});case"whatsapp":return(0,At.jsx)(jP,{...t});case"phone":return(0,At.jsx)(VM,{...t});default:return(0,At.jsx)(vP,{...t})}},a=e=>{(e=>{"undefined"!==typeof window&&window.gtag&&window.gtag("event",e.analytics.event,e.analytics.properties),"undefined"!==typeof window&&window.fbq&&window.fbq("trackCustom","SupportChannelClick",{channel:e.id})})(e);const t=(e=>{const t={zalo:"Xin ch\xe0o! T\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1 \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n.",messenger:"Xin ch\xe0o! T\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1 \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n.",telegram:"Xin ch\xe0o! T\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1 \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n.",whatsapp:"Xin ch\xe0o! T\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1 \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n.",email:"Xin ch\xe0o,\n\nT\xf4i c\u1ea7n h\u1ed7 tr\u1ee3 v\u1ec1 \u1ee9ng d\u1ee5ng Thi\xean \u0110\u1ecba Nh\xe2n.\n\nV\u1ea5n \u0111\u1ec1 c\u1ee7a t\xf4i l\xe0:\n\n\nXin c\u1ea3m \u01a1n!"}[e.id]||"";let n=e.url;switch(e.id){case"zalo":case"messenger":case"email":default:break;case"telegram":case"whatsapp":t&&(n=`${n}?text=${encodeURIComponent(t)}`)}return n})(e);e.openInNewTab?window.open(t,"_blank","noopener,noreferrer"):window.location.href=t,n(!1)};return(0,t.useEffect)((()=>{const t=t=>{e&&!t.target.closest(".customer-support-widget")&&n(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)}),[e]),yP.enabled?(0,At.jsxs)("div",{className:"customer-support-widget fixed bottom-4 right-4 z-50 flex flex-col items-end",children:[e&&(0,At.jsxs)("div",{className:"support-channels-container mb-4 bg-white rounded-lg shadow-lg  overflow-hidden animate-slide-up w-[200px]",children:[(0,At.jsx)("div",{className:"animation-nav text-black !p-3 flex items-center justify-center",children:(0,At.jsx)("h3",{className:"text-sm font-semibold text-center title-lh",children:yP.messages.header})}),(0,At.jsx)("div",{className:"py-2",children:r.map((e=>(0,At.jsxs)("button",{onClick:()=>a(e),className:"support-channel w-full flex items-center px-4 py-2 hover:bg-slate-100 transition-colors duration-200 group border-b border-gray-100",title:e.tooltip,children:[(0,At.jsx)("div",{className:"hidden !w-12 !h-12 rounded-full flex items-center justify-center mr-3 group-hover:scale-110 transition-transform support-icon",style:{backgroundColor:e.color},children:i(e.icon)}),(0,At.jsxs)("div",{className:"flex flex-1 text-left justify-between",children:[(0,At.jsx)("div",{className:"font-medium text-gray-900",style:{color:e.color},children:e.name}),(0,At.jsxs)("div",{className:"text-sm flex items-center "+("online"===e.status?"text-green-600":"text-gray-500"),children:[(0,At.jsx)("span",{className:"w-2 h-2 rounded-full mr-1 "+("online"===e.status?"bg-green-500 status-online":"bg-gray-400")}),"online"===e.status?yP.messages.online:yP.messages.offline]})]}),"phone"===e.id&&e.displayPhone&&(0,At.jsx)("div",{className:"text-sm text-gray-600 font-mono",children:e.displayPhone})]},e.id)))}),(0,At.jsx)("div",{className:"p-2 text-center",children:(0,At.jsx)("p",{className:"text-xs text-gray-500",children:yP.messages.footer})})]}),(0,At.jsx)("button",{onClick:()=>n(!e),className:"!w-14 !h-14 !rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110 animate-float button-style",title:yP.messages.tooltip,"aria-label":yP.messages.tooltip,children:e?(0,At.jsx)(ky,{className:"w-6 h-6 stroke-2"}):(0,At.jsx)("div",{className:"flex items-center justify-center",children:(0,At.jsx)(vP,{className:"!w-6 !h-6 stroke-2"})})})]}):null},TP=()=>{const[e,n]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const t=()=>{const e=navigator.userAgent;return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)};if(t())return;let r=!1;let s=0,i=0;let a=!1,o=0,l=!1,c={width:window.innerWidth,height:window.innerHeight,timestamp:Date.now(),isDesktop:window.innerWidth>768};let u;const d=()=>{l=!0,clearTimeout(u),u=setTimeout((()=>{l=!1}),1e3)},h=()=>{if(r)return;if(r=!0,!l&&(()=>{const e=window.innerWidth,t=window.innerHeight,r=Date.now(),i=e>768,l=r-c.timestamp,u=Math.abs(e-c.width),d=Math.abs(t-c.height),h=u>400||d>400,m=l<500,A=c.isDesktop!==i,g=window.outerWidth!==window.innerWidth||window.outerHeight!==window.innerHeight||"chrome"in window&&"webstore"in window.chrome;return m&&h&&A&&g?(s=3,a=!0,o=Date.now(),n(!0),!0):(c={width:e,height:t,timestamp:r,isDesktop:i},!1)})())return void setTimeout((()=>{r=!1}),100);const t=window.outerWidth-window.innerWidth,u=window.outerHeight-window.innerHeight;let d=160;window.innerWidth<=768&&(d=80);t>d||u>d?(s++,i=0,o=Date.now(),s>=3&&(a=!0,n(!0))):(s=0,a&&e&&(i++,i>=5&&(a=!1,i=0,n(!1)))),setTimeout((()=>{r=!1}),100)},m=()=>{if(a)return;(()=>{const e=performance.now();performance.now()-e>100&&(s++,o=Date.now(),s>=3&&(a=!0,n(!0)))})()},A=e=>(e.preventDefault(),e.stopPropagation(),!1);window.addEventListener("resize",h),window.addEventListener("resize",d),document.addEventListener("contextmenu",A,!0);const g=(()=>{let e=window.orientation,r=Date.now();const i=()=>{const i=Date.now(),l=i-r,c=window.outerWidth!==window.innerWidth||window.outerHeight!==window.innerHeight;l<300&&!t()&&c&&(s=3,a=!0,o=Date.now(),n(!0)),e=window.orientation,r=i};if("orientation"in window)return window.addEventListener("orientationchange",i),()=>window.removeEventListener("orientationchange",i)})();setTimeout((()=>{const e=window.outerWidth-window.innerWidth,t=window.outerHeight-window.innerHeight;let r=160;window.innerWidth<=768&&(r=80),(e>2*r||t>2*r)&&(s=3,a=!0,o=Date.now(),n(!0))}),1e3);const p=setInterval((()=>{h(),(()=>{if(a)return;const e=window.innerWidth<=768,t=!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e&&t&&[window.outerWidth!==window.innerWidth,window.outerHeight!==window.innerHeight,"chrome"in window&&"webstore"in window.chrome,!0===window.navigator.webdriver].filter((e=>e)).length>=2&&(s++,o=Date.now(),s>=3&&(a=!0,n(!0)))})(),(()=>{if(a)return;let e=0;["chrome.runtime","chrome.devtools","__REACT_DEVTOOLS_GLOBAL_HOOK__","__VUE_DEVTOOLS_GLOBAL_HOOK__"].forEach((t=>{const n=t.split(".");let r=window;for(const e of n){if(!r||!r[e])return;r=r[e]}r&&e++})),e>=1&&(s++,o=Date.now(),s>=3&&(a=!0,n(!0)))})(),Math.random()<.1&&(()=>{if(a)return;const e=document.createElement("div");let t=!1;Object.defineProperty(e,"id",{get:function(){return t=!0,"console-detector"},configurable:!0}),requestIdleCallback((()=>{console.clear(),t&&(s=3,a=!0,o=Date.now(),n(!0))}))})(),Math.random()<.05&&m()}),800);return()=>{window.removeEventListener("resize",h),window.removeEventListener("resize",d),document.removeEventListener("contextmenu",A,!0),clearInterval(p),clearTimeout(u),g&&g()}}),[e]);return e},SP=()=>((0,t.useEffect)((()=>{document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.msUserSelect="none",document.body.style.webkitUserDrag="none",document.body.style.userDrag="none";const e=e=>(e.preventDefault(),!1),t=e=>(e.preventDefault(),!1),n=e=>(e.preventDefault(),!1);return document.addEventListener("contextmenu",e,!0),document.addEventListener("selectstart",t,!0),document.addEventListener("dragstart",n,!0),()=>{document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.body.style.mozUserSelect="",document.body.style.msUserSelect="",document.body.style.webkitUserDrag="",document.body.style.userDrag="",document.removeEventListener("contextmenu",e,!0),document.removeEventListener("selectstart",t,!0),document.removeEventListener("dragstart",n,!0)}}),[]),(0,At.jsx)("div",{className:"fixed inset-0 w-screen h-screen z-[999999] flex items-center justify-center font-sans select-none text-center",children:(0,At.jsxs)("div",{className:"text-center p-8 max-w-2xl",children:[(0,At.jsxs)("h1",{className:"text-4xl font-bold text-style mb-4 drop-shadow-sm leading-[1.5] title-font",children:["Phong th\u1ee7y kh\xf4ng b\u1eb1ng L\xf2ng ng\u01b0\u1eddi",(0,At.jsx)("br",{}),"Ph\xe1p l\u1ef1c kh\xf4ng b\u1eb1ng Nghi\u1ec7p l\u1ef1c"]}),(0,At.jsx)("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"G\u1eb7p nhau l\xe0 duy\xean, Xa nhau c\u0169ng do duy\xean"}),(0,At.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mt-8 text-center",children:[(0,At.jsx)("p",{className:"text-base text-yellow-800 mb-2",children:"\u26a0\ufe0f H\u1ec7 th\u1ed1ng \u0111\xe3 ph\xe1t hi\u1ec7n Developer Tools \u0111ang m\u1edf"}),(0,At.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"\u0110\u1ec3 b\u1ea3o m\u1eadt th\xf4ng tin ng\u01b0\u1eddi d\xf9ng v\xe0 h\u1ec7 th\u1ed1ng"}),(0,At.jsx)("p",{className:"text-sm text-yellow-700 mb-2 font-bold",children:"B\u1ea1n h\u1eefu h\xe3y t\u1eaft Developer Tools v\xe0 t\u1ea3i l\u1ea1i trang \u0111\u1ec3 ti\u1ebfp t\u1ee5c xem"})]})]})}));new class{constructor(){this.collectionName="firebaseUsage",this.dailyStatsCollection="dailyUsageStats",this.monthlyStatsCollection="monthlyUsageStats"}async saveDailyUsage(e){try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return!1;const r=new Date,s=r.toISOString().split("T")[0],i={date:s,timestamp:r,firestore:{reads:e.firestore.reads,writes:e.firestore.writes,deletes:e.firestore.deletes,storage:e.firestore.storage},auth:{signUps:e.auth.signUps,signIns:e.auth.signIns},storage:{downloads:e.storage.downloads,uploads:e.storage.uploads,stored:e.storage.stored},alerts:e.alerts||[],totalUsers:e.totalUsers||0,totalPageViews:e.totalPageViews||0},a=`dailyUsage_${s}`;return localStorage.setItem(a,JSON.stringify(i)),!0}catch(t){return console.error("\u274c Error saving daily usage:",t),!1}}async saveMonthlyUsage(e){try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return!1;const r=new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`,i={month:s,timestamp:r,firestore:{reads:e.firestore.reads,writes:e.firestore.writes,deletes:e.firestore.deletes,storage:e.firestore.storage},auth:{signUps:e.auth.signUps,signIns:e.auth.signIns},storage:{downloads:e.storage.downloads,uploads:e.storage.uploads,stored:e.storage.stored},totalUsers:e.totalUsers||0,totalPageViews:e.totalPageViews||0,averageDailyUsers:e.averageDailyUsers||0},a=`monthlyUsage_${s}`;return localStorage.setItem(a,JSON.stringify(i)),!0}catch(t){return console.error("\u274c Error saving monthly usage:",t),!1}}async getWeeklyUsage(){try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return[];const r=new Date,s=(new Date(r.getTime()-6048e5),[]);for(let i=0;i<7;i++){const t=new Date(r.getTime()-24*i*60*60*1e3).toISOString().split("T")[0],n=`dailyUsage_${t}`,a=localStorage.getItem(n);if(a)try{const e=JSON.parse(a);s.push({id:t,...e})}catch(e){console.warn(`\u26a0\ufe0f Error parsing stored data for ${t}:`,e)}}return s}catch(e){return console.error("\u274c Error getting weekly usage:",e),[]}}async getMonthlyUsage(){try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return[];const r=new Date,s=(new Date(r.getTime()-2592e6),[]);for(let i=0;i<30;i++){const t=new Date(r.getTime()-24*i*60*60*1e3).toISOString().split("T")[0],n=`dailyUsage_${t}`,a=localStorage.getItem(n);if(a)try{const e=JSON.parse(a);s.push({id:t,...e})}catch(e){console.warn(`\u26a0\ufe0f Error parsing stored data for ${t}:`,e)}}return s}catch(e){return console.error("\u274c Error getting monthly usage:",e),[]}}async getQuarterlyUsage(){try{const t="true"===localStorage.getItem("adminFirebaseAuth"),n=localStorage.getItem("adminEmail");if(!t||"viettaquang.design@gmail.com"!==n)return[];const r=new Date,s=[];for(let i=0;i<3;i++){const t=new Date(r.getFullYear(),r.getMonth()-i,1),n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,a=`monthlyUsage_${n}`,o=localStorage.getItem(a);if(o)try{const e=JSON.parse(o);s.push({id:n,...e})}catch(e){console.warn(`\u26a0\ufe0f Error parsing stored data for ${n}:`,e)}}return s}catch(e){return console.error("\u274c Error getting quarterly usage:",e),[]}}calculateUsageTrends(e){if(e.length<2)return null;return{firestore:{reads:this.calculateTrend(e,"firestore.reads.used"),writes:this.calculateTrend(e,"firestore.writes.used"),deletes:this.calculateTrend(e,"firestore.deletes.used")},auth:{signUps:this.calculateTrend(e,"auth.signUps.used"),signIns:this.calculateTrend(e,"auth.signIns.used")},storage:{downloads:this.calculateTrend(e,"storage.downloads.used"),uploads:this.calculateTrend(e,"storage.uploads.used"),stored:this.calculateTrend(e,"storage.stored.used")}}}calculateTrend(e,t){const n=e.map((e=>{const n=t.split(".");let r=e;for(const t of n){var s;r=null===(s=r)||void 0===s?void 0:s[t]}return r||0})).reverse();if(n.length<2)return 0;const r=n[0],s=n[n.length-1];return 0===r?s>0?100:0:Math.round((s-r)/r*100)}predictFutureUsage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.length<3)return null;return{firestore:{reads:this.predictValue(e,"firestore.reads.used",t),writes:this.predictValue(e,"firestore.writes.used",t),deletes:this.predictValue(e,"firestore.deletes.used",t)},auth:{signUps:this.predictValue(e,"auth.signUps.used",t),signIns:this.predictValue(e,"auth.signIns.used",t)},storage:{downloads:this.predictValue(e,"storage.downloads.used",t),uploads:this.predictValue(e,"storage.uploads.used",t),stored:this.predictValue(e,"storage.stored.used",t)}}}predictValue(e,t,n){const r=e.map((e=>{const n=t.split(".");let r=e;for(const t of n){var s;r=null===(s=r)||void 0===s?void 0:s[t]}return r||0})).reverse();if(r.length<3)return r[r.length-1]||0;const s=r.length,i=Array.from({length:s},((e,t)=>t)),a=r,o=i.reduce(((e,t)=>e+t),0),l=a.reduce(((e,t)=>e+t),0),c=i.reduce(((e,t,n)=>e+t*a[n]),0),u=i.reduce(((e,t)=>e+t*t),0),d=(s*c-o*l)/(s*u-o*o),h=d*(s+n-1)+(l-d*o)/s;return Math.max(0,Math.round(h))}checkFutureLimits(e){if(!e)return null;const t={firestore:{reads:5e4,writes:2e4,deletes:2e4},auth:{signUps:1e4,signIns:1e5},storage:{downloads:1024,uploads:5120,stored:5120}},n=[];return Object.entries(e.firestore).forEach((e=>{let[r,s]=e;s>.8*t.firestore[r]&&n.push({service:"Firestore",metric:r,predicted:s,limit:t.firestore[r],percentage:Math.round(s/t.firestore[r]*100),severity:s>t.firestore[r]?"critical":"warning"})})),Object.entries(e.auth).forEach((e=>{let[r,s]=e;s>.8*t.auth[r]&&n.push({service:"Authentication",metric:r,predicted:s,limit:t.auth[r],percentage:Math.round(s/t.auth[r]*100),severity:s>t.auth[r]?"critical":"warning"})})),Object.entries(e.storage).forEach((e=>{let[r,s]=e;s>.8*t.storage[r]&&n.push({service:"Storage",metric:r,predicted:s,limit:t.storage[r],percentage:Math.round(s/t.storage[r]*100),severity:s>t.storage[r]?"critical":"warning"})})),n}async generateUsageReport(){try{const e=await this.getWeeklyUsage(),t=await this.getMonthlyUsage(),n=await this.getQuarterlyUsage(),r=this.calculateUsageTrends(e),s=this.predictFutureUsage(e,7),i=this.checkFutureLimits(s);return{period:{weekly:e.length,monthly:t.length,quarterly:n.length},currentUsage:e[0]||null,trends:r,predictions:s,warnings:i,recommendations:this.generateRecommendations(e,r,i)}}catch(e){return console.error("\u274c Error generating usage report:",e),null}}generateRecommendations(e,t,n){const r=[];if(!e||0===e.length)return r.push({type:"info",message:"Ch\u01b0a c\xf3 \u0111\u1ee7 d\u1eef li\u1ec7u \u0111\u1ec3 ph\xe2n t\xedch. H\xe3y ch\u1edd th\xeam v\xe0i ng\xe0y.",priority:"low"}),r;const s=e[0];if(s&&(s.firestore.reads.percentage>70&&r.push({type:"warning",message:"Firestore reads \u0111ang cao. Implement caching \u0111\u1ec3 gi\u1ea3m database calls.",priority:"high"}),s.firestore.writes.percentage>70&&r.push({type:"warning",message:"Firestore writes \u0111ang cao. Batch operations \u0111\u1ec3 gi\u1ea3m individual writes.",priority:"high"}),s.auth.signUps.percentage>70&&r.push({type:"warning",message:"Auth sign-ups \u0111ang cao. C\xf3 th\u1ec3 c\u1ea7n upgrade plan s\u1edbm.",priority:"medium"})),t&&(t.firestore.reads>20&&r.push({type:"info",message:"Firestore reads \u0111ang t\u0103ng nhanh. Monitor usage patterns.",priority:"medium"}),t.firestore.writes>20&&r.push({type:"info",message:"Firestore writes \u0111ang t\u0103ng nhanh. Optimize write operations.",priority:"medium"})),n&&n.length>0){const e=n.filter((e=>"critical"===e.severity));e.length>0&&r.push({type:"critical",message:"D\u1ef1 \u0111o\xe1n v\u01b0\u1ee3t qu\xe1 limits trong 7 ng\xe0y t\u1edbi. C\u1ea7n upgrade plan ho\u1eb7c optimize ngay.",priority:"critical"})}return 0===r.length&&r.push({type:"success",message:"Usage \u0111ang \u1ed5n \u0111\u1ecbnh. Ti\u1ebfp t\u1ee5c monitor v\xe0 optimize.",priority:"low"}),r}};const _P=new class{constructor(){this.isTracking=!1,this.lastTrackDate=null}startAutoTracking(){this.isTracking||(this.isTracking=!0,this.trackUsage(),this.interval=setInterval((()=>{this.trackUsage()}),216e5),this.scheduleDailyTracking())}stopAutoTracking(){this.interval&&(clearInterval(this.interval),this.interval=null),this.dailyTimeout&&(clearTimeout(this.dailyTimeout),this.dailyTimeout=null),this.isTracking=!1}scheduleDailyTracking(){const e=new Date,t=new Date(e);t.setDate(t.getDate()+1),t.setHours(0,0,0,0);const n=t.getTime()-e.getTime();this.dailyTimeout=setTimeout((()=>{this.trackUsage(),this.scheduleDailyTracking()}),n)}async trackUsage(){try{return}catch(e){console.error("\u274c Error tracking usage:",e)}}async calculateCurrentUsage(){try{if(!("true"===localStorage.getItem("adminFirebaseAuth")))return null;const e=new Date;e.setHours(0,0,0,0);const t=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("createdAt",">=",e)),n=(await(0,Hb.GG)(t)).docs.length,r=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users")),s=(await(0,Hb.GG)(r)).docs.length,i=(0,Hb.P)((0,Hb.rJ)(Qb.db,"pageVisits")),a=(await(0,Hb.GG)(i)).docs.reduce(((e,t)=>e+(t.data().count||0)),0),o=Math.min(50*n+a,5e4),l=Math.min(20*n+a,2e4),c=new Date;c.setDate(1),c.setHours(0,0,0,0);const u=(0,Hb.P)((0,Hb.rJ)(Qb.db,"users"),(0,Hb._M)("createdAt",">=",c)),d=(await(0,Hb.GG)(u)).docs.length,h=Math.min(3*d,1e5);return{firestore:{reads:{used:o,limit:5e4,percentage:Math.round(o/5e4*100)},writes:{used:l,limit:2e4,percentage:Math.round(l/2e4*100)},deletes:{used:Math.floor(.1*l),limit:2e4,percentage:Math.round(Math.floor(.1*l)/2e4*100)},storage:{used:Math.floor(.01*a),limit:1024,percentage:Math.round(Math.floor(.01*a)/1024*100)}},auth:{signUps:{used:d,limit:1e4,percentage:Math.round(d/1e4*100)},signIns:{used:h,limit:1e5,percentage:Math.round(h/1e5*100)}},storage:{downloads:{used:Math.min(5*s,1024),limit:1024,percentage:Math.round(Math.min(5*s,1024)/1024*100)},uploads:{used:Math.min(1*s,5120),limit:5120,percentage:Math.round(Math.min(1*s,5120)/5120*100)},stored:{used:Math.min(2*s,5120),limit:5120,percentage:Math.round(Math.min(2*s,5120)/5120*100)}},totalUsers:s,totalPageViews:a,averageDailyUsers:Math.round(s/30)}}catch(e){return console.error("Error calculating current usage:",e),null}}getStatus(){return{isTracking:this.isTracking,lastTrackDate:this.lastTrackDate,nextTrackDate:this.lastTrackDate?new Date(this.lastTrackDate.getTime()+216e5):null}}};"undefined"!==typeof window&&setTimeout((()=>{_P.startAutoTracking()}),5e3);const EP=()=>{const e=Y(),[n,r]=(0,t.useState)(!1);return"/login"===e.pathname||"/password-reset"===e.pathname||"/email-verification"===e.pathname||"/terms-of-service"===e.pathname||"/privacy-policy"===e.pathname||e.pathname.startsWith("/admin")||e.pathname.startsWith("/master")||"/404"===e.pathname?null:(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(HL,{onSidebarToggle:()=>r(!n),sidebarOpen:n}),(0,At.jsx)(pL,{isOpen:n,onClose:()=>r(!1),menuItems:SL,showStats:!0})]})},BP=()=>{const e=Y(),t="/login"===e.pathname||"/password-reset"===e.pathname||"/email-verification"===e.pathname||"/terms-of-service"===e.pathname||"/privacy-policy"===e.pathname,n=e.pathname.startsWith("/admin"),r="/404"===e.pathname;return(0,At.jsxs)("div",{className:`App ${n?"bg-gray-50":"bg-slate-950 has-gradient-top"} ${n?"":"overflow-hidden"} min-h-screen`,children:[!t&&!n&&!r&&(0,At.jsx)(EP,{}),(0,At.jsxs)("main",{className:t||n||r?"min-h-screen":"pt-[80px] min-h-screen z-20 relative",id:"topPage",children:[!t&&!n&&!r&&(0,At.jsx)("div",{className:"coverGrid fixed bottom-[0px] left-0 right-0 z-10 h-[100px] pointer-events-none"}),!t&&!n&&!r&&(0,At.jsx)(gP,{}),!t&&!n&&!r&&(0,At.jsx)(CP,{}),(0,At.jsxs)(ve,{children:[(0,At.jsx)(fe,{path:"/login",element:(0,At.jsx)(IM,{})}),(0,At.jsx)(fe,{path:"/password-reset",element:(0,At.jsx)(FM,{})}),(0,At.jsx)(fe,{path:"/email-verification",element:(0,At.jsx)(UM,{})}),(0,At.jsx)(fe,{path:"/account-blocked",element:(0,At.jsx)(KM,{})}),(0,At.jsx)(fe,{path:"/terms-of-service",element:(0,At.jsx)(HM,{})}),(0,At.jsx)(fe,{path:"/privacy-policy",element:(0,At.jsx)(QM,{})}),(0,At.jsx)(fe,{path:"/delete-data",element:(0,At.jsx)(ft,{})}),(0,At.jsx)(fe,{path:"/admin-setup",element:(0,At.jsx)(_k,{})}),(0,At.jsx)(fe,{path:"/master/login",element:(0,At.jsx)(XD,{})}),(0,At.jsx)(fe,{path:"/master/articles",element:(0,At.jsx)(oI,{children:(0,At.jsx)(eP,{})})}),(0,At.jsx)(fe,{path:"/master/articles/create",element:(0,At.jsx)(oI,{children:(0,At.jsx)(tP,{})})}),(0,At.jsx)(fe,{path:"/master/articles/:id/edit",element:(0,At.jsx)(oI,{children:(0,At.jsx)(nP,{})})}),(0,At.jsx)(fe,{path:"/admin/login",element:(0,At.jsx)(bI,{})}),(0,At.jsx)(fe,{path:"/admin/dashboard",element:(0,At.jsx)(aI,{children:(0,At.jsx)(EI,{})})}),(0,At.jsx)(fe,{path:"/admin/profile",element:(0,At.jsx)(aI,{children:(0,At.jsx)(_I,{})})}),(0,At.jsx)(fe,{path:"/admin/users",element:(0,At.jsx)(aI,{children:(0,At.jsx)(DI,{})})}),(0,At.jsx)(fe,{path:"/admin/users/:userId",element:(0,At.jsx)(aI,{children:(0,At.jsx)(UI,{})})}),(0,At.jsx)(fe,{path:"/admin/users/:userId/edit",element:(0,At.jsx)(aI,{children:(0,At.jsx)(RI,{})})}),(0,At.jsx)(fe,{path:"/admin/membership",element:(0,At.jsx)(aI,{children:(0,At.jsx)(OI,{})})}),(0,At.jsx)(fe,{path:"/admin/page-points",element:(0,At.jsx)(aI,{children:(0,At.jsx)(KI,{})})}),(0,At.jsx)(fe,{path:"/admin/features",element:(0,At.jsx)(aI,{children:(0,At.jsx)(YI,{})})}),(0,At.jsx)(fe,{path:"/admin/articles",element:(0,At.jsx)(aI,{children:(0,At.jsx)(ZI,{})})}),(0,At.jsx)(fe,{path:"/admin/articles/create",element:(0,At.jsx)(aI,{children:(0,At.jsx)(MD,{})})}),(0,At.jsx)(fe,{path:"/admin/articles/:id",element:(0,At.jsx)(aI,{children:(0,At.jsx)(LD,{})})}),(0,At.jsx)(fe,{path:"/admin/articles/:id/edit",element:(0,At.jsx)(aI,{children:(0,At.jsx)(kD,{})})}),(0,At.jsx)(fe,{path:"/admin/articles/config",element:(0,At.jsx)(aI,{children:(0,At.jsx)(ID,{})})}),(0,At.jsx)(fe,{path:"/admin/categories",element:(0,At.jsx)(aI,{children:(0,At.jsx)(DD,{})})}),(0,At.jsx)(fe,{path:"/admin/password-reset",element:(0,At.jsx)(aI,{children:(0,At.jsx)(QD,{})})}),(0,At.jsx)(fe,{path:"/admin/email-config",element:(0,At.jsx)(aI,{children:(0,At.jsx)(KD,{})})}),(0,At.jsx)(fe,{path:"/admin/migration",element:(0,At.jsx)(aI,{children:(0,At.jsx)($D,{})})}),(0,At.jsx)(fe,{path:"/admin/free-tier-monitor",element:(0,At.jsx)(aI,{children:(0,At.jsx)(aP,{})})}),(0,At.jsx)(fe,{path:"/profile",element:(0,At.jsx)(iL,{pageKey:"profile",children:(0,At.jsx)(gk,{})})}),(0,At.jsx)(fe,{path:"/pwa-manager",element:(0,At.jsx)(iL,{pageKey:"pwa-manager",children:(0,At.jsx)(xk,{})})}),(0,At.jsx)(fe,{path:"/",element:(0,At.jsx)($k,{})}),(0,At.jsx)(fe,{path:"/solar",element:(0,At.jsx)(iL,{pageKey:"solar",children:(0,At.jsx)(yw,{})})}),(0,At.jsx)(fe,{path:"/calendar",element:(0,At.jsx)(iL,{pageKey:"calendar",children:(0,At.jsx)(vC,{})})}),(0,At.jsx)(fe,{path:"/lich-viet",element:(0,At.jsx)(bC,{})}),(0,At.jsx)(fe,{path:"/battu",element:(0,At.jsx)(iL,{pageKey:"battu",children:(0,At.jsx)(bj,{})})}),(0,At.jsx)(fe,{path:"/lakinh",element:(0,At.jsx)(iL,{pageKey:"lakinh",children:(0,At.jsx)(jM,{})})}),(0,At.jsx)(fe,{path:"/luchao",element:(0,At.jsx)(iL,{pageKey:"luchao",children:(0,At.jsx)(KC,{})})}),(0,At.jsx)(fe,{path:"/kymon",element:(0,At.jsx)(iL,{pageKey:"kymon",children:(0,At.jsx)(CM,{})})}),(0,At.jsx)(fe,{path:"/news",element:(0,At.jsx)($k,{})}),(0,At.jsx)(fe,{path:"/news/:id/:slug",element:(0,At.jsx)(Jk,{})}),(0,At.jsx)(fe,{path:"/news/:id",element:(0,At.jsx)(rL,{})}),(0,At.jsx)(fe,{path:"/news/category/:categoryId",element:(0,At.jsx)(nL,{})}),(0,At.jsx)(fe,{path:"*",element:(0,At.jsx)(bk,{})})]})]}),!t&&!n&&!r&&!1]})};const MP=()=>{const{isLoading:e}=(()=>{const[e,n]=(0,t.useState)(!0),r=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{if(r.current)return;r.current=!0;const e=setTimeout((()=>{n(!1)}),1e3),t=setTimeout((()=>{n(!1)}),1500);return()=>{clearTimeout(e),clearTimeout(t)}}),[]),{isLoading:e}})(),n=Y(),r=["/login","/password-reset","/email-verification","/terms-of-service","/privacy-policy","/admin/login","/admin-setup","/account-blocked","/delete-data"].includes(n.pathname),s=n.pathname.startsWith("/admin")||n.pathname.startsWith("/master"),i="/404"===n.pathname,a=r||s||i,o=e&&!a;return(0,t.useEffect)((()=>{const e=setTimeout((()=>{const e=document.getElementById("initial-loading");e&&(e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),300))}),o?100:50);return window.reactAppReady=!0,()=>clearTimeout(e)}),[o]),(0,t.useEffect)((()=>{}),[e,a,o]),(0,At.jsxs)("div",{className:"relative",children:[(0,At.jsx)("div",{className:"transition-opacity duration-700 "+(o?"opacity-0":"opacity-100"),children:(0,At.jsx)(kP,{})}),o&&(0,At.jsx)("div",{className:"absolute inset-0 z-40 transition-opacity duration-700 "+(o?"opacity-100":"opacity-0"),children:(0,At.jsx)(Rk,{})})]})},kP=()=>{const{toasts:e,showToast:n,updateToast:r,removeToast:s}=uM(),{showDailyRewardsModal:i,setShowDailyRewardsModal:a}=Aw(),o=Y().pathname.startsWith("/admin");Ok(),Mk(),Lk(),(0,t.useEffect)((()=>{"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{})).catch((e=>{}))}))}),[]),t.useEffect((()=>(window.showToast=n,window.updateToast=r,window.removeToast=s,window.removeAllToasts=()=>s("all"),()=>{delete window.showToast,delete window.updateToast,delete window.removeToast,delete window.removeAllToasts})),[n,r,s]);return TP()?(0,At.jsx)(SP,{}):(0,At.jsxs)(At.Fragment,{children:[(0,At.jsx)(BP,{}),(0,At.jsx)(cM,{toasts:e,removeToast:s}),!o&&(0,At.jsx)(AP,{}),(0,At.jsx)(ok,{isOpen:i,onClose:()=>a(!1)}),!1,!o&&(0,At.jsx)(dP,{})]})},LP=function(){return(0,At.jsx)("div",{className:"relative",children:(0,At.jsx)(gw,{children:(0,At.jsx)(YB,{children:(0,At.jsx)(gL,{children:(0,At.jsx)(et,{children:(0,At.jsx)(MP,{})})})})})})},IP=e=>{e&&e instanceof Function&&n.e(206).then(n.bind(n,206)).then((t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)}))};s.createRoot(document.getElementById("root")).render((0,At.jsx)(LP,{})),IP()})()})();